{"version":3,"sources":["/Users/supreme/Desktop/marketsage/__tests__/setup.ts"],"sourcesContent":["/**\n * Jest Test Setup for LeadPulse\n * \n * Global test configuration and mocks\n */\n\n// Note: @testing-library/jest-dom not available, removed for compatibility\n\n// Mock Next.js modules\njest.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: jest.fn(),\n    replace: jest.fn(),\n    prefetch: jest.fn(),\n    back: jest.fn(),\n    forward: jest.fn(),\n    refresh: jest.fn(),\n  }),\n  useSearchParams: () => new URLSearchParams(),\n  usePathname: () => '/test-path',\n}));\n\njest.mock('next/headers', () => ({\n  headers: () => new Map(),\n  cookies: () => ({\n    get: jest.fn(),\n    set: jest.fn(),\n    delete: jest.fn(),\n  }),\n}));\n\n// Mock Next-Auth\njest.mock('next-auth', () => ({\n  getServerSession: jest.fn(),\n}));\n\njest.mock('next-auth/react', () => ({\n  useSession: () => ({\n    data: {\n      user: {\n        id: 'test-user-id',\n        email: 'test@example.com',\n        name: 'Test User',\n      },\n    },\n    status: 'authenticated',\n  }),\n  signIn: jest.fn(),\n  signOut: jest.fn(),\n  SessionProvider: ({ children }: { children: React.ReactNode }) => children,\n}));\n\n// Mock Prisma\njest.mock('@/lib/db/prisma', () => ({\n  __esModule: true,\n  default: {\n    $connect: jest.fn(),\n    $disconnect: jest.fn(),\n    $transaction: jest.fn(),\n    $queryRaw: jest.fn(),\n    user: {\n      findUnique: jest.fn(),\n      findMany: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn(),\n    },\n    contact: {\n      findUnique: jest.fn(),\n      findMany: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      upsert: jest.fn(),\n      delete: jest.fn(),\n    },\n    leadPulseVisitor: {\n      findUnique: jest.fn(),\n      findMany: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn(),\n    },\n    leadPulseTouchpoint: {\n      findMany: jest.fn(),\n      create: jest.fn(),\n      createMany: jest.fn(),\n    },\n    leadPulseForm: {\n      findUnique: jest.fn(),\n      findMany: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn(),\n    },\n    leadPulseFormSubmission: {\n      findMany: jest.fn(),\n      create: jest.fn(),\n      count: jest.fn(),\n    },\n    leadPulseSubmissionData: {\n      create: jest.fn(),\n      createMany: jest.fn(),\n    },\n    webhookEndpoint: {\n      findUnique: jest.fn(),\n      findMany: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn(),\n    },\n    webhookDelivery: {\n      findMany: jest.fn(),\n      create: jest.fn(),\n      upsert: jest.fn(),\n      deleteMany: jest.fn(),\n    },\n    incomingWebhook: {\n      findUnique: jest.fn(),\n      findMany: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn(),\n    },\n    leadPulseAuditLog: {\n      create: jest.fn(),\n      findMany: jest.fn(),\n    },\n    leadPulseConsent: {\n      findFirst: jest.fn(),\n      findMany: jest.fn(),\n      create: jest.fn(),\n      updateMany: jest.fn(),\n    },\n    leadPulseDataRetention: {\n      findMany: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n    },\n    leadPulseSecurityEvent: {\n      create: jest.fn(),\n      findMany: jest.fn(),\n    },\n    emailCampaign: {\n      findUnique: jest.fn(),\n      findMany: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn(),\n    },\n    emailActivity: {\n      findMany: jest.fn(),\n      create: jest.fn(),\n      deleteMany: jest.fn(),\n    },\n    workflow: {\n      findUnique: jest.fn(),\n      findMany: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn(),\n    },\n    workflowExecution: {\n      findUnique: jest.fn(),\n      findMany: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn(),\n      deleteMany: jest.fn(),\n    },\n    workflowExecutionStep: {\n      findMany: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      updateMany: jest.fn(),\n      deleteMany: jest.fn(),\n    },\n  },\n}));\n\n// Mock Redis/Cache\njest.mock('@/lib/cache/redis', () => ({\n  redis: {\n    get: jest.fn(),\n    set: jest.fn(),\n    del: jest.fn(),\n    ping: jest.fn(),\n    flushall: jest.fn(),\n    exists: jest.fn(),\n    expire: jest.fn(),\n    incr: jest.fn(),\n    decr: jest.fn(),\n    lpush: jest.fn(),\n    lrange: jest.fn(),\n    ltrim: jest.fn(),\n    sadd: jest.fn(),\n    srem: jest.fn(),\n    smembers: jest.fn(),\n    hget: jest.fn(),\n    hset: jest.fn(),\n    hdel: jest.fn(),\n    hgetall: jest.fn(),\n  },\n}));\n\n// Mock WebSocket\njest.mock('@/lib/websocket/leadpulse-realtime', () => ({\n  leadPulseRealtime: {\n    broadcastNewVisitor: jest.fn(),\n    broadcastVisitorActivity: jest.fn(),\n    broadcastAnalyticsUpdate: jest.fn(),\n    broadcastFormSubmission: jest.fn(),\n    getActiveConnections: jest.fn(() => 0),\n    initialize: jest.fn(),\n    shutdown: jest.fn(),\n  },\n}));\n\n// Mock Logger\njest.mock('@/lib/logger', () => ({\n  logger: {\n    info: jest.fn(),\n    warn: jest.fn(),\n    error: jest.fn(),\n    debug: jest.fn(),\n  },\n}));\n\n// Mock Environment Variables\nprocess.env.NODE_ENV = 'test';\nprocess.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/test_db';\nprocess.env.REDIS_URL = 'redis://localhost:6379';\nprocess.env.NEXTAUTH_SECRET = 'test-secret';\nprocess.env.NEXTAUTH_URL = 'http://localhost:3000';\n\n// Mock fetch globally\nglobal.fetch = jest.fn();\n\n// Mock WebSocket\nglobal.WebSocket = jest.fn().mockImplementation(() => ({\n  addEventListener: jest.fn(),\n  removeEventListener: jest.fn(),\n  send: jest.fn(),\n  close: jest.fn(),\n  readyState: 1,\n  CONNECTING: 0,\n  OPEN: 1,\n  CLOSING: 2,\n  CLOSED: 3,\n}));\n\n// Mock crypto for browser fingerprinting\nObject.defineProperty(global, 'crypto', {\n  value: {\n    getRandomValues: (arr: Uint8Array) => {\n      for (let i = 0; i < arr.length; i++) {\n        arr[i] = Math.floor(Math.random() * 256);\n      }\n      return arr;\n    },\n    randomUUID: () => 'test-uuid-1234-5678-9012',\n    createHmac: jest.fn(() => ({\n      update: jest.fn().mockReturnThis(),\n      digest: jest.fn(() => 'mocked-hash'),\n    })),\n    timingSafeEqual: jest.fn(() => true),\n  },\n});\n\n// Mock canvas for fingerprinting tests\nglobal.HTMLCanvasElement = jest.fn().mockImplementation(() => ({\n  getContext: jest.fn(() => ({\n    fillText: jest.fn(),\n    measureText: jest.fn(() => ({ width: 100 })),\n    font: '',\n    textBaseline: 'top',\n  })),\n  toDataURL: jest.fn(() => 'data:image/png;base64,test'),\n}));\n\nif (typeof HTMLCanvasElement !== 'undefined') {\n  HTMLCanvasElement.prototype.getContext = jest.fn(() => ({\n    fillText: jest.fn(),\n    measureText: jest.fn(() => ({ width: 100 })),\n    font: '',\n    textBaseline: 'top',\n  }));\n  \n  HTMLCanvasElement.prototype.toDataURL = jest.fn(() => 'data:image/png;base64,test');\n}\n\n// Mock localStorage\nconst localStorageMock = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n  length: 0,\n  key: jest.fn(),\n};\n\nObject.defineProperty(window, 'localStorage', {\n  value: localStorageMock,\n});\n\n// Mock sessionStorage\nObject.defineProperty(window, 'sessionStorage', {\n  value: localStorageMock,\n});\n\n// Mock navigator\nObject.defineProperty(window, 'navigator', {\n  value: {\n    userAgent: 'Mozilla/5.0 (Test Browser) LeadPulse/1.0',\n    language: 'en-US',\n    sendBeacon: jest.fn(() => true),\n    geolocation: {\n      getCurrentPosition: jest.fn(),\n      watchPosition: jest.fn(),\n      clearWatch: jest.fn(),\n    },\n  },\n});\n\n// Mock screen\nObject.defineProperty(window, 'screen', {\n  value: {\n    width: 1920,\n    height: 1080,\n    colorDepth: 24,\n  },\n});\n\n// Mock Date.now for consistent timestamps in tests\nconst mockTimestamp = 1640995200000; // 2022-01-01 00:00:00 UTC\nDate.now = jest.fn(() => mockTimestamp);\n\n// Mock URL constructor\nglobal.URL = jest.fn().mockImplementation((url) => ({\n  href: url,\n  origin: 'http://localhost:3000',\n  pathname: '/test',\n  search: '',\n  searchParams: new URLSearchParams(),\n  hash: '',\n  host: 'localhost:3000',\n  hostname: 'localhost',\n  port: '3000',\n  protocol: 'http:',\n}));\n\n// Console spy setup for test debugging\nglobal.console = {\n  ...console,\n  log: jest.fn(),\n  warn: jest.fn(),\n  error: jest.fn(),\n  info: jest.fn(),\n  debug: jest.fn(),\n};\n\n// Test timeout\njest.setTimeout(10000);\n\n// Clean up after each test\nafterEach(() => {\n  jest.clearAllMocks();\n  localStorageMock.clear();\n});\n\n// Global test utilities\nexport const testUtils = {\n  // Create a mock visitor object\n  createMockVisitor: (overrides = {}) => ({\n    id: 'visitor_test_123',\n    fingerprint: 'fp_test_fingerprint',\n    score: 50,\n    sessionCount: 1,\n    pageViews: 1,\n    firstSeen: new Date(),\n    lastSeen: new Date(),\n    location: {\n      country: 'Nigeria',\n      city: 'Lagos',\n      timezone: 'Africa/Lagos',\n    },\n    device: 'Desktop',\n    browser: 'Chrome',\n    isConverted: false,\n    metadata: {},\n    ...overrides,\n  }),\n\n  // Create a mock form object\n  createMockForm: (overrides = {}) => ({\n    id: 'form_test_123',\n    name: 'Test Contact Form',\n    description: 'A test form for unit testing',\n    status: 'active',\n    fields: [\n      {\n        id: 'email',\n        type: 'EMAIL',\n        label: 'Email Address',\n        required: true,\n        placeholder: 'Enter your email',\n      },\n      {\n        id: 'name',\n        type: 'TEXT',\n        label: 'Full Name',\n        required: true,\n        placeholder: 'Enter your name',\n      },\n    ],\n    styling: {\n      theme: 'light',\n      primaryColor: '#007bff',\n    },\n    settings: {\n      successMessage: 'Thank you for your submission!',\n      emailNotifications: true,\n    },\n    userId: 'user_test_123',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    ...overrides,\n  }),\n\n  // Create a mock contact object\n  createMockContact: (overrides = {}) => ({\n    id: 'contact_test_123',\n    email: 'test@example.com',\n    firstName: 'Test',\n    lastName: 'User',\n    company: 'Test Company',\n    phone: '+1234567890',\n    source: 'LeadPulse',\n    leadScore: 75,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    ...overrides,\n  }),\n\n  // Create a mock CRM integration config\n  createMockCRMConfig: (platform: 'salesforce' | 'hubspot' = 'salesforce', overrides = {}) => ({\n    platform,\n    credentials: platform === 'salesforce' \n      ? {\n          clientId: 'test_client_id',\n          clientSecret: 'test_client_secret',\n          refreshToken: 'test_refresh_token',\n          instanceUrl: 'https://test.salesforce.com',\n        }\n      : {\n          apiKey: 'test_hubspot_api_key',\n        },\n    mappings: {\n      leadSource: 'LeadPulse',\n    },\n    syncSettings: {\n      autoSync: true,\n      syncInterval: 60,\n      syncDirection: 'to_crm' as const,\n      conflictResolution: 'leadpulse_wins' as const,\n    },\n    ...overrides,\n  }),\n\n  // Mock NextRequest helper\n  createMockRequest: (url: string, options: RequestInit = {}) => {\n    return {\n      url,\n      method: options.method || 'GET',\n      headers: new Headers(options.headers),\n      json: async () => options.body ? JSON.parse(options.body as string) : {},\n      text: async () => options.body as string || '',\n      formData: async () => new FormData(),\n      ...options,\n    };\n  },\n\n  // Wait for async operations in tests\n  waitFor: (ms: number) => new Promise(resolve => setTimeout(resolve, ms)),\n\n  // Generate test fingerprint\n  generateTestFingerprint: () => `fp_test_${Math.random().toString(36).substr(2, 9)}`,\n\n  // Generate test session ID\n  generateTestSessionId: () => `lp_test_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n};\n\nexport default testUtils;"],"names":["jest","mock","useRouter","push","fn","replace","prefetch","back","forward","refresh","useSearchParams","URLSearchParams","usePathname","headers","Map","cookies","get","set","delete","getServerSession","useSession","data","user","id","email","name","status","signIn","signOut","SessionProvider","children","__esModule","default","$connect","$disconnect","$transaction","$queryRaw","findUnique","findMany","create","update","contact","upsert","leadPulseVisitor","leadPulseTouchpoint","createMany","leadPulseForm","leadPulseFormSubmission","count","leadPulseSubmissionData","webhookEndpoint","webhookDelivery","deleteMany","incomingWebhook","leadPulseAuditLog","leadPulseConsent","findFirst","updateMany","leadPulseDataRetention","leadPulseSecurityEvent","emailCampaign","emailActivity","workflow","workflowExecution","workflowExecutionStep","redis","del","ping","flushall","exists","expire","incr","decr","lpush","lrange","ltrim","sadd","srem","smembers","hget","hset","hdel","hgetall","leadPulseRealtime","broadcastNewVisitor","broadcastVisitorActivity","broadcastAnalyticsUpdate","broadcastFormSubmission","getActiveConnections","initialize","shutdown","logger","info","warn","error","debug","testUtils","process","env","NODE_ENV","DATABASE_URL","REDIS_URL","NEXTAUTH_SECRET","NEXTAUTH_URL","global","fetch","WebSocket","mockImplementation","addEventListener","removeEventListener","send","close","readyState","CONNECTING","OPEN","CLOSING","CLOSED","Object","defineProperty","value","getRandomValues","arr","i","length","Math","floor","random","randomUUID","createHmac","mockReturnThis","digest","timingSafeEqual","HTMLCanvasElement","getContext","fillText","measureText","width","font","textBaseline","toDataURL","prototype","localStorageMock","getItem","setItem","removeItem","clear","key","window","userAgent","language","sendBeacon","geolocation","getCurrentPosition","watchPosition","clearWatch","height","colorDepth","mockTimestamp","Date","now","URL","url","href","origin","pathname","search","searchParams","hash","host","hostname","port","protocol","console","log","setTimeout","afterEach","clearAllMocks","createMockVisitor","overrides","fingerprint","score","sessionCount","pageViews","firstSeen","lastSeen","location","country","city","timezone","device","browser","isConverted","metadata","createMockForm","description","fields","type","label","required","placeholder","styling","theme","primaryColor","settings","successMessage","emailNotifications","userId","createdAt","updatedAt","createMockContact","firstName","lastName","company","phone","source","leadScore","createMockCRMConfig","platform","credentials","clientId","clientSecret","refreshToken","instanceUrl","apiKey","mappings","leadSource","syncSettings","autoSync","syncInterval","syncDirection","conflictResolution","createMockRequest","options","method","Headers","json","body","JSON","parse","text","formData","FormData","waitFor","ms","Promise","resolve","generateTestFingerprint","toString","substr","generateTestSessionId"],"mappings":"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"}