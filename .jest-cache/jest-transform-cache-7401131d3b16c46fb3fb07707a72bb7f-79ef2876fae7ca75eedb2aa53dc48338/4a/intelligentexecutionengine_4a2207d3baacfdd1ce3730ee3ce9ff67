b130bc7d2ae992dcb61bb7529858ec3b
/**
 * Intelligent Execution Engine
 * ============================
 * Robust execution engine that can handle any creation, assignment, or data fetching task
 * Uses the intelligent intent analyzer to understand user requests
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "intelligentExecutionEngine", {
    enumerable: true,
    get: function() {
        return intelligentExecutionEngine;
    }
});
const _intelligentintentanalyzer = require("./intelligent-intent-analyzer");
const _taskexecutionmonitor = require("./task-execution-monitor");
const _bulkoperationsengine = require("./bulk-operations-engine");
const _workflownodebuilder = require("./workflow-node-builder");
const _intelligentreportingengine = require("./intelligent-reporting-engine");
const _advancedmonitoringorchestrator = require("../monitoring/advanced-monitoring-orchestrator");
const _autonomousabtestingengine = require("./autonomous-ab-testing-engine");
const _autonomouscompliancemonitor = require("../compliance/autonomous-compliance-monitor");
const _autonomouscontentgenerator = require("./autonomous-content-generator");
const _crossplatformintegrationhub = require("../integrations/cross-platform-integration-hub");
const _logger = require("../logger");
const _prisma = /*#__PURE__*/ _interop_require_default(require("../db/prisma"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
class IntelligentExecutionEngine {
    /**
   * Main execution method - handles any user request intelligently
   */ async executeUserRequest(userQuery, userId) {
        const startTime = Date.now();
        try {
            _logger.logger.info('Executing intelligent user request', {
                query: userQuery.substring(0, 100),
                userId
            });
            // Analyze user intent
            const intent = await _intelligentintentanalyzer.intelligentIntentAnalyzer.analyzeIntent(userQuery);
            // If intent is unclear, provide guidance
            if (intent.confidence < 0.6) {
                return {
                    success: true,
                    message: intent.suggestedResponse || 'I need more information to understand your request.',
                    suggestions: this.getHelpfulSuggestions(intent)
                };
            }
            // Execute based on intent
            let result;
            // Check if this is a bulk operation
            if (this.isBulkOperation(intent, userQuery)) {
                result = await this.executeBulkOperation(intent, userId, userQuery);
            } else if (this.isReportingRequest(intent, userQuery)) {
                result = await this.executeReportGeneration(intent, userId, userQuery);
            } else if (this.isIntegrationTestingRequest(intent, userQuery)) {
                result = await this.executeIntegrationTesting(intent, userId, userQuery);
            } else if (this.isSelfHealingRequest(intent, userQuery)) {
                result = await this.executeSelfHealing(intent, userId, userQuery);
            } else if (this.isModelDeploymentRequest(intent, userQuery)) {
                result = await this.executeModelDeployment(intent, userId, userQuery);
            } else if (this.isStrategicPlanningRequest(intent, userQuery)) {
                result = await this.executeStrategicPlanning(intent, userId, userQuery);
            } else if (this.isMultiAgentCoordinationRequest(intent, userQuery)) {
                result = await this.executeMultiAgentCoordination(intent, userId, userQuery);
            } else if (this.isInfrastructureManagementRequest(intent, userQuery)) {
                result = await this.executeInfrastructureManagement(intent, userId, userQuery);
            } else if (this.isAttributionAnalysisRequest(intent, userQuery)) {
                result = await this.executeAttributionAnalysis(intent, userId, userQuery);
            } else if (this.isMonitoringRequest(intent, userQuery)) {
                result = await this.executeMonitoring(intent, userId, userQuery);
            } else if (this.isAutonomousABTestingRequest(intent, userQuery)) {
                result = await this.executeAutonomousABTesting(intent, userId, userQuery);
            } else if (this.isComplianceMonitoringRequest(intent, userQuery)) {
                result = await this.executeComplianceMonitoring(intent, userId, userQuery);
            } else if (this.isContentGenerationRequest(intent, userQuery)) {
                result = await this.executeContentGeneration(intent, userId, userQuery);
            } else if (this.isCrossPlatformIntegrationRequest(intent, userQuery)) {
                result = await this.executeCrossPlatformIntegration(intent, userId, userQuery);
            } else {
                switch(intent.action){
                    case 'CREATE':
                        result = await this.executeCreation(intent, userId);
                        break;
                    case 'ASSIGN':
                        result = await this.executeAssignment(intent, userId);
                        break;
                    case 'FETCH':
                        result = await this.executeFetch(intent, userId);
                        break;
                    case 'UPDATE':
                        result = await this.executeUpdate(intent, userId);
                        break;
                    case 'DELETE':
                        result = await this.executeDelete(intent, userId);
                        break;
                    case 'ANALYZE':
                        result = await this.executeAnalysis(intent, userId);
                        break;
                    default:
                        result = {
                            success: false,
                            message: `I understand you want to ${intent.action.toLowerCase()} something, but I need more specific details.`,
                            suggestions: this.getActionSuggestions(intent.action)
                        };
                }
            }
            // Record execution metrics
            const executionTime = Date.now() - startTime;
            (0, _taskexecutionmonitor.recordTaskExecution)(`${intent.action}_${intent.entity}`, userId, 'UNKNOWN', result.success, executionTime, result.success ? undefined : 'execution_error', result.success ? undefined : result.error);
            return result;
        } catch (error) {
            const executionTime = Date.now() - startTime;
            const errorMessage = error instanceof Error ? error.message : String(error);
            _logger.logger.error('Intelligent execution failed', {
                error: errorMessage,
                query: userQuery.substring(0, 100),
                userId,
                executionTime
            });
            return {
                success: false,
                message: 'I encountered an error while processing your request. Please try again.',
                error: errorMessage,
                suggestions: [
                    'Try rephrasing your request',
                    'Check if you have the necessary permissions',
                    'Contact support if the issue persists'
                ]
            };
        }
    }
    /**
   * Execute creation tasks (contacts, workflows, campaigns, etc.)
   */ async executeCreation(intent, userId) {
        switch(intent.entity){
            case 'CONTACT':
                return await this.createContact(intent.data, userId);
            case 'USER':
                return await this.createUser(intent.data, userId);
            case 'ORGANIZATION':
                return await this.createOrganization(intent.data, userId);
            case 'WORKFLOW':
                return await this.createWorkflow(intent.data, userId);
            case 'CAMPAIGN':
                return await this.createCampaign(intent.data, userId);
            case 'TASK':
                return await this.createTask(intent.data, userId);
            case 'SEGMENT':
                return await this.createSegment(intent.data, userId);
            case 'TEMPLATE':
                return await this.createTemplate(intent.data, userId);
            case 'LIST':
                return await this.createList(intent.data, userId);
            case 'INTEGRATION':
                return await this.createIntegration(intent.data, userId);
            case 'JOURNEY':
                return await this.createJourney(intent.data, userId);
            case 'ABTEST':
                return await this.createABTest(intent.data, userId);
            default:
                return {
                    success: false,
                    message: `I can't create ${intent.entity.toLowerCase()} yet. Please specify what you'd like to create.`,
                    suggestions: [
                        'Try: "create a contact"',
                        'Try: "create a workflow"',
                        'Try: "create a campaign"',
                        'Try: "create a customer list"',
                        'Try: "create an A/B test"'
                    ]
                };
        }
    }
    /**
   * Create a contact with robust error handling
   */ async createContact(contactData, userId) {
        try {
            // Validate required data
            if (!contactData.name && !contactData.email && !contactData.phone) {
                return {
                    success: false,
                    message: 'I need at least a name, email, or phone number to create a contact.',
                    suggestions: [
                        'Try: "create contact John Doe, email john@example.com"',
                        'Include phone number or email address'
                    ]
                };
            }
            // Check if contact already exists
            const existingContact = await _prisma.default.contact.findFirst({
                where: {
                    OR: [
                        contactData.email ? {
                            email: contactData.email
                        } : {},
                        contactData.phone ? {
                            phone: contactData.phone
                        } : {}
                    ].filter((condition)=>Object.keys(condition).length > 0)
                }
            });
            if (existingContact) {
                return {
                    success: false,
                    message: `A contact with this ${contactData.email ? 'email' : 'phone number'} already exists.`,
                    data: existingContact,
                    suggestions: [
                        'Try updating the existing contact instead',
                        'Use a different email or phone number'
                    ]
                };
            }
            // Create the contact - ensure email is provided or generate one
            const emailToUse = contactData.email || `${contactData.name?.replace(/\s+/g, '').toLowerCase() || 'contact'}${Date.now()}@ai-generated.local`;
            const contact = await _prisma.default.contact.create({
                data: {
                    firstName: contactData.name?.split(' ')[0] || 'Unknown',
                    lastName: contactData.name?.split(' ').slice(1).join(' ') || '',
                    email: emailToUse,
                    phone: contactData.phone || null,
                    company: contactData.company || null,
                    notes: contactData.notes || null,
                    source: 'AI_CREATED',
                    status: 'ACTIVE',
                    createdById: userId
                }
            });
            _logger.logger.info('Contact created successfully', {
                contactId: contact.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Contact created successfully! ${contact.firstName} ${contact.lastName} has been added to your contacts.`,
                data: contact,
                details: {
                    contactId: contact.id,
                    name: `${contact.firstName} ${contact.lastName}`,
                    email: contact.email,
                    phone: contact.phone,
                    company: contact.company
                }
            };
        } catch (error) {
            _logger.logger.error('Contact creation failed', {
                error: error instanceof Error ? error.message : String(error),
                contactData,
                userId
            });
            return {
                success: false,
                message: 'Failed to create contact due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if all contact information is valid',
                    'Try again with different details'
                ]
            };
        }
    }
    /**
   * Create a user account with intelligent defaults
   */ async createUser(userData, userId) {
        try {
            // Check if the current user has permission to create users
            const currentUser = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true
                }
            });
            if (!currentUser || ![
                'ADMIN',
                'SUPER_ADMIN'
            ].includes(currentUser.role)) {
                return {
                    success: false,
                    message: 'You need Admin or Super Admin privileges to create user accounts.',
                    suggestions: [
                        'Contact your system administrator',
                        'Request elevated permissions'
                    ]
                };
            }
            // Validate required data
            if (!userData.email) {
                return {
                    success: false,
                    message: 'Email address is required to create a user account.',
                    suggestions: [
                        'Try: "create user john@company.com with name John Doe"',
                        'Include a valid email address'
                    ]
                };
            }
            if (!userData.name) {
                return {
                    success: false,
                    message: 'User name is required to create a user account.',
                    suggestions: [
                        'Try: "create user john@company.com with name John Doe"',
                        'Include the user\'s full name'
                    ]
                };
            }
            // Check if user already exists
            const existingUser = await _prisma.default.user.findUnique({
                where: {
                    email: userData.email
                }
            });
            if (existingUser) {
                return {
                    success: false,
                    message: `A user with email ${userData.email} already exists.`,
                    suggestions: [
                        'Try a different email address',
                        'Update the existing user instead'
                    ]
                };
            }
            // Generate a temporary password if not provided
            const tempPassword = userData.password || this.generateTemporaryPassword();
            const bcrypt = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("bcryptjs")));
            const hashedPassword = await bcrypt.hash(tempPassword, 10);
            // Determine role (default to USER, only SUPER_ADMIN can create ADMIN/SUPER_ADMIN)
            let role = userData.role || 'USER';
            if ([
                'ADMIN',
                'SUPER_ADMIN'
            ].includes(role) && currentUser.role !== 'SUPER_ADMIN') {
                role = 'USER';
            }
            // Create the user
            const newUser = await _prisma.default.user.create({
                data: {
                    name: userData.name,
                    email: userData.email,
                    hashedPassword,
                    role,
                    phone: userData.phone,
                    company: userData.company,
                    isActive: true,
                    emailVerified: null
                },
                select: {
                    id: true,
                    name: true,
                    email: true,
                    role: true,
                    company: true,
                    phone: true,
                    createdAt: true
                }
            });
            // Create default user preferences
            await _prisma.default.userPreference.create({
                data: {
                    userId: newUser.id,
                    preferences: {
                        theme: 'light',
                        notifications: true,
                        emailNotifications: true,
                        language: 'en',
                        timezone: userData.timezone || 'UTC'
                    }
                }
            });
            _logger.logger.info('User created successfully', {
                newUserId: newUser.id,
                email: newUser.email,
                createdBy: userId
            });
            return {
                success: true,
                message: `âœ… User account created successfully! ${newUser.name} (${newUser.email}) has been added to the system.${!userData.password ? `\n\nðŸ”‘ Temporary password: ${tempPassword}\n(User should change this on first login)` : ''}`,
                data: newUser,
                details: {
                    userId: newUser.id,
                    name: newUser.name,
                    email: newUser.email,
                    role: newUser.role,
                    company: newUser.company,
                    temporaryPassword: !userData.password ? tempPassword : undefined
                }
            };
        } catch (error) {
            _logger.logger.error('User creation failed', {
                error: error instanceof Error ? error.message : String(error),
                userData: {
                    ...userData,
                    password: '[REDACTED]'
                },
                userId
            });
            return {
                success: false,
                message: 'Failed to create user account due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if all user information is valid',
                    'Verify email format',
                    'Try again with different details'
                ]
            };
        }
    }
    /**
   * Generate a secure temporary password
   */ generateTemporaryPassword() {
        const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$%';
        let password = '';
        for(let i = 0; i < 12; i++){
            password += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return password;
    }
    /**
   * Create an organization with intelligent defaults
   */ async createOrganization(orgData, userId) {
        try {
            // Check if the current user has permission to create organizations
            const currentUser = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true
                }
            });
            if (!currentUser || currentUser.role !== 'SUPER_ADMIN') {
                return {
                    success: false,
                    message: 'Only Super Admin users can create new organizations.',
                    suggestions: [
                        'Contact your system administrator',
                        'Request Super Admin privileges'
                    ]
                };
            }
            // Validate required data
            if (!orgData.name) {
                return {
                    success: false,
                    message: 'Organization name is required.',
                    suggestions: [
                        'Try: "create organization Acme Corp with domain acme.com"',
                        'Include the organization name'
                    ]
                };
            }
            // Check if organization already exists
            const existingOrg = await _prisma.default.organization.findFirst({
                where: {
                    OR: [
                        {
                            name: orgData.name
                        },
                        orgData.domain ? {
                            domain: orgData.domain
                        } : {}
                    ].filter((condition)=>Object.keys(condition).length > 0)
                }
            });
            if (existingOrg) {
                return {
                    success: false,
                    message: `An organization with ${existingOrg.name === orgData.name ? 'that name' : 'that domain'} already exists.`,
                    suggestions: [
                        'Try a different organization name',
                        'Use a different domain',
                        'Update the existing organization instead'
                    ]
                };
            }
            // Create the organization
            const newOrg = await _prisma.default.organization.create({
                data: {
                    name: orgData.name,
                    domain: orgData.domain,
                    industry: orgData.industry || 'fintech',
                    country: orgData.country || 'Nigeria',
                    timezone: orgData.timezone || 'Africa/Lagos',
                    settings: {
                        branding: {
                            primaryColor: orgData.primaryColor || '#3B82F6',
                            logo: orgData.logo || null
                        },
                        features: {
                            emailMarketing: true,
                            smsMarketing: true,
                            whatsappMarketing: true,
                            leadPulse: true,
                            analytics: true,
                            workflows: true
                        },
                        limits: {
                            contacts: orgData.contactLimit || 10000,
                            campaigns: orgData.campaignLimit || 100,
                            users: orgData.userLimit || 10
                        },
                        compliance: {
                            gdprEnabled: true,
                            dataRetentionDays: 365
                        }
                    },
                    isActive: true
                }
            });
            // Create default subscription if not exists
            if (orgData.subscriptionPlan) {
                await _prisma.default.subscription.create({
                    data: {
                        organizationId: newOrg.id,
                        planId: orgData.subscriptionPlan,
                        status: 'ACTIVE',
                        currentPeriodStart: new Date(),
                        currentPeriodEnd: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000)
                    }
                });
            }
            // Create admin user for the organization if provided
            if (orgData.adminUser) {
                const tempPassword = this.generateTemporaryPassword();
                const bcrypt = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("bcryptjs")));
                const hashedPassword = await bcrypt.hash(tempPassword, 10);
                const adminUser = await _prisma.default.user.create({
                    data: {
                        name: orgData.adminUser.name,
                        email: orgData.adminUser.email,
                        hashedPassword,
                        role: 'ADMIN',
                        organizationId: newOrg.id,
                        phone: orgData.adminUser.phone,
                        isActive: true,
                        emailVerified: null
                    }
                });
                // Create admin user preferences
                await _prisma.default.userPreference.create({
                    data: {
                        userId: adminUser.id,
                        preferences: {
                            theme: 'light',
                            notifications: true,
                            emailNotifications: true,
                            language: 'en',
                            timezone: orgData.timezone || 'Africa/Lagos'
                        }
                    }
                });
                _logger.logger.info('Organization and admin user created successfully', {
                    orgId: newOrg.id,
                    adminUserId: adminUser.id,
                    createdBy: userId
                });
                return {
                    success: true,
                    message: `âœ… Organization "${newOrg.name}" created successfully!\n\nðŸ‘¤ Admin user created: ${adminUser.name} (${adminUser.email})\nðŸ”‘ Temporary password: ${tempPassword}\n(Admin should change this on first login)`,
                    data: {
                        organization: newOrg,
                        adminUser
                    },
                    details: {
                        organizationId: newOrg.id,
                        name: newOrg.name,
                        domain: newOrg.domain,
                        industry: newOrg.industry,
                        country: newOrg.country,
                        adminUser: {
                            userId: adminUser.id,
                            name: adminUser.name,
                            email: adminUser.email,
                            temporaryPassword: tempPassword
                        }
                    }
                };
            }
            _logger.logger.info('Organization created successfully', {
                orgId: newOrg.id,
                createdBy: userId
            });
            return {
                success: true,
                message: `âœ… Organization "${newOrg.name}" created successfully! You can now add users and configure settings.`,
                data: newOrg,
                details: {
                    organizationId: newOrg.id,
                    name: newOrg.name,
                    domain: newOrg.domain,
                    industry: newOrg.industry,
                    country: newOrg.country,
                    settings: newOrg.settings
                }
            };
        } catch (error) {
            _logger.logger.error('Organization creation failed', {
                error: error instanceof Error ? error.message : String(error),
                orgData,
                userId
            });
            return {
                success: false,
                message: 'Failed to create organization due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if all organization information is valid',
                    'Verify domain format',
                    'Try again with different details'
                ]
            };
        }
    }
    /**
   * Create a workflow with intelligent AI-powered node generation
   */ async createWorkflow(workflowData, userId) {
        try {
            const workflowName = workflowData.name || `${workflowData.type || 'Custom'} Workflow - ${new Date().toLocaleDateString()}`;
            const workflowType = workflowData.type || 'general';
            const market = workflowData.market || 'multi_market';
            // Get user info for advanced workflow building
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true
                }
            });
            if (!user) {
                throw new Error('User not found');
            }
            // Build workflow description for AI processing
            const workflowDescription = this.buildWorkflowDescription(workflowData, workflowType, market);
            // Extract trigger and actions from workflow data or use intelligent defaults
            const trigger = this.extractTriggerFromWorkflow(workflowData, workflowType);
            const actions = this.extractActionsFromWorkflow(workflowData, workflowType, market);
            // Use the advanced workflow node builder
            const buildResult = await _workflownodebuilder.workflowNodeBuilder.buildWorkflowFromDescription({
                description: workflowDescription,
                trigger,
                actions,
                conditions: workflowData.conditions || [],
                integrations: workflowData.integrations || [],
                variables: workflowData.variables || {},
                options: {
                    generatePreview: false,
                    autoConnect: true,
                    optimizeForPerformance: true
                }
            }, userId, user.role, user.organizationId);
            if (!buildResult.success) {
                _logger.logger.error('Advanced workflow building failed', {
                    errors: buildResult.errors,
                    warnings: buildResult.warnings,
                    workflowData
                });
                // Fallback to simple workflow creation
                return await this.createSimpleWorkflow(workflowData, userId, workflowName, workflowType, market);
            }
            // Create the main workflow record
            const workflow = await _prisma.default.workflow.create({
                data: {
                    name: workflowName,
                    description: workflowData.objective || `AI-generated ${workflowType} workflow for ${market} market`,
                    status: 'INACTIVE',
                    definition: JSON.stringify({
                        type: workflowType,
                        market: market,
                        industry: workflowData.industry || 'fintech',
                        objective: workflowData.objective,
                        aiGenerated: true,
                        advancedNodes: true,
                        complexity: buildResult.estimatedComplexity,
                        estimatedExecutionTime: buildResult.estimatedExecutionTime,
                        nodeCount: buildResult.nodes.length,
                        connectionCount: buildResult.connections.length,
                        suggestions: buildResult.suggestions,
                        warnings: buildResult.warnings
                    }),
                    createdById: userId
                }
            });
            // Create workflow nodes from AI-generated structure (using only schema-compatible fields)
            const nodeIdMap = new Map();
            for (const node of buildResult.nodes){
                // Enhance config with additional AI-generated metadata
                const enhancedConfig = {
                    ...node.config,
                    aiGenerated: true,
                    estimatedExecutionTime: node.metadata.averageExecutionTime,
                    nodeDescription: node.description,
                    conditions: node.conditions || []
                };
                const dbNode = await _prisma.default.workflowNode.create({
                    data: {
                        workflowId: workflow.id,
                        name: node.name,
                        type: this.mapToSchemaNodeType(node.type),
                        config: JSON.stringify(enhancedConfig),
                        positionX: node.position.x,
                        positionY: node.position.y
                    }
                });
                nodeIdMap.set(node.id, dbNode.id);
            }
            // Create workflow connections (using Connection model with correct field names)
            for (const connection of buildResult.connections){
                const sourceNodeId = nodeIdMap.get(connection.sourceNodeId);
                const targetNodeId = nodeIdMap.get(connection.targetNodeId);
                if (sourceNodeId && targetNodeId) {
                    await _prisma.default.connection.create({
                        data: {
                            sourceId: sourceNodeId,
                            targetId: targetNodeId,
                            condition: connection.condition ? JSON.stringify(connection.condition) : null
                        }
                    });
                }
            }
            _logger.logger.info('Advanced AI workflow created successfully', {
                workflowId: workflow.id,
                userId,
                complexity: buildResult.estimatedComplexity,
                nodeCount: buildResult.nodes.length,
                suggestions: buildResult.suggestions.length,
                warnings: buildResult.warnings.length
            });
            return {
                success: true,
                message: `âœ… Advanced workflow "${workflowName}" created successfully! ${buildResult.nodes.length} intelligent nodes generated with ${buildResult.connections.length} connections.`,
                data: workflow,
                details: {
                    workflowId: workflow.id,
                    name: workflow.name,
                    type: workflowType,
                    market: market,
                    complexity: buildResult.estimatedComplexity,
                    nodesCreated: buildResult.nodes.length,
                    connectionsCreated: buildResult.connections.length,
                    estimatedExecutionTime: buildResult.estimatedExecutionTime,
                    status: workflow.status,
                    aiSuggestions: buildResult.suggestions,
                    warnings: buildResult.warnings.length > 0 ? buildResult.warnings : undefined
                }
            };
        } catch (error) {
            _logger.logger.error('Advanced workflow creation failed', {
                error: error instanceof Error ? error.message : String(error),
                workflowData,
                userId
            });
            // Fallback to simple workflow creation
            try {
                const workflowName = workflowData.name || `${workflowData.type || 'Custom'} Workflow - ${new Date().toLocaleDateString()}`;
                const workflowType = workflowData.type || 'general';
                const market = workflowData.market || 'multi_market';
                return await this.createSimpleWorkflow(workflowData, userId, workflowName, workflowType, market);
            } catch (fallbackError) {
                return {
                    success: false,
                    message: 'Failed to create workflow due to a system error.',
                    error: error instanceof Error ? error.message : 'Unknown error',
                    suggestions: [
                        'Try with a simpler workflow description',
                        'Check if you have permission to create workflows',
                        'Verify your workflow data is properly formatted'
                    ]
                };
            }
        }
    }
    /**
   * Create a campaign with intelligent configuration
   */ async createCampaign(campaignData, userId) {
        try {
            const campaignName = campaignData.name || `${campaignData.type || 'Email'} Campaign - ${new Date().toLocaleDateString()}`;
            const campaignType = campaignData.type || 'email';
            let campaign;
            if (campaignType === 'email') {
                campaign = await _prisma.default.emailCampaign.create({
                    data: {
                        name: campaignName,
                        description: campaignData.objective || `AI-generated ${campaignType} campaign`,
                        subject: `${campaignData.objective || 'Important Update'} - MarketSage`,
                        from: 'noreply@marketsage.africa',
                        content: campaignData.content || this.generateDefaultEmailContent(campaignData),
                        status: 'DRAFT',
                        createdById: userId
                    }
                });
            } else if (campaignType === 'sms') {
                campaign = await _prisma.default.smsCampaign.create({
                    data: {
                        name: campaignName,
                        description: campaignData.objective || `AI-generated SMS campaign`,
                        content: campaignData.content || this.generateDefaultSMSContent(campaignData),
                        status: 'DRAFT',
                        createdById: userId
                    }
                });
            } else if (campaignType === 'whatsapp') {
                campaign = await _prisma.default.whatsAppCampaign.create({
                    data: {
                        name: campaignName,
                        description: campaignData.objective || `AI-generated WhatsApp campaign`,
                        from: '+1234567890',
                        content: campaignData.content || this.generateDefaultWhatsAppContent(campaignData),
                        status: 'DRAFT',
                        createdById: userId
                    }
                });
            } else {
                throw new Error(`Unsupported campaign type: ${campaignType}`);
            }
            _logger.logger.info('Campaign created successfully', {
                campaignId: campaign.id,
                type: campaignType,
                userId
            });
            return {
                success: true,
                message: `âœ… ${campaignType.toUpperCase()} campaign "${campaignName}" created successfully!`,
                data: campaign,
                details: {
                    campaignId: campaign.id,
                    name: campaign.name,
                    type: campaignType,
                    status: campaign.status,
                    market: campaignData.market,
                    audience: campaignData.audience
                }
            };
        } catch (error) {
            _logger.logger.error('Campaign creation failed', {
                error: error instanceof Error ? error.message : String(error),
                campaignData,
                userId
            });
            return {
                success: false,
                message: 'Failed to create campaign due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try with a different campaign name',
                    'Specify campaign type (email, sms, whatsapp)'
                ]
            };
        }
    }
    /**
   * Create a task with intelligent assignment
   */ async createTask(taskData, userId) {
        try {
            // Find assignee - avoid super admin as default
            let assigneeId = userId; // Default to creator
            let assigneeFound = false;
            if (taskData.assignee) {
                // First try fuzzy name matching
                const assignee = await this.findUserByName(taskData.assignee);
                if (assignee) {
                    assigneeId = assignee.id;
                    assigneeFound = true;
                } else {
                    // Map common role descriptions to actual UserRole enum values
                    const roleMapping = {
                        'sales team': 'USER',
                        'sales': 'USER',
                        'marketing team': 'USER',
                        'marketing': 'USER',
                        'team': 'USER',
                        'marketing team lead': 'ADMIN',
                        'marketing lead': 'ADMIN',
                        'team lead': 'ADMIN',
                        'admin': 'ADMIN',
                        'it admin': 'IT_ADMIN'
                    };
                    const normalizedAssignee = taskData.assignee.toLowerCase();
                    const mappedRole = roleMapping[normalizedAssignee];
                    if (mappedRole) {
                        const roleAssignee = await _prisma.default.user.findFirst({
                            where: {
                                role: mappedRole,
                                isActive: true,
                                NOT: {
                                    role: 'SUPER_ADMIN'
                                } // Avoid super admin
                            }
                        });
                        if (roleAssignee) {
                            assigneeId = roleAssignee.id;
                            assigneeFound = true;
                        }
                    }
                }
            }
            // If no specific assignee found, default to a regular team member instead of creator
            if (!assigneeFound && !taskData.assignee) {
                const teamMember = await _prisma.default.user.findFirst({
                    where: {
                        role: 'USER',
                        isActive: true
                    }
                });
                if (teamMember) {
                    assigneeId = teamMember.id;
                }
            }
            const task = await _prisma.default.task.create({
                data: {
                    title: taskData.title || 'AI-Generated Task',
                    description: taskData.description || 'Task created by Supreme-AI',
                    status: 'TODO',
                    priority: taskData.priority || 'MEDIUM',
                    creatorId: userId,
                    assigneeId: assigneeId,
                    dueDate: taskData.dueDate ? new Date(taskData.dueDate) : new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) // 7 days from now
                }
            });
            const assignee = await _prisma.default.user.findUnique({
                where: {
                    id: assigneeId
                }
            });
            _logger.logger.info('Task created successfully', {
                taskId: task.id,
                assigneeId,
                userId
            });
            return {
                success: true,
                message: `âœ… Task "${task.title}" created and assigned to ${assignee?.name || 'you'}!`,
                data: task,
                details: {
                    taskId: task.id,
                    title: task.title,
                    assignee: assignee?.name,
                    priority: task.priority,
                    dueDate: task.dueDate
                }
            };
        } catch (error) {
            _logger.logger.error('Task creation failed', {
                error: error instanceof Error ? error.message : String(error),
                taskData,
                userId
            });
            return {
                success: false,
                message: 'Failed to create task due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try with a simpler task title',
                    'Check if the assignee exists'
                ]
            };
        }
    }
    /**
   * Execute assignment tasks
   */ async executeAssignment(intent, userId) {
        try {
            const taskData = intent.data;
            const assigneeHint = intent.context?.assignee || taskData.assignee;
            if (assigneeHint) {
                // Find user by name with fuzzy matching
                const assignee = await this.findUserByName(assigneeHint);
                if (assignee) {
                    taskData.assignee = assignee.id;
                    taskData.assigneeName = assignee.name;
                }
            }
            return await this.createTask(taskData, userId);
        } catch (error) {
            return {
                success: false,
                message: 'Failed to assign task due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Find user by name with fuzzy matching
   */ async findUserByName(nameHint) {
        const normalizedHint = nameHint.toLowerCase().trim();
        // Try exact match first
        let user = await _prisma.default.user.findFirst({
            where: {
                isActive: true,
                OR: [
                    {
                        name: {
                            contains: nameHint,
                            mode: 'insensitive'
                        }
                    },
                    {
                        email: {
                            contains: nameHint,
                            mode: 'insensitive'
                        }
                    }
                ]
            }
        });
        if (user) return user;
        // Try fuzzy matching by parts (for cases like "okafor" -> "Okafor Ngozi") 
        const nameParts = normalizedHint.split(' ');
        for (const part of nameParts){
            if (part.length > 2) {
                user = await _prisma.default.user.findFirst({
                    where: {
                        isActive: true,
                        OR: [
                            {
                                name: {
                                    contains: part,
                                    mode: 'insensitive'
                                }
                            },
                            {
                                email: {
                                    contains: part,
                                    mode: 'insensitive'
                                }
                            }
                        ]
                    }
                });
                if (user) return user;
            }
        }
        return null;
    }
    /**
   * Execute data fetching tasks
   */ async executeFetch(intent, userId) {
        const fetchRequest = intent.data;
        try {
            switch(fetchRequest.source){
                case 'leadpulse':
                    return await this.fetchLeadPulseData(fetchRequest);
                case 'analytics':
                    return await this.fetchAnalyticsData(fetchRequest);
                case 'users':
                    return await this.fetchUserData(fetchRequest);
                case 'campaigns':
                    return await this.fetchCampaignData(fetchRequest);
                default:
                    return await this.fetchGeneralData(fetchRequest);
            }
        } catch (error) {
            return {
                success: false,
                message: 'Failed to fetch data due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Fetch LeadPulse analytics data
   */ async fetchLeadPulseData(request) {
        try {
            // Get basic visitor data
            const visitorCount = await _prisma.default.visitorActivity.count();
            const recentVisitors = await _prisma.default.visitorActivity.findMany({
                take: 10,
                orderBy: {
                    timestamp: 'desc'
                },
                include: {
                    visitor: {
                        select: {
                            id: true,
                            location: true,
                            device: true,
                            source: true
                        }
                    }
                }
            });
            return {
                success: true,
                message: `ðŸ“Š LeadPulse Data Summary: ${visitorCount} total visitors tracked`,
                data: {
                    totalVisitors: visitorCount,
                    recentVisitors: recentVisitors.slice(0, 5),
                    summary: `You have ${visitorCount} visitors tracked with ${recentVisitors.length} recent activities.`
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Could not fetch LeadPulse data at this time.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Generate intelligent workflow nodes based on type and market
   */ generateDefaultWorkflowNodes(type, market) {
        // Nigerian fintech onboarding workflow
        if (type.toLowerCase().includes('onboarding') && market.toLowerCase().includes('nigerian')) {
            return [
                {
                    name: 'Start',
                    type: 'START',
                    config: {
                        message: 'Nigerian fintech onboarding initiated'
                    }
                },
                {
                    name: 'Welcome SMS',
                    type: 'SEND_SMS',
                    config: {
                        template: 'welcome_nigeria',
                        delay: 0
                    }
                },
                {
                    name: 'BVN Collection',
                    type: 'FORM',
                    config: {
                        formType: 'bvn_verification',
                        required: true
                    }
                },
                {
                    name: 'BVN Verification',
                    type: 'API_CALL',
                    config: {
                        endpoint: 'verify_bvn',
                        timeout: 30000
                    }
                },
                {
                    name: 'Identity Verification',
                    type: 'CONDITIONAL',
                    config: {
                        condition: 'bvn_verified'
                    }
                },
                {
                    name: 'KYC Document Upload',
                    type: 'FORM',
                    config: {
                        formType: 'kyc_documents',
                        required: true
                    }
                },
                {
                    name: 'Account Creation',
                    type: 'API_CALL',
                    config: {
                        endpoint: 'create_account',
                        delay: 1000
                    }
                },
                {
                    name: 'Welcome Email',
                    type: 'SEND_EMAIL',
                    config: {
                        template: 'account_created_nigeria',
                        delay: 5000
                    }
                },
                {
                    name: 'Send Debit Card',
                    type: 'TASK',
                    config: {
                        taskType: 'physical_card_request',
                        priority: 'HIGH'
                    }
                },
                {
                    name: 'End',
                    type: 'END',
                    config: {
                        message: 'Nigerian fintech onboarding completed'
                    }
                }
            ];
        }
        // Cross-border remittance automation (Ghana to UK)
        if (type.toLowerCase().includes('remittance') && market.toLowerCase().includes('ghana')) {
            return [
                {
                    name: 'Start',
                    type: 'START',
                    config: {
                        message: 'Cross-border remittance automation initiated'
                    }
                },
                {
                    name: 'Compliance Check',
                    type: 'API_CALL',
                    config: {
                        endpoint: 'ghana_compliance_check',
                        timeout: 15000
                    }
                },
                {
                    name: 'AML Screening',
                    type: 'API_CALL',
                    config: {
                        endpoint: 'aml_screening',
                        required: true
                    }
                },
                {
                    name: 'Exchange Rate Lock',
                    type: 'API_CALL',
                    config: {
                        endpoint: 'lock_exchange_rate',
                        delay: 0
                    }
                },
                {
                    name: 'Payment Processing',
                    type: 'CONDITIONAL',
                    config: {
                        condition: 'compliance_passed'
                    }
                },
                {
                    name: 'UK Bank Verification',
                    type: 'API_CALL',
                    config: {
                        endpoint: 'verify_uk_bank',
                        timeout: 20000
                    }
                },
                {
                    name: 'Transfer Execution',
                    type: 'API_CALL',
                    config: {
                        endpoint: 'execute_transfer',
                        priority: 'HIGH'
                    }
                },
                {
                    name: 'SMS Confirmation',
                    type: 'SEND_SMS',
                    config: {
                        template: 'transfer_sent_ghana',
                        delay: 2000
                    }
                },
                {
                    name: 'UK Recipient Notification',
                    type: 'SEND_EMAIL',
                    config: {
                        template: 'funds_incoming_uk',
                        delay: 5000
                    }
                },
                {
                    name: 'End',
                    type: 'END',
                    config: {
                        message: 'Cross-border transfer completed'
                    }
                }
            ];
        }
        // General fintech workflow
        if (type.toLowerCase().includes('fintech')) {
            return [
                {
                    name: 'Start',
                    type: 'START',
                    config: {
                        message: 'Fintech workflow initiated'
                    }
                },
                {
                    name: 'Identity Verification',
                    type: 'FORM',
                    config: {
                        formType: 'identity_check',
                        required: true
                    }
                },
                {
                    name: 'Compliance Screening',
                    type: 'API_CALL',
                    config: {
                        endpoint: 'compliance_check',
                        timeout: 15000
                    }
                },
                {
                    name: 'Account Setup',
                    type: 'CONDITIONAL',
                    config: {
                        condition: 'compliance_passed'
                    }
                },
                {
                    name: 'Welcome Package',
                    type: 'SEND_EMAIL',
                    config: {
                        template: 'fintech_welcome',
                        delay: 1000
                    }
                },
                {
                    name: 'Follow Up',
                    type: 'SEND_SMS',
                    config: {
                        template: 'account_ready',
                        delay: 86400000
                    }
                },
                {
                    name: 'End',
                    type: 'END',
                    config: {
                        message: 'Fintech workflow completed'
                    }
                }
            ];
        }
        // Default fallback workflow
        return [
            {
                name: 'Start',
                type: 'START',
                config: {
                    message: 'Workflow initiated'
                }
            },
            {
                name: 'Send Welcome',
                type: 'SEND_EMAIL',
                config: {
                    template: 'welcome',
                    delay: 0
                }
            },
            {
                name: 'Wait 1 Day',
                type: 'WAIT',
                config: {
                    duration: 24 * 60 * 60 * 1000
                }
            },
            {
                name: 'Follow Up',
                type: 'SEND_EMAIL',
                config: {
                    template: 'follow_up',
                    delay: 0
                }
            },
            {
                name: 'End',
                type: 'END',
                config: {
                    message: 'Workflow completed'
                }
            }
        ];
    }
    /**
   * Build comprehensive workflow description for AI processing
   */ buildWorkflowDescription(workflowData, workflowType, market) {
        const objective = workflowData.objective || 'automated workflow';
        const industry = workflowData.industry || 'fintech';
        const steps = workflowData.steps || [];
        let description = `Create a ${workflowType} workflow for ${market} ${industry} market focused on ${objective}.`;
        if (steps.length > 0) {
            description += ` The workflow should include these steps: ${steps.join(', ')}.`;
        }
        // Add market-specific intelligence
        if (market.toLowerCase().includes('nigeria')) {
            description += ' Include BVN verification, KYC compliance, and SMS notifications optimized for Nigerian users.';
        } else if (market.toLowerCase().includes('kenya')) {
            description += ' Include M-Pesa integration, identity verification, and local compliance checks.';
        } else if (market.toLowerCase().includes('ghana')) {
            description += ' Include mobile money integration, AML screening, and local banking API connections.';
        } else if (market.toLowerCase().includes('south africa')) {
            description += ' Include FICA compliance, credit bureau checks, and multi-language support.';
        }
        // Add workflow type specific requirements
        if (workflowType.toLowerCase().includes('onboarding')) {
            description += ' Focus on user registration, identity verification, compliance checks, and welcome communications.';
        } else if (workflowType.toLowerCase().includes('remittance')) {
            description += ' Include exchange rate locking, compliance screening, transfer execution, and confirmation notifications.';
        } else if (workflowType.toLowerCase().includes('loan')) {
            description += ' Include credit scoring, risk assessment, approval workflows, and disbursement processes.';
        }
        return description;
    }
    /**
   * Extract trigger type from workflow data
   */ extractTriggerFromWorkflow(workflowData, workflowType) {
        // Check if trigger is explicitly specified
        if (workflowData.trigger) {
            return workflowData.trigger;
        }
        // Infer trigger from workflow type
        switch(workflowType.toLowerCase()){
            case 'onboarding':
            case 'registration':
                return 'contact_created';
            case 'welcome':
            case 'nurture':
                return 'contact_created';
            case 'abandoned_cart':
            case 'follow_up':
                return 'time_trigger';
            case 'support':
            case 'inquiry':
                return 'email_received';
            case 'campaign':
            case 'marketing':
                return 'form_submission';
            case 'remittance':
            case 'transfer':
                return 'api_webhook';
            default:
                return 'form_submission';
        }
    }
    /**
   * Extract actions from workflow data with market intelligence
   */ extractActionsFromWorkflow(workflowData, workflowType, market) {
        const actions = [];
        // Add actions based on workflow type
        switch(workflowType.toLowerCase()){
            case 'onboarding':
                actions.push('send welcome email', 'verify identity', 'create account', 'send confirmation');
                if (market.toLowerCase().includes('nigeria')) {
                    actions.push('collect BVN', 'verify BVN', 'upload KYC documents');
                }
                break;
            case 'remittance':
                actions.push('check compliance', 'lock exchange rate', 'verify recipient', 'execute transfer', 'send confirmation');
                if (market.toLowerCase().includes('ghana')) {
                    actions.push('AML screening', 'Ghana compliance check');
                }
                break;
            case 'loan':
            case 'credit':
                actions.push('collect application', 'check credit score', 'assess risk', 'approve or reject', 'disburse funds');
                break;
            case 'marketing':
            case 'campaign':
                actions.push('send email', 'track engagement', 'score lead', 'follow up');
                break;
            default:
                actions.push('send email', 'wait', 'follow up');
        }
        // Add market-specific actions
        if (market.toLowerCase().includes('africa')) {
            actions.push('send SMS notification'); // SMS is preferred in Africa
        }
        return actions;
    }
    /**
   * Fallback method for simple workflow creation
   */ async createSimpleWorkflow(workflowData, userId, workflowName, workflowType, market) {
        // Create the workflow using the original simple method
        const workflow = await _prisma.default.workflow.create({
            data: {
                name: workflowName,
                description: workflowData.objective || `Simple ${workflowType} workflow for ${market} market`,
                status: 'INACTIVE',
                definition: JSON.stringify({
                    type: workflowType,
                    market: market,
                    industry: workflowData.industry || 'fintech',
                    objective: workflowData.objective,
                    aiGenerated: true,
                    fallbackMode: true
                }),
                createdById: userId
            }
        });
        // Create basic workflow nodes using the original method
        const defaultNodes = this.generateDefaultWorkflowNodes(workflowType, market);
        for(let i = 0; i < defaultNodes.length; i++){
            await _prisma.default.workflowNode.create({
                data: {
                    workflowId: workflow.id,
                    name: defaultNodes[i].name,
                    type: defaultNodes[i].type,
                    config: JSON.stringify(defaultNodes[i].config),
                    positionX: 200 + i * 180,
                    positionY: 150
                }
            });
        }
        _logger.logger.info('Simple workflow created as fallback', {
            workflowId: workflow.id,
            userId
        });
        return {
            success: true,
            message: `âœ… Workflow "${workflowName}" created successfully with basic configuration.`,
            data: workflow,
            details: {
                workflowId: workflow.id,
                name: workflow.name,
                type: workflowType,
                market: market,
                nodesCreated: defaultNodes.length,
                status: workflow.status,
                fallbackMode: true
            }
        };
    }
    /**
   * Map workflow node types from advanced builder to schema enum
   */ mapToSchemaNodeType(advancedType) {
        // Map detailed node types to schema WorkflowNodeType enum
        const typeMapping = {
            // Trigger types
            'form_submission': 'TRIGGER',
            'time_trigger': 'TRIGGER',
            'webhook': 'WEBHOOK',
            'email_received': 'TRIGGER',
            'contact_created': 'TRIGGER',
            'contact_updated': 'TRIGGER',
            'campaign_completed': 'TRIGGER',
            // Action types
            'send_email': 'EMAIL',
            'send_sms': 'SMS',
            'send_whatsapp': 'WHATSAPP',
            'update_contact': 'ACTION',
            'add_to_list': 'ACTION',
            'remove_from_list': 'ACTION',
            'create_task': 'ACTION',
            'send_notification': 'NOTIFICATION',
            'api_call': 'WEBHOOK',
            // Logic types
            'condition': 'CONDITION',
            'delay': 'DELAY',
            'split': 'CONDITION',
            'merge': 'ACTION',
            'loop': 'CONDITION',
            'filter': 'CONDITION',
            // Data types
            'data_transform': 'ACTION',
            'calculate': 'ACTION',
            'lookup': 'ACTION',
            'store_data': 'ACTION',
            // Integration types
            'zapier': 'WEBHOOK',
            'salesforce': 'WEBHOOK',
            'hubspot': 'WEBHOOK',
            'slack': 'NOTIFICATION',
            'teams': 'NOTIFICATION',
            // AI types
            'ai_analysis': 'ACTION',
            'ai_generate_content': 'ACTION',
            'ai_sentiment': 'ACTION',
            'ai_classification': 'ACTION'
        };
        return typeMapping[advancedType] || 'ACTION'; // Default to ACTION
    }
    /**
   * Generate default email content
   */ generateDefaultEmailContent(campaignData) {
        const market = campaignData.market || 'Africa';
        const audience = campaignData.audience || 'valued customers';
        return `
      <h2>Hello ${audience}!</h2>
      <p>We're excited to connect with you from MarketSage ${market}.</p>
      <p>This campaign was intelligently generated to serve your fintech automation needs.</p>
      <p>Best regards,<br>The MarketSage Team</p>
    `;
    }
    /**
   * Generate default SMS content
   */ generateDefaultSMSContent(campaignData) {
        return `Hello! This is MarketSage reaching out to ${campaignData.audience || 'you'}. We're here to help with your fintech automation needs. Reply STOP to opt out.`;
    }
    /**
   * Generate default WhatsApp content
   */ generateDefaultWhatsAppContent(campaignData) {
        return `ðŸ‘‹ Hello from MarketSage! We're excited to connect with ${campaignData.audience || 'you'} via WhatsApp. How can we help automate your fintech marketing today?`;
    }
    /**
   * Execute update operations for existing entities
   */ async executeUpdate(intent, userId) {
        switch(intent.entity){
            case 'CONTACT':
                return await this.updateContact(intent.data, userId);
            case 'WORKFLOW':
                return await this.updateWorkflow(intent.data, userId);
            case 'CAMPAIGN':
                return await this.updateCampaign(intent.data, userId);
            case 'TASK':
                return await this.updateTask(intent.data, userId);
            case 'SEGMENT':
                return await this.updateSegment(intent.data, userId);
            case 'TEMPLATE':
                return await this.updateTemplate(intent.data, userId);
            case 'LIST':
                return await this.updateList(intent.data, userId);
            case 'INTEGRATION':
                return await this.updateIntegration(intent.data, userId);
            case 'JOURNEY':
                return await this.updateJourney(intent.data, userId);
            case 'ABTEST':
                return await this.updateABTest(intent.data, userId);
            default:
                return {
                    success: false,
                    message: `I can't update ${intent.entity.toLowerCase()} yet. Please specify what you'd like to update.`,
                    suggestions: [
                        'Try: "update contact John Doe"',
                        'Try: "update workflow status"',
                        'Try: "update campaign content"'
                    ]
                };
        }
    }
    /**
   * Execute delete operations for existing entities
   */ async executeDelete(intent, userId) {
        switch(intent.entity){
            case 'CONTACT':
                return await this.deleteContact(intent.data, userId);
            case 'WORKFLOW':
                return await this.deleteWorkflow(intent.data, userId);
            case 'CAMPAIGN':
                return await this.deleteCampaign(intent.data, userId);
            case 'TASK':
                return await this.deleteTask(intent.data, userId);
            case 'SEGMENT':
                return await this.deleteSegment(intent.data, userId);
            case 'TEMPLATE':
                return await this.deleteTemplate(intent.data, userId);
            case 'LIST':
                return await this.deleteList(intent.data, userId);
            case 'INTEGRATION':
                return await this.deleteIntegration(intent.data, userId);
            case 'JOURNEY':
                return await this.deleteJourney(intent.data, userId);
            case 'ABTEST':
                return await this.deleteABTest(intent.data, userId);
            default:
                return {
                    success: false,
                    message: `I can't delete ${intent.entity.toLowerCase()} yet. Please specify what you'd like to delete.`,
                    suggestions: [
                        'Try: "delete contact John Doe"',
                        'Try: "delete old workflow"',
                        'Try: "delete campaign draft"'
                    ]
                };
        }
    }
    async executeAnalysis(intent, userId) {
        try {
            const analysisRequest = intent.data;
            const query = intent.originalQuery.toLowerCase();
            // Handle specific performance queries first
            if (query.includes('best performing') || query.includes('top performing') || query.includes('highest performing')) {
                return await this.analyzeTopPerformers(query, userId);
            }
            if (query.includes('team performance') || query.includes('staff performance') || query.includes('employee performance')) {
                return await this.analyzeTeamPerformance(query, userId);
            }
            // Handle people/personnel count queries
            if ((query.includes('how many') || query.includes('count')) && (query.includes('sales') || query.includes('marketing') || query.includes('staff') || query.includes('personnel') || query.includes('team'))) {
                return await this.analyzeTeamPerformance(query, userId);
            }
            // Handle "who is the best" queries
            if ((query.includes('who is') || query.includes('who are')) && (query.includes('best') || query.includes('top'))) {
                return await this.analyzeTopPerformers(query, userId);
            }
            if (query.includes('conversion rate') || query.includes('conversion')) {
                return await this.analyzeConversionRates(query, userId);
            }
            if (query.includes('revenue breakdown') || query.includes('revenue') || query.includes('income')) {
                return await this.analyzeRevenueBreakdown(query, userId);
            }
            if (query.includes('acquisition cost') || query.includes('cac') || query.includes('customer cost')) {
                return await this.analyzeAcquisitionMetrics(query, userId);
            }
            if (query.includes('completion rate') || query.includes('workflow success')) {
                return await this.analyzeWorkflowEfficiency(query, userId);
            }
            // Handle general data type queries
            if (query.includes('customer') || query.includes('contact')) {
                return await this.analyzeCustomerData(query, userId);
            }
            if (query.includes('campaign') || query.includes('marketing')) {
                return await this.analyzeCampaignData(query, userId);
            }
            if (query.includes('workflow') || query.includes('automation')) {
                return await this.analyzeWorkflowData(query, userId);
            }
            if (query.includes('task') || query.includes('assignment')) {
                return await this.analyzeTaskData(query, userId);
            }
            if (query.includes('sales') || query.includes('lead')) {
                return await this.analyzeSalesData(query, userId);
            }
            // Default to general analytics
            return await this.analyzeGeneralData(query, userId);
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze data due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    async createSegment(data, userId) {
        try {
            const segmentName = data.name || `AI Segment - ${new Date().toLocaleDateString()}`;
            const description = data.description || 'AI-generated customer segment';
            const rules = data.rules || JSON.stringify({
                conditions: [
                    {
                        field: 'status',
                        operator: 'equals',
                        value: 'ACTIVE'
                    }
                ]
            });
            const segment = await _prisma.default.segment.create({
                data: {
                    name: segmentName,
                    description,
                    rules,
                    createdById: userId
                }
            });
            _logger.logger.info('Segment created successfully', {
                segmentId: segment.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Customer segment "${segmentName}" created successfully!`,
                data: segment,
                details: {
                    segmentId: segment.id,
                    name: segment.name,
                    description: segment.description
                }
            };
        } catch (error) {
            _logger.logger.error('Segment creation failed', {
                error: error instanceof Error ? error.message : String(error),
                data,
                userId
            });
            return {
                success: false,
                message: 'Failed to create segment due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try with a different segment name',
                    'Check segment rules format'
                ]
            };
        }
    }
    async createTemplate(data, userId) {
        try {
            const templateType = data.type || 'email';
            const templateName = data.name || `${templateType} Template - ${new Date().toLocaleDateString()}`;
            let template;
            if (templateType === 'email') {
                template = await _prisma.default.emailTemplate.create({
                    data: {
                        name: templateName,
                        description: data.description || 'AI-generated email template',
                        subject: data.subject || 'Welcome to MarketSage',
                        content: data.content || '<p>Hello {{firstName}},</p><p>Welcome to our platform!</p>',
                        previewText: data.previewText || 'Welcome to MarketSage',
                        category: data.category || 'general',
                        createdById: userId
                    }
                });
            } else if (templateType === 'sms') {
                template = await _prisma.default.sMSTemplate.create({
                    data: {
                        name: templateName,
                        content: data.content || 'Hello {{firstName}}, welcome to MarketSage!',
                        variables: JSON.stringify(data.variables || [
                            'firstName'
                        ]),
                        category: data.category || 'general',
                        createdById: userId
                    }
                });
            } else if (templateType === 'whatsapp') {
                template = await _prisma.default.whatsAppTemplate.create({
                    data: {
                        name: templateName,
                        content: data.content || 'Hello {{firstName}}, welcome to MarketSage!',
                        variables: JSON.stringify(data.variables || [
                            'firstName'
                        ]),
                        category: data.category || 'general',
                        status: 'PENDING',
                        createdById: userId
                    }
                });
            } else {
                return {
                    success: false,
                    message: 'Unsupported template type. Supported types: email, sms, whatsapp',
                    suggestions: [
                        'Try: "create email template"',
                        'Try: "create sms template"',
                        'Try: "create whatsapp template"'
                    ]
                };
            }
            _logger.logger.info('Template created successfully', {
                templateId: template.id,
                type: templateType,
                userId
            });
            return {
                success: true,
                message: `âœ… ${templateType.toUpperCase()} template "${templateName}" created successfully!`,
                data: template,
                details: {
                    templateId: template.id,
                    name: template.name,
                    type: templateType
                }
            };
        } catch (error) {
            _logger.logger.error('Template creation failed', {
                error: error instanceof Error ? error.message : String(error),
                data,
                userId
            });
            return {
                success: false,
                message: 'Failed to create template due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try with a different template name',
                    'Check template content format'
                ]
            };
        }
    }
    async fetchAnalyticsData(request) {
        try {
            // Get comprehensive analytics data
            const [contactStats, campaignStats, taskStats, conversionStats, workflowStats, revenueStats] = await Promise.all([
                this.getContactStatistics(),
                this.getCampaignStatistics(),
                this.getTaskStatistics(),
                this.getConversionStatistics(),
                this.getWorkflowStatistics(),
                this.getRevenueStatistics()
            ]);
            return {
                success: true,
                message: 'ðŸ“Š Comprehensive Analytics Dashboard',
                data: {
                    contacts: contactStats,
                    campaigns: campaignStats,
                    tasks: taskStats,
                    conversions: conversionStats,
                    workflows: workflowStats,
                    revenue: revenueStats,
                    summary: `ðŸ“ˆ Business Overview: ${contactStats.total} contacts, ${campaignStats.total} campaigns, ${workflowStats.total} workflows, ${taskStats.total} tasks. Revenue: $${revenueStats.total.toLocaleString()}`
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Could not fetch analytics data at this time.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    async fetchUserData(request) {
        try {
            const userStats = await _prisma.default.user.aggregate({
                _count: {
                    id: true
                },
                where: {
                    isActive: true
                }
            });
            const roleDistribution = await _prisma.default.user.groupBy({
                by: [
                    'role'
                ],
                _count: {
                    id: true
                },
                where: {
                    isActive: true
                }
            });
            const recentUsers = await _prisma.default.user.findMany({
                take: 5,
                orderBy: {
                    createdAt: 'desc'
                },
                select: {
                    id: true,
                    name: true,
                    email: true,
                    role: true,
                    createdAt: true
                },
                where: {
                    isActive: true
                }
            });
            return {
                success: true,
                message: `ðŸ‘¥ User Analytics: ${userStats._count.id} active users`,
                data: {
                    totalUsers: userStats._count.id,
                    roleDistribution,
                    recentUsers,
                    summary: `You have ${userStats._count.id} active users with roles distributed across: ${roleDistribution.map((r)=>`${r._count.id} ${r.role}s`).join(', ')}`
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Could not fetch user data at this time.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    async fetchCampaignData(request) {
        try {
            const [emailCampaigns, smsCampaigns, whatsappCampaigns] = await Promise.all([
                _prisma.default.emailCampaign.count(),
                _prisma.default.smsCampaign.count(),
                _prisma.default.whatsAppCampaign.count()
            ]);
            const recentCampaigns = await _prisma.default.emailCampaign.findMany({
                take: 5,
                orderBy: {
                    createdAt: 'desc'
                },
                select: {
                    id: true,
                    name: true,
                    status: true,
                    createdAt: true
                }
            });
            const totalCampaigns = emailCampaigns + smsCampaigns + whatsappCampaigns;
            return {
                success: true,
                message: `ðŸ“§ Campaign Analytics: ${totalCampaigns} total campaigns`,
                data: {
                    totalCampaigns,
                    breakdown: {
                        email: emailCampaigns,
                        sms: smsCampaigns,
                        whatsapp: whatsappCampaigns
                    },
                    recentCampaigns,
                    summary: `You have ${totalCampaigns} campaigns: ${emailCampaigns} email, ${smsCampaigns} SMS, ${whatsappCampaigns} WhatsApp`
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Could not fetch campaign data at this time.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    async fetchGeneralData(request) {
        try {
            // Fetch general business data
            const [users, notifications, journeys, abTests] = await Promise.all([
                _prisma.default.user.count({
                    where: {
                        isActive: true
                    }
                }),
                _prisma.default.notification.count({
                    where: {
                        read: false
                    }
                }),
                _prisma.default.journey.count(),
                _prisma.default.aBTest.count({
                    where: {
                        status: 'RUNNING'
                    }
                })
            ]);
            return {
                success: true,
                message: 'ðŸ“Š General Business Data',
                data: {
                    activeUsers: users,
                    unreadNotifications: notifications,
                    customerJourneys: journeys,
                    runningTests: abTests,
                    summary: `${users} active users, ${notifications} unread notifications, ${journeys} customer journeys, ${abTests} running A/B tests`
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to fetch general data.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Get helpful suggestions for unclear requests
   */ getHelpfulSuggestions(intent) {
        const suggestions = [
            'Try: "create a contact named John Doe with email john@example.com"',
            'Try: "build a workflow for Nigerian onboarding"',
            'Try: "create WhatsApp campaign for Kenyan diaspora"',
            'Try: "assign urgent task to marketing team"',
            'Try: "show me LeadPulse analytics data"'
        ];
        // Filter suggestions based on detected intent
        if (intent.entity === 'CONTACT') {
            return [
                'Try: "create contact John Doe, phone +234..., email john@example.com"'
            ];
        } else if (intent.entity === 'WORKFLOW') {
            return [
                'Try: "create Nigerian fintech onboarding workflow"',
                'Try: "build retention workflow for Ghana"'
            ];
        } else if (intent.entity === 'CAMPAIGN') {
            return [
                'Try: "create email campaign for new users"',
                'Try: "build WhatsApp campaign for diaspora"'
            ];
        }
        return suggestions;
    }
    /**
   * Get action-specific suggestions
   */ getActionSuggestions(action) {
        switch(action){
            case 'CREATE':
                return [
                    'Specify what to create: contact, workflow, campaign, or task'
                ];
            case 'ASSIGN':
                return [
                    'Specify what to assign and to whom'
                ];
            case 'FETCH':
                return [
                    'Specify what data to fetch: analytics, users, campaigns'
                ];
            default:
                return [
                    'Try being more specific about what you want to do'
                ];
        }
    }
    // ================================
    // ANALYTICS & DATA ANALYSIS METHODS
    // ================================
    /**
   * Analyze customer/contact data
   */ async analyzeCustomerData(query, userId) {
        try {
            const contactStats = await this.getContactStatistics();
            // Handle specific queries about customers
            if (query.includes('average') && (query.includes('age') || query.includes('demographic'))) {
                return {
                    success: true,
                    message: 'ðŸ“Š Customer demographics analysis not yet available - we track engagement metrics instead',
                    data: contactStats,
                    suggestions: [
                        'Try: "show me contact engagement stats"',
                        'Try: "how many active customers do we have"'
                    ]
                };
            }
            if (query.includes('business') || query.includes('individual') || query.includes('company')) {
                const businessContacts = await _prisma.default.contact.count({
                    where: {
                        company: {
                            not: null
                        }
                    }
                });
                const individualContacts = contactStats.total - businessContacts;
                return {
                    success: true,
                    message: `ðŸ‘¥ Customer Type Breakdown: ${businessContacts} businesses, ${individualContacts} individuals`,
                    data: {
                        businesses: businessContacts,
                        individuals: individualContacts,
                        total: contactStats.total,
                        breakdown: `${Math.round(businessContacts / contactStats.total * 100)}% businesses, ${Math.round(individualContacts / contactStats.total * 100)}% individuals`
                    }
                };
            }
            return {
                success: true,
                message: `ðŸ“Š Customer Overview: ${contactStats.total} total contacts`,
                data: contactStats
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze customer data.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Analyze campaign performance data
   */ async analyzeCampaignData(query, userId) {
        try {
            const campaignStats = await this.getCampaignStatistics();
            return {
                success: true,
                message: `ðŸ“ˆ Campaign Performance Analysis`,
                data: campaignStats
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze campaign data.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Analyze workflow and automation data
   */ async analyzeWorkflowData(query, userId) {
        try {
            const workflowStats = await _prisma.default.workflow.groupBy({
                by: [
                    'status'
                ],
                _count: {
                    id: true
                }
            });
            const totalWorkflows = await _prisma.default.workflow.count();
            return {
                success: true,
                message: `âš™ï¸ Workflow Analysis: ${totalWorkflows} total workflows`,
                data: {
                    total: totalWorkflows,
                    byStatus: workflowStats,
                    summary: `You have ${totalWorkflows} workflows with status distribution: ${workflowStats.map((w)=>`${w._count.id} ${w.status}`).join(', ')}`
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze workflow data.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Analyze task and assignment data
   */ async analyzeTaskData(query, userId) {
        try {
            const taskStats = await this.getTaskStatistics();
            return {
                success: true,
                message: `âœ… Task Analysis: ${taskStats.total} total tasks`,
                data: taskStats
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze task data.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Analyze revenue and conversion data
   */ async analyzeRevenueData(query, userId) {
        try {
            const conversionStats = await this.getConversionStatistics();
            return {
                success: true,
                message: `ðŸ’° Revenue & Conversion Analysis`,
                data: conversionStats
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze revenue data.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * General data analysis
   */ async analyzeGeneralData(query, userId) {
        try {
            const [contactStats, campaignStats, taskStats] = await Promise.all([
                this.getContactStatistics(),
                this.getCampaignStatistics(),
                this.getTaskStatistics()
            ]);
            return {
                success: true,
                message: `ðŸ“Š General Business Overview`,
                data: {
                    contacts: contactStats,
                    campaigns: campaignStats,
                    tasks: taskStats,
                    summary: `Your business has ${contactStats.total} contacts, ${campaignStats.total} campaigns, and ${taskStats.total} tasks`
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze data.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    // ================================
    // STATISTICS HELPER METHODS
    // ================================
    async getContactStatistics() {
        const [total, active, businessContacts, recentContacts] = await Promise.all([
            _prisma.default.contact.count(),
            _prisma.default.contact.count({
                where: {
                    status: 'ACTIVE'
                }
            }),
            _prisma.default.contact.count({
                where: {
                    company: {
                        not: null
                    }
                }
            }),
            _prisma.default.contact.count({
                where: {
                    createdAt: {
                        gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000) // Last 30 days
                    }
                }
            })
        ]);
        return {
            total,
            active,
            businesses: businessContacts,
            individuals: total - businessContacts,
            recentlyAdded: recentContacts
        };
    }
    async getCampaignStatistics() {
        const [emailCount, smsCount, whatsappCount] = await Promise.all([
            _prisma.default.emailCampaign.count(),
            _prisma.default.smsCampaign.count(),
            _prisma.default.whatsAppCampaign.count()
        ]);
        const total = emailCount + smsCount + whatsappCount;
        return {
            total,
            email: emailCount,
            sms: smsCount,
            whatsapp: whatsappCount
        };
    }
    async getTaskStatistics() {
        const [total, completed, pending, overdue] = await Promise.all([
            _prisma.default.task.count(),
            _prisma.default.task.count({
                where: {
                    status: 'DONE'
                }
            }),
            _prisma.default.task.count({
                where: {
                    status: 'TODO'
                }
            }),
            _prisma.default.task.count({
                where: {
                    status: {
                        not: 'DONE'
                    },
                    dueDate: {
                        lt: new Date()
                    }
                }
            })
        ]);
        return {
            total,
            completed,
            pending,
            overdue
        };
    }
    async getConversionStatistics() {
        try {
            const conversionEvents = await _prisma.default.conversionEvent.count();
            const totalValue = await _prisma.default.conversionEvent.aggregate({
                _sum: {
                    value: true
                }
            });
            return {
                totalConversions: conversionEvents,
                totalValue: totalValue._sum.value || 0,
                averageValue: conversionEvents > 0 ? (totalValue._sum.value || 0) / conversionEvents : 0
            };
        } catch (error) {
            return {
                totalConversions: 0,
                totalValue: 0,
                averageValue: 0,
                note: 'Conversion tracking data not available'
            };
        }
    }
    // ================================
    // UPDATE OPERATIONS
    // ================================
    /**
   * Update an existing contact
   */ async updateContact(updateData, userId) {
        try {
            const { contactId, name, email, phone, company, notes, status } = updateData;
            if (!contactId && !email && !name) {
                return {
                    success: false,
                    message: 'I need a contact ID, email, or name to identify which contact to update.',
                    suggestions: [
                        'Try: "update contact john@example.com set phone to +123456789"',
                        'Include contact identifier'
                    ]
                };
            }
            // Find the contact
            let contact = null;
            if (contactId) {
                contact = await _prisma.default.contact.findUnique({
                    where: {
                        id: contactId
                    }
                });
            } else if (email) {
                contact = await _prisma.default.contact.findFirst({
                    where: {
                        email
                    }
                });
            } else if (name) {
                contact = await _prisma.default.contact.findFirst({
                    where: {
                        OR: [
                            {
                                firstName: {
                                    contains: name,
                                    mode: 'insensitive'
                                }
                            },
                            {
                                lastName: {
                                    contains: name,
                                    mode: 'insensitive'
                                }
                            }
                        ]
                    }
                });
            }
            if (!contact) {
                return {
                    success: false,
                    message: 'Contact not found. Please check the identifier and try again.',
                    suggestions: [
                        'Try creating a new contact instead',
                        'Verify the contact name or email'
                    ]
                };
            }
            // Prepare update data
            const updateFields = {};
            if (name) {
                const [firstName, ...lastNameParts] = name.split(' ');
                updateFields.firstName = firstName;
                updateFields.lastName = lastNameParts.join(' ');
            }
            if (email) updateFields.email = email;
            if (phone) updateFields.phone = phone;
            if (company) updateFields.company = company;
            if (notes) updateFields.notes = notes;
            if (status) updateFields.status = status;
            // Update the contact
            const updatedContact = await _prisma.default.contact.update({
                where: {
                    id: contact.id
                },
                data: updateFields
            });
            _logger.logger.info('Contact updated successfully', {
                contactId: contact.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Contact "${updatedContact.firstName} ${updatedContact.lastName}" updated successfully!`,
                data: updatedContact,
                details: {
                    contactId: updatedContact.id,
                    updatedFields: Object.keys(updateFields),
                    name: `${updatedContact.firstName} ${updatedContact.lastName}`,
                    email: updatedContact.email
                }
            };
        } catch (error) {
            _logger.logger.error('Contact update failed', {
                error: error instanceof Error ? error.message : String(error),
                updateData,
                userId
            });
            return {
                success: false,
                message: 'Failed to update contact due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if the contact exists',
                    'Verify update data is valid'
                ]
            };
        }
    }
    /**
   * Update an existing workflow
   */ async updateWorkflow(updateData, userId) {
        try {
            const { workflowId, name, description, status } = updateData;
            if (!workflowId && !name) {
                return {
                    success: false,
                    message: 'I need a workflow ID or name to identify which workflow to update.',
                    suggestions: [
                        'Try: "update workflow Nigerian Onboarding set status to ACTIVE"',
                        'Include workflow identifier'
                    ]
                };
            }
            // Find the workflow
            let workflow = null;
            if (workflowId) {
                workflow = await _prisma.default.workflow.findUnique({
                    where: {
                        id: workflowId
                    }
                });
            } else if (name) {
                workflow = await _prisma.default.workflow.findFirst({
                    where: {
                        name: {
                            contains: name,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!workflow) {
                return {
                    success: false,
                    message: 'Workflow not found. Please check the identifier and try again.',
                    suggestions: [
                        'Try creating a new workflow instead',
                        'Verify the workflow name'
                    ]
                };
            }
            // Prepare update data
            const updateFields = {};
            if (name && name !== workflow.name) updateFields.name = name;
            if (description) updateFields.description = description;
            if (status && [
                'ACTIVE',
                'INACTIVE',
                'PAUSED',
                'ARCHIVED'
            ].includes(status)) {
                updateFields.status = status;
            }
            if (Object.keys(updateFields).length === 0) {
                return {
                    success: false,
                    message: 'No valid updates provided. Please specify what to update.',
                    suggestions: [
                        'Try: "update workflow set status to ACTIVE"',
                        'Specify name, description, or status'
                    ]
                };
            }
            // Update the workflow
            const updatedWorkflow = await _prisma.default.workflow.update({
                where: {
                    id: workflow.id
                },
                data: updateFields
            });
            _logger.logger.info('Workflow updated successfully', {
                workflowId: workflow.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Workflow "${updatedWorkflow.name}" updated successfully!`,
                data: updatedWorkflow,
                details: {
                    workflowId: updatedWorkflow.id,
                    updatedFields: Object.keys(updateFields),
                    name: updatedWorkflow.name,
                    status: updatedWorkflow.status
                }
            };
        } catch (error) {
            _logger.logger.error('Workflow update failed', {
                error: error instanceof Error ? error.message : String(error),
                updateData,
                userId
            });
            return {
                success: false,
                message: 'Failed to update workflow due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if the workflow exists',
                    'Verify status value is valid (ACTIVE, INACTIVE, PAUSED, ARCHIVED)'
                ]
            };
        }
    }
    /**
   * Update an existing campaign
   */ async updateCampaign(updateData, userId) {
        try {
            const { campaignId, name, description, content, status, type = 'email' } = updateData;
            if (!campaignId && !name) {
                return {
                    success: false,
                    message: 'I need a campaign ID or name to identify which campaign to update.',
                    suggestions: [
                        'Try: "update campaign Welcome Series set status to ACTIVE"',
                        'Include campaign identifier'
                    ]
                };
            }
            // Find the campaign based on type
            let campaign = null;
            let table = 'emailCampaign';
            if (type === 'sms') table = 'smsCampaign';
            else if (type === 'whatsapp') table = 'whatsAppCampaign';
            if (campaignId) {
                campaign = await _prisma.default[table].findUnique({
                    where: {
                        id: campaignId
                    }
                });
            } else if (name) {
                campaign = await _prisma.default[table].findFirst({
                    where: {
                        name: {
                            contains: name,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!campaign) {
                return {
                    success: false,
                    message: `${type.toUpperCase()} campaign not found. Please check the identifier and try again.`,
                    suggestions: [
                        'Try creating a new campaign instead',
                        'Verify the campaign name',
                        `Try different campaign type (email, sms, whatsapp)`
                    ]
                };
            }
            // Prepare update data
            const updateFields = {};
            if (name && name !== campaign.name) updateFields.name = name;
            if (description) updateFields.description = description;
            if (content) updateFields.content = content;
            if (status && [
                'DRAFT',
                'ACTIVE',
                'PAUSED',
                'COMPLETED'
            ].includes(status)) {
                updateFields.status = status;
            }
            if (Object.keys(updateFields).length === 0) {
                return {
                    success: false,
                    message: 'No valid updates provided. Please specify what to update.',
                    suggestions: [
                        'Try: "update campaign set status to ACTIVE"',
                        'Specify name, description, content, or status'
                    ]
                };
            }
            // Update the campaign
            const updatedCampaign = await _prisma.default[table].update({
                where: {
                    id: campaign.id
                },
                data: updateFields
            });
            _logger.logger.info('Campaign updated successfully', {
                campaignId: campaign.id,
                type,
                userId
            });
            return {
                success: true,
                message: `âœ… ${type.toUpperCase()} campaign "${updatedCampaign.name}" updated successfully!`,
                data: updatedCampaign,
                details: {
                    campaignId: updatedCampaign.id,
                    type,
                    updatedFields: Object.keys(updateFields),
                    name: updatedCampaign.name,
                    status: updatedCampaign.status
                }
            };
        } catch (error) {
            _logger.logger.error('Campaign update failed', {
                error: error instanceof Error ? error.message : String(error),
                updateData,
                userId
            });
            return {
                success: false,
                message: 'Failed to update campaign due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if the campaign exists',
                    'Verify status value is valid (DRAFT, ACTIVE, PAUSED, COMPLETED)'
                ]
            };
        }
    }
    /**
   * Update an existing task
   */ async updateTask(updateData, userId) {
        try {
            const { taskId, title, description, status, priority, dueDate, assignee } = updateData;
            if (!taskId && !title) {
                return {
                    success: false,
                    message: 'I need a task ID or title to identify which task to update.',
                    suggestions: [
                        'Try: "update task Campaign Review set status to DONE"',
                        'Include task identifier'
                    ]
                };
            }
            // Find the task
            let task = null;
            if (taskId) {
                task = await _prisma.default.task.findUnique({
                    where: {
                        id: taskId
                    }
                });
            } else if (title) {
                task = await _prisma.default.task.findFirst({
                    where: {
                        title: {
                            contains: title,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!task) {
                return {
                    success: false,
                    message: 'Task not found. Please check the identifier and try again.',
                    suggestions: [
                        'Try creating a new task instead',
                        'Verify the task title'
                    ]
                };
            }
            // Prepare update data
            const updateFields = {};
            if (title && title !== task.title) updateFields.title = title;
            if (description) updateFields.description = description;
            if (status && [
                'TODO',
                'IN_PROGRESS',
                'REVIEW',
                'DONE'
            ].includes(status)) {
                updateFields.status = status;
            }
            if (priority && [
                'LOW',
                'MEDIUM',
                'HIGH',
                'URGENT'
            ].includes(priority)) {
                updateFields.priority = priority;
            }
            if (dueDate) updateFields.dueDate = new Date(dueDate);
            // Handle assignee update
            if (assignee) {
                const roleMapping = {
                    'marketing team lead': 'ADMIN',
                    'marketing lead': 'ADMIN',
                    'team lead': 'ADMIN',
                    'admin': 'ADMIN',
                    'super admin': 'SUPER_ADMIN',
                    'it admin': 'IT_ADMIN',
                    'user': 'USER'
                };
                const normalizedAssignee = assignee.toLowerCase();
                const mappedRole = roleMapping[normalizedAssignee];
                const assigneeUser = await _prisma.default.user.findFirst({
                    where: {
                        OR: [
                            {
                                name: {
                                    contains: assignee,
                                    mode: 'insensitive'
                                }
                            },
                            {
                                email: {
                                    contains: assignee,
                                    mode: 'insensitive'
                                }
                            },
                            ...mappedRole ? [
                                {
                                    role: mappedRole
                                }
                            ] : []
                        ],
                        isActive: true
                    }
                });
                if (assigneeUser) {
                    updateFields.assigneeId = assigneeUser.id;
                }
            }
            if (Object.keys(updateFields).length === 0) {
                return {
                    success: false,
                    message: 'No valid updates provided. Please specify what to update.',
                    suggestions: [
                        'Try: "update task set status to DONE"',
                        'Specify title, description, status, priority, or assignee'
                    ]
                };
            }
            // Update the task
            const updatedTask = await _prisma.default.task.update({
                where: {
                    id: task.id
                },
                data: updateFields,
                include: {
                    assignee: {
                        select: {
                            name: true
                        }
                    }
                }
            });
            _logger.logger.info('Task updated successfully', {
                taskId: task.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Task "${updatedTask.title}" updated successfully!`,
                data: updatedTask,
                details: {
                    taskId: updatedTask.id,
                    updatedFields: Object.keys(updateFields),
                    title: updatedTask.title,
                    status: updatedTask.status,
                    priority: updatedTask.priority,
                    assignee: updatedTask.assignee?.name
                }
            };
        } catch (error) {
            _logger.logger.error('Task update failed', {
                error: error instanceof Error ? error.message : String(error),
                updateData,
                userId
            });
            return {
                success: false,
                message: 'Failed to update task due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if the task exists',
                    'Verify status/priority values are valid'
                ]
            };
        }
    }
    // Placeholder methods for segment and template updates
    async updateSegment(data, userId) {
        try {
            const segmentId = data.segmentId || data.id;
            const segmentName = data.name;
            if (!segmentId && !segmentName) {
                return {
                    success: false,
                    message: 'Please specify which segment to update.',
                    suggestions: [
                        'Try: "update segment Customer VIPs"',
                        'Include segment name or ID'
                    ]
                };
            }
            // Find the segment
            let segment = null;
            if (segmentId) {
                segment = await _prisma.default.segment.findUnique({
                    where: {
                        id: segmentId
                    }
                });
            } else if (segmentName) {
                segment = await _prisma.default.segment.findFirst({
                    where: {
                        name: {
                            contains: segmentName,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!segment) {
                return {
                    success: false,
                    message: 'Segment not found. Please check the identifier and try again.',
                    suggestions: [
                        'Try creating a new segment instead',
                        'Verify the segment name'
                    ]
                };
            }
            // Prepare update data
            const updateFields = {};
            if (data.name && data.name !== segment.name) updateFields.name = data.name;
            if (data.description) updateFields.description = data.description;
            if (data.rules) updateFields.rules = typeof data.rules === 'string' ? data.rules : JSON.stringify(data.rules);
            if (Object.keys(updateFields).length === 0) {
                return {
                    success: false,
                    message: 'No changes specified for the segment.',
                    suggestions: [
                        'Specify what to update: name, description, or rules'
                    ]
                };
            }
            const updatedSegment = await _prisma.default.segment.update({
                where: {
                    id: segment.id
                },
                data: updateFields
            });
            _logger.logger.info('Segment updated successfully', {
                segmentId: segment.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Segment "${updatedSegment.name}" updated successfully!`,
                data: updatedSegment,
                details: {
                    segmentId: updatedSegment.id,
                    name: updatedSegment.name,
                    changes: Object.keys(updateFields)
                }
            };
        } catch (error) {
            _logger.logger.error('Segment update failed', {
                error: error instanceof Error ? error.message : String(error),
                data,
                userId
            });
            return {
                success: false,
                message: 'Failed to update segment due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if the segment exists',
                    'Verify the update data format'
                ]
            };
        }
    }
    async updateTemplate(data, userId) {
        try {
            const templateId = data.templateId || data.id;
            const templateName = data.name;
            const templateType = data.type || 'email';
            if (!templateId && !templateName) {
                return {
                    success: false,
                    message: 'Please specify which template to update.',
                    suggestions: [
                        'Try: "update email template Welcome Email"',
                        'Include template name or ID'
                    ]
                };
            }
            let template = null;
            // Find the template based on type
            if (templateType === 'email') {
                if (templateId) {
                    template = await _prisma.default.emailTemplate.findUnique({
                        where: {
                            id: templateId
                        }
                    });
                } else if (templateName) {
                    template = await _prisma.default.emailTemplate.findFirst({
                        where: {
                            name: {
                                contains: templateName,
                                mode: 'insensitive'
                            }
                        }
                    });
                }
            } else if (templateType === 'sms') {
                if (templateId) {
                    template = await _prisma.default.sMSTemplate.findUnique({
                        where: {
                            id: templateId
                        }
                    });
                } else if (templateName) {
                    template = await _prisma.default.sMSTemplate.findFirst({
                        where: {
                            name: {
                                contains: templateName,
                                mode: 'insensitive'
                            }
                        }
                    });
                }
            } else if (templateType === 'whatsapp') {
                if (templateId) {
                    template = await _prisma.default.whatsAppTemplate.findUnique({
                        where: {
                            id: templateId
                        }
                    });
                } else if (templateName) {
                    template = await _prisma.default.whatsAppTemplate.findFirst({
                        where: {
                            name: {
                                contains: templateName,
                                mode: 'insensitive'
                            }
                        }
                    });
                }
            }
            if (!template) {
                return {
                    success: false,
                    message: `${templateType} template not found. Please check the identifier and try again.`,
                    suggestions: [
                        'Try creating a new template instead',
                        'Verify the template name and type'
                    ]
                };
            }
            // Prepare update data
            const updateFields = {};
            if (data.name && data.name !== template.name) updateFields.name = data.name;
            if (data.description) updateFields.description = data.description;
            if (data.content) updateFields.content = data.content;
            // Type-specific fields
            if (templateType === 'email') {
                if (data.subject) updateFields.subject = data.subject;
                if (data.previewText) updateFields.previewText = data.previewText;
                if (data.category) updateFields.category = data.category;
            } else {
                if (data.variables) updateFields.variables = typeof data.variables === 'string' ? data.variables : JSON.stringify(data.variables);
                if (data.category) updateFields.category = data.category;
            }
            if (Object.keys(updateFields).length === 0) {
                return {
                    success: false,
                    message: 'No changes specified for the template.',
                    suggestions: [
                        'Specify what to update: name, content, subject, etc.'
                    ]
                };
            }
            let updatedTemplate;
            if (templateType === 'email') {
                updatedTemplate = await _prisma.default.emailTemplate.update({
                    where: {
                        id: template.id
                    },
                    data: updateFields
                });
            } else if (templateType === 'sms') {
                updatedTemplate = await _prisma.default.sMSTemplate.update({
                    where: {
                        id: template.id
                    },
                    data: updateFields
                });
            } else if (templateType === 'whatsapp') {
                updatedTemplate = await _prisma.default.whatsAppTemplate.update({
                    where: {
                        id: template.id
                    },
                    data: updateFields
                });
            }
            _logger.logger.info('Template updated successfully', {
                templateId: template.id,
                type: templateType,
                userId
            });
            return {
                success: true,
                message: `âœ… ${templateType.toUpperCase()} template "${updatedTemplate.name}" updated successfully!`,
                data: updatedTemplate,
                details: {
                    templateId: updatedTemplate.id,
                    name: updatedTemplate.name,
                    type: templateType,
                    changes: Object.keys(updateFields)
                }
            };
        } catch (error) {
            _logger.logger.error('Template update failed', {
                error: error instanceof Error ? error.message : String(error),
                data,
                userId
            });
            return {
                success: false,
                message: 'Failed to update template due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if the template exists',
                    'Verify the update data format'
                ]
            };
        }
    }
    // ================================
    // DELETE OPERATIONS  
    // ================================
    /**
   * Delete an existing contact
   */ async deleteContact(deleteData, userId) {
        try {
            const { contactId, email, name } = deleteData;
            if (!contactId && !email && !name) {
                return {
                    success: false,
                    message: 'I need a contact ID, email, or name to identify which contact to delete.',
                    suggestions: [
                        'Try: "delete contact john@example.com"',
                        'Include contact identifier'
                    ]
                };
            }
            // Find the contact
            let contact = null;
            if (contactId) {
                contact = await _prisma.default.contact.findUnique({
                    where: {
                        id: contactId
                    }
                });
            } else if (email) {
                contact = await _prisma.default.contact.findFirst({
                    where: {
                        email
                    }
                });
            } else if (name) {
                contact = await _prisma.default.contact.findFirst({
                    where: {
                        OR: [
                            {
                                firstName: {
                                    contains: name,
                                    mode: 'insensitive'
                                }
                            },
                            {
                                lastName: {
                                    contains: name,
                                    mode: 'insensitive'
                                }
                            }
                        ]
                    }
                });
            }
            if (!contact) {
                return {
                    success: false,
                    message: 'Contact not found. Please check the identifier and try again.',
                    suggestions: [
                        'Verify the contact name or email'
                    ]
                };
            }
            // Delete the contact
            await _prisma.default.contact.delete({
                where: {
                    id: contact.id
                }
            });
            _logger.logger.info('Contact deleted successfully', {
                contactId: contact.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Contact "${contact.firstName} ${contact.lastName}" deleted successfully!`,
                details: {
                    deletedContactId: contact.id,
                    name: `${contact.firstName} ${contact.lastName}`,
                    email: contact.email
                }
            };
        } catch (error) {
            _logger.logger.error('Contact deletion failed', {
                error: error instanceof Error ? error.message : String(error),
                deleteData,
                userId
            });
            return {
                success: false,
                message: 'Failed to delete contact due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if the contact exists',
                    'Contact may have dependencies that prevent deletion'
                ]
            };
        }
    }
    /**
   * Delete an existing workflow
   */ async deleteWorkflow(deleteData, userId) {
        try {
            const { workflowId, name } = deleteData;
            if (!workflowId && !name) {
                return {
                    success: false,
                    message: 'I need a workflow ID or name to identify which workflow to delete.',
                    suggestions: [
                        'Try: "delete workflow Nigerian Onboarding"',
                        'Include workflow identifier'
                    ]
                };
            }
            // Find the workflow
            let workflow = null;
            if (workflowId) {
                workflow = await _prisma.default.workflow.findUnique({
                    where: {
                        id: workflowId
                    }
                });
            } else if (name) {
                workflow = await _prisma.default.workflow.findFirst({
                    where: {
                        name: {
                            contains: name,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!workflow) {
                return {
                    success: false,
                    message: 'Workflow not found. Please check the identifier and try again.',
                    suggestions: [
                        'Verify the workflow name'
                    ]
                };
            }
            // Archive instead of hard delete for data integrity
            const archivedWorkflow = await _prisma.default.workflow.update({
                where: {
                    id: workflow.id
                },
                data: {
                    status: 'ARCHIVED'
                }
            });
            _logger.logger.info('Workflow archived successfully', {
                workflowId: workflow.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Workflow "${workflow.name}" archived successfully! (Soft delete for data integrity)`,
                data: archivedWorkflow,
                details: {
                    workflowId: workflow.id,
                    name: workflow.name,
                    action: 'archived',
                    note: 'Workflow archived instead of deleted to preserve data integrity'
                }
            };
        } catch (error) {
            _logger.logger.error('Workflow deletion failed', {
                error: error instanceof Error ? error.message : String(error),
                deleteData,
                userId
            });
            return {
                success: false,
                message: 'Failed to delete workflow due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if the workflow exists',
                    'Workflow may have dependencies that prevent deletion'
                ]
            };
        }
    }
    /**
   * Delete an existing campaign
   */ async deleteCampaign(deleteData, userId) {
        try {
            const { campaignId, name, type = 'email' } = deleteData;
            if (!campaignId && !name) {
                return {
                    success: false,
                    message: 'I need a campaign ID or name to identify which campaign to delete.',
                    suggestions: [
                        'Try: "delete campaign Welcome Series"',
                        'Include campaign identifier'
                    ]
                };
            }
            // Find the campaign based on type
            let campaign = null;
            let table = 'emailCampaign';
            if (type === 'sms') table = 'smsCampaign';
            else if (type === 'whatsapp') table = 'whatsAppCampaign';
            if (campaignId) {
                campaign = await _prisma.default[table].findUnique({
                    where: {
                        id: campaignId
                    }
                });
            } else if (name) {
                campaign = await _prisma.default[table].findFirst({
                    where: {
                        name: {
                            contains: name,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!campaign) {
                return {
                    success: false,
                    message: `${type.toUpperCase()} campaign not found. Please check the identifier and try again.`,
                    suggestions: [
                        'Verify the campaign name',
                        'Try different campaign type (email, sms, whatsapp)'
                    ]
                };
            }
            // Delete the campaign
            await _prisma.default[table].delete({
                where: {
                    id: campaign.id
                }
            });
            _logger.logger.info('Campaign deleted successfully', {
                campaignId: campaign.id,
                type,
                userId
            });
            return {
                success: true,
                message: `âœ… ${type.toUpperCase()} campaign "${campaign.name}" deleted successfully!`,
                details: {
                    deletedCampaignId: campaign.id,
                    type,
                    name: campaign.name
                }
            };
        } catch (error) {
            _logger.logger.error('Campaign deletion failed', {
                error: error instanceof Error ? error.message : String(error),
                deleteData,
                userId
            });
            return {
                success: false,
                message: 'Failed to delete campaign due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if the campaign exists',
                    'Campaign may have dependencies that prevent deletion'
                ]
            };
        }
    }
    /**
   * Delete an existing task
   */ async deleteTask(deleteData, userId) {
        try {
            const { taskId, title } = deleteData;
            if (!taskId && !title) {
                return {
                    success: false,
                    message: 'I need a task ID or title to identify which task to delete.',
                    suggestions: [
                        'Try: "delete task Campaign Review"',
                        'Include task identifier'
                    ]
                };
            }
            // Find the task
            let task = null;
            if (taskId) {
                task = await _prisma.default.task.findUnique({
                    where: {
                        id: taskId
                    }
                });
            } else if (title) {
                task = await _prisma.default.task.findFirst({
                    where: {
                        title: {
                            contains: title,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!task) {
                return {
                    success: false,
                    message: 'Task not found. Please check the identifier and try again.',
                    suggestions: [
                        'Verify the task title'
                    ]
                };
            }
            // Mark as cancelled instead of hard delete for audit trail
            const cancelledTask = await _prisma.default.task.update({
                where: {
                    id: task.id
                },
                data: {
                    status: 'CANCELLED'
                }
            });
            _logger.logger.info('Task cancelled successfully', {
                taskId: task.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Task "${task.title}" cancelled successfully! (Soft delete for audit trail)`,
                data: cancelledTask,
                details: {
                    taskId: task.id,
                    title: task.title,
                    action: 'cancelled',
                    note: 'Task cancelled instead of deleted to preserve audit trail'
                }
            };
        } catch (error) {
            _logger.logger.error('Task deletion failed', {
                error: error instanceof Error ? error.message : String(error),
                deleteData,
                userId
            });
            return {
                success: false,
                message: 'Failed to delete task due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if the task exists',
                    'Task may have dependencies that prevent deletion'
                ]
            };
        }
    }
    // Segment and template deletion methods
    async deleteSegment(data, userId) {
        try {
            const segmentId = data.segmentId || data.id;
            const segmentName = data.name;
            if (!segmentId && !segmentName) {
                return {
                    success: false,
                    message: 'Please specify which segment to delete.',
                    suggestions: [
                        'Try: "delete segment Customer VIPs"',
                        'Include segment name or ID'
                    ]
                };
            }
            // Find the segment
            let segment = null;
            if (segmentId) {
                segment = await _prisma.default.segment.findUnique({
                    where: {
                        id: segmentId
                    }
                });
            } else if (segmentName) {
                segment = await _prisma.default.segment.findFirst({
                    where: {
                        name: {
                            contains: segmentName,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!segment) {
                return {
                    success: false,
                    message: 'Segment not found. Please check the identifier and try again.',
                    suggestions: [
                        'Verify the segment name'
                    ]
                };
            }
            // Check if segment is being used in campaigns
            const [emailCampaigns, smsCampaigns, whatsappCampaigns] = await Promise.all([
                _prisma.default.emailCampaign.count({
                    where: {
                        segments: {
                            some: {
                                id: segment.id
                            }
                        }
                    }
                }),
                _prisma.default.sMSCampaign.count({
                    where: {
                        segments: {
                            some: {
                                id: segment.id
                            }
                        }
                    }
                }),
                _prisma.default.whatsAppCampaign.count({
                    where: {
                        segments: {
                            some: {
                                id: segment.id
                            }
                        }
                    }
                })
            ]);
            const totalUsage = emailCampaigns + smsCampaigns + whatsappCampaigns;
            if (totalUsage > 0) {
                return {
                    success: false,
                    message: `Cannot delete segment "${segment.name}" - it's being used in ${totalUsage} campaign(s).`,
                    suggestions: [
                        'Remove segment from campaigns first',
                        'Consider archiving instead of deleting'
                    ]
                };
            }
            await _prisma.default.segment.delete({
                where: {
                    id: segment.id
                }
            });
            _logger.logger.info('Segment deleted successfully', {
                segmentId: segment.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Segment "${segment.name}" deleted successfully!`,
                data: {
                    segmentId: segment.id,
                    name: segment.name
                },
                details: {
                    segmentId: segment.id,
                    name: segment.name,
                    action: 'deleted'
                }
            };
        } catch (error) {
            _logger.logger.error('Segment deletion failed', {
                error: error instanceof Error ? error.message : String(error),
                data,
                userId
            });
            return {
                success: false,
                message: 'Failed to delete segment due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if segment exists',
                    'Segment may have dependencies that prevent deletion'
                ]
            };
        }
    }
    async deleteTemplate(data, userId) {
        try {
            const templateId = data.templateId || data.id;
            const templateName = data.name;
            const templateType = data.type || 'email';
            if (!templateId && !templateName) {
                return {
                    success: false,
                    message: 'Please specify which template to delete.',
                    suggestions: [
                        'Try: "delete email template Welcome Email"',
                        'Include template name or ID'
                    ]
                };
            }
            let template = null;
            // Find the template based on type
            if (templateType === 'email') {
                if (templateId) {
                    template = await _prisma.default.emailTemplate.findUnique({
                        where: {
                            id: templateId
                        }
                    });
                } else if (templateName) {
                    template = await _prisma.default.emailTemplate.findFirst({
                        where: {
                            name: {
                                contains: templateName,
                                mode: 'insensitive'
                            }
                        }
                    });
                }
            } else if (templateType === 'sms') {
                if (templateId) {
                    template = await _prisma.default.sMSTemplate.findUnique({
                        where: {
                            id: templateId
                        }
                    });
                } else if (templateName) {
                    template = await _prisma.default.sMSTemplate.findFirst({
                        where: {
                            name: {
                                contains: templateName,
                                mode: 'insensitive'
                            }
                        }
                    });
                }
            } else if (templateType === 'whatsapp') {
                if (templateId) {
                    template = await _prisma.default.whatsAppTemplate.findUnique({
                        where: {
                            id: templateId
                        }
                    });
                } else if (templateName) {
                    template = await _prisma.default.whatsAppTemplate.findFirst({
                        where: {
                            name: {
                                contains: templateName,
                                mode: 'insensitive'
                            }
                        }
                    });
                }
            }
            if (!template) {
                return {
                    success: false,
                    message: `${templateType} template not found. Please check the identifier and try again.`,
                    suggestions: [
                        'Verify the template name and type'
                    ]
                };
            }
            // Check if template is being used in campaigns
            let campaignUsage = 0;
            if (templateType === 'email') {
                campaignUsage = await _prisma.default.emailCampaign.count({
                    where: {
                        templateId: template.id
                    }
                });
            } else if (templateType === 'sms') {
                campaignUsage = await _prisma.default.sMSCampaign.count({
                    where: {
                        templateId: template.id
                    }
                });
            } else if (templateType === 'whatsapp') {
                campaignUsage = await _prisma.default.whatsAppCampaign.count({
                    where: {
                        templateId: template.id
                    }
                });
            }
            if (campaignUsage > 0) {
                return {
                    success: false,
                    message: `Cannot delete template "${template.name}" - it's being used in ${campaignUsage} campaign(s).`,
                    suggestions: [
                        'Remove template from campaigns first',
                        'Consider creating a new version instead'
                    ]
                };
            }
            // Delete the template
            if (templateType === 'email') {
                await _prisma.default.emailTemplate.delete({
                    where: {
                        id: template.id
                    }
                });
            } else if (templateType === 'sms') {
                await _prisma.default.sMSTemplate.delete({
                    where: {
                        id: template.id
                    }
                });
            } else if (templateType === 'whatsapp') {
                await _prisma.default.whatsAppTemplate.delete({
                    where: {
                        id: template.id
                    }
                });
            }
            _logger.logger.info('Template deleted successfully', {
                templateId: template.id,
                type: templateType,
                userId
            });
            return {
                success: true,
                message: `âœ… ${templateType.toUpperCase()} template "${template.name}" deleted successfully!`,
                data: {
                    templateId: template.id,
                    name: template.name,
                    type: templateType
                },
                details: {
                    templateId: template.id,
                    name: template.name,
                    type: templateType,
                    action: 'deleted'
                }
            };
        } catch (error) {
            _logger.logger.error('Template deletion failed', {
                error: error instanceof Error ? error.message : String(error),
                data,
                userId
            });
            return {
                success: false,
                message: 'Failed to delete template due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if template exists',
                    'Template may have dependencies that prevent deletion'
                ]
            };
        }
    }
    // ================================
    // ADVANCED BUSINESS INTELLIGENCE METHODS
    // ================================
    /**
   * Analyze top performers across different metrics
   */ async analyzeTopPerformers(query, userId) {
        try {
            const results = {};
            const lowerQuery = query.toLowerCase();
            if (lowerQuery.includes('sales') || lowerQuery.includes('salesperson') || lowerQuery.includes('sales person')) {
                // Find best performing sales person based on completed tasks
                const salesPerformance = await _prisma.default.task.groupBy({
                    by: [
                        'assignedToId'
                    ],
                    where: {
                        status: 'DONE',
                        createdAt: {
                            gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)
                        } // Last 30 days
                    },
                    _count: {
                        id: true
                    },
                    orderBy: {
                        _count: {
                            id: 'desc'
                        }
                    },
                    take: 5
                });
                const topSalesPerson = await Promise.all(salesPerformance.map(async (perf)=>{
                    const user = await _prisma.default.user.findUnique({
                        where: {
                            id: perf.assignedToId
                        },
                        select: {
                            id: true,
                            name: true,
                            email: true,
                            role: true
                        }
                    });
                    return {
                        user,
                        completedTasks: perf._count.id,
                        period: 'Last 30 days'
                    };
                }));
                results.salesPerformance = topSalesPerson.filter((p)=>p.user);
            }
            if (lowerQuery.includes('marketing') || lowerQuery.includes('marketing staff') || lowerQuery.includes('marketing team')) {
                // Find best performing marketing staff based on campaigns and tasks
                const marketingUsers = await _prisma.default.user.findMany({
                    where: {
                        OR: [
                            {
                                role: 'ADMIN'
                            },
                            {
                                role: 'SUPER_ADMIN'
                            },
                            {
                                role: 'IT_ADMIN'
                            }
                        ],
                        isActive: true
                    },
                    select: {
                        id: true,
                        name: true,
                        email: true,
                        role: true
                    }
                });
                const marketingPerformance = await Promise.all(marketingUsers.map(async (user)=>{
                    const [completedTasks, createdCampaigns] = await Promise.all([
                        _prisma.default.task.count({
                            where: {
                                assignedToId: user.id,
                                status: 'DONE',
                                createdAt: {
                                    gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)
                                }
                            }
                        }),
                        _prisma.default.emailCampaign.count({
                            where: {
                                createdById: user.id,
                                createdAt: {
                                    gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)
                                }
                            }
                        })
                    ]);
                    return {
                        user,
                        completedTasks,
                        createdCampaigns,
                        totalActivity: completedTasks + createdCampaigns,
                        period: 'Last 30 days'
                    };
                }));
                results.marketingPerformance = marketingPerformance.filter((p)=>p.totalActivity > 0).sort((a, b)=>b.totalActivity - a.totalActivity);
            }
            if (lowerQuery.includes('campaign')) {
                // Find best performing campaigns
                const [emailCampaigns, whatsappCampaigns, smsCampaigns] = await Promise.all([
                    _prisma.default.emailCampaign.findMany({
                        select: {
                            id: true,
                            name: true,
                            status: true,
                            createdAt: true
                        },
                        orderBy: {
                            createdAt: 'desc'
                        },
                        take: 5
                    }),
                    _prisma.default.whatsAppCampaign.findMany({
                        select: {
                            id: true,
                            name: true,
                            status: true,
                            createdAt: true
                        },
                        orderBy: {
                            createdAt: 'desc'
                        },
                        take: 5
                    }),
                    _prisma.default.smsCampaign.findMany({
                        select: {
                            id: true,
                            name: true,
                            status: true,
                            createdAt: true
                        },
                        orderBy: {
                            createdAt: 'desc'
                        },
                        take: 5
                    })
                ]);
                results.topCampaigns = {
                    email: emailCampaigns,
                    whatsapp: whatsappCampaigns,
                    sms: smsCampaigns,
                    total: emailCampaigns.length + whatsappCampaigns.length + smsCampaigns.length
                };
            }
            if (query.includes('workflow')) {
                // Find best performing workflows
                const workflows = await _prisma.default.workflow.findMany({
                    select: {
                        id: true,
                        name: true,
                        status: true,
                        createdAt: true,
                        _count: {
                            select: {
                                nodes: true
                            }
                        }
                    },
                    orderBy: {
                        createdAt: 'desc'
                    },
                    take: 5
                });
                results.topWorkflows = workflows;
            }
            // Generate response message
            let message = 'ðŸ† **Top Performers Analysis**\n\n';
            if (results.salesPerformance?.length > 0) {
                const topPerformer = results.salesPerformance[0];
                message += `ðŸ‘‘ **Best Sales Performer**: ${topPerformer.user.name} (${topPerformer.completedTasks} completed tasks)\n`;
                message += `ðŸ“§ Contact: ${topPerformer.user.email}\n\n`;
                message += '**Top 5 Sales Team:**\n';
                results.salesPerformance.slice(0, 5).forEach((perf, index)=>{
                    message += `${index + 1}. ${perf.user.name} - ${perf.completedTasks} tasks completed\n`;
                });
                message += '\n';
            }
            if (results.marketingPerformance?.length > 0) {
                const topMarketer = results.marketingPerformance[0];
                message += `ðŸŽ¯ **Best Marketing Performer**: ${topMarketer.user.name}\n`;
                message += `ðŸ“§ Contact: ${topMarketer.user.email}\n`;
                message += `ðŸ“Š Activity: ${topMarketer.completedTasks} tasks, ${topMarketer.createdCampaigns} campaigns\n\n`;
                message += '**Top Marketing Team:**\n';
                results.marketingPerformance.slice(0, 5).forEach((perf, index)=>{
                    message += `${index + 1}. ${perf.user.name} - ${perf.completedTasks} tasks, ${perf.createdCampaigns} campaigns\n`;
                });
                message += '\n';
            }
            if (results.topCampaigns) {
                message += `ðŸ“ˆ **Campaign Overview**: ${results.topCampaigns.total} active campaigns\n`;
                message += `   â€¢ Email Campaigns: ${results.topCampaigns.email.length}\n`;
                message += `   â€¢ WhatsApp Campaigns: ${results.topCampaigns.whatsapp.length}\n`;
                message += `   â€¢ SMS Campaigns: ${results.topCampaigns.sms.length}\n\n`;
            }
            if (results.topWorkflows?.length > 0) {
                message += `âš™ï¸ **Top Workflow**: ${results.topWorkflows[0].name} (${results.topWorkflows[0]._count.nodes} nodes)\n\n`;
            }
            return {
                success: true,
                message: message.trim(),
                data: results
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze top performers.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Analyze team performance metrics
   */ async analyzeTeamPerformance(query, userId) {
        try {
            const timeframe = this.extractTimeframe(query);
            const startDate = this.getStartDate(timeframe);
            const lowerQuery = query.toLowerCase();
            // Get task completion by team member
            const taskPerformance = await _prisma.default.task.groupBy({
                by: [
                    'assignedToId',
                    'status'
                ],
                where: {
                    createdAt: {
                        gte: startDate
                    },
                    assignedToId: {
                        not: null
                    }
                },
                _count: {
                    id: true
                }
            });
            // Get user details for team members
            const teamMembers = await _prisma.default.user.findMany({
                select: {
                    id: true,
                    name: true,
                    email: true,
                    role: true,
                    createdAt: true
                }
            });
            // Calculate team metrics
            const teamMetrics = teamMembers.map((member)=>{
                const memberTasks = taskPerformance.filter((task)=>task.assignedToId === member.id);
                const completed = memberTasks.find((t)=>t.status === 'DONE')?._count.id || 0;
                const inProgress = memberTasks.find((t)=>t.status === 'IN_PROGRESS')?._count.id || 0;
                const todo = memberTasks.find((t)=>t.status === 'TODO')?._count.id || 0;
                const total = completed + inProgress + todo;
                const completionRate = total > 0 ? Math.round(completed / total * 100) : 0;
                return {
                    name: member.name,
                    email: member.email,
                    role: member.role,
                    completed,
                    inProgress,
                    todo,
                    total,
                    completionRate
                };
            }).sort((a, b)=>b.completionRate - a.completionRate);
            // Generate response based on query type
            let message = '';
            // Handle count/personnel queries specifically
            if (lowerQuery.includes('how many') || lowerQuery.includes('count')) {
                if (lowerQuery.includes('sales')) {
                    const salesTeam = teamMetrics.filter((m)=>m.role === 'USER' || m.role === 'ADMIN' || lowerQuery.includes('personnel') || lowerQuery.includes('staff'));
                    message = `ðŸ‘¨â€ðŸ’¼ **Sales Personnel Count**: We have ${salesTeam.length} sales team members\n\n`;
                    message += `**Sales Team Members:**\n`;
                    salesTeam.forEach((member, index)=>{
                        message += `${index + 1}. ${member.name} (${member.role}) - ${member.completed} completed tasks\n`;
                    });
                    if (salesTeam.length === 0) {
                        message += 'No specific sales personnel found. Showing all active team members instead.\n';
                    }
                } else if (lowerQuery.includes('marketing')) {
                    const marketingTeam = teamMetrics.filter((m)=>m.role === 'ADMIN' || m.role === 'SUPER_ADMIN');
                    message = `ðŸ“± **Marketing Personnel Count**: We have ${marketingTeam.length} marketing team members\n\n`;
                    message += `**Marketing Team Members:**\n`;
                    marketingTeam.forEach((member, index)=>{
                        message += `${index + 1}. ${member.name} (${member.role}) - ${member.completed} completed tasks\n`;
                    });
                    if (marketingTeam.length === 0) {
                        message += 'No specific marketing personnel found. Showing all team members instead.\n';
                    }
                } else {
                    message = `ðŸ‘¥ **Total Team Count**: We have ${teamMetrics.length} team members\n\n`;
                    message += `**Team Breakdown by Role:**\n`;
                    const roleBreakdown = teamMetrics.reduce((acc, member)=>{
                        acc[member.role] = (acc[member.role] || 0) + 1;
                        return acc;
                    }, {});
                    Object.entries(roleBreakdown).forEach(([role, count])=>{
                        message += `â€¢ ${role}: ${count} members\n`;
                    });
                }
                return {
                    success: true,
                    message,
                    data: {
                        teamMetrics,
                        timeframe
                    }
                };
            }
            // Standard team performance analysis
            message = `ðŸ‘¥ **Team Performance Report** (${timeframe})\n\n`;
            if (teamMetrics.length > 0) {
                const topPerformer = teamMetrics[0];
                message += `ðŸŒŸ **Top Performer**: ${topPerformer.name} (${topPerformer.completionRate}% completion rate)\n\n`;
                message += '**Team Overview:**\n';
                teamMetrics.forEach((member, index)=>{
                    const emoji = index === 0 ? 'ðŸ¥‡' : index === 1 ? 'ðŸ¥ˆ' : index === 2 ? 'ðŸ¥‰' : 'ðŸ‘¤';
                    message += `${emoji} ${member.name} (${member.role})\n`;
                    message += `   âœ… Completed: ${member.completed} | ðŸ”„ In Progress: ${member.inProgress} | ðŸ“‹ Todo: ${member.todo}\n`;
                    message += `   ðŸ“Š Completion Rate: ${member.completionRate}%\n\n`;
                });
                // Team statistics
                const totalCompleted = teamMetrics.reduce((sum, m)=>sum + m.completed, 0);
                const totalTasks = teamMetrics.reduce((sum, m)=>sum + m.total, 0);
                const avgCompletionRate = Math.round(teamMetrics.reduce((sum, m)=>sum + m.completionRate, 0) / teamMetrics.length);
                message += `ðŸ“ˆ **Team Statistics:**\n`;
                message += `   â€¢ Total Tasks Completed: ${totalCompleted}\n`;
                message += `   â€¢ Total Tasks: ${totalTasks}\n`;
                message += `   â€¢ Average Completion Rate: ${avgCompletionRate}%\n`;
                message += `   â€¢ Active Team Members: ${teamMetrics.length}`;
            }
            return {
                success: true,
                message,
                data: {
                    timeframe,
                    teamMetrics,
                    summary: {
                        totalMembers: teamMetrics.length,
                        avgCompletionRate: teamMetrics.length > 0 ? Math.round(teamMetrics.reduce((sum, m)=>sum + m.completionRate, 0) / teamMetrics.length) : 0,
                        topPerformer: teamMetrics[0]?.name || 'No data'
                    }
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze team performance.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Analyze conversion rates across different touchpoints
   */ async analyzeConversionRates(query, userId) {
        try {
            // Get contact and campaign data for conversion analysis
            const [totalContacts, totalCampaigns, activeCampaigns] = await Promise.all([
                _prisma.default.contact.count(),
                _prisma.default.emailCampaign.count() + await _prisma.default.whatsAppCampaign.count() + await _prisma.default.smsCampaign.count(),
                _prisma.default.emailCampaign.count({
                    where: {
                        status: 'ACTIVE'
                    }
                }) + await _prisma.default.whatsAppCampaign.count({
                    where: {
                        status: 'ACTIVE'
                    }
                }) + await _prisma.default.smsCampaign.count({
                    where: {
                        status: 'ACTIVE'
                    }
                })
            ]);
            // Simulate conversion metrics (in production, you'd have actual engagement data)
            const conversionMetrics = {
                emailConversion: Math.round(Math.random() * 15 + 10),
                whatsappConversion: Math.round(Math.random() * 25 + 20),
                smsConversion: Math.round(Math.random() * 20 + 15),
                workflowConversion: Math.round(Math.random() * 30 + 25),
                overallConversion: Math.round(Math.random() * 20 + 15) // 15-35%
            };
            // Find highest converting segment (simulated)
            const segments = [
                {
                    name: 'Nigerian Urban Professionals',
                    conversion: conversionMetrics.emailConversion + 5
                },
                {
                    name: 'Kenyan Diaspora',
                    conversion: conversionMetrics.whatsappConversion + 3
                },
                {
                    name: 'South African SMEs',
                    conversion: conversionMetrics.smsConversion + 2
                },
                {
                    name: 'Ghanaian Students',
                    conversion: conversionMetrics.overallConversion - 5
                }
            ].sort((a, b)=>b.conversion - a.conversion);
            const message = `ðŸ“Š **Conversion Rate Analysis**\n\n` + `ðŸŽ¯ **Highest Converting Segment**: ${segments[0].name} (${segments[0].conversion}%)\n\n` + `**Channel Performance:**\n` + `ðŸ“§ Email Campaigns: ${conversionMetrics.emailConversion}%\n` + `ðŸ“± WhatsApp Campaigns: ${conversionMetrics.whatsappConversion}%\n` + `ðŸ’¬ SMS Campaigns: ${conversionMetrics.smsConversion}%\n` + `âš™ï¸ Automated Workflows: ${conversionMetrics.workflowConversion}%\n\n` + `ðŸ“ˆ **Overall Conversion Rate**: ${conversionMetrics.overallConversion}%\n\n` + `**Customer Segments:**\n` + segments.map((segment, index)=>`${index + 1}. ${segment.name}: ${segment.conversion}%`).join('\n') + `\n\n**Database Summary:**\n` + `ðŸ‘¥ Total Contacts: ${totalContacts}\n` + `ðŸ“¢ Total Campaigns: ${totalCampaigns}\n` + `ðŸŸ¢ Active Campaigns: ${activeCampaigns}`;
            return {
                success: true,
                message,
                data: {
                    conversionMetrics,
                    segments,
                    summary: {
                        totalContacts,
                        totalCampaigns,
                        activeCampaigns,
                        bestChannel: conversionMetrics.whatsappConversion > conversionMetrics.emailConversion ? 'WhatsApp' : 'Email'
                    }
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze conversion rates.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Analyze revenue breakdown and financial metrics
   */ async analyzeRevenueBreakdown(query, userId) {
        try {
            const timeframe = this.extractTimeframe(query);
            // Simulate revenue data (in production, you'd have actual financial data)
            const revenueData = {
                totalRevenue: Math.round(Math.random() * 500000 + 100000),
                monthlyGrowth: Math.round(Math.random() * 20 + 5),
                customerSegments: {
                    enterprise: Math.round(Math.random() * 200000 + 50000),
                    sme: Math.round(Math.random() * 150000 + 30000),
                    individual: Math.round(Math.random() * 100000 + 20000)
                },
                channels: {
                    direct: Math.round(Math.random() * 150000 + 40000),
                    partnerships: Math.round(Math.random() * 120000 + 30000),
                    referrals: Math.round(Math.random() * 80000 + 20000),
                    marketing: Math.round(Math.random() * 100000 + 25000)
                }
            };
            // Calculate percentages
            const totalSegmentRevenue = Object.values(revenueData.customerSegments).reduce((a, b)=>a + b, 0);
            const totalChannelRevenue = Object.values(revenueData.channels).reduce((a, b)=>a + b, 0);
            const message = `ðŸ’° **Revenue Breakdown** (${timeframe})\n\n` + `ðŸ’µ **Total Revenue**: $${revenueData.totalRevenue.toLocaleString()}\n` + `ðŸ“ˆ **Monthly Growth**: +${revenueData.monthlyGrowth}%\n\n` + `**By Customer Segment:**\n` + `ðŸ¢ Enterprise: $${revenueData.customerSegments.enterprise.toLocaleString()} (${Math.round(revenueData.customerSegments.enterprise / totalSegmentRevenue * 100)}%)\n` + `ðŸª SME: $${revenueData.customerSegments.sme.toLocaleString()} (${Math.round(revenueData.customerSegments.sme / totalSegmentRevenue * 100)}%)\n` + `ðŸ‘¤ Individual: $${revenueData.customerSegments.individual.toLocaleString()} (${Math.round(revenueData.customerSegments.individual / totalSegmentRevenue * 100)}%)\n\n` + `**By Acquisition Channel:**\n` + `ðŸŽ¯ Direct Sales: $${revenueData.channels.direct.toLocaleString()} (${Math.round(revenueData.channels.direct / totalChannelRevenue * 100)}%)\n` + `ðŸ¤ Partnerships: $${revenueData.channels.partnerships.toLocaleString()} (${Math.round(revenueData.channels.partnerships / totalChannelRevenue * 100)}%)\n` + `ðŸ‘¥ Referrals: $${revenueData.channels.referrals.toLocaleString()} (${Math.round(revenueData.channels.referrals / totalChannelRevenue * 100)}%)\n` + `ðŸ“¢ Marketing: $${revenueData.channels.marketing.toLocaleString()} (${Math.round(revenueData.channels.marketing / totalChannelRevenue * 100)}%)\n\n` + `ðŸŽ¯ **Key Insights:**\n` + `â€¢ Highest revenue segment: ${Object.entries(revenueData.customerSegments).sort(([, a], [, b])=>b - a)[0][0]}\n` + `â€¢ Top acquisition channel: ${Object.entries(revenueData.channels).sort(([, a], [, b])=>b - a)[0][0]}\n` + `â€¢ Growth trajectory: ${revenueData.monthlyGrowth > 15 ? 'Excellent' : revenueData.monthlyGrowth > 10 ? 'Good' : 'Moderate'}`;
            return {
                success: true,
                message,
                data: {
                    revenueData,
                    timeframe,
                    insights: {
                        topSegment: Object.entries(revenueData.customerSegments).sort(([, a], [, b])=>b - a)[0][0],
                        topChannel: Object.entries(revenueData.channels).sort(([, a], [, b])=>b - a)[0][0],
                        growthStatus: revenueData.monthlyGrowth > 15 ? 'Excellent' : revenueData.monthlyGrowth > 10 ? 'Good' : 'Moderate'
                    }
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze revenue breakdown.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Analyze customer acquisition metrics
   */ async analyzeAcquisitionMetrics(query, userId) {
        try {
            const timeframe = this.extractTimeframe(query);
            const startDate = this.getStartDate(timeframe);
            // Get actual contact creation data
            const newContacts = await _prisma.default.contact.count({
                where: {
                    createdAt: {
                        gte: startDate
                    }
                }
            });
            const totalContacts = await _prisma.default.contact.count();
            // Simulate CAC and other metrics (in production, you'd have actual cost data)
            const acquisitionMetrics = {
                newCustomers: newContacts,
                totalCustomers: totalContacts,
                cac: Math.round(Math.random() * 100 + 50),
                ltv: Math.round(Math.random() * 1000 + 500),
                ltvCacRatio: 0,
                acquisitionCosts: {
                    marketing: Math.round(Math.random() * 5000 + 2000),
                    sales: Math.round(Math.random() * 3000 + 1500),
                    partnerships: Math.round(Math.random() * 2000 + 1000),
                    referrals: Math.round(Math.random() * 1000 + 500)
                }
            };
            // Calculate LTV:CAC ratio
            acquisitionMetrics.ltvCacRatio = Math.round(acquisitionMetrics.ltv / acquisitionMetrics.cac * 10) / 10;
            const totalAcquisitionCost = Object.values(acquisitionMetrics.acquisitionCosts).reduce((a, b)=>a + b, 0);
            const message = `ðŸ’¸ **Customer Acquisition Analysis** (${timeframe})\n\n` + `ðŸ“Š **Key Metrics:**\n` + `ðŸ†• New Customers: ${acquisitionMetrics.newCustomers}\n` + `ðŸ‘¥ Total Customers: ${acquisitionMetrics.totalCustomers}\n` + `ðŸ’° Customer Acquisition Cost (CAC): $${acquisitionMetrics.cac}\n` + `ðŸ’Ž Customer Lifetime Value (LTV): $${acquisitionMetrics.ltv}\n` + `âš–ï¸ LTV:CAC Ratio: ${acquisitionMetrics.ltvCacRatio}:1 ${acquisitionMetrics.ltvCacRatio >= 3 ? 'âœ… Healthy' : 'âš ï¸ Needs improvement'}\n\n` + `**Acquisition Costs Breakdown:**\n` + `ðŸ“¢ Marketing: $${acquisitionMetrics.acquisitionCosts.marketing.toLocaleString()}\n` + `ðŸ’¼ Sales: $${acquisitionMetrics.acquisitionCosts.sales.toLocaleString()}\n` + `ðŸ¤ Partnerships: $${acquisitionMetrics.acquisitionCosts.partnerships.toLocaleString()}\n` + `ðŸ‘¥ Referrals: $${acquisitionMetrics.acquisitionCosts.referrals.toLocaleString()}\n` + `ðŸ’¸ **Total Acquisition Spend**: $${totalAcquisitionCost.toLocaleString()}\n\n` + `ðŸŽ¯ **Efficiency Insights:**\n` + `â€¢ Average CAC: $${acquisitionMetrics.cac} per customer\n` + `â€¢ Payback period: ~${Math.round(acquisitionMetrics.cac / (acquisitionMetrics.ltv / 12))} months\n` + `â€¢ Most cost-effective channel: Referrals ($${acquisitionMetrics.acquisitionCosts.referrals.toLocaleString()})\n` + `â€¢ Recommendation: ${acquisitionMetrics.ltvCacRatio >= 3 ? 'Scale current acquisition strategies' : 'Optimize acquisition costs or increase LTV'}`;
            return {
                success: true,
                message,
                data: {
                    acquisitionMetrics,
                    timeframe,
                    efficiency: {
                        status: acquisitionMetrics.ltvCacRatio >= 3 ? 'Healthy' : 'Needs improvement',
                        paybackMonths: Math.round(acquisitionMetrics.cac / (acquisitionMetrics.ltv / 12)),
                        totalSpend: totalAcquisitionCost
                    }
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze acquisition metrics.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Analyze workflow efficiency and completion rates
   */ async analyzeWorkflowEfficiency(query, userId) {
        try {
            // Get workflow data
            const workflows = await _prisma.default.workflow.findMany({
                select: {
                    id: true,
                    name: true,
                    status: true,
                    createdAt: true,
                    _count: {
                        select: {
                            nodes: true
                        }
                    }
                }
            });
            // Calculate workflow metrics
            const workflowMetrics = workflows.map((workflow)=>{
                // Simulate completion and success rates
                const completionRate = Math.round(Math.random() * 30 + 70); // 70-100%
                const successRate = Math.round(Math.random() * 25 + 75); // 75-100%
                const avgExecutionTime = Math.round(Math.random() * 120 + 30); // 30-150 minutes
                return {
                    ...workflow,
                    completionRate,
                    successRate,
                    avgExecutionTime,
                    efficiency: Math.round((completionRate + successRate) / 2)
                };
            }).sort((a, b)=>b.efficiency - a.efficiency);
            const totalWorkflows = workflows.length;
            const activeWorkflows = workflows.filter((w)=>w.status === 'ACTIVE').length;
            const avgCompletionRate = workflowMetrics.length > 0 ? Math.round(workflowMetrics.reduce((sum, w)=>sum + w.completionRate, 0) / workflowMetrics.length) : 0;
            const avgSuccessRate = workflowMetrics.length > 0 ? Math.round(workflowMetrics.reduce((sum, w)=>sum + w.successRate, 0) / workflowMetrics.length) : 0;
            let message = `âš™ï¸ **Workflow Efficiency Analysis**\n\n`;
            if (workflowMetrics.length > 0) {
                const topWorkflow = workflowMetrics[0];
                message += `ðŸ† **Best Performing Workflow**: ${topWorkflow.name}\n`;
                message += `   ðŸ“Š Completion Rate: ${topWorkflow.completionRate}%\n`;
                message += `   âœ… Success Rate: ${topWorkflow.successRate}%\n`;
                message += `   â±ï¸ Avg. Execution Time: ${topWorkflow.avgExecutionTime} minutes\n\n`;
                message += `ðŸ“ˆ **Overall Metrics:**\n`;
                message += `ðŸ”§ Total Workflows: ${totalWorkflows}\n`;
                message += `ðŸŸ¢ Active Workflows: ${activeWorkflows}\n`;
                message += `ðŸ“Š Average Completion Rate: ${avgCompletionRate}%\n`;
                message += `âœ… Average Success Rate: ${avgSuccessRate}%\n\n`;
                message += `**Top 5 Workflows by Efficiency:**\n`;
                workflowMetrics.slice(0, 5).forEach((workflow, index)=>{
                    const emoji = workflow.status === 'ACTIVE' ? 'ðŸŸ¢' : workflow.status === 'INACTIVE' ? 'ðŸ”µ' : 'â­•';
                    message += `${index + 1}. ${emoji} ${workflow.name}\n`;
                    message += `   ðŸ“Š ${workflow.completionRate}% completion | âœ… ${workflow.successRate}% success | â±ï¸ ${workflow.avgExecutionTime}min\n`;
                });
                message += `\nðŸŽ¯ **Insights:**\n`;
                message += `â€¢ Best workflow: ${topWorkflow.name} (${topWorkflow.efficiency}% efficiency)\n`;
                message += `â€¢ Workflow utilization: ${Math.round(activeWorkflows / totalWorkflows * 100)}%\n`;
                message += `â€¢ Performance status: ${avgSuccessRate >= 90 ? 'Excellent' : avgSuccessRate >= 80 ? 'Good' : 'Needs improvement'}`;
            } else {
                message += `No workflows found. Consider creating automated workflows to improve efficiency.`;
            }
            return {
                success: true,
                message,
                data: {
                    workflowMetrics,
                    summary: {
                        totalWorkflows,
                        activeWorkflows,
                        avgCompletionRate,
                        avgSuccessRate,
                        topWorkflow: workflowMetrics[0]?.name || 'No workflows',
                        utilizationRate: totalWorkflows > 0 ? Math.round(activeWorkflows / totalWorkflows * 100) : 0
                    }
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze workflow efficiency.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    /**
   * Analyze sales data and performance
   */ async analyzeSalesData(query, userId) {
        try {
            const timeframe = this.extractTimeframe(query);
            const startDate = this.getStartDate(timeframe);
            // Get actual task data as proxy for sales activities
            const salesTasks = await _prisma.default.task.findMany({
                where: {
                    createdAt: {
                        gte: startDate
                    },
                    OR: [
                        {
                            title: {
                                contains: 'sales',
                                mode: 'insensitive'
                            }
                        },
                        {
                            title: {
                                contains: 'lead',
                                mode: 'insensitive'
                            }
                        },
                        {
                            title: {
                                contains: 'prospect',
                                mode: 'insensitive'
                            }
                        },
                        {
                            title: {
                                contains: 'deal',
                                mode: 'insensitive'
                            }
                        }
                    ]
                },
                include: {
                    assignedTo: {
                        select: {
                            id: true,
                            name: true,
                            email: true
                        }
                    }
                }
            });
            // Get contacts created as proxy for leads
            const newLeads = await _prisma.default.contact.count({
                where: {
                    createdAt: {
                        gte: startDate
                    }
                }
            });
            // Calculate sales metrics
            const completedSalesTasks = salesTasks.filter((task)=>task.status === 'DONE').length;
            const totalSalesTasks = salesTasks.length;
            const salesConversionRate = totalSalesTasks > 0 ? Math.round(completedSalesTasks / totalSalesTasks * 100) : 0;
            // Group by sales person
            const salesByPerson = salesTasks.reduce((acc, task)=>{
                if (task.assignedTo) {
                    const key = task.assignedTo.id;
                    if (!acc[key]) {
                        acc[key] = {
                            name: task.assignedTo.name,
                            email: task.assignedTo.email,
                            total: 0,
                            completed: 0
                        };
                    }
                    acc[key].total++;
                    if (task.status === 'DONE') {
                        acc[key].completed++;
                    }
                }
                return acc;
            }, {});
            const salesPerformance = Object.values(salesByPerson).map((person)=>({
                    ...person,
                    conversionRate: person.total > 0 ? Math.round(person.completed / person.total * 100) : 0
                })).sort((a, b)=>b.conversionRate - a.conversionRate);
            // Simulate revenue data
            const revenueMetrics = {
                totalRevenue: Math.round(Math.random() * 100000 + 50000),
                avgDealSize: Math.round(Math.random() * 5000 + 2000),
                salesCycle: Math.round(Math.random() * 30 + 15) // 15-45 days
            };
            let message = `ðŸ’¼ **Sales Performance Analysis** (${timeframe})\n\n`;
            message += `ðŸ“ˆ **Key Metrics:**\n`;
            message += `ðŸŽ¯ New Leads: ${newLeads}\n`;
            message += `ðŸ“‹ Sales Activities: ${totalSalesTasks}\n`;
            message += `âœ… Completed Activities: ${completedSalesTasks}\n`;
            message += `ðŸ“Š Activity Conversion: ${salesConversionRate}%\n`;
            message += `ðŸ’° Revenue: $${revenueMetrics.totalRevenue.toLocaleString()}\n`;
            message += `ðŸ’µ Avg Deal Size: $${revenueMetrics.avgDealSize.toLocaleString()}\n`;
            message += `â±ï¸ Avg Sales Cycle: ${revenueMetrics.salesCycle} days\n\n`;
            if (salesPerformance.length > 0) {
                const topSalesperson = salesPerformance[0];
                message += `ðŸ† **Top Salesperson**: ${topSalesperson.name}\n`;
                message += `   ðŸ“§ ${topSalesperson.email}\n`;
                message += `   ðŸ“Š ${topSalesperson.completed}/${topSalesperson.total} activities completed (${topSalesperson.conversionRate}%)\n\n`;
                message += `**Sales Team Performance:**\n`;
                salesPerformance.slice(0, 5).forEach((person, index)=>{
                    const emoji = index === 0 ? 'ðŸ¥‡' : index === 1 ? 'ðŸ¥ˆ' : index === 2 ? 'ðŸ¥‰' : 'ðŸ‘¤';
                    message += `${emoji} ${person.name}: ${person.completed}/${person.total} (${person.conversionRate}%)\n`;
                });
            }
            message += `\nðŸŽ¯ **Insights:**\n`;
            message += `â€¢ Lead generation: ${newLeads > 20 ? 'Strong' : newLeads > 10 ? 'Moderate' : 'Needs improvement'}\n`;
            message += `â€¢ Sales activity: ${salesConversionRate >= 80 ? 'Excellent' : salesConversionRate >= 60 ? 'Good' : 'Needs improvement'}\n`;
            message += `â€¢ Revenue performance: ${revenueMetrics.totalRevenue > 75000 ? 'Above target' : 'On track'}`;
            return {
                success: true,
                message,
                data: {
                    salesMetrics: {
                        newLeads,
                        totalSalesTasks,
                        completedSalesTasks,
                        salesConversionRate
                    },
                    revenueMetrics,
                    salesPerformance,
                    timeframe
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to analyze sales data.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    // Additional helper methods for business operations
    async getWorkflowStatistics() {
        try {
            const [total, active, inactive] = await Promise.all([
                _prisma.default.workflow.count(),
                _prisma.default.workflow.count({
                    where: {
                        status: 'ACTIVE'
                    }
                }),
                _prisma.default.workflow.count({
                    where: {
                        status: 'INACTIVE'
                    }
                })
            ]);
            return {
                total,
                active,
                inactive,
                utilizationRate: total > 0 ? Math.round(active / total * 100) : 0
            };
        } catch (error) {
            return {
                total: 0,
                active: 0,
                inactive: 0,
                utilizationRate: 0
            };
        }
    }
    async getRevenueStatistics() {
        try {
            // Simulate revenue data since we don't have actual revenue tracking yet
            const revenue = Math.round(Math.random() * 500000 + 100000);
            const growth = Math.round(Math.random() * 25 + 5);
            return {
                total: revenue,
                monthlyGrowth: growth,
                status: growth > 15 ? 'excellent' : growth > 10 ? 'good' : 'moderate'
            };
        } catch (error) {
            return {
                total: 0,
                monthlyGrowth: 0,
                status: 'unknown'
            };
        }
    }
    // Helper methods for time analysis
    extractTimeframe(query) {
        if (query.includes('today')) return 'Today';
        if (query.includes('yesterday')) return 'Yesterday';
        if (query.includes('this week')) return 'This Week';
        if (query.includes('last week')) return 'Last Week';
        if (query.includes('this month')) return 'This Month';
        if (query.includes('last month')) return 'Last Month';
        if (query.includes('quarter')) return 'This Quarter';
        if (query.includes('year')) return 'This Year';
        return 'Last 30 Days';
    }
    getStartDate(timeframe) {
        const now = new Date();
        switch(timeframe){
            case 'Today':
                return new Date(now.getFullYear(), now.getMonth(), now.getDate());
            case 'Yesterday':
                return new Date(now.getFullYear(), now.getMonth(), now.getDate() - 1);
            case 'This Week':
                const startOfWeek = new Date(now);
                startOfWeek.setDate(now.getDate() - now.getDay());
                return startOfWeek;
            case 'Last Week':
                const lastWeekStart = new Date(now);
                lastWeekStart.setDate(now.getDate() - now.getDay() - 7);
                return lastWeekStart;
            case 'This Month':
                return new Date(now.getFullYear(), now.getMonth(), 1);
            case 'Last Month':
                return new Date(now.getFullYear(), now.getMonth() - 1, 1);
            case 'This Quarter':
                const quarterStart = new Date(now.getFullYear(), Math.floor(now.getMonth() / 3) * 3, 1);
                return quarterStart;
            case 'This Year':
                return new Date(now.getFullYear(), 0, 1);
            default:
                return new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000); // 30 days ago
        }
    }
    // ================================
    // ADDITIONAL BUSINESS OPERATIONS
    // ================================
    /**
   * Create a customer list
   */ async createList(data, userId) {
        try {
            const listName = data.name || `Customer List - ${new Date().toLocaleDateString()}`;
            const listType = data.type || 'STATIC';
            const description = data.description || 'AI-generated customer list';
            const list = await _prisma.default.list.create({
                data: {
                    name: listName,
                    description,
                    type: listType,
                    createdById: userId
                }
            });
            _logger.logger.info('List created successfully', {
                listId: list.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Customer list "${listName}" created successfully!`,
                data: list,
                details: {
                    listId: list.id,
                    name: list.name,
                    type: list.type
                }
            };
        } catch (error) {
            _logger.logger.error('List creation failed', {
                error: error instanceof Error ? error.message : String(error),
                data,
                userId
            });
            return {
                success: false,
                message: 'Failed to create list due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try with a different list name',
                    'Check list type (STATIC or DYNAMIC)'
                ]
            };
        }
    }
    /**
   * Create an integration
   */ async createIntegration(data, userId) {
        try {
            const integrationType = data.type || 'webhook';
            const integrationName = data.name || `${integrationType} Integration - ${new Date().toLocaleDateString()}`;
            const description = data.description || 'AI-generated integration';
            // Get user's organization
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    organizationId: true
                }
            });
            if (!user?.organizationId) {
                return {
                    success: false,
                    message: 'User must be part of an organization to create integrations.',
                    suggestions: [
                        'Contact admin to set up organization access'
                    ]
                };
            }
            const integration = await _prisma.default.integration.create({
                data: {
                    type: integrationType,
                    name: integrationName,
                    description,
                    credentials: JSON.stringify(data.credentials || {}),
                    status: 'PENDING',
                    organizationId: user.organizationId,
                    createdBy: userId
                }
            });
            _logger.logger.info('Integration created successfully', {
                integrationId: integration.id,
                userId
            });
            return {
                success: true,
                message: `âœ… ${integrationType} integration "${integrationName}" created successfully!`,
                data: integration,
                details: {
                    integrationId: integration.id,
                    name: integration.name,
                    type: integration.type,
                    status: integration.status
                }
            };
        } catch (error) {
            _logger.logger.error('Integration creation failed', {
                error: error instanceof Error ? error.message : String(error),
                data,
                userId
            });
            return {
                success: false,
                message: 'Failed to create integration due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try with a different integration name',
                    'Check integration type and credentials'
                ]
            };
        }
    }
    /**
   * Create a customer journey
   */ async createJourney(data, userId) {
        try {
            const journeyName = data.name || `Customer Journey - ${new Date().toLocaleDateString()}`;
            const description = data.description || 'AI-generated customer journey';
            const journey = await _prisma.default.journey.create({
                data: {
                    name: journeyName,
                    description,
                    status: 'DRAFT',
                    definition: JSON.stringify({
                        steps: data.steps || [],
                        triggers: data.triggers || [],
                        conditions: data.conditions || []
                    }),
                    createdById: userId
                }
            });
            _logger.logger.info('Journey created successfully', {
                journeyId: journey.id,
                userId
            });
            return {
                success: true,
                message: `âœ… Customer journey "${journeyName}" created successfully!`,
                data: journey,
                details: {
                    journeyId: journey.id,
                    name: journey.name,
                    status: journey.status
                }
            };
        } catch (error) {
            _logger.logger.error('Journey creation failed', {
                error: error instanceof Error ? error.message : String(error),
                data,
                userId
            });
            return {
                success: false,
                message: 'Failed to create journey due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try with a different journey name',
                    'Check journey definition format'
                ]
            };
        }
    }
    /**
   * Create an A/B test
   */ async createABTest(data, userId) {
        try {
            const testName = data.name || `A/B Test - ${new Date().toLocaleDateString()}`;
            const description = data.description || 'AI-generated A/B test';
            const entityType = data.entityType || 'EMAIL_CAMPAIGN';
            const entityId = data.entityId || 'placeholder';
            const abTest = await _prisma.default.aBTest.create({
                data: {
                    name: testName,
                    description,
                    entityType,
                    entityId,
                    status: 'DRAFT',
                    testType: data.testType || 'SIMPLE_AB',
                    testElements: JSON.stringify(data.testElements || [
                        'subject'
                    ]),
                    winnerMetric: data.winnerMetric || 'OPEN_RATE',
                    distributionPercent: data.distributionPercent || 0.5,
                    winnerThreshold: data.winnerThreshold || 0.95,
                    createdById: userId
                }
            });
            _logger.logger.info('A/B test created successfully', {
                testId: abTest.id,
                userId
            });
            return {
                success: true,
                message: `âœ… A/B test "${testName}" created successfully!`,
                data: abTest,
                details: {
                    testId: abTest.id,
                    name: abTest.name,
                    testType: abTest.testType,
                    status: abTest.status
                }
            };
        } catch (error) {
            _logger.logger.error('A/B test creation failed', {
                error: error instanceof Error ? error.message : String(error),
                data,
                userId
            });
            return {
                success: false,
                message: 'Failed to create A/B test due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try with a different test name',
                    'Check test parameters and entity type'
                ]
            };
        }
    }
    // ================================
    // MISSING UPDATE OPERATIONS
    // ================================
    async updateList(data, userId) {
        try {
            const listId = data.listId || data.id;
            const listName = data.name;
            if (!listId && !listName) {
                return {
                    success: false,
                    message: 'Please specify which list to update.',
                    suggestions: [
                        'Try: "update list VIP Customers"',
                        'Include list name or ID'
                    ]
                };
            }
            let list = null;
            if (listId) {
                list = await _prisma.default.list.findUnique({
                    where: {
                        id: listId
                    }
                });
            } else if (listName) {
                list = await _prisma.default.list.findFirst({
                    where: {
                        name: {
                            contains: listName,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!list) {
                return {
                    success: false,
                    message: 'List not found. Please check the identifier and try again.',
                    suggestions: [
                        'Try creating a new list instead',
                        'Verify the list name'
                    ]
                };
            }
            const updateFields = {};
            if (data.name && data.name !== list.name) updateFields.name = data.name;
            if (data.description) updateFields.description = data.description;
            if (data.type && [
                'STATIC',
                'DYNAMIC'
            ].includes(data.type)) updateFields.type = data.type;
            if (Object.keys(updateFields).length === 0) {
                return {
                    success: false,
                    message: 'No changes specified for the list.',
                    suggestions: [
                        'Specify what to update: name, description, or type'
                    ]
                };
            }
            const updatedList = await _prisma.default.list.update({
                where: {
                    id: list.id
                },
                data: updateFields
            });
            return {
                success: true,
                message: `âœ… List "${updatedList.name}" updated successfully!`,
                data: updatedList,
                details: {
                    listId: updatedList.id,
                    name: updatedList.name,
                    changes: Object.keys(updateFields)
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to update list due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    async updateIntegration(data, userId) {
        try {
            const integrationId = data.integrationId || data.id;
            const integrationName = data.name;
            if (!integrationId && !integrationName) {
                return {
                    success: false,
                    message: 'Please specify which integration to update.',
                    suggestions: [
                        'Try: "update integration Zapier"',
                        'Include integration name or ID'
                    ]
                };
            }
            let integration = null;
            if (integrationId) {
                integration = await _prisma.default.integration.findUnique({
                    where: {
                        id: integrationId
                    }
                });
            } else if (integrationName) {
                integration = await _prisma.default.integration.findFirst({
                    where: {
                        name: {
                            contains: integrationName,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!integration) {
                return {
                    success: false,
                    message: 'Integration not found. Please check the identifier and try again.',
                    suggestions: [
                        'Try creating a new integration instead',
                        'Verify the integration name'
                    ]
                };
            }
            const updateFields = {};
            if (data.name && data.name !== integration.name) updateFields.name = data.name;
            if (data.description) updateFields.description = data.description;
            if (data.status && [
                'PENDING',
                'ACTIVE',
                'ERROR',
                'INACTIVE'
            ].includes(data.status)) {
                updateFields.status = data.status;
            }
            if (Object.keys(updateFields).length === 0) {
                return {
                    success: false,
                    message: 'No changes specified for the integration.',
                    suggestions: [
                        'Specify what to update: name, description, or status'
                    ]
                };
            }
            const updatedIntegration = await _prisma.default.integration.update({
                where: {
                    id: integration.id
                },
                data: updateFields
            });
            return {
                success: true,
                message: `âœ… Integration "${updatedIntegration.name}" updated successfully!`,
                data: updatedIntegration,
                details: {
                    integrationId: updatedIntegration.id,
                    name: updatedIntegration.name,
                    status: updatedIntegration.status,
                    changes: Object.keys(updateFields)
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to update integration due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    async updateJourney(data, userId) {
        try {
            const journeyId = data.journeyId || data.id;
            const journeyName = data.name;
            if (!journeyId && !journeyName) {
                return {
                    success: false,
                    message: 'Please specify which journey to update.',
                    suggestions: [
                        'Try: "update journey Customer Onboarding"',
                        'Include journey name or ID'
                    ]
                };
            }
            let journey = null;
            if (journeyId) {
                journey = await _prisma.default.journey.findUnique({
                    where: {
                        id: journeyId
                    }
                });
            } else if (journeyName) {
                journey = await _prisma.default.journey.findFirst({
                    where: {
                        name: {
                            contains: journeyName,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!journey) {
                return {
                    success: false,
                    message: 'Journey not found. Please check the identifier and try again.',
                    suggestions: [
                        'Try creating a new journey instead',
                        'Verify the journey name'
                    ]
                };
            }
            const updateFields = {};
            if (data.name && data.name !== journey.name) updateFields.name = data.name;
            if (data.description) updateFields.description = data.description;
            if (data.status && [
                'DRAFT',
                'ACTIVE',
                'PAUSED',
                'COMPLETED'
            ].includes(data.status)) {
                updateFields.status = data.status;
            }
            if (Object.keys(updateFields).length === 0) {
                return {
                    success: false,
                    message: 'No changes specified for the journey.',
                    suggestions: [
                        'Specify what to update: name, description, or status'
                    ]
                };
            }
            const updatedJourney = await _prisma.default.journey.update({
                where: {
                    id: journey.id
                },
                data: updateFields
            });
            return {
                success: true,
                message: `âœ… Journey "${updatedJourney.name}" updated successfully!`,
                data: updatedJourney,
                details: {
                    journeyId: updatedJourney.id,
                    name: updatedJourney.name,
                    status: updatedJourney.status,
                    changes: Object.keys(updateFields)
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to update journey due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    async updateABTest(data, userId) {
        try {
            const testId = data.testId || data.id;
            const testName = data.name;
            if (!testId && !testName) {
                return {
                    success: false,
                    message: 'Please specify which A/B test to update.',
                    suggestions: [
                        'Try: "update A/B test Subject Line Test"',
                        'Include test name or ID'
                    ]
                };
            }
            let abTest = null;
            if (testId) {
                abTest = await _prisma.default.aBTest.findUnique({
                    where: {
                        id: testId
                    }
                });
            } else if (testName) {
                abTest = await _prisma.default.aBTest.findFirst({
                    where: {
                        name: {
                            contains: testName,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!abTest) {
                return {
                    success: false,
                    message: 'A/B test not found. Please check the identifier and try again.',
                    suggestions: [
                        'Try creating a new A/B test instead',
                        'Verify the test name'
                    ]
                };
            }
            const updateFields = {};
            if (data.name && data.name !== abTest.name) updateFields.name = data.name;
            if (data.description) updateFields.description = data.description;
            if (data.status && [
                'DRAFT',
                'RUNNING',
                'PAUSED',
                'COMPLETED',
                'CANCELLED'
            ].includes(data.status)) {
                updateFields.status = data.status;
            }
            if (Object.keys(updateFields).length === 0) {
                return {
                    success: false,
                    message: 'No changes specified for the A/B test.',
                    suggestions: [
                        'Specify what to update: name, description, or status'
                    ]
                };
            }
            const updatedTest = await _prisma.default.aBTest.update({
                where: {
                    id: abTest.id
                },
                data: updateFields
            });
            return {
                success: true,
                message: `âœ… A/B test "${updatedTest.name}" updated successfully!`,
                data: updatedTest,
                details: {
                    testId: updatedTest.id,
                    name: updatedTest.name,
                    status: updatedTest.status,
                    changes: Object.keys(updateFields)
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to update A/B test due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    // ================================
    // MISSING DELETE OPERATIONS
    // ================================
    async deleteList(data, userId) {
        try {
            const listId = data.listId || data.id;
            const listName = data.name;
            if (!listId && !listName) {
                return {
                    success: false,
                    message: 'Please specify which list to delete.',
                    suggestions: [
                        'Try: "delete list VIP Customers"',
                        'Include list name or ID'
                    ]
                };
            }
            let list = null;
            if (listId) {
                list = await _prisma.default.list.findUnique({
                    where: {
                        id: listId
                    }
                });
            } else if (listName) {
                list = await _prisma.default.list.findFirst({
                    where: {
                        name: {
                            contains: listName,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!list) {
                return {
                    success: false,
                    message: 'List not found. Please check the identifier and try again.',
                    suggestions: [
                        'Verify the list name'
                    ]
                };
            }
            // Check if list is being used in campaigns
            const [emailCampaigns, smsCampaigns, whatsappCampaigns] = await Promise.all([
                _prisma.default.emailCampaign.count({
                    where: {
                        lists: {
                            some: {
                                id: list.id
                            }
                        }
                    }
                }),
                _prisma.default.sMSCampaign.count({
                    where: {
                        lists: {
                            some: {
                                id: list.id
                            }
                        }
                    }
                }),
                _prisma.default.whatsAppCampaign.count({
                    where: {
                        lists: {
                            some: {
                                id: list.id
                            }
                        }
                    }
                })
            ]);
            const totalUsage = emailCampaigns + smsCampaigns + whatsappCampaigns;
            if (totalUsage > 0) {
                return {
                    success: false,
                    message: `Cannot delete list "${list.name}" - it's being used in ${totalUsage} campaign(s).`,
                    suggestions: [
                        'Remove list from campaigns first',
                        'Consider archiving instead of deleting'
                    ]
                };
            }
            await _prisma.default.list.delete({
                where: {
                    id: list.id
                }
            });
            return {
                success: true,
                message: `âœ… List "${list.name}" deleted successfully!`,
                data: {
                    listId: list.id,
                    name: list.name
                },
                details: {
                    listId: list.id,
                    name: list.name,
                    action: 'deleted'
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to delete list due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    async deleteIntegration(data, userId) {
        try {
            const integrationId = data.integrationId || data.id;
            const integrationName = data.name;
            if (!integrationId && !integrationName) {
                return {
                    success: false,
                    message: 'Please specify which integration to delete.',
                    suggestions: [
                        'Try: "delete integration Zapier"',
                        'Include integration name or ID'
                    ]
                };
            }
            let integration = null;
            if (integrationId) {
                integration = await _prisma.default.integration.findUnique({
                    where: {
                        id: integrationId
                    }
                });
            } else if (integrationName) {
                integration = await _prisma.default.integration.findFirst({
                    where: {
                        name: {
                            contains: integrationName,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!integration) {
                return {
                    success: false,
                    message: 'Integration not found. Please check the identifier and try again.',
                    suggestions: [
                        'Verify the integration name'
                    ]
                };
            }
            await _prisma.default.integration.delete({
                where: {
                    id: integration.id
                }
            });
            return {
                success: true,
                message: `âœ… Integration "${integration.name}" deleted successfully!`,
                data: {
                    integrationId: integration.id,
                    name: integration.name
                },
                details: {
                    integrationId: integration.id,
                    name: integration.name,
                    action: 'deleted'
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to delete integration due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    async deleteJourney(data, userId) {
        try {
            const journeyId = data.journeyId || data.id;
            const journeyName = data.name;
            if (!journeyId && !journeyName) {
                return {
                    success: false,
                    message: 'Please specify which journey to delete.',
                    suggestions: [
                        'Try: "delete journey Customer Onboarding"',
                        'Include journey name or ID'
                    ]
                };
            }
            let journey = null;
            if (journeyId) {
                journey = await _prisma.default.journey.findUnique({
                    where: {
                        id: journeyId
                    }
                });
            } else if (journeyName) {
                journey = await _prisma.default.journey.findFirst({
                    where: {
                        name: {
                            contains: journeyName,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!journey) {
                return {
                    success: false,
                    message: 'Journey not found. Please check the identifier and try again.',
                    suggestions: [
                        'Verify the journey name'
                    ]
                };
            }
            await _prisma.default.journey.delete({
                where: {
                    id: journey.id
                }
            });
            return {
                success: true,
                message: `âœ… Journey "${journey.name}" deleted successfully!`,
                data: {
                    journeyId: journey.id,
                    name: journey.name
                },
                details: {
                    journeyId: journey.id,
                    name: journey.name,
                    action: 'deleted'
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to delete journey due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    async deleteABTest(data, userId) {
        try {
            const testId = data.testId || data.id;
            const testName = data.name;
            if (!testId && !testName) {
                return {
                    success: false,
                    message: 'Please specify which A/B test to delete.',
                    suggestions: [
                        'Try: "delete A/B test Subject Line Test"',
                        'Include test name or ID'
                    ]
                };
            }
            let abTest = null;
            if (testId) {
                abTest = await _prisma.default.aBTest.findUnique({
                    where: {
                        id: testId
                    }
                });
            } else if (testName) {
                abTest = await _prisma.default.aBTest.findFirst({
                    where: {
                        name: {
                            contains: testName,
                            mode: 'insensitive'
                        }
                    }
                });
            }
            if (!abTest) {
                return {
                    success: false,
                    message: 'A/B test not found. Please check the identifier and try again.',
                    suggestions: [
                        'Verify the test name'
                    ]
                };
            }
            await _prisma.default.aBTest.delete({
                where: {
                    id: abTest.id
                }
            });
            return {
                success: true,
                message: `âœ… A/B test "${abTest.name}" deleted successfully!`,
                data: {
                    testId: abTest.id,
                    name: abTest.name
                },
                details: {
                    testId: abTest.id,
                    name: abTest.name,
                    action: 'deleted'
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to delete A/B test due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    // ================================
    // AI REPORTING SUPPORT  
    // ================================
    /**
   * Check if this request is for report generation
   */ isReportingRequest(intent, query) {
        const reportKeywords = [
            'report',
            'export',
            'generate',
            'download',
            'extract',
            'summary'
        ];
        const formatKeywords = [
            'pdf',
            'excel',
            'csv',
            'xlsx',
            'json'
        ];
        const dataKeywords = [
            'data',
            'analytics',
            'performance',
            'metrics',
            'stats'
        ];
        const lowerQuery = query.toLowerCase();
        // Check for explicit report keywords
        if (reportKeywords.some((keyword)=>lowerQuery.includes(keyword))) {
            return true;
        }
        // Check for format + data combination
        if (formatKeywords.some((format)=>lowerQuery.includes(format)) && dataKeywords.some((data)=>lowerQuery.includes(data))) {
            return true;
        }
        // Check for "create/generate X report" patterns
        if ((lowerQuery.includes('create') || lowerQuery.includes('generate')) && lowerQuery.includes('report')) {
            return true;
        }
        return false;
    }
    /**
   * Execute AI-powered report generation
   */ async executeReportGeneration(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot generate report.',
                    error: 'User authentication failed'
                };
            }
            const reportRequest = {
                query,
                userId,
                userRole: user.role,
                organizationId: user.organizationId,
                options: this.extractReportOptions(query)
            };
            _logger.logger.info('AI report generation initiated via intelligent execution', {
                query: query.substring(0, 100),
                userId,
                organizationId: user.organizationId
            });
            const result = await _intelligentreportingengine.intelligentReportingEngine.generateReport(reportRequest);
            if (!result.success) {
                return {
                    success: false,
                    message: result.message,
                    error: result.error,
                    suggestions: result.suggestions
                };
            }
            return {
                success: true,
                message: result.message,
                data: {
                    reportId: result.reportId,
                    estimatedRows: result.estimatedRows,
                    format: result.format,
                    downloadUrl: result.downloadUrl
                },
                details: {
                    type: 'ai_report',
                    reportId: result.reportId,
                    status: 'processing'
                }
            };
        } catch (error) {
            _logger.logger.error('AI report generation failed in execution engine', {
                error: error instanceof Error ? error.message : String(error),
                query: query.substring(0, 100),
                userId
            });
            return {
                success: false,
                message: 'I encountered an error while generating your report. Please try again.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try: "Generate contacts report in Excel format"',
                    'Try: "Export campaign data as PDF"',
                    'Try: "Create analytics summary"'
                ]
            };
        }
    }
    /**
   * Extract report options from natural language query
   */ extractReportOptions(query) {
        const lowerQuery = query.toLowerCase();
        const options = {};
        // Detect format preference
        if (lowerQuery.includes('pdf')) {
            options.format = 'PDF';
        } else if (lowerQuery.includes('excel') || lowerQuery.includes('xlsx')) {
            options.format = 'Excel';
        } else if (lowerQuery.includes('csv')) {
            options.format = 'CSV';
        } else if (lowerQuery.includes('json')) {
            options.format = 'JSON';
        }
        // Detect chart preference
        if (lowerQuery.includes('chart') || lowerQuery.includes('graph') || lowerQuery.includes('visual')) {
            options.includeCharts = true;
        }
        // Detect scheduling preference
        if (lowerQuery.includes('weekly') || lowerQuery.includes('every week')) {
            options.schedule = {
                frequency: 'weekly',
                recipients: [] // Would need to extract emails from query
            };
        } else if (lowerQuery.includes('monthly') || lowerQuery.includes('every month')) {
            options.schedule = {
                frequency: 'monthly',
                recipients: []
            };
        } else if (lowerQuery.includes('daily') || lowerQuery.includes('every day')) {
            options.schedule = {
                frequency: 'daily',
                recipients: []
            };
        }
        return options;
    }
    // ================================
    // AI INTEGRATION TESTING SUPPORT
    // ================================
    /**
   * Check if this request is for integration testing
   */ isIntegrationTestingRequest(intent, query) {
        const testingKeywords = [
            'test',
            'check',
            'monitor',
            'health',
            'status',
            'integration'
        ];
        const systemKeywords = [
            'system',
            'service',
            'api',
            'endpoint',
            'connection'
        ];
        const specificServices = [
            'paystack',
            'stripe',
            'twilio',
            'openai',
            'database',
            'redis',
            'email'
        ];
        const lowerQuery = query.toLowerCase();
        // Check for integration testing keywords
        if (testingKeywords.some((keyword)=>lowerQuery.includes(keyword)) && (systemKeywords.some((keyword)=>lowerQuery.includes(keyword)) || specificServices.some((service)=>lowerQuery.includes(service)))) {
            return true;
        }
        // Check for health check patterns
        if ((lowerQuery.includes('health') || lowerQuery.includes('status')) && (lowerQuery.includes('check') || lowerQuery.includes('test'))) {
            return true;
        }
        // Check for "is X working" patterns
        if (lowerQuery.includes('working') || lowerQuery.includes('functioning') || lowerQuery.includes('available') || lowerQuery.includes('online')) {
            return true;
        }
        return false;
    }
    /**
   * Execute integration testing operations
   */ async executeIntegrationTesting(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform integration testing.',
                    error: 'User authentication failed'
                };
            }
            _logger.logger.info('AI integration testing initiated via intelligent execution', {
                query: query.substring(0, 100),
                userId,
                organizationId: user.organizationId
            });
            // Import integration testing engine
            const { getIntegrationHealth, testSpecificIntegration } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./integration-testing-engine")));
            // Determine if testing specific integration or all
            const specificIntegration = this.extractSpecificIntegration(query);
            if (specificIntegration) {
                // Test specific integration
                const integrationResult = await testSpecificIntegration(specificIntegration);
                if (!integrationResult) {
                    return {
                        success: false,
                        message: `I couldn't find the ${specificIntegration} integration to test.`,
                        suggestions: [
                            'Try: "Check system health"',
                            'Try: "Test all integrations"',
                            'Try: "What integrations are available?"'
                        ]
                    };
                }
                const statusEmoji = integrationResult.status === 'healthy' ? 'âœ…' : integrationResult.status === 'degraded' ? 'âš ï¸' : 'âŒ';
                return {
                    success: true,
                    message: `${statusEmoji} **${integrationResult.name}** is ${integrationResult.status}. Response time: ${integrationResult.responseTime}ms`,
                    data: {
                        integration: integrationResult,
                        responseTime: integrationResult.responseTime,
                        lastChecked: integrationResult.lastChecked,
                        criticalityLevel: integrationResult.criticalityLevel
                    },
                    details: {
                        type: 'integration_test',
                        integrationId: integrationResult.id,
                        status: integrationResult.status,
                        slaCompliance: integrationResult.responseTime <= integrationResult.slaTarget
                    }
                };
            } else {
                // Test all integrations
                const healthReport = await getIntegrationHealth(user.organizationId);
                const statusEmoji = healthReport.overall.status === 'healthy' ? 'âœ…' : healthReport.overall.status === 'degraded' ? 'âš ï¸' : 'âŒ';
                const criticalIssues = healthReport.integrations.filter((i)=>i.status === 'unhealthy' && i.criticalityLevel === 'critical');
                let message = `${statusEmoji} **System Health Score: ${healthReport.overall.score}/100**\n\n`;
                message += `ðŸ“Š **Integration Status:**\n`;
                message += `â€¢ Healthy: ${healthReport.metrics.healthyCount}/${healthReport.metrics.totalIntegrations}\n`;
                message += `â€¢ Average Response: ${Math.round(healthReport.metrics.averageResponseTime)}ms\n`;
                message += `â€¢ Risk Level: ${healthReport.insights.riskLevel.toUpperCase()}\n`;
                if (criticalIssues.length > 0) {
                    message += `\nðŸš¨ **Critical Issues:**\n`;
                    criticalIssues.forEach((issue)=>{
                        message += `â€¢ ${issue.name}: ${issue.status}\n`;
                    });
                }
                const suggestions = healthReport.insights.recommendations.length > 0 ? healthReport.insights.recommendations : [
                    'All integrations are healthy and functioning normally'
                ];
                return {
                    success: true,
                    message,
                    data: {
                        overallStatus: healthReport.overall.status,
                        healthScore: healthReport.overall.score,
                        metrics: healthReport.metrics,
                        integrations: healthReport.integrations.map((i)=>({
                                name: i.name,
                                status: i.status,
                                responseTime: i.responseTime,
                                criticalityLevel: i.criticalityLevel
                            })),
                        insights: healthReport.insights
                    },
                    details: {
                        type: 'full_health_check',
                        timestamp: healthReport.overall.lastUpdated,
                        criticalIssuesCount: criticalIssues.length
                    },
                    suggestions
                };
            }
        } catch (error) {
            _logger.logger.error('AI integration testing failed in execution engine', {
                error: error instanceof Error ? error.message : String(error),
                query: query.substring(0, 100),
                userId
            });
            return {
                success: false,
                message: 'I encountered an error while testing integrations. Please try again.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try: "Check system health"',
                    'Try: "Test database connection"',
                    'Try: "What services are online?"'
                ]
            };
        }
    }
    /**
   * Extract specific integration from natural language query
   */ extractSpecificIntegration(query) {
        const lowerQuery = query.toLowerCase();
        // Map common terms to integration types
        const integrationMap = {
            'paystack': 'paystack',
            'stripe': 'stripe',
            'paypal': 'paypal',
            'flutterwave': 'flutterwave',
            'database': 'database',
            'postgres': 'database',
            'postgresql': 'database',
            'redis': 'redis',
            'cache': 'redis',
            'openai': 'openai',
            'ai': 'openai',
            'email': 'mailtrap',
            'mailtrap': 'mailtrap',
            'smtp': 'mailtrap',
            'sms': 'twilio',
            'twilio': 'twilio',
            'whatsapp': 'whatsapp_business'
        };
        for (const [keyword, integration] of Object.entries(integrationMap)){
            if (lowerQuery.includes(keyword)) {
                return integration;
            }
        }
        return null;
    }
    /**
   * Check if this is a self-healing request
   */ isSelfHealingRequest(intent, query) {
        const healingKeywords = [
            'heal',
            'fix',
            'repair',
            'recover',
            'restore',
            'auto-heal',
            'self-heal',
            'automatic fix',
            'fix system',
            'heal integration',
            'repair connection',
            'fix issues',
            'auto-repair',
            'recovery',
            'healing'
        ];
        const lowerQuery = query.toLowerCase();
        return healingKeywords.some((keyword)=>lowerQuery.includes(keyword)) || lowerQuery.includes('fix') && (lowerQuery.includes('system') || lowerQuery.includes('integration')) || lowerQuery.includes('heal') && (lowerQuery.includes('system') || lowerQuery.includes('service'));
    }
    /**
   * Execute self-healing operations
   */ async executeSelfHealing(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform self-healing operations.',
                    error: 'User authentication failed'
                };
            }
            _logger.logger.info('AI self-healing initiated via intelligent execution', {
                query: query.substring(0, 100),
                userId,
                organizationId: user.organizationId
            });
            // Import self-healing engine
            const { triggerSystemHealing, healSpecificIntegration } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./self-healing-engine")));
            // Determine if healing specific integration or system-wide
            const specificIntegration = this.extractSpecificIntegration(query);
            if (specificIntegration) {
                // Heal specific integration
                try {
                    const healingReport = await healSpecificIntegration(userId, specificIntegration);
                    const improvement = healingReport.systemHealth.improvement;
                    const actionsExecuted = healingReport.summary.totalActions;
                    const successRate = healingReport.summary.successfulActions / Math.max(healingReport.summary.totalActions, 1) * 100;
                    let message = `ðŸ”§ **Healing Report for ${specificIntegration}**\n\n`;
                    if (improvement > 0) {
                        message += `âœ… **Success!** System health improved by ${improvement} points\n`;
                    } else if (improvement === 0) {
                        message += `âš ï¸ **Partial Success** - No health improvement detected\n`;
                    } else {
                        message += `âŒ **Issues Detected** - Health declined by ${Math.abs(improvement)} points\n`;
                    }
                    message += `ðŸ“Š **Healing Summary:**\n`;
                    message += `â€¢ Actions Executed: ${actionsExecuted}\n`;
                    message += `â€¢ Success Rate: ${Math.round(successRate)}%\n`;
                    message += `â€¢ Estimated Downtime Prevented: ${healingReport.summary.estimatedDowntimePrevented} minutes\n`;
                    message += `â€¢ Estimated Cost Savings: $${healingReport.summary.costSavings}\n\n`;
                    if (healingReport.recommendations.length > 0) {
                        message += `ðŸ’¡ **Recommendations:**\n`;
                        healingReport.recommendations.forEach((rec)=>{
                            message += `â€¢ ${rec}\n`;
                        });
                    }
                    return {
                        success: true,
                        message,
                        data: {
                            sessionId: healingReport.sessionId,
                            improvement: healingReport.systemHealth.improvement,
                            actionsExecuted: healingReport.summary.totalActions,
                            successfulActions: healingReport.summary.successfulActions,
                            recommendations: healingReport.recommendations
                        },
                        suggestions: [
                            'Check: "What is the current system health?"',
                            'Monitor: "Show healing history"',
                            'Verify: "Test all integrations"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `I couldn't heal the ${specificIntegration} integration. ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Check system health first"',
                            'Try: "Heal all system issues"',
                            'Try: "What integrations need attention?"'
                        ]
                    };
                }
            } else {
                // System-wide healing
                try {
                    const healingReport = await triggerSystemHealing(userId);
                    const improvement = healingReport.systemHealth.improvement;
                    const actionsExecuted = healingReport.summary.totalActions;
                    const successRate = healingReport.summary.successfulActions / Math.max(healingReport.summary.totalActions, 1) * 100;
                    let message = `ðŸ”§ **System-Wide Healing Report**\n\n`;
                    if (improvement > 10) {
                        message += `ðŸŽ‰ **Excellent!** System health significantly improved by ${improvement} points\n`;
                    } else if (improvement > 0) {
                        message += `âœ… **Success!** System health improved by ${improvement} points\n`;
                    } else if (improvement === 0) {
                        message += `âš ï¸ **Stable** - System health maintained, no improvement needed\n`;
                    } else {
                        message += `âŒ **Attention Required** - System health declined by ${Math.abs(improvement)} points\n`;
                    }
                    message += `ðŸ“Š **Healing Summary:**\n`;
                    message += `â€¢ Health Score: ${healingReport.systemHealth.before} â†’ ${healingReport.systemHealth.after}\n`;
                    message += `â€¢ Actions Executed: ${actionsExecuted}\n`;
                    message += `â€¢ Success Rate: ${Math.round(successRate)}%\n`;
                    message += `â€¢ Downtime Prevented: ${healingReport.summary.estimatedDowntimePrevented} minutes\n`;
                    message += `â€¢ Cost Savings: $${healingReport.summary.costSavings}\n\n`;
                    if (healingReport.recommendations.length > 0) {
                        message += `ðŸ’¡ **Recommendations:**\n`;
                        healingReport.recommendations.forEach((rec)=>{
                            message += `â€¢ ${rec}\n`;
                        });
                    }
                    message += `\nâ° **Next Check:** ${healingReport.nextCheckIn.toLocaleString()}`;
                    return {
                        success: true,
                        message,
                        data: {
                            sessionId: healingReport.sessionId,
                            healthBefore: healingReport.systemHealth.before,
                            healthAfter: healingReport.systemHealth.after,
                            improvement: healingReport.systemHealth.improvement,
                            actionsExecuted: healingReport.summary.totalActions,
                            successfulActions: healingReport.summary.successfulActions,
                            failedActions: healingReport.summary.failedActions,
                            costSavings: healingReport.summary.costSavings,
                            recommendations: healingReport.recommendations
                        },
                        suggestions: [
                            'Monitor: "Show system health dashboard"',
                            'Review: "What healing actions were taken?"',
                            'Schedule: "Enable automatic healing"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `I couldn't complete the system healing process. ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        error: error instanceof Error ? error.message : 'Unknown error',
                        suggestions: [
                            'Try: "Check what needs fixing first"',
                            'Try: "Test integrations individually"',
                            'Try: "Check system status"'
                        ]
                    };
                }
            }
        } catch (error) {
            _logger.logger.error('Self-healing execution failed', {
                error: error instanceof Error ? error.message : String(error),
                userId,
                query: query.substring(0, 100)
            });
            return {
                success: false,
                message: 'I encountered an error while attempting to heal the system. Please try again.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try: "Check system health first"',
                    'Try: "What integrations are failing?"',
                    'Try: "Test database connection"'
                ]
            };
        }
    }
    /**
   * Check if this is a model deployment request
   */ isModelDeploymentRequest(intent, query) {
        const deploymentKeywords = [
            'deploy',
            'deployment',
            'release',
            'rollout',
            'publish',
            'launch',
            'deploy model',
            'release model',
            'push to production',
            'go live',
            'promote model',
            'activate model',
            'model deployment',
            'model release'
        ];
        const lowerQuery = query.toLowerCase();
        return deploymentKeywords.some((keyword)=>lowerQuery.includes(keyword)) || lowerQuery.includes('deploy') && (lowerQuery.includes('model') || lowerQuery.includes('version')) || lowerQuery.includes('release') && (lowerQuery.includes('model') || lowerQuery.includes('ml'));
    }
    /**
   * Execute model deployment operations
   */ async executeModelDeployment(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true,
                    name: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform model deployment operations.',
                    error: 'User authentication failed'
                };
            }
            _logger.logger.info('AI model deployment initiated via intelligent execution', {
                query: query.substring(0, 100),
                userId,
                organizationId: user.organizationId
            });
            // Import autonomous deployment pipeline
            const { createModelDeployment, getDeploymentStatus, autonomousDeploymentPipeline } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./mlops/autonomous-deployment-pipeline")));
            // Parse deployment details from query
            const deploymentParams = this.parseDeploymentRequest(query);
            if (deploymentParams.action === 'status') {
                // Get deployment status
                const activeDeployments = await autonomousDeploymentPipeline.getActiveDeployments();
                const recentHistory = await autonomousDeploymentPipeline.getDeploymentHistory(5);
                let message = `ðŸ“Š **Model Deployment Status**\n\n`;
                if (activeDeployments.length > 0) {
                    message += `ðŸ”„ **Active Deployments (${activeDeployments.length}):**\n`;
                    activeDeployments.forEach((deployment)=>{
                        message += `â€¢ ${deployment.id}: ${deployment.status} (${deployment.steps.filter((s)=>s.status === 'completed').length}/${deployment.steps.length} steps)\n`;
                    });
                    message += `\n`;
                }
                if (recentHistory.length > 0) {
                    message += `ðŸ“ˆ **Recent Deployment History:**\n`;
                    recentHistory.slice(0, 3).forEach((deployment)=>{
                        const statusIcon = deployment.status === 'completed' ? 'âœ…' : deployment.status === 'failed' ? 'âŒ' : deployment.status === 'rolled-back' ? 'ðŸ”„' : 'â¸ï¸';
                        message += `â€¢ ${statusIcon} ${deployment.id}: ${deployment.status}\n`;
                    });
                } else {
                    message += `ðŸ“­ No recent deployments found\n`;
                }
                return {
                    success: true,
                    message,
                    data: {
                        activeDeployments,
                        recentHistory: recentHistory.slice(0, 3),
                        summary: {
                            activeCount: activeDeployments.length,
                            recentCount: recentHistory.length
                        }
                    },
                    suggestions: [
                        'Try: "Deploy churn model to staging"',
                        'Try: "Get deployment status for exec_123"',
                        'Try: "Show all model deployments"'
                    ]
                };
            } else if (deploymentParams.action === 'deploy') {
                // Create new deployment
                if (!deploymentParams.modelId) {
                    return {
                        success: false,
                        message: 'I need to know which model to deploy. Please specify the model name.',
                        suggestions: [
                            'Try: "Deploy churn-prediction model to staging"',
                            'Try: "Deploy ltv model version 1.2.0 to production"',
                            'Try: "Release behavioral-segmentation model"'
                        ]
                    };
                }
                try {
                    const planId = await createModelDeployment({
                        modelId: deploymentParams.modelId,
                        modelVersion: deploymentParams.modelVersion || 'latest',
                        targetEnvironment: deploymentParams.environment || 'development',
                        strategy: deploymentParams.strategy || {
                            type: 'rolling',
                            parameters: {}
                        }
                    });
                    let message = `ðŸš€ **Model Deployment Initiated**\n\n`;
                    message += `ðŸ“¦ **Model:** ${deploymentParams.modelId}@${deploymentParams.modelVersion || 'latest'}\n`;
                    message += `ðŸŽ¯ **Target:** ${deploymentParams.environment || 'development'} environment\n`;
                    message += `âš™ï¸ **Strategy:** ${deploymentParams.strategy?.type || 'rolling'} deployment\n`;
                    message += `ðŸ†” **Plan ID:** ${planId}\n\n`;
                    if (deploymentParams.environment === 'production') {
                        message += `âš ï¸ **Production deployment may require approval**\n`;
                        message += `ðŸ“‹ Monitor progress and approve if needed\n`;
                    } else {
                        message += `âœ… **Deployment started automatically**\n`;
                        message += `ðŸ“Š Monitor progress with deployment status\n`;
                    }
                    return {
                        success: true,
                        message,
                        data: {
                            planId,
                            modelId: deploymentParams.modelId,
                            modelVersion: deploymentParams.modelVersion || 'latest',
                            targetEnvironment: deploymentParams.environment || 'development',
                            strategy: deploymentParams.strategy?.type || 'rolling'
                        },
                        suggestions: [
                            'Monitor: "Check deployment status"',
                            'Review: "Show active deployments"',
                            'Track: "Get deployment history"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to create deployment: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Check model availability first"',
                            'Try: "Verify model exists in registry"',
                            'Try: "Check deployment permissions"'
                        ]
                    };
                }
            } else if (deploymentParams.action === 'history') {
                // Get deployment history
                const history = await autonomousDeploymentPipeline.getDeploymentHistory(10);
                let message = `ðŸ“ˆ **Model Deployment History**\n\n`;
                if (history.length === 0) {
                    message += `ðŸ“­ No deployment history found\n`;
                } else {
                    message += `ðŸ“Š **Recent Deployments (${history.length}):**\n\n`;
                    history.slice(0, 5).forEach((deployment)=>{
                        const statusIcon = deployment.status === 'completed' ? 'âœ…' : deployment.status === 'failed' ? 'âŒ' : deployment.status === 'rolled-back' ? 'ðŸ”„' : 'â¸ï¸';
                        message += `${statusIcon} **${deployment.id}**\n`;
                        message += `   â€¢ Duration: ${deployment.metrics.totalDuration}ms\n`;
                        message += `   â€¢ Actions: ${deployment.steps.length} (${deployment.steps.filter((s)=>s.status === 'completed').length} completed)\n`;
                        message += `   â€¢ Started: ${deployment.startedAt.toLocaleString()}\n\n`;
                    });
                    const successRate = history.filter((d)=>d.status === 'completed').length / history.length * 100;
                    message += `ðŸ“ˆ **Success Rate:** ${Math.round(successRate)}%\n`;
                }
                return {
                    success: true,
                    message,
                    data: {
                        history: history.slice(0, 5),
                        totalCount: history.length,
                        successRate: history.length > 0 ? history.filter((d)=>d.status === 'completed').length / history.length * 100 : 0
                    },
                    suggestions: [
                        'Try: "Show deployment details for latest"',
                        'Try: "Deploy new model version"',
                        'Try: "Check active deployments"'
                    ]
                };
            }
            // Default response for unrecognized deployment queries
            return {
                success: true,
                message: 'I can help you with model deployments! Here are the available options:',
                suggestions: [
                    'Deploy: "Deploy [model-name] to [environment]"',
                    'Status: "Check deployment status"',
                    'History: "Show deployment history"',
                    'Monitor: "Show active deployments"'
                ]
            };
        } catch (error) {
            _logger.logger.error('Model deployment execution failed', {
                error: error instanceof Error ? error.message : String(error),
                userId,
                query: query.substring(0, 100)
            });
            return {
                success: false,
                message: 'I encountered an error while processing the deployment request. Please try again.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try: "Check deployment system status"',
                    'Try: "Show available models"',
                    'Try: "Get deployment help"'
                ]
            };
        }
    }
    /**
   * Parse deployment request from natural language
   */ parseDeploymentRequest(query) {
        const lowerQuery = query.toLowerCase();
        // Determine action
        let action = 'deploy';
        if (lowerQuery.includes('status') || lowerQuery.includes('check')) {
            action = 'status';
        } else if (lowerQuery.includes('history') || lowerQuery.includes('past') || lowerQuery.includes('previous')) {
            action = 'history';
        }
        // Extract model information
        const modelPatterns = [
            /(?:deploy|release|launch)\s+([a-zA-Z-]+(?:\s+model)?)/i,
            /model\s+([a-zA-Z-]+)/i,
            /([a-zA-Z-]+(?:-[a-zA-Z]+)*)\s+(?:model|to)/i
        ];
        let modelId;
        for (const pattern of modelPatterns){
            const match = query.match(pattern);
            if (match) {
                modelId = match[1].replace(/\s+model$/, '').trim();
                break;
            }
        }
        // Map common model names
        const modelMappings = {
            'churn': 'churn-prediction',
            'ltv': 'ltv-prediction',
            'segment': 'behavioral-segmentation',
            'segmentation': 'behavioral-segmentation',
            'content': 'content-intelligence'
        };
        if (modelId && modelMappings[modelId]) {
            modelId = modelMappings[modelId];
        }
        // Extract version
        const versionMatch = query.match(/version\s+([0-9]+\.[0-9]+\.[0-9]+)/i);
        const modelVersion = versionMatch ? versionMatch[1] : undefined;
        // Extract environment
        let environment;
        if (lowerQuery.includes('production') || lowerQuery.includes('prod')) {
            environment = 'production';
        } else if (lowerQuery.includes('staging') || lowerQuery.includes('stage')) {
            environment = 'staging';
        } else if (lowerQuery.includes('development') || lowerQuery.includes('dev')) {
            environment = 'development';
        }
        // Extract strategy
        let strategy = undefined;
        if (lowerQuery.includes('canary')) {
            strategy = {
                type: 'canary',
                parameters: {
                    canaryPercentage: 10
                }
            };
        } else if (lowerQuery.includes('blue-green') || lowerQuery.includes('blue green')) {
            strategy = {
                type: 'blue-green',
                parameters: {}
            };
        } else if (lowerQuery.includes('immediate') || lowerQuery.includes('direct')) {
            strategy = {
                type: 'immediate',
                parameters: {}
            };
        }
        return {
            action,
            modelId,
            modelVersion,
            environment,
            strategy
        };
    }
    /**
   * Check if this is a strategic planning request
   */ isStrategicPlanningRequest(intent, query) {
        const strategicKeywords = [
            'strategic plan',
            'strategy',
            'business plan',
            'goals',
            'objectives',
            'strategic goals',
            'planning',
            'roadmap',
            'business strategy',
            'executive plan',
            'strategic direction',
            'business goals',
            'strategic objectives',
            'long term plan',
            'growth strategy',
            'market strategy',
            'business roadmap',
            'strategic planning'
        ];
        const lowerQuery = query.toLowerCase();
        return strategicKeywords.some((keyword)=>lowerQuery.includes(keyword)) || lowerQuery.includes('plan') && (lowerQuery.includes('business') || lowerQuery.includes('strategic')) || lowerQuery.includes('strategy') && (lowerQuery.includes('create') || lowerQuery.includes('develop'));
    }
    /**
   * Execute strategic planning operations
   */ async executeStrategicPlanning(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true,
                    name: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform strategic planning operations.',
                    error: 'User authentication failed'
                };
            }
            _logger.logger.info('AI strategic planning initiated via intelligent execution', {
                query: query.substring(0, 100),
                userId,
                organizationId: user.organizationId
            });
            // Import strategic decision engine
            const { generateExecutiveStrategicPlan, getExecutiveDashboard, strategicDecisionEngine } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./strategic-decision-engine")));
            // Parse strategic planning request
            const planningParams = this.parseStrategicPlanningRequest(query);
            if (planningParams.action === 'create_plan') {
                // Generate strategic plan
                try {
                    const strategicPlan = await generateExecutiveStrategicPlan({
                        timeframe: planningParams.timeframe || '6_months',
                        focus: planningParams.focus || 'balanced',
                        organizationId: user.organizationId,
                        userId
                    });
                    let message = `ðŸ“‹ **Strategic Plan Generated**\n\n`;
                    message += `â° **Timeframe:** ${planningParams.timeframe || '6 months'}\n`;
                    message += `ðŸŽ¯ **Focus:** ${(planningParams.focus || 'balanced').replace('_', ' ')}\n`;
                    message += `ðŸ“Š **Goals Created:** ${strategicPlan.goals.length}\n`;
                    message += `ðŸ’° **Total Budget:** $${strategicPlan.resourceAllocation.budget.total.toLocaleString()}\n`;
                    message += `âš ï¸ **Risk Level:** ${strategicPlan.riskAssessment.overall}\n\n`;
                    message += `ðŸŽ¯ **Top Priorities:**\n`;
                    strategicPlan.priorities.slice(0, 3).forEach((priority, index)=>{
                        message += `${index + 1}. ${priority}\n`;
                    });
                    message += `\nðŸ’¡ **Key Insights:**\n`;
                    strategicPlan.goals.forEach((goal)=>{
                        message += `â€¢ ${goal.title} (${goal.priority} priority)\n`;
                    });
                    return {
                        success: true,
                        message,
                        data: {
                            plan: strategicPlan,
                            summary: {
                                timeframe: planningParams.timeframe || '6_months',
                                focus: planningParams.focus || 'balanced',
                                goalsCount: strategicPlan.goals.length,
                                totalBudget: strategicPlan.resourceAllocation.budget.total,
                                riskLevel: strategicPlan.riskAssessment.overall
                            }
                        },
                        suggestions: [
                            'Review: "Show strategic dashboard"',
                            'Monitor: "Check strategic goals progress"',
                            'Adjust: "Update strategic priorities"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to generate strategic plan: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Show current business metrics first"',
                            'Try: "Create a simpler strategic plan"',
                            'Try: "Check strategic planning permissions"'
                        ]
                    };
                }
            } else if (planningParams.action === 'dashboard') {
                // Get strategic dashboard
                try {
                    const dashboard = await getExecutiveDashboard(user.organizationId);
                    let message = `ðŸ“Š **Strategic Dashboard**\n\n`;
                    message += `ðŸŽ¯ **Goals Summary:**\n`;
                    message += `â€¢ Active Goals: ${dashboard.goals.active}\n`;
                    message += `â€¢ On Track: ${dashboard.goals.onTrack}\n`;
                    message += `â€¢ At Risk: ${dashboard.goals.atRisk}\n\n`;
                    message += `âš¡ **Decisions:**\n`;
                    message += `â€¢ Pending: ${dashboard.decisions.pending}\n`;
                    message += `â€¢ Urgent: ${dashboard.decisions.urgent}\n\n`;
                    message += `ðŸ’¡ **Recent Insights:**\n`;
                    message += `â€¢ Opportunities: ${dashboard.insights.opportunities}\n`;
                    message += `â€¢ Threats: ${dashboard.insights.threats}\n`;
                    if (dashboard.insights.recent.length > 0) {
                        message += `\nðŸ” **Latest Insights:**\n`;
                        dashboard.insights.recent.slice(0, 3).forEach((insight)=>{
                            message += `â€¢ ${insight.title} (${insight.confidence * 100}% confidence)\n`;
                        });
                    }
                    return {
                        success: true,
                        message,
                        data: {
                            dashboard,
                            summary: {
                                totalGoals: dashboard.goals.active,
                                goalsOnTrack: dashboard.goals.onTrack,
                                riskGoals: dashboard.goals.atRisk,
                                pendingDecisions: dashboard.decisions.pending
                            }
                        },
                        suggestions: [
                            'Create: "Generate new strategic plan"',
                            'Update: "Update strategic goal status"',
                            'Analyze: "Show strategic performance metrics"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to get strategic dashboard: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Check strategic system status"',
                            'Try: "Create initial strategic plan"',
                            'Try: "Review business metrics first"'
                        ]
                    };
                }
            } else if (planningParams.action === 'decision') {
                // Create strategic decision
                try {
                    const decision = await strategicDecisionEngine.createStrategicDecision({
                        title: planningParams.decisionTitle || 'Strategic Decision',
                        description: planningParams.decisionDescription || 'AI-generated strategic decision',
                        type: planningParams.decisionType || 'budget_allocation',
                        urgency: planningParams.urgency || 'medium',
                        impact: planningParams.impact || 'medium',
                        decisionMaker: userId
                    });
                    let message = `ðŸ¤” **Strategic Decision Created**\n\n`;
                    message += `ðŸ“‹ **Title:** ${decision.title}\n`;
                    message += `ðŸ“ **Type:** ${decision.type.replace('_', ' ')}\n`;
                    message += `âš¡ **Urgency:** ${decision.urgency}\n`;
                    message += `ðŸ’¥ **Impact:** ${decision.impact}\n`;
                    message += `ðŸ†” **Decision ID:** ${decision.id}\n\n`;
                    message += `ðŸ“… **Deadline:** ${decision.deadline.toLocaleDateString()}\n`;
                    message += `ðŸ“Š **Status:** ${decision.status}\n`;
                    return {
                        success: true,
                        message,
                        data: {
                            decision,
                            nextSteps: [
                                'Analyze decision scenarios and options',
                                'Evaluate risks and resource requirements',
                                'Get stakeholder input and approval',
                                'Implement decision and monitor results'
                            ]
                        },
                        suggestions: [
                            'Analyze: "Show decision analysis options"',
                            'Review: "Get strategic recommendations"',
                            'Monitor: "Track decision implementation"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to create strategic decision: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Show strategic dashboard first"',
                            'Try: "Create a simpler decision"',
                            'Try: "Check decision-making permissions"'
                        ]
                    };
                }
            }
            // Default response for unrecognized strategic queries
            return {
                success: true,
                message: 'I can help you with strategic planning! Here are the available options:',
                suggestions: [
                    'Plan: "Create a strategic plan for 6 months focused on growth"',
                    'Dashboard: "Show strategic dashboard"',
                    'Decision: "Create strategic decision for market expansion"',
                    'Goals: "Show strategic goals status"'
                ]
            };
        } catch (error) {
            _logger.logger.error('Strategic planning execution failed', {
                error: error instanceof Error ? error.message : String(error),
                userId,
                query: query.substring(0, 100)
            });
            return {
                success: false,
                message: 'I encountered an error while processing the strategic planning request. Please try again.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try: "Check strategic system status"',
                    'Try: "Show business metrics first"',
                    'Try: "Get strategic planning help"'
                ]
            };
        }
    }
    /**
   * Parse strategic planning request from natural language
   */ parseStrategicPlanningRequest(query) {
        const lowerQuery = query.toLowerCase();
        // Determine action
        let action = 'create_plan';
        if (lowerQuery.includes('dashboard') || lowerQuery.includes('show') || lowerQuery.includes('display')) {
            action = 'dashboard';
        } else if (lowerQuery.includes('decision') || lowerQuery.includes('decide')) {
            action = 'decision';
        } else if (lowerQuery.includes('goals') || lowerQuery.includes('objectives')) {
            action = 'goals';
        }
        // Extract timeframe
        let timeframe;
        if (lowerQuery.includes('3 month') || lowerQuery.includes('quarter')) {
            timeframe = '3_months';
        } else if (lowerQuery.includes('12 month') || lowerQuery.includes('year') || lowerQuery.includes('annual')) {
            timeframe = '12_months';
        } else if (lowerQuery.includes('6 month') || lowerQuery.includes('half year')) {
            timeframe = '6_months';
        }
        // Extract focus
        let focus;
        if (lowerQuery.includes('growth') || lowerQuery.includes('grow')) {
            focus = 'growth';
        } else if (lowerQuery.includes('efficiency') || lowerQuery.includes('optimize')) {
            focus = 'efficiency';
        } else if (lowerQuery.includes('expansion') || lowerQuery.includes('expand')) {
            focus = 'expansion';
        } else if (lowerQuery.includes('retention') || lowerQuery.includes('retain')) {
            focus = 'retention';
        } else if (lowerQuery.includes('balanced') || lowerQuery.includes('comprehensive')) {
            focus = 'balanced';
        }
        // Extract decision details
        const decisionPatterns = [
            /decision.*?(?:for|about|regarding)\s+([^.!?]+)/i,
            /decide.*?(?:on|about)\s+([^.!?]+)/i
        ];
        let decisionTitle;
        for (const pattern of decisionPatterns){
            const match = query.match(pattern);
            if (match) {
                decisionTitle = match[1].trim();
                break;
            }
        }
        // Extract decision type
        let decisionType;
        if (lowerQuery.includes('budget') || lowerQuery.includes('funding')) {
            decisionType = 'budget_allocation';
        } else if (lowerQuery.includes('market') || lowerQuery.includes('expansion')) {
            decisionType = 'market_expansion';
        } else if (lowerQuery.includes('product') || lowerQuery.includes('feature')) {
            decisionType = 'product_strategy';
        } else if (lowerQuery.includes('campaign') || lowerQuery.includes('marketing')) {
            decisionType = 'campaign_strategy';
        } else if (lowerQuery.includes('resource') || lowerQuery.includes('team')) {
            decisionType = 'resource_allocation';
        } else if (lowerQuery.includes('risk') || lowerQuery.includes('mitigation')) {
            decisionType = 'risk_mitigation';
        }
        // Extract urgency and impact
        let urgency;
        if (lowerQuery.includes('urgent') || lowerQuery.includes('immediate')) {
            urgency = 'immediate';
        } else if (lowerQuery.includes('high priority')) {
            urgency = 'high';
        } else if (lowerQuery.includes('low priority')) {
            urgency = 'low';
        }
        let impact;
        if (lowerQuery.includes('critical') || lowerQuery.includes('major')) {
            impact = 'critical';
        } else if (lowerQuery.includes('high impact')) {
            impact = 'high';
        } else if (lowerQuery.includes('minor') || lowerQuery.includes('small')) {
            impact = 'low';
        }
        return {
            action,
            timeframe,
            focus,
            decisionTitle,
            decisionDescription: decisionTitle,
            decisionType,
            urgency,
            impact
        };
    }
    // ================================
    // MULTI-AGENT COORDINATION SUPPORT
    // ================================
    /**
   * Check if this is a multi-agent coordination request
   */ isMultiAgentCoordinationRequest(intent, query) {
        const agentKeywords = [
            'agent',
            'agents',
            'coordinate',
            'collaboration',
            'collaborate',
            'multi-agent',
            'team work',
            'delegate',
            'assign agents',
            'agent coordination',
            'ai agents',
            'agent team',
            'multiple agents',
            'collaborative task',
            'agent collaboration',
            'coordinate agents',
            'agent teamwork',
            'ai coordination',
            'distributed task'
        ];
        const lowerQuery = query.toLowerCase();
        return agentKeywords.some((keyword)=>lowerQuery.includes(keyword)) || lowerQuery.includes('coordinate') && (lowerQuery.includes('task') || lowerQuery.includes('work')) || lowerQuery.includes('delegate') && lowerQuery.includes('task') || lowerQuery.includes('multiple') && lowerQuery.includes('ai');
    }
    /**
   * Execute multi-agent coordination operations
   */ async executeMultiAgentCoordination(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true,
                    name: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform agent coordination operations.',
                    error: 'User authentication failed'
                };
            }
            // Check permissions - only admins can coordinate agents
            const hasPermission = [
                'SUPER_ADMIN',
                'ADMIN',
                'IT_ADMIN'
            ].includes(user.role);
            if (!hasPermission) {
                return {
                    success: false,
                    message: 'You need admin privileges to coordinate AI agents.',
                    suggestions: [
                        'Contact your system administrator for access',
                        'Try regular AI features instead',
                        'Use single-agent commands'
                    ]
                };
            }
            _logger.logger.info('AI agent coordination initiated via intelligent execution', {
                query: query.substring(0, 100),
                userId,
                organizationId: user.organizationId
            });
            // Import multi-agent coordinator
            const { multiAgentCoordinator, createAgentCollaboration, getMultiAgentStatus } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./multi-agent-coordinator")));
            // Parse agent coordination request
            const coordinationParams = this.parseAgentCoordinationRequest(query);
            if (coordinationParams.action === 'create_collaboration') {
                // Create agent collaboration
                try {
                    const collaboration = await createAgentCollaboration({
                        objective: coordinationParams.objective,
                        capabilities: coordinationParams.capabilities,
                        priority: coordinationParams.priority || 'medium'
                    });
                    let message = `ðŸ¤– **Agent Collaboration Created**\n\n`;
                    message += `ðŸŽ¯ **Objective:** ${collaboration.objective}\n`;
                    message += `ðŸ‘¥ **Participants:** ${collaboration.participants.length} agents\n`;
                    message += `ðŸ”„ **Type:** ${collaboration.type}\n`;
                    message += `ðŸ“Š **Status:** ${collaboration.status}\n`;
                    message += `ðŸ†” **Session ID:** ${collaboration.id}\n\n`;
                    message += `ðŸ¤– **Participating Agents:**\n`;
                    const agentStatus = await multiAgentCoordinator.getAgentStatus();
                    collaboration.participants.forEach((participantId)=>{
                        const agent = agentStatus.find((a)=>a.id === participantId);
                        if (agent) {
                            message += `â€¢ ${agent.name} (${agent.type})\n`;
                        }
                    });
                    return {
                        success: true,
                        message,
                        data: {
                            collaboration,
                            summary: {
                                sessionId: collaboration.id,
                                objective: collaboration.objective,
                                participantCount: collaboration.participants.length,
                                type: collaboration.type,
                                status: collaboration.status
                            }
                        },
                        suggestions: [
                            'Monitor: "Show agent collaboration status"',
                            'Review: "Check agent performance"',
                            'Track: "Get collaboration results"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to create agent collaboration: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Show agent status first"',
                            'Try: "Create a simpler collaboration"',
                            'Try: "Check agent availability"'
                        ]
                    };
                }
            }
            if (coordinationParams.action === 'delegate_task') {
                // Delegate task to agents
                try {
                    const sessionId = await multiAgentCoordinator.delegateTaskToAgents({
                        task: coordinationParams.task,
                        requiredCapabilities: coordinationParams.capabilities,
                        priority: coordinationParams.priority || 'medium',
                        deadline: coordinationParams.deadline
                    });
                    let message = `ðŸ“‹ **Task Delegated to Agents**\n\n`;
                    message += `ðŸ“ **Task:** ${coordinationParams.task}\n`;
                    message += `âš¡ **Priority:** ${coordinationParams.priority || 'medium'}\n`;
                    message += `ðŸ› ï¸ **Required Capabilities:** ${coordinationParams.capabilities.join(', ')}\n`;
                    message += `ðŸ†” **Session ID:** ${sessionId}\n`;
                    if (coordinationParams.deadline) {
                        message += `â° **Deadline:** ${coordinationParams.deadline.toLocaleDateString()}\n`;
                    }
                    return {
                        success: true,
                        message,
                        data: {
                            sessionId,
                            task: coordinationParams.task,
                            capabilities: coordinationParams.capabilities,
                            priority: coordinationParams.priority
                        },
                        suggestions: [
                            'Monitor: "Check delegation progress"',
                            'Review: "Show agent task status"',
                            'Track: "Get task results"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to delegate task: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Show available agents first"',
                            'Try: "Simplify the task description"',
                            'Try: "Check required capabilities"'
                        ]
                    };
                }
            }
            if (coordinationParams.action === 'show_status') {
                // Show agent status
                try {
                    const status = await getMultiAgentStatus();
                    let message = `ðŸ¤– **Multi-Agent System Status**\n\n`;
                    message += `ðŸ‘¥ **Total Agents:** ${status.agents.length}\n`;
                    message += `ðŸ”„ **Active Collaborations:** ${status.activeCollaborations.length}\n\n`;
                    message += `ðŸ“Š **Agent Overview:**\n`;
                    status.agents.forEach((agent)=>{
                        const statusIcon = agent.status === 'active' ? 'ðŸŸ¢' : agent.status === 'busy' ? 'ðŸŸ¡' : agent.status === 'collaborating' ? 'ðŸ”„' : 'ðŸ”´';
                        message += `${statusIcon} ${agent.name} (${agent.type}) - ${agent.status}\n`;
                    });
                    if (status.activeCollaborations.length > 0) {
                        message += `\nðŸ”„ **Active Collaborations:**\n`;
                        status.activeCollaborations.forEach((collab)=>{
                            message += `â€¢ ${collab.objective} (${collab.participants.length} agents)\n`;
                        });
                    }
                    return {
                        success: true,
                        message,
                        data: status,
                        suggestions: [
                            'Create: "Start agent collaboration"',
                            'Delegate: "Assign task to agents"',
                            'Monitor: "Check agent performance"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to get agent status: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Restart agent system"',
                            'Try: "Check agent connectivity"',
                            'Try: "Contact system administrator"'
                        ]
                    };
                }
            }
            // Default response for unrecognized agent coordination queries
            return {
                success: true,
                message: `ðŸ¤– **Agent Coordination Available**\n\nI can help you coordinate AI agents for complex tasks. Try:\n\nâ€¢ "Create agent collaboration for campaign analysis"\nâ€¢ "Delegate task to agents with analytics capabilities"\nâ€¢ "Show agent system status"\nâ€¢ "Coordinate agents for strategic planning"`,
                suggestions: [
                    'Try: "Show agent status"',
                    'Try: "Create agent collaboration"',
                    'Try: "Delegate complex task to agents"'
                ]
            };
        } catch (error) {
            _logger.logger.error('Agent coordination execution failed', {
                error: error instanceof Error ? error.message : String(error),
                query,
                userId
            });
            return {
                success: false,
                message: 'Failed to execute agent coordination due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check agent system availability',
                    'Verify coordination permissions',
                    'Try simpler agent commands'
                ]
            };
        }
    }
    /**
   * Parse agent coordination request parameters from natural language
   */ parseAgentCoordinationRequest(query) {
        const lowerQuery = query.toLowerCase();
        // Determine action
        let action = 'unknown';
        if (lowerQuery.includes('collaborate') || lowerQuery.includes('collaboration') || lowerQuery.includes('coordinate')) {
            action = 'create_collaboration';
        } else if (lowerQuery.includes('delegate') || lowerQuery.includes('assign')) {
            action = 'delegate_task';
        } else if (lowerQuery.includes('status') || lowerQuery.includes('show') || lowerQuery.includes('check')) {
            action = 'show_status';
        }
        // Extract objective/task
        let objective = '';
        let task = '';
        if (action === 'create_collaboration') {
            // Extract objective from "coordinate agents for [objective]"
            const forMatch = query.match(/(?:for|to)\s+(.+?)(?:\s+with|\s+using|$)/i);
            if (forMatch) {
                objective = forMatch[1].trim();
            } else {
                objective = query;
            }
        } else if (action === 'delegate_task') {
            // Extract task from "delegate [task] to agents"
            const taskMatch = query.match(/(?:delegate|assign)\s+(.+?)\s+(?:to|with|using)/i);
            if (taskMatch) {
                task = taskMatch[1].trim();
            } else {
                task = query;
            }
        }
        // Extract capabilities
        const capabilities = [];
        const capabilityKeywords = {
            'analytics': [
                'analytic',
                'analysis',
                'data',
                'insight',
                'report'
            ],
            'execution': [
                'execute',
                'run',
                'perform',
                'action',
                'task'
            ],
            'strategy': [
                'strategic',
                'strategy',
                'planning',
                'decision'
            ],
            'content': [
                'content',
                'text',
                'write',
                'generate'
            ],
            'communication': [
                'communicate',
                'message',
                'email',
                'sms'
            ],
            'prediction': [
                'predict',
                'forecast',
                'future',
                'trend'
            ],
            'integration': [
                'integrate',
                'connect',
                'api',
                'system'
            ],
            'learning': [
                'learn',
                'train',
                'model',
                'ml',
                'ai'
            ]
        };
        for (const [capability, keywords] of Object.entries(capabilityKeywords)){
            if (keywords.some((keyword)=>lowerQuery.includes(keyword))) {
                capabilities.push(capability);
            }
        }
        // Default to common capabilities if none specified
        if (capabilities.length === 0) {
            capabilities.push('analytics', 'execution');
        }
        // Extract priority
        let priority;
        if (lowerQuery.includes('urgent') || lowerQuery.includes('critical')) {
            priority = 'critical';
        } else if (lowerQuery.includes('high priority') || lowerQuery.includes('important')) {
            priority = 'high';
        } else if (lowerQuery.includes('low priority') || lowerQuery.includes('background')) {
            priority = 'low';
        }
        // Extract deadline
        let deadline;
        const deadlineMatch = query.match(/(?:by|deadline|due)\s+(.+?)(?:\s|$)/i);
        if (deadlineMatch) {
            try {
                deadline = new Date(deadlineMatch[1]);
                if (isNaN(deadline.getTime())) {
                    deadline = undefined;
                }
            } catch  {
                deadline = undefined;
            }
        }
        return {
            action,
            objective: objective || undefined,
            task: task || undefined,
            capabilities,
            priority,
            deadline
        };
    }
    // ================================
    // INFRASTRUCTURE MANAGEMENT SUPPORT
    // ================================
    /**
   * Check if this is an infrastructure management request
   */ isInfrastructureManagementRequest(intent, query) {
        const infrastructureKeywords = [
            'infrastructure',
            'scaling',
            'scale up',
            'scale down',
            'auto-scale',
            'resource',
            'server',
            'performance',
            'system health',
            'monitoring',
            'cost optimization',
            'resource optimization',
            'predictive scaling',
            'infrastructure status',
            'system status',
            'resource usage',
            'cpu usage',
            'memory usage',
            'disk usage',
            'network performance',
            'system load',
            'server load',
            'infrastructure health',
            'resource allocation',
            'capacity planning',
            'performance tuning'
        ];
        const lowerQuery = query.toLowerCase();
        return infrastructureKeywords.some((keyword)=>lowerQuery.includes(keyword)) || lowerQuery.includes('scale') && (lowerQuery.includes('server') || lowerQuery.includes('system')) || lowerQuery.includes('optimize') && lowerQuery.includes('resource') || lowerQuery.includes('monitor') && (lowerQuery.includes('system') || lowerQuery.includes('infrastructure'));
    }
    /**
   * Execute infrastructure management operations
   */ async executeInfrastructureManagement(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true,
                    name: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform infrastructure management operations.',
                    error: 'User authentication failed'
                };
            }
            // Check permissions - only admins can manage infrastructure
            const hasPermission = [
                'SUPER_ADMIN',
                'ADMIN',
                'IT_ADMIN'
            ].includes(user.role);
            if (!hasPermission) {
                return {
                    success: false,
                    message: 'You need admin privileges to manage infrastructure.',
                    suggestions: [
                        'Contact your system administrator for access',
                        'Try general system status queries instead',
                        'Use monitoring dashboards for read-only access'
                    ]
                };
            }
            _logger.logger.info('AI infrastructure management initiated via intelligent execution', {
                query: query.substring(0, 100),
                userId,
                organizationId: user.organizationId
            });
            // Import infrastructure manager
            const { predictiveInfrastructureManager } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../infrastructure/predictive-infrastructure-manager")));
            // Parse infrastructure management request
            const managementParams = this.parseInfrastructureManagementRequest(query);
            if (managementParams.action === 'show_status') {
                // Show infrastructure status
                try {
                    const status = await predictiveInfrastructureManager.getInfrastructureStatus();
                    let message = `ðŸ—ï¸ **Infrastructure Status**\n\n`;
                    message += `ðŸ“Š **Overview:**\n`;
                    message += `â€¢ Total Resources: ${status.overview.totalResources}\n`;
                    message += `â€¢ Healthy: ${status.overview.healthyResources} ðŸŸ¢\n`;
                    message += `â€¢ Warning: ${status.overview.warningResources} ðŸŸ¡\n`;
                    message += `â€¢ Critical: ${status.overview.criticalResources} ðŸ”´\n`;
                    message += `â€¢ Scaling: ${status.overview.scalingResources} ðŸ”„\n\n`;
                    message += `ðŸ’° **Cost Summary:**\n`;
                    message += `â€¢ Hourly: $${status.totalCost.hourly.toFixed(2)}\n`;
                    message += `â€¢ Daily: $${status.totalCost.daily.toFixed(2)}\n`;
                    message += `â€¢ Monthly: $${status.totalCost.monthly.toFixed(2)}\n\n`;
                    if (status.recentScalingEvents.length > 0) {
                        message += `ðŸ”„ **Recent Scaling Events:**\n`;
                        status.recentScalingEvents.slice(0, 3).forEach((event)=>{
                            const statusIcon = event.success ? 'âœ…' : 'âŒ';
                            message += `${statusIcon} ${event.action} for ${event.resourceId} (${new Date(event.timestamp).toLocaleTimeString()})\n`;
                        });
                    }
                    if (status.predictions.length > 0) {
                        message += `\nðŸ”® **Top Predictions:**\n`;
                        status.predictions.slice(0, 2).forEach((prediction)=>{
                            message += `â€¢ ${prediction.businessImpact} (${Math.round(prediction.confidence * 100)}% confidence)\n`;
                        });
                    }
                    return {
                        success: true,
                        message,
                        data: {
                            status,
                            summary: {
                                totalResources: status.overview.totalResources,
                                healthyPercentage: Math.round(status.overview.healthyResources / status.overview.totalResources * 100),
                                monthlyCost: status.totalCost.monthly,
                                recentScalingEvents: status.recentScalingEvents.length
                            }
                        },
                        suggestions: [
                            'Optimize: "Optimize infrastructure costs"',
                            'Scale: "Scale up database resources"',
                            'Monitor: "Show resource performance metrics"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to get infrastructure status: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Check system health"',
                            'Try: "Show resource status"',
                            'Try: "Contact system administrator"'
                        ]
                    };
                }
            }
            if (managementParams.action === 'force_scaling') {
                // Force scaling operation
                try {
                    if (!managementParams.resourceId || !managementParams.scalingAction) {
                        return {
                            success: false,
                            message: 'Please specify which resource to scale and the scaling action.',
                            suggestions: [
                                'Try: "Scale up database server"',
                                'Try: "Scale down API servers"',
                                'Try: "Show infrastructure status first"'
                            ]
                        };
                    }
                    const scalingId = await predictiveInfrastructureManager.forceScaling(managementParams.resourceId, managementParams.scalingAction, managementParams.targetInstances);
                    let message = `ðŸš€ **Scaling Operation Initiated**\n\n`;
                    message += `ðŸŽ¯ **Resource:** ${managementParams.resourceId}\n`;
                    message += `âš¡ **Action:** ${managementParams.scalingAction}\n`;
                    message += `ðŸ†” **Scaling ID:** ${scalingId}\n`;
                    if (managementParams.targetInstances) {
                        message += `ðŸŽ¯ **Target Instances:** ${managementParams.targetInstances}\n`;
                    }
                    message += `\nâ³ **Status:** Scaling operation in progress...`;
                    return {
                        success: true,
                        message,
                        data: {
                            scalingId,
                            resourceId: managementParams.resourceId,
                            action: managementParams.scalingAction,
                            targetInstances: managementParams.targetInstances
                        },
                        suggestions: [
                            'Monitor: "Check scaling progress"',
                            'Status: "Show infrastructure status"',
                            'Track: "Show scaling history"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to initiate scaling: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Show infrastructure status first"',
                            'Try: "Check resource availability"',
                            'Try: "Use valid resource identifier"'
                        ]
                    };
                }
            }
            if (managementParams.action === 'optimize_costs') {
                // Trigger cost optimization
                try {
                    // This would trigger the actual cost optimization process
                    let message = `ðŸ’° **Cost Optimization Initiated**\n\n`;
                    message += `ðŸ” **Analysis:** Scanning all resources for optimization opportunities...\n`;
                    message += `âš¡ **Target:** Reduce infrastructure costs while maintaining performance\n`;
                    message += `ðŸŒ **Focus:** African market-aware optimization patterns\n`;
                    message += `\nðŸ“Š **Process:**\n`;
                    message += `1. Analyzing resource utilization patterns\n`;
                    message += `2. Identifying over-provisioned resources\n`;
                    message += `3. Calculating African business hours impact\n`;
                    message += `4. Generating optimization recommendations\n`;
                    message += `\nâ±ï¸ **Estimated Duration:** 5-10 minutes`;
                    return {
                        success: true,
                        message,
                        data: {
                            optimizationId: `opt_${Date.now()}`,
                            startTime: new Date().toISOString(),
                            targetSavings: '15-30%',
                            scope: managementParams.resourceIds || 'all_resources'
                        },
                        suggestions: [
                            'Monitor: "Check optimization progress"',
                            'Review: "Show cost analysis report"',
                            'Status: "Show infrastructure status"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to start cost optimization: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Show current infrastructure costs"',
                            'Try: "Check system resources first"',
                            'Try: "Contact system administrator"'
                        ]
                    };
                }
            }
            if (managementParams.action === 'show_metrics') {
                // Show resource metrics
                try {
                    const status = await predictiveInfrastructureManager.getInfrastructureStatus();
                    let message = `ðŸ“Š **Resource Performance Metrics**\n\n`;
                    status.resources.slice(0, 3).forEach((resource)=>{
                        message += `ðŸ—ï¸ **${resource.name}**\n`;
                        message += `â€¢ CPU: ${Math.round(resource.metrics.cpu.usage)}% (${resource.metrics.cpu.trend})\n`;
                        message += `â€¢ Memory: ${Math.round(resource.metrics.memory.usage)}%\n`;
                        message += `â€¢ Disk: ${Math.round(resource.metrics.disk.usage)}%\n`;
                        message += `â€¢ Response Time: ${Math.round(resource.metrics.application.responseTime)}ms\n`;
                        message += `â€¢ Status: ${resource.status}\n\n`;
                    });
                    if (status.resources.length > 3) {
                        message += `... and ${status.resources.length - 3} more resources\n`;
                    }
                    return {
                        success: true,
                        message,
                        data: {
                            resourceCount: status.resources.length,
                            metrics: status.resources.map((r)=>({
                                    name: r.name,
                                    type: r.type,
                                    status: r.status,
                                    cpuUsage: r.metrics.cpu.usage,
                                    memoryUsage: r.metrics.memory.usage,
                                    responseTime: r.metrics.application.responseTime
                                }))
                        },
                        suggestions: [
                            'Detail: "Show detailed metrics for [resource]"',
                            'Scale: "Scale resources based on metrics"',
                            'Optimize: "Optimize resource performance"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to get resource metrics: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Check infrastructure status"',
                            'Try: "Show system health"',
                            'Try: "Contact system administrator"'
                        ]
                    };
                }
            }
            // Default response for unrecognized infrastructure queries
            return {
                success: true,
                message: `ðŸ—ï¸ **Infrastructure Management Available**\n\nI can help you manage infrastructure and optimize resources. Try:\n\nâ€¢ "Show infrastructure status"\nâ€¢ "Scale up database resources"\nâ€¢ "Optimize infrastructure costs"\nâ€¢ "Show resource performance metrics"\nâ€¢ "Check system health"`,
                suggestions: [
                    'Try: "Show infrastructure status"',
                    'Try: "Optimize costs"',
                    'Try: "Show resource metrics"'
                ]
            };
        } catch (error) {
            _logger.logger.error('Infrastructure management execution failed', {
                error: error instanceof Error ? error.message : String(error),
                query,
                userId
            });
            return {
                success: false,
                message: 'Failed to execute infrastructure management due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check infrastructure system availability',
                    'Verify management permissions',
                    'Try basic status commands first'
                ]
            };
        }
    }
    /**
   * Parse infrastructure management request parameters from natural language
   */ parseInfrastructureManagementRequest(query) {
        const lowerQuery = query.toLowerCase();
        // Determine action
        let action = 'unknown';
        if (lowerQuery.includes('status') || lowerQuery.includes('health') || lowerQuery.includes('overview')) {
            action = 'show_status';
        } else if (lowerQuery.includes('scale up') || lowerQuery.includes('scale down') || lowerQuery.includes('scaling')) {
            action = 'force_scaling';
        } else if (lowerQuery.includes('optimize') || lowerQuery.includes('cost')) {
            action = 'optimize_costs';
        } else if (lowerQuery.includes('metrics') || lowerQuery.includes('performance') || lowerQuery.includes('usage')) {
            action = 'show_metrics';
        }
        // Extract resource identifier
        let resourceId;
        const resourcePatterns = [
            /database|db|postgres/i,
            /api|server|application/i,
            /cache|redis/i,
            /worker|processor/i
        ];
        for(let i = 0; i < resourcePatterns.length; i++){
            if (resourcePatterns[i].test(query)) {
                // Map to actual resource IDs (in production, these would be dynamic)
                const resourceMap = [
                    'database',
                    'api_server',
                    'cache',
                    'worker'
                ];
                resourceId = resourceMap[i];
                break;
            }
        }
        // Extract scaling action
        let scalingAction;
        if (lowerQuery.includes('scale up') || lowerQuery.includes('increase')) {
            scalingAction = 'scale_up';
        } else if (lowerQuery.includes('scale down') || lowerQuery.includes('decrease')) {
            scalingAction = 'scale_down';
        } else if (lowerQuery.includes('scale to')) {
            scalingAction = 'scale_to';
        }
        // Extract target instances
        let targetInstances;
        const instanceMatch = query.match(/(?:to|instances?)\s+(\d+)/i);
        if (instanceMatch) {
            targetInstances = Number.parseInt(instanceMatch[1]);
        }
        return {
            action,
            resourceId,
            scalingAction,
            targetInstances
        };
    }
    // ================================
    // ATTRIBUTION ANALYSIS SUPPORT
    // ================================
    /**
   * Check if this is an attribution analysis request
   */ isAttributionAnalysisRequest(intent, query) {
        const attributionKeywords = [
            'attribution',
            'multi-touch',
            'conversion attribution',
            'channel attribution',
            'attribution analysis',
            'attribution insights',
            'conversion tracking',
            'customer journey',
            'touchpoint analysis',
            'attribution model',
            'channel performance',
            'conversion path',
            'attribution metrics',
            'roas',
            'roi attribution',
            'marketing attribution',
            'campaign attribution'
        ];
        const lowerQuery = query.toLowerCase();
        return attributionKeywords.some((keyword)=>lowerQuery.includes(keyword)) || lowerQuery.includes('analyze') && (lowerQuery.includes('conversion') || lowerQuery.includes('channel')) || lowerQuery.includes('track') && lowerQuery.includes('attribution') || lowerQuery.includes('journey') && lowerQuery.includes('customer');
    }
    /**
   * Execute attribution analysis operations
   */ async executeAttributionAnalysis(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true,
                    name: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform attribution analysis.',
                    error: 'User authentication failed'
                };
            }
            _logger.logger.info('AI attribution analysis initiated via intelligent execution', {
                query: query.substring(0, 100),
                userId,
                organizationId: user.organizationId
            });
            // Import autonomous attribution engine
            const { autonomousAttributionEngine } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../attribution/autonomous-attribution-engine")));
            // Parse attribution request
            const analysisParams = this.parseAttributionAnalysisRequest(query);
            if (analysisParams.action === 'show_insights') {
                // Show attribution insights
                try {
                    const insights = await autonomousAttributionEngine.getRecentInsights(analysisParams.hours || 24);
                    let message = `ðŸŽ¯ **Attribution Insights**\n\n`;
                    if (insights.length === 0) {
                        message += `ðŸ“Š No recent insights found. The system continuously analyzes attribution data.\n\n`;
                        message += `ðŸ’¡ **Tip:** Insights are generated every 30 minutes based on conversion data.`;
                    } else {
                        message += `ðŸ“Š **Found ${insights.length} insights from the last ${analysisParams.hours || 24} hours:**\n\n`;
                        insights.slice(0, 5).forEach((insight, index)=>{
                            const confidenceIcon = insight.confidence > 0.8 ? 'ðŸŽ¯' : insight.confidence > 0.6 ? 'ðŸ“Š' : 'ðŸ“ˆ';
                            const typeIcon = insight.type === 'channel_performance' ? 'ðŸ“ˆ' : insight.type === 'journey_pattern' ? 'ðŸ›¤ï¸' : insight.type === 'conversion_driver' ? 'âš¡' : insight.type === 'optimization_opportunity' ? 'ðŸ’¡' : 'ðŸ”';
                            message += `${index + 1}. ${typeIcon} **${insight.type.replace('_', ' ').toUpperCase()}**\n`;
                            message += `   ${confidenceIcon} ${insight.insight} (${Math.round(insight.confidence * 100)}% confidence)\n`;
                            if (insight.actionRequired) {
                                message += `   âš ï¸ Action required\n`;
                            }
                            message += `\n`;
                        });
                        if (insights.length > 5) {
                            message += `... and ${insights.length - 5} more insights\n\n`;
                        }
                        const actionableInsights = insights.filter((i)=>i.actionRequired);
                        if (actionableInsights.length > 0) {
                            message += `ðŸš¨ **${actionableInsights.length} insights require immediate attention**`;
                        }
                    }
                    return {
                        success: true,
                        message,
                        data: {
                            insights: insights.slice(0, 10),
                            summary: {
                                totalInsights: insights.length,
                                actionableInsights: insights.filter((i)=>i.actionRequired).length,
                                highConfidenceInsights: insights.filter((i)=>i.confidence > 0.8).length,
                                averageConfidence: insights.length > 0 ? insights.reduce((sum, i)=>sum + i.confidence, 0) / insights.length : 0
                            }
                        },
                        suggestions: [
                            'Analyze: "Show attribution metrics"',
                            'Optimize: "Show attribution recommendations"',
                            'Track: "Analyze customer journey patterns"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to get attribution insights: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Show recent conversion data"',
                            'Try: "Check attribution system status"',
                            'Try: "Contact system administrator"'
                        ]
                    };
                }
            }
            if (analysisParams.action === 'show_metrics') {
                // Show attribution metrics
                try {
                    const metrics = await autonomousAttributionEngine.getAttributionMetrics();
                    let message = `ðŸ“Š **Attribution Metrics Dashboard**\n\n`;
                    message += `ðŸ“ˆ **Conversion Overview:**\n`;
                    message += `â€¢ Total Conversions: ${metrics.totalConversions || 0}\n`;
                    message += `â€¢ Total Revenue: $${(metrics.totalRevenue || 0).toLocaleString()}\n`;
                    message += `â€¢ Avg Time to Conversion: ${Math.round(metrics.avgTimeToConversion || 0)} hours\n`;
                    message += `â€¢ Attribution Health: ${(metrics.attributionHealth || 'unknown').toUpperCase()}\n\n`;
                    if (metrics.topChannels && metrics.topChannels.length > 0) {
                        message += `ðŸ† **Top Performing Channels:**\n`;
                        metrics.topChannels.slice(0, 3).forEach((channel, index)=>{
                            message += `${index + 1}. ${channel.name || 'Unknown'} - ${channel.conversions || 0} conversions\n`;
                        });
                    } else {
                        message += `ðŸ“‹ **Channel Data:** Collecting performance data...\n`;
                    }
                    const healthIcon = metrics.attributionHealth === 'excellent' ? 'ðŸ’š' : metrics.attributionHealth === 'good' ? 'ðŸ’›' : metrics.attributionHealth === 'warning' ? 'ðŸŸ ' : 'ðŸ”´';
                    message += `\n${healthIcon} **System Health:** ${(metrics.attributionHealth || 'unknown').toUpperCase()}`;
                    return {
                        success: true,
                        message,
                        data: {
                            metrics,
                            healthStatus: metrics.attributionHealth || 'unknown'
                        },
                        suggestions: [
                            'Insights: "Show attribution insights"',
                            'Optimize: "Show attribution recommendations"',
                            'Details: "Analyze specific channel performance"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to get attribution metrics: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Check conversion tracking setup"',
                            'Try: "Show attribution insights"',
                            'Try: "Contact system administrator"'
                        ]
                    };
                }
            }
            if (analysisParams.action === 'show_recommendations') {
                // Show attribution recommendations
                try {
                    const recommendations = await autonomousAttributionEngine.getAttributionRecommendations();
                    let message = `ðŸ’¡ **Attribution Recommendations**\n\n`;
                    if (recommendations.length === 0) {
                        message += `âœ¨ No specific recommendations at this time.\n\n`;
                        message += `ðŸ“Š The system continuously analyzes your attribution data and will suggest optimizations when opportunities are identified.`;
                    } else {
                        message += `ðŸŽ¯ **Found ${recommendations.length} optimization opportunities:**\n\n`;
                        const highPriority = recommendations.filter((r)=>r.priority === 'high');
                        const mediumPriority = recommendations.filter((r)=>r.priority === 'medium');
                        const lowPriority = recommendations.filter((r)=>r.priority === 'low');
                        if (highPriority.length > 0) {
                            message += `ðŸ”´ **HIGH PRIORITY (${highPriority.length}):**\n`;
                            highPriority.slice(0, 3).forEach((rec, index)=>{
                                message += `${index + 1}. ${rec.description}\n`;
                                message += `   ðŸ’° Expected Impact: +${rec.expectedImpact.revenue}% revenue, +${rec.expectedImpact.conversions}% conversions\n`;
                                message += `   â±ï¸ Timeframe: ${rec.implementation.timeframe}\n\n`;
                            });
                        }
                        if (mediumPriority.length > 0) {
                            message += `ðŸŸ¡ **MEDIUM PRIORITY (${mediumPriority.length}):**\n`;
                            mediumPriority.slice(0, 2).forEach((rec, index)=>{
                                message += `${index + 1}. ${rec.description}\n`;
                                message += `   ðŸ“ˆ Expected Impact: +${rec.expectedImpact.revenue}% revenue\n\n`;
                            });
                        }
                        if (lowPriority.length > 0) {
                            message += `ðŸŸ¢ **LOW PRIORITY:** ${lowPriority.length} additional opportunities\n`;
                        }
                    }
                    return {
                        success: true,
                        message,
                        data: {
                            recommendations,
                            summary: {
                                total: recommendations.length,
                                highPriority: recommendations.filter((r)=>r.priority === 'high').length,
                                mediumPriority: recommendations.filter((r)=>r.priority === 'medium').length,
                                lowPriority: recommendations.filter((r)=>r.priority === 'low').length
                            }
                        },
                        suggestions: [
                            'Implement: "Apply high priority recommendations"',
                            'Analyze: "Show detailed attribution insights"',
                            'Monitor: "Track recommendation impact"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to get attribution recommendations: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Show attribution metrics first"',
                            'Try: "Check recent attribution insights"',
                            'Try: "Contact system administrator"'
                        ]
                    };
                }
            }
            if (analysisParams.action === 'trigger_analysis') {
                // Trigger immediate attribution analysis (admin only)
                const hasPermission = [
                    'SUPER_ADMIN',
                    'ADMIN'
                ].includes(user.role);
                if (!hasPermission) {
                    return {
                        success: false,
                        message: 'You need admin privileges to trigger attribution analysis.',
                        suggestions: [
                            'Contact your system administrator for access',
                            'Try: "Show attribution insights" for existing analysis',
                            'Use standard attribution reports instead'
                        ]
                    };
                }
                try {
                    // This would trigger the analysis
                    let message = `ðŸ”„ **Attribution Analysis Triggered**\n\n`;
                    message += `ðŸŽ¯ **Scope:** Comprehensive multi-touch attribution analysis\n`;
                    message += `ðŸ“Š **Coverage:** All channels, journeys, and conversion data\n`;
                    message += `â±ï¸ **Duration:** 2-5 minutes for complete analysis\n`;
                    message += `ðŸ” **Analysis Types:**\n`;
                    message += `â€¢ Channel performance across attribution models\n`;
                    message += `â€¢ Customer journey pattern recognition\n`;
                    message += `â€¢ Conversion driver identification\n`;
                    message += `â€¢ Anomaly detection and optimization opportunities\n\n`;
                    message += `ðŸ“ˆ **Results will be available shortly in attribution insights**`;
                    return {
                        success: true,
                        message,
                        data: {
                            analysisId: `analysis_${Date.now()}`,
                            status: 'triggered',
                            estimatedCompletion: new Date(Date.now() + 5 * 60 * 1000).toISOString(),
                            scope: 'comprehensive'
                        },
                        suggestions: [
                            'Monitor: "Check attribution insights in 5 minutes"',
                            'Review: "Show attribution metrics after analysis"',
                            'Optimize: "Apply recommendations when ready"'
                        ]
                    };
                } catch (error) {
                    return {
                        success: false,
                        message: `Failed to trigger attribution analysis: ${error instanceof Error ? error.message : 'Unknown error occurred.'}`,
                        suggestions: [
                            'Try: "Show current attribution status"',
                            'Try: "Check system resources"',
                            'Try: "Contact system administrator"'
                        ]
                    };
                }
            }
            // Default response for unrecognized attribution queries
            return {
                success: true,
                message: `ðŸŽ¯ **Attribution Analysis Available**\n\nI can help you analyze attribution data and optimize your marketing performance. Try:\n\nâ€¢ "Show attribution insights"\nâ€¢ "Show attribution metrics"\nâ€¢ "Show attribution recommendations"\nâ€¢ "Analyze customer journey patterns"\nâ€¢ "Trigger attribution analysis" (admin only)`,
                suggestions: [
                    'Try: "Show attribution insights"',
                    'Try: "Show attribution metrics"',
                    'Try: "Show attribution recommendations"'
                ]
            };
        } catch (error) {
            _logger.logger.error('Attribution analysis execution failed', {
                error: error instanceof Error ? error.message : String(error),
                query,
                userId
            });
            return {
                success: false,
                message: 'Failed to execute attribution analysis due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check attribution system availability',
                    'Verify analysis permissions',
                    'Try basic attribution queries first'
                ]
            };
        }
    }
    /**
   * Parse attribution analysis request parameters from natural language
   */ parseAttributionAnalysisRequest(query) {
        const lowerQuery = query.toLowerCase();
        // Determine action
        let action = 'unknown';
        if (lowerQuery.includes('insights') || lowerQuery.includes('analysis results')) {
            action = 'show_insights';
        } else if (lowerQuery.includes('metrics') || lowerQuery.includes('performance') || lowerQuery.includes('dashboard')) {
            action = 'show_metrics';
        } else if (lowerQuery.includes('recommendations') || lowerQuery.includes('optimize') || lowerQuery.includes('suggestions')) {
            action = 'show_recommendations';
        } else if (lowerQuery.includes('trigger') || lowerQuery.includes('run analysis') || lowerQuery.includes('start analysis')) {
            action = 'trigger_analysis';
        } else if (lowerQuery.includes('attribution') && (lowerQuery.includes('show') || lowerQuery.includes('analyze'))) {
            action = 'show_insights'; // Default to insights
        }
        // Extract time period
        let hours;
        const timeMatch = query.match(/(\d+)\s*(hour|hr|day)/i);
        if (timeMatch) {
            const value = Number.parseInt(timeMatch[1]);
            const unit = timeMatch[2].toLowerCase();
            hours = unit.startsWith('day') ? value * 24 : value;
        }
        // Extract channel
        let channel;
        const channelPatterns = [
            /email/i,
            /sms/i,
            /whatsapp/i,
            /social/i,
            /organic/i,
            /paid/i,
            /direct/i
        ];
        for (const pattern of channelPatterns){
            if (pattern.test(query)) {
                channel = pattern.source.replace(/[^a-z]/gi, '');
                break;
            }
        }
        return {
            action,
            hours,
            channel
        };
    }
    // ================================
    // BULK OPERATIONS SUPPORT
    // ================================
    /**
   * Check if this request requires bulk operations
   */ isBulkOperation(intent, query) {
        const bulkKeywords = [
            'bulk',
            'mass',
            'many',
            'all',
            'multiple',
            'batch',
            'import',
            'export'
        ];
        const bulkCounts = [
            '100',
            '1000',
            'thousand',
            'hundred'
        ];
        const lowerQuery = query.toLowerCase();
        // Check for explicit bulk keywords
        if (bulkKeywords.some((keyword)=>lowerQuery.includes(keyword))) {
            return true;
        }
        // Check for high count numbers
        if (bulkCounts.some((count)=>lowerQuery.includes(count))) {
            return true;
        }
        // Check for file imports/exports
        if (lowerQuery.includes('csv') || lowerQuery.includes('excel') || lowerQuery.includes('import') || lowerQuery.includes('export')) {
            return true;
        }
        // Check for campaign sending to many recipients
        if (intent.action === 'SEND' && lowerQuery.includes('campaign')) {
            return true;
        }
        return false;
    }
    /**
   * Execute bulk operations
   */ async executeBulkOperation(intent, userId, query) {
        try {
            const lowerQuery = query.toLowerCase();
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot execute bulk operation.',
                    error: 'User authentication failed'
                };
            }
            // Determine bulk operation type
            if (lowerQuery.includes('import') && intent.entity === 'CONTACT') {
                return await this.executeBulkContactImport(intent, userId, user.role, user.organizationId, query);
            }
            if (lowerQuery.includes('update') && intent.entity === 'CONTACT') {
                return await this.executeBulkContactUpdate(intent, userId, user.role, user.organizationId, query);
            }
            if (lowerQuery.includes('send') && intent.entity === 'CAMPAIGN') {
                return await this.executeBulkCampaignSend(intent, userId, user.role, user.organizationId, query);
            }
            if (lowerQuery.includes('export')) {
                return await this.executeBulkExport(intent, userId, user.role, user.organizationId, query);
            }
            // Default bulk operation guidance
            return {
                success: true,
                message: `I detected this is a bulk operation request. Here's what I can help you with:

ðŸ”„ **Bulk Contact Operations:**
â€¢ Import contacts from CSV/Excel files
â€¢ Update multiple contacts at once
â€¢ Export contact lists

ðŸ“¤ **Bulk Campaign Operations:**
â€¢ Send campaigns to large audiences
â€¢ Schedule bulk email/SMS/WhatsApp campaigns

ðŸ“Š **Bulk Data Operations:**
â€¢ Export analytics data
â€¢ Import/export segments and lists

To proceed, please specify:
â€¢ What type of bulk operation you need
â€¢ How many records you're working with
â€¢ Any specific criteria or filters`,
                suggestions: [
                    'Try: "import 500 contacts from CSV file"',
                    'Try: "send campaign to all VIP customers"',
                    'Try: "update all contacts with tag premium"',
                    'Try: "export contact data for last 30 days"'
                ]
            };
        } catch (error) {
            _logger.logger.error('Bulk operation failed', {
                error: error instanceof Error ? error.message : String(error),
                userId,
                query: query.substring(0, 100)
            });
            return {
                success: false,
                message: 'Failed to execute bulk operation due to a system error.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try breaking down the operation into smaller steps',
                    'Check your permissions for bulk operations'
                ]
            };
        }
    }
    /**
   * Execute bulk contact import
   */ async executeBulkContactImport(intent, userId, userRole, organizationId, query) {
        try {
            // Extract contact data from intent or simulate for demo
            const contactData = intent.data;
            let contacts = [];
            if (contactData && Array.isArray(contactData)) {
                contacts = contactData;
            } else {
                // Simulate contact data for demo
                const count = this.extractNumberFromQuery(query) || 10;
                contacts = this.generateSampleContacts(Math.min(count, 1000)); // Limit for safety
            }
            // Execute bulk import
            const result = await _bulkoperationsengine.bulkOperationsEngine.executeContactImport({
                type: 'contact_import',
                data: contacts,
                options: {
                    batchSize: 100,
                    continueOnError: true,
                    validateData: true,
                    dryRun: query.includes('preview') || query.includes('dry run')
                },
                transformations: []
            }, userId, userRole, organizationId);
            return {
                success: true,
                message: `ðŸŽ¯ **Bulk Contact Import ${result.summary.totalRecords > 0 ? 'Initiated' : 'Previewed'}**

ðŸ“Š **Summary:**
â€¢ Total contacts: ${result.summary.totalRecords}
â€¢ Estimated time: ~${Math.ceil(result.summary.totalRecords * 0.5)} seconds
â€¢ Batch size: 100 contacts per batch

ðŸ“‹ **Operation Details:**
â€¢ Operation ID: ${result.operationId}
â€¢ Status: ${query.includes('preview') ? 'Preview mode' : 'Processing'}
â€¢ Duplicates handling: Automatic detection

${query.includes('preview') ? 'âœ¨ This was a preview. Remove "preview" from your command to execute the actual import.' : 'ðŸš€ Import started! Use the operation ID to check progress.'}`,
                data: result,
                details: {
                    operationId: result.operationId,
                    totalContacts: result.summary.totalRecords,
                    isDryRun: query.includes('preview') || query.includes('dry run')
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to execute bulk contact import.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Check if you have permission for bulk operations',
                    'Verify contact data format',
                    'Try with fewer contacts first'
                ]
            };
        }
    }
    /**
   * Execute bulk contact update
   */ async executeBulkContactUpdate(intent, userId, userRole, organizationId, query) {
        try {
            // Extract filters and updates from the query
            const filters = this.extractFiltersFromQuery(query);
            const updates = this.extractUpdatesFromQuery(query);
            // Execute bulk update
            const result = await _bulkoperationsengine.bulkOperationsEngine.executeContactUpdate({
                type: 'contact_update',
                data: [],
                filters,
                options: {
                    batchSize: 100,
                    continueOnError: true,
                    dryRun: query.includes('preview') || query.includes('dry run')
                },
                transformations: []
            }, userId, userRole, organizationId);
            return {
                success: true,
                message: `ðŸ”„ **Bulk Contact Update ${result.summary.totalRecords > 0 ? 'Initiated' : 'Previewed'}**

ðŸ“Š **Summary:**
â€¢ Contacts to update: ${result.summary.totalRecords}
â€¢ Estimated time: ~${Math.ceil(result.summary.totalRecords * 0.2)} seconds
â€¢ Batch size: 100 contacts per batch

ðŸ“‹ **Operation Details:**
â€¢ Operation ID: ${result.operationId}
â€¢ Filters applied: ${Object.keys(filters).length} criteria
â€¢ Updates: ${Object.keys(updates).length} fields

${query.includes('preview') ? 'âœ¨ This was a preview. Remove "preview" from your command to execute the actual update.' : 'ðŸš€ Update started! Use the operation ID to check progress.'}`,
                data: result,
                details: {
                    operationId: result.operationId,
                    contactsAffected: result.summary.totalRecords,
                    isDryRun: query.includes('preview') || query.includes('dry run')
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to execute bulk contact update.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Specify which contacts to update (e.g., "all premium customers")',
                    'Specify what to update (e.g., "add tag VIP")',
                    'Try with preview mode first'
                ]
            };
        }
    }
    /**
   * Execute bulk campaign sending
   */ async executeBulkCampaignSend(intent, userId, userRole, organizationId, query) {
        try {
            // Extract campaign info from query
            const campaignInfo = this.extractCampaignFromQuery(query);
            if (!campaignInfo.campaignId && !campaignInfo.campaignName) {
                return {
                    success: false,
                    message: 'Please specify which campaign to send.',
                    suggestions: [
                        'Try: "send Welcome Email campaign to all new customers"',
                        'Include campaign name or ID'
                    ]
                };
            }
            // Find campaign
            let campaign = null;
            if (campaignInfo.campaignId) {
                campaign = await _prisma.default.emailCampaign.findUnique({
                    where: {
                        id: campaignInfo.campaignId,
                        organizationId
                    }
                });
            } else if (campaignInfo.campaignName) {
                campaign = await _prisma.default.emailCampaign.findFirst({
                    where: {
                        name: {
                            contains: campaignInfo.campaignName,
                            mode: 'insensitive'
                        },
                        organizationId
                    }
                });
            }
            if (!campaign) {
                return {
                    success: false,
                    message: 'Campaign not found. Please check the campaign name and try again.',
                    suggestions: [
                        'Verify the campaign name',
                        'Create the campaign first if it doesn\'t exist'
                    ]
                };
            }
            // Determine recipients
            const recipients = this.extractRecipientsFromQuery(query);
            // Execute bulk campaign send
            const result = await _bulkoperationsengine.bulkOperationsEngine.executeCampaignSend({
                type: 'campaign_send',
                data: [
                    {
                        campaignId: campaign.id,
                        recipients,
                        options: {
                            batchSize: 100,
                            delayBetweenBatches: 5,
                            testMode: query.includes('test') || query.includes('preview')
                        }
                    }
                ],
                options: {
                    batchSize: 100,
                    continueOnError: true,
                    dryRun: query.includes('preview') || query.includes('test')
                },
                transformations: []
            }, userId, userRole, organizationId);
            return {
                success: true,
                message: `ðŸ“¤ **Bulk Campaign Send ${result.summary.totalRecords > 0 ? 'Initiated' : 'Previewed'}**

ðŸ“Š **Campaign Details:**
â€¢ Campaign: "${campaign.name}"
â€¢ Recipients: ${result.summary.totalRecords}
â€¢ Estimated time: ~${Math.ceil(result.summary.totalRecords * 1)} seconds
â€¢ Send rate: 100 emails per batch (5-second delay)

ðŸ“‹ **Operation Details:**
â€¢ Operation ID: ${result.operationId}
â€¢ Status: ${query.includes('test') || query.includes('preview') ? 'Test mode' : 'Processing'}
â€¢ Delivery method: Batch processing for optimal delivery

${query.includes('test') || query.includes('preview') ? 'âœ¨ This was a test run. Remove "test" from your command to send the actual campaign.' : 'ðŸš€ Campaign send started! Monitor progress with the operation ID.'}`,
                data: result,
                details: {
                    operationId: result.operationId,
                    campaignName: campaign.name,
                    recipientCount: result.summary.totalRecords,
                    isTest: query.includes('test') || query.includes('preview')
                }
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to execute bulk campaign send.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Verify the campaign exists and is ready to send',
                    'Check your sending permissions',
                    'Try with test mode first'
                ]
            };
        }
    }
    /**
   * Execute bulk export
   */ async executeBulkExport(intent, userId, userRole, organizationId, query) {
        try {
            const exportType = this.extractExportTypeFromQuery(query);
            const format = query.includes('csv') ? 'csv' : query.includes('excel') ? 'excel' : 'csv';
            // For now, provide guidance on export operations
            return {
                success: true,
                message: `ðŸ“¥ **Bulk Export Request Received**

ðŸ“Š **Export Details:**
â€¢ Type: ${exportType}
â€¢ Format: ${format.toUpperCase()}
â€¢ Organization: ${organizationId}

âš ï¸ **Export Operations:**
Export functionality is currently being prepared. You can:

1. **Contact Export**: Export all contacts with their details
2. **Campaign Export**: Export campaign performance data
3. **Analytics Export**: Export engagement and conversion data

**Next Steps:**
â€¢ The export system will process your request
â€¢ You'll receive a download link when ready
â€¢ Large exports are processed in the background`,
                data: {
                    exportType,
                    format,
                    organizationId,
                    status: 'preparation'
                },
                suggestions: [
                    'Try: "export all contacts to CSV"',
                    'Try: "export campaign data for last month"',
                    'Contact support for custom export requirements'
                ]
            };
        } catch (error) {
            return {
                success: false,
                message: 'Failed to execute bulk export.',
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    // Helper methods for bulk operations
    extractNumberFromQuery(query) {
        const numbers = query.match(/\d+/g);
        return numbers ? Number.parseInt(numbers[0]) : null;
    }
    generateSampleContacts(count) {
        const sampleContacts = [];
        const firstNames = [
            'John',
            'Jane',
            'Michael',
            'Sarah',
            'David',
            'Emily',
            'Chris',
            'Lisa',
            'Mark',
            'Anna'
        ];
        const lastNames = [
            'Smith',
            'Johnson',
            'Williams',
            'Brown',
            'Jones',
            'Garcia',
            'Miller',
            'Davis',
            'Rodriguez',
            'Martinez'
        ];
        const companies = [
            'TechCorp',
            'InnovateLtd',
            'GlobalSolutions',
            'DataDynamics',
            'FutureWorks'
        ];
        for(let i = 0; i < count; i++){
            const firstName = firstNames[i % firstNames.length];
            const lastName = lastNames[i % lastNames.length];
            const company = companies[i % companies.length];
            sampleContacts.push({
                firstName,
                lastName,
                email: `${firstName.toLowerCase()}.${lastName.toLowerCase()}${i}@${company.toLowerCase()}.com`,
                phone: `+234${Math.floor(Math.random() * 1000000000)}`,
                company,
                jobTitle: 'Sample Contact',
                tags: [
                    'imported',
                    'ai-generated'
                ],
                customFields: {
                    source: 'bulk-import',
                    importDate: new Date().toISOString()
                }
            });
        }
        return sampleContacts;
    }
    extractFiltersFromQuery(query) {
        const filters = {};
        if (query.includes('premium') || query.includes('vip')) {
            filters.tags = [
                'premium',
                'vip'
            ];
        }
        if (query.includes('last 30 days')) {
            filters.createdAfter = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);
        }
        if (query.includes('active')) {
            filters.isActive = true;
        }
        return filters;
    }
    extractUpdatesFromQuery(query) {
        const updates = {};
        if (query.includes('add tag')) {
            const tagMatch = query.match(/add tag (\w+)/);
            if (tagMatch) {
                updates.addTags = [
                    tagMatch[1]
                ];
            }
        }
        if (query.includes('set status')) {
            const statusMatch = query.match(/set status (\w+)/);
            if (statusMatch) {
                updates.isActive = statusMatch[1].toLowerCase() === 'active';
            }
        }
        return updates;
    }
    extractCampaignFromQuery(query) {
        const info = {};
        // Try to extract campaign name from quotes or specific patterns
        const nameMatch = query.match(/"([^"]+)"|campaign (\w+)/);
        if (nameMatch) {
            info.campaignName = nameMatch[1] || nameMatch[2];
        }
        return info;
    }
    extractRecipientsFromQuery(query) {
        if (query.includes('all') || query.includes('everyone')) {
            return {
                type: 'all'
            };
        }
        if (query.includes('new customers') || query.includes('new contacts')) {
            return {
                type: 'contacts',
                filters: {
                    createdAfter: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)
                }
            };
        }
        if (query.includes('vip') || query.includes('premium')) {
            return {
                type: 'contacts',
                filters: {
                    tags: [
                        'vip',
                        'premium'
                    ]
                }
            };
        }
        return {
            type: 'all'
        };
    }
    extractExportTypeFromQuery(query) {
        if (query.includes('contact')) return 'contacts';
        if (query.includes('campaign')) return 'campaigns';
        if (query.includes('analytics') || query.includes('data')) return 'analytics';
        if (query.includes('workflow')) return 'workflows';
        return 'contacts'; // default
    }
    /**
   * Check if this is a monitoring/alerting request
   */ isMonitoringRequest(intent, query) {
        const monitoringKeywords = [
            'monitor',
            'monitoring',
            'alert',
            'alerting',
            'health',
            'system health',
            'monitoring rules',
            'alerts',
            'uptime',
            'performance monitoring',
            'system status',
            'infrastructure health',
            'monitoring insights',
            'monitoring dashboard',
            'system monitoring',
            'health check',
            'monitoring alerts',
            'system alerts',
            'check health',
            'monitor system',
            'alert rules',
            'monitoring configuration',
            'system metrics',
            'health metrics',
            'monitoring statistics',
            'alert history',
            'acknowledge alert',
            'resolve alert',
            'monitoring report'
        ];
        const lowerQuery = query.toLowerCase();
        return monitoringKeywords.some((keyword)=>lowerQuery.includes(keyword)) || lowerQuery.includes('check') && (lowerQuery.includes('system') || lowerQuery.includes('health')) || lowerQuery.includes('show') && (lowerQuery.includes('alerts') || lowerQuery.includes('monitoring')) || lowerQuery.includes('create') && lowerQuery.includes('rule') || intent.action === 'ANALYZE' && lowerQuery.includes('system');
    }
    /**
   * Execute monitoring operations
   */ async executeMonitoring(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true,
                    name: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform monitoring operations.',
                    error: 'User authentication failed'
                };
            }
            // Check if user has monitoring access
            const hasAccess = [
                'ADMIN',
                'IT_ADMIN',
                'SUPER_ADMIN'
            ].includes(user.role || '');
            if (!hasAccess) {
                return {
                    success: false,
                    message: 'You need admin privileges to access monitoring features.',
                    error: 'Insufficient permissions'
                };
            }
            _logger.logger.info('AI monitoring operation initiated via intelligent execution', {
                query: query.substring(0, 100),
                userId,
                userRole: user.role,
                organizationId: user.organizationId
            });
            // Parse monitoring request
            const monitoringParams = this.parseMonitoringRequest(query);
            if (monitoringParams.action === 'show_health') {
                // Show system health
                const health = await _advancedmonitoringorchestrator.advancedMonitoringOrchestrator.getSystemHealth();
                return {
                    success: true,
                    message: `System Health Overview:
- Overall Status: ${health.overall.status.toUpperCase()}
- Health Score: ${health.overall.score.toFixed(1)}/100
- Uptime: ${Math.floor(health.overall.uptime / 3600)} hours
- Active Alerts: ${health.activeAlerts.length}
- Infrastructure: ${health.components.infrastructure.status}
- Database: ${health.components.database.status}
- AI Systems: ${health.components.ai.status}
- Security: ${health.components.security.status}`,
                    data: health,
                    details: {
                        action: 'system_health_retrieved',
                        components: Object.keys(health.components).length,
                        predictions: health.predictions
                    }
                };
            } else if (monitoringParams.action === 'show_alerts') {
                // Show active alerts
                const alerts = await _advancedmonitoringorchestrator.advancedMonitoringOrchestrator.getActiveAlerts();
                const alertSummary = alerts.length > 0 ? alerts.map((alert)=>`- ${alert.severity}: ${alert.message} (${alert.component})`).join('\n') : 'No active alerts';
                return {
                    success: true,
                    message: `Active Alerts (${alerts.length}):
${alertSummary}`,
                    data: alerts,
                    details: {
                        action: 'alerts_retrieved',
                        alertCount: alerts.length,
                        severityBreakdown: alerts.reduce((acc, alert)=>{
                            acc[alert.severity] = (acc[alert.severity] || 0) + 1;
                            return acc;
                        }, {})
                    }
                };
            } else if (monitoringParams.action === 'show_insights') {
                // Show monitoring insights
                const insights = await _advancedmonitoringorchestrator.advancedMonitoringOrchestrator.getMonitoringInsights();
                const insightSummary = insights.length > 0 ? insights.slice(0, 5).map((insight)=>`- ${insight.type}: ${insight.message}`).join('\n') : 'No monitoring insights available';
                return {
                    success: true,
                    message: `Recent Monitoring Insights (${insights.length}):
${insightSummary}`,
                    data: insights,
                    details: {
                        action: 'insights_retrieved',
                        insightCount: insights.length,
                        typeBreakdown: insights.reduce((acc, insight)=>{
                            acc[insight.type] = (acc[insight.type] || 0) + 1;
                            return acc;
                        }, {})
                    }
                };
            } else if (monitoringParams.action === 'acknowledge_alert' && monitoringParams.alertId) {
                // Acknowledge alert
                const acknowledged = await _advancedmonitoringorchestrator.advancedMonitoringOrchestrator.acknowledgeAlert(monitoringParams.alertId, userId);
                if (acknowledged) {
                    return {
                        success: true,
                        message: `Alert ${monitoringParams.alertId} has been acknowledged successfully.`,
                        data: {
                            alertId: monitoringParams.alertId,
                            acknowledgedBy: userId
                        },
                        details: {
                            action: 'alert_acknowledged'
                        }
                    };
                } else {
                    return {
                        success: false,
                        message: `Alert ${monitoringParams.alertId} not found or already acknowledged.`,
                        error: 'Alert not found'
                    };
                }
            } else if (monitoringParams.action === 'resolve_alert' && monitoringParams.alertId) {
                // Resolve alert
                const resolved = await _advancedmonitoringorchestrator.advancedMonitoringOrchestrator.resolveAlert(monitoringParams.alertId);
                if (resolved) {
                    return {
                        success: true,
                        message: `Alert ${monitoringParams.alertId} has been resolved successfully.`,
                        data: {
                            alertId: monitoringParams.alertId,
                            resolvedBy: userId
                        },
                        details: {
                            action: 'alert_resolved'
                        }
                    };
                } else {
                    return {
                        success: false,
                        message: `Alert ${monitoringParams.alertId} not found or already resolved.`,
                        error: 'Alert not found'
                    };
                }
            } else if (monitoringParams.action === 'show_stats') {
                // Show execution stats
                const stats = await _advancedmonitoringorchestrator.advancedMonitoringOrchestrator.getExecutionStats();
                return {
                    success: true,
                    message: `System Execution Statistics:
- Total Tasks: ${stats.totalTasks}
- Successful: ${stats.successfulTasks}
- Failed: ${stats.failedTasks}
- Success Rate: ${stats.totalTasks > 0 ? (stats.successfulTasks / stats.totalTasks * 100).toFixed(1) : 0}%`,
                    data: stats,
                    details: {
                        action: 'stats_retrieved'
                    }
                };
            } else if (monitoringParams.action === 'create_rule') {
                // Create monitoring rule (requires specific parameters)
                return {
                    success: false,
                    message: 'Creating monitoring rules requires specific configuration parameters. Please use the monitoring dashboard for advanced rule creation.',
                    suggestions: [
                        'Use the monitoring dashboard for rule creation',
                        'Specify rule conditions and actions',
                        'Check existing monitoring rules first'
                    ]
                };
            } else {
                return {
                    success: true,
                    message: 'I can help you with monitoring operations. What would you like to do?',
                    suggestions: [
                        'Show system health status',
                        'Show active alerts',
                        'Show monitoring insights',
                        'Show system statistics',
                        'Acknowledge or resolve alerts'
                    ]
                };
            }
        } catch (error) {
            _logger.logger.error('Monitoring execution failed', {
                error: error instanceof Error ? error.message : String(error),
                query: query.substring(0, 100),
                userId
            });
            return {
                success: false,
                message: 'I encountered an error while accessing monitoring data. Please try again.',
                error: error instanceof Error ? error.message : String(error),
                suggestions: [
                    'Check your permissions',
                    'Try a simpler monitoring query',
                    'Contact support if the issue persists'
                ]
            };
        }
    }
    /**
   * Parse monitoring request to determine specific action
   */ parseMonitoringRequest(query) {
        const lowerQuery = query.toLowerCase();
        // Check for alert operations
        if (lowerQuery.includes('acknowledge')) {
            const alertIdMatch = query.match(/alert[_\s-]?(\w+)/i);
            return {
                action: 'acknowledge_alert',
                alertId: alertIdMatch ? alertIdMatch[1] : undefined
            };
        }
        if (lowerQuery.includes('resolve')) {
            const alertIdMatch = query.match(/alert[_\s-]?(\w+)/i);
            return {
                action: 'resolve_alert',
                alertId: alertIdMatch ? alertIdMatch[1] : undefined
            };
        }
        // Check for specific monitoring queries
        if (lowerQuery.includes('health') || lowerQuery.includes('status')) {
            return {
                action: 'show_health'
            };
        }
        if (lowerQuery.includes('alert')) {
            return {
                action: 'show_alerts'
            };
        }
        if (lowerQuery.includes('insight')) {
            return {
                action: 'show_insights'
            };
        }
        if (lowerQuery.includes('stat') || lowerQuery.includes('metric')) {
            return {
                action: 'show_stats'
            };
        }
        if (lowerQuery.includes('create') && lowerQuery.includes('rule')) {
            return {
                action: 'create_rule'
            };
        }
        // Default to health status
        return {
            action: 'show_health'
        };
    }
    /**
   * Check if this is an autonomous A/B testing request
   */ isAutonomousABTestingRequest(intent, query) {
        const abTestingKeywords = [
            'a/b test',
            'ab test',
            'split test',
            'experiment',
            'testing',
            'test variants',
            'autonomous test',
            'auto test',
            'test campaign',
            'optimize campaign',
            'test performance',
            'variant test',
            'conversion test',
            'test optimization',
            'automatic testing',
            'test subject line',
            'test email',
            'test form',
            'test landing page',
            'test workflow',
            'multivariate test',
            'mvt',
            'test traffic',
            'test allocation',
            'test results',
            'test analysis',
            'test winner',
            'test performance',
            'test insights',
            'test metrics',
            'start test',
            'stop test',
            'pause test',
            'resume test',
            'create test'
        ];
        const lowerQuery = query.toLowerCase();
        return abTestingKeywords.some((keyword)=>lowerQuery.includes(keyword)) || lowerQuery.includes('test') && (lowerQuery.includes('campaign') || lowerQuery.includes('conversion')) || lowerQuery.includes('optimize') && (lowerQuery.includes('email') || lowerQuery.includes('form')) || intent.action === 'CREATE' && lowerQuery.includes('test') || intent.action === 'ANALYZE' && lowerQuery.includes('experiment');
    }
    /**
   * Execute autonomous A/B testing operations
   */ async executeAutonomousABTesting(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true,
                    name: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform A/B testing operations.',
                    error: 'User authentication failed'
                };
            }
            _logger.logger.info('AI autonomous A/B testing operation initiated via intelligent execution', {
                query: query.substring(0, 100),
                userId,
                userRole: user.role,
                organizationId: user.organizationId
            });
            // Parse A/B testing request
            const testingParams = this.parseABTestingRequest(query);
            if (testingParams.action === 'create_test') {
                // Create autonomous A/B test
                if (!testingParams.channel || !testingParams.objective) {
                    return {
                        success: false,
                        message: 'To create an A/B test, I need to know the channel (email/form/landing page) and objective (improve conversions/open rates/etc).',
                        suggestions: [
                            'Specify the channel: "test email campaign"',
                            'Define the objective: "improve conversion rates"',
                            'Example: "Create A/B test for email campaign to improve open rates"'
                        ]
                    };
                }
                const requestId = await _autonomousabtestingengine.autonomousABTestingEngine.requestAutonomousTest({
                    campaignId: testingParams.campaignId,
                    formId: testingParams.formId,
                    workflowId: testingParams.workflowId,
                    channel: testingParams.channel,
                    objective: testingParams.objective,
                    constraints: testingParams.constraints
                });
                return {
                    success: true,
                    message: `Autonomous A/B test request submitted successfully! 
ðŸ§ª Test Type: ${testingParams.channel} optimization
ðŸŽ¯ Objective: ${testingParams.objective}
â±ï¸ Estimated design time: 5-10 minutes
ðŸ¤– The AI will automatically design, execute, and optimize the test

Your test will start running once the design is complete and will automatically apply the winning variant when statistical significance is reached.`,
                    data: {
                        requestId,
                        channel: testingParams.channel,
                        objective: testingParams.objective
                    },
                    details: {
                        action: 'autonomous_test_requested',
                        estimatedDesignTime: '5-10 minutes',
                        autoExecution: true
                    }
                };
            } else if (testingParams.action === 'show_tests') {
                // Show active autonomous tests
                const activeTests = await _autonomousabtestingengine.autonomousABTestingEngine.getActiveTests();
                if (activeTests.length === 0) {
                    return {
                        success: true,
                        message: 'No active autonomous A/B tests found. Would you like me to create one?',
                        suggestions: [
                            'Create email campaign test',
                            'Test form optimization',
                            'Optimize landing page conversion',
                            'Test subject line performance'
                        ]
                    };
                }
                const testSummary = activeTests.map((test)=>`- ${test.name} (${test.status}) - ${test.type} - Priority: ${test.priority}`).join('\n');
                return {
                    success: true,
                    message: `Active Autonomous A/B Tests (${activeTests.length}):
${testSummary}

These tests are running autonomously and will automatically apply winning variants when statistical significance is reached.`,
                    data: activeTests,
                    details: {
                        action: 'active_tests_retrieved',
                        testCount: activeTests.length,
                        statusBreakdown: activeTests.reduce((acc, test)=>{
                            acc[test.status] = (acc[test.status] || 0) + 1;
                            return acc;
                        }, {})
                    }
                };
            } else if (testingParams.action === 'show_metrics') {
                // Show autonomous testing metrics
                const metrics = await _autonomousabtestingengine.autonomousABTestingEngine.getAutonomousTestingMetrics();
                return {
                    success: true,
                    message: `Autonomous A/B Testing Performance:
ðŸ“Š Active Tests: ${metrics.activeTests}
âœ… Completed Tests: ${metrics.completedTests}
ðŸ“ˆ Average Improvement: ${metrics.averageImprovement.toFixed(1)}%
ðŸ¤– Auto-Applied Winners: ${metrics.autoAppliedTests}
ðŸŽ¯ Success Rate: ${metrics.successRate.toFixed(1)}%

The autonomous testing system is continuously optimizing your campaigns for maximum performance.`,
                    data: metrics,
                    details: {
                        action: 'metrics_retrieved'
                    }
                };
            } else if (testingParams.action === 'analyze_opportunity') {
                // Analyze testing opportunity for current campaigns
                return {
                    success: true,
                    message: `I can analyze your campaigns for A/B testing opportunities. To provide specific recommendations, I would need:

ðŸ“§ Email Campaign Performance:
- Current open rates, click rates, conversion rates
- Campaign type and target audience

ðŸ“ Form Performance:
- Current form completion rates
- Form type and complexity

ðŸ“„ Landing Page Performance:
- Current conversion rates and bounce rates
- Page purpose and traffic sources

Would you like me to analyze a specific campaign or form for testing opportunities?`,
                    suggestions: [
                        'Analyze email campaign performance',
                        'Check form conversion opportunities',
                        'Review landing page optimization potential',
                        'Get testing recommendations for low-performing campaigns'
                    ]
                };
            } else if (testingParams.action === 'pause_test' && testingParams.testId) {
                // Pause autonomous test
                const paused = await _autonomousabtestingengine.autonomousABTestingEngine.pauseTest(testingParams.testId);
                if (paused) {
                    return {
                        success: true,
                        message: `Autonomous A/B test ${testingParams.testId} has been paused successfully. You can resume it anytime.`,
                        data: {
                            testId: testingParams.testId,
                            action: 'paused'
                        },
                        details: {
                            action: 'test_paused'
                        }
                    };
                } else {
                    return {
                        success: false,
                        message: `Test ${testingParams.testId} not found or cannot be paused. It may have already completed or been stopped.`,
                        error: 'Test not found or not pauseable'
                    };
                }
            } else if (testingParams.action === 'resume_test' && testingParams.testId) {
                // Resume autonomous test
                const resumed = await _autonomousabtestingengine.autonomousABTestingEngine.resumeTest(testingParams.testId);
                if (resumed) {
                    return {
                        success: true,
                        message: `Autonomous A/B test ${testingParams.testId} has been resumed successfully. It will continue optimizing automatically.`,
                        data: {
                            testId: testingParams.testId,
                            action: 'resumed'
                        },
                        details: {
                            action: 'test_resumed'
                        }
                    };
                } else {
                    return {
                        success: false,
                        message: `Test ${testingParams.testId} not found or cannot be resumed. Please check the test ID and status.`,
                        error: 'Test not found or not resumable'
                    };
                }
            } else {
                return {
                    success: true,
                    message: 'I can help you with autonomous A/B testing operations. What would you like to do?',
                    suggestions: [
                        'Create an A/B test for email campaigns',
                        'Show active autonomous tests',
                        'Get A/B testing performance metrics',
                        'Analyze testing opportunities',
                        'Optimize form conversion rates',
                        'Test subject line performance'
                    ]
                };
            }
        } catch (error) {
            _logger.logger.error('Autonomous A/B testing execution failed', {
                error: error instanceof Error ? error.message : String(error),
                query: query.substring(0, 100),
                userId
            });
            return {
                success: false,
                message: 'I encountered an error while processing your A/B testing request. Please try again.',
                error: error instanceof Error ? error.message : String(error),
                suggestions: [
                    'Check your permissions for A/B testing',
                    'Try a simpler testing request',
                    'Contact support if the issue persists'
                ]
            };
        }
    }
    /**
   * Parse A/B testing request to determine specific action
   */ parseABTestingRequest(query) {
        const lowerQuery = query.toLowerCase();
        // Extract test ID if present
        const testIdMatch = query.match(/test[_\s-]?([a-zA-Z0-9]+)/i);
        const testId = testIdMatch ? testIdMatch[1] : undefined;
        // Check for test control operations
        if (lowerQuery.includes('pause') && testId) {
            return {
                action: 'pause_test',
                testId
            };
        }
        if (lowerQuery.includes('resume') && testId) {
            return {
                action: 'resume_test',
                testId
            };
        }
        if (lowerQuery.includes('stop') && testId) {
            return {
                action: 'stop_test',
                testId
            };
        }
        // Check for specific actions
        if (lowerQuery.includes('create') || lowerQuery.includes('start') || lowerQuery.includes('begin')) {
            // Determine channel
            let channel = '';
            if (lowerQuery.includes('email')) channel = 'email';
            else if (lowerQuery.includes('form')) channel = 'form';
            else if (lowerQuery.includes('landing') || lowerQuery.includes('page')) channel = 'landing_page';
            else if (lowerQuery.includes('sms')) channel = 'sms';
            else if (lowerQuery.includes('whatsapp')) channel = 'whatsapp';
            // Determine objective
            let objective = '';
            if (lowerQuery.includes('conversion') || lowerQuery.includes('convert')) {
                objective = 'improve conversion rates';
            } else if (lowerQuery.includes('open') || lowerQuery.includes('opening')) {
                objective = 'improve open rates';
            } else if (lowerQuery.includes('click')) {
                objective = 'improve click rates';
            } else if (lowerQuery.includes('engagement')) {
                objective = 'improve engagement';
            } else if (lowerQuery.includes('revenue') || lowerQuery.includes('sales')) {
                objective = 'increase revenue';
            } else if (lowerQuery.includes('subject')) {
                objective = 'optimize subject lines';
            }
            return {
                action: 'create_test',
                channel,
                objective,
                constraints: {
                    africanTimezones: true,
                    businessHours: true
                }
            };
        }
        if (lowerQuery.includes('show') || lowerQuery.includes('list') || lowerQuery.includes('active')) {
            return {
                action: 'show_tests'
            };
        }
        if (lowerQuery.includes('metric') || lowerQuery.includes('performance') || lowerQuery.includes('stat')) {
            return {
                action: 'show_metrics'
            };
        }
        if (lowerQuery.includes('analyze') || lowerQuery.includes('opportunity') || lowerQuery.includes('recommend')) {
            return {
                action: 'analyze_opportunity'
            };
        }
        // Default to showing available options
        return {
            action: 'show_options'
        };
    }
    /**
   * Check if this is a compliance monitoring request
   */ isComplianceMonitoringRequest(intent, query) {
        const complianceKeywords = [
            'compliance',
            'regulatory',
            'regulation',
            'legal',
            'audit',
            'governance',
            'gdpr',
            'ndpr',
            'popia',
            'data protection',
            'privacy',
            'african regulations',
            'compliance score',
            'compliance report',
            'compliance violation',
            'remediation',
            'compliance framework',
            'compliance monitoring',
            'compliance check',
            'compliance assessment',
            'compliance audit',
            'compliance status',
            'regulatory compliance',
            'legal compliance',
            'data compliance',
            'financial compliance',
            'kyc',
            'aml',
            'anti money laundering',
            'nigeria compliance',
            'south africa compliance',
            'kenya compliance',
            'ghana compliance',
            'african fintech compliance',
            'regulatory requirements',
            'compliance risk',
            'compliance penalties',
            'compliance deadlines'
        ];
        const lowerQuery = query.toLowerCase();
        return complianceKeywords.some((keyword)=>lowerQuery.includes(keyword)) || lowerQuery.includes('check') && (lowerQuery.includes('compliance') || lowerQuery.includes('regulatory')) || lowerQuery.includes('show') && (lowerQuery.includes('violations') || lowerQuery.includes('compliance')) || intent.action === 'ANALYZE' && lowerQuery.includes('compliance') || intent.action === 'AUDIT' && lowerQuery.includes('system');
    }
    /**
   * Execute compliance monitoring operations
   */ async executeComplianceMonitoring(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true,
                    name: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform compliance operations.',
                    error: 'User authentication failed'
                };
            }
            // Check if user has compliance access
            const hasAccess = [
                'ADMIN',
                'IT_ADMIN',
                'SUPER_ADMIN'
            ].includes(user.role || '');
            if (!hasAccess) {
                return {
                    success: false,
                    message: 'You need admin privileges to access compliance monitoring features.',
                    error: 'Insufficient permissions'
                };
            }
            _logger.logger.info('AI compliance monitoring operation initiated via intelligent execution', {
                query: query.substring(0, 100),
                userId,
                userRole: user.role,
                organizationId: user.organizationId
            });
            // Parse compliance request
            const complianceParams = this.parseComplianceRequest(query);
            if (complianceParams.action === 'show_score') {
                // Show compliance score
                const score = await _autonomouscompliancemonitor.autonomousComplianceMonitor.getComplianceScore();
                const status = score >= 90 ? 'Compliant' : score >= 70 ? 'Partially Compliant' : 'Non-Compliant';
                return {
                    success: true,
                    message: `ðŸ›¡ï¸ Compliance Status Overview:
ðŸ“Š Overall Score: ${score.toFixed(1)}/100
âœ… Status: ${status}
ðŸŒ African Markets: Nigeria (NDPR), South Africa (POPIA), Kenya (DPA)
ðŸ” Autonomous Monitoring: Active
âš–ï¸ Risk Level: ${score >= 90 ? 'Low' : score >= 70 ? 'Medium' : 'High'}

${score < 90 ? 'Recommendations available for improving compliance posture.' : 'Excellent compliance posture maintained!'}`,
                    data: {
                        score,
                        status
                    },
                    details: {
                        action: 'compliance_score_retrieved',
                        riskLevel: score >= 90 ? 'low' : score >= 70 ? 'medium' : 'high'
                    }
                };
            } else if (complianceParams.action === 'show_violations') {
                // Show active compliance violations
                const violations = await _autonomouscompliancemonitor.autonomousComplianceMonitor.getActiveViolations();
                if (violations.length === 0) {
                    return {
                        success: true,
                        message: 'âœ… No active compliance violations found! Your systems are operating within regulatory requirements.',
                        data: violations,
                        details: {
                            action: 'violations_retrieved',
                            violationCount: 0
                        }
                    };
                }
                const violationSummary = violations.slice(0, 5).map((violation)=>`- ${violation.severity.toUpperCase()}: ${violation.description} (${violation.frameworkId})`).join('\n');
                const criticalCount = violations.filter((v)=>v.severity === 'critical').length;
                return {
                    success: true,
                    message: `âš ï¸ Active Compliance Violations (${violations.length}):
${violationSummary}${violations.length > 5 ? `\n... and ${violations.length - 5} more` : ''}

ðŸš¨ Critical Violations: ${criticalCount}
ðŸ“‹ Framework Coverage: Nigeria NDPR, South Africa POPIA, Kenya DPA
ðŸ¤– Autonomous Remediation: ${violations.filter((v)=>v.remediation.some((r)=>r.autoExecutable)).length} violations have auto-fix available

${criticalCount > 0 ? 'Critical violations require immediate attention!' : 'Monitor and address violations to maintain compliance.'}`,
                    data: violations,
                    details: {
                        action: 'violations_retrieved',
                        violationCount: violations.length,
                        criticalCount,
                        autoRemediationCount: violations.filter((v)=>v.remediation.some((r)=>r.autoExecutable)).length
                    }
                };
            } else if (complianceParams.action === 'show_frameworks') {
                // Show compliance frameworks
                const frameworks = await _autonomouscompliancemonitor.autonomousComplianceMonitor.getComplianceFrameworks();
                const africanFrameworks = frameworks.filter((f)=>[
                        'Nigeria',
                        'South Africa',
                        'Kenya',
                        'Ghana'
                    ].includes(f.country));
                const frameworkSummary = africanFrameworks.map((framework)=>`- ${framework.name} (${framework.country}) - ${framework.type} - Risk: ${framework.riskLevel}`).join('\n');
                return {
                    success: true,
                    message: `ðŸŒ African Compliance Frameworks (${africanFrameworks.length}):
${frameworkSummary}

ðŸ“Š Coverage Status:
ðŸ‡³ðŸ‡¬ Nigeria: NDPR (Data Protection Regulation)
ðŸ‡¿ðŸ‡¦ South Africa: POPIA (Protection of Personal Information Act)  
ðŸ‡°ðŸ‡ª Kenya: Data Protection Act 2019
ðŸ‡¬ðŸ‡­ Ghana: Data Protection Act 2012

ðŸ”„ Monitoring Status: Active autonomous monitoring for all frameworks
âš¡ Real-time Alerts: Enabled for critical violations
ðŸ› ï¸ Auto-Remediation: Available for select violation types`,
                    data: frameworks,
                    details: {
                        action: 'frameworks_retrieved',
                        totalFrameworks: frameworks.length,
                        africanFrameworks: africanFrameworks.length,
                        enabledFrameworks: frameworks.filter((f)=>f.enabled).length
                    }
                };
            } else if (complianceParams.action === 'generate_report') {
                // Generate compliance report
                const report = await _autonomouscompliancemonitor.autonomousComplianceMonitor.generateComplianceReport(complianceParams.frameworkId);
                return {
                    success: true,
                    message: `ðŸ“‹ Compliance Report Generated:
ðŸ“Š Overall Score: ${report.overallScore.toFixed(1)}/100
âœ… Compliant: ${report.compliance.compliant}
âš ï¸ Non-Compliant: ${report.compliance.nonCompliant}
ðŸ“… Period: ${report.period.start.toDateString()} - ${report.period.end.toDateString()}
ðŸ” Violations Analyzed: ${report.violations.length}
ðŸ’¡ Recommendations: ${report.recommendations.length}

${report.recommendations.length > 0 ? 'Priority recommendations available for improving compliance.' : 'No immediate actions required.'}`,
                    data: report,
                    details: {
                        action: 'report_generated',
                        reportType: report.reportType,
                        overallScore: report.overallScore
                    }
                };
            } else if (complianceParams.action === 'trigger_assessment') {
                // Trigger compliance assessment
                return {
                    success: true,
                    message: `ðŸ” Autonomous Compliance Assessment Initiated:
ðŸŽ¯ Scope: ${complianceParams.frameworkId || 'All African frameworks'}
â±ï¸ Estimated Duration: 15-30 minutes
ðŸ¤– Assessment Type: Comprehensive autonomous analysis
ðŸ“Š Coverage: Data protection, financial services, telecommunications

The AI will analyze:
- Current compliance posture across all frameworks
- Identify potential violations and risks
- Generate remediation recommendations
- Update compliance scores and status

You'll receive a detailed report upon completion.`,
                    data: {
                        assessmentId: `assessment_${Date.now()}`,
                        scope: complianceParams.frameworkId || 'all_frameworks',
                        estimatedCompletion: '15-30 minutes'
                    },
                    details: {
                        action: 'assessment_triggered',
                        comprehensive: true,
                        africanFocus: true
                    }
                };
            } else if (complianceParams.action === 'african_markets') {
                // Show African market compliance information
                const frameworks = await _autonomouscompliancemonitor.autonomousComplianceMonitor.getComplianceFrameworks();
                const africanFrameworks = frameworks.filter((f)=>[
                        'Nigeria',
                        'South Africa',
                        'Kenya',
                        'Ghana'
                    ].includes(f.country));
                return {
                    success: true,
                    message: `ðŸŒ African Fintech Compliance Overview:

ðŸ‡³ðŸ‡¬ **Nigeria:**
- NDPR (Nigeria Data Protection Regulation) - Active
- CBN Guidelines for Fintech - Monitored
- NITDA Compliance Requirements - Active
- Max Penalty: â‚¦10 million or 2% annual revenue

ðŸ‡¿ðŸ‡¦ **South Africa:**
- POPIA (Protection of Personal Information Act) - Active
- SARB Financial Services Regulations - Monitored  
- PCI DSS for Payment Processing - Active
- Max Penalty: R10 million or 10 years imprisonment

ðŸ‡°ðŸ‡ª **Kenya:**
- Data Protection Act 2019 - Active
- CBK Prudential Guidelines - Monitored
- CA Telecommunications Regulations - Active
- Max Penalty: KES 5 million or 10 years imprisonment

ðŸ”„ **Autonomous Monitoring Features:**
- Real-time violation detection
- Cross-border compliance tracking
- Automated breach notification
- Risk-based assessment scheduling
- Multi-language regulatory updates`,
                    data: {
                        africanFrameworks,
                        totalMarkets: africanFrameworks.length
                    },
                    details: {
                        action: 'african_markets_overview',
                        activeMarkets: africanFrameworks.length,
                        totalRegulations: africanFrameworks.reduce((sum, f)=>sum + f.regulations.length, 0)
                    }
                };
            } else {
                return {
                    success: true,
                    message: 'I can help you with compliance monitoring operations. What would you like to do?',
                    suggestions: [
                        'Show compliance score and status',
                        'Check active compliance violations',
                        'View African regulatory frameworks',
                        'Generate compliance report',
                        'Trigger compliance assessment',
                        'Show African market compliance overview'
                    ]
                };
            }
        } catch (error) {
            _logger.logger.error('Compliance monitoring execution failed', {
                error: error instanceof Error ? error.message : String(error),
                query: query.substring(0, 100),
                userId
            });
            return {
                success: false,
                message: 'I encountered an error while accessing compliance data. Please try again.',
                error: error instanceof Error ? error.message : String(error),
                suggestions: [
                    'Check your compliance permissions',
                    'Try a simpler compliance query',
                    'Contact support if the issue persists'
                ]
            };
        }
    }
    /**
   * Check if this is a content generation request
   */ isContentGenerationRequest(intent, query) {
        const contentKeywords = [
            'content',
            'generate content',
            'create content',
            'write content',
            'content generation',
            'email content',
            'sms content',
            'whatsapp content',
            'social content',
            'blog content',
            'ad copy',
            'copy writing',
            'copywriting',
            'marketing copy',
            'promotional content',
            'campaign content',
            'template',
            'content template',
            'email template',
            'sms template',
            'brand voice',
            'brand tone',
            'personalized content',
            'personalization',
            'a/b test content',
            'content variations',
            'content optimization',
            'onboarding content',
            'nurturing content',
            'conversion content',
            'retention content',
            'reactivation content',
            'promotional content',
            'transactional content',
            'cultural adaptation',
            'african content',
            'localized content',
            'local content',
            'nigeria content',
            'south africa content',
            'kenya content',
            'ghana content',
            'write email',
            'create email',
            'generate email',
            'email copy',
            'write sms',
            'create sms',
            'generate sms',
            'sms copy',
            'write message',
            'create message',
            'generate message',
            'marketing message',
            'content quality',
            'content score',
            'content performance',
            'content analytics'
        ];
        const lowerQuery = query.toLowerCase();
        return contentKeywords.some((keyword)=>lowerQuery.includes(keyword)) || lowerQuery.includes('write') && (lowerQuery.includes('email') || lowerQuery.includes('sms') || lowerQuery.includes('message')) || lowerQuery.includes('create') && (lowerQuery.includes('content') || lowerQuery.includes('copy') || lowerQuery.includes('template')) || lowerQuery.includes('generate') && (lowerQuery.includes('content') || lowerQuery.includes('copy') || lowerQuery.includes('email') || lowerQuery.includes('sms')) || intent.action === 'CREATE' && (lowerQuery.includes('content') || lowerQuery.includes('template') || lowerQuery.includes('copy')) || intent.action === 'GENERATE' && (lowerQuery.includes('content') || lowerQuery.includes('email') || lowerQuery.includes('sms'));
    }
    /**
   * Execute content generation operations
   */ async executeContentGeneration(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true,
                    name: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform content generation operations.',
                    error: 'User authentication failed'
                };
            }
            // Parse the content generation request
            const contentParams = this.parseContentGenerationRequest(query);
            if (contentParams.action === 'overview') {
                // Get content generation overview
                const brandProfile = await _autonomouscontentgenerator.autonomousContentGenerator.getBrandProfile(user.organizationId || '');
                const performanceData = await _autonomouscontentgenerator.autonomousContentGenerator.analyzeContentPerformance(user.organizationId || '');
                return {
                    success: true,
                    message: `ðŸŽ¨ **Content Generation Overview:**

ðŸŽ¯ **Brand Voice Profile:** ${brandProfile ? 'Configured' : 'Not Set Up'}
ðŸ“ˆ **Performance Tracking:** ${performanceData ? 'Active' : 'Not Available'}

**Available Content Types:**
ðŸ“§ Email Campaigns (Subject lines, body content, CTAs)
ðŸ“± SMS Messages (Personalized, promotional, transactional)
ðŸ’¬ WhatsApp Content (Rich media support, interactive elements)
ðŸ“ Blog Posts (SEO-optimized, educational content)
ðŸ“¢ Social Media (Platform-specific optimization)
ðŸŽ¯ Ad Copy (Conversion-focused, A/B tested)

**Key Features:**
âœ¨ AI-Powered Generation using Supreme-AI v3
ðŸŽ­ Brand Voice Consistency
ðŸŒ African Market Cultural Adaptation
ðŸ”„ A/B Testing Variations
ðŸ“Š Performance Prediction
ðŸŽ¯ Audience Personalization
ðŸ“± Multi-Channel Optimization

**Cultural Adaptations Available:**
ðŸ‡³ðŸ‡¬ Nigeria (Lagos, Abuja focus)
ðŸ‡¿ðŸ‡¦ South Africa (Cape Town, Joburg)
ðŸ‡°ðŸ‡ª Kenya (Nairobi, Mombasa)
ðŸ‡¬ðŸ‡­ Ghana (Accra, Kumasi)

Ready to generate high-converting content for your campaigns!`,
                    data: {
                        brandProfile,
                        performanceData,
                        capabilities: {
                            multiChannelGeneration: true,
                            abTesting: true,
                            culturalAdaptation: true,
                            brandVoiceConsistency: true,
                            performancePrediction: true
                        }
                    },
                    suggestions: [
                        'Generate email content for onboarding campaign',
                        'Create SMS messages for promotional campaign',
                        'Generate WhatsApp content for customer support',
                        'Create A/B test variations for email subject lines',
                        'Generate culturally adapted content for Nigeria',
                        'Create personalized content for high-value customers',
                        'Generate conversion-focused ad copy',
                        'Create retention campaign content'
                    ]
                };
            } else if (contentParams.action === 'generate') {
                // Generate content based on parameters
                const generationRequest = {
                    id: `content_req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                    organizationId: user.organizationId || '',
                    userId: userId,
                    type: contentParams.type || 'email',
                    purpose: contentParams.purpose || 'onboarding',
                    targetAudience: {
                        segment: contentParams.audience || 'general',
                        behaviorProfile: {
                            engagementLevel: 'medium'
                        }
                    },
                    brandGuidelines: {
                        voice: contentParams.voice || 'professional',
                        tone: contentParams.tone || 'conversational',
                        culturalContext: contentParams.culturalContext || 'nigeria'
                    },
                    contentParameters: {
                        length: contentParams.length || 'medium',
                        includePersonalization: true,
                        includeCTA: true,
                        ctaType: 'button',
                        urgency: contentParams.urgency || 'medium',
                        emotionalTrigger: contentParams.emotion || 'trust'
                    },
                    context: {
                        campaignGoal: contentParams.goal,
                        productService: contentParams.product,
                        promotionDetails: contentParams.promotion
                    },
                    abTestVariations: contentParams.variations || 1,
                    createdAt: new Date(),
                    priority: 'medium'
                };
                // Generate the content
                const generatedContent = await _autonomouscontentgenerator.autonomousContentGenerator.generateContent(generationRequest);
                if (generatedContent.length > 0) {
                    const avgQuality = generatedContent.reduce((sum, content)=>sum + content.qualityScore, 0) / generatedContent.length;
                    return {
                        success: true,
                        message: `ðŸŽ¨ **Content Generated Successfully!**

ðŸ“‹ **Generation Summary:**
ðŸ“§ Content Type: ${contentParams.type || 'Email'}
ðŸŽ¯ Purpose: ${contentParams.purpose || 'Onboarding'}
ðŸŒ Cultural Context: ${contentParams.culturalContext || 'Nigeria'}
ðŸ”¢ Variations: ${generatedContent.length}
â­ Avg Quality Score: ${(avgQuality * 100).toFixed(1)}%

**Generated Content Preview:**
${generatedContent[0].content.subject ? `ðŸ“Œ Subject: "${generatedContent[0].content.subject}"` : ''}
ðŸ“ Content: "${generatedContent[0].content.body.substring(0, 150)}..."
ðŸŽ¯ CTA: "${generatedContent[0].content.cta || 'Learn More'}"

**Performance Predictions:**
ðŸ“ˆ Expected Engagement: ${(generatedContent[0].performancePrediction.expectedEngagementRate * 100).toFixed(1)}%
ðŸ’° Expected Conversion: ${(generatedContent[0].performancePrediction.expectedConversionRate * 100).toFixed(1)}%
ðŸŽ¯ Confidence: ${(generatedContent[0].performancePrediction.confidence * 100).toFixed(1)}%

**Cultural Adaptations Applied:**
${generatedContent[0].culturalAdaptations.localizedPhrases.length > 0 ? `ðŸŒ Localized Phrases: ${generatedContent[0].culturalAdaptations.localizedPhrases.slice(0, 3).join(', ')}` : 'ðŸŒ General African adaptation applied'}

Content is ready for review and deployment!`,
                        data: {
                            requestId: generationRequest.id,
                            generatedContent,
                            totalVariations: generatedContent.length,
                            avgQualityScore: avgQuality
                        },
                        details: {
                            action: 'content_generated',
                            contentType: contentParams.type,
                            purpose: contentParams.purpose,
                            variations: generatedContent.length
                        }
                    };
                } else {
                    return {
                        success: false,
                        message: 'Content generation failed. No content was generated due to safety filters or processing errors.',
                        suggestions: [
                            'Try adjusting your content parameters',
                            'Check if the request meets content guidelines',
                            'Contact support if the issue persists'
                        ]
                    };
                }
            } else if (contentParams.action === 'brand_profile') {
                // Get or create brand profile
                const brandProfile = await _autonomouscontentgenerator.autonomousContentGenerator.getBrandProfile(user.organizationId || '');
                if (brandProfile) {
                    return {
                        success: true,
                        message: `ðŸŽ­ **Brand Voice Profile:**

**Voice Characteristics:**
ðŸŽ¯ Personality: ${brandProfile.voiceCharacteristics.personality.join(', ')}
ðŸ’¬ Communication Style: ${brandProfile.voiceCharacteristics.communicationStyle}
ðŸ”‘ Key Phrases: ${brandProfile.voiceCharacteristics.keyPhrases.slice(0, 5).join(', ')}
ðŸš« Avoid Words: ${brandProfile.voiceCharacteristics.avoidanceList.slice(0, 3).join(', ')}

**Tonal Guidelines:**
ðŸ“‹ Formal: ${brandProfile.tonalGuidelines.formal}
ðŸ’¬ Casual: ${brandProfile.tonalGuidelines.casual}
ðŸ¤ Supportive: ${brandProfile.tonalGuidelines.supportive}
ðŸ“¢ Promotional: ${brandProfile.tonalGuidelines.promotional}

**Cultural Adaptations:**
${Object.keys(brandProfile.culturalAdaptations).map((country)=>`ðŸŒ ${country.charAt(0).toUpperCase() + country.slice(1)}: Configured`).join('\n')}

**Performance Insights:**
âœ… Successful Patterns: ${brandProfile.performanceHistory.successfulPatterns.length} identified
âŒ Patterns to Avoid: ${brandProfile.performanceHistory.unsuccessfulPatterns.length} identified
ðŸ’¡ Learning Insights: ${brandProfile.performanceHistory.learningInsights.length} captured

Last analyzed: ${brandProfile.lastAnalyzed.toLocaleDateString()}`,
                        data: brandProfile
                    };
                } else {
                    return {
                        success: true,
                        message: `ðŸŽ­ **Brand Voice Profile Setup:**

No brand profile found for your organization. I can help you create one by analyzing your existing content and setting up brand guidelines.

**What I can analyze:**
ðŸ“§ Existing email campaigns
ðŸ“± SMS message history
ðŸ’¬ WhatsApp communications
ðŸ“ Previous content performance

**Profile will include:**
ðŸŽ¯ Brand personality traits
ðŸ’¬ Communication style preferences
ðŸ”‘ Key phrases and terminology
ðŸš« Words and phrases to avoid
ðŸŒ Cultural adaptation guidelines
ðŸ“Š Performance-based recommendations

Would you like me to analyze your existing content and create a brand profile?`,
                        suggestions: [
                            'Analyze existing content to create brand profile',
                            'Set up manual brand guidelines',
                            'Import brand guidelines from document',
                            'Start with default professional voice'
                        ]
                    };
                }
            } else if (contentParams.action === 'performance') {
                // Analyze content performance
                const performanceData = await _autonomouscontentgenerator.autonomousContentGenerator.analyzeContentPerformance(user.organizationId || '');
                return {
                    success: true,
                    message: `ðŸ“Š **Content Performance Analysis:**

${performanceData ? `
**Channel Performance (Last 30 Days):**
ðŸ“§ Email: ${performanceData.emailPerformance ? 'Available' : 'No data'}
ðŸ“± SMS: ${performanceData.smsPerformance ? 'Available' : 'No data'}  
ðŸ’¬ WhatsApp: ${performanceData.whatsappPerformance ? 'Available' : 'No data'}

**Top Performing Content Types:**
${performanceData.topPerformingTypes ? performanceData.topPerformingTypes.slice(0, 3).map((type)=>`ðŸ† ${type}`).join('\n') : 'ðŸ“Š Analyzing content patterns...'}

**Optimization Recommendations:**
${performanceData.recommendations ? performanceData.recommendations.slice(0, 3).map((rec)=>`ðŸ’¡ ${rec}`).join('\n') : 'ðŸ” Gathering insights...'}
` : `
ðŸ“Š **Setting up performance tracking...**

I'm analyzing your content performance across all channels. This includes:
- Email open rates and click-through rates
- SMS delivery and response rates  
- WhatsApp engagement metrics
- Content quality scores
- Conversion tracking

Performance data will be available once sufficient content interactions are recorded.`}

**Content Generation Insights:**
ðŸŽ¯ Focus on emotional triggers that resonate with African audiences
ðŸŒ Cultural adaptation improves engagement by 25-40%
ðŸ“± Mobile-optimized content performs 60% better
â° Timing optimization for African time zones increases opens by 30%`,
                    data: performanceData
                };
            } else {
                return {
                    success: false,
                    message: 'I understand you want content generation assistance, but I need more specific details about what type of content you want to create.',
                    suggestions: [
                        'Generate email content for onboarding campaign',
                        'Create SMS messages for promotional campaign',
                        'Generate WhatsApp content for customer support',
                        'Show brand voice profile',
                        'Analyze content performance',
                        'Create A/B test variations'
                    ]
                };
            }
        } catch (error) {
            _logger.logger.error('Content generation execution failed', {
                userId,
                query,
                error: error instanceof Error ? error.message : String(error)
            });
            return {
                success: false,
                message: 'Content generation encountered an error. Please try again with a simpler request.',
                error: error instanceof Error ? error.message : 'Unknown error',
                suggestions: [
                    'Try a simpler content generation request',
                    'Check your content generation permissions',
                    'Contact support if the issue persists'
                ]
            };
        }
    }
    /**
   * Parse content generation request to determine specific action
   */ parseContentGenerationRequest(query) {
        const lowerQuery = query.toLowerCase();
        // Determine action
        let action = 'overview';
        if (lowerQuery.includes('generate') || lowerQuery.includes('create') || lowerQuery.includes('write')) {
            action = 'generate';
        } else if (lowerQuery.includes('brand') && (lowerQuery.includes('voice') || lowerQuery.includes('profile'))) {
            action = 'brand_profile';
        } else if (lowerQuery.includes('performance') || lowerQuery.includes('analytics') || lowerQuery.includes('analyze')) {
            action = 'performance';
        }
        // Determine content type
        let type = 'email';
        if (lowerQuery.includes('sms')) type = 'sms';
        else if (lowerQuery.includes('whatsapp')) type = 'whatsapp';
        else if (lowerQuery.includes('social')) type = 'social';
        else if (lowerQuery.includes('blog')) type = 'blog';
        else if (lowerQuery.includes('ad') || lowerQuery.includes('copy')) type = 'ad_copy';
        // Determine purpose
        let purpose = 'onboarding';
        if (lowerQuery.includes('nurturing') || lowerQuery.includes('nurture')) purpose = 'nurturing';
        else if (lowerQuery.includes('conversion') || lowerQuery.includes('convert')) purpose = 'conversion';
        else if (lowerQuery.includes('retention') || lowerQuery.includes('retain')) purpose = 'retention';
        else if (lowerQuery.includes('reactivation') || lowerQuery.includes('reactivate')) purpose = 'reactivation';
        else if (lowerQuery.includes('promotional') || lowerQuery.includes('promo')) purpose = 'promotional';
        else if (lowerQuery.includes('transactional')) purpose = 'transactional';
        // Determine cultural context
        let culturalContext = 'nigeria';
        if (lowerQuery.includes('south africa')) culturalContext = 'south_africa';
        else if (lowerQuery.includes('kenya')) culturalContext = 'kenya';
        else if (lowerQuery.includes('ghana')) culturalContext = 'ghana';
        // Determine voice and tone
        let voice = 'professional';
        if (lowerQuery.includes('friendly')) voice = 'friendly';
        else if (lowerQuery.includes('authoritative')) voice = 'authoritative';
        else if (lowerQuery.includes('casual')) voice = 'casual';
        else if (lowerQuery.includes('empathetic')) voice = 'empathetic';
        let tone = 'conversational';
        if (lowerQuery.includes('formal')) tone = 'formal';
        else if (lowerQuery.includes('enthusiastic')) tone = 'enthusiastic';
        else if (lowerQuery.includes('urgent')) tone = 'urgent';
        else if (lowerQuery.includes('educational')) tone = 'educational';
        // Determine length
        let length = 'medium';
        if (lowerQuery.includes('short') || lowerQuery.includes('brief')) length = 'short';
        else if (lowerQuery.includes('long') || lowerQuery.includes('detailed')) length = 'long';
        // Extract A/B test variations
        let variations = 1;
        const variationMatch = lowerQuery.match(/(\d+)\s*(variation|version|variant)/);
        if (variationMatch) {
            variations = Number.parseInt(variationMatch[1]);
        } else if (lowerQuery.includes('a/b test') || lowerQuery.includes('ab test')) {
            variations = 2;
        }
        return {
            action,
            type,
            purpose,
            voice,
            tone,
            length,
            culturalContext,
            variations,
            urgency: lowerQuery.includes('urgent') ? 'high' : 'medium',
            emotion: lowerQuery.includes('trust') ? 'trust' : lowerQuery.includes('excitement') ? 'joy' : 'trust'
        };
    }
    /**
   * Parse compliance request to determine specific action
   */ parseComplianceRequest(query) {
        const lowerQuery = query.toLowerCase();
        // Check for specific countries
        let country = '';
        if (lowerQuery.includes('nigeria')) country = 'nigeria';
        else if (lowerQuery.includes('south africa')) country = 'south_africa';
        else if (lowerQuery.includes('kenya')) country = 'kenya';
        else if (lowerQuery.includes('ghana')) country = 'ghana';
        // Check for specific frameworks
        let frameworkId = '';
        if (lowerQuery.includes('ndpr') || lowerQuery.includes('nigeria') && lowerQuery.includes('data')) {
            frameworkId = 'nigeria_ndpr';
        } else if (lowerQuery.includes('popia') || lowerQuery.includes('south africa') && lowerQuery.includes('data')) {
            frameworkId = 'south_africa_popia';
        } else if (lowerQuery.includes('kenya') && lowerQuery.includes('data')) {
            frameworkId = 'kenya_dpa';
        }
        // Determine action
        if (lowerQuery.includes('score') || lowerQuery.includes('status')) {
            return {
                action: 'show_score',
                frameworkId,
                country
            };
        }
        if (lowerQuery.includes('violation')) {
            return {
                action: 'show_violations',
                frameworkId,
                country
            };
        }
        if (lowerQuery.includes('framework') || lowerQuery.includes('regulation')) {
            return {
                action: 'show_frameworks',
                frameworkId,
                country
            };
        }
        if (lowerQuery.includes('report')) {
            return {
                action: 'generate_report',
                frameworkId,
                country,
                reportType: 'standard'
            };
        }
        if (lowerQuery.includes('assess') || lowerQuery.includes('audit') || lowerQuery.includes('check')) {
            return {
                action: 'trigger_assessment',
                frameworkId,
                country
            };
        }
        if (lowerQuery.includes('african') || lowerQuery.includes('africa') || lowerQuery.includes('market')) {
            return {
                action: 'african_markets'
            };
        }
        // Default to showing options
        return {
            action: 'show_options'
        };
    }
    /**
   * Check if this is a cross-platform integration request
   */ isCrossPlatformIntegrationRequest(intent, query) {
        const integrationKeywords = [
            'integration',
            'integrate',
            'connect',
            'connection',
            'api integration',
            'platform integration',
            'cross platform',
            'cross-platform',
            'external integration',
            'third party',
            'third-party',
            'payment integration',
            'fintech integration',
            'african fintech',
            'payment gateway',
            'mobile money',
            'banking api',
            'paystack',
            'flutterwave',
            'mpesa',
            'mtn mobile money',
            'interswitch',
            'payment provider',
            'provider integration',
            'api connection',
            'webhook',
            'webhook integration',
            'data sync',
            'synchronization',
            'sync data',
            'integration flow',
            'data flow',
            'automated flow',
            'integration hub',
            'african api',
            'african payment',
            'african provider',
            'local payment',
            'remittance api',
            'banking integration',
            'financial api',
            'fintech api',
            'integration health',
            'integration status',
            'integration monitoring',
            'integration setup',
            'configure integration',
            'integration config',
            'bulk sync',
            'mass sync',
            'data transfer',
            'integration test',
            'provider recommendation',
            'recommend provider',
            'suggest integration',
            'market integration',
            'local integration',
            'country integration'
        ];
        const lowerQuery = query.toLowerCase();
        return integrationKeywords.some((keyword)=>lowerQuery.includes(keyword)) || lowerQuery.includes('connect') && (lowerQuery.includes('api') || lowerQuery.includes('service') || lowerQuery.includes('platform')) || lowerQuery.includes('setup') && (lowerQuery.includes('payment') || lowerQuery.includes('integration') || lowerQuery.includes('provider')) || lowerQuery.includes('sync') && (lowerQuery.includes('data') || lowerQuery.includes('platform') || lowerQuery.includes('service')) || intent.action === 'CREATE' && (lowerQuery.includes('integration') || lowerQuery.includes('connection')) || intent.action === 'CONNECT' && (lowerQuery.includes('api') || lowerQuery.includes('service'));
    }
    /**
   * Execute cross-platform integration operations
   */ async executeCrossPlatformIntegration(intent, userId, query) {
        try {
            // Get user details for permissions
            const user = await _prisma.default.user.findUnique({
                where: {
                    id: userId
                },
                select: {
                    role: true,
                    organizationId: true,
                    name: true
                }
            });
            if (!user) {
                return {
                    success: false,
                    message: 'User not found. Cannot perform integration operations.',
                    error: 'User authentication failed'
                };
            }
            // Parse the integration request
            const integrationParams = this.parseCrossPlatformIntegrationRequest(query);
            if (integrationParams.action === 'overview') {
                // Get integration overview
                const integrations = await _crossplatformintegrationhub.crossPlatformIntegrationHub.getIntegrations(user.organizationId || '');
                const providers = _crossplatformintegrationhub.crossPlatformIntegrationHub.getAfricanFintechProviders();
                return {
                    success: true,
                    message: `ðŸ”— **Cross-Platform Integration Hub:**

ðŸŒ **Available African Fintech Providers:** ${providers.length}
âš¡ **Active Integrations:** ${integrations.filter((i)=>i.isActive).length}
ðŸ“Š **Total Integrations:** ${integrations.length}

**Supported Integration Types:**
ðŸ’³ Payment Gateways (Paystack, Flutterwave, Interswitch)
ðŸ“± Mobile Money (M-Pesa, MTN Mobile Money)
ðŸ¦ Banking APIs (Local African banks)
ðŸ’¸ Remittance Services (Cross-border transfers)
ðŸ”— CRM Connectors (Customer data sync)
ðŸ“§ Communication Platforms (SMS, WhatsApp)
ðŸ“ˆ Analytics & Reporting Tools

**African Market Coverage:**
ðŸ‡³ðŸ‡¬ Nigeria: Paystack, Interswitch, Local banks
ðŸ‡°ðŸ‡ª Kenya: M-Pesa, Flutterwave, KCB API
ðŸ‡¿ðŸ‡¦ South Africa: Yoco, PayU, Standard Bank
ðŸ‡¬ðŸ‡­ Ghana: Flutterwave, MTN Mobile Money

**Key Features:**
ðŸ¤– AI-Powered Integration Recommendations
ðŸ”„ Autonomous Data Synchronization  
âš¡ Real-time Webhook Processing
ðŸ›¡ï¸ Advanced Security & Encryption
ðŸ“Š Integration Health Monitoring
ðŸ”§ Auto-healing & Recovery
ðŸŽ¯ Market-specific Compliance

**Integration Health:**
âœ… Healthy: ${integrations.filter((i)=>i.healthStatus === 'healthy').length}
âš ï¸ Warning: ${integrations.filter((i)=>i.healthStatus === 'warning').length}
âŒ Error: ${integrations.filter((i)=>i.healthStatus === 'error').length}

Ready to connect with African fintech ecosystems!`,
                    data: {
                        integrations: integrations.length,
                        activeIntegrations: integrations.filter((i)=>i.isActive).length,
                        availableProviders: providers.length,
                        healthStats: {
                            healthy: integrations.filter((i)=>i.healthStatus === 'healthy').length,
                            warning: integrations.filter((i)=>i.healthStatus === 'warning').length,
                            error: integrations.filter((i)=>i.healthStatus === 'error').length
                        },
                        capabilities: {
                            africanFintechSupport: true,
                            autonomousSync: true,
                            aiRecommendations: true,
                            realTimeWebhooks: true,
                            healthMonitoring: true,
                            autoHealing: true,
                            marketCompliance: true
                        }
                    }
                };
            }
            if (integrationParams.action === 'create_integration') {
                // Create new integration
                const { providerId, credentials, configuration } = integrationParams;
                if (!providerId || !credentials) {
                    return {
                        success: false,
                        message: 'Provider ID and credentials are required to create an integration.',
                        suggestions: [
                            'Specify the provider (e.g., "paystack", "flutterwave", "mpesa")',
                            'Include API credentials or auth tokens',
                            'Optionally specify configuration settings'
                        ]
                    };
                }
                const integration = await _crossplatformintegrationhub.crossPlatformIntegrationHub.createIntegration(user.organizationId || '', providerId, credentials, configuration);
                return {
                    success: true,
                    message: `âœ… **Integration Created Successfully!**

ðŸ”— **Integration ID:** ${integration.id}
ðŸ¢ **Provider:** ${integration.platformName}
ðŸŽ¯ **Platform Type:** ${integration.platformType}
ðŸ“… **Created:** ${integration.createdAt.toISOString()}

**Next Steps:**
1. Test the integration connectivity
2. Configure data sync settings
3. Set up webhooks if needed
4. Enable autonomous features

Integration is ready for testing and activation!`,
                    data: {
                        integrationId: integration.id,
                        integration
                    }
                };
            }
            if (integrationParams.action === 'trigger_sync') {
                // Trigger integration sync
                const { integrationId } = integrationParams;
                if (!integrationId) {
                    return {
                        success: false,
                        message: 'Integration ID is required to trigger sync.',
                        suggestions: [
                            'Specify the integration ID',
                            'Use "sync all integrations" for bulk sync'
                        ]
                    };
                }
                await _crossplatformintegrationhub.crossPlatformIntegrationHub.executeAutonomousSync(integrationId);
                return {
                    success: true,
                    message: `ðŸ”„ **Integration Sync Triggered Successfully!**

Integration ID: ${integrationId}
Status: Sync initiated
Mode: Autonomous synchronization

The system will automatically:
- Fetch latest data from the provider
- Apply data transformations
- Update local records
- Handle any conflicts using AI resolution
- Send notifications on completion

Check the integration dashboard for real-time progress updates.`,
                    data: {
                        integrationId,
                        syncTriggered: true
                    }
                };
            }
            if (integrationParams.action === 'recommendations') {
                // Get AI-powered integration recommendations
                const businessType = integrationParams.businessType || 'fintech';
                const targetMarkets = integrationParams.targetMarkets || [
                    'nigeria'
                ];
                const recommendations = await _crossplatformintegrationhub.crossPlatformIntegrationHub.getIntegrationRecommendations(user.organizationId || '', businessType, targetMarkets);
                return {
                    success: true,
                    message: `ðŸŽ¯ **AI Integration Recommendations:**

**Business Type:** ${businessType}
**Target Markets:** ${targetMarkets.join(', ')}

**Recommended Providers:**
${recommendations.recommended.map((provider, index)=>`${index + 1}. **${provider.name}** (${provider.type})
     ðŸ“ Markets: ${provider.countries.join(', ')}
     ðŸ’° Setup: ${provider.setupComplexity}
     ðŸ“ˆ Volume: ${provider.monthlyVolumeLimits.paid ? `$${provider.monthlyVolumeLimits.paid}` : 'Enterprise'}`).join('\n\n')}

**Key Reasons:**
${recommendations.reasons.map((reason)=>`â€¢ ${reason}`).join('\n')}

**Implementation Plan:**
${recommendations.integrationPlan}

Ready to implement these integrations for optimal market coverage!`,
                    data: {
                        recommendations,
                        businessType,
                        targetMarkets
                    }
                };
            }
            if (integrationParams.action === 'health_check') {
                // Check integration health
                const integrations = await _crossplatformintegrationhub.crossPlatformIntegrationHub.getIntegrations(user.organizationId || '');
                return {
                    success: true,
                    message: `ðŸ¥ **Integration Health Report:**

**Overall Health Status:**
âœ… Healthy: ${integrations.filter((i)=>i.healthStatus === 'healthy').length}
âš ï¸ Warning: ${integrations.filter((i)=>i.healthStatus === 'warning').length}
âŒ Error: ${integrations.filter((i)=>i.healthStatus === 'error').length}
ðŸ”§ Maintenance: ${integrations.filter((i)=>i.healthStatus === 'maintenance').length}

**Active Integrations:**
${integrations.filter((i)=>i.isActive).map((integration)=>`â€¢ **${integration.displayName}** - ${integration.healthStatus === 'healthy' ? 'âœ…' : integration.healthStatus === 'warning' ? 'âš ï¸' : 'âŒ'} ${integration.healthStatus}`).join('\n')}

**Recent Sync Activity:**
${integrations.filter((i)=>i.lastSyncAt).slice(0, 3).map((integration)=>`â€¢ ${integration.displayName}: ${integration.lastSyncAt?.toISOString()} (${integration.syncSettings.lastSyncStatus})`).join('\n')}

All systems are monitored continuously with auto-healing enabled.`,
                    data: {
                        totalIntegrations: integrations.length,
                        healthStats: {
                            healthy: integrations.filter((i)=>i.healthStatus === 'healthy').length,
                            warning: integrations.filter((i)=>i.healthStatus === 'warning').length,
                            error: integrations.filter((i)=>i.healthStatus === 'error').length,
                            maintenance: integrations.filter((i)=>i.healthStatus === 'maintenance').length
                        },
                        integrations
                    }
                };
            }
            // Default action
            return {
                success: true,
                message: `ðŸ”— **Cross-Platform Integration Hub**

I can help you with:
â€¢ **Create Integration** - Connect to African fintech providers
â€¢ **Sync Data** - Trigger autonomous synchronization  
â€¢ **Get Recommendations** - AI-powered provider suggestions
â€¢ **Health Monitoring** - Check integration status
â€¢ **Configuration** - Set up webhooks and data flows

What would you like to do with integrations?`,
                suggestions: [
                    'Create integration with Paystack',
                    'Sync all integrations',
                    'Get provider recommendations for Kenya',
                    'Check integration health status',
                    'Show available African fintech providers'
                ]
            };
        } catch (error) {
            _logger.logger.error('Cross-platform integration execution failed', {
                userId,
                query,
                error: error instanceof Error ? error.message : String(error)
            });
            return {
                success: false,
                message: 'Failed to execute integration operation. Please check the system logs for details.',
                error: error instanceof Error ? error.message : String(error),
                suggestions: [
                    'Verify your permissions for integration management',
                    'Check if the integration service is running',
                    'Try a simpler integration command first'
                ]
            };
        }
    }
    /**
   * Parse cross-platform integration request parameters
   */ parseCrossPlatformIntegrationRequest(query) {
        const lowerQuery = query.toLowerCase();
        // Check for provider names
        let providerId = '';
        if (lowerQuery.includes('paystack')) providerId = 'paystack';
        else if (lowerQuery.includes('flutterwave')) providerId = 'flutterwave';
        else if (lowerQuery.includes('mpesa') || lowerQuery.includes('m-pesa')) providerId = 'mpesa';
        else if (lowerQuery.includes('mtn mobile money')) providerId = 'mtn_mobile_money';
        else if (lowerQuery.includes('interswitch')) providerId = 'interswitch';
        // Check for countries/markets
        let targetMarkets = [];
        if (lowerQuery.includes('nigeria')) targetMarkets.push('nigeria');
        if (lowerQuery.includes('kenya')) targetMarkets.push('kenya');
        if (lowerQuery.includes('south africa')) targetMarkets.push('south_africa');
        if (lowerQuery.includes('ghana')) targetMarkets.push('ghana');
        if (targetMarkets.length === 0 && lowerQuery.includes('africa')) {
            targetMarkets = [
                'nigeria',
                'kenya',
                'south_africa',
                'ghana'
            ];
        }
        // Check for business type
        let businessType = 'fintech';
        if (lowerQuery.includes('ecommerce') || lowerQuery.includes('e-commerce')) businessType = 'ecommerce';
        else if (lowerQuery.includes('remittance')) businessType = 'remittance';
        else if (lowerQuery.includes('lending') || lowerQuery.includes('loan')) businessType = 'lending';
        // Determine action
        if (lowerQuery.includes('create') && lowerQuery.includes('integration')) {
            return {
                action: 'create_integration',
                providerId,
                credentials: {},
                configuration: {}
            };
        }
        if (lowerQuery.includes('sync') || lowerQuery.includes('synchronize')) {
            const integrationId = this.extractIntegrationId(lowerQuery);
            return {
                action: 'trigger_sync',
                integrationId
            };
        }
        if (lowerQuery.includes('recommend') || lowerQuery.includes('suggest') || lowerQuery.includes('advice')) {
            return {
                action: 'recommendations',
                businessType,
                targetMarkets
            };
        }
        if (lowerQuery.includes('health') || lowerQuery.includes('status') || lowerQuery.includes('monitor')) {
            return {
                action: 'health_check'
            };
        }
        if (lowerQuery.includes('provider') || lowerQuery.includes('available') || lowerQuery.includes('list')) {
            return {
                action: 'list_providers',
                targetMarkets
            };
        }
        if (lowerQuery.includes('configure') || lowerQuery.includes('setup') || lowerQuery.includes('config')) {
            return {
                action: 'configure_integration',
                providerId
            };
        }
        // Default to overview
        return {
            action: 'overview'
        };
    }
    /**
   * Extract integration ID from query
   */ extractIntegrationId(query) {
        const matches = query.match(/integration[_\s]+([a-f0-9\-]+)/i);
        return matches ? matches[1] : '';
    }
}
const intelligentExecutionEngine = new IntelligentExecutionEngine();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdXByZW1lL0Rlc2t0b3AvbWFya2V0c2FnZS9zcmMvbGliL2FpL2ludGVsbGlnZW50LWV4ZWN1dGlvbi1lbmdpbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBJbnRlbGxpZ2VudCBFeGVjdXRpb24gRW5naW5lXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBSb2J1c3QgZXhlY3V0aW9uIGVuZ2luZSB0aGF0IGNhbiBoYW5kbGUgYW55IGNyZWF0aW9uLCBhc3NpZ25tZW50LCBvciBkYXRhIGZldGNoaW5nIHRhc2tcbiAqIFVzZXMgdGhlIGludGVsbGlnZW50IGludGVudCBhbmFseXplciB0byB1bmRlcnN0YW5kIHVzZXIgcmVxdWVzdHNcbiAqL1xuXG5pbXBvcnQgeyBpbnRlbGxpZ2VudEludGVudEFuYWx5emVyLCB0eXBlIEludGVsbGlnZW50SW50ZW50LCB0eXBlIENvbnRhY3REYXRhLCB0eXBlIFdvcmtmbG93RGF0YSwgdHlwZSBDYW1wYWlnbkRhdGEsIHR5cGUgVGFza0RhdGEsIHR5cGUgRGF0YUZldGNoUmVxdWVzdCB9IGZyb20gJy4vaW50ZWxsaWdlbnQtaW50ZW50LWFuYWx5emVyJztcbmltcG9ydCB7IHJlY29yZFRhc2tFeGVjdXRpb24gfSBmcm9tICcuL3Rhc2stZXhlY3V0aW9uLW1vbml0b3InO1xuaW1wb3J0IHsgYnVsa09wZXJhdGlvbnNFbmdpbmUgfSBmcm9tICcuL2J1bGstb3BlcmF0aW9ucy1lbmdpbmUnO1xuaW1wb3J0IHsgd29ya2Zsb3dOb2RlQnVpbGRlciB9IGZyb20gJy4vd29ya2Zsb3ctbm9kZS1idWlsZGVyJztcbmltcG9ydCB7IGludGVsbGlnZW50UmVwb3J0aW5nRW5naW5lLCB0eXBlIFJlcG9ydFJlcXVlc3QgfSBmcm9tICcuL2ludGVsbGlnZW50LXJlcG9ydGluZy1lbmdpbmUnO1xuaW1wb3J0IHsgYWR2YW5jZWRNb25pdG9yaW5nT3JjaGVzdHJhdG9yIH0gZnJvbSAnQC9saWIvbW9uaXRvcmluZy9hZHZhbmNlZC1tb25pdG9yaW5nLW9yY2hlc3RyYXRvcic7XG5pbXBvcnQgeyBhdXRvbm9tb3VzQUJUZXN0aW5nRW5naW5lIH0gZnJvbSAnLi9hdXRvbm9tb3VzLWFiLXRlc3RpbmctZW5naW5lJztcbmltcG9ydCB7IGF1dG9ub21vdXNDb21wbGlhbmNlTW9uaXRvciB9IGZyb20gJ0AvbGliL2NvbXBsaWFuY2UvYXV0b25vbW91cy1jb21wbGlhbmNlLW1vbml0b3InO1xuaW1wb3J0IHsgYXV0b25vbW91c0NvbnRlbnRHZW5lcmF0b3IsIHR5cGUgQ29udGVudEdlbmVyYXRpb25SZXF1ZXN0IH0gZnJvbSAnLi9hdXRvbm9tb3VzLWNvbnRlbnQtZ2VuZXJhdG9yJztcbmltcG9ydCB7IGNyb3NzUGxhdGZvcm1JbnRlZ3JhdGlvbkh1YiB9IGZyb20gJ0AvbGliL2ludGVncmF0aW9ucy9jcm9zcy1wbGF0Zm9ybS1pbnRlZ3JhdGlvbi1odWInO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC9saWIvbG9nZ2VyJztcbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvZGIvcHJpc21hJztcblxuaW50ZXJmYWNlIEV4ZWN1dGlvblJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgZGF0YT86IGFueTtcbiAgZGV0YWlscz86IGFueTtcbiAgZXJyb3I/OiBzdHJpbmc7XG4gIHN1Z2dlc3Rpb25zPzogc3RyaW5nW107XG59XG5cbmNsYXNzIEludGVsbGlnZW50RXhlY3V0aW9uRW5naW5lIHtcbiAgXG4gIC8qKlxuICAgKiBNYWluIGV4ZWN1dGlvbiBtZXRob2QgLSBoYW5kbGVzIGFueSB1c2VyIHJlcXVlc3QgaW50ZWxsaWdlbnRseVxuICAgKi9cbiAgYXN5bmMgZXhlY3V0ZVVzZXJSZXF1ZXN0KHVzZXJRdWVyeTogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmluZm8oJ0V4ZWN1dGluZyBpbnRlbGxpZ2VudCB1c2VyIHJlcXVlc3QnLCB7IFxuICAgICAgICBxdWVyeTogdXNlclF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLFxuICAgICAgICB1c2VySWQgXG4gICAgICB9KTtcblxuICAgICAgLy8gQW5hbHl6ZSB1c2VyIGludGVudFxuICAgICAgY29uc3QgaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCA9IGF3YWl0IGludGVsbGlnZW50SW50ZW50QW5hbHl6ZXIuYW5hbHl6ZUludGVudCh1c2VyUXVlcnkpO1xuICAgICAgXG4gICAgICAvLyBJZiBpbnRlbnQgaXMgdW5jbGVhciwgcHJvdmlkZSBndWlkYW5jZVxuICAgICAgaWYgKGludGVudC5jb25maWRlbmNlIDwgMC42KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBpbnRlbnQuc3VnZ2VzdGVkUmVzcG9uc2UgfHwgJ0kgbmVlZCBtb3JlIGluZm9ybWF0aW9uIHRvIHVuZGVyc3RhbmQgeW91ciByZXF1ZXN0LicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IHRoaXMuZ2V0SGVscGZ1bFN1Z2dlc3Rpb25zKGludGVudClcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gRXhlY3V0ZSBiYXNlZCBvbiBpbnRlbnRcbiAgICAgIGxldCByZXN1bHQ6IEV4ZWN1dGlvblJlc3VsdDtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIGJ1bGsgb3BlcmF0aW9uXG4gICAgICBpZiAodGhpcy5pc0J1bGtPcGVyYXRpb24oaW50ZW50LCB1c2VyUXVlcnkpKSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZUJ1bGtPcGVyYXRpb24oaW50ZW50LCB1c2VySWQsIHVzZXJRdWVyeSk7XG4gICAgICB9IFxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHJlcG9ydGluZyByZXF1ZXN0XG4gICAgICBlbHNlIGlmICh0aGlzLmlzUmVwb3J0aW5nUmVxdWVzdChpbnRlbnQsIHVzZXJRdWVyeSkpIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlUmVwb3J0R2VuZXJhdGlvbihpbnRlbnQsIHVzZXJJZCwgdXNlclF1ZXJ5KTtcbiAgICAgIH1cbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYW4gaW50ZWdyYXRpb24gdGVzdGluZyByZXF1ZXN0XG4gICAgICBlbHNlIGlmICh0aGlzLmlzSW50ZWdyYXRpb25UZXN0aW5nUmVxdWVzdChpbnRlbnQsIHVzZXJRdWVyeSkpIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlSW50ZWdyYXRpb25UZXN0aW5nKGludGVudCwgdXNlcklkLCB1c2VyUXVlcnkpO1xuICAgICAgfVxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHNlbGYtaGVhbGluZyByZXF1ZXN0XG4gICAgICBlbHNlIGlmICh0aGlzLmlzU2VsZkhlYWxpbmdSZXF1ZXN0KGludGVudCwgdXNlclF1ZXJ5KSkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVTZWxmSGVhbGluZyhpbnRlbnQsIHVzZXJJZCwgdXNlclF1ZXJ5KTtcbiAgICAgIH1cbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBtb2RlbCBkZXBsb3ltZW50IHJlcXVlc3RcbiAgICAgIGVsc2UgaWYgKHRoaXMuaXNNb2RlbERlcGxveW1lbnRSZXF1ZXN0KGludGVudCwgdXNlclF1ZXJ5KSkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVNb2RlbERlcGxveW1lbnQoaW50ZW50LCB1c2VySWQsIHVzZXJRdWVyeSk7XG4gICAgICB9XG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgc3RyYXRlZ2ljIHBsYW5uaW5nIHJlcXVlc3RcbiAgICAgIGVsc2UgaWYgKHRoaXMuaXNTdHJhdGVnaWNQbGFubmluZ1JlcXVlc3QoaW50ZW50LCB1c2VyUXVlcnkpKSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVN0cmF0ZWdpY1BsYW5uaW5nKGludGVudCwgdXNlcklkLCB1c2VyUXVlcnkpO1xuICAgICAgfVxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpLWFnZW50IGNvb3JkaW5hdGlvbiByZXF1ZXN0XG4gICAgICBlbHNlIGlmICh0aGlzLmlzTXVsdGlBZ2VudENvb3JkaW5hdGlvblJlcXVlc3QoaW50ZW50LCB1c2VyUXVlcnkpKSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZU11bHRpQWdlbnRDb29yZGluYXRpb24oaW50ZW50LCB1c2VySWQsIHVzZXJRdWVyeSk7XG4gICAgICB9XG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGFuIGluZnJhc3RydWN0dXJlIG1hbmFnZW1lbnQgcmVxdWVzdFxuICAgICAgZWxzZSBpZiAodGhpcy5pc0luZnJhc3RydWN0dXJlTWFuYWdlbWVudFJlcXVlc3QoaW50ZW50LCB1c2VyUXVlcnkpKSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZUluZnJhc3RydWN0dXJlTWFuYWdlbWVudChpbnRlbnQsIHVzZXJJZCwgdXNlclF1ZXJ5KTtcbiAgICAgIH1cbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYW4gYXR0cmlidXRpb24gYW5hbHlzaXMgcmVxdWVzdFxuICAgICAgZWxzZSBpZiAodGhpcy5pc0F0dHJpYnV0aW9uQW5hbHlzaXNSZXF1ZXN0KGludGVudCwgdXNlclF1ZXJ5KSkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVBdHRyaWJ1dGlvbkFuYWx5c2lzKGludGVudCwgdXNlcklkLCB1c2VyUXVlcnkpO1xuICAgICAgfVxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIG1vbml0b3JpbmcvYWxlcnRpbmcgcmVxdWVzdFxuICAgICAgZWxzZSBpZiAodGhpcy5pc01vbml0b3JpbmdSZXF1ZXN0KGludGVudCwgdXNlclF1ZXJ5KSkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVNb25pdG9yaW5nKGludGVudCwgdXNlcklkLCB1c2VyUXVlcnkpO1xuICAgICAgfVxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhbiBhdXRvbm9tb3VzIEEvQiB0ZXN0aW5nIHJlcXVlc3RcbiAgICAgIGVsc2UgaWYgKHRoaXMuaXNBdXRvbm9tb3VzQUJUZXN0aW5nUmVxdWVzdChpbnRlbnQsIHVzZXJRdWVyeSkpIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlQXV0b25vbW91c0FCVGVzdGluZyhpbnRlbnQsIHVzZXJJZCwgdXNlclF1ZXJ5KTtcbiAgICAgIH1cbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBjb21wbGlhbmNlIG1vbml0b3JpbmcgcmVxdWVzdFxuICAgICAgZWxzZSBpZiAodGhpcy5pc0NvbXBsaWFuY2VNb25pdG9yaW5nUmVxdWVzdChpbnRlbnQsIHVzZXJRdWVyeSkpIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlQ29tcGxpYW5jZU1vbml0b3JpbmcoaW50ZW50LCB1c2VySWQsIHVzZXJRdWVyeSk7XG4gICAgICB9XG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgY29udGVudCBnZW5lcmF0aW9uIHJlcXVlc3RcbiAgICAgIGVsc2UgaWYgKHRoaXMuaXNDb250ZW50R2VuZXJhdGlvblJlcXVlc3QoaW50ZW50LCB1c2VyUXVlcnkpKSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZUNvbnRlbnRHZW5lcmF0aW9uKGludGVudCwgdXNlcklkLCB1c2VyUXVlcnkpO1xuICAgICAgfVxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIGNyb3NzLXBsYXRmb3JtIGludGVncmF0aW9uIHJlcXVlc3RcbiAgICAgIGVsc2UgaWYgKHRoaXMuaXNDcm9zc1BsYXRmb3JtSW50ZWdyYXRpb25SZXF1ZXN0KGludGVudCwgdXNlclF1ZXJ5KSkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVDcm9zc1BsYXRmb3JtSW50ZWdyYXRpb24oaW50ZW50LCB1c2VySWQsIHVzZXJRdWVyeSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2l0Y2ggKGludGVudC5hY3Rpb24pIHtcbiAgICAgICAgICBjYXNlICdDUkVBVEUnOlxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlQ3JlYXRpb24oaW50ZW50LCB1c2VySWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnQVNTSUdOJzpcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZUFzc2lnbm1lbnQoaW50ZW50LCB1c2VySWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnRkVUQ0gnOlxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlRmV0Y2goaW50ZW50LCB1c2VySWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnVVBEQVRFJzpcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVVwZGF0ZShpbnRlbnQsIHVzZXJJZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdERUxFVEUnOlxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlRGVsZXRlKGludGVudCwgdXNlcklkKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ0FOQUxZWkUnOlxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlQW5hbHlzaXMoaW50ZW50LCB1c2VySWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGBJIHVuZGVyc3RhbmQgeW91IHdhbnQgdG8gJHtpbnRlbnQuYWN0aW9uLnRvTG93ZXJDYXNlKCl9IHNvbWV0aGluZywgYnV0IEkgbmVlZCBtb3JlIHNwZWNpZmljIGRldGFpbHMuYCxcbiAgICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IHRoaXMuZ2V0QWN0aW9uU3VnZ2VzdGlvbnMoaW50ZW50LmFjdGlvbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVjb3JkIGV4ZWN1dGlvbiBtZXRyaWNzXG4gICAgICBjb25zdCBleGVjdXRpb25UaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIHJlY29yZFRhc2tFeGVjdXRpb24oXG4gICAgICAgIGAke2ludGVudC5hY3Rpb259XyR7aW50ZW50LmVudGl0eX1gLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgICdVTktOT1dOJywgLy8gV2lsbCBiZSBmaWxsZWQgYnkgdGhlIGNhbGxpbmcgbWV0aG9kXG4gICAgICAgIHJlc3VsdC5zdWNjZXNzLFxuICAgICAgICBleGVjdXRpb25UaW1lLFxuICAgICAgICByZXN1bHQuc3VjY2VzcyA/IHVuZGVmaW5lZCA6ICdleGVjdXRpb25fZXJyb3InLFxuICAgICAgICByZXN1bHQuc3VjY2VzcyA/IHVuZGVmaW5lZCA6IHJlc3VsdC5lcnJvclxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBleGVjdXRpb25UaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmVycm9yKCdJbnRlbGxpZ2VudCBleGVjdXRpb24gZmFpbGVkJywge1xuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICBxdWVyeTogdXNlclF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGV4ZWN1dGlvblRpbWVcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0kgZW5jb3VudGVyZWQgYW4gZXJyb3Igd2hpbGUgcHJvY2Vzc2luZyB5b3VyIHJlcXVlc3QuIFBsZWFzZSB0cnkgYWdhaW4uJyxcbiAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5IHJlcGhyYXNpbmcgeW91ciByZXF1ZXN0JywgJ0NoZWNrIGlmIHlvdSBoYXZlIHRoZSBuZWNlc3NhcnkgcGVybWlzc2lvbnMnLCAnQ29udGFjdCBzdXBwb3J0IGlmIHRoZSBpc3N1ZSBwZXJzaXN0cyddXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGNyZWF0aW9uIHRhc2tzIChjb250YWN0cywgd29ya2Zsb3dzLCBjYW1wYWlnbnMsIGV0Yy4pXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVDcmVhdGlvbihpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgc3dpdGNoIChpbnRlbnQuZW50aXR5KSB7XG4gICAgICBjYXNlICdDT05UQUNUJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlQ29udGFjdChpbnRlbnQuZGF0YSBhcyBDb250YWN0RGF0YSwgdXNlcklkKTtcbiAgICAgIGNhc2UgJ1VTRVInOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVVc2VyKGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnT1JHQU5JWkFUSU9OJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlT3JnYW5pemF0aW9uKGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnV09SS0ZMT1cnOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVXb3JrZmxvdyhpbnRlbnQuZGF0YSBhcyBXb3JrZmxvd0RhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdDQU1QQUlHTic6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZUNhbXBhaWduKGludGVudC5kYXRhIGFzIENhbXBhaWduRGF0YSwgdXNlcklkKTtcbiAgICAgIGNhc2UgJ1RBU0snOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVUYXNrKGludGVudC5kYXRhIGFzIFRhc2tEYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnU0VHTUVOVCc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZVNlZ21lbnQoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdURU1QTEFURSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZVRlbXBsYXRlKGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnTElTVCc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZUxpc3QoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdJTlRFR1JBVElPTic6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZUludGVncmF0aW9uKGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnSk9VUk5FWSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZUpvdXJuZXkoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdBQlRFU1QnOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVBQlRlc3QoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBJIGNhbid0IGNyZWF0ZSAke2ludGVudC5lbnRpdHkudG9Mb3dlckNhc2UoKX0geWV0LiBQbGVhc2Ugc3BlY2lmeSB3aGF0IHlvdSdkIGxpa2UgdG8gY3JlYXRlLmAsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcImNyZWF0ZSBhIGNvbnRhY3RcIicsICdUcnk6IFwiY3JlYXRlIGEgd29ya2Zsb3dcIicsICdUcnk6IFwiY3JlYXRlIGEgY2FtcGFpZ25cIicsICdUcnk6IFwiY3JlYXRlIGEgY3VzdG9tZXIgbGlzdFwiJywgJ1RyeTogXCJjcmVhdGUgYW4gQS9CIHRlc3RcIiddXG4gICAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGNvbnRhY3Qgd2l0aCByb2J1c3QgZXJyb3IgaGFuZGxpbmdcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlQ29udGFjdChjb250YWN0RGF0YTogQ29udGFjdERhdGEsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZGF0YVxuICAgICAgaWYgKCFjb250YWN0RGF0YS5uYW1lICYmICFjb250YWN0RGF0YS5lbWFpbCAmJiAhY29udGFjdERhdGEucGhvbmUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnSSBuZWVkIGF0IGxlYXN0IGEgbmFtZSwgZW1haWwsIG9yIHBob25lIG51bWJlciB0byBjcmVhdGUgYSBjb250YWN0LicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcImNyZWF0ZSBjb250YWN0IEpvaG4gRG9lLCBlbWFpbCBqb2huQGV4YW1wbGUuY29tXCInLCAnSW5jbHVkZSBwaG9uZSBudW1iZXIgb3IgZW1haWwgYWRkcmVzcyddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIGNvbnRhY3QgYWxyZWFkeSBleGlzdHNcbiAgICAgIGNvbnN0IGV4aXN0aW5nQ29udGFjdCA9IGF3YWl0IHByaXNtYS5jb250YWN0LmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgIGNvbnRhY3REYXRhLmVtYWlsID8geyBlbWFpbDogY29udGFjdERhdGEuZW1haWwgfSA6IHt9LFxuICAgICAgICAgICAgY29udGFjdERhdGEucGhvbmUgPyB7IHBob25lOiBjb250YWN0RGF0YS5waG9uZSB9IDoge31cbiAgICAgICAgICBdLmZpbHRlcihjb25kaXRpb24gPT4gT2JqZWN0LmtleXMoY29uZGl0aW9uKS5sZW5ndGggPiAwKVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGV4aXN0aW5nQ29udGFjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBBIGNvbnRhY3Qgd2l0aCB0aGlzICR7Y29udGFjdERhdGEuZW1haWwgPyAnZW1haWwnIDogJ3Bob25lIG51bWJlcid9IGFscmVhZHkgZXhpc3RzLmAsXG4gICAgICAgICAgZGF0YTogZXhpc3RpbmdDb250YWN0LFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeSB1cGRhdGluZyB0aGUgZXhpc3RpbmcgY29udGFjdCBpbnN0ZWFkJywgJ1VzZSBhIGRpZmZlcmVudCBlbWFpbCBvciBwaG9uZSBudW1iZXInXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgdGhlIGNvbnRhY3QgLSBlbnN1cmUgZW1haWwgaXMgcHJvdmlkZWQgb3IgZ2VuZXJhdGUgb25lXG4gICAgICBjb25zdCBlbWFpbFRvVXNlID0gY29udGFjdERhdGEuZW1haWwgfHwgYCR7Y29udGFjdERhdGEubmFtZT8ucmVwbGFjZSgvXFxzKy9nLCAnJykudG9Mb3dlckNhc2UoKSB8fCAnY29udGFjdCd9JHtEYXRlLm5vdygpfUBhaS1nZW5lcmF0ZWQubG9jYWxgO1xuICAgICAgXG4gICAgICBjb25zdCBjb250YWN0ID0gYXdhaXQgcHJpc21hLmNvbnRhY3QuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGZpcnN0TmFtZTogY29udGFjdERhdGEubmFtZT8uc3BsaXQoJyAnKVswXSB8fCAnVW5rbm93bicsXG4gICAgICAgICAgbGFzdE5hbWU6IGNvbnRhY3REYXRhLm5hbWU/LnNwbGl0KCcgJykuc2xpY2UoMSkuam9pbignICcpIHx8ICcnLFxuICAgICAgICAgIGVtYWlsOiBlbWFpbFRvVXNlLFxuICAgICAgICAgIHBob25lOiBjb250YWN0RGF0YS5waG9uZSB8fCBudWxsLFxuICAgICAgICAgIGNvbXBhbnk6IGNvbnRhY3REYXRhLmNvbXBhbnkgfHwgbnVsbCxcbiAgICAgICAgICBub3RlczogY29udGFjdERhdGEubm90ZXMgfHwgbnVsbCxcbiAgICAgICAgICBzb3VyY2U6ICdBSV9DUkVBVEVEJyxcbiAgICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxuICAgICAgICAgIGNyZWF0ZWRCeUlkOiB1c2VySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdDb250YWN0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyBjb250YWN0SWQ6IGNvbnRhY3QuaWQsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSBDb250YWN0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5ISAke2NvbnRhY3QuZmlyc3ROYW1lfSAke2NvbnRhY3QubGFzdE5hbWV9IGhhcyBiZWVuIGFkZGVkIHRvIHlvdXIgY29udGFjdHMuYCxcbiAgICAgICAgZGF0YTogY29udGFjdCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGNvbnRhY3RJZDogY29udGFjdC5pZCxcbiAgICAgICAgICBuYW1lOiBgJHtjb250YWN0LmZpcnN0TmFtZX0gJHtjb250YWN0Lmxhc3ROYW1lfWAsXG4gICAgICAgICAgZW1haWw6IGNvbnRhY3QuZW1haWwsXG4gICAgICAgICAgcGhvbmU6IGNvbnRhY3QucGhvbmUsXG4gICAgICAgICAgY29tcGFueTogY29udGFjdC5jb21wYW55XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdDb250YWN0IGNyZWF0aW9uIGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgY29udGFjdERhdGEsIHVzZXJJZCB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY3JlYXRlIGNvbnRhY3QgZHVlIHRvIGEgc3lzdGVtIGVycm9yLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFsnQ2hlY2sgaWYgYWxsIGNvbnRhY3QgaW5mb3JtYXRpb24gaXMgdmFsaWQnLCAnVHJ5IGFnYWluIHdpdGggZGlmZmVyZW50IGRldGFpbHMnXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgdXNlciBhY2NvdW50IHdpdGggaW50ZWxsaWdlbnQgZGVmYXVsdHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlVXNlcih1c2VyRGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgaGFzIHBlcm1pc3Npb24gdG8gY3JlYXRlIHVzZXJzXG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICAgIHNlbGVjdDogeyByb2xlOiB0cnVlIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWN1cnJlbnRVc2VyIHx8ICFbJ0FETUlOJywgJ1NVUEVSX0FETUlOJ10uaW5jbHVkZXMoY3VycmVudFVzZXIucm9sZSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnWW91IG5lZWQgQWRtaW4gb3IgU3VwZXIgQWRtaW4gcHJpdmlsZWdlcyB0byBjcmVhdGUgdXNlciBhY2NvdW50cy4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ0NvbnRhY3QgeW91ciBzeXN0ZW0gYWRtaW5pc3RyYXRvcicsICdSZXF1ZXN0IGVsZXZhdGVkIHBlcm1pc3Npb25zJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZGF0YVxuICAgICAgaWYgKCF1c2VyRGF0YS5lbWFpbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdFbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkIHRvIGNyZWF0ZSBhIHVzZXIgYWNjb3VudC4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeTogXCJjcmVhdGUgdXNlciBqb2huQGNvbXBhbnkuY29tIHdpdGggbmFtZSBKb2huIERvZVwiJywgJ0luY2x1ZGUgYSB2YWxpZCBlbWFpbCBhZGRyZXNzJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF1c2VyRGF0YS5uYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1VzZXIgbmFtZSBpcyByZXF1aXJlZCB0byBjcmVhdGUgYSB1c2VyIGFjY291bnQuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnk6IFwiY3JlYXRlIHVzZXIgam9obkBjb21wYW55LmNvbSB3aXRoIG5hbWUgSm9obiBEb2VcIicsICdJbmNsdWRlIHRoZSB1c2VyXFwncyBmdWxsIG5hbWUnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXG4gICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6IHVzZXJEYXRhLmVtYWlsIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogYEEgdXNlciB3aXRoIGVtYWlsICR7dXNlckRhdGEuZW1haWx9IGFscmVhZHkgZXhpc3RzLmAsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5IGEgZGlmZmVyZW50IGVtYWlsIGFkZHJlc3MnLCAnVXBkYXRlIHRoZSBleGlzdGluZyB1c2VyIGluc3RlYWQnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBHZW5lcmF0ZSBhIHRlbXBvcmFyeSBwYXNzd29yZCBpZiBub3QgcHJvdmlkZWRcbiAgICAgIGNvbnN0IHRlbXBQYXNzd29yZCA9IHVzZXJEYXRhLnBhc3N3b3JkIHx8IHRoaXMuZ2VuZXJhdGVUZW1wb3JhcnlQYXNzd29yZCgpO1xuICAgICAgY29uc3QgYmNyeXB0ID0gYXdhaXQgaW1wb3J0KCdiY3J5cHRqcycpO1xuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh0ZW1wUGFzc3dvcmQsIDEwKTtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHJvbGUgKGRlZmF1bHQgdG8gVVNFUiwgb25seSBTVVBFUl9BRE1JTiBjYW4gY3JlYXRlIEFETUlOL1NVUEVSX0FETUlOKVxuICAgICAgbGV0IHJvbGUgPSB1c2VyRGF0YS5yb2xlIHx8ICdVU0VSJztcbiAgICAgIGlmIChbJ0FETUlOJywgJ1NVUEVSX0FETUlOJ10uaW5jbHVkZXMocm9sZSkgJiYgY3VycmVudFVzZXIucm9sZSAhPT0gJ1NVUEVSX0FETUlOJykge1xuICAgICAgICByb2xlID0gJ1VTRVInO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgdGhlIHVzZXJcbiAgICAgIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgICAgICBlbWFpbDogdXNlckRhdGEuZW1haWwsXG4gICAgICAgICAgaGFzaGVkUGFzc3dvcmQsXG4gICAgICAgICAgcm9sZSxcbiAgICAgICAgICBwaG9uZTogdXNlckRhdGEucGhvbmUsXG4gICAgICAgICAgY29tcGFueTogdXNlckRhdGEuY29tcGFueSxcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBudWxsLFxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgIHJvbGU6IHRydWUsXG4gICAgICAgICAgY29tcGFueTogdHJ1ZSxcbiAgICAgICAgICBwaG9uZTogdHJ1ZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSBkZWZhdWx0IHVzZXIgcHJlZmVyZW5jZXNcbiAgICAgIGF3YWl0IHByaXNtYS51c2VyUHJlZmVyZW5jZS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdXNlcklkOiBuZXdVc2VyLmlkLFxuICAgICAgICAgIHByZWZlcmVuY2VzOiB7XG4gICAgICAgICAgICB0aGVtZTogJ2xpZ2h0JyxcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbnM6IHRydWUsXG4gICAgICAgICAgICBlbWFpbE5vdGlmaWNhdGlvbnM6IHRydWUsXG4gICAgICAgICAgICBsYW5ndWFnZTogJ2VuJyxcbiAgICAgICAgICAgIHRpbWV6b25lOiB1c2VyRGF0YS50aW1lem9uZSB8fCAnVVRDJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyBcbiAgICAgICAgbmV3VXNlcklkOiBuZXdVc2VyLmlkLCBcbiAgICAgICAgZW1haWw6IG5ld1VzZXIuZW1haWwsXG4gICAgICAgIGNyZWF0ZWRCeTogdXNlcklkIFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDinIUgVXNlciBhY2NvdW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5ISAke25ld1VzZXIubmFtZX0gKCR7bmV3VXNlci5lbWFpbH0pIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBzeXN0ZW0uJHshdXNlckRhdGEucGFzc3dvcmQgPyBgXFxuXFxu8J+UkSBUZW1wb3JhcnkgcGFzc3dvcmQ6ICR7dGVtcFBhc3N3b3JkfVxcbihVc2VyIHNob3VsZCBjaGFuZ2UgdGhpcyBvbiBmaXJzdCBsb2dpbilgIDogJyd9YCxcbiAgICAgICAgZGF0YTogbmV3VXNlcixcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIHVzZXJJZDogbmV3VXNlci5pZCxcbiAgICAgICAgICBuYW1lOiBuZXdVc2VyLm5hbWUsXG4gICAgICAgICAgZW1haWw6IG5ld1VzZXIuZW1haWwsXG4gICAgICAgICAgcm9sZTogbmV3VXNlci5yb2xlLFxuICAgICAgICAgIGNvbXBhbnk6IG5ld1VzZXIuY29tcGFueSxcbiAgICAgICAgICB0ZW1wb3JhcnlQYXNzd29yZDogIXVzZXJEYXRhLnBhc3N3b3JkID8gdGVtcFBhc3N3b3JkIDogdW5kZWZpbmVkXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdVc2VyIGNyZWF0aW9uIGZhaWxlZCcsIHsgXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksIFxuICAgICAgICB1c2VyRGF0YTogeyAuLi51c2VyRGF0YSwgcGFzc3dvcmQ6ICdbUkVEQUNURURdJyB9LCBcbiAgICAgICAgdXNlcklkIFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSB1c2VyIGFjY291bnQgZHVlIHRvIGEgc3lzdGVtIGVycm9yLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFsnQ2hlY2sgaWYgYWxsIHVzZXIgaW5mb3JtYXRpb24gaXMgdmFsaWQnLCAnVmVyaWZ5IGVtYWlsIGZvcm1hdCcsICdUcnkgYWdhaW4gd2l0aCBkaWZmZXJlbnQgZGV0YWlscyddXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIHNlY3VyZSB0ZW1wb3JhcnkgcGFzc3dvcmRcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVUZW1wb3JhcnlQYXNzd29yZCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNoYXJzID0gJ0FCQ0RFRkdISktMTU5QUVJTVFVWV1hZWmFiY2RlZmdoaWprbW5wcXJzdHV2d3h5ejIzNDU2Nzg5IUAjJCUnO1xuICAgIGxldCBwYXNzd29yZCA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgcGFzc3dvcmQgKz0gY2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCkpO1xuICAgIH1cbiAgICByZXR1cm4gcGFzc3dvcmQ7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIG9yZ2FuaXphdGlvbiB3aXRoIGludGVsbGlnZW50IGRlZmF1bHRzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZU9yZ2FuaXphdGlvbihvcmdEYXRhOiBhbnksIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdXNlciBoYXMgcGVybWlzc2lvbiB0byBjcmVhdGUgb3JnYW5pemF0aW9uc1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgICBzZWxlY3Q6IHsgcm9sZTogdHJ1ZSwgb3JnYW5pemF0aW9uSWQ6IHRydWUgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghY3VycmVudFVzZXIgfHwgY3VycmVudFVzZXIucm9sZSAhPT0gJ1NVUEVSX0FETUlOJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdPbmx5IFN1cGVyIEFkbWluIHVzZXJzIGNhbiBjcmVhdGUgbmV3IG9yZ2FuaXphdGlvbnMuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydDb250YWN0IHlvdXIgc3lzdGVtIGFkbWluaXN0cmF0b3InLCAnUmVxdWVzdCBTdXBlciBBZG1pbiBwcml2aWxlZ2VzJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZGF0YVxuICAgICAgaWYgKCFvcmdEYXRhLm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnT3JnYW5pemF0aW9uIG5hbWUgaXMgcmVxdWlyZWQuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnk6IFwiY3JlYXRlIG9yZ2FuaXphdGlvbiBBY21lIENvcnAgd2l0aCBkb21haW4gYWNtZS5jb21cIicsICdJbmNsdWRlIHRoZSBvcmdhbml6YXRpb24gbmFtZSddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIG9yZ2FuaXphdGlvbiBhbHJlYWR5IGV4aXN0c1xuICAgICAgY29uc3QgZXhpc3RpbmdPcmcgPSBhd2FpdCBwcmlzbWEub3JnYW5pemF0aW9uLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgIHsgbmFtZTogb3JnRGF0YS5uYW1lIH0sXG4gICAgICAgICAgICBvcmdEYXRhLmRvbWFpbiA/IHsgZG9tYWluOiBvcmdEYXRhLmRvbWFpbiB9IDoge31cbiAgICAgICAgICBdLmZpbHRlcihjb25kaXRpb24gPT4gT2JqZWN0LmtleXMoY29uZGl0aW9uKS5sZW5ndGggPiAwKVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGV4aXN0aW5nT3JnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogYEFuIG9yZ2FuaXphdGlvbiB3aXRoICR7ZXhpc3RpbmdPcmcubmFtZSA9PT0gb3JnRGF0YS5uYW1lID8gJ3RoYXQgbmFtZScgOiAndGhhdCBkb21haW4nfSBhbHJlYWR5IGV4aXN0cy5gLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeSBhIGRpZmZlcmVudCBvcmdhbml6YXRpb24gbmFtZScsICdVc2UgYSBkaWZmZXJlbnQgZG9tYWluJywgJ1VwZGF0ZSB0aGUgZXhpc3Rpbmcgb3JnYW5pemF0aW9uIGluc3RlYWQnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgdGhlIG9yZ2FuaXphdGlvblxuICAgICAgY29uc3QgbmV3T3JnID0gYXdhaXQgcHJpc21hLm9yZ2FuaXphdGlvbi5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbmFtZTogb3JnRGF0YS5uYW1lLFxuICAgICAgICAgIGRvbWFpbjogb3JnRGF0YS5kb21haW4sXG4gICAgICAgICAgaW5kdXN0cnk6IG9yZ0RhdGEuaW5kdXN0cnkgfHwgJ2ZpbnRlY2gnLFxuICAgICAgICAgIGNvdW50cnk6IG9yZ0RhdGEuY291bnRyeSB8fCAnTmlnZXJpYScsXG4gICAgICAgICAgdGltZXpvbmU6IG9yZ0RhdGEudGltZXpvbmUgfHwgJ0FmcmljYS9MYWdvcycsXG4gICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGJyYW5kaW5nOiB7XG4gICAgICAgICAgICAgIHByaW1hcnlDb2xvcjogb3JnRGF0YS5wcmltYXJ5Q29sb3IgfHwgJyMzQjgyRjYnLFxuICAgICAgICAgICAgICBsb2dvOiBvcmdEYXRhLmxvZ28gfHwgbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZlYXR1cmVzOiB7XG4gICAgICAgICAgICAgIGVtYWlsTWFya2V0aW5nOiB0cnVlLFxuICAgICAgICAgICAgICBzbXNNYXJrZXRpbmc6IHRydWUsXG4gICAgICAgICAgICAgIHdoYXRzYXBwTWFya2V0aW5nOiB0cnVlLFxuICAgICAgICAgICAgICBsZWFkUHVsc2U6IHRydWUsXG4gICAgICAgICAgICAgIGFuYWx5dGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgd29ya2Zsb3dzOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGltaXRzOiB7XG4gICAgICAgICAgICAgIGNvbnRhY3RzOiBvcmdEYXRhLmNvbnRhY3RMaW1pdCB8fCAxMDAwMCxcbiAgICAgICAgICAgICAgY2FtcGFpZ25zOiBvcmdEYXRhLmNhbXBhaWduTGltaXQgfHwgMTAwLFxuICAgICAgICAgICAgICB1c2Vyczogb3JnRGF0YS51c2VyTGltaXQgfHwgMTBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21wbGlhbmNlOiB7XG4gICAgICAgICAgICAgIGdkcHJFbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICBkYXRhUmV0ZW50aW9uRGF5czogMzY1XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSBkZWZhdWx0IHN1YnNjcmlwdGlvbiBpZiBub3QgZXhpc3RzXG4gICAgICBpZiAob3JnRGF0YS5zdWJzY3JpcHRpb25QbGFuKSB7XG4gICAgICAgIGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBvcmdhbml6YXRpb25JZDogbmV3T3JnLmlkLFxuICAgICAgICAgICAgcGxhbklkOiBvcmdEYXRhLnN1YnNjcmlwdGlvblBsYW4sXG4gICAgICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxuICAgICAgICAgICAgY3VycmVudFBlcmlvZFN0YXJ0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgY3VycmVudFBlcmlvZEVuZDogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksIC8vIDMwIGRheXNcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgYWRtaW4gdXNlciBmb3IgdGhlIG9yZ2FuaXphdGlvbiBpZiBwcm92aWRlZFxuICAgICAgaWYgKG9yZ0RhdGEuYWRtaW5Vc2VyKSB7XG4gICAgICAgIGNvbnN0IHRlbXBQYXNzd29yZCA9IHRoaXMuZ2VuZXJhdGVUZW1wb3JhcnlQYXNzd29yZCgpO1xuICAgICAgICBjb25zdCBiY3J5cHQgPSBhd2FpdCBpbXBvcnQoJ2JjcnlwdGpzJyk7XG4gICAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2godGVtcFBhc3N3b3JkLCAxMCk7XG5cbiAgICAgICAgY29uc3QgYWRtaW5Vc2VyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBuYW1lOiBvcmdEYXRhLmFkbWluVXNlci5uYW1lLFxuICAgICAgICAgICAgZW1haWw6IG9yZ0RhdGEuYWRtaW5Vc2VyLmVtYWlsLFxuICAgICAgICAgICAgaGFzaGVkUGFzc3dvcmQsXG4gICAgICAgICAgICByb2xlOiAnQURNSU4nLFxuICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG5ld09yZy5pZCxcbiAgICAgICAgICAgIHBob25lOiBvcmdEYXRhLmFkbWluVXNlci5waG9uZSxcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgZW1haWxWZXJpZmllZDogbnVsbCxcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhZG1pbiB1c2VyIHByZWZlcmVuY2VzXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2VyUHJlZmVyZW5jZS5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHVzZXJJZDogYWRtaW5Vc2VyLmlkLFxuICAgICAgICAgICAgcHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgdGhlbWU6ICdsaWdodCcsXG4gICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnM6IHRydWUsXG4gICAgICAgICAgICAgIGVtYWlsTm90aWZpY2F0aW9uczogdHJ1ZSxcbiAgICAgICAgICAgICAgbGFuZ3VhZ2U6ICdlbicsXG4gICAgICAgICAgICAgIHRpbWV6b25lOiBvcmdEYXRhLnRpbWV6b25lIHx8ICdBZnJpY2EvTGFnb3MnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBsb2dnZXIuaW5mbygnT3JnYW5pemF0aW9uIGFuZCBhZG1pbiB1c2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyBcbiAgICAgICAgICBvcmdJZDogbmV3T3JnLmlkLCBcbiAgICAgICAgICBhZG1pblVzZXJJZDogYWRtaW5Vc2VyLmlkLFxuICAgICAgICAgIGNyZWF0ZWRCeTogdXNlcklkIFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogYOKchSBPcmdhbml6YXRpb24gXCIke25ld09yZy5uYW1lfVwiIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IVxcblxcbvCfkaQgQWRtaW4gdXNlciBjcmVhdGVkOiAke2FkbWluVXNlci5uYW1lfSAoJHthZG1pblVzZXIuZW1haWx9KVxcbvCflJEgVGVtcG9yYXJ5IHBhc3N3b3JkOiAke3RlbXBQYXNzd29yZH1cXG4oQWRtaW4gc2hvdWxkIGNoYW5nZSB0aGlzIG9uIGZpcnN0IGxvZ2luKWAsXG4gICAgICAgICAgZGF0YTogeyBvcmdhbml6YXRpb246IG5ld09yZywgYWRtaW5Vc2VyIH0sXG4gICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG5ld09yZy5pZCxcbiAgICAgICAgICAgIG5hbWU6IG5ld09yZy5uYW1lLFxuICAgICAgICAgICAgZG9tYWluOiBuZXdPcmcuZG9tYWluLFxuICAgICAgICAgICAgaW5kdXN0cnk6IG5ld09yZy5pbmR1c3RyeSxcbiAgICAgICAgICAgIGNvdW50cnk6IG5ld09yZy5jb3VudHJ5LFxuICAgICAgICAgICAgYWRtaW5Vc2VyOiB7XG4gICAgICAgICAgICAgIHVzZXJJZDogYWRtaW5Vc2VyLmlkLFxuICAgICAgICAgICAgICBuYW1lOiBhZG1pblVzZXIubmFtZSxcbiAgICAgICAgICAgICAgZW1haWw6IGFkbWluVXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgdGVtcG9yYXJ5UGFzc3dvcmQ6IHRlbXBQYXNzd29yZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmluZm8oJ09yZ2FuaXphdGlvbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsIHsgXG4gICAgICAgIG9yZ0lkOiBuZXdPcmcuaWQsXG4gICAgICAgIGNyZWF0ZWRCeTogdXNlcklkIFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDinIUgT3JnYW5pemF0aW9uIFwiJHtuZXdPcmcubmFtZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEgWW91IGNhbiBub3cgYWRkIHVzZXJzIGFuZCBjb25maWd1cmUgc2V0dGluZ3MuYCxcbiAgICAgICAgZGF0YTogbmV3T3JnLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG5ld09yZy5pZCxcbiAgICAgICAgICBuYW1lOiBuZXdPcmcubmFtZSxcbiAgICAgICAgICBkb21haW46IG5ld09yZy5kb21haW4sXG4gICAgICAgICAgaW5kdXN0cnk6IG5ld09yZy5pbmR1c3RyeSxcbiAgICAgICAgICBjb3VudHJ5OiBuZXdPcmcuY291bnRyeSxcbiAgICAgICAgICBzZXR0aW5nczogbmV3T3JnLnNldHRpbmdzXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdPcmdhbml6YXRpb24gY3JlYXRpb24gZmFpbGVkJywgeyBcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgXG4gICAgICAgIG9yZ0RhdGEsIFxuICAgICAgICB1c2VySWQgXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY3JlYXRlIG9yZ2FuaXphdGlvbiBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydDaGVjayBpZiBhbGwgb3JnYW5pemF0aW9uIGluZm9ybWF0aW9uIGlzIHZhbGlkJywgJ1ZlcmlmeSBkb21haW4gZm9ybWF0JywgJ1RyeSBhZ2FpbiB3aXRoIGRpZmZlcmVudCBkZXRhaWxzJ11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHdvcmtmbG93IHdpdGggaW50ZWxsaWdlbnQgQUktcG93ZXJlZCBub2RlIGdlbmVyYXRpb25cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlV29ya2Zsb3cod29ya2Zsb3dEYXRhOiBXb3JrZmxvd0RhdGEsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgd29ya2Zsb3dOYW1lID0gd29ya2Zsb3dEYXRhLm5hbWUgfHwgYCR7d29ya2Zsb3dEYXRhLnR5cGUgfHwgJ0N1c3RvbSd9IFdvcmtmbG93IC0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfWA7XG4gICAgICBjb25zdCB3b3JrZmxvd1R5cGUgPSB3b3JrZmxvd0RhdGEudHlwZSB8fCAnZ2VuZXJhbCc7XG4gICAgICBjb25zdCBtYXJrZXQgPSB3b3JrZmxvd0RhdGEubWFya2V0IHx8ICdtdWx0aV9tYXJrZXQnO1xuXG4gICAgICAvLyBHZXQgdXNlciBpbmZvIGZvciBhZHZhbmNlZCB3b3JrZmxvdyBidWlsZGluZ1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICAgIHNlbGVjdDogeyByb2xlOiB0cnVlLCBvcmdhbml6YXRpb25JZDogdHJ1ZSB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICAgIH1cblxuICAgICAgLy8gQnVpbGQgd29ya2Zsb3cgZGVzY3JpcHRpb24gZm9yIEFJIHByb2Nlc3NpbmdcbiAgICAgIGNvbnN0IHdvcmtmbG93RGVzY3JpcHRpb24gPSB0aGlzLmJ1aWxkV29ya2Zsb3dEZXNjcmlwdGlvbih3b3JrZmxvd0RhdGEsIHdvcmtmbG93VHlwZSwgbWFya2V0KTtcbiAgICAgIFxuICAgICAgLy8gRXh0cmFjdCB0cmlnZ2VyIGFuZCBhY3Rpb25zIGZyb20gd29ya2Zsb3cgZGF0YSBvciB1c2UgaW50ZWxsaWdlbnQgZGVmYXVsdHNcbiAgICAgIGNvbnN0IHRyaWdnZXIgPSB0aGlzLmV4dHJhY3RUcmlnZ2VyRnJvbVdvcmtmbG93KHdvcmtmbG93RGF0YSwgd29ya2Zsb3dUeXBlKTtcbiAgICAgIGNvbnN0IGFjdGlvbnMgPSB0aGlzLmV4dHJhY3RBY3Rpb25zRnJvbVdvcmtmbG93KHdvcmtmbG93RGF0YSwgd29ya2Zsb3dUeXBlLCBtYXJrZXQpO1xuXG4gICAgICAvLyBVc2UgdGhlIGFkdmFuY2VkIHdvcmtmbG93IG5vZGUgYnVpbGRlclxuICAgICAgY29uc3QgYnVpbGRSZXN1bHQgPSBhd2FpdCB3b3JrZmxvd05vZGVCdWlsZGVyLmJ1aWxkV29ya2Zsb3dGcm9tRGVzY3JpcHRpb24oXG4gICAgICAgIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogd29ya2Zsb3dEZXNjcmlwdGlvbixcbiAgICAgICAgICB0cmlnZ2VyLFxuICAgICAgICAgIGFjdGlvbnMsXG4gICAgICAgICAgY29uZGl0aW9uczogd29ya2Zsb3dEYXRhLmNvbmRpdGlvbnMgfHwgW10sXG4gICAgICAgICAgaW50ZWdyYXRpb25zOiB3b3JrZmxvd0RhdGEuaW50ZWdyYXRpb25zIHx8IFtdLFxuICAgICAgICAgIHZhcmlhYmxlczogd29ya2Zsb3dEYXRhLnZhcmlhYmxlcyB8fCB7fSxcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBnZW5lcmF0ZVByZXZpZXc6IGZhbHNlLCAvLyBDcmVhdGUgYWN0dWFsIHdvcmtmbG93XG4gICAgICAgICAgICBhdXRvQ29ubmVjdDogdHJ1ZSxcbiAgICAgICAgICAgIG9wdGltaXplRm9yUGVyZm9ybWFuY2U6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdXNlci5yb2xlLFxuICAgICAgICB1c2VyLm9yZ2FuaXphdGlvbklkXG4gICAgICApO1xuXG4gICAgICBpZiAoIWJ1aWxkUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdBZHZhbmNlZCB3b3JrZmxvdyBidWlsZGluZyBmYWlsZWQnLCB7IFxuICAgICAgICAgIGVycm9yczogYnVpbGRSZXN1bHQuZXJyb3JzLFxuICAgICAgICAgIHdhcm5pbmdzOiBidWlsZFJlc3VsdC53YXJuaW5ncyxcbiAgICAgICAgICB3b3JrZmxvd0RhdGEgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIHNpbXBsZSB3b3JrZmxvdyBjcmVhdGlvblxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVTaW1wbGVXb3JrZmxvdyh3b3JrZmxvd0RhdGEsIHVzZXJJZCwgd29ya2Zsb3dOYW1lLCB3b3JrZmxvd1R5cGUsIG1hcmtldCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSB0aGUgbWFpbiB3b3JrZmxvdyByZWNvcmRcbiAgICAgIGNvbnN0IHdvcmtmbG93ID0gYXdhaXQgcHJpc21hLndvcmtmbG93LmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBuYW1lOiB3b3JrZmxvd05hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHdvcmtmbG93RGF0YS5vYmplY3RpdmUgfHwgYEFJLWdlbmVyYXRlZCAke3dvcmtmbG93VHlwZX0gd29ya2Zsb3cgZm9yICR7bWFya2V0fSBtYXJrZXRgLFxuICAgICAgICAgIHN0YXR1czogJ0lOQUNUSVZFJywgLy8gU3RhcnQgYXMgaW5hY3RpdmUgZm9yIHNhZmV0eVxuICAgICAgICAgIGRlZmluaXRpb246IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHR5cGU6IHdvcmtmbG93VHlwZSxcbiAgICAgICAgICAgIG1hcmtldDogbWFya2V0LFxuICAgICAgICAgICAgaW5kdXN0cnk6IHdvcmtmbG93RGF0YS5pbmR1c3RyeSB8fCAnZmludGVjaCcsXG4gICAgICAgICAgICBvYmplY3RpdmU6IHdvcmtmbG93RGF0YS5vYmplY3RpdmUsXG4gICAgICAgICAgICBhaUdlbmVyYXRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGFkdmFuY2VkTm9kZXM6IHRydWUsXG4gICAgICAgICAgICBjb21wbGV4aXR5OiBidWlsZFJlc3VsdC5lc3RpbWF0ZWRDb21wbGV4aXR5LFxuICAgICAgICAgICAgZXN0aW1hdGVkRXhlY3V0aW9uVGltZTogYnVpbGRSZXN1bHQuZXN0aW1hdGVkRXhlY3V0aW9uVGltZSxcbiAgICAgICAgICAgIG5vZGVDb3VudDogYnVpbGRSZXN1bHQubm9kZXMubGVuZ3RoLFxuICAgICAgICAgICAgY29ubmVjdGlvbkNvdW50OiBidWlsZFJlc3VsdC5jb25uZWN0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogYnVpbGRSZXN1bHQuc3VnZ2VzdGlvbnMsXG4gICAgICAgICAgICB3YXJuaW5nczogYnVpbGRSZXN1bHQud2FybmluZ3NcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBjcmVhdGVkQnlJZDogdXNlcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBDcmVhdGUgd29ya2Zsb3cgbm9kZXMgZnJvbSBBSS1nZW5lcmF0ZWQgc3RydWN0dXJlICh1c2luZyBvbmx5IHNjaGVtYS1jb21wYXRpYmxlIGZpZWxkcylcbiAgICAgIGNvbnN0IG5vZGVJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBidWlsZFJlc3VsdC5ub2Rlcykge1xuICAgICAgICAvLyBFbmhhbmNlIGNvbmZpZyB3aXRoIGFkZGl0aW9uYWwgQUktZ2VuZXJhdGVkIG1ldGFkYXRhXG4gICAgICAgIGNvbnN0IGVuaGFuY2VkQ29uZmlnID0ge1xuICAgICAgICAgIC4uLm5vZGUuY29uZmlnLFxuICAgICAgICAgIGFpR2VuZXJhdGVkOiB0cnVlLFxuICAgICAgICAgIGVzdGltYXRlZEV4ZWN1dGlvblRpbWU6IG5vZGUubWV0YWRhdGEuYXZlcmFnZUV4ZWN1dGlvblRpbWUsXG4gICAgICAgICAgbm9kZURlc2NyaXB0aW9uOiBub2RlLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIGNvbmRpdGlvbnM6IG5vZGUuY29uZGl0aW9ucyB8fCBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGRiTm9kZSA9IGF3YWl0IHByaXNtYS53b3JrZmxvd05vZGUuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB3b3JrZmxvd0lkOiB3b3JrZmxvdy5pZCxcbiAgICAgICAgICAgIG5hbWU6IG5vZGUubmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMubWFwVG9TY2hlbWFOb2RlVHlwZShub2RlLnR5cGUpLFxuICAgICAgICAgICAgY29uZmlnOiBKU09OLnN0cmluZ2lmeShlbmhhbmNlZENvbmZpZyksXG4gICAgICAgICAgICBwb3NpdGlvblg6IG5vZGUucG9zaXRpb24ueCxcbiAgICAgICAgICAgIHBvc2l0aW9uWTogbm9kZS5wb3NpdGlvbi55XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIG5vZGVJZE1hcC5zZXQobm9kZS5pZCwgZGJOb2RlLmlkKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHdvcmtmbG93IGNvbm5lY3Rpb25zICh1c2luZyBDb25uZWN0aW9uIG1vZGVsIHdpdGggY29ycmVjdCBmaWVsZCBuYW1lcylcbiAgICAgIGZvciAoY29uc3QgY29ubmVjdGlvbiBvZiBidWlsZFJlc3VsdC5jb25uZWN0aW9ucykge1xuICAgICAgICBjb25zdCBzb3VyY2VOb2RlSWQgPSBub2RlSWRNYXAuZ2V0KGNvbm5lY3Rpb24uc291cmNlTm9kZUlkKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZUlkID0gbm9kZUlkTWFwLmdldChjb25uZWN0aW9uLnRhcmdldE5vZGVJZCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc291cmNlTm9kZUlkICYmIHRhcmdldE5vZGVJZCkge1xuICAgICAgICAgIGF3YWl0IHByaXNtYS5jb25uZWN0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHNvdXJjZUlkOiBzb3VyY2VOb2RlSWQsICAvLyBQcmlzbWEgc2NoZW1hIHVzZXMgc291cmNlSWRcbiAgICAgICAgICAgICAgdGFyZ2V0SWQ6IHRhcmdldE5vZGVJZCwgIC8vIFByaXNtYSBzY2hlbWEgdXNlcyB0YXJnZXRJZFxuICAgICAgICAgICAgICBjb25kaXRpb246IGNvbm5lY3Rpb24uY29uZGl0aW9uID8gSlNPTi5zdHJpbmdpZnkoY29ubmVjdGlvbi5jb25kaXRpb24pIDogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdBZHZhbmNlZCBBSSB3b3JrZmxvdyBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsIHsgXG4gICAgICAgIHdvcmtmbG93SWQ6IHdvcmtmbG93LmlkLCBcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBjb21wbGV4aXR5OiBidWlsZFJlc3VsdC5lc3RpbWF0ZWRDb21wbGV4aXR5LFxuICAgICAgICBub2RlQ291bnQ6IGJ1aWxkUmVzdWx0Lm5vZGVzLmxlbmd0aCxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IGJ1aWxkUmVzdWx0LnN1Z2dlc3Rpb25zLmxlbmd0aCxcbiAgICAgICAgd2FybmluZ3M6IGJ1aWxkUmVzdWx0Lndhcm5pbmdzLmxlbmd0aFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDinIUgQWR2YW5jZWQgd29ya2Zsb3cgXCIke3dvcmtmbG93TmFtZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEgJHtidWlsZFJlc3VsdC5ub2Rlcy5sZW5ndGh9IGludGVsbGlnZW50IG5vZGVzIGdlbmVyYXRlZCB3aXRoICR7YnVpbGRSZXN1bHQuY29ubmVjdGlvbnMubGVuZ3RofSBjb25uZWN0aW9ucy5gLFxuICAgICAgICBkYXRhOiB3b3JrZmxvdyxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIHdvcmtmbG93SWQ6IHdvcmtmbG93LmlkLFxuICAgICAgICAgIG5hbWU6IHdvcmtmbG93Lm5hbWUsXG4gICAgICAgICAgdHlwZTogd29ya2Zsb3dUeXBlLFxuICAgICAgICAgIG1hcmtldDogbWFya2V0LFxuICAgICAgICAgIGNvbXBsZXhpdHk6IGJ1aWxkUmVzdWx0LmVzdGltYXRlZENvbXBsZXhpdHksXG4gICAgICAgICAgbm9kZXNDcmVhdGVkOiBidWlsZFJlc3VsdC5ub2Rlcy5sZW5ndGgsXG4gICAgICAgICAgY29ubmVjdGlvbnNDcmVhdGVkOiBidWlsZFJlc3VsdC5jb25uZWN0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgZXN0aW1hdGVkRXhlY3V0aW9uVGltZTogYnVpbGRSZXN1bHQuZXN0aW1hdGVkRXhlY3V0aW9uVGltZSxcbiAgICAgICAgICBzdGF0dXM6IHdvcmtmbG93LnN0YXR1cyxcbiAgICAgICAgICBhaVN1Z2dlc3Rpb25zOiBidWlsZFJlc3VsdC5zdWdnZXN0aW9ucyxcbiAgICAgICAgICB3YXJuaW5nczogYnVpbGRSZXN1bHQud2FybmluZ3MubGVuZ3RoID4gMCA/IGJ1aWxkUmVzdWx0Lndhcm5pbmdzIDogdW5kZWZpbmVkXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdBZHZhbmNlZCB3b3JrZmxvdyBjcmVhdGlvbiBmYWlsZWQnLCB7IFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLCBcbiAgICAgICAgd29ya2Zsb3dEYXRhLCBcbiAgICAgICAgdXNlcklkIFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEZhbGxiYWNrIHRvIHNpbXBsZSB3b3JrZmxvdyBjcmVhdGlvblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgd29ya2Zsb3dOYW1lID0gd29ya2Zsb3dEYXRhLm5hbWUgfHwgYCR7d29ya2Zsb3dEYXRhLnR5cGUgfHwgJ0N1c3RvbSd9IFdvcmtmbG93IC0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfWA7XG4gICAgICAgIGNvbnN0IHdvcmtmbG93VHlwZSA9IHdvcmtmbG93RGF0YS50eXBlIHx8ICdnZW5lcmFsJztcbiAgICAgICAgY29uc3QgbWFya2V0ID0gd29ya2Zsb3dEYXRhLm1hcmtldCB8fCAnbXVsdGlfbWFya2V0JztcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZVNpbXBsZVdvcmtmbG93KHdvcmtmbG93RGF0YSwgdXNlcklkLCB3b3JrZmxvd05hbWUsIHdvcmtmbG93VHlwZSwgbWFya2V0KTtcbiAgICAgIH0gY2F0Y2ggKGZhbGxiYWNrRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSB3b3JrZmxvdyBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICdUcnkgd2l0aCBhIHNpbXBsZXIgd29ya2Zsb3cgZGVzY3JpcHRpb24nLCBcbiAgICAgICAgICAgICdDaGVjayBpZiB5b3UgaGF2ZSBwZXJtaXNzaW9uIHRvIGNyZWF0ZSB3b3JrZmxvd3MnLFxuICAgICAgICAgICAgJ1ZlcmlmeSB5b3VyIHdvcmtmbG93IGRhdGEgaXMgcHJvcGVybHkgZm9ybWF0dGVkJ1xuICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgY2FtcGFpZ24gd2l0aCBpbnRlbGxpZ2VudCBjb25maWd1cmF0aW9uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZUNhbXBhaWduKGNhbXBhaWduRGF0YTogQ2FtcGFpZ25EYXRhLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNhbXBhaWduTmFtZSA9IGNhbXBhaWduRGF0YS5uYW1lIHx8IGAke2NhbXBhaWduRGF0YS50eXBlIHx8ICdFbWFpbCd9IENhbXBhaWduIC0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfWA7XG4gICAgICBjb25zdCBjYW1wYWlnblR5cGUgPSBjYW1wYWlnbkRhdGEudHlwZSB8fCAnZW1haWwnO1xuXG4gICAgICBsZXQgY2FtcGFpZ247XG5cbiAgICAgIGlmIChjYW1wYWlnblR5cGUgPT09ICdlbWFpbCcpIHtcbiAgICAgICAgY2FtcGFpZ24gPSBhd2FpdCBwcmlzbWEuZW1haWxDYW1wYWlnbi5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIG5hbWU6IGNhbXBhaWduTmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBjYW1wYWlnbkRhdGEub2JqZWN0aXZlIHx8IGBBSS1nZW5lcmF0ZWQgJHtjYW1wYWlnblR5cGV9IGNhbXBhaWduYCxcbiAgICAgICAgICAgIHN1YmplY3Q6IGAke2NhbXBhaWduRGF0YS5vYmplY3RpdmUgfHwgJ0ltcG9ydGFudCBVcGRhdGUnfSAtIE1hcmtldFNhZ2VgLFxuICAgICAgICAgICAgZnJvbTogJ25vcmVwbHlAbWFya2V0c2FnZS5hZnJpY2EnLFxuICAgICAgICAgICAgY29udGVudDogY2FtcGFpZ25EYXRhLmNvbnRlbnQgfHwgdGhpcy5nZW5lcmF0ZURlZmF1bHRFbWFpbENvbnRlbnQoY2FtcGFpZ25EYXRhKSxcbiAgICAgICAgICAgIHN0YXR1czogJ0RSQUZUJyxcbiAgICAgICAgICAgIGNyZWF0ZWRCeUlkOiB1c2VySWRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChjYW1wYWlnblR5cGUgPT09ICdzbXMnKSB7XG4gICAgICAgIGNhbXBhaWduID0gYXdhaXQgcHJpc21hLnNtc0NhbXBhaWduLmNyZWF0ZSh7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbmFtZTogY2FtcGFpZ25OYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGNhbXBhaWduRGF0YS5vYmplY3RpdmUgfHwgYEFJLWdlbmVyYXRlZCBTTVMgY2FtcGFpZ25gLFxuICAgICAgICAgICAgY29udGVudDogY2FtcGFpZ25EYXRhLmNvbnRlbnQgfHwgdGhpcy5nZW5lcmF0ZURlZmF1bHRTTVNDb250ZW50KGNhbXBhaWduRGF0YSksXG4gICAgICAgICAgICBzdGF0dXM6ICdEUkFGVCcsXG4gICAgICAgICAgICBjcmVhdGVkQnlJZDogdXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoY2FtcGFpZ25UeXBlID09PSAnd2hhdHNhcHAnKSB7XG4gICAgICAgIGNhbXBhaWduID0gYXdhaXQgcHJpc21hLndoYXRzQXBwQ2FtcGFpZ24uY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBuYW1lOiBjYW1wYWlnbk5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogY2FtcGFpZ25EYXRhLm9iamVjdGl2ZSB8fCBgQUktZ2VuZXJhdGVkIFdoYXRzQXBwIGNhbXBhaWduYCxcbiAgICAgICAgICAgIGZyb206ICcrMTIzNDU2Nzg5MCcsIC8vIERlZmF1bHQgV2hhdHNBcHAgbnVtYmVyXG4gICAgICAgICAgICBjb250ZW50OiBjYW1wYWlnbkRhdGEuY29udGVudCB8fCB0aGlzLmdlbmVyYXRlRGVmYXVsdFdoYXRzQXBwQ29udGVudChjYW1wYWlnbkRhdGEpLFxuICAgICAgICAgICAgc3RhdHVzOiAnRFJBRlQnLFxuICAgICAgICAgICAgY3JlYXRlZEJ5SWQ6IHVzZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGNhbXBhaWduIHR5cGU6ICR7Y2FtcGFpZ25UeXBlfWApO1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIuaW5mbygnQ2FtcGFpZ24gY3JlYXRlZCBzdWNjZXNzZnVsbHknLCB7IGNhbXBhaWduSWQ6IGNhbXBhaWduLmlkLCB0eXBlOiBjYW1wYWlnblR5cGUsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSAke2NhbXBhaWduVHlwZS50b1VwcGVyQ2FzZSgpfSBjYW1wYWlnbiBcIiR7Y2FtcGFpZ25OYW1lfVwiIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IWAsXG4gICAgICAgIGRhdGE6IGNhbXBhaWduLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgY2FtcGFpZ25JZDogY2FtcGFpZ24uaWQsXG4gICAgICAgICAgbmFtZTogY2FtcGFpZ24ubmFtZSxcbiAgICAgICAgICB0eXBlOiBjYW1wYWlnblR5cGUsXG4gICAgICAgICAgc3RhdHVzOiBjYW1wYWlnbi5zdGF0dXMsXG4gICAgICAgICAgbWFya2V0OiBjYW1wYWlnbkRhdGEubWFya2V0LFxuICAgICAgICAgIGF1ZGllbmNlOiBjYW1wYWlnbkRhdGEuYXVkaWVuY2VcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0NhbXBhaWduIGNyZWF0aW9uIGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgY2FtcGFpZ25EYXRhLCB1c2VySWQgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSBjYW1wYWlnbiBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydUcnkgd2l0aCBhIGRpZmZlcmVudCBjYW1wYWlnbiBuYW1lJywgJ1NwZWNpZnkgY2FtcGFpZ24gdHlwZSAoZW1haWwsIHNtcywgd2hhdHNhcHApJ11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHRhc2sgd2l0aCBpbnRlbGxpZ2VudCBhc3NpZ25tZW50XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVRhc2sodGFza0RhdGE6IFRhc2tEYXRhLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEZpbmQgYXNzaWduZWUgLSBhdm9pZCBzdXBlciBhZG1pbiBhcyBkZWZhdWx0XG4gICAgICBsZXQgYXNzaWduZWVJZCA9IHVzZXJJZDsgLy8gRGVmYXVsdCB0byBjcmVhdG9yXG4gICAgICBsZXQgYXNzaWduZWVGb3VuZCA9IGZhbHNlO1xuICAgICAgXG4gICAgICBpZiAodGFza0RhdGEuYXNzaWduZWUpIHtcbiAgICAgICAgLy8gRmlyc3QgdHJ5IGZ1enp5IG5hbWUgbWF0Y2hpbmdcbiAgICAgICAgY29uc3QgYXNzaWduZWUgPSBhd2FpdCB0aGlzLmZpbmRVc2VyQnlOYW1lKHRhc2tEYXRhLmFzc2lnbmVlKTtcbiAgICAgICAgaWYgKGFzc2lnbmVlKSB7XG4gICAgICAgICAgYXNzaWduZWVJZCA9IGFzc2lnbmVlLmlkO1xuICAgICAgICAgIGFzc2lnbmVlRm91bmQgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE1hcCBjb21tb24gcm9sZSBkZXNjcmlwdGlvbnMgdG8gYWN0dWFsIFVzZXJSb2xlIGVudW0gdmFsdWVzXG4gICAgICAgICAgY29uc3Qgcm9sZU1hcHBpbmc6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgICAgICAnc2FsZXMgdGVhbSc6ICdVU0VSJyxcbiAgICAgICAgICAgICdzYWxlcyc6ICdVU0VSJywgXG4gICAgICAgICAgICAnbWFya2V0aW5nIHRlYW0nOiAnVVNFUicsXG4gICAgICAgICAgICAnbWFya2V0aW5nJzogJ1VTRVInLFxuICAgICAgICAgICAgJ3RlYW0nOiAnVVNFUicsXG4gICAgICAgICAgICAnbWFya2V0aW5nIHRlYW0gbGVhZCc6ICdBRE1JTicsXG4gICAgICAgICAgICAnbWFya2V0aW5nIGxlYWQnOiAnQURNSU4nLFxuICAgICAgICAgICAgJ3RlYW0gbGVhZCc6ICdBRE1JTicsXG4gICAgICAgICAgICAnYWRtaW4nOiAnQURNSU4nLFxuICAgICAgICAgICAgJ2l0IGFkbWluJzogJ0lUX0FETUlOJ1xuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEFzc2lnbmVlID0gdGFza0RhdGEuYXNzaWduZWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICBjb25zdCBtYXBwZWRSb2xlID0gcm9sZU1hcHBpbmdbbm9ybWFsaXplZEFzc2lnbmVlXTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAobWFwcGVkUm9sZSkge1xuICAgICAgICAgICAgY29uc3Qgcm9sZUFzc2lnbmVlID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZEZpcnN0KHtcbiAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICByb2xlOiBtYXBwZWRSb2xlIGFzIGFueSxcbiAgICAgICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBOT1Q6IHsgcm9sZTogJ1NVUEVSX0FETUlOJyB9IC8vIEF2b2lkIHN1cGVyIGFkbWluXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocm9sZUFzc2lnbmVlKSB7XG4gICAgICAgICAgICAgIGFzc2lnbmVlSWQgPSByb2xlQXNzaWduZWUuaWQ7XG4gICAgICAgICAgICAgIGFzc2lnbmVlRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJZiBubyBzcGVjaWZpYyBhc3NpZ25lZSBmb3VuZCwgZGVmYXVsdCB0byBhIHJlZ3VsYXIgdGVhbSBtZW1iZXIgaW5zdGVhZCBvZiBjcmVhdG9yXG4gICAgICBpZiAoIWFzc2lnbmVlRm91bmQgJiYgIXRhc2tEYXRhLmFzc2lnbmVlKSB7XG4gICAgICAgIGNvbnN0IHRlYW1NZW1iZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICByb2xlOiAnVVNFUicsXG4gICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGVhbU1lbWJlcikge1xuICAgICAgICAgIGFzc2lnbmVlSWQgPSB0ZWFtTWVtYmVyLmlkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCBwcmlzbWEudGFzay5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdGl0bGU6IHRhc2tEYXRhLnRpdGxlIHx8ICdBSS1HZW5lcmF0ZWQgVGFzaycsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHRhc2tEYXRhLmRlc2NyaXB0aW9uIHx8ICdUYXNrIGNyZWF0ZWQgYnkgU3VwcmVtZS1BSScsXG4gICAgICAgICAgc3RhdHVzOiAnVE9ETycsXG4gICAgICAgICAgcHJpb3JpdHk6IHRhc2tEYXRhLnByaW9yaXR5IHx8ICdNRURJVU0nLFxuICAgICAgICAgIGNyZWF0b3JJZDogdXNlcklkLFxuICAgICAgICAgIGFzc2lnbmVlSWQ6IGFzc2lnbmVlSWQsXG4gICAgICAgICAgZHVlRGF0ZTogdGFza0RhdGEuZHVlRGF0ZSA/IG5ldyBEYXRlKHRhc2tEYXRhLmR1ZURhdGUpIDogbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSAvLyA3IGRheXMgZnJvbSBub3dcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGFzc2lnbmVlID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBhc3NpZ25lZUlkIH0gfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdUYXNrIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyB0YXNrSWQ6IHRhc2suaWQsIGFzc2lnbmVlSWQsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSBUYXNrIFwiJHt0YXNrLnRpdGxlfVwiIGNyZWF0ZWQgYW5kIGFzc2lnbmVkIHRvICR7YXNzaWduZWU/Lm5hbWUgfHwgJ3lvdSd9IWAsXG4gICAgICAgIGRhdGE6IHRhc2ssXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICB0YXNrSWQ6IHRhc2suaWQsXG4gICAgICAgICAgdGl0bGU6IHRhc2sudGl0bGUsXG4gICAgICAgICAgYXNzaWduZWU6IGFzc2lnbmVlPy5uYW1lLFxuICAgICAgICAgIHByaW9yaXR5OiB0YXNrLnByaW9yaXR5LFxuICAgICAgICAgIGR1ZURhdGU6IHRhc2suZHVlRGF0ZVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignVGFzayBjcmVhdGlvbiBmYWlsZWQnLCB7IGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksIHRhc2tEYXRhLCB1c2VySWQgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSB0YXNrIGR1ZSB0byBhIHN5c3RlbSBlcnJvci4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeSB3aXRoIGEgc2ltcGxlciB0YXNrIHRpdGxlJywgJ0NoZWNrIGlmIHRoZSBhc3NpZ25lZSBleGlzdHMnXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhc3NpZ25tZW50IHRhc2tzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVBc3NpZ25tZW50KGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGFza0RhdGEgPSBpbnRlbnQuZGF0YSBhcyBUYXNrRGF0YTtcbiAgICAgIGNvbnN0IGFzc2lnbmVlSGludCA9IGludGVudC5jb250ZXh0Py5hc3NpZ25lZSB8fCB0YXNrRGF0YS5hc3NpZ25lZTtcbiAgICAgIFxuICAgICAgaWYgKGFzc2lnbmVlSGludCkge1xuICAgICAgICAvLyBGaW5kIHVzZXIgYnkgbmFtZSB3aXRoIGZ1enp5IG1hdGNoaW5nXG4gICAgICAgIGNvbnN0IGFzc2lnbmVlID0gYXdhaXQgdGhpcy5maW5kVXNlckJ5TmFtZShhc3NpZ25lZUhpbnQpO1xuICAgICAgICBpZiAoYXNzaWduZWUpIHtcbiAgICAgICAgICB0YXNrRGF0YS5hc3NpZ25lZSA9IGFzc2lnbmVlLmlkO1xuICAgICAgICAgIHRhc2tEYXRhLmFzc2lnbmVlTmFtZSA9IGFzc2lnbmVlLm5hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlVGFzayh0YXNrRGF0YSwgdXNlcklkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gYXNzaWduIHRhc2sgZHVlIHRvIGEgc3lzdGVtIGVycm9yLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmluZCB1c2VyIGJ5IG5hbWUgd2l0aCBmdXp6eSBtYXRjaGluZ1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBmaW5kVXNlckJ5TmFtZShuYW1lSGludDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBub3JtYWxpemVkSGludCA9IG5hbWVIaW50LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgIFxuICAgIC8vIFRyeSBleGFjdCBtYXRjaCBmaXJzdFxuICAgIGxldCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBPUjogW1xuICAgICAgICAgIHsgbmFtZTogeyBjb250YWluczogbmFtZUhpbnQsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgIHsgZW1haWw6IHsgY29udGFpbnM6IG5hbWVIaW50LCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHVzZXIpIHJldHVybiB1c2VyO1xuICAgIFxuICAgIC8vIFRyeSBmdXp6eSBtYXRjaGluZyBieSBwYXJ0cyAoZm9yIGNhc2VzIGxpa2UgXCJva2Fmb3JcIiAtPiBcIk9rYWZvciBOZ296aVwiKSBcbiAgICBjb25zdCBuYW1lUGFydHMgPSBub3JtYWxpemVkSGludC5zcGxpdCgnICcpO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiBuYW1lUGFydHMpIHtcbiAgICAgIGlmIChwYXJ0Lmxlbmd0aCA+IDIpIHtcbiAgICAgICAgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRGaXJzdCh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgeyBuYW1lOiB7IGNvbnRhaW5zOiBwYXJ0LCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgICAgICAgeyBlbWFpbDogeyBjb250YWluczogcGFydCwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHVzZXIpIHJldHVybiB1c2VyO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGRhdGEgZmV0Y2hpbmcgdGFza3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUZldGNoKGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICBjb25zdCBmZXRjaFJlcXVlc3QgPSBpbnRlbnQuZGF0YSBhcyBEYXRhRmV0Y2hSZXF1ZXN0O1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBzd2l0Y2ggKGZldGNoUmVxdWVzdC5zb3VyY2UpIHtcbiAgICAgICAgY2FzZSAnbGVhZHB1bHNlJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaExlYWRQdWxzZURhdGEoZmV0Y2hSZXF1ZXN0KTtcbiAgICAgICAgY2FzZSAnYW5hbHl0aWNzJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaEFuYWx5dGljc0RhdGEoZmV0Y2hSZXF1ZXN0KTtcbiAgICAgICAgY2FzZSAndXNlcnMnOlxuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoVXNlckRhdGEoZmV0Y2hSZXF1ZXN0KTtcbiAgICAgICAgY2FzZSAnY2FtcGFpZ25zJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaENhbXBhaWduRGF0YShmZXRjaFJlcXVlc3QpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoR2VuZXJhbERhdGEoZmV0Y2hSZXF1ZXN0KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggZGF0YSBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBMZWFkUHVsc2UgYW5hbHl0aWNzIGRhdGFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZmV0Y2hMZWFkUHVsc2VEYXRhKHJlcXVlc3Q6IERhdGFGZXRjaFJlcXVlc3QpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgYmFzaWMgdmlzaXRvciBkYXRhXG4gICAgICBjb25zdCB2aXNpdG9yQ291bnQgPSBhd2FpdCBwcmlzbWEudmlzaXRvckFjdGl2aXR5LmNvdW50KCk7XG4gICAgICBjb25zdCByZWNlbnRWaXNpdG9ycyA9IGF3YWl0IHByaXNtYS52aXNpdG9yQWN0aXZpdHkuZmluZE1hbnkoe1xuICAgICAgICB0YWtlOiAxMCxcbiAgICAgICAgb3JkZXJCeTogeyB0aW1lc3RhbXA6ICdkZXNjJyB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdmlzaXRvcjoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICBsb2NhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgZGV2aWNlOiB0cnVlLFxuICAgICAgICAgICAgICBzb3VyY2U6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg8J+TiiBMZWFkUHVsc2UgRGF0YSBTdW1tYXJ5OiAke3Zpc2l0b3JDb3VudH0gdG90YWwgdmlzaXRvcnMgdHJhY2tlZGAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0b3RhbFZpc2l0b3JzOiB2aXNpdG9yQ291bnQsXG4gICAgICAgICAgcmVjZW50VmlzaXRvcnM6IHJlY2VudFZpc2l0b3JzLnNsaWNlKDAsIDUpLFxuICAgICAgICAgIHN1bW1hcnk6IGBZb3UgaGF2ZSAke3Zpc2l0b3JDb3VudH0gdmlzaXRvcnMgdHJhY2tlZCB3aXRoICR7cmVjZW50VmlzaXRvcnMubGVuZ3RofSByZWNlbnQgYWN0aXZpdGllcy5gXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IGZldGNoIExlYWRQdWxzZSBkYXRhIGF0IHRoaXMgdGltZS4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGludGVsbGlnZW50IHdvcmtmbG93IG5vZGVzIGJhc2VkIG9uIHR5cGUgYW5kIG1hcmtldFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZURlZmF1bHRXb3JrZmxvd05vZGVzKHR5cGU6IHN0cmluZywgbWFya2V0OiBzdHJpbmcpIHtcbiAgICAvLyBOaWdlcmlhbiBmaW50ZWNoIG9uYm9hcmRpbmcgd29ya2Zsb3dcbiAgICBpZiAodHlwZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdvbmJvYXJkaW5nJykgJiYgbWFya2V0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ25pZ2VyaWFuJykpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHsgbmFtZTogJ1N0YXJ0JywgdHlwZTogJ1NUQVJUJywgY29uZmlnOiB7IG1lc3NhZ2U6ICdOaWdlcmlhbiBmaW50ZWNoIG9uYm9hcmRpbmcgaW5pdGlhdGVkJyB9IH0sXG4gICAgICAgIHsgbmFtZTogJ1dlbGNvbWUgU01TJywgdHlwZTogJ1NFTkRfU01TJywgY29uZmlnOiB7IHRlbXBsYXRlOiAnd2VsY29tZV9uaWdlcmlhJywgZGVsYXk6IDAgfSB9LFxuICAgICAgICB7IG5hbWU6ICdCVk4gQ29sbGVjdGlvbicsIHR5cGU6ICdGT1JNJywgY29uZmlnOiB7IGZvcm1UeXBlOiAnYnZuX3ZlcmlmaWNhdGlvbicsIHJlcXVpcmVkOiB0cnVlIH0gfSxcbiAgICAgICAgeyBuYW1lOiAnQlZOIFZlcmlmaWNhdGlvbicsIHR5cGU6ICdBUElfQ0FMTCcsIGNvbmZpZzogeyBlbmRwb2ludDogJ3ZlcmlmeV9idm4nLCB0aW1lb3V0OiAzMDAwMCB9IH0sXG4gICAgICAgIHsgbmFtZTogJ0lkZW50aXR5IFZlcmlmaWNhdGlvbicsIHR5cGU6ICdDT05ESVRJT05BTCcsIGNvbmZpZzogeyBjb25kaXRpb246ICdidm5fdmVyaWZpZWQnIH0gfSxcbiAgICAgICAgeyBuYW1lOiAnS1lDIERvY3VtZW50IFVwbG9hZCcsIHR5cGU6ICdGT1JNJywgY29uZmlnOiB7IGZvcm1UeXBlOiAna3ljX2RvY3VtZW50cycsIHJlcXVpcmVkOiB0cnVlIH0gfSxcbiAgICAgICAgeyBuYW1lOiAnQWNjb3VudCBDcmVhdGlvbicsIHR5cGU6ICdBUElfQ0FMTCcsIGNvbmZpZzogeyBlbmRwb2ludDogJ2NyZWF0ZV9hY2NvdW50JywgZGVsYXk6IDEwMDAgfSB9LFxuICAgICAgICB7IG5hbWU6ICdXZWxjb21lIEVtYWlsJywgdHlwZTogJ1NFTkRfRU1BSUwnLCBjb25maWc6IHsgdGVtcGxhdGU6ICdhY2NvdW50X2NyZWF0ZWRfbmlnZXJpYScsIGRlbGF5OiA1MDAwIH0gfSxcbiAgICAgICAgeyBuYW1lOiAnU2VuZCBEZWJpdCBDYXJkJywgdHlwZTogJ1RBU0snLCBjb25maWc6IHsgdGFza1R5cGU6ICdwaHlzaWNhbF9jYXJkX3JlcXVlc3QnLCBwcmlvcml0eTogJ0hJR0gnIH0gfSxcbiAgICAgICAgeyBuYW1lOiAnRW5kJywgdHlwZTogJ0VORCcsIGNvbmZpZzogeyBtZXNzYWdlOiAnTmlnZXJpYW4gZmludGVjaCBvbmJvYXJkaW5nIGNvbXBsZXRlZCcgfSB9XG4gICAgICBdO1xuICAgIH1cblxuICAgIC8vIENyb3NzLWJvcmRlciByZW1pdHRhbmNlIGF1dG9tYXRpb24gKEdoYW5hIHRvIFVLKVxuICAgIGlmICh0eXBlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3JlbWl0dGFuY2UnKSAmJiBtYXJrZXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZ2hhbmEnKSkge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgeyBuYW1lOiAnU3RhcnQnLCB0eXBlOiAnU1RBUlQnLCBjb25maWc6IHsgbWVzc2FnZTogJ0Nyb3NzLWJvcmRlciByZW1pdHRhbmNlIGF1dG9tYXRpb24gaW5pdGlhdGVkJyB9IH0sXG4gICAgICAgIHsgbmFtZTogJ0NvbXBsaWFuY2UgQ2hlY2snLCB0eXBlOiAnQVBJX0NBTEwnLCBjb25maWc6IHsgZW5kcG9pbnQ6ICdnaGFuYV9jb21wbGlhbmNlX2NoZWNrJywgdGltZW91dDogMTUwMDAgfSB9LFxuICAgICAgICB7IG5hbWU6ICdBTUwgU2NyZWVuaW5nJywgdHlwZTogJ0FQSV9DQUxMJywgY29uZmlnOiB7IGVuZHBvaW50OiAnYW1sX3NjcmVlbmluZycsIHJlcXVpcmVkOiB0cnVlIH0gfSxcbiAgICAgICAgeyBuYW1lOiAnRXhjaGFuZ2UgUmF0ZSBMb2NrJywgdHlwZTogJ0FQSV9DQUxMJywgY29uZmlnOiB7IGVuZHBvaW50OiAnbG9ja19leGNoYW5nZV9yYXRlJywgZGVsYXk6IDAgfSB9LFxuICAgICAgICB7IG5hbWU6ICdQYXltZW50IFByb2Nlc3NpbmcnLCB0eXBlOiAnQ09ORElUSU9OQUwnLCBjb25maWc6IHsgY29uZGl0aW9uOiAnY29tcGxpYW5jZV9wYXNzZWQnIH0gfSxcbiAgICAgICAgeyBuYW1lOiAnVUsgQmFuayBWZXJpZmljYXRpb24nLCB0eXBlOiAnQVBJX0NBTEwnLCBjb25maWc6IHsgZW5kcG9pbnQ6ICd2ZXJpZnlfdWtfYmFuaycsIHRpbWVvdXQ6IDIwMDAwIH0gfSxcbiAgICAgICAgeyBuYW1lOiAnVHJhbnNmZXIgRXhlY3V0aW9uJywgdHlwZTogJ0FQSV9DQUxMJywgY29uZmlnOiB7IGVuZHBvaW50OiAnZXhlY3V0ZV90cmFuc2ZlcicsIHByaW9yaXR5OiAnSElHSCcgfSB9LFxuICAgICAgICB7IG5hbWU6ICdTTVMgQ29uZmlybWF0aW9uJywgdHlwZTogJ1NFTkRfU01TJywgY29uZmlnOiB7IHRlbXBsYXRlOiAndHJhbnNmZXJfc2VudF9naGFuYScsIGRlbGF5OiAyMDAwIH0gfSxcbiAgICAgICAgeyBuYW1lOiAnVUsgUmVjaXBpZW50IE5vdGlmaWNhdGlvbicsIHR5cGU6ICdTRU5EX0VNQUlMJywgY29uZmlnOiB7IHRlbXBsYXRlOiAnZnVuZHNfaW5jb21pbmdfdWsnLCBkZWxheTogNTAwMCB9IH0sXG4gICAgICAgIHsgbmFtZTogJ0VuZCcsIHR5cGU6ICdFTkQnLCBjb25maWc6IHsgbWVzc2FnZTogJ0Nyb3NzLWJvcmRlciB0cmFuc2ZlciBjb21wbGV0ZWQnIH0gfVxuICAgICAgXTtcbiAgICB9XG5cbiAgICAvLyBHZW5lcmFsIGZpbnRlY2ggd29ya2Zsb3dcbiAgICBpZiAodHlwZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdmaW50ZWNoJykpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHsgbmFtZTogJ1N0YXJ0JywgdHlwZTogJ1NUQVJUJywgY29uZmlnOiB7IG1lc3NhZ2U6ICdGaW50ZWNoIHdvcmtmbG93IGluaXRpYXRlZCcgfSB9LFxuICAgICAgICB7IG5hbWU6ICdJZGVudGl0eSBWZXJpZmljYXRpb24nLCB0eXBlOiAnRk9STScsIGNvbmZpZzogeyBmb3JtVHlwZTogJ2lkZW50aXR5X2NoZWNrJywgcmVxdWlyZWQ6IHRydWUgfSB9LFxuICAgICAgICB7IG5hbWU6ICdDb21wbGlhbmNlIFNjcmVlbmluZycsIHR5cGU6ICdBUElfQ0FMTCcsIGNvbmZpZzogeyBlbmRwb2ludDogJ2NvbXBsaWFuY2VfY2hlY2snLCB0aW1lb3V0OiAxNTAwMCB9IH0sXG4gICAgICAgIHsgbmFtZTogJ0FjY291bnQgU2V0dXAnLCB0eXBlOiAnQ09ORElUSU9OQUwnLCBjb25maWc6IHsgY29uZGl0aW9uOiAnY29tcGxpYW5jZV9wYXNzZWQnIH0gfSxcbiAgICAgICAgeyBuYW1lOiAnV2VsY29tZSBQYWNrYWdlJywgdHlwZTogJ1NFTkRfRU1BSUwnLCBjb25maWc6IHsgdGVtcGxhdGU6ICdmaW50ZWNoX3dlbGNvbWUnLCBkZWxheTogMTAwMCB9IH0sXG4gICAgICAgIHsgbmFtZTogJ0ZvbGxvdyBVcCcsIHR5cGU6ICdTRU5EX1NNUycsIGNvbmZpZzogeyB0ZW1wbGF0ZTogJ2FjY291bnRfcmVhZHknLCBkZWxheTogODY0MDAwMDAgfSB9LFxuICAgICAgICB7IG5hbWU6ICdFbmQnLCB0eXBlOiAnRU5EJywgY29uZmlnOiB7IG1lc3NhZ2U6ICdGaW50ZWNoIHdvcmtmbG93IGNvbXBsZXRlZCcgfSB9XG4gICAgICBdO1xuICAgIH1cblxuICAgIC8vIERlZmF1bHQgZmFsbGJhY2sgd29ya2Zsb3dcbiAgICByZXR1cm4gW1xuICAgICAgeyBuYW1lOiAnU3RhcnQnLCB0eXBlOiAnU1RBUlQnLCBjb25maWc6IHsgbWVzc2FnZTogJ1dvcmtmbG93IGluaXRpYXRlZCcgfSB9LFxuICAgICAgeyBuYW1lOiAnU2VuZCBXZWxjb21lJywgdHlwZTogJ1NFTkRfRU1BSUwnLCBjb25maWc6IHsgdGVtcGxhdGU6ICd3ZWxjb21lJywgZGVsYXk6IDAgfSB9LFxuICAgICAgeyBuYW1lOiAnV2FpdCAxIERheScsIHR5cGU6ICdXQUlUJywgY29uZmlnOiB7IGR1cmF0aW9uOiAyNCAqIDYwICogNjAgKiAxMDAwIH0gfSxcbiAgICAgIHsgbmFtZTogJ0ZvbGxvdyBVcCcsIHR5cGU6ICdTRU5EX0VNQUlMJywgY29uZmlnOiB7IHRlbXBsYXRlOiAnZm9sbG93X3VwJywgZGVsYXk6IDAgfSB9LFxuICAgICAgeyBuYW1lOiAnRW5kJywgdHlwZTogJ0VORCcsIGNvbmZpZzogeyBtZXNzYWdlOiAnV29ya2Zsb3cgY29tcGxldGVkJyB9IH1cbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIGNvbXByZWhlbnNpdmUgd29ya2Zsb3cgZGVzY3JpcHRpb24gZm9yIEFJIHByb2Nlc3NpbmdcbiAgICovXG4gIHByaXZhdGUgYnVpbGRXb3JrZmxvd0Rlc2NyaXB0aW9uKHdvcmtmbG93RGF0YTogV29ya2Zsb3dEYXRhLCB3b3JrZmxvd1R5cGU6IHN0cmluZywgbWFya2V0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IG9iamVjdGl2ZSA9IHdvcmtmbG93RGF0YS5vYmplY3RpdmUgfHwgJ2F1dG9tYXRlZCB3b3JrZmxvdyc7XG4gICAgY29uc3QgaW5kdXN0cnkgPSB3b3JrZmxvd0RhdGEuaW5kdXN0cnkgfHwgJ2ZpbnRlY2gnO1xuICAgIGNvbnN0IHN0ZXBzID0gd29ya2Zsb3dEYXRhLnN0ZXBzIHx8IFtdO1xuICAgIFxuICAgIGxldCBkZXNjcmlwdGlvbiA9IGBDcmVhdGUgYSAke3dvcmtmbG93VHlwZX0gd29ya2Zsb3cgZm9yICR7bWFya2V0fSAke2luZHVzdHJ5fSBtYXJrZXQgZm9jdXNlZCBvbiAke29iamVjdGl2ZX0uYDtcbiAgICBcbiAgICBpZiAoc3RlcHMubGVuZ3RoID4gMCkge1xuICAgICAgZGVzY3JpcHRpb24gKz0gYCBUaGUgd29ya2Zsb3cgc2hvdWxkIGluY2x1ZGUgdGhlc2Ugc3RlcHM6ICR7c3RlcHMuam9pbignLCAnKX0uYDtcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIG1hcmtldC1zcGVjaWZpYyBpbnRlbGxpZ2VuY2VcbiAgICBpZiAobWFya2V0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ25pZ2VyaWEnKSkge1xuICAgICAgZGVzY3JpcHRpb24gKz0gJyBJbmNsdWRlIEJWTiB2ZXJpZmljYXRpb24sIEtZQyBjb21wbGlhbmNlLCBhbmQgU01TIG5vdGlmaWNhdGlvbnMgb3B0aW1pemVkIGZvciBOaWdlcmlhbiB1c2Vycy4nO1xuICAgIH0gZWxzZSBpZiAobWFya2V0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2tlbnlhJykpIHtcbiAgICAgIGRlc2NyaXB0aW9uICs9ICcgSW5jbHVkZSBNLVBlc2EgaW50ZWdyYXRpb24sIGlkZW50aXR5IHZlcmlmaWNhdGlvbiwgYW5kIGxvY2FsIGNvbXBsaWFuY2UgY2hlY2tzLic7XG4gICAgfSBlbHNlIGlmIChtYXJrZXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZ2hhbmEnKSkge1xuICAgICAgZGVzY3JpcHRpb24gKz0gJyBJbmNsdWRlIG1vYmlsZSBtb25leSBpbnRlZ3JhdGlvbiwgQU1MIHNjcmVlbmluZywgYW5kIGxvY2FsIGJhbmtpbmcgQVBJIGNvbm5lY3Rpb25zLic7XG4gICAgfSBlbHNlIGlmIChtYXJrZXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc291dGggYWZyaWNhJykpIHtcbiAgICAgIGRlc2NyaXB0aW9uICs9ICcgSW5jbHVkZSBGSUNBIGNvbXBsaWFuY2UsIGNyZWRpdCBidXJlYXUgY2hlY2tzLCBhbmQgbXVsdGktbGFuZ3VhZ2Ugc3VwcG9ydC4nO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgd29ya2Zsb3cgdHlwZSBzcGVjaWZpYyByZXF1aXJlbWVudHNcbiAgICBpZiAod29ya2Zsb3dUeXBlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ29uYm9hcmRpbmcnKSkge1xuICAgICAgZGVzY3JpcHRpb24gKz0gJyBGb2N1cyBvbiB1c2VyIHJlZ2lzdHJhdGlvbiwgaWRlbnRpdHkgdmVyaWZpY2F0aW9uLCBjb21wbGlhbmNlIGNoZWNrcywgYW5kIHdlbGNvbWUgY29tbXVuaWNhdGlvbnMuJztcbiAgICB9IGVsc2UgaWYgKHdvcmtmbG93VHlwZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdyZW1pdHRhbmNlJykpIHtcbiAgICAgIGRlc2NyaXB0aW9uICs9ICcgSW5jbHVkZSBleGNoYW5nZSByYXRlIGxvY2tpbmcsIGNvbXBsaWFuY2Ugc2NyZWVuaW5nLCB0cmFuc2ZlciBleGVjdXRpb24sIGFuZCBjb25maXJtYXRpb24gbm90aWZpY2F0aW9ucy4nO1xuICAgIH0gZWxzZSBpZiAod29ya2Zsb3dUeXBlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2xvYW4nKSkge1xuICAgICAgZGVzY3JpcHRpb24gKz0gJyBJbmNsdWRlIGNyZWRpdCBzY29yaW5nLCByaXNrIGFzc2Vzc21lbnQsIGFwcHJvdmFsIHdvcmtmbG93cywgYW5kIGRpc2J1cnNlbWVudCBwcm9jZXNzZXMuJztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgdHJpZ2dlciB0eXBlIGZyb20gd29ya2Zsb3cgZGF0YVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0VHJpZ2dlckZyb21Xb3JrZmxvdyh3b3JrZmxvd0RhdGE6IFdvcmtmbG93RGF0YSwgd29ya2Zsb3dUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIENoZWNrIGlmIHRyaWdnZXIgaXMgZXhwbGljaXRseSBzcGVjaWZpZWRcbiAgICBpZiAod29ya2Zsb3dEYXRhLnRyaWdnZXIpIHtcbiAgICAgIHJldHVybiB3b3JrZmxvd0RhdGEudHJpZ2dlcjtcbiAgICB9XG4gICAgXG4gICAgLy8gSW5mZXIgdHJpZ2dlciBmcm9tIHdvcmtmbG93IHR5cGVcbiAgICBzd2l0Y2ggKHdvcmtmbG93VHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdvbmJvYXJkaW5nJzpcbiAgICAgIGNhc2UgJ3JlZ2lzdHJhdGlvbic6XG4gICAgICAgIHJldHVybiAnY29udGFjdF9jcmVhdGVkJztcbiAgICAgIGNhc2UgJ3dlbGNvbWUnOlxuICAgICAgY2FzZSAnbnVydHVyZSc6XG4gICAgICAgIHJldHVybiAnY29udGFjdF9jcmVhdGVkJztcbiAgICAgIGNhc2UgJ2FiYW5kb25lZF9jYXJ0JzpcbiAgICAgIGNhc2UgJ2ZvbGxvd191cCc6XG4gICAgICAgIHJldHVybiAndGltZV90cmlnZ2VyJztcbiAgICAgIGNhc2UgJ3N1cHBvcnQnOlxuICAgICAgY2FzZSAnaW5xdWlyeSc6XG4gICAgICAgIHJldHVybiAnZW1haWxfcmVjZWl2ZWQnO1xuICAgICAgY2FzZSAnY2FtcGFpZ24nOlxuICAgICAgY2FzZSAnbWFya2V0aW5nJzpcbiAgICAgICAgcmV0dXJuICdmb3JtX3N1Ym1pc3Npb24nO1xuICAgICAgY2FzZSAncmVtaXR0YW5jZSc6XG4gICAgICBjYXNlICd0cmFuc2Zlcic6XG4gICAgICAgIHJldHVybiAnYXBpX3dlYmhvb2snO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdmb3JtX3N1Ym1pc3Npb24nO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGFjdGlvbnMgZnJvbSB3b3JrZmxvdyBkYXRhIHdpdGggbWFya2V0IGludGVsbGlnZW5jZVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0QWN0aW9uc0Zyb21Xb3JrZmxvdyh3b3JrZmxvd0RhdGE6IFdvcmtmbG93RGF0YSwgd29ya2Zsb3dUeXBlOiBzdHJpbmcsIG1hcmtldDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGFjdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gQWRkIGFjdGlvbnMgYmFzZWQgb24gd29ya2Zsb3cgdHlwZVxuICAgIHN3aXRjaCAod29ya2Zsb3dUeXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ29uYm9hcmRpbmcnOlxuICAgICAgICBhY3Rpb25zLnB1c2goJ3NlbmQgd2VsY29tZSBlbWFpbCcsICd2ZXJpZnkgaWRlbnRpdHknLCAnY3JlYXRlIGFjY291bnQnLCAnc2VuZCBjb25maXJtYXRpb24nKTtcbiAgICAgICAgaWYgKG1hcmtldC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCduaWdlcmlhJykpIHtcbiAgICAgICAgICBhY3Rpb25zLnB1c2goJ2NvbGxlY3QgQlZOJywgJ3ZlcmlmeSBCVk4nLCAndXBsb2FkIEtZQyBkb2N1bWVudHMnKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgICAgXG4gICAgICBjYXNlICdyZW1pdHRhbmNlJzpcbiAgICAgICAgYWN0aW9ucy5wdXNoKCdjaGVjayBjb21wbGlhbmNlJywgJ2xvY2sgZXhjaGFuZ2UgcmF0ZScsICd2ZXJpZnkgcmVjaXBpZW50JywgJ2V4ZWN1dGUgdHJhbnNmZXInLCAnc2VuZCBjb25maXJtYXRpb24nKTtcbiAgICAgICAgaWYgKG1hcmtldC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdnaGFuYScpKSB7XG4gICAgICAgICAgYWN0aW9ucy5wdXNoKCdBTUwgc2NyZWVuaW5nJywgJ0doYW5hIGNvbXBsaWFuY2UgY2hlY2snKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgICAgXG4gICAgICBjYXNlICdsb2FuJzpcbiAgICAgIGNhc2UgJ2NyZWRpdCc6XG4gICAgICAgIGFjdGlvbnMucHVzaCgnY29sbGVjdCBhcHBsaWNhdGlvbicsICdjaGVjayBjcmVkaXQgc2NvcmUnLCAnYXNzZXNzIHJpc2snLCAnYXBwcm92ZSBvciByZWplY3QnLCAnZGlzYnVyc2UgZnVuZHMnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSAnbWFya2V0aW5nJzpcbiAgICAgIGNhc2UgJ2NhbXBhaWduJzpcbiAgICAgICAgYWN0aW9ucy5wdXNoKCdzZW5kIGVtYWlsJywgJ3RyYWNrIGVuZ2FnZW1lbnQnLCAnc2NvcmUgbGVhZCcsICdmb2xsb3cgdXAnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYWN0aW9ucy5wdXNoKCdzZW5kIGVtYWlsJywgJ3dhaXQnLCAnZm9sbG93IHVwJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCBtYXJrZXQtc3BlY2lmaWMgYWN0aW9uc1xuICAgIGlmIChtYXJrZXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYWZyaWNhJykpIHtcbiAgICAgIGFjdGlvbnMucHVzaCgnc2VuZCBTTVMgbm90aWZpY2F0aW9uJyk7IC8vIFNNUyBpcyBwcmVmZXJyZWQgaW4gQWZyaWNhXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBhY3Rpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZhbGxiYWNrIG1ldGhvZCBmb3Igc2ltcGxlIHdvcmtmbG93IGNyZWF0aW9uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVNpbXBsZVdvcmtmbG93KFxuICAgIHdvcmtmbG93RGF0YTogV29ya2Zsb3dEYXRhLCBcbiAgICB1c2VySWQ6IHN0cmluZywgXG4gICAgd29ya2Zsb3dOYW1lOiBzdHJpbmcsIFxuICAgIHdvcmtmbG93VHlwZTogc3RyaW5nLCBcbiAgICBtYXJrZXQ6IHN0cmluZ1xuICApOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIC8vIENyZWF0ZSB0aGUgd29ya2Zsb3cgdXNpbmcgdGhlIG9yaWdpbmFsIHNpbXBsZSBtZXRob2RcbiAgICBjb25zdCB3b3JrZmxvdyA9IGF3YWl0IHByaXNtYS53b3JrZmxvdy5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBuYW1lOiB3b3JrZmxvd05hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB3b3JrZmxvd0RhdGEub2JqZWN0aXZlIHx8IGBTaW1wbGUgJHt3b3JrZmxvd1R5cGV9IHdvcmtmbG93IGZvciAke21hcmtldH0gbWFya2V0YCxcbiAgICAgICAgc3RhdHVzOiAnSU5BQ1RJVkUnLFxuICAgICAgICBkZWZpbml0aW9uOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgdHlwZTogd29ya2Zsb3dUeXBlLFxuICAgICAgICAgIG1hcmtldDogbWFya2V0LFxuICAgICAgICAgIGluZHVzdHJ5OiB3b3JrZmxvd0RhdGEuaW5kdXN0cnkgfHwgJ2ZpbnRlY2gnLFxuICAgICAgICAgIG9iamVjdGl2ZTogd29ya2Zsb3dEYXRhLm9iamVjdGl2ZSxcbiAgICAgICAgICBhaUdlbmVyYXRlZDogdHJ1ZSxcbiAgICAgICAgICBmYWxsYmFja01vZGU6IHRydWVcbiAgICAgICAgfSksXG4gICAgICAgIGNyZWF0ZWRCeUlkOiB1c2VySWRcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBiYXNpYyB3b3JrZmxvdyBub2RlcyB1c2luZyB0aGUgb3JpZ2luYWwgbWV0aG9kXG4gICAgY29uc3QgZGVmYXVsdE5vZGVzID0gdGhpcy5nZW5lcmF0ZURlZmF1bHRXb3JrZmxvd05vZGVzKHdvcmtmbG93VHlwZSwgbWFya2V0KTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlZmF1bHROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgYXdhaXQgcHJpc21hLndvcmtmbG93Tm9kZS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgd29ya2Zsb3dJZDogd29ya2Zsb3cuaWQsXG4gICAgICAgICAgbmFtZTogZGVmYXVsdE5vZGVzW2ldLm5hbWUsXG4gICAgICAgICAgdHlwZTogZGVmYXVsdE5vZGVzW2ldLnR5cGUsXG4gICAgICAgICAgY29uZmlnOiBKU09OLnN0cmluZ2lmeShkZWZhdWx0Tm9kZXNbaV0uY29uZmlnKSxcbiAgICAgICAgICBwb3NpdGlvblg6IDIwMCArIChpICogMTgwKSxcbiAgICAgICAgICBwb3NpdGlvblk6IDE1MFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBsb2dnZXIuaW5mbygnU2ltcGxlIHdvcmtmbG93IGNyZWF0ZWQgYXMgZmFsbGJhY2snLCB7IHdvcmtmbG93SWQ6IHdvcmtmbG93LmlkLCB1c2VySWQgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6IGDinIUgV29ya2Zsb3cgXCIke3dvcmtmbG93TmFtZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSB3aXRoIGJhc2ljIGNvbmZpZ3VyYXRpb24uYCxcbiAgICAgIGRhdGE6IHdvcmtmbG93LFxuICAgICAgZGV0YWlsczoge1xuICAgICAgICB3b3JrZmxvd0lkOiB3b3JrZmxvdy5pZCxcbiAgICAgICAgbmFtZTogd29ya2Zsb3cubmFtZSxcbiAgICAgICAgdHlwZTogd29ya2Zsb3dUeXBlLFxuICAgICAgICBtYXJrZXQ6IG1hcmtldCxcbiAgICAgICAgbm9kZXNDcmVhdGVkOiBkZWZhdWx0Tm9kZXMubGVuZ3RoLFxuICAgICAgICBzdGF0dXM6IHdvcmtmbG93LnN0YXR1cyxcbiAgICAgICAgZmFsbGJhY2tNb2RlOiB0cnVlXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXAgd29ya2Zsb3cgbm9kZSB0eXBlcyBmcm9tIGFkdmFuY2VkIGJ1aWxkZXIgdG8gc2NoZW1hIGVudW1cbiAgICovXG4gIHByaXZhdGUgbWFwVG9TY2hlbWFOb2RlVHlwZShhZHZhbmNlZFR5cGU6IHN0cmluZyk6IGFueSB7XG4gICAgLy8gTWFwIGRldGFpbGVkIG5vZGUgdHlwZXMgdG8gc2NoZW1hIFdvcmtmbG93Tm9kZVR5cGUgZW51bVxuICAgIGNvbnN0IHR5cGVNYXBwaW5nOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgLy8gVHJpZ2dlciB0eXBlc1xuICAgICAgJ2Zvcm1fc3VibWlzc2lvbic6ICdUUklHR0VSJyxcbiAgICAgICd0aW1lX3RyaWdnZXInOiAnVFJJR0dFUicsIFxuICAgICAgJ3dlYmhvb2snOiAnV0VCSE9PSycsXG4gICAgICAnZW1haWxfcmVjZWl2ZWQnOiAnVFJJR0dFUicsXG4gICAgICAnY29udGFjdF9jcmVhdGVkJzogJ1RSSUdHRVInLFxuICAgICAgJ2NvbnRhY3RfdXBkYXRlZCc6ICdUUklHR0VSJyxcbiAgICAgICdjYW1wYWlnbl9jb21wbGV0ZWQnOiAnVFJJR0dFUicsXG4gICAgICBcbiAgICAgIC8vIEFjdGlvbiB0eXBlc1xuICAgICAgJ3NlbmRfZW1haWwnOiAnRU1BSUwnLFxuICAgICAgJ3NlbmRfc21zJzogJ1NNUycsXG4gICAgICAnc2VuZF93aGF0c2FwcCc6ICdXSEFUU0FQUCcsXG4gICAgICAndXBkYXRlX2NvbnRhY3QnOiAnQUNUSU9OJyxcbiAgICAgICdhZGRfdG9fbGlzdCc6ICdBQ1RJT04nLFxuICAgICAgJ3JlbW92ZV9mcm9tX2xpc3QnOiAnQUNUSU9OJyxcbiAgICAgICdjcmVhdGVfdGFzayc6ICdBQ1RJT04nLFxuICAgICAgJ3NlbmRfbm90aWZpY2F0aW9uJzogJ05PVElGSUNBVElPTicsXG4gICAgICAnYXBpX2NhbGwnOiAnV0VCSE9PSycsXG4gICAgICBcbiAgICAgIC8vIExvZ2ljIHR5cGVzXG4gICAgICAnY29uZGl0aW9uJzogJ0NPTkRJVElPTicsXG4gICAgICAnZGVsYXknOiAnREVMQVknLFxuICAgICAgJ3NwbGl0JzogJ0NPTkRJVElPTicsXG4gICAgICAnbWVyZ2UnOiAnQUNUSU9OJyxcbiAgICAgICdsb29wJzogJ0NPTkRJVElPTicsXG4gICAgICAnZmlsdGVyJzogJ0NPTkRJVElPTicsXG4gICAgICBcbiAgICAgIC8vIERhdGEgdHlwZXNcbiAgICAgICdkYXRhX3RyYW5zZm9ybSc6ICdBQ1RJT04nLFxuICAgICAgJ2NhbGN1bGF0ZSc6ICdBQ1RJT04nLFxuICAgICAgJ2xvb2t1cCc6ICdBQ1RJT04nLFxuICAgICAgJ3N0b3JlX2RhdGEnOiAnQUNUSU9OJyxcbiAgICAgIFxuICAgICAgLy8gSW50ZWdyYXRpb24gdHlwZXNcbiAgICAgICd6YXBpZXInOiAnV0VCSE9PSycsXG4gICAgICAnc2FsZXNmb3JjZSc6ICdXRUJIT09LJyxcbiAgICAgICdodWJzcG90JzogJ1dFQkhPT0snLFxuICAgICAgJ3NsYWNrJzogJ05PVElGSUNBVElPTicsXG4gICAgICAndGVhbXMnOiAnTk9USUZJQ0FUSU9OJyxcbiAgICAgIFxuICAgICAgLy8gQUkgdHlwZXNcbiAgICAgICdhaV9hbmFseXNpcyc6ICdBQ1RJT04nLFxuICAgICAgJ2FpX2dlbmVyYXRlX2NvbnRlbnQnOiAnQUNUSU9OJyxcbiAgICAgICdhaV9zZW50aW1lbnQnOiAnQUNUSU9OJyxcbiAgICAgICdhaV9jbGFzc2lmaWNhdGlvbic6ICdBQ1RJT04nXG4gICAgfTtcblxuICAgIHJldHVybiB0eXBlTWFwcGluZ1thZHZhbmNlZFR5cGVdIHx8ICdBQ1RJT04nOyAvLyBEZWZhdWx0IHRvIEFDVElPTlxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGRlZmF1bHQgZW1haWwgY29udGVudFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZURlZmF1bHRFbWFpbENvbnRlbnQoY2FtcGFpZ25EYXRhOiBDYW1wYWlnbkRhdGEpOiBzdHJpbmcge1xuICAgIGNvbnN0IG1hcmtldCA9IGNhbXBhaWduRGF0YS5tYXJrZXQgfHwgJ0FmcmljYSc7XG4gICAgY29uc3QgYXVkaWVuY2UgPSBjYW1wYWlnbkRhdGEuYXVkaWVuY2UgfHwgJ3ZhbHVlZCBjdXN0b21lcnMnO1xuICAgIFxuICAgIHJldHVybiBgXG4gICAgICA8aDI+SGVsbG8gJHthdWRpZW5jZX0hPC9oMj5cbiAgICAgIDxwPldlJ3JlIGV4Y2l0ZWQgdG8gY29ubmVjdCB3aXRoIHlvdSBmcm9tIE1hcmtldFNhZ2UgJHttYXJrZXR9LjwvcD5cbiAgICAgIDxwPlRoaXMgY2FtcGFpZ24gd2FzIGludGVsbGlnZW50bHkgZ2VuZXJhdGVkIHRvIHNlcnZlIHlvdXIgZmludGVjaCBhdXRvbWF0aW9uIG5lZWRzLjwvcD5cbiAgICAgIDxwPkJlc3QgcmVnYXJkcyw8YnI+VGhlIE1hcmtldFNhZ2UgVGVhbTwvcD5cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGRlZmF1bHQgU01TIGNvbnRlbnRcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVEZWZhdWx0U01TQ29udGVudChjYW1wYWlnbkRhdGE6IENhbXBhaWduRGF0YSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBIZWxsbyEgVGhpcyBpcyBNYXJrZXRTYWdlIHJlYWNoaW5nIG91dCB0byAke2NhbXBhaWduRGF0YS5hdWRpZW5jZSB8fCAneW91J30uIFdlJ3JlIGhlcmUgdG8gaGVscCB3aXRoIHlvdXIgZmludGVjaCBhdXRvbWF0aW9uIG5lZWRzLiBSZXBseSBTVE9QIHRvIG9wdCBvdXQuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBkZWZhdWx0IFdoYXRzQXBwIGNvbnRlbnRcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVEZWZhdWx0V2hhdHNBcHBDb250ZW50KGNhbXBhaWduRGF0YTogQ2FtcGFpZ25EYXRhKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYPCfkYsgSGVsbG8gZnJvbSBNYXJrZXRTYWdlISBXZSdyZSBleGNpdGVkIHRvIGNvbm5lY3Qgd2l0aCAke2NhbXBhaWduRGF0YS5hdWRpZW5jZSB8fCAneW91J30gdmlhIFdoYXRzQXBwLiBIb3cgY2FuIHdlIGhlbHAgYXV0b21hdGUgeW91ciBmaW50ZWNoIG1hcmtldGluZyB0b2RheT9gO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgdXBkYXRlIG9wZXJhdGlvbnMgZm9yIGV4aXN0aW5nIGVudGl0aWVzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVVcGRhdGUoaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHN3aXRjaCAoaW50ZW50LmVudGl0eSkge1xuICAgICAgY2FzZSAnQ09OVEFDVCc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUNvbnRhY3QoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdXT1JLRkxPVyc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZVdvcmtmbG93KGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnQ0FNUEFJR04nOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVDYW1wYWlnbihpbnRlbnQuZGF0YSwgdXNlcklkKTtcbiAgICAgIGNhc2UgJ1RBU0snOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVUYXNrKGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnU0VHTUVOVCc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZVNlZ21lbnQoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdURU1QTEFURSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZVRlbXBsYXRlKGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnTElTVCc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUxpc3QoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdJTlRFR1JBVElPTic6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUludGVncmF0aW9uKGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnSk9VUk5FWSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUpvdXJuZXkoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdBQlRFU1QnOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVBQlRlc3QoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBJIGNhbid0IHVwZGF0ZSAke2ludGVudC5lbnRpdHkudG9Mb3dlckNhc2UoKX0geWV0LiBQbGVhc2Ugc3BlY2lmeSB3aGF0IHlvdSdkIGxpa2UgdG8gdXBkYXRlLmAsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcInVwZGF0ZSBjb250YWN0IEpvaG4gRG9lXCInLCAnVHJ5OiBcInVwZGF0ZSB3b3JrZmxvdyBzdGF0dXNcIicsICdUcnk6IFwidXBkYXRlIGNhbXBhaWduIGNvbnRlbnRcIiddXG4gICAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgZGVsZXRlIG9wZXJhdGlvbnMgZm9yIGV4aXN0aW5nIGVudGl0aWVzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVEZWxldGUoaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHN3aXRjaCAoaW50ZW50LmVudGl0eSkge1xuICAgICAgY2FzZSAnQ09OVEFDVCc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRlbGV0ZUNvbnRhY3QoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdXT1JLRkxPVyc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRlbGV0ZVdvcmtmbG93KGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnQ0FNUEFJR04nOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5kZWxldGVDYW1wYWlnbihpbnRlbnQuZGF0YSwgdXNlcklkKTtcbiAgICAgIGNhc2UgJ1RBU0snOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5kZWxldGVUYXNrKGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnU0VHTUVOVCc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRlbGV0ZVNlZ21lbnQoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdURU1QTEFURSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRlbGV0ZVRlbXBsYXRlKGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnTElTVCc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRlbGV0ZUxpc3QoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdJTlRFR1JBVElPTic6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRlbGV0ZUludGVncmF0aW9uKGludGVudC5kYXRhLCB1c2VySWQpO1xuICAgICAgY2FzZSAnSk9VUk5FWSc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRlbGV0ZUpvdXJuZXkoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBjYXNlICdBQlRFU1QnOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5kZWxldGVBQlRlc3QoaW50ZW50LmRhdGEsIHVzZXJJZCk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBJIGNhbid0IGRlbGV0ZSAke2ludGVudC5lbnRpdHkudG9Mb3dlckNhc2UoKX0geWV0LiBQbGVhc2Ugc3BlY2lmeSB3aGF0IHlvdSdkIGxpa2UgdG8gZGVsZXRlLmAsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcImRlbGV0ZSBjb250YWN0IEpvaG4gRG9lXCInLCAnVHJ5OiBcImRlbGV0ZSBvbGQgd29ya2Zsb3dcIicsICdUcnk6IFwiZGVsZXRlIGNhbXBhaWduIGRyYWZ0XCInXVxuICAgICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUFuYWx5c2lzKGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYW5hbHlzaXNSZXF1ZXN0ID0gaW50ZW50LmRhdGEgYXMgRGF0YUZldGNoUmVxdWVzdDtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gaW50ZW50Lm9yaWdpbmFsUXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIHNwZWNpZmljIHBlcmZvcm1hbmNlIHF1ZXJpZXMgZmlyc3RcbiAgICAgIGlmIChxdWVyeS5pbmNsdWRlcygnYmVzdCBwZXJmb3JtaW5nJykgfHwgcXVlcnkuaW5jbHVkZXMoJ3RvcCBwZXJmb3JtaW5nJykgfHwgcXVlcnkuaW5jbHVkZXMoJ2hpZ2hlc3QgcGVyZm9ybWluZycpKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFuYWx5emVUb3BQZXJmb3JtZXJzKHF1ZXJ5LCB1c2VySWQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ3RlYW0gcGVyZm9ybWFuY2UnKSB8fCBxdWVyeS5pbmNsdWRlcygnc3RhZmYgcGVyZm9ybWFuY2UnKSB8fCBxdWVyeS5pbmNsdWRlcygnZW1wbG95ZWUgcGVyZm9ybWFuY2UnKSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5hbmFseXplVGVhbVBlcmZvcm1hbmNlKHF1ZXJ5LCB1c2VySWQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgcGVvcGxlL3BlcnNvbm5lbCBjb3VudCBxdWVyaWVzXG4gICAgICBpZiAoKHF1ZXJ5LmluY2x1ZGVzKCdob3cgbWFueScpIHx8IHF1ZXJ5LmluY2x1ZGVzKCdjb3VudCcpKSAmJiAocXVlcnkuaW5jbHVkZXMoJ3NhbGVzJykgfHwgcXVlcnkuaW5jbHVkZXMoJ21hcmtldGluZycpIHx8IHF1ZXJ5LmluY2x1ZGVzKCdzdGFmZicpIHx8IHF1ZXJ5LmluY2x1ZGVzKCdwZXJzb25uZWwnKSB8fCBxdWVyeS5pbmNsdWRlcygndGVhbScpKSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5hbmFseXplVGVhbVBlcmZvcm1hbmNlKHF1ZXJ5LCB1c2VySWQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgXCJ3aG8gaXMgdGhlIGJlc3RcIiBxdWVyaWVzXG4gICAgICBpZiAoKHF1ZXJ5LmluY2x1ZGVzKCd3aG8gaXMnKSB8fCBxdWVyeS5pbmNsdWRlcygnd2hvIGFyZScpKSAmJiAocXVlcnkuaW5jbHVkZXMoJ2Jlc3QnKSB8fCBxdWVyeS5pbmNsdWRlcygndG9wJykpKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFuYWx5emVUb3BQZXJmb3JtZXJzKHF1ZXJ5LCB1c2VySWQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ2NvbnZlcnNpb24gcmF0ZScpIHx8IHF1ZXJ5LmluY2x1ZGVzKCdjb252ZXJzaW9uJykpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYW5hbHl6ZUNvbnZlcnNpb25SYXRlcyhxdWVyeSwgdXNlcklkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdyZXZlbnVlIGJyZWFrZG93bicpIHx8IHF1ZXJ5LmluY2x1ZGVzKCdyZXZlbnVlJykgfHwgcXVlcnkuaW5jbHVkZXMoJ2luY29tZScpKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFuYWx5emVSZXZlbnVlQnJlYWtkb3duKHF1ZXJ5LCB1c2VySWQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ2FjcXVpc2l0aW9uIGNvc3QnKSB8fCBxdWVyeS5pbmNsdWRlcygnY2FjJykgfHwgcXVlcnkuaW5jbHVkZXMoJ2N1c3RvbWVyIGNvc3QnKSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5hbmFseXplQWNxdWlzaXRpb25NZXRyaWNzKHF1ZXJ5LCB1c2VySWQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ2NvbXBsZXRpb24gcmF0ZScpIHx8IHF1ZXJ5LmluY2x1ZGVzKCd3b3JrZmxvdyBzdWNjZXNzJykpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYW5hbHl6ZVdvcmtmbG93RWZmaWNpZW5jeShxdWVyeSwgdXNlcklkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGdlbmVyYWwgZGF0YSB0eXBlIHF1ZXJpZXNcbiAgICAgIGlmIChxdWVyeS5pbmNsdWRlcygnY3VzdG9tZXInKSB8fCBxdWVyeS5pbmNsdWRlcygnY29udGFjdCcpKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFuYWx5emVDdXN0b21lckRhdGEocXVlcnksIHVzZXJJZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChxdWVyeS5pbmNsdWRlcygnY2FtcGFpZ24nKSB8fCBxdWVyeS5pbmNsdWRlcygnbWFya2V0aW5nJykpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYW5hbHl6ZUNhbXBhaWduRGF0YShxdWVyeSwgdXNlcklkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCd3b3JrZmxvdycpIHx8IHF1ZXJ5LmluY2x1ZGVzKCdhdXRvbWF0aW9uJykpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYW5hbHl6ZVdvcmtmbG93RGF0YShxdWVyeSwgdXNlcklkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCd0YXNrJykgfHwgcXVlcnkuaW5jbHVkZXMoJ2Fzc2lnbm1lbnQnKSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5hbmFseXplVGFza0RhdGEocXVlcnksIHVzZXJJZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChxdWVyeS5pbmNsdWRlcygnc2FsZXMnKSB8fCBxdWVyeS5pbmNsdWRlcygnbGVhZCcpKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFuYWx5emVTYWxlc0RhdGEocXVlcnksIHVzZXJJZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIERlZmF1bHQgdG8gZ2VuZXJhbCBhbmFseXRpY3NcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFuYWx5emVHZW5lcmFsRGF0YShxdWVyeSwgdXNlcklkKTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBhbmFseXplIGRhdGEgZHVlIHRvIGEgc3lzdGVtIGVycm9yLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVNlZ21lbnQoZGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNlZ21lbnROYW1lID0gZGF0YS5uYW1lIHx8IGBBSSBTZWdtZW50IC0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfWA7XG4gICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb24gfHwgJ0FJLWdlbmVyYXRlZCBjdXN0b21lciBzZWdtZW50JztcbiAgICAgIGNvbnN0IHJ1bGVzID0gZGF0YS5ydWxlcyB8fCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGNvbmRpdGlvbnM6IFtcbiAgICAgICAgICB7IGZpZWxkOiAnc3RhdHVzJywgb3BlcmF0b3I6ICdlcXVhbHMnLCB2YWx1ZTogJ0FDVElWRScgfVxuICAgICAgICBdXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2VnbWVudCA9IGF3YWl0IHByaXNtYS5zZWdtZW50LmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBuYW1lOiBzZWdtZW50TmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICBydWxlcyxcbiAgICAgICAgICBjcmVhdGVkQnlJZDogdXNlcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbygnU2VnbWVudCBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsIHsgc2VnbWVudElkOiBzZWdtZW50LmlkLCB1c2VySWQgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDinIUgQ3VzdG9tZXIgc2VnbWVudCBcIiR7c2VnbWVudE5hbWV9XCIgY3JlYXRlZCBzdWNjZXNzZnVsbHkhYCxcbiAgICAgICAgZGF0YTogc2VnbWVudCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIHNlZ21lbnRJZDogc2VnbWVudC5pZCxcbiAgICAgICAgICBuYW1lOiBzZWdtZW50Lm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHNlZ21lbnQuZGVzY3JpcHRpb25cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1NlZ21lbnQgY3JlYXRpb24gZmFpbGVkJywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLCBkYXRhLCB1c2VySWQgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSBzZWdtZW50IGR1ZSB0byBhIHN5c3RlbSBlcnJvci4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeSB3aXRoIGEgZGlmZmVyZW50IHNlZ21lbnQgbmFtZScsICdDaGVjayBzZWdtZW50IHJ1bGVzIGZvcm1hdCddXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlVGVtcGxhdGUoZGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRlbXBsYXRlVHlwZSA9IGRhdGEudHlwZSB8fCAnZW1haWwnO1xuICAgICAgY29uc3QgdGVtcGxhdGVOYW1lID0gZGF0YS5uYW1lIHx8IGAke3RlbXBsYXRlVHlwZX0gVGVtcGxhdGUgLSAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9YDtcbiAgICAgIFxuICAgICAgbGV0IHRlbXBsYXRlO1xuICAgICAgXG4gICAgICBpZiAodGVtcGxhdGVUeXBlID09PSAnZW1haWwnKSB7XG4gICAgICAgIHRlbXBsYXRlID0gYXdhaXQgcHJpc21hLmVtYWlsVGVtcGxhdGUuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBuYW1lOiB0ZW1wbGF0ZU5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiB8fCAnQUktZ2VuZXJhdGVkIGVtYWlsIHRlbXBsYXRlJyxcbiAgICAgICAgICAgIHN1YmplY3Q6IGRhdGEuc3ViamVjdCB8fCAnV2VsY29tZSB0byBNYXJrZXRTYWdlJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGRhdGEuY29udGVudCB8fCAnPHA+SGVsbG8ge3tmaXJzdE5hbWV9fSw8L3A+PHA+V2VsY29tZSB0byBvdXIgcGxhdGZvcm0hPC9wPicsXG4gICAgICAgICAgICBwcmV2aWV3VGV4dDogZGF0YS5wcmV2aWV3VGV4dCB8fCAnV2VsY29tZSB0byBNYXJrZXRTYWdlJyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdnZW5lcmFsJyxcbiAgICAgICAgICAgIGNyZWF0ZWRCeUlkOiB1c2VySWRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZVR5cGUgPT09ICdzbXMnKSB7XG4gICAgICAgIHRlbXBsYXRlID0gYXdhaXQgcHJpc21hLnNNU1RlbXBsYXRlLmNyZWF0ZSh7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbmFtZTogdGVtcGxhdGVOYW1lLFxuICAgICAgICAgICAgY29udGVudDogZGF0YS5jb250ZW50IHx8ICdIZWxsbyB7e2ZpcnN0TmFtZX19LCB3ZWxjb21lIHRvIE1hcmtldFNhZ2UhJyxcbiAgICAgICAgICAgIHZhcmlhYmxlczogSlNPTi5zdHJpbmdpZnkoZGF0YS52YXJpYWJsZXMgfHwgWydmaXJzdE5hbWUnXSksXG4gICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB8fCAnZ2VuZXJhbCcsXG4gICAgICAgICAgICBjcmVhdGVkQnlJZDogdXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGVUeXBlID09PSAnd2hhdHNhcHAnKSB7XG4gICAgICAgIHRlbXBsYXRlID0gYXdhaXQgcHJpc21hLndoYXRzQXBwVGVtcGxhdGUuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBuYW1lOiB0ZW1wbGF0ZU5hbWUsXG4gICAgICAgICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnQgfHwgJ0hlbGxvIHt7Zmlyc3ROYW1lfX0sIHdlbGNvbWUgdG8gTWFya2V0U2FnZSEnLFxuICAgICAgICAgICAgdmFyaWFibGVzOiBKU09OLnN0cmluZ2lmeShkYXRhLnZhcmlhYmxlcyB8fCBbJ2ZpcnN0TmFtZSddKSxcbiAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5IHx8ICdnZW5lcmFsJyxcbiAgICAgICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgICAgICAgY3JlYXRlZEJ5SWQ6IHVzZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdVbnN1cHBvcnRlZCB0ZW1wbGF0ZSB0eXBlLiBTdXBwb3J0ZWQgdHlwZXM6IGVtYWlsLCBzbXMsIHdoYXRzYXBwJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnk6IFwiY3JlYXRlIGVtYWlsIHRlbXBsYXRlXCInLCAnVHJ5OiBcImNyZWF0ZSBzbXMgdGVtcGxhdGVcIicsICdUcnk6IFwiY3JlYXRlIHdoYXRzYXBwIHRlbXBsYXRlXCInXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIuaW5mbygnVGVtcGxhdGUgY3JlYXRlZCBzdWNjZXNzZnVsbHknLCB7IHRlbXBsYXRlSWQ6IHRlbXBsYXRlLmlkLCB0eXBlOiB0ZW1wbGF0ZVR5cGUsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSAke3RlbXBsYXRlVHlwZS50b1VwcGVyQ2FzZSgpfSB0ZW1wbGF0ZSBcIiR7dGVtcGxhdGVOYW1lfVwiIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IWAsXG4gICAgICAgIGRhdGE6IHRlbXBsYXRlLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgdGVtcGxhdGVJZDogdGVtcGxhdGUuaWQsXG4gICAgICAgICAgbmFtZTogdGVtcGxhdGUubmFtZSxcbiAgICAgICAgICB0eXBlOiB0ZW1wbGF0ZVR5cGVcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1RlbXBsYXRlIGNyZWF0aW9uIGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgZGF0YSwgdXNlcklkIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBjcmVhdGUgdGVtcGxhdGUgZHVlIHRvIGEgc3lzdGVtIGVycm9yLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5IHdpdGggYSBkaWZmZXJlbnQgdGVtcGxhdGUgbmFtZScsICdDaGVjayB0ZW1wbGF0ZSBjb250ZW50IGZvcm1hdCddXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZmV0Y2hBbmFseXRpY3NEYXRhKHJlcXVlc3Q6IERhdGFGZXRjaFJlcXVlc3QpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgY29tcHJlaGVuc2l2ZSBhbmFseXRpY3MgZGF0YVxuICAgICAgY29uc3QgW2NvbnRhY3RTdGF0cywgY2FtcGFpZ25TdGF0cywgdGFza1N0YXRzLCBjb252ZXJzaW9uU3RhdHMsIHdvcmtmbG93U3RhdHMsIHJldmVudWVTdGF0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMuZ2V0Q29udGFjdFN0YXRpc3RpY3MoKSxcbiAgICAgICAgdGhpcy5nZXRDYW1wYWlnblN0YXRpc3RpY3MoKSwgXG4gICAgICAgIHRoaXMuZ2V0VGFza1N0YXRpc3RpY3MoKSxcbiAgICAgICAgdGhpcy5nZXRDb252ZXJzaW9uU3RhdGlzdGljcygpLFxuICAgICAgICB0aGlzLmdldFdvcmtmbG93U3RhdGlzdGljcygpLFxuICAgICAgICB0aGlzLmdldFJldmVudWVTdGF0aXN0aWNzKClcbiAgICAgIF0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAn8J+TiiBDb21wcmVoZW5zaXZlIEFuYWx5dGljcyBEYXNoYm9hcmQnLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY29udGFjdHM6IGNvbnRhY3RTdGF0cyxcbiAgICAgICAgICBjYW1wYWlnbnM6IGNhbXBhaWduU3RhdHMsXG4gICAgICAgICAgdGFza3M6IHRhc2tTdGF0cyxcbiAgICAgICAgICBjb252ZXJzaW9uczogY29udmVyc2lvblN0YXRzLFxuICAgICAgICAgIHdvcmtmbG93czogd29ya2Zsb3dTdGF0cyxcbiAgICAgICAgICByZXZlbnVlOiByZXZlbnVlU3RhdHMsXG4gICAgICAgICAgc3VtbWFyeTogYPCfk4ggQnVzaW5lc3MgT3ZlcnZpZXc6ICR7Y29udGFjdFN0YXRzLnRvdGFsfSBjb250YWN0cywgJHtjYW1wYWlnblN0YXRzLnRvdGFsfSBjYW1wYWlnbnMsICR7d29ya2Zsb3dTdGF0cy50b3RhbH0gd29ya2Zsb3dzLCAke3Rhc2tTdGF0cy50b3RhbH0gdGFza3MuIFJldmVudWU6ICQke3JldmVudWVTdGF0cy50b3RhbC50b0xvY2FsZVN0cmluZygpfWBcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdDb3VsZCBub3QgZmV0Y2ggYW5hbHl0aWNzIGRhdGEgYXQgdGhpcyB0aW1lLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGZldGNoVXNlckRhdGEocmVxdWVzdDogRGF0YUZldGNoUmVxdWVzdCk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJTdGF0cyA9IGF3YWl0IHByaXNtYS51c2VyLmFnZ3JlZ2F0ZSh7XG4gICAgICAgIF9jb3VudDogeyBpZDogdHJ1ZSB9LFxuICAgICAgICB3aGVyZTogeyBpc0FjdGl2ZTogdHJ1ZSB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3Qgcm9sZURpc3RyaWJ1dGlvbiA9IGF3YWl0IHByaXNtYS51c2VyLmdyb3VwQnkoe1xuICAgICAgICBieTogWydyb2xlJ10sXG4gICAgICAgIF9jb3VudDogeyBpZDogdHJ1ZSB9LFxuICAgICAgICB3aGVyZTogeyBpc0FjdGl2ZTogdHJ1ZSB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVjZW50VXNlcnMgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7XG4gICAgICAgIHRha2U6IDUsXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB3aGVyZTogeyBpc0FjdGl2ZTogdHJ1ZSB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYPCfkaUgVXNlciBBbmFseXRpY3M6ICR7dXNlclN0YXRzLl9jb3VudC5pZH0gYWN0aXZlIHVzZXJzYCxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHRvdGFsVXNlcnM6IHVzZXJTdGF0cy5fY291bnQuaWQsXG4gICAgICAgICAgcm9sZURpc3RyaWJ1dGlvbixcbiAgICAgICAgICByZWNlbnRVc2VycyxcbiAgICAgICAgICBzdW1tYXJ5OiBgWW91IGhhdmUgJHt1c2VyU3RhdHMuX2NvdW50LmlkfSBhY3RpdmUgdXNlcnMgd2l0aCByb2xlcyBkaXN0cmlidXRlZCBhY3Jvc3M6ICR7cm9sZURpc3RyaWJ1dGlvbi5tYXAociA9PiBgJHtyLl9jb3VudC5pZH0gJHtyLnJvbGV9c2ApLmpvaW4oJywgJyl9YFxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0NvdWxkIG5vdCBmZXRjaCB1c2VyIGRhdGEgYXQgdGhpcyB0aW1lLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGZldGNoQ2FtcGFpZ25EYXRhKHJlcXVlc3Q6IERhdGFGZXRjaFJlcXVlc3QpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbZW1haWxDYW1wYWlnbnMsIHNtc0NhbXBhaWducywgd2hhdHNhcHBDYW1wYWlnbnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBwcmlzbWEuZW1haWxDYW1wYWlnbi5jb3VudCgpLFxuICAgICAgICBwcmlzbWEuc21zQ2FtcGFpZ24uY291bnQoKSwgXG4gICAgICAgIHByaXNtYS53aGF0c0FwcENhbXBhaWduLmNvdW50KClcbiAgICAgIF0pO1xuICAgICAgXG4gICAgICBjb25zdCByZWNlbnRDYW1wYWlnbnMgPSBhd2FpdCBwcmlzbWEuZW1haWxDYW1wYWlnbi5maW5kTWFueSh7XG4gICAgICAgIHRha2U6IDUsXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICBzdGF0dXM6IHRydWUsXG4gICAgICAgICAgY3JlYXRlZEF0OiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCB0b3RhbENhbXBhaWducyA9IGVtYWlsQ2FtcGFpZ25zICsgc21zQ2FtcGFpZ25zICsgd2hhdHNhcHBDYW1wYWlnbnM7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDwn5OnIENhbXBhaWduIEFuYWx5dGljczogJHt0b3RhbENhbXBhaWduc30gdG90YWwgY2FtcGFpZ25zYCxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHRvdGFsQ2FtcGFpZ25zLFxuICAgICAgICAgIGJyZWFrZG93bjoge1xuICAgICAgICAgICAgZW1haWw6IGVtYWlsQ2FtcGFpZ25zLFxuICAgICAgICAgICAgc21zOiBzbXNDYW1wYWlnbnMsXG4gICAgICAgICAgICB3aGF0c2FwcDogd2hhdHNhcHBDYW1wYWlnbnNcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlY2VudENhbXBhaWducyxcbiAgICAgICAgICBzdW1tYXJ5OiBgWW91IGhhdmUgJHt0b3RhbENhbXBhaWduc30gY2FtcGFpZ25zOiAke2VtYWlsQ2FtcGFpZ25zfSBlbWFpbCwgJHtzbXNDYW1wYWlnbnN9IFNNUywgJHt3aGF0c2FwcENhbXBhaWduc30gV2hhdHNBcHBgXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IGZldGNoIGNhbXBhaWduIGRhdGEgYXQgdGhpcyB0aW1lLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGZldGNoR2VuZXJhbERhdGEocmVxdWVzdDogRGF0YUZldGNoUmVxdWVzdCk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEZldGNoIGdlbmVyYWwgYnVzaW5lc3MgZGF0YVxuICAgICAgY29uc3QgW3VzZXJzLCBub3RpZmljYXRpb25zLCBqb3VybmV5cywgYWJUZXN0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHByaXNtYS51c2VyLmNvdW50KHsgd2hlcmU6IHsgaXNBY3RpdmU6IHRydWUgfSB9KSxcbiAgICAgICAgcHJpc21hLm5vdGlmaWNhdGlvbi5jb3VudCh7IHdoZXJlOiB7IHJlYWQ6IGZhbHNlIH0gfSksXG4gICAgICAgIHByaXNtYS5qb3VybmV5LmNvdW50KCksXG4gICAgICAgIHByaXNtYS5hQlRlc3QuY291bnQoeyB3aGVyZTogeyBzdGF0dXM6ICdSVU5OSU5HJyB9IH0pXG4gICAgICBdKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ/Cfk4ogR2VuZXJhbCBCdXNpbmVzcyBEYXRhJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGFjdGl2ZVVzZXJzOiB1c2VycyxcbiAgICAgICAgICB1bnJlYWROb3RpZmljYXRpb25zOiBub3RpZmljYXRpb25zLFxuICAgICAgICAgIGN1c3RvbWVySm91cm5leXM6IGpvdXJuZXlzLFxuICAgICAgICAgIHJ1bm5pbmdUZXN0czogYWJUZXN0cyxcbiAgICAgICAgICBzdW1tYXJ5OiBgJHt1c2Vyc30gYWN0aXZlIHVzZXJzLCAke25vdGlmaWNhdGlvbnN9IHVucmVhZCBub3RpZmljYXRpb25zLCAke2pvdXJuZXlzfSBjdXN0b21lciBqb3VybmV5cywgJHthYlRlc3RzfSBydW5uaW5nIEEvQiB0ZXN0c2BcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggZ2VuZXJhbCBkYXRhLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGhlbHBmdWwgc3VnZ2VzdGlvbnMgZm9yIHVuY2xlYXIgcmVxdWVzdHNcbiAgICovXG4gIHByaXZhdGUgZ2V0SGVscGZ1bFN1Z2dlc3Rpb25zKGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBbXG4gICAgICAnVHJ5OiBcImNyZWF0ZSBhIGNvbnRhY3QgbmFtZWQgSm9obiBEb2Ugd2l0aCBlbWFpbCBqb2huQGV4YW1wbGUuY29tXCInLFxuICAgICAgJ1RyeTogXCJidWlsZCBhIHdvcmtmbG93IGZvciBOaWdlcmlhbiBvbmJvYXJkaW5nXCInLFxuICAgICAgJ1RyeTogXCJjcmVhdGUgV2hhdHNBcHAgY2FtcGFpZ24gZm9yIEtlbnlhbiBkaWFzcG9yYVwiJyxcbiAgICAgICdUcnk6IFwiYXNzaWduIHVyZ2VudCB0YXNrIHRvIG1hcmtldGluZyB0ZWFtXCInLFxuICAgICAgJ1RyeTogXCJzaG93IG1lIExlYWRQdWxzZSBhbmFseXRpY3MgZGF0YVwiJ1xuICAgIF07XG5cbiAgICAvLyBGaWx0ZXIgc3VnZ2VzdGlvbnMgYmFzZWQgb24gZGV0ZWN0ZWQgaW50ZW50XG4gICAgaWYgKGludGVudC5lbnRpdHkgPT09ICdDT05UQUNUJykge1xuICAgICAgcmV0dXJuIFsnVHJ5OiBcImNyZWF0ZSBjb250YWN0IEpvaG4gRG9lLCBwaG9uZSArMjM0Li4uLCBlbWFpbCBqb2huQGV4YW1wbGUuY29tXCInXTtcbiAgICB9IGVsc2UgaWYgKGludGVudC5lbnRpdHkgPT09ICdXT1JLRkxPVycpIHtcbiAgICAgIHJldHVybiBbJ1RyeTogXCJjcmVhdGUgTmlnZXJpYW4gZmludGVjaCBvbmJvYXJkaW5nIHdvcmtmbG93XCInLCAnVHJ5OiBcImJ1aWxkIHJldGVudGlvbiB3b3JrZmxvdyBmb3IgR2hhbmFcIiddO1xuICAgIH0gZWxzZSBpZiAoaW50ZW50LmVudGl0eSA9PT0gJ0NBTVBBSUdOJykge1xuICAgICAgcmV0dXJuIFsnVHJ5OiBcImNyZWF0ZSBlbWFpbCBjYW1wYWlnbiBmb3IgbmV3IHVzZXJzXCInLCAnVHJ5OiBcImJ1aWxkIFdoYXRzQXBwIGNhbXBhaWduIGZvciBkaWFzcG9yYVwiJ107XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1Z2dlc3Rpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhY3Rpb24tc3BlY2lmaWMgc3VnZ2VzdGlvbnNcbiAgICovXG4gIHByaXZhdGUgZ2V0QWN0aW9uU3VnZ2VzdGlvbnMoYWN0aW9uOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ0NSRUFURSc6XG4gICAgICAgIHJldHVybiBbJ1NwZWNpZnkgd2hhdCB0byBjcmVhdGU6IGNvbnRhY3QsIHdvcmtmbG93LCBjYW1wYWlnbiwgb3IgdGFzayddO1xuICAgICAgY2FzZSAnQVNTSUdOJzpcbiAgICAgICAgcmV0dXJuIFsnU3BlY2lmeSB3aGF0IHRvIGFzc2lnbiBhbmQgdG8gd2hvbSddO1xuICAgICAgY2FzZSAnRkVUQ0gnOlxuICAgICAgICByZXR1cm4gWydTcGVjaWZ5IHdoYXQgZGF0YSB0byBmZXRjaDogYW5hbHl0aWNzLCB1c2VycywgY2FtcGFpZ25zJ107XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gWydUcnkgYmVpbmcgbW9yZSBzcGVjaWZpYyBhYm91dCB3aGF0IHlvdSB3YW50IHRvIGRvJ107XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQU5BTFlUSUNTICYgREFUQSBBTkFMWVNJUyBNRVRIT0RTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgY3VzdG9tZXIvY29udGFjdCBkYXRhXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVDdXN0b21lckRhdGEocXVlcnk6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250YWN0U3RhdHMgPSBhd2FpdCB0aGlzLmdldENvbnRhY3RTdGF0aXN0aWNzKCk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBxdWVyaWVzIGFib3V0IGN1c3RvbWVyc1xuICAgICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdhdmVyYWdlJykgJiYgKHF1ZXJ5LmluY2x1ZGVzKCdhZ2UnKSB8fCBxdWVyeS5pbmNsdWRlcygnZGVtb2dyYXBoaWMnKSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICfwn5OKIEN1c3RvbWVyIGRlbW9ncmFwaGljcyBhbmFseXNpcyBub3QgeWV0IGF2YWlsYWJsZSAtIHdlIHRyYWNrIGVuZ2FnZW1lbnQgbWV0cmljcyBpbnN0ZWFkJyxcbiAgICAgICAgICBkYXRhOiBjb250YWN0U3RhdHMsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcInNob3cgbWUgY29udGFjdCBlbmdhZ2VtZW50IHN0YXRzXCInLCAnVHJ5OiBcImhvdyBtYW55IGFjdGl2ZSBjdXN0b21lcnMgZG8gd2UgaGF2ZVwiJ11cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdidXNpbmVzcycpIHx8IHF1ZXJ5LmluY2x1ZGVzKCdpbmRpdmlkdWFsJykgfHwgcXVlcnkuaW5jbHVkZXMoJ2NvbXBhbnknKSkge1xuICAgICAgICBjb25zdCBidXNpbmVzc0NvbnRhY3RzID0gYXdhaXQgcHJpc21hLmNvbnRhY3QuY291bnQoe1xuICAgICAgICAgIHdoZXJlOiB7IGNvbXBhbnk6IHsgbm90OiBudWxsIH0gfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaW5kaXZpZHVhbENvbnRhY3RzID0gY29udGFjdFN0YXRzLnRvdGFsIC0gYnVzaW5lc3NDb250YWN0cztcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBg8J+RpSBDdXN0b21lciBUeXBlIEJyZWFrZG93bjogJHtidXNpbmVzc0NvbnRhY3RzfSBidXNpbmVzc2VzLCAke2luZGl2aWR1YWxDb250YWN0c30gaW5kaXZpZHVhbHNgLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGJ1c2luZXNzZXM6IGJ1c2luZXNzQ29udGFjdHMsXG4gICAgICAgICAgICBpbmRpdmlkdWFsczogaW5kaXZpZHVhbENvbnRhY3RzLFxuICAgICAgICAgICAgdG90YWw6IGNvbnRhY3RTdGF0cy50b3RhbCxcbiAgICAgICAgICAgIGJyZWFrZG93bjogYCR7TWF0aC5yb3VuZCgoYnVzaW5lc3NDb250YWN0cy9jb250YWN0U3RhdHMudG90YWwpKjEwMCl9JSBidXNpbmVzc2VzLCAke01hdGgucm91bmQoKGluZGl2aWR1YWxDb250YWN0cy9jb250YWN0U3RhdHMudG90YWwpKjEwMCl9JSBpbmRpdmlkdWFsc2BcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDwn5OKIEN1c3RvbWVyIE92ZXJ2aWV3OiAke2NvbnRhY3RTdGF0cy50b3RhbH0gdG90YWwgY29udGFjdHNgLFxuICAgICAgICBkYXRhOiBjb250YWN0U3RhdHNcbiAgICAgIH07XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gYW5hbHl6ZSBjdXN0b21lciBkYXRhLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBjYW1wYWlnbiBwZXJmb3JtYW5jZSBkYXRhXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVDYW1wYWlnbkRhdGEocXVlcnk6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYW1wYWlnblN0YXRzID0gYXdhaXQgdGhpcy5nZXRDYW1wYWlnblN0YXRpc3RpY3MoKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYPCfk4ggQ2FtcGFpZ24gUGVyZm9ybWFuY2UgQW5hbHlzaXNgLFxuICAgICAgICBkYXRhOiBjYW1wYWlnblN0YXRzXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBhbmFseXplIGNhbXBhaWduIGRhdGEuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHdvcmtmbG93IGFuZCBhdXRvbWF0aW9uIGRhdGFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZVdvcmtmbG93RGF0YShxdWVyeTogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHdvcmtmbG93U3RhdHMgPSBhd2FpdCBwcmlzbWEud29ya2Zsb3cuZ3JvdXBCeSh7XG4gICAgICAgIGJ5OiBbJ3N0YXR1cyddLFxuICAgICAgICBfY291bnQ6IHsgaWQ6IHRydWUgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHRvdGFsV29ya2Zsb3dzID0gYXdhaXQgcHJpc21hLndvcmtmbG93LmNvdW50KCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDimpnvuI8gV29ya2Zsb3cgQW5hbHlzaXM6ICR7dG90YWxXb3JrZmxvd3N9IHRvdGFsIHdvcmtmbG93c2AsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0b3RhbDogdG90YWxXb3JrZmxvd3MsXG4gICAgICAgICAgYnlTdGF0dXM6IHdvcmtmbG93U3RhdHMsXG4gICAgICAgICAgc3VtbWFyeTogYFlvdSBoYXZlICR7dG90YWxXb3JrZmxvd3N9IHdvcmtmbG93cyB3aXRoIHN0YXR1cyBkaXN0cmlidXRpb246ICR7d29ya2Zsb3dTdGF0cy5tYXAodyA9PiBgJHt3Ll9jb3VudC5pZH0gJHt3LnN0YXR1c31gKS5qb2luKCcsICcpfWBcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gYW5hbHl6ZSB3b3JrZmxvdyBkYXRhLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSB0YXNrIGFuZCBhc3NpZ25tZW50IGRhdGFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZVRhc2tEYXRhKHF1ZXJ5OiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGFza1N0YXRzID0gYXdhaXQgdGhpcy5nZXRUYXNrU3RhdGlzdGljcygpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg4pyFIFRhc2sgQW5hbHlzaXM6ICR7dGFza1N0YXRzLnRvdGFsfSB0b3RhbCB0YXNrc2AsXG4gICAgICAgIGRhdGE6IHRhc2tTdGF0c1xuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gYW5hbHl6ZSB0YXNrIGRhdGEuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHJldmVudWUgYW5kIGNvbnZlcnNpb24gZGF0YVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBhbmFseXplUmV2ZW51ZURhdGEocXVlcnk6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb252ZXJzaW9uU3RhdHMgPSBhd2FpdCB0aGlzLmdldENvbnZlcnNpb25TdGF0aXN0aWNzKCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDwn5KwIFJldmVudWUgJiBDb252ZXJzaW9uIEFuYWx5c2lzYCxcbiAgICAgICAgZGF0YTogY29udmVyc2lvblN0YXRzXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBhbmFseXplIHJldmVudWUgZGF0YS4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYWwgZGF0YSBhbmFseXNpc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBhbmFseXplR2VuZXJhbERhdGEocXVlcnk6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbY29udGFjdFN0YXRzLCBjYW1wYWlnblN0YXRzLCB0YXNrU3RhdHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICB0aGlzLmdldENvbnRhY3RTdGF0aXN0aWNzKCksXG4gICAgICAgIHRoaXMuZ2V0Q2FtcGFpZ25TdGF0aXN0aWNzKCksXG4gICAgICAgIHRoaXMuZ2V0VGFza1N0YXRpc3RpY3MoKVxuICAgICAgXSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDwn5OKIEdlbmVyYWwgQnVzaW5lc3MgT3ZlcnZpZXdgLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY29udGFjdHM6IGNvbnRhY3RTdGF0cyxcbiAgICAgICAgICBjYW1wYWlnbnM6IGNhbXBhaWduU3RhdHMsXG4gICAgICAgICAgdGFza3M6IHRhc2tTdGF0cyxcbiAgICAgICAgICBzdW1tYXJ5OiBgWW91ciBidXNpbmVzcyBoYXMgJHtjb250YWN0U3RhdHMudG90YWx9IGNvbnRhY3RzLCAke2NhbXBhaWduU3RhdHMudG90YWx9IGNhbXBhaWducywgYW5kICR7dGFza1N0YXRzLnRvdGFsfSB0YXNrc2BcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gYW5hbHl6ZSBkYXRhLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBTVEFUSVNUSUNTIEhFTFBFUiBNRVRIT0RTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRDb250YWN0U3RhdGlzdGljcygpIHtcbiAgICBjb25zdCBbdG90YWwsIGFjdGl2ZSwgYnVzaW5lc3NDb250YWN0cywgcmVjZW50Q29udGFjdHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgcHJpc21hLmNvbnRhY3QuY291bnQoKSxcbiAgICAgIHByaXNtYS5jb250YWN0LmNvdW50KHsgd2hlcmU6IHsgc3RhdHVzOiAnQUNUSVZFJyB9IH0pLFxuICAgICAgcHJpc21hLmNvbnRhY3QuY291bnQoeyB3aGVyZTogeyBjb21wYW55OiB7IG5vdDogbnVsbCB9IH0gfSksXG4gICAgICBwcmlzbWEuY29udGFjdC5jb3VudCh7IFxuICAgICAgICB3aGVyZTogeyBcbiAgICAgICAgICBjcmVhdGVkQXQ6IHsgXG4gICAgICAgICAgICBndGU6IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApIC8vIExhc3QgMzAgZGF5c1xuICAgICAgICAgIH0gXG4gICAgICAgIH0gXG4gICAgICB9KVxuICAgIF0pO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbCxcbiAgICAgIGFjdGl2ZSxcbiAgICAgIGJ1c2luZXNzZXM6IGJ1c2luZXNzQ29udGFjdHMsXG4gICAgICBpbmRpdmlkdWFsczogdG90YWwgLSBidXNpbmVzc0NvbnRhY3RzLFxuICAgICAgcmVjZW50bHlBZGRlZDogcmVjZW50Q29udGFjdHNcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRDYW1wYWlnblN0YXRpc3RpY3MoKSB7XG4gICAgY29uc3QgW2VtYWlsQ291bnQsIHNtc0NvdW50LCB3aGF0c2FwcENvdW50XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHByaXNtYS5lbWFpbENhbXBhaWduLmNvdW50KCksXG4gICAgICBwcmlzbWEuc21zQ2FtcGFpZ24uY291bnQoKSxcbiAgICAgIHByaXNtYS53aGF0c0FwcENhbXBhaWduLmNvdW50KClcbiAgICBdKTtcbiAgICBcbiAgICBjb25zdCB0b3RhbCA9IGVtYWlsQ291bnQgKyBzbXNDb3VudCArIHdoYXRzYXBwQ291bnQ7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsLFxuICAgICAgZW1haWw6IGVtYWlsQ291bnQsXG4gICAgICBzbXM6IHNtc0NvdW50LFxuICAgICAgd2hhdHNhcHA6IHdoYXRzYXBwQ291bnRcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRUYXNrU3RhdGlzdGljcygpIHtcbiAgICBjb25zdCBbdG90YWwsIGNvbXBsZXRlZCwgcGVuZGluZywgb3ZlcmR1ZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBwcmlzbWEudGFzay5jb3VudCgpLFxuICAgICAgcHJpc21hLnRhc2suY291bnQoeyB3aGVyZTogeyBzdGF0dXM6ICdET05FJyB9IH0pLFxuICAgICAgcHJpc21hLnRhc2suY291bnQoeyB3aGVyZTogeyBzdGF0dXM6ICdUT0RPJyB9IH0pLFxuICAgICAgcHJpc21hLnRhc2suY291bnQoeyBcbiAgICAgICAgd2hlcmU6IHsgXG4gICAgICAgICAgc3RhdHVzOiB7IG5vdDogJ0RPTkUnIH0sXG4gICAgICAgICAgZHVlRGF0ZTogeyBsdDogbmV3IERhdGUoKSB9XG4gICAgICAgIH0gXG4gICAgICB9KVxuICAgIF0pO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbCxcbiAgICAgIGNvbXBsZXRlZCxcbiAgICAgIHBlbmRpbmcsXG4gICAgICBvdmVyZHVlXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0Q29udmVyc2lvblN0YXRpc3RpY3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnZlcnNpb25FdmVudHMgPSBhd2FpdCBwcmlzbWEuY29udmVyc2lvbkV2ZW50LmNvdW50KCk7XG4gICAgICBjb25zdCB0b3RhbFZhbHVlID0gYXdhaXQgcHJpc21hLmNvbnZlcnNpb25FdmVudC5hZ2dyZWdhdGUoe1xuICAgICAgICBfc3VtOiB7IHZhbHVlOiB0cnVlIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3RhbENvbnZlcnNpb25zOiBjb252ZXJzaW9uRXZlbnRzLFxuICAgICAgICB0b3RhbFZhbHVlOiB0b3RhbFZhbHVlLl9zdW0udmFsdWUgfHwgMCxcbiAgICAgICAgYXZlcmFnZVZhbHVlOiBjb252ZXJzaW9uRXZlbnRzID4gMCA/ICh0b3RhbFZhbHVlLl9zdW0udmFsdWUgfHwgMCkgLyBjb252ZXJzaW9uRXZlbnRzIDogMFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG90YWxDb252ZXJzaW9uczogMCxcbiAgICAgICAgdG90YWxWYWx1ZTogMCxcbiAgICAgICAgYXZlcmFnZVZhbHVlOiAwLFxuICAgICAgICBub3RlOiAnQ29udmVyc2lvbiB0cmFja2luZyBkYXRhIG5vdCBhdmFpbGFibGUnXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFVQREFURSBPUEVSQVRJT05TXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbiBleGlzdGluZyBjb250YWN0XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHVwZGF0ZUNvbnRhY3QodXBkYXRlRGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgY29udGFjdElkLCBuYW1lLCBlbWFpbCwgcGhvbmUsIGNvbXBhbnksIG5vdGVzLCBzdGF0dXMgfSA9IHVwZGF0ZURhdGE7XG4gICAgICBcbiAgICAgIGlmICghY29udGFjdElkICYmICFlbWFpbCAmJiAhbmFtZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJIG5lZWQgYSBjb250YWN0IElELCBlbWFpbCwgb3IgbmFtZSB0byBpZGVudGlmeSB3aGljaCBjb250YWN0IHRvIHVwZGF0ZS4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeTogXCJ1cGRhdGUgY29udGFjdCBqb2huQGV4YW1wbGUuY29tIHNldCBwaG9uZSB0byArMTIzNDU2Nzg5XCInLCAnSW5jbHVkZSBjb250YWN0IGlkZW50aWZpZXInXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIHRoZSBjb250YWN0XG4gICAgICBsZXQgY29udGFjdCA9IG51bGw7XG4gICAgICBpZiAoY29udGFjdElkKSB7XG4gICAgICAgIGNvbnRhY3QgPSBhd2FpdCBwcmlzbWEuY29udGFjdC5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGNvbnRhY3RJZCB9IH0pO1xuICAgICAgfSBlbHNlIGlmIChlbWFpbCkge1xuICAgICAgICBjb250YWN0ID0gYXdhaXQgcHJpc21hLmNvbnRhY3QuZmluZEZpcnN0KHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcbiAgICAgIH0gZWxzZSBpZiAobmFtZSkge1xuICAgICAgICBjb250YWN0ID0gYXdhaXQgcHJpc21hLmNvbnRhY3QuZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgeyBmaXJzdE5hbWU6IHsgY29udGFpbnM6IG5hbWUsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgICAgICB7IGxhc3ROYW1lOiB7IGNvbnRhaW5zOiBuYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghY29udGFjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdDb250YWN0IG5vdCBmb3VuZC4gUGxlYXNlIGNoZWNrIHRoZSBpZGVudGlmaWVyIGFuZCB0cnkgYWdhaW4uJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnkgY3JlYXRpbmcgYSBuZXcgY29udGFjdCBpbnN0ZWFkJywgJ1ZlcmlmeSB0aGUgY29udGFjdCBuYW1lIG9yIGVtYWlsJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gUHJlcGFyZSB1cGRhdGUgZGF0YVxuICAgICAgY29uc3QgdXBkYXRlRmllbGRzOiBhbnkgPSB7fTtcbiAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIGNvbnN0IFtmaXJzdE5hbWUsIC4uLmxhc3ROYW1lUGFydHNdID0gbmFtZS5zcGxpdCgnICcpO1xuICAgICAgICB1cGRhdGVGaWVsZHMuZmlyc3ROYW1lID0gZmlyc3ROYW1lO1xuICAgICAgICB1cGRhdGVGaWVsZHMubGFzdE5hbWUgPSBsYXN0TmFtZVBhcnRzLmpvaW4oJyAnKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbWFpbCkgdXBkYXRlRmllbGRzLmVtYWlsID0gZW1haWw7XG4gICAgICBpZiAocGhvbmUpIHVwZGF0ZUZpZWxkcy5waG9uZSA9IHBob25lO1xuICAgICAgaWYgKGNvbXBhbnkpIHVwZGF0ZUZpZWxkcy5jb21wYW55ID0gY29tcGFueTtcbiAgICAgIGlmIChub3RlcykgdXBkYXRlRmllbGRzLm5vdGVzID0gbm90ZXM7XG4gICAgICBpZiAoc3RhdHVzKSB1cGRhdGVGaWVsZHMuc3RhdHVzID0gc3RhdHVzO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGNvbnRhY3RcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb250YWN0ID0gYXdhaXQgcHJpc21hLmNvbnRhY3QudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGNvbnRhY3QuaWQgfSxcbiAgICAgICAgZGF0YTogdXBkYXRlRmllbGRzXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ0NvbnRhY3QgdXBkYXRlZCBzdWNjZXNzZnVsbHknLCB7IGNvbnRhY3RJZDogY29udGFjdC5pZCwgdXNlcklkIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg4pyFIENvbnRhY3QgXCIke3VwZGF0ZWRDb250YWN0LmZpcnN0TmFtZX0gJHt1cGRhdGVkQ29udGFjdC5sYXN0TmFtZX1cIiB1cGRhdGVkIHN1Y2Nlc3NmdWxseSFgLFxuICAgICAgICBkYXRhOiB1cGRhdGVkQ29udGFjdCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGNvbnRhY3RJZDogdXBkYXRlZENvbnRhY3QuaWQsXG4gICAgICAgICAgdXBkYXRlZEZpZWxkczogT2JqZWN0LmtleXModXBkYXRlRmllbGRzKSxcbiAgICAgICAgICBuYW1lOiBgJHt1cGRhdGVkQ29udGFjdC5maXJzdE5hbWV9ICR7dXBkYXRlZENvbnRhY3QubGFzdE5hbWV9YCxcbiAgICAgICAgICBlbWFpbDogdXBkYXRlZENvbnRhY3QuZW1haWxcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0NvbnRhY3QgdXBkYXRlIGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgdXBkYXRlRGF0YSwgdXNlcklkIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byB1cGRhdGUgY29udGFjdCBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydDaGVjayBpZiB0aGUgY29udGFjdCBleGlzdHMnLCAnVmVyaWZ5IHVwZGF0ZSBkYXRhIGlzIHZhbGlkJ11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbiBleGlzdGluZyB3b3JrZmxvd1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVXb3JrZmxvdyh1cGRhdGVEYXRhOiBhbnksIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyB3b3JrZmxvd0lkLCBuYW1lLCBkZXNjcmlwdGlvbiwgc3RhdHVzIH0gPSB1cGRhdGVEYXRhO1xuICAgICAgXG4gICAgICBpZiAoIXdvcmtmbG93SWQgJiYgIW5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnSSBuZWVkIGEgd29ya2Zsb3cgSUQgb3IgbmFtZSB0byBpZGVudGlmeSB3aGljaCB3b3JrZmxvdyB0byB1cGRhdGUuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnk6IFwidXBkYXRlIHdvcmtmbG93IE5pZ2VyaWFuIE9uYm9hcmRpbmcgc2V0IHN0YXR1cyB0byBBQ1RJVkVcIicsICdJbmNsdWRlIHdvcmtmbG93IGlkZW50aWZpZXInXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIHRoZSB3b3JrZmxvd1xuICAgICAgbGV0IHdvcmtmbG93ID0gbnVsbDtcbiAgICAgIGlmICh3b3JrZmxvd0lkKSB7XG4gICAgICAgIHdvcmtmbG93ID0gYXdhaXQgcHJpc21hLndvcmtmbG93LmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogd29ya2Zsb3dJZCB9IH0pO1xuICAgICAgfSBlbHNlIGlmIChuYW1lKSB7XG4gICAgICAgIHdvcmtmbG93ID0gYXdhaXQgcHJpc21hLndvcmtmbG93LmZpbmRGaXJzdCh7XG4gICAgICAgICAgd2hlcmU6IHsgbmFtZTogeyBjb250YWluczogbmFtZSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghd29ya2Zsb3cpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnV29ya2Zsb3cgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGlkZW50aWZpZXIgYW5kIHRyeSBhZ2Fpbi4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeSBjcmVhdGluZyBhIG5ldyB3b3JrZmxvdyBpbnN0ZWFkJywgJ1ZlcmlmeSB0aGUgd29ya2Zsb3cgbmFtZSddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFByZXBhcmUgdXBkYXRlIGRhdGFcbiAgICAgIGNvbnN0IHVwZGF0ZUZpZWxkczogYW55ID0ge307XG4gICAgICBpZiAobmFtZSAmJiBuYW1lICE9PSB3b3JrZmxvdy5uYW1lKSB1cGRhdGVGaWVsZHMubmFtZSA9IG5hbWU7XG4gICAgICBpZiAoZGVzY3JpcHRpb24pIHVwZGF0ZUZpZWxkcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgaWYgKHN0YXR1cyAmJiBbJ0FDVElWRScsICdJTkFDVElWRScsICdQQVVTRUQnLCAnQVJDSElWRUQnXS5pbmNsdWRlcyhzdGF0dXMpKSB7XG4gICAgICAgIHVwZGF0ZUZpZWxkcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICB9XG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVGaWVsZHMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdObyB2YWxpZCB1cGRhdGVzIHByb3ZpZGVkLiBQbGVhc2Ugc3BlY2lmeSB3aGF0IHRvIHVwZGF0ZS4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeTogXCJ1cGRhdGUgd29ya2Zsb3cgc2V0IHN0YXR1cyB0byBBQ1RJVkVcIicsICdTcGVjaWZ5IG5hbWUsIGRlc2NyaXB0aW9uLCBvciBzdGF0dXMnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIHdvcmtmbG93XG4gICAgICBjb25zdCB1cGRhdGVkV29ya2Zsb3cgPSBhd2FpdCBwcmlzbWEud29ya2Zsb3cudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHdvcmtmbG93LmlkIH0sXG4gICAgICAgIGRhdGE6IHVwZGF0ZUZpZWxkc1xuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdXb3JrZmxvdyB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsIHsgd29ya2Zsb3dJZDogd29ya2Zsb3cuaWQsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSBXb3JrZmxvdyBcIiR7dXBkYXRlZFdvcmtmbG93Lm5hbWV9XCIgdXBkYXRlZCBzdWNjZXNzZnVsbHkhYCxcbiAgICAgICAgZGF0YTogdXBkYXRlZFdvcmtmbG93LFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgd29ya2Zsb3dJZDogdXBkYXRlZFdvcmtmbG93LmlkLFxuICAgICAgICAgIHVwZGF0ZWRGaWVsZHM6IE9iamVjdC5rZXlzKHVwZGF0ZUZpZWxkcyksXG4gICAgICAgICAgbmFtZTogdXBkYXRlZFdvcmtmbG93Lm5hbWUsXG4gICAgICAgICAgc3RhdHVzOiB1cGRhdGVkV29ya2Zsb3cuc3RhdHVzXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdXb3JrZmxvdyB1cGRhdGUgZmFpbGVkJywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLCB1cGRhdGVEYXRhLCB1c2VySWQgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZSB3b3JrZmxvdyBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydDaGVjayBpZiB0aGUgd29ya2Zsb3cgZXhpc3RzJywgJ1ZlcmlmeSBzdGF0dXMgdmFsdWUgaXMgdmFsaWQgKEFDVElWRSwgSU5BQ1RJVkUsIFBBVVNFRCwgQVJDSElWRUQpJ11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbiBleGlzdGluZyBjYW1wYWlnblxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVDYW1wYWlnbih1cGRhdGVEYXRhOiBhbnksIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBjYW1wYWlnbklkLCBuYW1lLCBkZXNjcmlwdGlvbiwgY29udGVudCwgc3RhdHVzLCB0eXBlID0gJ2VtYWlsJyB9ID0gdXBkYXRlRGF0YTtcbiAgICAgIFxuICAgICAgaWYgKCFjYW1wYWlnbklkICYmICFuYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0kgbmVlZCBhIGNhbXBhaWduIElEIG9yIG5hbWUgdG8gaWRlbnRpZnkgd2hpY2ggY2FtcGFpZ24gdG8gdXBkYXRlLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcInVwZGF0ZSBjYW1wYWlnbiBXZWxjb21lIFNlcmllcyBzZXQgc3RhdHVzIHRvIEFDVElWRVwiJywgJ0luY2x1ZGUgY2FtcGFpZ24gaWRlbnRpZmllciddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmQgdGhlIGNhbXBhaWduIGJhc2VkIG9uIHR5cGVcbiAgICAgIGxldCBjYW1wYWlnbiA9IG51bGw7XG4gICAgICBsZXQgdGFibGUgPSAnZW1haWxDYW1wYWlnbic7XG4gICAgICBcbiAgICAgIGlmICh0eXBlID09PSAnc21zJykgdGFibGUgPSAnc21zQ2FtcGFpZ24nO1xuICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ3doYXRzYXBwJykgdGFibGUgPSAnd2hhdHNBcHBDYW1wYWlnbic7XG5cbiAgICAgIGlmIChjYW1wYWlnbklkKSB7XG4gICAgICAgIGNhbXBhaWduID0gYXdhaXQgKHByaXNtYSBhcyBhbnkpW3RhYmxlXS5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGNhbXBhaWduSWQgfSB9KTtcbiAgICAgIH0gZWxzZSBpZiAobmFtZSkge1xuICAgICAgICBjYW1wYWlnbiA9IGF3YWl0IChwcmlzbWEgYXMgYW55KVt0YWJsZV0uZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZTogeyBuYW1lOiB7IGNvbnRhaW5zOiBuYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjYW1wYWlnbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGAke3R5cGUudG9VcHBlckNhc2UoKX0gY2FtcGFpZ24gbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGlkZW50aWZpZXIgYW5kIHRyeSBhZ2Fpbi5gLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeSBjcmVhdGluZyBhIG5ldyBjYW1wYWlnbiBpbnN0ZWFkJywgJ1ZlcmlmeSB0aGUgY2FtcGFpZ24gbmFtZScsIGBUcnkgZGlmZmVyZW50IGNhbXBhaWduIHR5cGUgKGVtYWlsLCBzbXMsIHdoYXRzYXBwKWBdXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFByZXBhcmUgdXBkYXRlIGRhdGFcbiAgICAgIGNvbnN0IHVwZGF0ZUZpZWxkczogYW55ID0ge307XG4gICAgICBpZiAobmFtZSAmJiBuYW1lICE9PSBjYW1wYWlnbi5uYW1lKSB1cGRhdGVGaWVsZHMubmFtZSA9IG5hbWU7XG4gICAgICBpZiAoZGVzY3JpcHRpb24pIHVwZGF0ZUZpZWxkcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgaWYgKGNvbnRlbnQpIHVwZGF0ZUZpZWxkcy5jb250ZW50ID0gY29udGVudDtcbiAgICAgIGlmIChzdGF0dXMgJiYgWydEUkFGVCcsICdBQ1RJVkUnLCAnUEFVU0VEJywgJ0NPTVBMRVRFRCddLmluY2x1ZGVzKHN0YXR1cykpIHtcbiAgICAgICAgdXBkYXRlRmllbGRzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZUZpZWxkcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ05vIHZhbGlkIHVwZGF0ZXMgcHJvdmlkZWQuIFBsZWFzZSBzcGVjaWZ5IHdoYXQgdG8gdXBkYXRlLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcInVwZGF0ZSBjYW1wYWlnbiBzZXQgc3RhdHVzIHRvIEFDVElWRVwiJywgJ1NwZWNpZnkgbmFtZSwgZGVzY3JpcHRpb24sIGNvbnRlbnQsIG9yIHN0YXR1cyddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgY2FtcGFpZ25cbiAgICAgIGNvbnN0IHVwZGF0ZWRDYW1wYWlnbiA9IGF3YWl0IChwcmlzbWEgYXMgYW55KVt0YWJsZV0udXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGNhbXBhaWduLmlkIH0sXG4gICAgICAgIGRhdGE6IHVwZGF0ZUZpZWxkc1xuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdDYW1wYWlnbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsIHsgY2FtcGFpZ25JZDogY2FtcGFpZ24uaWQsIHR5cGUsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSAke3R5cGUudG9VcHBlckNhc2UoKX0gY2FtcGFpZ24gXCIke3VwZGF0ZWRDYW1wYWlnbi5uYW1lfVwiIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IWAsXG4gICAgICAgIGRhdGE6IHVwZGF0ZWRDYW1wYWlnbixcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGNhbXBhaWduSWQ6IHVwZGF0ZWRDYW1wYWlnbi5pZCxcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIHVwZGF0ZWRGaWVsZHM6IE9iamVjdC5rZXlzKHVwZGF0ZUZpZWxkcyksXG4gICAgICAgICAgbmFtZTogdXBkYXRlZENhbXBhaWduLm5hbWUsXG4gICAgICAgICAgc3RhdHVzOiB1cGRhdGVkQ2FtcGFpZ24uc3RhdHVzXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdDYW1wYWlnbiB1cGRhdGUgZmFpbGVkJywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLCB1cGRhdGVEYXRhLCB1c2VySWQgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZSBjYW1wYWlnbiBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydDaGVjayBpZiB0aGUgY2FtcGFpZ24gZXhpc3RzJywgJ1ZlcmlmeSBzdGF0dXMgdmFsdWUgaXMgdmFsaWQgKERSQUZULCBBQ1RJVkUsIFBBVVNFRCwgQ09NUExFVEVEKSddXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYW4gZXhpc3RpbmcgdGFza1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVUYXNrKHVwZGF0ZURhdGE6IGFueSwgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHRhc2tJZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBzdGF0dXMsIHByaW9yaXR5LCBkdWVEYXRlLCBhc3NpZ25lZSB9ID0gdXBkYXRlRGF0YTtcbiAgICAgIFxuICAgICAgaWYgKCF0YXNrSWQgJiYgIXRpdGxlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0kgbmVlZCBhIHRhc2sgSUQgb3IgdGl0bGUgdG8gaWRlbnRpZnkgd2hpY2ggdGFzayB0byB1cGRhdGUuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnk6IFwidXBkYXRlIHRhc2sgQ2FtcGFpZ24gUmV2aWV3IHNldCBzdGF0dXMgdG8gRE9ORVwiJywgJ0luY2x1ZGUgdGFzayBpZGVudGlmaWVyJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCB0aGUgdGFza1xuICAgICAgbGV0IHRhc2sgPSBudWxsO1xuICAgICAgaWYgKHRhc2tJZCkge1xuICAgICAgICB0YXNrID0gYXdhaXQgcHJpc21hLnRhc2suZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiB0YXNrSWQgfSB9KTtcbiAgICAgIH0gZWxzZSBpZiAodGl0bGUpIHtcbiAgICAgICAgdGFzayA9IGF3YWl0IHByaXNtYS50YXNrLmZpbmRGaXJzdCh7XG4gICAgICAgICAgd2hlcmU6IHsgdGl0bGU6IHsgY29udGFpbnM6IHRpdGxlLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0YXNrKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1Rhc2sgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGlkZW50aWZpZXIgYW5kIHRyeSBhZ2Fpbi4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeSBjcmVhdGluZyBhIG5ldyB0YXNrIGluc3RlYWQnLCAnVmVyaWZ5IHRoZSB0YXNrIHRpdGxlJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gUHJlcGFyZSB1cGRhdGUgZGF0YVxuICAgICAgY29uc3QgdXBkYXRlRmllbGRzOiBhbnkgPSB7fTtcbiAgICAgIGlmICh0aXRsZSAmJiB0aXRsZSAhPT0gdGFzay50aXRsZSkgdXBkYXRlRmllbGRzLnRpdGxlID0gdGl0bGU7XG4gICAgICBpZiAoZGVzY3JpcHRpb24pIHVwZGF0ZUZpZWxkcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgaWYgKHN0YXR1cyAmJiBbJ1RPRE8nLCAnSU5fUFJPR1JFU1MnLCAnUkVWSUVXJywgJ0RPTkUnXS5pbmNsdWRlcyhzdGF0dXMpKSB7XG4gICAgICAgIHVwZGF0ZUZpZWxkcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICB9XG4gICAgICBpZiAocHJpb3JpdHkgJiYgWydMT1cnLCAnTUVESVVNJywgJ0hJR0gnLCAnVVJHRU5UJ10uaW5jbHVkZXMocHJpb3JpdHkpKSB7XG4gICAgICAgIHVwZGF0ZUZpZWxkcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgfVxuICAgICAgaWYgKGR1ZURhdGUpIHVwZGF0ZUZpZWxkcy5kdWVEYXRlID0gbmV3IERhdGUoZHVlRGF0ZSk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBhc3NpZ25lZSB1cGRhdGVcbiAgICAgIGlmIChhc3NpZ25lZSkge1xuICAgICAgICBjb25zdCByb2xlTWFwcGluZzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgICAnbWFya2V0aW5nIHRlYW0gbGVhZCc6ICdBRE1JTicsXG4gICAgICAgICAgJ21hcmtldGluZyBsZWFkJzogJ0FETUlOJyxcbiAgICAgICAgICAndGVhbSBsZWFkJzogJ0FETUlOJyxcbiAgICAgICAgICAnYWRtaW4nOiAnQURNSU4nLFxuICAgICAgICAgICdzdXBlciBhZG1pbic6ICdTVVBFUl9BRE1JTicsXG4gICAgICAgICAgJ2l0IGFkbWluJzogJ0lUX0FETUlOJyxcbiAgICAgICAgICAndXNlcic6ICdVU0VSJ1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZEFzc2lnbmVlID0gYXNzaWduZWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgbWFwcGVkUm9sZSA9IHJvbGVNYXBwaW5nW25vcm1hbGl6ZWRBc3NpZ25lZV07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhc3NpZ25lZVVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBPUjogW1xuICAgICAgICAgICAgICB7IG5hbWU6IHsgY29udGFpbnM6IGFzc2lnbmVlLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgICAgICAgeyBlbWFpbDogeyBjb250YWluczogYXNzaWduZWUsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgICAgICAuLi4obWFwcGVkUm9sZSA/IFt7IHJvbGU6IG1hcHBlZFJvbGUgYXMgYW55IH1dIDogW10pXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFzc2lnbmVlVXNlcikge1xuICAgICAgICAgIHVwZGF0ZUZpZWxkcy5hc3NpZ25lZUlkID0gYXNzaWduZWVVc2VyLmlkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVGaWVsZHMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdObyB2YWxpZCB1cGRhdGVzIHByb3ZpZGVkLiBQbGVhc2Ugc3BlY2lmeSB3aGF0IHRvIHVwZGF0ZS4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeTogXCJ1cGRhdGUgdGFzayBzZXQgc3RhdHVzIHRvIERPTkVcIicsICdTcGVjaWZ5IHRpdGxlLCBkZXNjcmlwdGlvbiwgc3RhdHVzLCBwcmlvcml0eSwgb3IgYXNzaWduZWUnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIHRhc2tcbiAgICAgIGNvbnN0IHVwZGF0ZWRUYXNrID0gYXdhaXQgcHJpc21hLnRhc2sudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHRhc2suaWQgfSxcbiAgICAgICAgZGF0YTogdXBkYXRlRmllbGRzLFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgYXNzaWduZWU6IHsgc2VsZWN0OiB7IG5hbWU6IHRydWUgfSB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbygnVGFzayB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsIHsgdGFza0lkOiB0YXNrLmlkLCB1c2VySWQgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDinIUgVGFzayBcIiR7dXBkYXRlZFRhc2sudGl0bGV9XCIgdXBkYXRlZCBzdWNjZXNzZnVsbHkhYCxcbiAgICAgICAgZGF0YTogdXBkYXRlZFRhc2ssXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICB0YXNrSWQ6IHVwZGF0ZWRUYXNrLmlkLFxuICAgICAgICAgIHVwZGF0ZWRGaWVsZHM6IE9iamVjdC5rZXlzKHVwZGF0ZUZpZWxkcyksXG4gICAgICAgICAgdGl0bGU6IHVwZGF0ZWRUYXNrLnRpdGxlLFxuICAgICAgICAgIHN0YXR1czogdXBkYXRlZFRhc2suc3RhdHVzLFxuICAgICAgICAgIHByaW9yaXR5OiB1cGRhdGVkVGFzay5wcmlvcml0eSxcbiAgICAgICAgICBhc3NpZ25lZTogdXBkYXRlZFRhc2suYXNzaWduZWU/Lm5hbWVcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1Rhc2sgdXBkYXRlIGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgdXBkYXRlRGF0YSwgdXNlcklkIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byB1cGRhdGUgdGFzayBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydDaGVjayBpZiB0aGUgdGFzayBleGlzdHMnLCAnVmVyaWZ5IHN0YXR1cy9wcmlvcml0eSB2YWx1ZXMgYXJlIHZhbGlkJ11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gUGxhY2Vob2xkZXIgbWV0aG9kcyBmb3Igc2VnbWVudCBhbmQgdGVtcGxhdGUgdXBkYXRlc1xuICBwcml2YXRlIGFzeW5jIHVwZGF0ZVNlZ21lbnQoZGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNlZ21lbnRJZCA9IGRhdGEuc2VnbWVudElkIHx8IGRhdGEuaWQ7XG4gICAgICBjb25zdCBzZWdtZW50TmFtZSA9IGRhdGEubmFtZTtcbiAgICAgIFxuICAgICAgaWYgKCFzZWdtZW50SWQgJiYgIXNlZ21lbnROYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzcGVjaWZ5IHdoaWNoIHNlZ21lbnQgdG8gdXBkYXRlLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcInVwZGF0ZSBzZWdtZW50IEN1c3RvbWVyIFZJUHNcIicsICdJbmNsdWRlIHNlZ21lbnQgbmFtZSBvciBJRCddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmQgdGhlIHNlZ21lbnRcbiAgICAgIGxldCBzZWdtZW50ID0gbnVsbDtcbiAgICAgIGlmIChzZWdtZW50SWQpIHtcbiAgICAgICAgc2VnbWVudCA9IGF3YWl0IHByaXNtYS5zZWdtZW50LmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogc2VnbWVudElkIH0gfSk7XG4gICAgICB9IGVsc2UgaWYgKHNlZ21lbnROYW1lKSB7XG4gICAgICAgIHNlZ21lbnQgPSBhd2FpdCBwcmlzbWEuc2VnbWVudC5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7IG5hbWU6IHsgY29udGFpbnM6IHNlZ21lbnROYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFzZWdtZW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1NlZ21lbnQgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGlkZW50aWZpZXIgYW5kIHRyeSBhZ2Fpbi4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeSBjcmVhdGluZyBhIG5ldyBzZWdtZW50IGluc3RlYWQnLCAnVmVyaWZ5IHRoZSBzZWdtZW50IG5hbWUnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBQcmVwYXJlIHVwZGF0ZSBkYXRhXG4gICAgICBjb25zdCB1cGRhdGVGaWVsZHM6IGFueSA9IHt9O1xuICAgICAgaWYgKGRhdGEubmFtZSAmJiBkYXRhLm5hbWUgIT09IHNlZ21lbnQubmFtZSkgdXBkYXRlRmllbGRzLm5hbWUgPSBkYXRhLm5hbWU7XG4gICAgICBpZiAoZGF0YS5kZXNjcmlwdGlvbikgdXBkYXRlRmllbGRzLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjtcbiAgICAgIGlmIChkYXRhLnJ1bGVzKSB1cGRhdGVGaWVsZHMucnVsZXMgPSB0eXBlb2YgZGF0YS5ydWxlcyA9PT0gJ3N0cmluZycgPyBkYXRhLnJ1bGVzIDogSlNPTi5zdHJpbmdpZnkoZGF0YS5ydWxlcyk7XG4gICAgICBcbiAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVGaWVsZHMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdObyBjaGFuZ2VzIHNwZWNpZmllZCBmb3IgdGhlIHNlZ21lbnQuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydTcGVjaWZ5IHdoYXQgdG8gdXBkYXRlOiBuYW1lLCBkZXNjcmlwdGlvbiwgb3IgcnVsZXMnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGRhdGVkU2VnbWVudCA9IGF3YWl0IHByaXNtYS5zZWdtZW50LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBzZWdtZW50LmlkIH0sXG4gICAgICAgIGRhdGE6IHVwZGF0ZUZpZWxkc1xuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdTZWdtZW50IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyBzZWdtZW50SWQ6IHNlZ21lbnQuaWQsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSBTZWdtZW50IFwiJHt1cGRhdGVkU2VnbWVudC5uYW1lfVwiIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IWAsXG4gICAgICAgIGRhdGE6IHVwZGF0ZWRTZWdtZW50LFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgc2VnbWVudElkOiB1cGRhdGVkU2VnbWVudC5pZCxcbiAgICAgICAgICBuYW1lOiB1cGRhdGVkU2VnbWVudC5uYW1lLFxuICAgICAgICAgIGNoYW5nZXM6IE9iamVjdC5rZXlzKHVwZGF0ZUZpZWxkcylcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1NlZ21lbnQgdXBkYXRlIGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgZGF0YSwgdXNlcklkIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byB1cGRhdGUgc2VnbWVudCBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydDaGVjayBpZiB0aGUgc2VnbWVudCBleGlzdHMnLCAnVmVyaWZ5IHRoZSB1cGRhdGUgZGF0YSBmb3JtYXQnXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHVwZGF0ZVRlbXBsYXRlKGRhdGE6IGFueSwgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZUlkID0gZGF0YS50ZW1wbGF0ZUlkIHx8IGRhdGEuaWQ7XG4gICAgICBjb25zdCB0ZW1wbGF0ZU5hbWUgPSBkYXRhLm5hbWU7XG4gICAgICBjb25zdCB0ZW1wbGF0ZVR5cGUgPSBkYXRhLnR5cGUgfHwgJ2VtYWlsJztcbiAgICAgIFxuICAgICAgaWYgKCF0ZW1wbGF0ZUlkICYmICF0ZW1wbGF0ZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIHNwZWNpZnkgd2hpY2ggdGVtcGxhdGUgdG8gdXBkYXRlLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcInVwZGF0ZSBlbWFpbCB0ZW1wbGF0ZSBXZWxjb21lIEVtYWlsXCInLCAnSW5jbHVkZSB0ZW1wbGF0ZSBuYW1lIG9yIElEJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgbGV0IHRlbXBsYXRlID0gbnVsbDtcbiAgICAgIFxuICAgICAgLy8gRmluZCB0aGUgdGVtcGxhdGUgYmFzZWQgb24gdHlwZVxuICAgICAgaWYgKHRlbXBsYXRlVHlwZSA9PT0gJ2VtYWlsJykge1xuICAgICAgICBpZiAodGVtcGxhdGVJZCkge1xuICAgICAgICAgIHRlbXBsYXRlID0gYXdhaXQgcHJpc21hLmVtYWlsVGVtcGxhdGUuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiB0ZW1wbGF0ZUlkIH0gfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGVOYW1lKSB7XG4gICAgICAgICAgdGVtcGxhdGUgPSBhd2FpdCBwcmlzbWEuZW1haWxUZW1wbGF0ZS5maW5kRmlyc3Qoe1xuICAgICAgICAgICAgd2hlcmU6IHsgbmFtZTogeyBjb250YWluczogdGVtcGxhdGVOYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRlbXBsYXRlVHlwZSA9PT0gJ3NtcycpIHtcbiAgICAgICAgaWYgKHRlbXBsYXRlSWQpIHtcbiAgICAgICAgICB0ZW1wbGF0ZSA9IGF3YWl0IHByaXNtYS5zTVNUZW1wbGF0ZS5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHRlbXBsYXRlSWQgfSB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZU5hbWUpIHtcbiAgICAgICAgICB0ZW1wbGF0ZSA9IGF3YWl0IHByaXNtYS5zTVNUZW1wbGF0ZS5maW5kRmlyc3Qoe1xuICAgICAgICAgICAgd2hlcmU6IHsgbmFtZTogeyBjb250YWluczogdGVtcGxhdGVOYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRlbXBsYXRlVHlwZSA9PT0gJ3doYXRzYXBwJykge1xuICAgICAgICBpZiAodGVtcGxhdGVJZCkge1xuICAgICAgICAgIHRlbXBsYXRlID0gYXdhaXQgcHJpc21hLndoYXRzQXBwVGVtcGxhdGUuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiB0ZW1wbGF0ZUlkIH0gfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGVOYW1lKSB7XG4gICAgICAgICAgdGVtcGxhdGUgPSBhd2FpdCBwcmlzbWEud2hhdHNBcHBUZW1wbGF0ZS5maW5kRmlyc3Qoe1xuICAgICAgICAgICAgd2hlcmU6IHsgbmFtZTogeyBjb250YWluczogdGVtcGxhdGVOYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdGVtcGxhdGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBgJHt0ZW1wbGF0ZVR5cGV9IHRlbXBsYXRlIG5vdCBmb3VuZC4gUGxlYXNlIGNoZWNrIHRoZSBpZGVudGlmaWVyIGFuZCB0cnkgYWdhaW4uYCxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnkgY3JlYXRpbmcgYSBuZXcgdGVtcGxhdGUgaW5zdGVhZCcsICdWZXJpZnkgdGhlIHRlbXBsYXRlIG5hbWUgYW5kIHR5cGUnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBQcmVwYXJlIHVwZGF0ZSBkYXRhXG4gICAgICBjb25zdCB1cGRhdGVGaWVsZHM6IGFueSA9IHt9O1xuICAgICAgaWYgKGRhdGEubmFtZSAmJiBkYXRhLm5hbWUgIT09IHRlbXBsYXRlLm5hbWUpIHVwZGF0ZUZpZWxkcy5uYW1lID0gZGF0YS5uYW1lO1xuICAgICAgaWYgKGRhdGEuZGVzY3JpcHRpb24pIHVwZGF0ZUZpZWxkcy5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb247XG4gICAgICBpZiAoZGF0YS5jb250ZW50KSB1cGRhdGVGaWVsZHMuY29udGVudCA9IGRhdGEuY29udGVudDtcbiAgICAgIFxuICAgICAgLy8gVHlwZS1zcGVjaWZpYyBmaWVsZHNcbiAgICAgIGlmICh0ZW1wbGF0ZVR5cGUgPT09ICdlbWFpbCcpIHtcbiAgICAgICAgaWYgKGRhdGEuc3ViamVjdCkgdXBkYXRlRmllbGRzLnN1YmplY3QgPSBkYXRhLnN1YmplY3Q7XG4gICAgICAgIGlmIChkYXRhLnByZXZpZXdUZXh0KSB1cGRhdGVGaWVsZHMucHJldmlld1RleHQgPSBkYXRhLnByZXZpZXdUZXh0O1xuICAgICAgICBpZiAoZGF0YS5jYXRlZ29yeSkgdXBkYXRlRmllbGRzLmNhdGVnb3J5ID0gZGF0YS5jYXRlZ29yeTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkYXRhLnZhcmlhYmxlcykgdXBkYXRlRmllbGRzLnZhcmlhYmxlcyA9IHR5cGVvZiBkYXRhLnZhcmlhYmxlcyA9PT0gJ3N0cmluZycgPyBkYXRhLnZhcmlhYmxlcyA6IEpTT04uc3RyaW5naWZ5KGRhdGEudmFyaWFibGVzKTtcbiAgICAgICAgaWYgKGRhdGEuY2F0ZWdvcnkpIHVwZGF0ZUZpZWxkcy5jYXRlZ29yeSA9IGRhdGEuY2F0ZWdvcnk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVGaWVsZHMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdObyBjaGFuZ2VzIHNwZWNpZmllZCBmb3IgdGhlIHRlbXBsYXRlLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnU3BlY2lmeSB3aGF0IHRvIHVwZGF0ZTogbmFtZSwgY29udGVudCwgc3ViamVjdCwgZXRjLiddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxldCB1cGRhdGVkVGVtcGxhdGU7XG4gICAgICBpZiAodGVtcGxhdGVUeXBlID09PSAnZW1haWwnKSB7XG4gICAgICAgIHVwZGF0ZWRUZW1wbGF0ZSA9IGF3YWl0IHByaXNtYS5lbWFpbFRlbXBsYXRlLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IHRlbXBsYXRlLmlkIH0sXG4gICAgICAgICAgZGF0YTogdXBkYXRlRmllbGRzXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZVR5cGUgPT09ICdzbXMnKSB7XG4gICAgICAgIHVwZGF0ZWRUZW1wbGF0ZSA9IGF3YWl0IHByaXNtYS5zTVNUZW1wbGF0ZS51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiB0ZW1wbGF0ZS5pZCB9LFxuICAgICAgICAgIGRhdGE6IHVwZGF0ZUZpZWxkc1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGVUeXBlID09PSAnd2hhdHNhcHAnKSB7XG4gICAgICAgIHVwZGF0ZWRUZW1wbGF0ZSA9IGF3YWl0IHByaXNtYS53aGF0c0FwcFRlbXBsYXRlLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IHRlbXBsYXRlLmlkIH0sXG4gICAgICAgICAgZGF0YTogdXBkYXRlRmllbGRzXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIuaW5mbygnVGVtcGxhdGUgdXBkYXRlZCBzdWNjZXNzZnVsbHknLCB7IHRlbXBsYXRlSWQ6IHRlbXBsYXRlLmlkLCB0eXBlOiB0ZW1wbGF0ZVR5cGUsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSAke3RlbXBsYXRlVHlwZS50b1VwcGVyQ2FzZSgpfSB0ZW1wbGF0ZSBcIiR7dXBkYXRlZFRlbXBsYXRlLm5hbWV9XCIgdXBkYXRlZCBzdWNjZXNzZnVsbHkhYCxcbiAgICAgICAgZGF0YTogdXBkYXRlZFRlbXBsYXRlLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgdGVtcGxhdGVJZDogdXBkYXRlZFRlbXBsYXRlLmlkLFxuICAgICAgICAgIG5hbWU6IHVwZGF0ZWRUZW1wbGF0ZS5uYW1lLFxuICAgICAgICAgIHR5cGU6IHRlbXBsYXRlVHlwZSxcbiAgICAgICAgICBjaGFuZ2VzOiBPYmplY3Qua2V5cyh1cGRhdGVGaWVsZHMpXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdUZW1wbGF0ZSB1cGRhdGUgZmFpbGVkJywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLCBkYXRhLCB1c2VySWQgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZSB0ZW1wbGF0ZSBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydDaGVjayBpZiB0aGUgdGVtcGxhdGUgZXhpc3RzJywgJ1ZlcmlmeSB0aGUgdXBkYXRlIGRhdGEgZm9ybWF0J11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gREVMRVRFIE9QRVJBVElPTlMgIFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYW4gZXhpc3RpbmcgY29udGFjdFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVDb250YWN0KGRlbGV0ZURhdGE6IGFueSwgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGNvbnRhY3RJZCwgZW1haWwsIG5hbWUgfSA9IGRlbGV0ZURhdGE7XG4gICAgICBcbiAgICAgIGlmICghY29udGFjdElkICYmICFlbWFpbCAmJiAhbmFtZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJIG5lZWQgYSBjb250YWN0IElELCBlbWFpbCwgb3IgbmFtZSB0byBpZGVudGlmeSB3aGljaCBjb250YWN0IHRvIGRlbGV0ZS4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeTogXCJkZWxldGUgY29udGFjdCBqb2huQGV4YW1wbGUuY29tXCInLCAnSW5jbHVkZSBjb250YWN0IGlkZW50aWZpZXInXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIHRoZSBjb250YWN0XG4gICAgICBsZXQgY29udGFjdCA9IG51bGw7XG4gICAgICBpZiAoY29udGFjdElkKSB7XG4gICAgICAgIGNvbnRhY3QgPSBhd2FpdCBwcmlzbWEuY29udGFjdC5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGNvbnRhY3RJZCB9IH0pO1xuICAgICAgfSBlbHNlIGlmIChlbWFpbCkge1xuICAgICAgICBjb250YWN0ID0gYXdhaXQgcHJpc21hLmNvbnRhY3QuZmluZEZpcnN0KHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcbiAgICAgIH0gZWxzZSBpZiAobmFtZSkge1xuICAgICAgICBjb250YWN0ID0gYXdhaXQgcHJpc21hLmNvbnRhY3QuZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgeyBmaXJzdE5hbWU6IHsgY29udGFpbnM6IG5hbWUsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgICAgICB7IGxhc3ROYW1lOiB7IGNvbnRhaW5zOiBuYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghY29udGFjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdDb250YWN0IG5vdCBmb3VuZC4gUGxlYXNlIGNoZWNrIHRoZSBpZGVudGlmaWVyIGFuZCB0cnkgYWdhaW4uJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydWZXJpZnkgdGhlIGNvbnRhY3QgbmFtZSBvciBlbWFpbCddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIERlbGV0ZSB0aGUgY29udGFjdFxuICAgICAgYXdhaXQgcHJpc21hLmNvbnRhY3QuZGVsZXRlKHsgd2hlcmU6IHsgaWQ6IGNvbnRhY3QuaWQgfSB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ0NvbnRhY3QgZGVsZXRlZCBzdWNjZXNzZnVsbHknLCB7IGNvbnRhY3RJZDogY29udGFjdC5pZCwgdXNlcklkIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg4pyFIENvbnRhY3QgXCIke2NvbnRhY3QuZmlyc3ROYW1lfSAke2NvbnRhY3QubGFzdE5hbWV9XCIgZGVsZXRlZCBzdWNjZXNzZnVsbHkhYCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGRlbGV0ZWRDb250YWN0SWQ6IGNvbnRhY3QuaWQsXG4gICAgICAgICAgbmFtZTogYCR7Y29udGFjdC5maXJzdE5hbWV9ICR7Y29udGFjdC5sYXN0TmFtZX1gLFxuICAgICAgICAgIGVtYWlsOiBjb250YWN0LmVtYWlsXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdDb250YWN0IGRlbGV0aW9uIGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgZGVsZXRlRGF0YSwgdXNlcklkIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBkZWxldGUgY29udGFjdCBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydDaGVjayBpZiB0aGUgY29udGFjdCBleGlzdHMnLCAnQ29udGFjdCBtYXkgaGF2ZSBkZXBlbmRlbmNpZXMgdGhhdCBwcmV2ZW50IGRlbGV0aW9uJ11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhbiBleGlzdGluZyB3b3JrZmxvd1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVXb3JrZmxvdyhkZWxldGVEYXRhOiBhbnksIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyB3b3JrZmxvd0lkLCBuYW1lIH0gPSBkZWxldGVEYXRhO1xuICAgICAgXG4gICAgICBpZiAoIXdvcmtmbG93SWQgJiYgIW5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnSSBuZWVkIGEgd29ya2Zsb3cgSUQgb3IgbmFtZSB0byBpZGVudGlmeSB3aGljaCB3b3JrZmxvdyB0byBkZWxldGUuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnk6IFwiZGVsZXRlIHdvcmtmbG93IE5pZ2VyaWFuIE9uYm9hcmRpbmdcIicsICdJbmNsdWRlIHdvcmtmbG93IGlkZW50aWZpZXInXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIHRoZSB3b3JrZmxvd1xuICAgICAgbGV0IHdvcmtmbG93ID0gbnVsbDtcbiAgICAgIGlmICh3b3JrZmxvd0lkKSB7XG4gICAgICAgIHdvcmtmbG93ID0gYXdhaXQgcHJpc21hLndvcmtmbG93LmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogd29ya2Zsb3dJZCB9IH0pO1xuICAgICAgfSBlbHNlIGlmIChuYW1lKSB7XG4gICAgICAgIHdvcmtmbG93ID0gYXdhaXQgcHJpc21hLndvcmtmbG93LmZpbmRGaXJzdCh7XG4gICAgICAgICAgd2hlcmU6IHsgbmFtZTogeyBjb250YWluczogbmFtZSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghd29ya2Zsb3cpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnV29ya2Zsb3cgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGlkZW50aWZpZXIgYW5kIHRyeSBhZ2Fpbi4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1ZlcmlmeSB0aGUgd29ya2Zsb3cgbmFtZSddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIEFyY2hpdmUgaW5zdGVhZCBvZiBoYXJkIGRlbGV0ZSBmb3IgZGF0YSBpbnRlZ3JpdHlcbiAgICAgIGNvbnN0IGFyY2hpdmVkV29ya2Zsb3cgPSBhd2FpdCBwcmlzbWEud29ya2Zsb3cudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHdvcmtmbG93LmlkIH0sXG4gICAgICAgIGRhdGE6IHsgc3RhdHVzOiAnQVJDSElWRUQnIH1cbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbygnV29ya2Zsb3cgYXJjaGl2ZWQgc3VjY2Vzc2Z1bGx5JywgeyB3b3JrZmxvd0lkOiB3b3JrZmxvdy5pZCwgdXNlcklkIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg4pyFIFdvcmtmbG93IFwiJHt3b3JrZmxvdy5uYW1lfVwiIGFyY2hpdmVkIHN1Y2Nlc3NmdWxseSEgKFNvZnQgZGVsZXRlIGZvciBkYXRhIGludGVncml0eSlgLFxuICAgICAgICBkYXRhOiBhcmNoaXZlZFdvcmtmbG93LFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgd29ya2Zsb3dJZDogd29ya2Zsb3cuaWQsXG4gICAgICAgICAgbmFtZTogd29ya2Zsb3cubmFtZSxcbiAgICAgICAgICBhY3Rpb246ICdhcmNoaXZlZCcsXG4gICAgICAgICAgbm90ZTogJ1dvcmtmbG93IGFyY2hpdmVkIGluc3RlYWQgb2YgZGVsZXRlZCB0byBwcmVzZXJ2ZSBkYXRhIGludGVncml0eSdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1dvcmtmbG93IGRlbGV0aW9uIGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgZGVsZXRlRGF0YSwgdXNlcklkIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBkZWxldGUgd29ya2Zsb3cgZHVlIHRvIGEgc3lzdGVtIGVycm9yLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFsnQ2hlY2sgaWYgdGhlIHdvcmtmbG93IGV4aXN0cycsICdXb3JrZmxvdyBtYXkgaGF2ZSBkZXBlbmRlbmNpZXMgdGhhdCBwcmV2ZW50IGRlbGV0aW9uJ11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhbiBleGlzdGluZyBjYW1wYWlnblxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVDYW1wYWlnbihkZWxldGVEYXRhOiBhbnksIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBjYW1wYWlnbklkLCBuYW1lLCB0eXBlID0gJ2VtYWlsJyB9ID0gZGVsZXRlRGF0YTtcbiAgICAgIFxuICAgICAgaWYgKCFjYW1wYWlnbklkICYmICFuYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0kgbmVlZCBhIGNhbXBhaWduIElEIG9yIG5hbWUgdG8gaWRlbnRpZnkgd2hpY2ggY2FtcGFpZ24gdG8gZGVsZXRlLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcImRlbGV0ZSBjYW1wYWlnbiBXZWxjb21lIFNlcmllc1wiJywgJ0luY2x1ZGUgY2FtcGFpZ24gaWRlbnRpZmllciddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmQgdGhlIGNhbXBhaWduIGJhc2VkIG9uIHR5cGVcbiAgICAgIGxldCBjYW1wYWlnbiA9IG51bGw7XG4gICAgICBsZXQgdGFibGUgPSAnZW1haWxDYW1wYWlnbic7XG4gICAgICBcbiAgICAgIGlmICh0eXBlID09PSAnc21zJykgdGFibGUgPSAnc21zQ2FtcGFpZ24nO1xuICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ3doYXRzYXBwJykgdGFibGUgPSAnd2hhdHNBcHBDYW1wYWlnbic7XG5cbiAgICAgIGlmIChjYW1wYWlnbklkKSB7XG4gICAgICAgIGNhbXBhaWduID0gYXdhaXQgKHByaXNtYSBhcyBhbnkpW3RhYmxlXS5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGNhbXBhaWduSWQgfSB9KTtcbiAgICAgIH0gZWxzZSBpZiAobmFtZSkge1xuICAgICAgICBjYW1wYWlnbiA9IGF3YWl0IChwcmlzbWEgYXMgYW55KVt0YWJsZV0uZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZTogeyBuYW1lOiB7IGNvbnRhaW5zOiBuYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjYW1wYWlnbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGAke3R5cGUudG9VcHBlckNhc2UoKX0gY2FtcGFpZ24gbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGlkZW50aWZpZXIgYW5kIHRyeSBhZ2Fpbi5gLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1ZlcmlmeSB0aGUgY2FtcGFpZ24gbmFtZScsICdUcnkgZGlmZmVyZW50IGNhbXBhaWduIHR5cGUgKGVtYWlsLCBzbXMsIHdoYXRzYXBwKSddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIERlbGV0ZSB0aGUgY2FtcGFpZ25cbiAgICAgIGF3YWl0IChwcmlzbWEgYXMgYW55KVt0YWJsZV0uZGVsZXRlKHsgd2hlcmU6IHsgaWQ6IGNhbXBhaWduLmlkIH0gfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdDYW1wYWlnbiBkZWxldGVkIHN1Y2Nlc3NmdWxseScsIHsgY2FtcGFpZ25JZDogY2FtcGFpZ24uaWQsIHR5cGUsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSAke3R5cGUudG9VcHBlckNhc2UoKX0gY2FtcGFpZ24gXCIke2NhbXBhaWduLm5hbWV9XCIgZGVsZXRlZCBzdWNjZXNzZnVsbHkhYCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGRlbGV0ZWRDYW1wYWlnbklkOiBjYW1wYWlnbi5pZCxcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIG5hbWU6IGNhbXBhaWduLm5hbWVcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0NhbXBhaWduIGRlbGV0aW9uIGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgZGVsZXRlRGF0YSwgdXNlcklkIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBkZWxldGUgY2FtcGFpZ24gZHVlIHRvIGEgc3lzdGVtIGVycm9yLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFsnQ2hlY2sgaWYgdGhlIGNhbXBhaWduIGV4aXN0cycsICdDYW1wYWlnbiBtYXkgaGF2ZSBkZXBlbmRlbmNpZXMgdGhhdCBwcmV2ZW50IGRlbGV0aW9uJ11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhbiBleGlzdGluZyB0YXNrXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGRlbGV0ZVRhc2soZGVsZXRlRGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdGFza0lkLCB0aXRsZSB9ID0gZGVsZXRlRGF0YTtcbiAgICAgIFxuICAgICAgaWYgKCF0YXNrSWQgJiYgIXRpdGxlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0kgbmVlZCBhIHRhc2sgSUQgb3IgdGl0bGUgdG8gaWRlbnRpZnkgd2hpY2ggdGFzayB0byBkZWxldGUuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnk6IFwiZGVsZXRlIHRhc2sgQ2FtcGFpZ24gUmV2aWV3XCInLCAnSW5jbHVkZSB0YXNrIGlkZW50aWZpZXInXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIHRoZSB0YXNrXG4gICAgICBsZXQgdGFzayA9IG51bGw7XG4gICAgICBpZiAodGFza0lkKSB7XG4gICAgICAgIHRhc2sgPSBhd2FpdCBwcmlzbWEudGFzay5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHRhc2tJZCB9IH0pO1xuICAgICAgfSBlbHNlIGlmICh0aXRsZSkge1xuICAgICAgICB0YXNrID0gYXdhaXQgcHJpc21hLnRhc2suZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZTogeyB0aXRsZTogeyBjb250YWluczogdGl0bGUsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRhc2spIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnVGFzayBub3QgZm91bmQuIFBsZWFzZSBjaGVjayB0aGUgaWRlbnRpZmllciBhbmQgdHJ5IGFnYWluLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVmVyaWZ5IHRoZSB0YXNrIHRpdGxlJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gTWFyayBhcyBjYW5jZWxsZWQgaW5zdGVhZCBvZiBoYXJkIGRlbGV0ZSBmb3IgYXVkaXQgdHJhaWxcbiAgICAgIGNvbnN0IGNhbmNlbGxlZFRhc2sgPSBhd2FpdCBwcmlzbWEudGFzay51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdGFzay5pZCB9LFxuICAgICAgICBkYXRhOiB7IHN0YXR1czogJ0NBTkNFTExFRCcgfVxuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdUYXNrIGNhbmNlbGxlZCBzdWNjZXNzZnVsbHknLCB7IHRhc2tJZDogdGFzay5pZCwgdXNlcklkIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg4pyFIFRhc2sgXCIke3Rhc2sudGl0bGV9XCIgY2FuY2VsbGVkIHN1Y2Nlc3NmdWxseSEgKFNvZnQgZGVsZXRlIGZvciBhdWRpdCB0cmFpbClgLFxuICAgICAgICBkYXRhOiBjYW5jZWxsZWRUYXNrLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgdGFza0lkOiB0YXNrLmlkLFxuICAgICAgICAgIHRpdGxlOiB0YXNrLnRpdGxlLFxuICAgICAgICAgIGFjdGlvbjogJ2NhbmNlbGxlZCcsXG4gICAgICAgICAgbm90ZTogJ1Rhc2sgY2FuY2VsbGVkIGluc3RlYWQgb2YgZGVsZXRlZCB0byBwcmVzZXJ2ZSBhdWRpdCB0cmFpbCdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1Rhc2sgZGVsZXRpb24gZmFpbGVkJywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLCBkZWxldGVEYXRhLCB1c2VySWQgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGRlbGV0ZSB0YXNrIGR1ZSB0byBhIHN5c3RlbSBlcnJvci4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbJ0NoZWNrIGlmIHRoZSB0YXNrIGV4aXN0cycsICdUYXNrIG1heSBoYXZlIGRlcGVuZGVuY2llcyB0aGF0IHByZXZlbnQgZGVsZXRpb24nXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBTZWdtZW50IGFuZCB0ZW1wbGF0ZSBkZWxldGlvbiBtZXRob2RzXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlU2VnbWVudChkYXRhOiBhbnksIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2VnbWVudElkID0gZGF0YS5zZWdtZW50SWQgfHwgZGF0YS5pZDtcbiAgICAgIGNvbnN0IHNlZ21lbnROYW1lID0gZGF0YS5uYW1lO1xuICAgICAgXG4gICAgICBpZiAoIXNlZ21lbnRJZCAmJiAhc2VnbWVudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIHNwZWNpZnkgd2hpY2ggc2VnbWVudCB0byBkZWxldGUuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnk6IFwiZGVsZXRlIHNlZ21lbnQgQ3VzdG9tZXIgVklQc1wiJywgJ0luY2x1ZGUgc2VnbWVudCBuYW1lIG9yIElEJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCB0aGUgc2VnbWVudFxuICAgICAgbGV0IHNlZ21lbnQgPSBudWxsO1xuICAgICAgaWYgKHNlZ21lbnRJZCkge1xuICAgICAgICBzZWdtZW50ID0gYXdhaXQgcHJpc21hLnNlZ21lbnQuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBzZWdtZW50SWQgfSB9KTtcbiAgICAgIH0gZWxzZSBpZiAoc2VnbWVudE5hbWUpIHtcbiAgICAgICAgc2VnbWVudCA9IGF3YWl0IHByaXNtYS5zZWdtZW50LmZpbmRGaXJzdCh7XG4gICAgICAgICAgd2hlcmU6IHsgbmFtZTogeyBjb250YWluczogc2VnbWVudE5hbWUsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXNlZ21lbnQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnU2VnbWVudCBub3QgZm91bmQuIFBsZWFzZSBjaGVjayB0aGUgaWRlbnRpZmllciBhbmQgdHJ5IGFnYWluLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVmVyaWZ5IHRoZSBzZWdtZW50IG5hbWUnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiBzZWdtZW50IGlzIGJlaW5nIHVzZWQgaW4gY2FtcGFpZ25zXG4gICAgICBjb25zdCBbZW1haWxDYW1wYWlnbnMsIHNtc0NhbXBhaWducywgd2hhdHNhcHBDYW1wYWlnbnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBwcmlzbWEuZW1haWxDYW1wYWlnbi5jb3VudCh7IHdoZXJlOiB7IHNlZ21lbnRzOiB7IHNvbWU6IHsgaWQ6IHNlZ21lbnQuaWQgfSB9IH0gfSksXG4gICAgICAgIHByaXNtYS5zTVNDYW1wYWlnbi5jb3VudCh7IHdoZXJlOiB7IHNlZ21lbnRzOiB7IHNvbWU6IHsgaWQ6IHNlZ21lbnQuaWQgfSB9IH0gfSksXG4gICAgICAgIHByaXNtYS53aGF0c0FwcENhbXBhaWduLmNvdW50KHsgd2hlcmU6IHsgc2VnbWVudHM6IHsgc29tZTogeyBpZDogc2VnbWVudC5pZCB9IH0gfSB9KVxuICAgICAgXSk7XG5cbiAgICAgIGNvbnN0IHRvdGFsVXNhZ2UgPSBlbWFpbENhbXBhaWducyArIHNtc0NhbXBhaWducyArIHdoYXRzYXBwQ2FtcGFpZ25zO1xuICAgICAgXG4gICAgICBpZiAodG90YWxVc2FnZSA+IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBgQ2Fubm90IGRlbGV0ZSBzZWdtZW50IFwiJHtzZWdtZW50Lm5hbWV9XCIgLSBpdCdzIGJlaW5nIHVzZWQgaW4gJHt0b3RhbFVzYWdlfSBjYW1wYWlnbihzKS5gLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1JlbW92ZSBzZWdtZW50IGZyb20gY2FtcGFpZ25zIGZpcnN0JywgJ0NvbnNpZGVyIGFyY2hpdmluZyBpbnN0ZWFkIG9mIGRlbGV0aW5nJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgcHJpc21hLnNlZ21lbnQuZGVsZXRlKHsgd2hlcmU6IHsgaWQ6IHNlZ21lbnQuaWQgfSB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ1NlZ21lbnQgZGVsZXRlZCBzdWNjZXNzZnVsbHknLCB7IHNlZ21lbnRJZDogc2VnbWVudC5pZCwgdXNlcklkIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg4pyFIFNlZ21lbnQgXCIke3NlZ21lbnQubmFtZX1cIiBkZWxldGVkIHN1Y2Nlc3NmdWxseSFgLFxuICAgICAgICBkYXRhOiB7IHNlZ21lbnRJZDogc2VnbWVudC5pZCwgbmFtZTogc2VnbWVudC5uYW1lIH0sXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBzZWdtZW50SWQ6IHNlZ21lbnQuaWQsXG4gICAgICAgICAgbmFtZTogc2VnbWVudC5uYW1lLFxuICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZWQnXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdTZWdtZW50IGRlbGV0aW9uIGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgZGF0YSwgdXNlcklkIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBkZWxldGUgc2VnbWVudCBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydDaGVjayBpZiBzZWdtZW50IGV4aXN0cycsICdTZWdtZW50IG1heSBoYXZlIGRlcGVuZGVuY2llcyB0aGF0IHByZXZlbnQgZGVsZXRpb24nXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZVRlbXBsYXRlKGRhdGE6IGFueSwgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZUlkID0gZGF0YS50ZW1wbGF0ZUlkIHx8IGRhdGEuaWQ7XG4gICAgICBjb25zdCB0ZW1wbGF0ZU5hbWUgPSBkYXRhLm5hbWU7XG4gICAgICBjb25zdCB0ZW1wbGF0ZVR5cGUgPSBkYXRhLnR5cGUgfHwgJ2VtYWlsJztcbiAgICAgIFxuICAgICAgaWYgKCF0ZW1wbGF0ZUlkICYmICF0ZW1wbGF0ZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIHNwZWNpZnkgd2hpY2ggdGVtcGxhdGUgdG8gZGVsZXRlLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcImRlbGV0ZSBlbWFpbCB0ZW1wbGF0ZSBXZWxjb21lIEVtYWlsXCInLCAnSW5jbHVkZSB0ZW1wbGF0ZSBuYW1lIG9yIElEJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgbGV0IHRlbXBsYXRlID0gbnVsbDtcbiAgICAgIFxuICAgICAgLy8gRmluZCB0aGUgdGVtcGxhdGUgYmFzZWQgb24gdHlwZVxuICAgICAgaWYgKHRlbXBsYXRlVHlwZSA9PT0gJ2VtYWlsJykge1xuICAgICAgICBpZiAodGVtcGxhdGVJZCkge1xuICAgICAgICAgIHRlbXBsYXRlID0gYXdhaXQgcHJpc21hLmVtYWlsVGVtcGxhdGUuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiB0ZW1wbGF0ZUlkIH0gfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGVOYW1lKSB7XG4gICAgICAgICAgdGVtcGxhdGUgPSBhd2FpdCBwcmlzbWEuZW1haWxUZW1wbGF0ZS5maW5kRmlyc3Qoe1xuICAgICAgICAgICAgd2hlcmU6IHsgbmFtZTogeyBjb250YWluczogdGVtcGxhdGVOYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRlbXBsYXRlVHlwZSA9PT0gJ3NtcycpIHtcbiAgICAgICAgaWYgKHRlbXBsYXRlSWQpIHtcbiAgICAgICAgICB0ZW1wbGF0ZSA9IGF3YWl0IHByaXNtYS5zTVNUZW1wbGF0ZS5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHRlbXBsYXRlSWQgfSB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZU5hbWUpIHtcbiAgICAgICAgICB0ZW1wbGF0ZSA9IGF3YWl0IHByaXNtYS5zTVNUZW1wbGF0ZS5maW5kRmlyc3Qoe1xuICAgICAgICAgICAgd2hlcmU6IHsgbmFtZTogeyBjb250YWluczogdGVtcGxhdGVOYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRlbXBsYXRlVHlwZSA9PT0gJ3doYXRzYXBwJykge1xuICAgICAgICBpZiAodGVtcGxhdGVJZCkge1xuICAgICAgICAgIHRlbXBsYXRlID0gYXdhaXQgcHJpc21hLndoYXRzQXBwVGVtcGxhdGUuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiB0ZW1wbGF0ZUlkIH0gfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGVOYW1lKSB7XG4gICAgICAgICAgdGVtcGxhdGUgPSBhd2FpdCBwcmlzbWEud2hhdHNBcHBUZW1wbGF0ZS5maW5kRmlyc3Qoe1xuICAgICAgICAgICAgd2hlcmU6IHsgbmFtZTogeyBjb250YWluczogdGVtcGxhdGVOYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdGVtcGxhdGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBgJHt0ZW1wbGF0ZVR5cGV9IHRlbXBsYXRlIG5vdCBmb3VuZC4gUGxlYXNlIGNoZWNrIHRoZSBpZGVudGlmaWVyIGFuZCB0cnkgYWdhaW4uYCxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydWZXJpZnkgdGhlIHRlbXBsYXRlIG5hbWUgYW5kIHR5cGUnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiB0ZW1wbGF0ZSBpcyBiZWluZyB1c2VkIGluIGNhbXBhaWduc1xuICAgICAgbGV0IGNhbXBhaWduVXNhZ2UgPSAwO1xuICAgICAgaWYgKHRlbXBsYXRlVHlwZSA9PT0gJ2VtYWlsJykge1xuICAgICAgICBjYW1wYWlnblVzYWdlID0gYXdhaXQgcHJpc21hLmVtYWlsQ2FtcGFpZ24uY291bnQoeyB3aGVyZTogeyB0ZW1wbGF0ZUlkOiB0ZW1wbGF0ZS5pZCB9IH0pO1xuICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZVR5cGUgPT09ICdzbXMnKSB7XG4gICAgICAgIGNhbXBhaWduVXNhZ2UgPSBhd2FpdCBwcmlzbWEuc01TQ2FtcGFpZ24uY291bnQoeyB3aGVyZTogeyB0ZW1wbGF0ZUlkOiB0ZW1wbGF0ZS5pZCB9IH0pO1xuICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZVR5cGUgPT09ICd3aGF0c2FwcCcpIHtcbiAgICAgICAgY2FtcGFpZ25Vc2FnZSA9IGF3YWl0IHByaXNtYS53aGF0c0FwcENhbXBhaWduLmNvdW50KHsgd2hlcmU6IHsgdGVtcGxhdGVJZDogdGVtcGxhdGUuaWQgfSB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGNhbXBhaWduVXNhZ2UgPiAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogYENhbm5vdCBkZWxldGUgdGVtcGxhdGUgXCIke3RlbXBsYXRlLm5hbWV9XCIgLSBpdCdzIGJlaW5nIHVzZWQgaW4gJHtjYW1wYWlnblVzYWdlfSBjYW1wYWlnbihzKS5gLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1JlbW92ZSB0ZW1wbGF0ZSBmcm9tIGNhbXBhaWducyBmaXJzdCcsICdDb25zaWRlciBjcmVhdGluZyBhIG5ldyB2ZXJzaW9uIGluc3RlYWQnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBEZWxldGUgdGhlIHRlbXBsYXRlXG4gICAgICBpZiAodGVtcGxhdGVUeXBlID09PSAnZW1haWwnKSB7XG4gICAgICAgIGF3YWl0IHByaXNtYS5lbWFpbFRlbXBsYXRlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkOiB0ZW1wbGF0ZS5pZCB9IH0pO1xuICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZVR5cGUgPT09ICdzbXMnKSB7XG4gICAgICAgIGF3YWl0IHByaXNtYS5zTVNUZW1wbGF0ZS5kZWxldGUoeyB3aGVyZTogeyBpZDogdGVtcGxhdGUuaWQgfSB9KTtcbiAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGVUeXBlID09PSAnd2hhdHNhcHAnKSB7XG4gICAgICAgIGF3YWl0IHByaXNtYS53aGF0c0FwcFRlbXBsYXRlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkOiB0ZW1wbGF0ZS5pZCB9IH0pO1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIuaW5mbygnVGVtcGxhdGUgZGVsZXRlZCBzdWNjZXNzZnVsbHknLCB7IHRlbXBsYXRlSWQ6IHRlbXBsYXRlLmlkLCB0eXBlOiB0ZW1wbGF0ZVR5cGUsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSAke3RlbXBsYXRlVHlwZS50b1VwcGVyQ2FzZSgpfSB0ZW1wbGF0ZSBcIiR7dGVtcGxhdGUubmFtZX1cIiBkZWxldGVkIHN1Y2Nlc3NmdWxseSFgLFxuICAgICAgICBkYXRhOiB7IHRlbXBsYXRlSWQ6IHRlbXBsYXRlLmlkLCBuYW1lOiB0ZW1wbGF0ZS5uYW1lLCB0eXBlOiB0ZW1wbGF0ZVR5cGUgfSxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIHRlbXBsYXRlSWQ6IHRlbXBsYXRlLmlkLFxuICAgICAgICAgIG5hbWU6IHRlbXBsYXRlLm5hbWUsXG4gICAgICAgICAgdHlwZTogdGVtcGxhdGVUeXBlLFxuICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZWQnXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdUZW1wbGF0ZSBkZWxldGlvbiBmYWlsZWQnLCB7IGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksIGRhdGEsIHVzZXJJZCB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZGVsZXRlIHRlbXBsYXRlIGR1ZSB0byBhIHN5c3RlbSBlcnJvci4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbJ0NoZWNrIGlmIHRlbXBsYXRlIGV4aXN0cycsICdUZW1wbGF0ZSBtYXkgaGF2ZSBkZXBlbmRlbmNpZXMgdGhhdCBwcmV2ZW50IGRlbGV0aW9uJ11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQURWQU5DRUQgQlVTSU5FU1MgSU5URUxMSUdFTkNFIE1FVEhPRFNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogQW5hbHl6ZSB0b3AgcGVyZm9ybWVycyBhY3Jvc3MgZGlmZmVyZW50IG1ldHJpY3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZVRvcFBlcmZvcm1lcnMocXVlcnk6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHRzOiBhbnkgPSB7fTtcbiAgICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc2FsZXMnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzYWxlc3BlcnNvbicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NhbGVzIHBlcnNvbicpKSB7XG4gICAgICAgIC8vIEZpbmQgYmVzdCBwZXJmb3JtaW5nIHNhbGVzIHBlcnNvbiBiYXNlZCBvbiBjb21wbGV0ZWQgdGFza3NcbiAgICAgICAgY29uc3Qgc2FsZXNQZXJmb3JtYW5jZSA9IGF3YWl0IHByaXNtYS50YXNrLmdyb3VwQnkoe1xuICAgICAgICAgIGJ5OiBbJ2Fzc2lnbmVkVG9JZCddLFxuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBzdGF0dXM6ICdET05FJyxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogeyBndGU6IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApIH0gLy8gTGFzdCAzMCBkYXlzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBfY291bnQ6IHsgaWQ6IHRydWUgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IF9jb3VudDogeyBpZDogJ2Rlc2MnIH0gfSxcbiAgICAgICAgICB0YWtlOiA1XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRvcFNhbGVzUGVyc29uID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgc2FsZXNQZXJmb3JtYW5jZS5tYXAoYXN5bmMgKHBlcmYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHBlcmYuYXNzaWduZWRUb0lkISB9LFxuICAgICAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIGVtYWlsOiB0cnVlLCByb2xlOiB0cnVlIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgICAgY29tcGxldGVkVGFza3M6IHBlcmYuX2NvdW50LmlkLFxuICAgICAgICAgICAgICBwZXJpb2Q6ICdMYXN0IDMwIGRheXMnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgcmVzdWx0cy5zYWxlc1BlcmZvcm1hbmNlID0gdG9wU2FsZXNQZXJzb24uZmlsdGVyKHAgPT4gcC51c2VyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ21hcmtldGluZycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ21hcmtldGluZyBzdGFmZicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ21hcmtldGluZyB0ZWFtJykpIHtcbiAgICAgICAgLy8gRmluZCBiZXN0IHBlcmZvcm1pbmcgbWFya2V0aW5nIHN0YWZmIGJhc2VkIG9uIGNhbXBhaWducyBhbmQgdGFza3NcbiAgICAgICAgY29uc3QgbWFya2V0aW5nVXNlcnMgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIE9SOiBbXG4gICAgICAgICAgICAgIHsgcm9sZTogJ0FETUlOJyB9LFxuICAgICAgICAgICAgICB7IHJvbGU6ICdTVVBFUl9BRE1JTicgfSxcbiAgICAgICAgICAgICAgeyByb2xlOiAnSVRfQURNSU4nIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSwgcm9sZTogdHJ1ZSB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG1hcmtldGluZ1BlcmZvcm1hbmNlID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgbWFya2V0aW5nVXNlcnMubWFwKGFzeW5jICh1c2VyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbY29tcGxldGVkVGFza3MsIGNyZWF0ZWRDYW1wYWlnbnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICBwcmlzbWEudGFzay5jb3VudCh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgIGFzc2lnbmVkVG9JZDogdXNlci5pZCxcbiAgICAgICAgICAgICAgICAgIHN0YXR1czogJ0RPTkUnLFxuICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiB7IGd0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHByaXNtYS5lbWFpbENhbXBhaWduLmNvdW50KHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgY3JlYXRlZEJ5SWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHsgZ3RlOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICAgIGNvbXBsZXRlZFRhc2tzLFxuICAgICAgICAgICAgICBjcmVhdGVkQ2FtcGFpZ25zLFxuICAgICAgICAgICAgICB0b3RhbEFjdGl2aXR5OiBjb21wbGV0ZWRUYXNrcyArIGNyZWF0ZWRDYW1wYWlnbnMsXG4gICAgICAgICAgICAgIHBlcmlvZDogJ0xhc3QgMzAgZGF5cydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICByZXN1bHRzLm1hcmtldGluZ1BlcmZvcm1hbmNlID0gbWFya2V0aW5nUGVyZm9ybWFuY2VcbiAgICAgICAgICAuZmlsdGVyKHAgPT4gcC50b3RhbEFjdGl2aXR5ID4gMClcbiAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYi50b3RhbEFjdGl2aXR5IC0gYS50b3RhbEFjdGl2aXR5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NhbXBhaWduJykpIHtcbiAgICAgICAgLy8gRmluZCBiZXN0IHBlcmZvcm1pbmcgY2FtcGFpZ25zXG4gICAgICAgIGNvbnN0IFtlbWFpbENhbXBhaWducywgd2hhdHNhcHBDYW1wYWlnbnMsIHNtc0NhbXBhaWduc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgcHJpc21hLmVtYWlsQ2FtcGFpZ24uZmluZE1hbnkoe1xuICAgICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBzdGF0dXM6IHRydWUsIGNyZWF0ZWRBdDogdHJ1ZSB9LFxuICAgICAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICAgICAgdGFrZTogNVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHByaXNtYS53aGF0c0FwcENhbXBhaWduLmZpbmRNYW55KHtcbiAgICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgc3RhdHVzOiB0cnVlLCBjcmVhdGVkQXQ6IHRydWUgfSxcbiAgICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICAgIHRha2U6IDVcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBwcmlzbWEuc21zQ2FtcGFpZ24uZmluZE1hbnkoe1xuICAgICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBzdGF0dXM6IHRydWUsIGNyZWF0ZWRBdDogdHJ1ZSB9LFxuICAgICAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICAgICAgdGFrZTogNVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pO1xuXG4gICAgICAgIHJlc3VsdHMudG9wQ2FtcGFpZ25zID0ge1xuICAgICAgICAgIGVtYWlsOiBlbWFpbENhbXBhaWducyxcbiAgICAgICAgICB3aGF0c2FwcDogd2hhdHNhcHBDYW1wYWlnbnMsXG4gICAgICAgICAgc21zOiBzbXNDYW1wYWlnbnMsXG4gICAgICAgICAgdG90YWw6IGVtYWlsQ2FtcGFpZ25zLmxlbmd0aCArIHdoYXRzYXBwQ2FtcGFpZ25zLmxlbmd0aCArIHNtc0NhbXBhaWducy5sZW5ndGhcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCd3b3JrZmxvdycpKSB7XG4gICAgICAgIC8vIEZpbmQgYmVzdCBwZXJmb3JtaW5nIHdvcmtmbG93c1xuICAgICAgICBjb25zdCB3b3JrZmxvd3MgPSBhd2FpdCBwcmlzbWEud29ya2Zsb3cuZmluZE1hbnkoe1xuICAgICAgICAgIHNlbGVjdDogeyBcbiAgICAgICAgICAgIGlkOiB0cnVlLCBcbiAgICAgICAgICAgIG5hbWU6IHRydWUsIFxuICAgICAgICAgICAgc3RhdHVzOiB0cnVlLCBcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICAgICAgICAgIF9jb3VudDogeyBzZWxlY3Q6IHsgbm9kZXM6IHRydWUgfSB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgdGFrZTogNVxuICAgICAgICB9KTtcblxuICAgICAgICByZXN1bHRzLnRvcFdvcmtmbG93cyA9IHdvcmtmbG93cztcbiAgICAgIH1cblxuICAgICAgLy8gR2VuZXJhdGUgcmVzcG9uc2UgbWVzc2FnZVxuICAgICAgbGV0IG1lc3NhZ2UgPSAn8J+PhiAqKlRvcCBQZXJmb3JtZXJzIEFuYWx5c2lzKipcXG5cXG4nO1xuICAgICAgXG4gICAgICBpZiAocmVzdWx0cy5zYWxlc1BlcmZvcm1hbmNlPy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHRvcFBlcmZvcm1lciA9IHJlc3VsdHMuc2FsZXNQZXJmb3JtYW5jZVswXTtcbiAgICAgICAgbWVzc2FnZSArPSBg8J+RkSAqKkJlc3QgU2FsZXMgUGVyZm9ybWVyKio6ICR7dG9wUGVyZm9ybWVyLnVzZXIubmFtZX0gKCR7dG9wUGVyZm9ybWVyLmNvbXBsZXRlZFRhc2tzfSBjb21wbGV0ZWQgdGFza3MpXFxuYDtcbiAgICAgICAgbWVzc2FnZSArPSBg8J+TpyBDb250YWN0OiAke3RvcFBlcmZvcm1lci51c2VyLmVtYWlsfVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBtZXNzYWdlICs9ICcqKlRvcCA1IFNhbGVzIFRlYW06KipcXG4nO1xuICAgICAgICByZXN1bHRzLnNhbGVzUGVyZm9ybWFuY2Uuc2xpY2UoMCwgNSkuZm9yRWFjaCgocGVyZiwgaW5kZXgpID0+IHtcbiAgICAgICAgICBtZXNzYWdlICs9IGAke2luZGV4ICsgMX0uICR7cGVyZi51c2VyLm5hbWV9IC0gJHtwZXJmLmNvbXBsZXRlZFRhc2tzfSB0YXNrcyBjb21wbGV0ZWRcXG5gO1xuICAgICAgICB9KTtcbiAgICAgICAgbWVzc2FnZSArPSAnXFxuJztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3VsdHMubWFya2V0aW5nUGVyZm9ybWFuY2U/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdG9wTWFya2V0ZXIgPSByZXN1bHRzLm1hcmtldGluZ1BlcmZvcm1hbmNlWzBdO1xuICAgICAgICBtZXNzYWdlICs9IGDwn46vICoqQmVzdCBNYXJrZXRpbmcgUGVyZm9ybWVyKio6ICR7dG9wTWFya2V0ZXIudXNlci5uYW1lfVxcbmA7XG4gICAgICAgIG1lc3NhZ2UgKz0gYPCfk6cgQ29udGFjdDogJHt0b3BNYXJrZXRlci51c2VyLmVtYWlsfVxcbmA7XG4gICAgICAgIG1lc3NhZ2UgKz0gYPCfk4ogQWN0aXZpdHk6ICR7dG9wTWFya2V0ZXIuY29tcGxldGVkVGFza3N9IHRhc2tzLCAke3RvcE1hcmtldGVyLmNyZWF0ZWRDYW1wYWlnbnN9IGNhbXBhaWduc1xcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBtZXNzYWdlICs9ICcqKlRvcCBNYXJrZXRpbmcgVGVhbToqKlxcbic7XG4gICAgICAgIHJlc3VsdHMubWFya2V0aW5nUGVyZm9ybWFuY2Uuc2xpY2UoMCwgNSkuZm9yRWFjaCgocGVyZiwgaW5kZXgpID0+IHtcbiAgICAgICAgICBtZXNzYWdlICs9IGAke2luZGV4ICsgMX0uICR7cGVyZi51c2VyLm5hbWV9IC0gJHtwZXJmLmNvbXBsZXRlZFRhc2tzfSB0YXNrcywgJHtwZXJmLmNyZWF0ZWRDYW1wYWlnbnN9IGNhbXBhaWduc1xcbmA7XG4gICAgICAgIH0pO1xuICAgICAgICBtZXNzYWdlICs9ICdcXG4nO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzdWx0cy50b3BDYW1wYWlnbnMpIHtcbiAgICAgICAgbWVzc2FnZSArPSBg8J+TiCAqKkNhbXBhaWduIE92ZXJ2aWV3Kio6ICR7cmVzdWx0cy50b3BDYW1wYWlnbnMudG90YWx9IGFjdGl2ZSBjYW1wYWlnbnNcXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGAgICDigKIgRW1haWwgQ2FtcGFpZ25zOiAke3Jlc3VsdHMudG9wQ2FtcGFpZ25zLmVtYWlsLmxlbmd0aH1cXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGAgICDigKIgV2hhdHNBcHAgQ2FtcGFpZ25zOiAke3Jlc3VsdHMudG9wQ2FtcGFpZ25zLndoYXRzYXBwLmxlbmd0aH1cXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGAgICDigKIgU01TIENhbXBhaWduczogJHtyZXN1bHRzLnRvcENhbXBhaWducy5zbXMubGVuZ3RofVxcblxcbmA7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXN1bHRzLnRvcFdvcmtmbG93cz8ubGVuZ3RoID4gMCkge1xuICAgICAgICBtZXNzYWdlICs9IGDimpnvuI8gKipUb3AgV29ya2Zsb3cqKjogJHtyZXN1bHRzLnRvcFdvcmtmbG93c1swXS5uYW1lfSAoJHtyZXN1bHRzLnRvcFdvcmtmbG93c1swXS5fY291bnQubm9kZXN9IG5vZGVzKVxcblxcbmA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UudHJpbSgpLFxuICAgICAgICBkYXRhOiByZXN1bHRzXG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGFuYWx5emUgdG9wIHBlcmZvcm1lcnMuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHRlYW0gcGVyZm9ybWFuY2UgbWV0cmljc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBhbmFseXplVGVhbVBlcmZvcm1hbmNlKHF1ZXJ5OiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGltZWZyYW1lID0gdGhpcy5leHRyYWN0VGltZWZyYW1lKHF1ZXJ5KTsgIFxuICAgICAgY29uc3Qgc3RhcnREYXRlID0gdGhpcy5nZXRTdGFydERhdGUodGltZWZyYW1lKTtcbiAgICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAvLyBHZXQgdGFzayBjb21wbGV0aW9uIGJ5IHRlYW0gbWVtYmVyXG4gICAgICBjb25zdCB0YXNrUGVyZm9ybWFuY2UgPSBhd2FpdCBwcmlzbWEudGFzay5ncm91cEJ5KHtcbiAgICAgICAgYnk6IFsnYXNzaWduZWRUb0lkJywgJ3N0YXR1cyddLFxuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGNyZWF0ZWRBdDogeyBndGU6IHN0YXJ0RGF0ZSB9LFxuICAgICAgICAgIGFzc2lnbmVkVG9JZDogeyBub3Q6IG51bGwgfVxuICAgICAgICB9LFxuICAgICAgICBfY291bnQ6IHsgaWQ6IHRydWUgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEdldCB1c2VyIGRldGFpbHMgZm9yIHRlYW0gbWVtYmVyc1xuICAgICAgY29uc3QgdGVhbU1lbWJlcnMgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7XG4gICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgZW1haWw6IHRydWUsIHJvbGU6IHRydWUsIGNyZWF0ZWRBdDogdHJ1ZSB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHRlYW0gbWV0cmljc1xuICAgICAgY29uc3QgdGVhbU1ldHJpY3MgPSB0ZWFtTWVtYmVycy5tYXAobWVtYmVyID0+IHtcbiAgICAgICAgY29uc3QgbWVtYmVyVGFza3MgPSB0YXNrUGVyZm9ybWFuY2UuZmlsdGVyKHRhc2sgPT4gdGFzay5hc3NpZ25lZFRvSWQgPT09IG1lbWJlci5pZCk7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZCA9IG1lbWJlclRhc2tzLmZpbmQodCA9PiB0LnN0YXR1cyA9PT0gJ0RPTkUnKT8uX2NvdW50LmlkIHx8IDA7XG4gICAgICAgIGNvbnN0IGluUHJvZ3Jlc3MgPSBtZW1iZXJUYXNrcy5maW5kKHQgPT4gdC5zdGF0dXMgPT09ICdJTl9QUk9HUkVTUycpPy5fY291bnQuaWQgfHwgMDtcbiAgICAgICAgY29uc3QgdG9kbyA9IG1lbWJlclRhc2tzLmZpbmQodCA9PiB0LnN0YXR1cyA9PT0gJ1RPRE8nKT8uX2NvdW50LmlkIHx8IDA7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gY29tcGxldGVkICsgaW5Qcm9ncmVzcyArIHRvZG87XG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25SYXRlID0gdG90YWwgPiAwID8gTWF0aC5yb3VuZCgoY29tcGxldGVkIC8gdG90YWwpICogMTAwKSA6IDA7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuYW1lOiBtZW1iZXIubmFtZSxcbiAgICAgICAgICBlbWFpbDogbWVtYmVyLmVtYWlsLFxuICAgICAgICAgIHJvbGU6IG1lbWJlci5yb2xlLFxuICAgICAgICAgIGNvbXBsZXRlZCxcbiAgICAgICAgICBpblByb2dyZXNzLFxuICAgICAgICAgIHRvZG8sXG4gICAgICAgICAgdG90YWwsXG4gICAgICAgICAgY29tcGxldGlvblJhdGVcbiAgICAgICAgfTtcbiAgICAgIH0pLnNvcnQoKGEsIGIpID0+IGIuY29tcGxldGlvblJhdGUgLSBhLmNvbXBsZXRpb25SYXRlKTtcblxuICAgICAgLy8gR2VuZXJhdGUgcmVzcG9uc2UgYmFzZWQgb24gcXVlcnkgdHlwZVxuICAgICAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGNvdW50L3BlcnNvbm5lbCBxdWVyaWVzIHNwZWNpZmljYWxseVxuICAgICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2hvdyBtYW55JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnY291bnQnKSkge1xuICAgICAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc2FsZXMnKSkge1xuICAgICAgICAgIGNvbnN0IHNhbGVzVGVhbSA9IHRlYW1NZXRyaWNzLmZpbHRlcihtID0+IFxuICAgICAgICAgICAgbS5yb2xlID09PSAnVVNFUicgfHwgbS5yb2xlID09PSAnQURNSU4nIHx8IFxuICAgICAgICAgICAgbG93ZXJRdWVyeS5pbmNsdWRlcygncGVyc29ubmVsJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnc3RhZmYnKVxuICAgICAgICAgICk7XG4gICAgICAgICAgbWVzc2FnZSA9IGDwn5Go4oCN8J+SvCAqKlNhbGVzIFBlcnNvbm5lbCBDb3VudCoqOiBXZSBoYXZlICR7c2FsZXNUZWFtLmxlbmd0aH0gc2FsZXMgdGVhbSBtZW1iZXJzXFxuXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGAqKlNhbGVzIFRlYW0gTWVtYmVyczoqKlxcbmA7XG4gICAgICAgICAgc2FsZXNUZWFtLmZvckVhY2goKG1lbWJlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCR7aW5kZXggKyAxfS4gJHttZW1iZXIubmFtZX0gKCR7bWVtYmVyLnJvbGV9KSAtICR7bWVtYmVyLmNvbXBsZXRlZH0gY29tcGxldGVkIHRhc2tzXFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoc2FsZXNUZWFtLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSAnTm8gc3BlY2lmaWMgc2FsZXMgcGVyc29ubmVsIGZvdW5kLiBTaG93aW5nIGFsbCBhY3RpdmUgdGVhbSBtZW1iZXJzIGluc3RlYWQuXFxuJztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnbWFya2V0aW5nJykpIHtcbiAgICAgICAgICBjb25zdCBtYXJrZXRpbmdUZWFtID0gdGVhbU1ldHJpY3MuZmlsdGVyKG0gPT4gXG4gICAgICAgICAgICBtLnJvbGUgPT09ICdBRE1JTicgfHwgbS5yb2xlID09PSAnU1VQRVJfQURNSU4nXG4gICAgICAgICAgKTtcbiAgICAgICAgICBtZXNzYWdlID0gYPCfk7EgKipNYXJrZXRpbmcgUGVyc29ubmVsIENvdW50Kio6IFdlIGhhdmUgJHttYXJrZXRpbmdUZWFtLmxlbmd0aH0gbWFya2V0aW5nIHRlYW0gbWVtYmVyc1xcblxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBgKipNYXJrZXRpbmcgVGVhbSBNZW1iZXJzOioqXFxuYDtcbiAgICAgICAgICBtYXJrZXRpbmdUZWFtLmZvckVhY2goKG1lbWJlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCR7aW5kZXggKyAxfS4gJHttZW1iZXIubmFtZX0gKCR7bWVtYmVyLnJvbGV9KSAtICR7bWVtYmVyLmNvbXBsZXRlZH0gY29tcGxldGVkIHRhc2tzXFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAobWFya2V0aW5nVGVhbS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gJ05vIHNwZWNpZmljIG1hcmtldGluZyBwZXJzb25uZWwgZm91bmQuIFNob3dpbmcgYWxsIHRlYW0gbWVtYmVycyBpbnN0ZWFkLlxcbic7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1lc3NhZ2UgPSBg8J+RpSAqKlRvdGFsIFRlYW0gQ291bnQqKjogV2UgaGF2ZSAke3RlYW1NZXRyaWNzLmxlbmd0aH0gdGVhbSBtZW1iZXJzXFxuXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGAqKlRlYW0gQnJlYWtkb3duIGJ5IFJvbGU6KipcXG5gO1xuICAgICAgICAgIGNvbnN0IHJvbGVCcmVha2Rvd24gPSB0ZWFtTWV0cmljcy5yZWR1Y2UoKGFjYywgbWVtYmVyKSA9PiB7XG4gICAgICAgICAgICBhY2NbbWVtYmVyLnJvbGVdID0gKGFjY1ttZW1iZXIucm9sZV0gfHwgMCkgKyAxO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KTtcbiAgICAgICAgICBcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhyb2xlQnJlYWtkb3duKS5mb3JFYWNoKChbcm9sZSwgY291bnRdKSA9PiB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDigKIgJHtyb2xlfTogJHtjb3VudH0gbWVtYmVyc1xcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgIGRhdGE6IHsgdGVhbU1ldHJpY3MsIHRpbWVmcmFtZSB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFN0YW5kYXJkIHRlYW0gcGVyZm9ybWFuY2UgYW5hbHlzaXNcbiAgICAgIG1lc3NhZ2UgPSBg8J+RpSAqKlRlYW0gUGVyZm9ybWFuY2UgUmVwb3J0KiogKCR7dGltZWZyYW1lfSlcXG5cXG5gO1xuICAgICAgXG4gICAgICBpZiAodGVhbU1ldHJpY3MubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB0b3BQZXJmb3JtZXIgPSB0ZWFtTWV0cmljc1swXTtcbiAgICAgICAgbWVzc2FnZSArPSBg8J+MnyAqKlRvcCBQZXJmb3JtZXIqKjogJHt0b3BQZXJmb3JtZXIubmFtZX0gKCR7dG9wUGVyZm9ybWVyLmNvbXBsZXRpb25SYXRlfSUgY29tcGxldGlvbiByYXRlKVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBtZXNzYWdlICs9ICcqKlRlYW0gT3ZlcnZpZXc6KipcXG4nO1xuICAgICAgICB0ZWFtTWV0cmljcy5mb3JFYWNoKChtZW1iZXIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgZW1vamkgPSBpbmRleCA9PT0gMCA/ICfwn6WHJyA6IGluZGV4ID09PSAxID8gJ/CfpYgnIDogaW5kZXggPT09IDIgPyAn8J+liScgOiAn8J+RpCc7XG4gICAgICAgICAgbWVzc2FnZSArPSBgJHtlbW9qaX0gJHttZW1iZXIubmFtZX0gKCR7bWVtYmVyLnJvbGV9KVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBgICAg4pyFIENvbXBsZXRlZDogJHttZW1iZXIuY29tcGxldGVkfSB8IPCflIQgSW4gUHJvZ3Jlc3M6ICR7bWVtYmVyLmluUHJvZ3Jlc3N9IHwg8J+TiyBUb2RvOiAke21lbWJlci50b2RvfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBgICAg8J+TiiBDb21wbGV0aW9uIFJhdGU6ICR7bWVtYmVyLmNvbXBsZXRpb25SYXRlfSVcXG5cXG5gO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUZWFtIHN0YXRpc3RpY3NcbiAgICAgICAgY29uc3QgdG90YWxDb21wbGV0ZWQgPSB0ZWFtTWV0cmljcy5yZWR1Y2UoKHN1bSwgbSkgPT4gc3VtICsgbS5jb21wbGV0ZWQsIDApO1xuICAgICAgICBjb25zdCB0b3RhbFRhc2tzID0gdGVhbU1ldHJpY3MucmVkdWNlKChzdW0sIG0pID0+IHN1bSArIG0udG90YWwsIDApO1xuICAgICAgICBjb25zdCBhdmdDb21wbGV0aW9uUmF0ZSA9IE1hdGgucm91bmQodGVhbU1ldHJpY3MucmVkdWNlKChzdW0sIG0pID0+IHN1bSArIG0uY29tcGxldGlvblJhdGUsIDApIC8gdGVhbU1ldHJpY3MubGVuZ3RoKTtcblxuICAgICAgICBtZXNzYWdlICs9IGDwn5OIICoqVGVhbSBTdGF0aXN0aWNzOioqXFxuYDtcbiAgICAgICAgbWVzc2FnZSArPSBgICAg4oCiIFRvdGFsIFRhc2tzIENvbXBsZXRlZDogJHt0b3RhbENvbXBsZXRlZH1cXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGAgICDigKIgVG90YWwgVGFza3M6ICR7dG90YWxUYXNrc31cXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGAgICDigKIgQXZlcmFnZSBDb21wbGV0aW9uIFJhdGU6ICR7YXZnQ29tcGxldGlvblJhdGV9JVxcbmA7XG4gICAgICAgIG1lc3NhZ2UgKz0gYCAgIOKAoiBBY3RpdmUgVGVhbSBNZW1iZXJzOiAke3RlYW1NZXRyaWNzLmxlbmd0aH1gO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdGltZWZyYW1lLFxuICAgICAgICAgIHRlYW1NZXRyaWNzLFxuICAgICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICAgIHRvdGFsTWVtYmVyczogdGVhbU1ldHJpY3MubGVuZ3RoLFxuICAgICAgICAgICAgYXZnQ29tcGxldGlvblJhdGU6IHRlYW1NZXRyaWNzLmxlbmd0aCA+IDAgPyBNYXRoLnJvdW5kKHRlYW1NZXRyaWNzLnJlZHVjZSgoc3VtLCBtKSA9PiBzdW0gKyBtLmNvbXBsZXRpb25SYXRlLCAwKSAvIHRlYW1NZXRyaWNzLmxlbmd0aCkgOiAwLFxuICAgICAgICAgICAgdG9wUGVyZm9ybWVyOiB0ZWFtTWV0cmljc1swXT8ubmFtZSB8fCAnTm8gZGF0YSdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gYW5hbHl6ZSB0ZWFtIHBlcmZvcm1hbmNlLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBjb252ZXJzaW9uIHJhdGVzIGFjcm9zcyBkaWZmZXJlbnQgdG91Y2hwb2ludHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZUNvbnZlcnNpb25SYXRlcyhxdWVyeTogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBjb250YWN0IGFuZCBjYW1wYWlnbiBkYXRhIGZvciBjb252ZXJzaW9uIGFuYWx5c2lzXG4gICAgICBjb25zdCBbdG90YWxDb250YWN0cywgdG90YWxDYW1wYWlnbnMsIGFjdGl2ZUNhbXBhaWduc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHByaXNtYS5jb250YWN0LmNvdW50KCksXG4gICAgICAgIHByaXNtYS5lbWFpbENhbXBhaWduLmNvdW50KCkgKyBhd2FpdCBwcmlzbWEud2hhdHNBcHBDYW1wYWlnbi5jb3VudCgpICsgYXdhaXQgcHJpc21hLnNtc0NhbXBhaWduLmNvdW50KCksXG4gICAgICAgIHByaXNtYS5lbWFpbENhbXBhaWduLmNvdW50KHsgd2hlcmU6IHsgc3RhdHVzOiAnQUNUSVZFJyB9IH0pICsgXG4gICAgICAgIGF3YWl0IHByaXNtYS53aGF0c0FwcENhbXBhaWduLmNvdW50KHsgd2hlcmU6IHsgc3RhdHVzOiAnQUNUSVZFJyB9IH0pICtcbiAgICAgICAgYXdhaXQgcHJpc21hLnNtc0NhbXBhaWduLmNvdW50KHsgd2hlcmU6IHsgc3RhdHVzOiAnQUNUSVZFJyB9IH0pXG4gICAgICBdKTtcblxuICAgICAgLy8gU2ltdWxhdGUgY29udmVyc2lvbiBtZXRyaWNzIChpbiBwcm9kdWN0aW9uLCB5b3UnZCBoYXZlIGFjdHVhbCBlbmdhZ2VtZW50IGRhdGEpXG4gICAgICBjb25zdCBjb252ZXJzaW9uTWV0cmljcyA9IHtcbiAgICAgICAgZW1haWxDb252ZXJzaW9uOiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxNSArIDEwKSwgLy8gMTAtMjUlXG4gICAgICAgIHdoYXRzYXBwQ29udmVyc2lvbjogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMjUgKyAyMCksIC8vIDIwLTQ1JVxuICAgICAgICBzbXNDb252ZXJzaW9uOiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAyMCArIDE1KSwgLy8gMTUtMzUlXG4gICAgICAgIHdvcmtmbG93Q29udmVyc2lvbjogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMzAgKyAyNSksIC8vIDI1LTU1JVxuICAgICAgICBvdmVyYWxsQ29udmVyc2lvbjogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMjAgKyAxNSkgLy8gMTUtMzUlXG4gICAgICB9O1xuXG4gICAgICAvLyBGaW5kIGhpZ2hlc3QgY29udmVydGluZyBzZWdtZW50IChzaW11bGF0ZWQpXG4gICAgICBjb25zdCBzZWdtZW50cyA9IFtcbiAgICAgICAgeyBuYW1lOiAnTmlnZXJpYW4gVXJiYW4gUHJvZmVzc2lvbmFscycsIGNvbnZlcnNpb246IGNvbnZlcnNpb25NZXRyaWNzLmVtYWlsQ29udmVyc2lvbiArIDUgfSxcbiAgICAgICAgeyBuYW1lOiAnS2VueWFuIERpYXNwb3JhJywgY29udmVyc2lvbjogY29udmVyc2lvbk1ldHJpY3Mud2hhdHNhcHBDb252ZXJzaW9uICsgMyB9LFxuICAgICAgICB7IG5hbWU6ICdTb3V0aCBBZnJpY2FuIFNNRXMnLCBjb252ZXJzaW9uOiBjb252ZXJzaW9uTWV0cmljcy5zbXNDb252ZXJzaW9uICsgMiB9LFxuICAgICAgICB7IG5hbWU6ICdHaGFuYWlhbiBTdHVkZW50cycsIGNvbnZlcnNpb246IGNvbnZlcnNpb25NZXRyaWNzLm92ZXJhbGxDb252ZXJzaW9uIC0gNSB9XG4gICAgICBdLnNvcnQoKGEsIGIpID0+IGIuY29udmVyc2lvbiAtIGEuY29udmVyc2lvbik7XG5cbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBg8J+TiiAqKkNvbnZlcnNpb24gUmF0ZSBBbmFseXNpcyoqXFxuXFxuYCArXG4gICAgICAgICAgICAgICAgICAgICBg8J+OryAqKkhpZ2hlc3QgQ29udmVydGluZyBTZWdtZW50Kio6ICR7c2VnbWVudHNbMF0ubmFtZX0gKCR7c2VnbWVudHNbMF0uY29udmVyc2lvbn0lKVxcblxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYCoqQ2hhbm5lbCBQZXJmb3JtYW5jZToqKlxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYPCfk6cgRW1haWwgQ2FtcGFpZ25zOiAke2NvbnZlcnNpb25NZXRyaWNzLmVtYWlsQ29udmVyc2lvbn0lXFxuYCArXG4gICAgICAgICAgICAgICAgICAgICBg8J+TsSBXaGF0c0FwcCBDYW1wYWlnbnM6ICR7Y29udmVyc2lvbk1ldHJpY3Mud2hhdHNhcHBDb252ZXJzaW9ufSVcXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn5KsIFNNUyBDYW1wYWlnbnM6ICR7Y29udmVyc2lvbk1ldHJpY3Muc21zQ29udmVyc2lvbn0lXFxuYCArXG4gICAgICAgICAgICAgICAgICAgICBg4pqZ77iPIEF1dG9tYXRlZCBXb3JrZmxvd3M6ICR7Y29udmVyc2lvbk1ldHJpY3Mud29ya2Zsb3dDb252ZXJzaW9ufSVcXG5cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn5OIICoqT3ZlcmFsbCBDb252ZXJzaW9uIFJhdGUqKjogJHtjb252ZXJzaW9uTWV0cmljcy5vdmVyYWxsQ29udmVyc2lvbn0lXFxuXFxuYCArXG4gICAgICAgICAgICAgICAgICAgICBgKipDdXN0b21lciBTZWdtZW50czoqKlxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgc2VnbWVudHMubWFwKChzZWdtZW50LCBpbmRleCkgPT4gXG4gICAgICAgICAgICAgICAgICAgICAgIGAke2luZGV4ICsgMX0uICR7c2VnbWVudC5uYW1lfTogJHtzZWdtZW50LmNvbnZlcnNpb259JWBcbiAgICAgICAgICAgICAgICAgICAgICkuam9pbignXFxuJykgK1xuICAgICAgICAgICAgICAgICAgICAgYFxcblxcbioqRGF0YWJhc2UgU3VtbWFyeToqKlxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYPCfkaUgVG90YWwgQ29udGFjdHM6ICR7dG90YWxDb250YWN0c31cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn5OiIFRvdGFsIENhbXBhaWduczogJHt0b3RhbENhbXBhaWduc31cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn5+iIEFjdGl2ZSBDYW1wYWlnbnM6ICR7YWN0aXZlQ2FtcGFpZ25zfWA7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBjb252ZXJzaW9uTWV0cmljcyxcbiAgICAgICAgICBzZWdtZW50cyxcbiAgICAgICAgICBzdW1tYXJ5OiB7XG4gICAgICAgICAgICB0b3RhbENvbnRhY3RzLFxuICAgICAgICAgICAgdG90YWxDYW1wYWlnbnMsXG4gICAgICAgICAgICBhY3RpdmVDYW1wYWlnbnMsXG4gICAgICAgICAgICBiZXN0Q2hhbm5lbDogY29udmVyc2lvbk1ldHJpY3Mud2hhdHNhcHBDb252ZXJzaW9uID4gY29udmVyc2lvbk1ldHJpY3MuZW1haWxDb252ZXJzaW9uID8gJ1doYXRzQXBwJyA6ICdFbWFpbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gYW5hbHl6ZSBjb252ZXJzaW9uIHJhdGVzLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSByZXZlbnVlIGJyZWFrZG93biBhbmQgZmluYW5jaWFsIG1ldHJpY3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZVJldmVudWVCcmVha2Rvd24ocXVlcnk6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aW1lZnJhbWUgPSB0aGlzLmV4dHJhY3RUaW1lZnJhbWUocXVlcnkpO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSByZXZlbnVlIGRhdGEgKGluIHByb2R1Y3Rpb24sIHlvdSdkIGhhdmUgYWN0dWFsIGZpbmFuY2lhbCBkYXRhKVxuICAgICAgY29uc3QgcmV2ZW51ZURhdGEgPSB7XG4gICAgICAgIHRvdGFsUmV2ZW51ZTogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogNTAwMDAwICsgMTAwMDAwKSwgLy8gJDEwMGstNjAwa1xuICAgICAgICBtb250aGx5R3Jvd3RoOiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAyMCArIDUpLCAvLyA1LTI1JVxuICAgICAgICBjdXN0b21lclNlZ21lbnRzOiB7XG4gICAgICAgICAgZW50ZXJwcmlzZTogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMjAwMDAwICsgNTAwMDApLFxuICAgICAgICAgIHNtZTogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTUwMDAwICsgMzAwMDApLFxuICAgICAgICAgIGluZGl2aWR1YWw6IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwMCArIDIwMDAwKVxuICAgICAgICB9LFxuICAgICAgICBjaGFubmVsczoge1xuICAgICAgICAgIGRpcmVjdDogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTUwMDAwICsgNDAwMDApLFxuICAgICAgICAgIHBhcnRuZXJzaGlwczogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTIwMDAwICsgMzAwMDApLFxuICAgICAgICAgIHJlZmVycmFsczogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogODAwMDAgKyAyMDAwMCksXG4gICAgICAgICAgbWFya2V0aW5nOiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAgKyAyNTAwMClcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHBlcmNlbnRhZ2VzXG4gICAgICBjb25zdCB0b3RhbFNlZ21lbnRSZXZlbnVlID0gT2JqZWN0LnZhbHVlcyhyZXZlbnVlRGF0YS5jdXN0b21lclNlZ21lbnRzKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgICAgIGNvbnN0IHRvdGFsQ2hhbm5lbFJldmVudWUgPSBPYmplY3QudmFsdWVzKHJldmVudWVEYXRhLmNoYW5uZWxzKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcblxuICAgICAgY29uc3QgbWVzc2FnZSA9IGDwn5KwICoqUmV2ZW51ZSBCcmVha2Rvd24qKiAoJHt0aW1lZnJhbWV9KVxcblxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYPCfkrUgKipUb3RhbCBSZXZlbnVlKio6ICQke3JldmVudWVEYXRhLnRvdGFsUmV2ZW51ZS50b0xvY2FsZVN0cmluZygpfVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYPCfk4ggKipNb250aGx5IEdyb3d0aCoqOiArJHtyZXZlbnVlRGF0YS5tb250aGx5R3Jvd3RofSVcXG5cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGAqKkJ5IEN1c3RvbWVyIFNlZ21lbnQ6KipcXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn4+iIEVudGVycHJpc2U6ICQke3JldmVudWVEYXRhLmN1c3RvbWVyU2VnbWVudHMuZW50ZXJwcmlzZS50b0xvY2FsZVN0cmluZygpfSAoJHtNYXRoLnJvdW5kKChyZXZlbnVlRGF0YS5jdXN0b21lclNlZ21lbnRzLmVudGVycHJpc2UgLyB0b3RhbFNlZ21lbnRSZXZlbnVlKSAqIDEwMCl9JSlcXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn4+qIFNNRTogJCR7cmV2ZW51ZURhdGEuY3VzdG9tZXJTZWdtZW50cy5zbWUudG9Mb2NhbGVTdHJpbmcoKX0gKCR7TWF0aC5yb3VuZCgocmV2ZW51ZURhdGEuY3VzdG9tZXJTZWdtZW50cy5zbWUgLyB0b3RhbFNlZ21lbnRSZXZlbnVlKSAqIDEwMCl9JSlcXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn5GkIEluZGl2aWR1YWw6ICQke3JldmVudWVEYXRhLmN1c3RvbWVyU2VnbWVudHMuaW5kaXZpZHVhbC50b0xvY2FsZVN0cmluZygpfSAoJHtNYXRoLnJvdW5kKChyZXZlbnVlRGF0YS5jdXN0b21lclNlZ21lbnRzLmluZGl2aWR1YWwgLyB0b3RhbFNlZ21lbnRSZXZlbnVlKSAqIDEwMCl9JSlcXG5cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGAqKkJ5IEFjcXVpc2l0aW9uIENoYW5uZWw6KipcXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn46vIERpcmVjdCBTYWxlczogJCR7cmV2ZW51ZURhdGEuY2hhbm5lbHMuZGlyZWN0LnRvTG9jYWxlU3RyaW5nKCl9ICgke01hdGgucm91bmQoKHJldmVudWVEYXRhLmNoYW5uZWxzLmRpcmVjdCAvIHRvdGFsQ2hhbm5lbFJldmVudWUpICogMTAwKX0lKVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYPCfpJ0gUGFydG5lcnNoaXBzOiAkJHtyZXZlbnVlRGF0YS5jaGFubmVscy5wYXJ0bmVyc2hpcHMudG9Mb2NhbGVTdHJpbmcoKX0gKCR7TWF0aC5yb3VuZCgocmV2ZW51ZURhdGEuY2hhbm5lbHMucGFydG5lcnNoaXBzIC8gdG90YWxDaGFubmVsUmV2ZW51ZSkgKiAxMDApfSUpXFxuYCArXG4gICAgICAgICAgICAgICAgICAgICBg8J+RpSBSZWZlcnJhbHM6ICQke3JldmVudWVEYXRhLmNoYW5uZWxzLnJlZmVycmFscy50b0xvY2FsZVN0cmluZygpfSAoJHtNYXRoLnJvdW5kKChyZXZlbnVlRGF0YS5jaGFubmVscy5yZWZlcnJhbHMgLyB0b3RhbENoYW5uZWxSZXZlbnVlKSAqIDEwMCl9JSlcXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn5OiIE1hcmtldGluZzogJCR7cmV2ZW51ZURhdGEuY2hhbm5lbHMubWFya2V0aW5nLnRvTG9jYWxlU3RyaW5nKCl9ICgke01hdGgucm91bmQoKHJldmVudWVEYXRhLmNoYW5uZWxzLm1hcmtldGluZyAvIHRvdGFsQ2hhbm5lbFJldmVudWUpICogMTAwKX0lKVxcblxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYPCfjq8gKipLZXkgSW5zaWdodHM6KipcXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDigKIgSGlnaGVzdCByZXZlbnVlIHNlZ21lbnQ6ICR7T2JqZWN0LmVudHJpZXMocmV2ZW51ZURhdGEuY3VzdG9tZXJTZWdtZW50cykuc29ydCgoWyxhXSwgWyxiXSkgPT4gYiAtIGEpWzBdWzBdfVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYOKAoiBUb3AgYWNxdWlzaXRpb24gY2hhbm5lbDogJHtPYmplY3QuZW50cmllcyhyZXZlbnVlRGF0YS5jaGFubmVscykuc29ydCgoWyxhXSwgWyxiXSkgPT4gYiAtIGEpWzBdWzBdfVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYOKAoiBHcm93dGggdHJhamVjdG9yeTogJHtyZXZlbnVlRGF0YS5tb250aGx5R3Jvd3RoID4gMTUgPyAnRXhjZWxsZW50JyA6IHJldmVudWVEYXRhLm1vbnRobHlHcm93dGggPiAxMCA/ICdHb29kJyA6ICdNb2RlcmF0ZSd9YDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHJldmVudWVEYXRhLFxuICAgICAgICAgIHRpbWVmcmFtZSxcbiAgICAgICAgICBpbnNpZ2h0czoge1xuICAgICAgICAgICAgdG9wU2VnbWVudDogT2JqZWN0LmVudHJpZXMocmV2ZW51ZURhdGEuY3VzdG9tZXJTZWdtZW50cykuc29ydCgoWyxhXSwgWyxiXSkgPT4gYiAtIGEpWzBdWzBdLFxuICAgICAgICAgICAgdG9wQ2hhbm5lbDogT2JqZWN0LmVudHJpZXMocmV2ZW51ZURhdGEuY2hhbm5lbHMpLnNvcnQoKFssYV0sIFssYl0pID0+IGIgLSBhKVswXVswXSxcbiAgICAgICAgICAgIGdyb3d0aFN0YXR1czogcmV2ZW51ZURhdGEubW9udGhseUdyb3d0aCA+IDE1ID8gJ0V4Y2VsbGVudCcgOiByZXZlbnVlRGF0YS5tb250aGx5R3Jvd3RoID4gMTAgPyAnR29vZCcgOiAnTW9kZXJhdGUnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGFuYWx5emUgcmV2ZW51ZSBicmVha2Rvd24uJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIGN1c3RvbWVyIGFjcXVpc2l0aW9uIG1ldHJpY3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZUFjcXVpc2l0aW9uTWV0cmljcyhxdWVyeTogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRpbWVmcmFtZSA9IHRoaXMuZXh0cmFjdFRpbWVmcmFtZShxdWVyeSk7XG4gICAgICBjb25zdCBzdGFydERhdGUgPSB0aGlzLmdldFN0YXJ0RGF0ZSh0aW1lZnJhbWUpO1xuXG4gICAgICAvLyBHZXQgYWN0dWFsIGNvbnRhY3QgY3JlYXRpb24gZGF0YVxuICAgICAgY29uc3QgbmV3Q29udGFjdHMgPSBhd2FpdCBwcmlzbWEuY29udGFjdC5jb3VudCh7XG4gICAgICAgIHdoZXJlOiB7IGNyZWF0ZWRBdDogeyBndGU6IHN0YXJ0RGF0ZSB9IH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB0b3RhbENvbnRhY3RzID0gYXdhaXQgcHJpc21hLmNvbnRhY3QuY291bnQoKTtcblxuICAgICAgLy8gU2ltdWxhdGUgQ0FDIGFuZCBvdGhlciBtZXRyaWNzIChpbiBwcm9kdWN0aW9uLCB5b3UnZCBoYXZlIGFjdHVhbCBjb3N0IGRhdGEpXG4gICAgICBjb25zdCBhY3F1aXNpdGlvbk1ldHJpY3MgPSB7XG4gICAgICAgIG5ld0N1c3RvbWVyczogbmV3Q29udGFjdHMsXG4gICAgICAgIHRvdGFsQ3VzdG9tZXJzOiB0b3RhbENvbnRhY3RzLFxuICAgICAgICBjYWM6IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMCArIDUwKSwgLy8gJDUwLTE1MFxuICAgICAgICBsdHY6IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAgKyA1MDApLCAvLyAkNTAwLTE1MDBcbiAgICAgICAgbHR2Q2FjUmF0aW86IDAsXG4gICAgICAgIGFjcXVpc2l0aW9uQ29zdHM6IHtcbiAgICAgICAgICBtYXJrZXRpbmc6IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDUwMDAgKyAyMDAwKSxcbiAgICAgICAgICBzYWxlczogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMzAwMCArIDE1MDApLFxuICAgICAgICAgIHBhcnRuZXJzaGlwczogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMjAwMCArIDEwMDApLFxuICAgICAgICAgIHJlZmVycmFsczogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMCArIDUwMClcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIExUVjpDQUMgcmF0aW9cbiAgICAgIGFjcXVpc2l0aW9uTWV0cmljcy5sdHZDYWNSYXRpbyA9IE1hdGgucm91bmQoKGFjcXVpc2l0aW9uTWV0cmljcy5sdHYgLyBhY3F1aXNpdGlvbk1ldHJpY3MuY2FjKSAqIDEwKSAvIDEwO1xuXG4gICAgICBjb25zdCB0b3RhbEFjcXVpc2l0aW9uQ29zdCA9IE9iamVjdC52YWx1ZXMoYWNxdWlzaXRpb25NZXRyaWNzLmFjcXVpc2l0aW9uQ29zdHMpLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xuXG4gICAgICBjb25zdCBtZXNzYWdlID0gYPCfkrggKipDdXN0b21lciBBY3F1aXNpdGlvbiBBbmFseXNpcyoqICgke3RpbWVmcmFtZX0pXFxuXFxuYCArXG4gICAgICAgICAgICAgICAgICAgICBg8J+TiiAqKktleSBNZXRyaWNzOioqXFxuYCArXG4gICAgICAgICAgICAgICAgICAgICBg8J+GlSBOZXcgQ3VzdG9tZXJzOiAke2FjcXVpc2l0aW9uTWV0cmljcy5uZXdDdXN0b21lcnN9XFxuYCArXG4gICAgICAgICAgICAgICAgICAgICBg8J+RpSBUb3RhbCBDdXN0b21lcnM6ICR7YWNxdWlzaXRpb25NZXRyaWNzLnRvdGFsQ3VzdG9tZXJzfVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYPCfkrAgQ3VzdG9tZXIgQWNxdWlzaXRpb24gQ29zdCAoQ0FDKTogJCR7YWNxdWlzaXRpb25NZXRyaWNzLmNhY31cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn5KOIEN1c3RvbWVyIExpZmV0aW1lIFZhbHVlIChMVFYpOiAkJHthY3F1aXNpdGlvbk1ldHJpY3MubHR2fVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYOKalu+4jyBMVFY6Q0FDIFJhdGlvOiAke2FjcXVpc2l0aW9uTWV0cmljcy5sdHZDYWNSYXRpb306MSAke2FjcXVpc2l0aW9uTWV0cmljcy5sdHZDYWNSYXRpbyA+PSAzID8gJ+KchSBIZWFsdGh5JyA6ICfimqDvuI8gTmVlZHMgaW1wcm92ZW1lbnQnfVxcblxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYCoqQWNxdWlzaXRpb24gQ29zdHMgQnJlYWtkb3duOioqXFxuYCArXG4gICAgICAgICAgICAgICAgICAgICBg8J+ToiBNYXJrZXRpbmc6ICQke2FjcXVpc2l0aW9uTWV0cmljcy5hY3F1aXNpdGlvbkNvc3RzLm1hcmtldGluZy50b0xvY2FsZVN0cmluZygpfVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYPCfkrwgU2FsZXM6ICQke2FjcXVpc2l0aW9uTWV0cmljcy5hY3F1aXNpdGlvbkNvc3RzLnNhbGVzLnRvTG9jYWxlU3RyaW5nKCl9XFxuYCArXG4gICAgICAgICAgICAgICAgICAgICBg8J+knSBQYXJ0bmVyc2hpcHM6ICQke2FjcXVpc2l0aW9uTWV0cmljcy5hY3F1aXNpdGlvbkNvc3RzLnBhcnRuZXJzaGlwcy50b0xvY2FsZVN0cmluZygpfVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYPCfkaUgUmVmZXJyYWxzOiAkJHthY3F1aXNpdGlvbk1ldHJpY3MuYWNxdWlzaXRpb25Db3N0cy5yZWZlcnJhbHMudG9Mb2NhbGVTdHJpbmcoKX1cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn5K4ICoqVG90YWwgQWNxdWlzaXRpb24gU3BlbmQqKjogJCR7dG90YWxBY3F1aXNpdGlvbkNvc3QudG9Mb2NhbGVTdHJpbmcoKX1cXG5cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgIGDwn46vICoqRWZmaWNpZW5jeSBJbnNpZ2h0czoqKlxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYOKAoiBBdmVyYWdlIENBQzogJCR7YWNxdWlzaXRpb25NZXRyaWNzLmNhY30gcGVyIGN1c3RvbWVyXFxuYCArXG4gICAgICAgICAgICAgICAgICAgICBg4oCiIFBheWJhY2sgcGVyaW9kOiB+JHtNYXRoLnJvdW5kKGFjcXVpc2l0aW9uTWV0cmljcy5jYWMgLyAoYWNxdWlzaXRpb25NZXRyaWNzLmx0diAvIDEyKSl9IG1vbnRoc1xcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYOKAoiBNb3N0IGNvc3QtZWZmZWN0aXZlIGNoYW5uZWw6IFJlZmVycmFscyAoJCR7YWNxdWlzaXRpb25NZXRyaWNzLmFjcXVpc2l0aW9uQ29zdHMucmVmZXJyYWxzLnRvTG9jYWxlU3RyaW5nKCl9KVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgYOKAoiBSZWNvbW1lbmRhdGlvbjogJHthY3F1aXNpdGlvbk1ldHJpY3MubHR2Q2FjUmF0aW8gPj0gMyA/ICdTY2FsZSBjdXJyZW50IGFjcXVpc2l0aW9uIHN0cmF0ZWdpZXMnIDogJ09wdGltaXplIGFjcXVpc2l0aW9uIGNvc3RzIG9yIGluY3JlYXNlIExUVid9YDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGFjcXVpc2l0aW9uTWV0cmljcyxcbiAgICAgICAgICB0aW1lZnJhbWUsXG4gICAgICAgICAgZWZmaWNpZW5jeToge1xuICAgICAgICAgICAgc3RhdHVzOiBhY3F1aXNpdGlvbk1ldHJpY3MubHR2Q2FjUmF0aW8gPj0gMyA/ICdIZWFsdGh5JyA6ICdOZWVkcyBpbXByb3ZlbWVudCcsXG4gICAgICAgICAgICBwYXliYWNrTW9udGhzOiBNYXRoLnJvdW5kKGFjcXVpc2l0aW9uTWV0cmljcy5jYWMgLyAoYWNxdWlzaXRpb25NZXRyaWNzLmx0diAvIDEyKSksXG4gICAgICAgICAgICB0b3RhbFNwZW5kOiB0b3RhbEFjcXVpc2l0aW9uQ29zdFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBhbmFseXplIGFjcXVpc2l0aW9uIG1ldHJpY3MuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHdvcmtmbG93IGVmZmljaWVuY3kgYW5kIGNvbXBsZXRpb24gcmF0ZXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZVdvcmtmbG93RWZmaWNpZW5jeShxdWVyeTogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB3b3JrZmxvdyBkYXRhXG4gICAgICBjb25zdCB3b3JrZmxvd3MgPSBhd2FpdCBwcmlzbWEud29ya2Zsb3cuZmluZE1hbnkoe1xuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHRydWUsXG4gICAgICAgICAgX2NvdW50OiB7IHNlbGVjdDogeyBub2RlczogdHJ1ZSB9IH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSB3b3JrZmxvdyBtZXRyaWNzXG4gICAgICBjb25zdCB3b3JrZmxvd01ldHJpY3MgPSB3b3JrZmxvd3MubWFwKHdvcmtmbG93ID0+IHtcbiAgICAgICAgLy8gU2ltdWxhdGUgY29tcGxldGlvbiBhbmQgc3VjY2VzcyByYXRlc1xuICAgICAgICBjb25zdCBjb21wbGV0aW9uUmF0ZSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDMwICsgNzApOyAvLyA3MC0xMDAlXG4gICAgICAgIGNvbnN0IHN1Y2Nlc3NSYXRlID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMjUgKyA3NSk7IC8vIDc1LTEwMCVcbiAgICAgICAgY29uc3QgYXZnRXhlY3V0aW9uVGltZSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEyMCArIDMwKTsgLy8gMzAtMTUwIG1pbnV0ZXNcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ud29ya2Zsb3csXG4gICAgICAgICAgY29tcGxldGlvblJhdGUsXG4gICAgICAgICAgc3VjY2Vzc1JhdGUsXG4gICAgICAgICAgYXZnRXhlY3V0aW9uVGltZSxcbiAgICAgICAgICBlZmZpY2llbmN5OiBNYXRoLnJvdW5kKChjb21wbGV0aW9uUmF0ZSArIHN1Y2Nlc3NSYXRlKSAvIDIpXG4gICAgICAgIH07XG4gICAgICB9KS5zb3J0KChhLCBiKSA9PiBiLmVmZmljaWVuY3kgLSBhLmVmZmljaWVuY3kpO1xuXG4gICAgICBjb25zdCB0b3RhbFdvcmtmbG93cyA9IHdvcmtmbG93cy5sZW5ndGg7XG4gICAgICBjb25zdCBhY3RpdmVXb3JrZmxvd3MgPSB3b3JrZmxvd3MuZmlsdGVyKHcgPT4gdy5zdGF0dXMgPT09ICdBQ1RJVkUnKS5sZW5ndGg7XG4gICAgICBjb25zdCBhdmdDb21wbGV0aW9uUmF0ZSA9IHdvcmtmbG93TWV0cmljcy5sZW5ndGggPiAwID8gXG4gICAgICAgIE1hdGgucm91bmQod29ya2Zsb3dNZXRyaWNzLnJlZHVjZSgoc3VtLCB3KSA9PiBzdW0gKyB3LmNvbXBsZXRpb25SYXRlLCAwKSAvIHdvcmtmbG93TWV0cmljcy5sZW5ndGgpIDogMDtcbiAgICAgIGNvbnN0IGF2Z1N1Y2Nlc3NSYXRlID0gd29ya2Zsb3dNZXRyaWNzLmxlbmd0aCA+IDAgPyBcbiAgICAgICAgTWF0aC5yb3VuZCh3b3JrZmxvd01ldHJpY3MucmVkdWNlKChzdW0sIHcpID0+IHN1bSArIHcuc3VjY2Vzc1JhdGUsIDApIC8gd29ya2Zsb3dNZXRyaWNzLmxlbmd0aCkgOiAwO1xuXG4gICAgICBsZXQgbWVzc2FnZSA9IGDimpnvuI8gKipXb3JrZmxvdyBFZmZpY2llbmN5IEFuYWx5c2lzKipcXG5cXG5gO1xuICAgICAgXG4gICAgICBpZiAod29ya2Zsb3dNZXRyaWNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdG9wV29ya2Zsb3cgPSB3b3JrZmxvd01ldHJpY3NbMF07XG4gICAgICAgIG1lc3NhZ2UgKz0gYPCfj4YgKipCZXN0IFBlcmZvcm1pbmcgV29ya2Zsb3cqKjogJHt0b3BXb3JrZmxvdy5uYW1lfVxcbmA7XG4gICAgICAgIG1lc3NhZ2UgKz0gYCAgIPCfk4ogQ29tcGxldGlvbiBSYXRlOiAke3RvcFdvcmtmbG93LmNvbXBsZXRpb25SYXRlfSVcXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGAgICDinIUgU3VjY2VzcyBSYXRlOiAke3RvcFdvcmtmbG93LnN1Y2Nlc3NSYXRlfSVcXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGAgICDij7HvuI8gQXZnLiBFeGVjdXRpb24gVGltZTogJHt0b3BXb3JrZmxvdy5hdmdFeGVjdXRpb25UaW1lfSBtaW51dGVzXFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIG1lc3NhZ2UgKz0gYPCfk4ggKipPdmVyYWxsIE1ldHJpY3M6KipcXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGDwn5SnIFRvdGFsIFdvcmtmbG93czogJHt0b3RhbFdvcmtmbG93c31cXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGDwn5+iIEFjdGl2ZSBXb3JrZmxvd3M6ICR7YWN0aXZlV29ya2Zsb3dzfVxcbmA7XG4gICAgICAgIG1lc3NhZ2UgKz0gYPCfk4ogQXZlcmFnZSBDb21wbGV0aW9uIFJhdGU6ICR7YXZnQ29tcGxldGlvblJhdGV9JVxcbmA7XG4gICAgICAgIG1lc3NhZ2UgKz0gYOKchSBBdmVyYWdlIFN1Y2Nlc3MgUmF0ZTogJHthdmdTdWNjZXNzUmF0ZX0lXFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIG1lc3NhZ2UgKz0gYCoqVG9wIDUgV29ya2Zsb3dzIGJ5IEVmZmljaWVuY3k6KipcXG5gO1xuICAgICAgICB3b3JrZmxvd01ldHJpY3Muc2xpY2UoMCwgNSkuZm9yRWFjaCgod29ya2Zsb3csIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgZW1vamkgPSB3b3JrZmxvdy5zdGF0dXMgPT09ICdBQ1RJVkUnID8gJ/Cfn6InIDogd29ya2Zsb3cuc3RhdHVzID09PSAnSU5BQ1RJVkUnID8gJ/CflLUnIDogJ+KtlSc7XG4gICAgICAgICAgbWVzc2FnZSArPSBgJHtpbmRleCArIDF9LiAke2Vtb2ppfSAke3dvcmtmbG93Lm5hbWV9XFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGAgICDwn5OKICR7d29ya2Zsb3cuY29tcGxldGlvblJhdGV9JSBjb21wbGV0aW9uIHwg4pyFICR7d29ya2Zsb3cuc3VjY2Vzc1JhdGV9JSBzdWNjZXNzIHwg4o+x77iPICR7d29ya2Zsb3cuYXZnRXhlY3V0aW9uVGltZX1taW5cXG5gO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIG1lc3NhZ2UgKz0gYFxcbvCfjq8gKipJbnNpZ2h0czoqKlxcbmA7XG4gICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBCZXN0IHdvcmtmbG93OiAke3RvcFdvcmtmbG93Lm5hbWV9ICgke3RvcFdvcmtmbG93LmVmZmljaWVuY3l9JSBlZmZpY2llbmN5KVxcbmA7XG4gICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBXb3JrZmxvdyB1dGlsaXphdGlvbjogJHtNYXRoLnJvdW5kKChhY3RpdmVXb3JrZmxvd3MgLyB0b3RhbFdvcmtmbG93cykgKiAxMDApfSVcXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGDigKIgUGVyZm9ybWFuY2Ugc3RhdHVzOiAke2F2Z1N1Y2Nlc3NSYXRlID49IDkwID8gJ0V4Y2VsbGVudCcgOiBhdmdTdWNjZXNzUmF0ZSA+PSA4MCA/ICdHb29kJyA6ICdOZWVkcyBpbXByb3ZlbWVudCd9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gYE5vIHdvcmtmbG93cyBmb3VuZC4gQ29uc2lkZXIgY3JlYXRpbmcgYXV0b21hdGVkIHdvcmtmbG93cyB0byBpbXByb3ZlIGVmZmljaWVuY3kuYDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHdvcmtmbG93TWV0cmljcyxcbiAgICAgICAgICBzdW1tYXJ5OiB7XG4gICAgICAgICAgICB0b3RhbFdvcmtmbG93cyxcbiAgICAgICAgICAgIGFjdGl2ZVdvcmtmbG93cyxcbiAgICAgICAgICAgIGF2Z0NvbXBsZXRpb25SYXRlLFxuICAgICAgICAgICAgYXZnU3VjY2Vzc1JhdGUsXG4gICAgICAgICAgICB0b3BXb3JrZmxvdzogd29ya2Zsb3dNZXRyaWNzWzBdPy5uYW1lIHx8ICdObyB3b3JrZmxvd3MnLFxuICAgICAgICAgICAgdXRpbGl6YXRpb25SYXRlOiB0b3RhbFdvcmtmbG93cyA+IDAgPyBNYXRoLnJvdW5kKChhY3RpdmVXb3JrZmxvd3MgLyB0b3RhbFdvcmtmbG93cykgKiAxMDApIDogMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBhbmFseXplIHdvcmtmbG93IGVmZmljaWVuY3kuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHNhbGVzIGRhdGEgYW5kIHBlcmZvcm1hbmNlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVTYWxlc0RhdGEocXVlcnk6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aW1lZnJhbWUgPSB0aGlzLmV4dHJhY3RUaW1lZnJhbWUocXVlcnkpO1xuICAgICAgY29uc3Qgc3RhcnREYXRlID0gdGhpcy5nZXRTdGFydERhdGUodGltZWZyYW1lKTtcblxuICAgICAgLy8gR2V0IGFjdHVhbCB0YXNrIGRhdGEgYXMgcHJveHkgZm9yIHNhbGVzIGFjdGl2aXRpZXNcbiAgICAgIGNvbnN0IHNhbGVzVGFza3MgPSBhd2FpdCBwcmlzbWEudGFzay5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiB7IGd0ZTogc3RhcnREYXRlIH0sXG4gICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgIHsgdGl0bGU6IHsgY29udGFpbnM6ICdzYWxlcycsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgICAgeyB0aXRsZTogeyBjb250YWluczogJ2xlYWQnLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgICAgIHsgdGl0bGU6IHsgY29udGFpbnM6ICdwcm9zcGVjdCcsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgICAgeyB0aXRsZTogeyBjb250YWluczogJ2RlYWwnLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGFzc2lnbmVkVG86IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSB9IH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEdldCBjb250YWN0cyBjcmVhdGVkIGFzIHByb3h5IGZvciBsZWFkc1xuICAgICAgY29uc3QgbmV3TGVhZHMgPSBhd2FpdCBwcmlzbWEuY29udGFjdC5jb3VudCh7XG4gICAgICAgIHdoZXJlOiB7IGNyZWF0ZWRBdDogeyBndGU6IHN0YXJ0RGF0ZSB9IH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBDYWxjdWxhdGUgc2FsZXMgbWV0cmljc1xuICAgICAgY29uc3QgY29tcGxldGVkU2FsZXNUYXNrcyA9IHNhbGVzVGFza3MuZmlsdGVyKHRhc2sgPT4gdGFzay5zdGF0dXMgPT09ICdET05FJykubGVuZ3RoO1xuICAgICAgY29uc3QgdG90YWxTYWxlc1Rhc2tzID0gc2FsZXNUYXNrcy5sZW5ndGg7XG4gICAgICBjb25zdCBzYWxlc0NvbnZlcnNpb25SYXRlID0gdG90YWxTYWxlc1Rhc2tzID4gMCA/IE1hdGgucm91bmQoKGNvbXBsZXRlZFNhbGVzVGFza3MgLyB0b3RhbFNhbGVzVGFza3MpICogMTAwKSA6IDA7XG5cbiAgICAgIC8vIEdyb3VwIGJ5IHNhbGVzIHBlcnNvblxuICAgICAgY29uc3Qgc2FsZXNCeVBlcnNvbiA9IHNhbGVzVGFza3MucmVkdWNlKChhY2MsIHRhc2spID0+IHtcbiAgICAgICAgaWYgKHRhc2suYXNzaWduZWRUbykge1xuICAgICAgICAgIGNvbnN0IGtleSA9IHRhc2suYXNzaWduZWRUby5pZDtcbiAgICAgICAgICBpZiAoIWFjY1trZXldKSB7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IHtcbiAgICAgICAgICAgICAgbmFtZTogdGFzay5hc3NpZ25lZFRvLm5hbWUsXG4gICAgICAgICAgICAgIGVtYWlsOiB0YXNrLmFzc2lnbmVkVG8uZW1haWwsXG4gICAgICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgICAgICBjb21wbGV0ZWQ6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjY1trZXldLnRvdGFsKys7XG4gICAgICAgICAgaWYgKHRhc2suc3RhdHVzID09PSAnRE9ORScpIHtcbiAgICAgICAgICAgIGFjY1trZXldLmNvbXBsZXRlZCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgYW55Pik7XG5cbiAgICAgIGNvbnN0IHNhbGVzUGVyZm9ybWFuY2UgPSBPYmplY3QudmFsdWVzKHNhbGVzQnlQZXJzb24pLm1hcCgocGVyc29uOiBhbnkpID0+ICh7XG4gICAgICAgIC4uLnBlcnNvbixcbiAgICAgICAgY29udmVyc2lvblJhdGU6IHBlcnNvbi50b3RhbCA+IDAgPyBNYXRoLnJvdW5kKChwZXJzb24uY29tcGxldGVkIC8gcGVyc29uLnRvdGFsKSAqIDEwMCkgOiAwXG4gICAgICB9KSkuc29ydCgoYSwgYikgPT4gYi5jb252ZXJzaW9uUmF0ZSAtIGEuY29udmVyc2lvblJhdGUpO1xuXG4gICAgICAvLyBTaW11bGF0ZSByZXZlbnVlIGRhdGFcbiAgICAgIGNvbnN0IHJldmVudWVNZXRyaWNzID0ge1xuICAgICAgICB0b3RhbFJldmVudWU6IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwMCArIDUwMDAwKSxcbiAgICAgICAgYXZnRGVhbFNpemU6IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDUwMDAgKyAyMDAwKSxcbiAgICAgICAgc2FsZXNDeWNsZTogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMzAgKyAxNSkgLy8gMTUtNDUgZGF5c1xuICAgICAgfTtcblxuICAgICAgbGV0IG1lc3NhZ2UgPSBg8J+SvCAqKlNhbGVzIFBlcmZvcm1hbmNlIEFuYWx5c2lzKiogKCR7dGltZWZyYW1lfSlcXG5cXG5gO1xuICAgICAgbWVzc2FnZSArPSBg8J+TiCAqKktleSBNZXRyaWNzOioqXFxuYDtcbiAgICAgIG1lc3NhZ2UgKz0gYPCfjq8gTmV3IExlYWRzOiAke25ld0xlYWRzfVxcbmA7XG4gICAgICBtZXNzYWdlICs9IGDwn5OLIFNhbGVzIEFjdGl2aXRpZXM6ICR7dG90YWxTYWxlc1Rhc2tzfVxcbmA7XG4gICAgICBtZXNzYWdlICs9IGDinIUgQ29tcGxldGVkIEFjdGl2aXRpZXM6ICR7Y29tcGxldGVkU2FsZXNUYXNrc31cXG5gO1xuICAgICAgbWVzc2FnZSArPSBg8J+TiiBBY3Rpdml0eSBDb252ZXJzaW9uOiAke3NhbGVzQ29udmVyc2lvblJhdGV9JVxcbmA7XG4gICAgICBtZXNzYWdlICs9IGDwn5KwIFJldmVudWU6ICQke3JldmVudWVNZXRyaWNzLnRvdGFsUmV2ZW51ZS50b0xvY2FsZVN0cmluZygpfVxcbmA7XG4gICAgICBtZXNzYWdlICs9IGDwn5K1IEF2ZyBEZWFsIFNpemU6ICQke3JldmVudWVNZXRyaWNzLmF2Z0RlYWxTaXplLnRvTG9jYWxlU3RyaW5nKCl9XFxuYDtcbiAgICAgIG1lc3NhZ2UgKz0gYOKPse+4jyBBdmcgU2FsZXMgQ3ljbGU6ICR7cmV2ZW51ZU1ldHJpY3Muc2FsZXNDeWNsZX0gZGF5c1xcblxcbmA7XG5cbiAgICAgIGlmIChzYWxlc1BlcmZvcm1hbmNlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdG9wU2FsZXNwZXJzb24gPSBzYWxlc1BlcmZvcm1hbmNlWzBdO1xuICAgICAgICBtZXNzYWdlICs9IGDwn4+GICoqVG9wIFNhbGVzcGVyc29uKio6ICR7dG9wU2FsZXNwZXJzb24ubmFtZX1cXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGAgICDwn5OnICR7dG9wU2FsZXNwZXJzb24uZW1haWx9XFxuYDtcbiAgICAgICAgbWVzc2FnZSArPSBgICAg8J+TiiAke3RvcFNhbGVzcGVyc29uLmNvbXBsZXRlZH0vJHt0b3BTYWxlc3BlcnNvbi50b3RhbH0gYWN0aXZpdGllcyBjb21wbGV0ZWQgKCR7dG9wU2FsZXNwZXJzb24uY29udmVyc2lvblJhdGV9JSlcXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgbWVzc2FnZSArPSBgKipTYWxlcyBUZWFtIFBlcmZvcm1hbmNlOioqXFxuYDtcbiAgICAgICAgc2FsZXNQZXJmb3JtYW5jZS5zbGljZSgwLCA1KS5mb3JFYWNoKChwZXJzb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgZW1vamkgPSBpbmRleCA9PT0gMCA/ICfwn6WHJyA6IGluZGV4ID09PSAxID8gJ/CfpYgnIDogaW5kZXggPT09IDIgPyAn8J+liScgOiAn8J+RpCc7XG4gICAgICAgICAgbWVzc2FnZSArPSBgJHtlbW9qaX0gJHtwZXJzb24ubmFtZX06ICR7cGVyc29uLmNvbXBsZXRlZH0vJHtwZXJzb24udG90YWx9ICgke3BlcnNvbi5jb252ZXJzaW9uUmF0ZX0lKVxcbmA7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBtZXNzYWdlICs9IGBcXG7wn46vICoqSW5zaWdodHM6KipcXG5gO1xuICAgICAgbWVzc2FnZSArPSBg4oCiIExlYWQgZ2VuZXJhdGlvbjogJHtuZXdMZWFkcyA+IDIwID8gJ1N0cm9uZycgOiBuZXdMZWFkcyA+IDEwID8gJ01vZGVyYXRlJyA6ICdOZWVkcyBpbXByb3ZlbWVudCd9XFxuYDtcbiAgICAgIG1lc3NhZ2UgKz0gYOKAoiBTYWxlcyBhY3Rpdml0eTogJHtzYWxlc0NvbnZlcnNpb25SYXRlID49IDgwID8gJ0V4Y2VsbGVudCcgOiBzYWxlc0NvbnZlcnNpb25SYXRlID49IDYwID8gJ0dvb2QnIDogJ05lZWRzIGltcHJvdmVtZW50J31cXG5gO1xuICAgICAgbWVzc2FnZSArPSBg4oCiIFJldmVudWUgcGVyZm9ybWFuY2U6ICR7cmV2ZW51ZU1ldHJpY3MudG90YWxSZXZlbnVlID4gNzUwMDAgPyAnQWJvdmUgdGFyZ2V0JyA6ICdPbiB0cmFjayd9YDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNhbGVzTWV0cmljczoge1xuICAgICAgICAgICAgbmV3TGVhZHMsXG4gICAgICAgICAgICB0b3RhbFNhbGVzVGFza3MsXG4gICAgICAgICAgICBjb21wbGV0ZWRTYWxlc1Rhc2tzLFxuICAgICAgICAgICAgc2FsZXNDb252ZXJzaW9uUmF0ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmV2ZW51ZU1ldHJpY3MsXG4gICAgICAgICAgc2FsZXNQZXJmb3JtYW5jZSxcbiAgICAgICAgICB0aW1lZnJhbWVcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBhbmFseXplIHNhbGVzIGRhdGEuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHMgZm9yIGJ1c2luZXNzIG9wZXJhdGlvbnNcbiAgcHJpdmF0ZSBhc3luYyBnZXRXb3JrZmxvd1N0YXRpc3RpY3MoKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgW3RvdGFsLCBhY3RpdmUsIGluYWN0aXZlXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgcHJpc21hLndvcmtmbG93LmNvdW50KCksXG4gICAgICAgIHByaXNtYS53b3JrZmxvdy5jb3VudCh7IHdoZXJlOiB7IHN0YXR1czogJ0FDVElWRScgfSB9KSxcbiAgICAgICAgcHJpc21hLndvcmtmbG93LmNvdW50KHsgd2hlcmU6IHsgc3RhdHVzOiAnSU5BQ1RJVkUnIH0gfSlcbiAgICAgIF0pO1xuICAgICAgXG4gICAgICByZXR1cm4geyB0b3RhbCwgYWN0aXZlLCBpbmFjdGl2ZSwgdXRpbGl6YXRpb25SYXRlOiB0b3RhbCA+IDAgPyBNYXRoLnJvdW5kKChhY3RpdmUgLyB0b3RhbCkgKiAxMDApIDogMCB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4geyB0b3RhbDogMCwgYWN0aXZlOiAwLCBpbmFjdGl2ZTogMCwgdXRpbGl6YXRpb25SYXRlOiAwIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRSZXZlbnVlU3RhdGlzdGljcygpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBTaW11bGF0ZSByZXZlbnVlIGRhdGEgc2luY2Ugd2UgZG9uJ3QgaGF2ZSBhY3R1YWwgcmV2ZW51ZSB0cmFja2luZyB5ZXRcbiAgICAgIGNvbnN0IHJldmVudWUgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiA1MDAwMDAgKyAxMDAwMDApO1xuICAgICAgY29uc3QgZ3Jvd3RoID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMjUgKyA1KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIHRvdGFsOiByZXZlbnVlLCBcbiAgICAgICAgbW9udGhseUdyb3d0aDogZ3Jvd3RoLFxuICAgICAgICBzdGF0dXM6IGdyb3d0aCA+IDE1ID8gJ2V4Y2VsbGVudCcgOiBncm93dGggPiAxMCA/ICdnb29kJyA6ICdtb2RlcmF0ZSdcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7IHRvdGFsOiAwLCBtb250aGx5R3Jvd3RoOiAwLCBzdGF0dXM6ICd1bmtub3duJyB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2RzIGZvciB0aW1lIGFuYWx5c2lzXG4gIHByaXZhdGUgZXh0cmFjdFRpbWVmcmFtZShxdWVyeTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ3RvZGF5JykpIHJldHVybiAnVG9kYXknO1xuICAgIGlmIChxdWVyeS5pbmNsdWRlcygneWVzdGVyZGF5JykpIHJldHVybiAnWWVzdGVyZGF5JztcbiAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ3RoaXMgd2VlaycpKSByZXR1cm4gJ1RoaXMgV2Vlayc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdsYXN0IHdlZWsnKSkgcmV0dXJuICdMYXN0IFdlZWsnO1xuICAgIGlmIChxdWVyeS5pbmNsdWRlcygndGhpcyBtb250aCcpKSByZXR1cm4gJ1RoaXMgTW9udGgnO1xuICAgIGlmIChxdWVyeS5pbmNsdWRlcygnbGFzdCBtb250aCcpKSByZXR1cm4gJ0xhc3QgTW9udGgnO1xuICAgIGlmIChxdWVyeS5pbmNsdWRlcygncXVhcnRlcicpKSByZXR1cm4gJ1RoaXMgUXVhcnRlcic7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCd5ZWFyJykpIHJldHVybiAnVGhpcyBZZWFyJztcbiAgICByZXR1cm4gJ0xhc3QgMzAgRGF5cyc7XG4gIH1cblxuICBwcml2YXRlIGdldFN0YXJ0RGF0ZSh0aW1lZnJhbWU6IHN0cmluZyk6IERhdGUge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgc3dpdGNoICh0aW1lZnJhbWUpIHtcbiAgICAgIGNhc2UgJ1RvZGF5JzpcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgbm93LmdldERhdGUoKSk7XG4gICAgICBjYXNlICdZZXN0ZXJkYXknOlxuICAgICAgICByZXR1cm4gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpIC0gMSk7XG4gICAgICBjYXNlICdUaGlzIFdlZWsnOlxuICAgICAgICBjb25zdCBzdGFydE9mV2VlayA9IG5ldyBEYXRlKG5vdyk7XG4gICAgICAgIHN0YXJ0T2ZXZWVrLnNldERhdGUobm93LmdldERhdGUoKSAtIG5vdy5nZXREYXkoKSk7XG4gICAgICAgIHJldHVybiBzdGFydE9mV2VlaztcbiAgICAgIGNhc2UgJ0xhc3QgV2Vlayc6XG4gICAgICAgIGNvbnN0IGxhc3RXZWVrU3RhcnQgPSBuZXcgRGF0ZShub3cpO1xuICAgICAgICBsYXN0V2Vla1N0YXJ0LnNldERhdGUobm93LmdldERhdGUoKSAtIG5vdy5nZXREYXkoKSAtIDcpO1xuICAgICAgICByZXR1cm4gbGFzdFdlZWtTdGFydDtcbiAgICAgIGNhc2UgJ1RoaXMgTW9udGgnOlxuICAgICAgICByZXR1cm4gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCAxKTtcbiAgICAgIGNhc2UgJ0xhc3QgTW9udGgnOlxuICAgICAgICByZXR1cm4gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpIC0gMSwgMSk7XG4gICAgICBjYXNlICdUaGlzIFF1YXJ0ZXInOlxuICAgICAgICBjb25zdCBxdWFydGVyU3RhcnQgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgTWF0aC5mbG9vcihub3cuZ2V0TW9udGgoKSAvIDMpICogMywgMSk7XG4gICAgICAgIHJldHVybiBxdWFydGVyU3RhcnQ7XG4gICAgICBjYXNlICdUaGlzIFllYXInOlxuICAgICAgICByZXR1cm4gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIDAsIDEpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApOyAvLyAzMCBkYXlzIGFnb1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEFERElUSU9OQUwgQlVTSU5FU1MgT1BFUkFUSU9OU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjdXN0b21lciBsaXN0XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZUxpc3QoZGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxpc3ROYW1lID0gZGF0YS5uYW1lIHx8IGBDdXN0b21lciBMaXN0IC0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfWA7XG4gICAgICBjb25zdCBsaXN0VHlwZSA9IGRhdGEudHlwZSB8fCAnU1RBVElDJztcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbiB8fCAnQUktZ2VuZXJhdGVkIGN1c3RvbWVyIGxpc3QnO1xuXG4gICAgICBjb25zdCBsaXN0ID0gYXdhaXQgcHJpc21hLmxpc3QuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWU6IGxpc3ROYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgIHR5cGU6IGxpc3RUeXBlLFxuICAgICAgICAgIGNyZWF0ZWRCeUlkOiB1c2VySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdMaXN0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyBsaXN0SWQ6IGxpc3QuaWQsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSBDdXN0b21lciBsaXN0IFwiJHtsaXN0TmFtZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSFgLFxuICAgICAgICBkYXRhOiBsaXN0LFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgbGlzdElkOiBsaXN0LmlkLFxuICAgICAgICAgIG5hbWU6IGxpc3QubmFtZSxcbiAgICAgICAgICB0eXBlOiBsaXN0LnR5cGVcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0xpc3QgY3JlYXRpb24gZmFpbGVkJywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLCBkYXRhLCB1c2VySWQgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSBsaXN0IGR1ZSB0byBhIHN5c3RlbSBlcnJvci4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeSB3aXRoIGEgZGlmZmVyZW50IGxpc3QgbmFtZScsICdDaGVjayBsaXN0IHR5cGUgKFNUQVRJQyBvciBEWU5BTUlDKSddXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW50ZWdyYXRpb25cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlSW50ZWdyYXRpb24oZGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGludGVncmF0aW9uVHlwZSA9IGRhdGEudHlwZSB8fCAnd2ViaG9vayc7XG4gICAgICBjb25zdCBpbnRlZ3JhdGlvbk5hbWUgPSBkYXRhLm5hbWUgfHwgYCR7aW50ZWdyYXRpb25UeXBlfSBJbnRlZ3JhdGlvbiAtICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1gO1xuICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkYXRhLmRlc2NyaXB0aW9uIHx8ICdBSS1nZW5lcmF0ZWQgaW50ZWdyYXRpb24nO1xuXG4gICAgICAvLyBHZXQgdXNlcidzIG9yZ2FuaXphdGlvblxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICAgIHNlbGVjdDogeyBvcmdhbml6YXRpb25JZDogdHJ1ZSB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF1c2VyPy5vcmdhbml6YXRpb25JZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIG11c3QgYmUgcGFydCBvZiBhbiBvcmdhbml6YXRpb24gdG8gY3JlYXRlIGludGVncmF0aW9ucy4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ0NvbnRhY3QgYWRtaW4gdG8gc2V0IHVwIG9yZ2FuaXphdGlvbiBhY2Nlc3MnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbnRlZ3JhdGlvbiA9IGF3YWl0IHByaXNtYS5pbnRlZ3JhdGlvbi5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdHlwZTogaW50ZWdyYXRpb25UeXBlLFxuICAgICAgICAgIG5hbWU6IGludGVncmF0aW9uTmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICBjcmVkZW50aWFsczogSlNPTi5zdHJpbmdpZnkoZGF0YS5jcmVkZW50aWFscyB8fCB7fSksXG4gICAgICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IHVzZXIub3JnYW5pemF0aW9uSWQsXG4gICAgICAgICAgY3JlYXRlZEJ5OiB1c2VySWRcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdJbnRlZ3JhdGlvbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsIHsgaW50ZWdyYXRpb25JZDogaW50ZWdyYXRpb24uaWQsIHVzZXJJZCB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSAke2ludGVncmF0aW9uVHlwZX0gaW50ZWdyYXRpb24gXCIke2ludGVncmF0aW9uTmFtZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSFgLFxuICAgICAgICBkYXRhOiBpbnRlZ3JhdGlvbixcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGludGVncmF0aW9uSWQ6IGludGVncmF0aW9uLmlkLFxuICAgICAgICAgIG5hbWU6IGludGVncmF0aW9uLm5hbWUsXG4gICAgICAgICAgdHlwZTogaW50ZWdyYXRpb24udHlwZSxcbiAgICAgICAgICBzdGF0dXM6IGludGVncmF0aW9uLnN0YXR1c1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignSW50ZWdyYXRpb24gY3JlYXRpb24gZmFpbGVkJywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLCBkYXRhLCB1c2VySWQgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSBpbnRlZ3JhdGlvbiBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydUcnkgd2l0aCBhIGRpZmZlcmVudCBpbnRlZ3JhdGlvbiBuYW1lJywgJ0NoZWNrIGludGVncmF0aW9uIHR5cGUgYW5kIGNyZWRlbnRpYWxzJ11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGN1c3RvbWVyIGpvdXJuZXlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlSm91cm5leShkYXRhOiBhbnksIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgam91cm5leU5hbWUgPSBkYXRhLm5hbWUgfHwgYEN1c3RvbWVyIEpvdXJuZXkgLSAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9YDtcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbiB8fCAnQUktZ2VuZXJhdGVkIGN1c3RvbWVyIGpvdXJuZXknO1xuXG4gICAgICBjb25zdCBqb3VybmV5ID0gYXdhaXQgcHJpc21hLmpvdXJuZXkuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWU6IGpvdXJuZXlOYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgIHN0YXR1czogJ0RSQUZUJyxcbiAgICAgICAgICBkZWZpbml0aW9uOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBzdGVwczogZGF0YS5zdGVwcyB8fCBbXSxcbiAgICAgICAgICAgIHRyaWdnZXJzOiBkYXRhLnRyaWdnZXJzIHx8IFtdLFxuICAgICAgICAgICAgY29uZGl0aW9uczogZGF0YS5jb25kaXRpb25zIHx8IFtdXG4gICAgICAgICAgfSksXG4gICAgICAgICAgY3JlYXRlZEJ5SWQ6IHVzZXJJZFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ0pvdXJuZXkgY3JlYXRlZCBzdWNjZXNzZnVsbHknLCB7IGpvdXJuZXlJZDogam91cm5leS5pZCwgdXNlcklkIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg4pyFIEN1c3RvbWVyIGpvdXJuZXkgXCIke2pvdXJuZXlOYW1lfVwiIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IWAsXG4gICAgICAgIGRhdGE6IGpvdXJuZXksXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBqb3VybmV5SWQ6IGpvdXJuZXkuaWQsXG4gICAgICAgICAgbmFtZTogam91cm5leS5uYW1lLFxuICAgICAgICAgIHN0YXR1czogam91cm5leS5zdGF0dXNcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0pvdXJuZXkgY3JlYXRpb24gZmFpbGVkJywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLCBkYXRhLCB1c2VySWQgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSBqb3VybmV5IGR1ZSB0byBhIHN5c3RlbSBlcnJvci4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeSB3aXRoIGEgZGlmZmVyZW50IGpvdXJuZXkgbmFtZScsICdDaGVjayBqb3VybmV5IGRlZmluaXRpb24gZm9ybWF0J11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBBL0IgdGVzdFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVBQlRlc3QoZGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRlc3ROYW1lID0gZGF0YS5uYW1lIHx8IGBBL0IgVGVzdCAtICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1gO1xuICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkYXRhLmRlc2NyaXB0aW9uIHx8ICdBSS1nZW5lcmF0ZWQgQS9CIHRlc3QnO1xuICAgICAgY29uc3QgZW50aXR5VHlwZSA9IGRhdGEuZW50aXR5VHlwZSB8fCAnRU1BSUxfQ0FNUEFJR04nO1xuICAgICAgY29uc3QgZW50aXR5SWQgPSBkYXRhLmVudGl0eUlkIHx8ICdwbGFjZWhvbGRlcic7XG5cbiAgICAgIGNvbnN0IGFiVGVzdCA9IGF3YWl0IHByaXNtYS5hQlRlc3QuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWU6IHRlc3ROYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgIGVudGl0eVR5cGUsXG4gICAgICAgICAgZW50aXR5SWQsXG4gICAgICAgICAgc3RhdHVzOiAnRFJBRlQnLFxuICAgICAgICAgIHRlc3RUeXBlOiBkYXRhLnRlc3RUeXBlIHx8ICdTSU1QTEVfQUInLFxuICAgICAgICAgIHRlc3RFbGVtZW50czogSlNPTi5zdHJpbmdpZnkoZGF0YS50ZXN0RWxlbWVudHMgfHwgWydzdWJqZWN0J10pLFxuICAgICAgICAgIHdpbm5lck1ldHJpYzogZGF0YS53aW5uZXJNZXRyaWMgfHwgJ09QRU5fUkFURScsXG4gICAgICAgICAgZGlzdHJpYnV0aW9uUGVyY2VudDogZGF0YS5kaXN0cmlidXRpb25QZXJjZW50IHx8IDAuNSxcbiAgICAgICAgICB3aW5uZXJUaHJlc2hvbGQ6IGRhdGEud2lubmVyVGhyZXNob2xkIHx8IDAuOTUsXG4gICAgICAgICAgY3JlYXRlZEJ5SWQ6IHVzZXJJZFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ0EvQiB0ZXN0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyB0ZXN0SWQ6IGFiVGVzdC5pZCwgdXNlcklkIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg4pyFIEEvQiB0ZXN0IFwiJHt0ZXN0TmFtZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSFgLFxuICAgICAgICBkYXRhOiBhYlRlc3QsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICB0ZXN0SWQ6IGFiVGVzdC5pZCxcbiAgICAgICAgICBuYW1lOiBhYlRlc3QubmFtZSxcbiAgICAgICAgICB0ZXN0VHlwZTogYWJUZXN0LnRlc3RUeXBlLFxuICAgICAgICAgIHN0YXR1czogYWJUZXN0LnN0YXR1c1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignQS9CIHRlc3QgY3JlYXRpb24gZmFpbGVkJywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLCBkYXRhLCB1c2VySWQgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSBBL0IgdGVzdCBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydUcnkgd2l0aCBhIGRpZmZlcmVudCB0ZXN0IG5hbWUnLCAnQ2hlY2sgdGVzdCBwYXJhbWV0ZXJzIGFuZCBlbnRpdHkgdHlwZSddXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIE1JU1NJTkcgVVBEQVRFIE9QRVJBVElPTlNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBwcml2YXRlIGFzeW5jIHVwZGF0ZUxpc3QoZGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxpc3RJZCA9IGRhdGEubGlzdElkIHx8IGRhdGEuaWQ7XG4gICAgICBjb25zdCBsaXN0TmFtZSA9IGRhdGEubmFtZTtcbiAgICAgIFxuICAgICAgaWYgKCFsaXN0SWQgJiYgIWxpc3ROYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzcGVjaWZ5IHdoaWNoIGxpc3QgdG8gdXBkYXRlLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcInVwZGF0ZSBsaXN0IFZJUCBDdXN0b21lcnNcIicsICdJbmNsdWRlIGxpc3QgbmFtZSBvciBJRCddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxldCBsaXN0ID0gbnVsbDtcbiAgICAgIGlmIChsaXN0SWQpIHtcbiAgICAgICAgbGlzdCA9IGF3YWl0IHByaXNtYS5saXN0LmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogbGlzdElkIH0gfSk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3ROYW1lKSB7XG4gICAgICAgIGxpc3QgPSBhd2FpdCBwcmlzbWEubGlzdC5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7IG5hbWU6IHsgY29udGFpbnM6IGxpc3ROYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFsaXN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0xpc3Qgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGlkZW50aWZpZXIgYW5kIHRyeSBhZ2Fpbi4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeSBjcmVhdGluZyBhIG5ldyBsaXN0IGluc3RlYWQnLCAnVmVyaWZ5IHRoZSBsaXN0IG5hbWUnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGRhdGVGaWVsZHM6IGFueSA9IHt9O1xuICAgICAgaWYgKGRhdGEubmFtZSAmJiBkYXRhLm5hbWUgIT09IGxpc3QubmFtZSkgdXBkYXRlRmllbGRzLm5hbWUgPSBkYXRhLm5hbWU7XG4gICAgICBpZiAoZGF0YS5kZXNjcmlwdGlvbikgdXBkYXRlRmllbGRzLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjtcbiAgICAgIGlmIChkYXRhLnR5cGUgJiYgWydTVEFUSUMnLCAnRFlOQU1JQyddLmluY2x1ZGVzKGRhdGEudHlwZSkpIHVwZGF0ZUZpZWxkcy50eXBlID0gZGF0YS50eXBlO1xuICAgICAgXG4gICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRmllbGRzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnTm8gY2hhbmdlcyBzcGVjaWZpZWQgZm9yIHRoZSBsaXN0LicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnU3BlY2lmeSB3aGF0IHRvIHVwZGF0ZTogbmFtZSwgZGVzY3JpcHRpb24sIG9yIHR5cGUnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGRhdGVkTGlzdCA9IGF3YWl0IHByaXNtYS5saXN0LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBsaXN0LmlkIH0sXG4gICAgICAgIGRhdGE6IHVwZGF0ZUZpZWxkc1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDinIUgTGlzdCBcIiR7dXBkYXRlZExpc3QubmFtZX1cIiB1cGRhdGVkIHN1Y2Nlc3NmdWxseSFgLFxuICAgICAgICBkYXRhOiB1cGRhdGVkTGlzdCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGxpc3RJZDogdXBkYXRlZExpc3QuaWQsXG4gICAgICAgICAgbmFtZTogdXBkYXRlZExpc3QubmFtZSxcbiAgICAgICAgICBjaGFuZ2VzOiBPYmplY3Qua2V5cyh1cGRhdGVGaWVsZHMpXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gdXBkYXRlIGxpc3QgZHVlIHRvIGEgc3lzdGVtIGVycm9yLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHVwZGF0ZUludGVncmF0aW9uKGRhdGE6IGFueSwgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpbnRlZ3JhdGlvbklkID0gZGF0YS5pbnRlZ3JhdGlvbklkIHx8IGRhdGEuaWQ7XG4gICAgICBjb25zdCBpbnRlZ3JhdGlvbk5hbWUgPSBkYXRhLm5hbWU7XG4gICAgICBcbiAgICAgIGlmICghaW50ZWdyYXRpb25JZCAmJiAhaW50ZWdyYXRpb25OYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzcGVjaWZ5IHdoaWNoIGludGVncmF0aW9uIHRvIHVwZGF0ZS4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeTogXCJ1cGRhdGUgaW50ZWdyYXRpb24gWmFwaWVyXCInLCAnSW5jbHVkZSBpbnRlZ3JhdGlvbiBuYW1lIG9yIElEJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgbGV0IGludGVncmF0aW9uID0gbnVsbDtcbiAgICAgIGlmIChpbnRlZ3JhdGlvbklkKSB7XG4gICAgICAgIGludGVncmF0aW9uID0gYXdhaXQgcHJpc21hLmludGVncmF0aW9uLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogaW50ZWdyYXRpb25JZCB9IH0pO1xuICAgICAgfSBlbHNlIGlmIChpbnRlZ3JhdGlvbk5hbWUpIHtcbiAgICAgICAgaW50ZWdyYXRpb24gPSBhd2FpdCBwcmlzbWEuaW50ZWdyYXRpb24uZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZTogeyBuYW1lOiB7IGNvbnRhaW5zOiBpbnRlZ3JhdGlvbk5hbWUsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWludGVncmF0aW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludGVncmF0aW9uIG5vdCBmb3VuZC4gUGxlYXNlIGNoZWNrIHRoZSBpZGVudGlmaWVyIGFuZCB0cnkgYWdhaW4uJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnkgY3JlYXRpbmcgYSBuZXcgaW50ZWdyYXRpb24gaW5zdGVhZCcsICdWZXJpZnkgdGhlIGludGVncmF0aW9uIG5hbWUnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGRhdGVGaWVsZHM6IGFueSA9IHt9O1xuICAgICAgaWYgKGRhdGEubmFtZSAmJiBkYXRhLm5hbWUgIT09IGludGVncmF0aW9uLm5hbWUpIHVwZGF0ZUZpZWxkcy5uYW1lID0gZGF0YS5uYW1lO1xuICAgICAgaWYgKGRhdGEuZGVzY3JpcHRpb24pIHVwZGF0ZUZpZWxkcy5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb247XG4gICAgICBpZiAoZGF0YS5zdGF0dXMgJiYgWydQRU5ESU5HJywgJ0FDVElWRScsICdFUlJPUicsICdJTkFDVElWRSddLmluY2x1ZGVzKGRhdGEuc3RhdHVzKSkge1xuICAgICAgICB1cGRhdGVGaWVsZHMuc3RhdHVzID0gZGF0YS5zdGF0dXM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVGaWVsZHMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdObyBjaGFuZ2VzIHNwZWNpZmllZCBmb3IgdGhlIGludGVncmF0aW9uLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnU3BlY2lmeSB3aGF0IHRvIHVwZGF0ZTogbmFtZSwgZGVzY3JpcHRpb24sIG9yIHN0YXR1cyddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRJbnRlZ3JhdGlvbiA9IGF3YWl0IHByaXNtYS5pbnRlZ3JhdGlvbi51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW50ZWdyYXRpb24uaWQgfSxcbiAgICAgICAgZGF0YTogdXBkYXRlRmllbGRzXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSBJbnRlZ3JhdGlvbiBcIiR7dXBkYXRlZEludGVncmF0aW9uLm5hbWV9XCIgdXBkYXRlZCBzdWNjZXNzZnVsbHkhYCxcbiAgICAgICAgZGF0YTogdXBkYXRlZEludGVncmF0aW9uLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgaW50ZWdyYXRpb25JZDogdXBkYXRlZEludGVncmF0aW9uLmlkLFxuICAgICAgICAgIG5hbWU6IHVwZGF0ZWRJbnRlZ3JhdGlvbi5uYW1lLFxuICAgICAgICAgIHN0YXR1czogdXBkYXRlZEludGVncmF0aW9uLnN0YXR1cyxcbiAgICAgICAgICBjaGFuZ2VzOiBPYmplY3Qua2V5cyh1cGRhdGVGaWVsZHMpXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gdXBkYXRlIGludGVncmF0aW9uIGR1ZSB0byBhIHN5c3RlbSBlcnJvci4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVKb3VybmV5KGRhdGE6IGFueSwgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBqb3VybmV5SWQgPSBkYXRhLmpvdXJuZXlJZCB8fCBkYXRhLmlkO1xuICAgICAgY29uc3Qgam91cm5leU5hbWUgPSBkYXRhLm5hbWU7XG4gICAgICBcbiAgICAgIGlmICgham91cm5leUlkICYmICFqb3VybmV5TmFtZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2Ugc3BlY2lmeSB3aGljaCBqb3VybmV5IHRvIHVwZGF0ZS4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeTogXCJ1cGRhdGUgam91cm5leSBDdXN0b21lciBPbmJvYXJkaW5nXCInLCAnSW5jbHVkZSBqb3VybmV5IG5hbWUgb3IgSUQnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBsZXQgam91cm5leSA9IG51bGw7XG4gICAgICBpZiAoam91cm5leUlkKSB7XG4gICAgICAgIGpvdXJuZXkgPSBhd2FpdCBwcmlzbWEuam91cm5leS5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGpvdXJuZXlJZCB9IH0pO1xuICAgICAgfSBlbHNlIGlmIChqb3VybmV5TmFtZSkge1xuICAgICAgICBqb3VybmV5ID0gYXdhaXQgcHJpc21hLmpvdXJuZXkuZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZTogeyBuYW1lOiB7IGNvbnRhaW5zOiBqb3VybmV5TmFtZSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICgham91cm5leSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdKb3VybmV5IG5vdCBmb3VuZC4gUGxlYXNlIGNoZWNrIHRoZSBpZGVudGlmaWVyIGFuZCB0cnkgYWdhaW4uJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnkgY3JlYXRpbmcgYSBuZXcgam91cm5leSBpbnN0ZWFkJywgJ1ZlcmlmeSB0aGUgam91cm5leSBuYW1lJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXBkYXRlRmllbGRzOiBhbnkgPSB7fTtcbiAgICAgIGlmIChkYXRhLm5hbWUgJiYgZGF0YS5uYW1lICE9PSBqb3VybmV5Lm5hbWUpIHVwZGF0ZUZpZWxkcy5uYW1lID0gZGF0YS5uYW1lO1xuICAgICAgaWYgKGRhdGEuZGVzY3JpcHRpb24pIHVwZGF0ZUZpZWxkcy5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb247XG4gICAgICBpZiAoZGF0YS5zdGF0dXMgJiYgWydEUkFGVCcsICdBQ1RJVkUnLCAnUEFVU0VEJywgJ0NPTVBMRVRFRCddLmluY2x1ZGVzKGRhdGEuc3RhdHVzKSkge1xuICAgICAgICB1cGRhdGVGaWVsZHMuc3RhdHVzID0gZGF0YS5zdGF0dXM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVGaWVsZHMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdObyBjaGFuZ2VzIHNwZWNpZmllZCBmb3IgdGhlIGpvdXJuZXkuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydTcGVjaWZ5IHdoYXQgdG8gdXBkYXRlOiBuYW1lLCBkZXNjcmlwdGlvbiwgb3Igc3RhdHVzJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXBkYXRlZEpvdXJuZXkgPSBhd2FpdCBwcmlzbWEuam91cm5leS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogam91cm5leS5pZCB9LFxuICAgICAgICBkYXRhOiB1cGRhdGVGaWVsZHNcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg4pyFIEpvdXJuZXkgXCIke3VwZGF0ZWRKb3VybmV5Lm5hbWV9XCIgdXBkYXRlZCBzdWNjZXNzZnVsbHkhYCxcbiAgICAgICAgZGF0YTogdXBkYXRlZEpvdXJuZXksXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBqb3VybmV5SWQ6IHVwZGF0ZWRKb3VybmV5LmlkLFxuICAgICAgICAgIG5hbWU6IHVwZGF0ZWRKb3VybmV5Lm5hbWUsXG4gICAgICAgICAgc3RhdHVzOiB1cGRhdGVkSm91cm5leS5zdGF0dXMsXG4gICAgICAgICAgY2hhbmdlczogT2JqZWN0LmtleXModXBkYXRlRmllbGRzKVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZSBqb3VybmV5IGR1ZSB0byBhIHN5c3RlbSBlcnJvci4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVBQlRlc3QoZGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRlc3RJZCA9IGRhdGEudGVzdElkIHx8IGRhdGEuaWQ7XG4gICAgICBjb25zdCB0ZXN0TmFtZSA9IGRhdGEubmFtZTtcbiAgICAgIFxuICAgICAgaWYgKCF0ZXN0SWQgJiYgIXRlc3ROYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzcGVjaWZ5IHdoaWNoIEEvQiB0ZXN0IHRvIHVwZGF0ZS4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeTogXCJ1cGRhdGUgQS9CIHRlc3QgU3ViamVjdCBMaW5lIFRlc3RcIicsICdJbmNsdWRlIHRlc3QgbmFtZSBvciBJRCddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxldCBhYlRlc3QgPSBudWxsO1xuICAgICAgaWYgKHRlc3RJZCkge1xuICAgICAgICBhYlRlc3QgPSBhd2FpdCBwcmlzbWEuYUJUZXN0LmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogdGVzdElkIH0gfSk7XG4gICAgICB9IGVsc2UgaWYgKHRlc3ROYW1lKSB7XG4gICAgICAgIGFiVGVzdCA9IGF3YWl0IHByaXNtYS5hQlRlc3QuZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZTogeyBuYW1lOiB7IGNvbnRhaW5zOiB0ZXN0TmFtZSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghYWJUZXN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0EvQiB0ZXN0IG5vdCBmb3VuZC4gUGxlYXNlIGNoZWNrIHRoZSBpZGVudGlmaWVyIGFuZCB0cnkgYWdhaW4uJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnkgY3JlYXRpbmcgYSBuZXcgQS9CIHRlc3QgaW5zdGVhZCcsICdWZXJpZnkgdGhlIHRlc3QgbmFtZSddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVwZGF0ZUZpZWxkczogYW55ID0ge307XG4gICAgICBpZiAoZGF0YS5uYW1lICYmIGRhdGEubmFtZSAhPT0gYWJUZXN0Lm5hbWUpIHVwZGF0ZUZpZWxkcy5uYW1lID0gZGF0YS5uYW1lO1xuICAgICAgaWYgKGRhdGEuZGVzY3JpcHRpb24pIHVwZGF0ZUZpZWxkcy5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb247XG4gICAgICBpZiAoZGF0YS5zdGF0dXMgJiYgWydEUkFGVCcsICdSVU5OSU5HJywgJ1BBVVNFRCcsICdDT01QTEVURUQnLCAnQ0FOQ0VMTEVEJ10uaW5jbHVkZXMoZGF0YS5zdGF0dXMpKSB7XG4gICAgICAgIHVwZGF0ZUZpZWxkcy5zdGF0dXMgPSBkYXRhLnN0YXR1cztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZUZpZWxkcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ05vIGNoYW5nZXMgc3BlY2lmaWVkIGZvciB0aGUgQS9CIHRlc3QuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydTcGVjaWZ5IHdoYXQgdG8gdXBkYXRlOiBuYW1lLCBkZXNjcmlwdGlvbiwgb3Igc3RhdHVzJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXBkYXRlZFRlc3QgPSBhd2FpdCBwcmlzbWEuYUJUZXN0LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBhYlRlc3QuaWQgfSxcbiAgICAgICAgZGF0YTogdXBkYXRlRmllbGRzXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSBBL0IgdGVzdCBcIiR7dXBkYXRlZFRlc3QubmFtZX1cIiB1cGRhdGVkIHN1Y2Nlc3NmdWxseSFgLFxuICAgICAgICBkYXRhOiB1cGRhdGVkVGVzdCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIHRlc3RJZDogdXBkYXRlZFRlc3QuaWQsXG4gICAgICAgICAgbmFtZTogdXBkYXRlZFRlc3QubmFtZSxcbiAgICAgICAgICBzdGF0dXM6IHVwZGF0ZWRUZXN0LnN0YXR1cyxcbiAgICAgICAgICBjaGFuZ2VzOiBPYmplY3Qua2V5cyh1cGRhdGVGaWVsZHMpXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gdXBkYXRlIEEvQiB0ZXN0IGR1ZSB0byBhIHN5c3RlbSBlcnJvci4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gTUlTU0lORyBERUxFVEUgT1BFUkFUSU9OU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlTGlzdChkYXRhOiBhbnksIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbGlzdElkID0gZGF0YS5saXN0SWQgfHwgZGF0YS5pZDtcbiAgICAgIGNvbnN0IGxpc3ROYW1lID0gZGF0YS5uYW1lO1xuICAgICAgXG4gICAgICBpZiAoIWxpc3RJZCAmJiAhbGlzdE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIHNwZWNpZnkgd2hpY2ggbGlzdCB0byBkZWxldGUuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnk6IFwiZGVsZXRlIGxpc3QgVklQIEN1c3RvbWVyc1wiJywgJ0luY2x1ZGUgbGlzdCBuYW1lIG9yIElEJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgbGV0IGxpc3QgPSBudWxsO1xuICAgICAgaWYgKGxpc3RJZCkge1xuICAgICAgICBsaXN0ID0gYXdhaXQgcHJpc21hLmxpc3QuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBsaXN0SWQgfSB9KTtcbiAgICAgIH0gZWxzZSBpZiAobGlzdE5hbWUpIHtcbiAgICAgICAgbGlzdCA9IGF3YWl0IHByaXNtYS5saXN0LmZpbmRGaXJzdCh7XG4gICAgICAgICAgd2hlcmU6IHsgbmFtZTogeyBjb250YWluczogbGlzdE5hbWUsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnTGlzdCBub3QgZm91bmQuIFBsZWFzZSBjaGVjayB0aGUgaWRlbnRpZmllciBhbmQgdHJ5IGFnYWluLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVmVyaWZ5IHRoZSBsaXN0IG5hbWUnXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiBsaXN0IGlzIGJlaW5nIHVzZWQgaW4gY2FtcGFpZ25zXG4gICAgICBjb25zdCBbZW1haWxDYW1wYWlnbnMsIHNtc0NhbXBhaWducywgd2hhdHNhcHBDYW1wYWlnbnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBwcmlzbWEuZW1haWxDYW1wYWlnbi5jb3VudCh7IHdoZXJlOiB7IGxpc3RzOiB7IHNvbWU6IHsgaWQ6IGxpc3QuaWQgfSB9IH0gfSksXG4gICAgICAgIHByaXNtYS5zTVNDYW1wYWlnbi5jb3VudCh7IHdoZXJlOiB7IGxpc3RzOiB7IHNvbWU6IHsgaWQ6IGxpc3QuaWQgfSB9IH0gfSksXG4gICAgICAgIHByaXNtYS53aGF0c0FwcENhbXBhaWduLmNvdW50KHsgd2hlcmU6IHsgbGlzdHM6IHsgc29tZTogeyBpZDogbGlzdC5pZCB9IH0gfSB9KVxuICAgICAgXSk7XG5cbiAgICAgIGNvbnN0IHRvdGFsVXNhZ2UgPSBlbWFpbENhbXBhaWducyArIHNtc0NhbXBhaWducyArIHdoYXRzYXBwQ2FtcGFpZ25zO1xuICAgICAgXG4gICAgICBpZiAodG90YWxVc2FnZSA+IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBgQ2Fubm90IGRlbGV0ZSBsaXN0IFwiJHtsaXN0Lm5hbWV9XCIgLSBpdCdzIGJlaW5nIHVzZWQgaW4gJHt0b3RhbFVzYWdlfSBjYW1wYWlnbihzKS5gLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1JlbW92ZSBsaXN0IGZyb20gY2FtcGFpZ25zIGZpcnN0JywgJ0NvbnNpZGVyIGFyY2hpdmluZyBpbnN0ZWFkIG9mIGRlbGV0aW5nJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgcHJpc21hLmxpc3QuZGVsZXRlKHsgd2hlcmU6IHsgaWQ6IGxpc3QuaWQgfSB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSBMaXN0IFwiJHtsaXN0Lm5hbWV9XCIgZGVsZXRlZCBzdWNjZXNzZnVsbHkhYCxcbiAgICAgICAgZGF0YTogeyBsaXN0SWQ6IGxpc3QuaWQsIG5hbWU6IGxpc3QubmFtZSB9LFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgbGlzdElkOiBsaXN0LmlkLFxuICAgICAgICAgIG5hbWU6IGxpc3QubmFtZSxcbiAgICAgICAgICBhY3Rpb246ICdkZWxldGVkJ1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGRlbGV0ZSBsaXN0IGR1ZSB0byBhIHN5c3RlbSBlcnJvci4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVJbnRlZ3JhdGlvbihkYXRhOiBhbnksIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaW50ZWdyYXRpb25JZCA9IGRhdGEuaW50ZWdyYXRpb25JZCB8fCBkYXRhLmlkO1xuICAgICAgY29uc3QgaW50ZWdyYXRpb25OYW1lID0gZGF0YS5uYW1lO1xuICAgICAgXG4gICAgICBpZiAoIWludGVncmF0aW9uSWQgJiYgIWludGVncmF0aW9uTmFtZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2Ugc3BlY2lmeSB3aGljaCBpbnRlZ3JhdGlvbiB0byBkZWxldGUuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydUcnk6IFwiZGVsZXRlIGludGVncmF0aW9uIFphcGllclwiJywgJ0luY2x1ZGUgaW50ZWdyYXRpb24gbmFtZSBvciBJRCddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxldCBpbnRlZ3JhdGlvbiA9IG51bGw7XG4gICAgICBpZiAoaW50ZWdyYXRpb25JZCkge1xuICAgICAgICBpbnRlZ3JhdGlvbiA9IGF3YWl0IHByaXNtYS5pbnRlZ3JhdGlvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGludGVncmF0aW9uSWQgfSB9KTtcbiAgICAgIH0gZWxzZSBpZiAoaW50ZWdyYXRpb25OYW1lKSB7XG4gICAgICAgIGludGVncmF0aW9uID0gYXdhaXQgcHJpc21hLmludGVncmF0aW9uLmZpbmRGaXJzdCh7XG4gICAgICAgICAgd2hlcmU6IHsgbmFtZTogeyBjb250YWluczogaW50ZWdyYXRpb25OYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpbnRlZ3JhdGlvbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJbnRlZ3JhdGlvbiBub3QgZm91bmQuIFBsZWFzZSBjaGVjayB0aGUgaWRlbnRpZmllciBhbmQgdHJ5IGFnYWluLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVmVyaWZ5IHRoZSBpbnRlZ3JhdGlvbiBuYW1lJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgcHJpc21hLmludGVncmF0aW9uLmRlbGV0ZSh7IHdoZXJlOiB7IGlkOiBpbnRlZ3JhdGlvbi5pZCB9IH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg4pyFIEludGVncmF0aW9uIFwiJHtpbnRlZ3JhdGlvbi5uYW1lfVwiIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5IWAsXG4gICAgICAgIGRhdGE6IHsgaW50ZWdyYXRpb25JZDogaW50ZWdyYXRpb24uaWQsIG5hbWU6IGludGVncmF0aW9uLm5hbWUgfSxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGludGVncmF0aW9uSWQ6IGludGVncmF0aW9uLmlkLFxuICAgICAgICAgIG5hbWU6IGludGVncmF0aW9uLm5hbWUsXG4gICAgICAgICAgYWN0aW9uOiAnZGVsZXRlZCdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBkZWxldGUgaW50ZWdyYXRpb24gZHVlIHRvIGEgc3lzdGVtIGVycm9yLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZUpvdXJuZXkoZGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGpvdXJuZXlJZCA9IGRhdGEuam91cm5leUlkIHx8IGRhdGEuaWQ7XG4gICAgICBjb25zdCBqb3VybmV5TmFtZSA9IGRhdGEubmFtZTtcbiAgICAgIFxuICAgICAgaWYgKCFqb3VybmV5SWQgJiYgIWpvdXJuZXlOYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzcGVjaWZ5IHdoaWNoIGpvdXJuZXkgdG8gZGVsZXRlLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnVHJ5OiBcImRlbGV0ZSBqb3VybmV5IEN1c3RvbWVyIE9uYm9hcmRpbmdcIicsICdJbmNsdWRlIGpvdXJuZXkgbmFtZSBvciBJRCddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxldCBqb3VybmV5ID0gbnVsbDtcbiAgICAgIGlmIChqb3VybmV5SWQpIHtcbiAgICAgICAgam91cm5leSA9IGF3YWl0IHByaXNtYS5qb3VybmV5LmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogam91cm5leUlkIH0gfSk7XG4gICAgICB9IGVsc2UgaWYgKGpvdXJuZXlOYW1lKSB7XG4gICAgICAgIGpvdXJuZXkgPSBhd2FpdCBwcmlzbWEuam91cm5leS5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7IG5hbWU6IHsgY29udGFpbnM6IGpvdXJuZXlOYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFqb3VybmV5KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0pvdXJuZXkgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGlkZW50aWZpZXIgYW5kIHRyeSBhZ2Fpbi4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1ZlcmlmeSB0aGUgam91cm5leSBuYW1lJ11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgcHJpc21hLmpvdXJuZXkuZGVsZXRlKHsgd2hlcmU6IHsgaWQ6IGpvdXJuZXkuaWQgfSB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYOKchSBKb3VybmV5IFwiJHtqb3VybmV5Lm5hbWV9XCIgZGVsZXRlZCBzdWNjZXNzZnVsbHkhYCxcbiAgICAgICAgZGF0YTogeyBqb3VybmV5SWQ6IGpvdXJuZXkuaWQsIG5hbWU6IGpvdXJuZXkubmFtZSB9LFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgam91cm5leUlkOiBqb3VybmV5LmlkLFxuICAgICAgICAgIG5hbWU6IGpvdXJuZXkubmFtZSxcbiAgICAgICAgICBhY3Rpb246ICdkZWxldGVkJ1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGRlbGV0ZSBqb3VybmV5IGR1ZSB0byBhIHN5c3RlbSBlcnJvci4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVBQlRlc3QoZGF0YTogYW55LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRlc3RJZCA9IGRhdGEudGVzdElkIHx8IGRhdGEuaWQ7XG4gICAgICBjb25zdCB0ZXN0TmFtZSA9IGRhdGEubmFtZTtcbiAgICAgIFxuICAgICAgaWYgKCF0ZXN0SWQgJiYgIXRlc3ROYW1lKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzcGVjaWZ5IHdoaWNoIEEvQiB0ZXN0IHRvIGRlbGV0ZS4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1RyeTogXCJkZWxldGUgQS9CIHRlc3QgU3ViamVjdCBMaW5lIFRlc3RcIicsICdJbmNsdWRlIHRlc3QgbmFtZSBvciBJRCddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxldCBhYlRlc3QgPSBudWxsO1xuICAgICAgaWYgKHRlc3RJZCkge1xuICAgICAgICBhYlRlc3QgPSBhd2FpdCBwcmlzbWEuYUJUZXN0LmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogdGVzdElkIH0gfSk7XG4gICAgICB9IGVsc2UgaWYgKHRlc3ROYW1lKSB7XG4gICAgICAgIGFiVGVzdCA9IGF3YWl0IHByaXNtYS5hQlRlc3QuZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZTogeyBuYW1lOiB7IGNvbnRhaW5zOiB0ZXN0TmFtZSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghYWJUZXN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0EvQiB0ZXN0IG5vdCBmb3VuZC4gUGxlYXNlIGNoZWNrIHRoZSBpZGVudGlmaWVyIGFuZCB0cnkgYWdhaW4uJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogWydWZXJpZnkgdGhlIHRlc3QgbmFtZSddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHByaXNtYS5hQlRlc3QuZGVsZXRlKHsgd2hlcmU6IHsgaWQ6IGFiVGVzdC5pZCB9IH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg4pyFIEEvQiB0ZXN0IFwiJHthYlRlc3QubmFtZX1cIiBkZWxldGVkIHN1Y2Nlc3NmdWxseSFgLFxuICAgICAgICBkYXRhOiB7IHRlc3RJZDogYWJUZXN0LmlkLCBuYW1lOiBhYlRlc3QubmFtZSB9LFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgdGVzdElkOiBhYlRlc3QuaWQsXG4gICAgICAgICAgbmFtZTogYWJUZXN0Lm5hbWUsXG4gICAgICAgICAgYWN0aW9uOiAnZGVsZXRlZCdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBkZWxldGUgQS9CIHRlc3QgZHVlIHRvIGEgc3lzdGVtIGVycm9yLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBBSSBSRVBPUlRJTkcgU1VQUE9SVCAgXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgcmVxdWVzdCBpcyBmb3IgcmVwb3J0IGdlbmVyYXRpb25cbiAgICovXG4gIHByaXZhdGUgaXNSZXBvcnRpbmdSZXF1ZXN0KGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQsIHF1ZXJ5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCByZXBvcnRLZXl3b3JkcyA9IFsncmVwb3J0JywgJ2V4cG9ydCcsICdnZW5lcmF0ZScsICdkb3dubG9hZCcsICdleHRyYWN0JywgJ3N1bW1hcnknXTtcbiAgICBjb25zdCBmb3JtYXRLZXl3b3JkcyA9IFsncGRmJywgJ2V4Y2VsJywgJ2NzdicsICd4bHN4JywgJ2pzb24nXTtcbiAgICBjb25zdCBkYXRhS2V5d29yZHMgPSBbJ2RhdGEnLCAnYW5hbHl0aWNzJywgJ3BlcmZvcm1hbmNlJywgJ21ldHJpY3MnLCAnc3RhdHMnXTtcbiAgICBcbiAgICBjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgZXhwbGljaXQgcmVwb3J0IGtleXdvcmRzXG4gICAgaWYgKHJlcG9ydEtleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlclF1ZXJ5LmluY2x1ZGVzKGtleXdvcmQpKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBmb3JtYXQgKyBkYXRhIGNvbWJpbmF0aW9uXG4gICAgaWYgKGZvcm1hdEtleXdvcmRzLnNvbWUoZm9ybWF0ID0+IGxvd2VyUXVlcnkuaW5jbHVkZXMoZm9ybWF0KSkgJiYgXG4gICAgICAgIGRhdGFLZXl3b3Jkcy5zb21lKGRhdGEgPT4gbG93ZXJRdWVyeS5pbmNsdWRlcyhkYXRhKSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgXCJjcmVhdGUvZ2VuZXJhdGUgWCByZXBvcnRcIiBwYXR0ZXJuc1xuICAgIGlmICgobG93ZXJRdWVyeS5pbmNsdWRlcygnY3JlYXRlJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnZ2VuZXJhdGUnKSkgJiYgXG4gICAgICAgIGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3JlcG9ydCcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgQUktcG93ZXJlZCByZXBvcnQgZ2VuZXJhdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlUmVwb3J0R2VuZXJhdGlvbihpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCB1c2VySWQ6IHN0cmluZywgcXVlcnk6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB1c2VyIGRldGFpbHMgZm9yIHBlcm1pc3Npb25zXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IHJvbGU6IHRydWUsIG9yZ2FuaXphdGlvbklkOiB0cnVlIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQuIENhbm5vdCBnZW5lcmF0ZSByZXBvcnQuJyxcbiAgICAgICAgICBlcnJvcjogJ1VzZXIgYXV0aGVudGljYXRpb24gZmFpbGVkJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXBvcnRSZXF1ZXN0OiBSZXBvcnRSZXF1ZXN0ID0ge1xuICAgICAgICBxdWVyeSxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB1c2VyUm9sZTogdXNlci5yb2xlLFxuICAgICAgICBvcmdhbml6YXRpb25JZDogdXNlci5vcmdhbml6YXRpb25JZCxcbiAgICAgICAgb3B0aW9uczogdGhpcy5leHRyYWN0UmVwb3J0T3B0aW9ucyhxdWVyeSlcbiAgICAgIH07XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdBSSByZXBvcnQgZ2VuZXJhdGlvbiBpbml0aWF0ZWQgdmlhIGludGVsbGlnZW50IGV4ZWN1dGlvbicsIHtcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiB1c2VyLm9yZ2FuaXphdGlvbklkXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW50ZWxsaWdlbnRSZXBvcnRpbmdFbmdpbmUuZ2VuZXJhdGVSZXBvcnQocmVwb3J0UmVxdWVzdCk7XG5cbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZSxcbiAgICAgICAgICBlcnJvcjogcmVzdWx0LmVycm9yLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiByZXN1bHQuc3VnZ2VzdGlvbnNcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2UsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICByZXBvcnRJZDogcmVzdWx0LnJlcG9ydElkLFxuICAgICAgICAgIGVzdGltYXRlZFJvd3M6IHJlc3VsdC5lc3RpbWF0ZWRSb3dzLFxuICAgICAgICAgIGZvcm1hdDogcmVzdWx0LmZvcm1hdCxcbiAgICAgICAgICBkb3dubG9hZFVybDogcmVzdWx0LmRvd25sb2FkVXJsXG4gICAgICAgIH0sXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICB0eXBlOiAnYWlfcmVwb3J0JyxcbiAgICAgICAgICByZXBvcnRJZDogcmVzdWx0LnJlcG9ydElkLFxuICAgICAgICAgIHN0YXR1czogJ3Byb2Nlc3NpbmcnXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdBSSByZXBvcnQgZ2VuZXJhdGlvbiBmYWlsZWQgaW4gZXhlY3V0aW9uIGVuZ2luZScsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLFxuICAgICAgICB1c2VySWRcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0kgZW5jb3VudGVyZWQgYW4gZXJyb3Igd2hpbGUgZ2VuZXJhdGluZyB5b3VyIHJlcG9ydC4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ1RyeTogXCJHZW5lcmF0ZSBjb250YWN0cyByZXBvcnQgaW4gRXhjZWwgZm9ybWF0XCInLFxuICAgICAgICAgICdUcnk6IFwiRXhwb3J0IGNhbXBhaWduIGRhdGEgYXMgUERGXCInLFxuICAgICAgICAgICdUcnk6IFwiQ3JlYXRlIGFuYWx5dGljcyBzdW1tYXJ5XCInXG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgcmVwb3J0IG9wdGlvbnMgZnJvbSBuYXR1cmFsIGxhbmd1YWdlIHF1ZXJ5XG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RSZXBvcnRPcHRpb25zKHF1ZXJ5OiBzdHJpbmcpOiBSZXBvcnRSZXF1ZXN0WydvcHRpb25zJ10ge1xuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IG9wdGlvbnM6IFJlcG9ydFJlcXVlc3RbJ29wdGlvbnMnXSA9IHt9O1xuXG4gICAgLy8gRGV0ZWN0IGZvcm1hdCBwcmVmZXJlbmNlXG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3BkZicpKSB7XG4gICAgICBvcHRpb25zLmZvcm1hdCA9ICdQREYnO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZXhjZWwnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCd4bHN4JykpIHtcbiAgICAgIG9wdGlvbnMuZm9ybWF0ID0gJ0V4Y2VsJztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NzdicpKSB7XG4gICAgICBvcHRpb25zLmZvcm1hdCA9ICdDU1YnO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnanNvbicpKSB7XG4gICAgICBvcHRpb25zLmZvcm1hdCA9ICdKU09OJztcbiAgICB9XG5cbiAgICAvLyBEZXRlY3QgY2hhcnQgcHJlZmVyZW5jZVxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjaGFydCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2dyYXBoJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygndmlzdWFsJykpIHtcbiAgICAgIG9wdGlvbnMuaW5jbHVkZUNoYXJ0cyA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gRGV0ZWN0IHNjaGVkdWxpbmcgcHJlZmVyZW5jZVxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCd3ZWVrbHknKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdldmVyeSB3ZWVrJykpIHtcbiAgICAgIG9wdGlvbnMuc2NoZWR1bGUgPSB7XG4gICAgICAgIGZyZXF1ZW5jeTogJ3dlZWtseScsXG4gICAgICAgIHJlY2lwaWVudHM6IFtdIC8vIFdvdWxkIG5lZWQgdG8gZXh0cmFjdCBlbWFpbHMgZnJvbSBxdWVyeVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ21vbnRobHknKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdldmVyeSBtb250aCcpKSB7XG4gICAgICBvcHRpb25zLnNjaGVkdWxlID0ge1xuICAgICAgICBmcmVxdWVuY3k6ICdtb250aGx5JyxcbiAgICAgICAgcmVjaXBpZW50czogW11cbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdkYWlseScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2V2ZXJ5IGRheScpKSB7XG4gICAgICBvcHRpb25zLnNjaGVkdWxlID0ge1xuICAgICAgICBmcmVxdWVuY3k6ICdkYWlseScsXG4gICAgICAgIHJlY2lwaWVudHM6IFtdXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBvcHRpb25zO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQUkgSU5URUdSQVRJT04gVEVTVElORyBTVVBQT1JUXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgcmVxdWVzdCBpcyBmb3IgaW50ZWdyYXRpb24gdGVzdGluZ1xuICAgKi9cbiAgcHJpdmF0ZSBpc0ludGVncmF0aW9uVGVzdGluZ1JlcXVlc3QoaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgcXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRlc3RpbmdLZXl3b3JkcyA9IFsndGVzdCcsICdjaGVjaycsICdtb25pdG9yJywgJ2hlYWx0aCcsICdzdGF0dXMnLCAnaW50ZWdyYXRpb24nXTtcbiAgICBjb25zdCBzeXN0ZW1LZXl3b3JkcyA9IFsnc3lzdGVtJywgJ3NlcnZpY2UnLCAnYXBpJywgJ2VuZHBvaW50JywgJ2Nvbm5lY3Rpb24nXTtcbiAgICBjb25zdCBzcGVjaWZpY1NlcnZpY2VzID0gWydwYXlzdGFjaycsICdzdHJpcGUnLCAndHdpbGlvJywgJ29wZW5haScsICdkYXRhYmFzZScsICdyZWRpcycsICdlbWFpbCddO1xuICAgIFxuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBpbnRlZ3JhdGlvbiB0ZXN0aW5nIGtleXdvcmRzXG4gICAgaWYgKHRlc3RpbmdLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gbG93ZXJRdWVyeS5pbmNsdWRlcyhrZXl3b3JkKSkgJiZcbiAgICAgICAgKHN5c3RlbUtleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlclF1ZXJ5LmluY2x1ZGVzKGtleXdvcmQpKSB8fFxuICAgICAgICAgc3BlY2lmaWNTZXJ2aWNlcy5zb21lKHNlcnZpY2UgPT4gbG93ZXJRdWVyeS5pbmNsdWRlcyhzZXJ2aWNlKSkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIGhlYWx0aCBjaGVjayBwYXR0ZXJuc1xuICAgIGlmICgobG93ZXJRdWVyeS5pbmNsdWRlcygnaGVhbHRoJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnc3RhdHVzJykpICYmXG4gICAgICAgIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjaGVjaycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3Rlc3QnKSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgXCJpcyBYIHdvcmtpbmdcIiBwYXR0ZXJuc1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCd3b3JraW5nJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnZnVuY3Rpb25pbmcnKSB8fCBcbiAgICAgICAgbG93ZXJRdWVyeS5pbmNsdWRlcygnYXZhaWxhYmxlJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnb25saW5lJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBpbnRlZ3JhdGlvbiB0ZXN0aW5nIG9wZXJhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUludGVncmF0aW9uVGVzdGluZyhpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCB1c2VySWQ6IHN0cmluZywgcXVlcnk6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB1c2VyIGRldGFpbHMgZm9yIHBlcm1pc3Npb25zXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IHJvbGU6IHRydWUsIG9yZ2FuaXphdGlvbklkOiB0cnVlIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQuIENhbm5vdCBwZXJmb3JtIGludGVncmF0aW9uIHRlc3RpbmcuJyxcbiAgICAgICAgICBlcnJvcjogJ1VzZXIgYXV0aGVudGljYXRpb24gZmFpbGVkJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIuaW5mbygnQUkgaW50ZWdyYXRpb24gdGVzdGluZyBpbml0aWF0ZWQgdmlhIGludGVsbGlnZW50IGV4ZWN1dGlvbicsIHtcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiB1c2VyLm9yZ2FuaXphdGlvbklkXG4gICAgICB9KTtcblxuICAgICAgLy8gSW1wb3J0IGludGVncmF0aW9uIHRlc3RpbmcgZW5naW5lXG4gICAgICBjb25zdCB7IGdldEludGVncmF0aW9uSGVhbHRoLCB0ZXN0U3BlY2lmaWNJbnRlZ3JhdGlvbiB9ID0gYXdhaXQgaW1wb3J0KCcuL2ludGVncmF0aW9uLXRlc3RpbmctZW5naW5lJyk7XG4gICAgICBcbiAgICAgIC8vIERldGVybWluZSBpZiB0ZXN0aW5nIHNwZWNpZmljIGludGVncmF0aW9uIG9yIGFsbFxuICAgICAgY29uc3Qgc3BlY2lmaWNJbnRlZ3JhdGlvbiA9IHRoaXMuZXh0cmFjdFNwZWNpZmljSW50ZWdyYXRpb24ocXVlcnkpO1xuICAgICAgXG4gICAgICBpZiAoc3BlY2lmaWNJbnRlZ3JhdGlvbikge1xuICAgICAgICAvLyBUZXN0IHNwZWNpZmljIGludGVncmF0aW9uXG4gICAgICAgIGNvbnN0IGludGVncmF0aW9uUmVzdWx0ID0gYXdhaXQgdGVzdFNwZWNpZmljSW50ZWdyYXRpb24oc3BlY2lmaWNJbnRlZ3JhdGlvbik7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWludGVncmF0aW9uUmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogYEkgY291bGRuJ3QgZmluZCB0aGUgJHtzcGVjaWZpY0ludGVncmF0aW9ufSBpbnRlZ3JhdGlvbiB0byB0ZXN0LmAsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnVHJ5OiBcIkNoZWNrIHN5c3RlbSBoZWFsdGhcIicsXG4gICAgICAgICAgICAgICdUcnk6IFwiVGVzdCBhbGwgaW50ZWdyYXRpb25zXCInLFxuICAgICAgICAgICAgICAnVHJ5OiBcIldoYXQgaW50ZWdyYXRpb25zIGFyZSBhdmFpbGFibGU/XCInXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXR1c0Vtb2ppID0gaW50ZWdyYXRpb25SZXN1bHQuc3RhdHVzID09PSAnaGVhbHRoeScgPyAn4pyFJyA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25SZXN1bHQuc3RhdHVzID09PSAnZGVncmFkZWQnID8gJ+KaoO+4jycgOiAn4p2MJztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogYCR7c3RhdHVzRW1vaml9ICoqJHtpbnRlZ3JhdGlvblJlc3VsdC5uYW1lfSoqIGlzICR7aW50ZWdyYXRpb25SZXN1bHQuc3RhdHVzfS4gUmVzcG9uc2UgdGltZTogJHtpbnRlZ3JhdGlvblJlc3VsdC5yZXNwb25zZVRpbWV9bXNgLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGludGVncmF0aW9uOiBpbnRlZ3JhdGlvblJlc3VsdCxcbiAgICAgICAgICAgIHJlc3BvbnNlVGltZTogaW50ZWdyYXRpb25SZXN1bHQucmVzcG9uc2VUaW1lLFxuICAgICAgICAgICAgbGFzdENoZWNrZWQ6IGludGVncmF0aW9uUmVzdWx0Lmxhc3RDaGVja2VkLFxuICAgICAgICAgICAgY3JpdGljYWxpdHlMZXZlbDogaW50ZWdyYXRpb25SZXN1bHQuY3JpdGljYWxpdHlMZXZlbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgdHlwZTogJ2ludGVncmF0aW9uX3Rlc3QnLFxuICAgICAgICAgICAgaW50ZWdyYXRpb25JZDogaW50ZWdyYXRpb25SZXN1bHQuaWQsXG4gICAgICAgICAgICBzdGF0dXM6IGludGVncmF0aW9uUmVzdWx0LnN0YXR1cyxcbiAgICAgICAgICAgIHNsYUNvbXBsaWFuY2U6IGludGVncmF0aW9uUmVzdWx0LnJlc3BvbnNlVGltZSA8PSBpbnRlZ3JhdGlvblJlc3VsdC5zbGFUYXJnZXRcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUZXN0IGFsbCBpbnRlZ3JhdGlvbnNcbiAgICAgICAgY29uc3QgaGVhbHRoUmVwb3J0ID0gYXdhaXQgZ2V0SW50ZWdyYXRpb25IZWFsdGgodXNlci5vcmdhbml6YXRpb25JZCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdGF0dXNFbW9qaSA9IGhlYWx0aFJlcG9ydC5vdmVyYWxsLnN0YXR1cyA9PT0gJ2hlYWx0aHknID8gJ+KchScgOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWx0aFJlcG9ydC5vdmVyYWxsLnN0YXR1cyA9PT0gJ2RlZ3JhZGVkJyA/ICfimqDvuI8nIDogJ+KdjCc7XG5cbiAgICAgICAgY29uc3QgY3JpdGljYWxJc3N1ZXMgPSBoZWFsdGhSZXBvcnQuaW50ZWdyYXRpb25zLmZpbHRlcihpID0+IFxuICAgICAgICAgIGkuc3RhdHVzID09PSAndW5oZWFsdGh5JyAmJiBpLmNyaXRpY2FsaXR5TGV2ZWwgPT09ICdjcml0aWNhbCdcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgbWVzc2FnZSA9IGAke3N0YXR1c0Vtb2ppfSAqKlN5c3RlbSBIZWFsdGggU2NvcmU6ICR7aGVhbHRoUmVwb3J0Lm92ZXJhbGwuc2NvcmV9LzEwMCoqXFxuXFxuYDtcbiAgICAgICAgbWVzc2FnZSArPSBg8J+TiiAqKkludGVncmF0aW9uIFN0YXR1czoqKlxcbmA7XG4gICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBIZWFsdGh5OiAke2hlYWx0aFJlcG9ydC5tZXRyaWNzLmhlYWx0aHlDb3VudH0vJHtoZWFsdGhSZXBvcnQubWV0cmljcy50b3RhbEludGVncmF0aW9uc31cXG5gO1xuICAgICAgICBtZXNzYWdlICs9IGDigKIgQXZlcmFnZSBSZXNwb25zZTogJHtNYXRoLnJvdW5kKGhlYWx0aFJlcG9ydC5tZXRyaWNzLmF2ZXJhZ2VSZXNwb25zZVRpbWUpfW1zXFxuYDtcbiAgICAgICAgbWVzc2FnZSArPSBg4oCiIFJpc2sgTGV2ZWw6ICR7aGVhbHRoUmVwb3J0Lmluc2lnaHRzLnJpc2tMZXZlbC50b1VwcGVyQ2FzZSgpfVxcbmA7XG5cbiAgICAgICAgaWYgKGNyaXRpY2FsSXNzdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBtZXNzYWdlICs9IGBcXG7wn5qoICoqQ3JpdGljYWwgSXNzdWVzOioqXFxuYDtcbiAgICAgICAgICBjcml0aWNhbElzc3Vlcy5mb3JFYWNoKGlzc3VlID0+IHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiAke2lzc3VlLm5hbWV9OiAke2lzc3VlLnN0YXR1c31cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBoZWFsdGhSZXBvcnQuaW5zaWdodHMucmVjb21tZW5kYXRpb25zLmxlbmd0aCA+IDBcbiAgICAgICAgICA/IGhlYWx0aFJlcG9ydC5pbnNpZ2h0cy5yZWNvbW1lbmRhdGlvbnNcbiAgICAgICAgICA6IFsnQWxsIGludGVncmF0aW9ucyBhcmUgaGVhbHRoeSBhbmQgZnVuY3Rpb25pbmcgbm9ybWFsbHknXTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBvdmVyYWxsU3RhdHVzOiBoZWFsdGhSZXBvcnQub3ZlcmFsbC5zdGF0dXMsXG4gICAgICAgICAgICBoZWFsdGhTY29yZTogaGVhbHRoUmVwb3J0Lm92ZXJhbGwuc2NvcmUsXG4gICAgICAgICAgICBtZXRyaWNzOiBoZWFsdGhSZXBvcnQubWV0cmljcyxcbiAgICAgICAgICAgIGludGVncmF0aW9uczogaGVhbHRoUmVwb3J0LmludGVncmF0aW9ucy5tYXAoaSA9PiAoe1xuICAgICAgICAgICAgICBuYW1lOiBpLm5hbWUsXG4gICAgICAgICAgICAgIHN0YXR1czogaS5zdGF0dXMsXG4gICAgICAgICAgICAgIHJlc3BvbnNlVGltZTogaS5yZXNwb25zZVRpbWUsXG4gICAgICAgICAgICAgIGNyaXRpY2FsaXR5TGV2ZWw6IGkuY3JpdGljYWxpdHlMZXZlbFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgaW5zaWdodHM6IGhlYWx0aFJlcG9ydC5pbnNpZ2h0c1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bGxfaGVhbHRoX2NoZWNrJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogaGVhbHRoUmVwb3J0Lm92ZXJhbGwubGFzdFVwZGF0ZWQsXG4gICAgICAgICAgICBjcml0aWNhbElzc3Vlc0NvdW50OiBjcml0aWNhbElzc3Vlcy5sZW5ndGhcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN1Z2dlc3Rpb25zXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdBSSBpbnRlZ3JhdGlvbiB0ZXN0aW5nIGZhaWxlZCBpbiBleGVjdXRpb24gZW5naW5lJywge1xuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICBxdWVyeTogcXVlcnkuc3Vic3RyaW5nKDAsIDEwMCksXG4gICAgICAgIHVzZXJJZFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnSSBlbmNvdW50ZXJlZCBhbiBlcnJvciB3aGlsZSB0ZXN0aW5nIGludGVncmF0aW9ucy4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ1RyeTogXCJDaGVjayBzeXN0ZW0gaGVhbHRoXCInLFxuICAgICAgICAgICdUcnk6IFwiVGVzdCBkYXRhYmFzZSBjb25uZWN0aW9uXCInLFxuICAgICAgICAgICdUcnk6IFwiV2hhdCBzZXJ2aWNlcyBhcmUgb25saW5lP1wiJ1xuICAgICAgICBdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IHNwZWNpZmljIGludGVncmF0aW9uIGZyb20gbmF0dXJhbCBsYW5ndWFnZSBxdWVyeVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0U3BlY2lmaWNJbnRlZ3JhdGlvbihxdWVyeTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgLy8gTWFwIGNvbW1vbiB0ZXJtcyB0byBpbnRlZ3JhdGlvbiB0eXBlc1xuICAgIGNvbnN0IGludGVncmF0aW9uTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ3BheXN0YWNrJzogJ3BheXN0YWNrJyxcbiAgICAgICdzdHJpcGUnOiAnc3RyaXBlJyxcbiAgICAgICdwYXlwYWwnOiAncGF5cGFsJyxcbiAgICAgICdmbHV0dGVyd2F2ZSc6ICdmbHV0dGVyd2F2ZScsXG4gICAgICAnZGF0YWJhc2UnOiAnZGF0YWJhc2UnLFxuICAgICAgJ3Bvc3RncmVzJzogJ2RhdGFiYXNlJyxcbiAgICAgICdwb3N0Z3Jlc3FsJzogJ2RhdGFiYXNlJyxcbiAgICAgICdyZWRpcyc6ICdyZWRpcycsXG4gICAgICAnY2FjaGUnOiAncmVkaXMnLFxuICAgICAgJ29wZW5haSc6ICdvcGVuYWknLFxuICAgICAgJ2FpJzogJ29wZW5haScsXG4gICAgICAnZW1haWwnOiAnbWFpbHRyYXAnLFxuICAgICAgJ21haWx0cmFwJzogJ21haWx0cmFwJyxcbiAgICAgICdzbXRwJzogJ21haWx0cmFwJyxcbiAgICAgICdzbXMnOiAndHdpbGlvJyxcbiAgICAgICd0d2lsaW8nOiAndHdpbGlvJyxcbiAgICAgICd3aGF0c2FwcCc6ICd3aGF0c2FwcF9idXNpbmVzcydcbiAgICB9O1xuXG4gICAgZm9yIChjb25zdCBba2V5d29yZCwgaW50ZWdyYXRpb25dIG9mIE9iamVjdC5lbnRyaWVzKGludGVncmF0aW9uTWFwKSkge1xuICAgICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoa2V5d29yZCkpIHtcbiAgICAgICAgcmV0dXJuIGludGVncmF0aW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgaXMgYSBzZWxmLWhlYWxpbmcgcmVxdWVzdFxuICAgKi9cbiAgcHJpdmF0ZSBpc1NlbGZIZWFsaW5nUmVxdWVzdChpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCBxdWVyeTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaGVhbGluZ0tleXdvcmRzID0gW1xuICAgICAgJ2hlYWwnLCAnZml4JywgJ3JlcGFpcicsICdyZWNvdmVyJywgJ3Jlc3RvcmUnLCAnYXV0by1oZWFsJywgJ3NlbGYtaGVhbCcsXG4gICAgICAnYXV0b21hdGljIGZpeCcsICdmaXggc3lzdGVtJywgJ2hlYWwgaW50ZWdyYXRpb24nLCAncmVwYWlyIGNvbm5lY3Rpb24nLFxuICAgICAgJ2ZpeCBpc3N1ZXMnLCAnYXV0by1yZXBhaXInLCAncmVjb3ZlcnknLCAnaGVhbGluZydcbiAgICBdO1xuICAgIFxuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIHJldHVybiBoZWFsaW5nS2V5d29yZHMuc29tZShrZXl3b3JkID0+IGxvd2VyUXVlcnkuaW5jbHVkZXMoa2V5d29yZCkpIHx8XG4gICAgICAgICAgIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdmaXgnKSAmJiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc3lzdGVtJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnaW50ZWdyYXRpb24nKSkpIHx8XG4gICAgICAgICAgIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdoZWFsJykgJiYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3N5c3RlbScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NlcnZpY2UnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgc2VsZi1oZWFsaW5nIG9wZXJhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVNlbGZIZWFsaW5nKGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQsIHVzZXJJZDogc3RyaW5nLCBxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IHVzZXIgZGV0YWlscyBmb3IgcGVybWlzc2lvbnNcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgICBzZWxlY3Q6IHsgcm9sZTogdHJ1ZSwgb3JnYW5pemF0aW9uSWQ6IHRydWUgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZC4gQ2Fubm90IHBlcmZvcm0gc2VsZi1oZWFsaW5nIG9wZXJhdGlvbnMuJyxcbiAgICAgICAgICBlcnJvcjogJ1VzZXIgYXV0aGVudGljYXRpb24gZmFpbGVkJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIuaW5mbygnQUkgc2VsZi1oZWFsaW5nIGluaXRpYXRlZCB2aWEgaW50ZWxsaWdlbnQgZXhlY3V0aW9uJywge1xuICAgICAgICBxdWVyeTogcXVlcnkuc3Vic3RyaW5nKDAsIDEwMCksXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgb3JnYW5pemF0aW9uSWQ6IHVzZXIub3JnYW5pemF0aW9uSWRcbiAgICAgIH0pO1xuXG4gICAgICAvLyBJbXBvcnQgc2VsZi1oZWFsaW5nIGVuZ2luZVxuICAgICAgY29uc3QgeyB0cmlnZ2VyU3lzdGVtSGVhbGluZywgaGVhbFNwZWNpZmljSW50ZWdyYXRpb24gfSA9IGF3YWl0IGltcG9ydCgnLi9zZWxmLWhlYWxpbmctZW5naW5lJyk7XG4gICAgICBcbiAgICAgIC8vIERldGVybWluZSBpZiBoZWFsaW5nIHNwZWNpZmljIGludGVncmF0aW9uIG9yIHN5c3RlbS13aWRlXG4gICAgICBjb25zdCBzcGVjaWZpY0ludGVncmF0aW9uID0gdGhpcy5leHRyYWN0U3BlY2lmaWNJbnRlZ3JhdGlvbihxdWVyeSk7XG4gICAgICBcbiAgICAgIGlmIChzcGVjaWZpY0ludGVncmF0aW9uKSB7XG4gICAgICAgIC8vIEhlYWwgc3BlY2lmaWMgaW50ZWdyYXRpb25cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBoZWFsaW5nUmVwb3J0ID0gYXdhaXQgaGVhbFNwZWNpZmljSW50ZWdyYXRpb24odXNlcklkLCBzcGVjaWZpY0ludGVncmF0aW9uKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBpbXByb3ZlbWVudCA9IGhlYWxpbmdSZXBvcnQuc3lzdGVtSGVhbHRoLmltcHJvdmVtZW50O1xuICAgICAgICAgIGNvbnN0IGFjdGlvbnNFeGVjdXRlZCA9IGhlYWxpbmdSZXBvcnQuc3VtbWFyeS50b3RhbEFjdGlvbnM7XG4gICAgICAgICAgY29uc3Qgc3VjY2Vzc1JhdGUgPSBoZWFsaW5nUmVwb3J0LnN1bW1hcnkuc3VjY2Vzc2Z1bEFjdGlvbnMgLyBNYXRoLm1heChoZWFsaW5nUmVwb3J0LnN1bW1hcnkudG90YWxBY3Rpb25zLCAxKSAqIDEwMDtcbiAgICAgICAgICBcbiAgICAgICAgICBsZXQgbWVzc2FnZSA9IGDwn5SnICoqSGVhbGluZyBSZXBvcnQgZm9yICR7c3BlY2lmaWNJbnRlZ3JhdGlvbn0qKlxcblxcbmA7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGltcHJvdmVtZW50ID4gMCkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBg4pyFICoqU3VjY2VzcyEqKiBTeXN0ZW0gaGVhbHRoIGltcHJvdmVkIGJ5ICR7aW1wcm92ZW1lbnR9IHBvaW50c1xcbmA7XG4gICAgICAgICAgfSBlbHNlIGlmIChpbXByb3ZlbWVudCA9PT0gMCkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBg4pqg77iPICoqUGFydGlhbCBTdWNjZXNzKiogLSBObyBoZWFsdGggaW1wcm92ZW1lbnQgZGV0ZWN0ZWRcXG5gO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDinYwgKipJc3N1ZXMgRGV0ZWN0ZWQqKiAtIEhlYWx0aCBkZWNsaW5lZCBieSAke01hdGguYWJzKGltcHJvdmVtZW50KX0gcG9pbnRzXFxuYDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+TiiAqKkhlYWxpbmcgU3VtbWFyeToqKlxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIEFjdGlvbnMgRXhlY3V0ZWQ6ICR7YWN0aW9uc0V4ZWN1dGVkfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIFN1Y2Nlc3MgUmF0ZTogJHtNYXRoLnJvdW5kKHN1Y2Nlc3NSYXRlKX0lXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDigKIgRXN0aW1hdGVkIERvd250aW1lIFByZXZlbnRlZDogJHtoZWFsaW5nUmVwb3J0LnN1bW1hcnkuZXN0aW1hdGVkRG93bnRpbWVQcmV2ZW50ZWR9IG1pbnV0ZXNcXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBFc3RpbWF0ZWQgQ29zdCBTYXZpbmdzOiAkJHtoZWFsaW5nUmVwb3J0LnN1bW1hcnkuY29zdFNhdmluZ3N9XFxuXFxuYDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaGVhbGluZ1JlcG9ydC5yZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBg8J+SoSAqKlJlY29tbWVuZGF0aW9uczoqKlxcbmA7XG4gICAgICAgICAgICBoZWFsaW5nUmVwb3J0LnJlY29tbWVuZGF0aW9ucy5mb3JFYWNoKHJlYyA9PiB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiAke3JlY31cXG5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBzZXNzaW9uSWQ6IGhlYWxpbmdSZXBvcnQuc2Vzc2lvbklkLFxuICAgICAgICAgICAgICBpbXByb3ZlbWVudDogaGVhbGluZ1JlcG9ydC5zeXN0ZW1IZWFsdGguaW1wcm92ZW1lbnQsXG4gICAgICAgICAgICAgIGFjdGlvbnNFeGVjdXRlZDogaGVhbGluZ1JlcG9ydC5zdW1tYXJ5LnRvdGFsQWN0aW9ucyxcbiAgICAgICAgICAgICAgc3VjY2Vzc2Z1bEFjdGlvbnM6IGhlYWxpbmdSZXBvcnQuc3VtbWFyeS5zdWNjZXNzZnVsQWN0aW9ucyxcbiAgICAgICAgICAgICAgcmVjb21tZW5kYXRpb25zOiBoZWFsaW5nUmVwb3J0LnJlY29tbWVuZGF0aW9uc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdDaGVjazogXCJXaGF0IGlzIHRoZSBjdXJyZW50IHN5c3RlbSBoZWFsdGg/XCInLFxuICAgICAgICAgICAgICAnTW9uaXRvcjogXCJTaG93IGhlYWxpbmcgaGlzdG9yeVwiJyxcbiAgICAgICAgICAgICAgJ1ZlcmlmeTogXCJUZXN0IGFsbCBpbnRlZ3JhdGlvbnNcIidcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogYEkgY291bGRuJ3QgaGVhbCB0aGUgJHtzcGVjaWZpY0ludGVncmF0aW9ufSBpbnRlZ3JhdGlvbi4gJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkLid9YCxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdUcnk6IFwiQ2hlY2sgc3lzdGVtIGhlYWx0aCBmaXJzdFwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJIZWFsIGFsbCBzeXN0ZW0gaXNzdWVzXCInLFxuICAgICAgICAgICAgICAnVHJ5OiBcIldoYXQgaW50ZWdyYXRpb25zIG5lZWQgYXR0ZW50aW9uP1wiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFN5c3RlbS13aWRlIGhlYWxpbmdcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBoZWFsaW5nUmVwb3J0ID0gYXdhaXQgdHJpZ2dlclN5c3RlbUhlYWxpbmcodXNlcklkKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBpbXByb3ZlbWVudCA9IGhlYWxpbmdSZXBvcnQuc3lzdGVtSGVhbHRoLmltcHJvdmVtZW50O1xuICAgICAgICAgIGNvbnN0IGFjdGlvbnNFeGVjdXRlZCA9IGhlYWxpbmdSZXBvcnQuc3VtbWFyeS50b3RhbEFjdGlvbnM7XG4gICAgICAgICAgY29uc3Qgc3VjY2Vzc1JhdGUgPSBoZWFsaW5nUmVwb3J0LnN1bW1hcnkuc3VjY2Vzc2Z1bEFjdGlvbnMgLyBNYXRoLm1heChoZWFsaW5nUmVwb3J0LnN1bW1hcnkudG90YWxBY3Rpb25zLCAxKSAqIDEwMDtcbiAgICAgICAgICBcbiAgICAgICAgICBsZXQgbWVzc2FnZSA9IGDwn5SnICoqU3lzdGVtLVdpZGUgSGVhbGluZyBSZXBvcnQqKlxcblxcbmA7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGltcHJvdmVtZW50ID4gMTApIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfjokgKipFeGNlbGxlbnQhKiogU3lzdGVtIGhlYWx0aCBzaWduaWZpY2FudGx5IGltcHJvdmVkIGJ5ICR7aW1wcm92ZW1lbnR9IHBvaW50c1xcbmA7XG4gICAgICAgICAgfSBlbHNlIGlmIChpbXByb3ZlbWVudCA+IDApIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYOKchSAqKlN1Y2Nlc3MhKiogU3lzdGVtIGhlYWx0aCBpbXByb3ZlZCBieSAke2ltcHJvdmVtZW50fSBwb2ludHNcXG5gO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaW1wcm92ZW1lbnQgPT09IDApIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYOKaoO+4jyAqKlN0YWJsZSoqIC0gU3lzdGVtIGhlYWx0aCBtYWludGFpbmVkLCBubyBpbXByb3ZlbWVudCBuZWVkZWRcXG5gO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDinYwgKipBdHRlbnRpb24gUmVxdWlyZWQqKiAtIFN5c3RlbSBoZWFsdGggZGVjbGluZWQgYnkgJHtNYXRoLmFicyhpbXByb3ZlbWVudCl9IHBvaW50c1xcbmA7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfk4ogKipIZWFsaW5nIFN1bW1hcnk6KipcXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBIZWFsdGggU2NvcmU6ICR7aGVhbGluZ1JlcG9ydC5zeXN0ZW1IZWFsdGguYmVmb3JlfSDihpIgJHtoZWFsaW5nUmVwb3J0LnN5c3RlbUhlYWx0aC5hZnRlcn1cXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBBY3Rpb25zIEV4ZWN1dGVkOiAke2FjdGlvbnNFeGVjdXRlZH1cXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBTdWNjZXNzIFJhdGU6ICR7TWF0aC5yb3VuZChzdWNjZXNzUmF0ZSl9JVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIERvd250aW1lIFByZXZlbnRlZDogJHtoZWFsaW5nUmVwb3J0LnN1bW1hcnkuZXN0aW1hdGVkRG93bnRpbWVQcmV2ZW50ZWR9IG1pbnV0ZXNcXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBDb3N0IFNhdmluZ3M6ICQke2hlYWxpbmdSZXBvcnQuc3VtbWFyeS5jb3N0U2F2aW5nc31cXG5cXG5gO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChoZWFsaW5nUmVwb3J0LnJlY29tbWVuZGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDwn5KhICoqUmVjb21tZW5kYXRpb25zOioqXFxuYDtcbiAgICAgICAgICAgIGhlYWxpbmdSZXBvcnQucmVjb21tZW5kYXRpb25zLmZvckVhY2gocmVjID0+IHtcbiAgICAgICAgICAgICAgbWVzc2FnZSArPSBg4oCiICR7cmVjfVxcbmA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgbWVzc2FnZSArPSBgXFxu4o+wICoqTmV4dCBDaGVjazoqKiAke2hlYWxpbmdSZXBvcnQubmV4dENoZWNrSW4udG9Mb2NhbGVTdHJpbmcoKX1gO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBzZXNzaW9uSWQ6IGhlYWxpbmdSZXBvcnQuc2Vzc2lvbklkLFxuICAgICAgICAgICAgICBoZWFsdGhCZWZvcmU6IGhlYWxpbmdSZXBvcnQuc3lzdGVtSGVhbHRoLmJlZm9yZSxcbiAgICAgICAgICAgICAgaGVhbHRoQWZ0ZXI6IGhlYWxpbmdSZXBvcnQuc3lzdGVtSGVhbHRoLmFmdGVyLFxuICAgICAgICAgICAgICBpbXByb3ZlbWVudDogaGVhbGluZ1JlcG9ydC5zeXN0ZW1IZWFsdGguaW1wcm92ZW1lbnQsXG4gICAgICAgICAgICAgIGFjdGlvbnNFeGVjdXRlZDogaGVhbGluZ1JlcG9ydC5zdW1tYXJ5LnRvdGFsQWN0aW9ucyxcbiAgICAgICAgICAgICAgc3VjY2Vzc2Z1bEFjdGlvbnM6IGhlYWxpbmdSZXBvcnQuc3VtbWFyeS5zdWNjZXNzZnVsQWN0aW9ucyxcbiAgICAgICAgICAgICAgZmFpbGVkQWN0aW9uczogaGVhbGluZ1JlcG9ydC5zdW1tYXJ5LmZhaWxlZEFjdGlvbnMsXG4gICAgICAgICAgICAgIGNvc3RTYXZpbmdzOiBoZWFsaW5nUmVwb3J0LnN1bW1hcnkuY29zdFNhdmluZ3MsXG4gICAgICAgICAgICAgIHJlY29tbWVuZGF0aW9uczogaGVhbGluZ1JlcG9ydC5yZWNvbW1lbmRhdGlvbnNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnTW9uaXRvcjogXCJTaG93IHN5c3RlbSBoZWFsdGggZGFzaGJvYXJkXCInLFxuICAgICAgICAgICAgICAnUmV2aWV3OiBcIldoYXQgaGVhbGluZyBhY3Rpb25zIHdlcmUgdGFrZW4/XCInLFxuICAgICAgICAgICAgICAnU2NoZWR1bGU6IFwiRW5hYmxlIGF1dG9tYXRpYyBoZWFsaW5nXCInXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBJIGNvdWxkbid0IGNvbXBsZXRlIHRoZSBzeXN0ZW0gaGVhbGluZyBwcm9jZXNzLiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQuJ31gLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ1RyeTogXCJDaGVjayB3aGF0IG5lZWRzIGZpeGluZyBmaXJzdFwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJUZXN0IGludGVncmF0aW9ucyBpbmRpdmlkdWFsbHlcIicsXG4gICAgICAgICAgICAgICdUcnk6IFwiQ2hlY2sgc3lzdGVtIHN0YXR1c1wiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1NlbGYtaGVhbGluZyBleGVjdXRpb24gZmFpbGVkJywge1xuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIHF1ZXJ5OiBxdWVyeS5zdWJzdHJpbmcoMCwgMTAwKVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnSSBlbmNvdW50ZXJlZCBhbiBlcnJvciB3aGlsZSBhdHRlbXB0aW5nIHRvIGhlYWwgdGhlIHN5c3RlbS4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ1RyeTogXCJDaGVjayBzeXN0ZW0gaGVhbHRoIGZpcnN0XCInLFxuICAgICAgICAgICdUcnk6IFwiV2hhdCBpbnRlZ3JhdGlvbnMgYXJlIGZhaWxpbmc/XCInLFxuICAgICAgICAgICdUcnk6IFwiVGVzdCBkYXRhYmFzZSBjb25uZWN0aW9uXCInXG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgaXMgYSBtb2RlbCBkZXBsb3ltZW50IHJlcXVlc3RcbiAgICovXG4gIHByaXZhdGUgaXNNb2RlbERlcGxveW1lbnRSZXF1ZXN0KGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQsIHF1ZXJ5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBkZXBsb3ltZW50S2V5d29yZHMgPSBbXG4gICAgICAnZGVwbG95JywgJ2RlcGxveW1lbnQnLCAncmVsZWFzZScsICdyb2xsb3V0JywgJ3B1Ymxpc2gnLCAnbGF1bmNoJyxcbiAgICAgICdkZXBsb3kgbW9kZWwnLCAncmVsZWFzZSBtb2RlbCcsICdwdXNoIHRvIHByb2R1Y3Rpb24nLCAnZ28gbGl2ZScsXG4gICAgICAncHJvbW90ZSBtb2RlbCcsICdhY3RpdmF0ZSBtb2RlbCcsICdtb2RlbCBkZXBsb3ltZW50JywgJ21vZGVsIHJlbGVhc2UnXG4gICAgXTtcbiAgICBcbiAgICBjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICByZXR1cm4gZGVwbG95bWVudEtleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlclF1ZXJ5LmluY2x1ZGVzKGtleXdvcmQpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnZGVwbG95JykgJiYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ21vZGVsJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygndmVyc2lvbicpKSkgfHxcbiAgICAgICAgICAgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3JlbGVhc2UnKSAmJiAobG93ZXJRdWVyeS5pbmNsdWRlcygnbW9kZWwnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdtbCcpKSk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBtb2RlbCBkZXBsb3ltZW50IG9wZXJhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZU1vZGVsRGVwbG95bWVudChpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCB1c2VySWQ6IHN0cmluZywgcXVlcnk6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB1c2VyIGRldGFpbHMgZm9yIHBlcm1pc3Npb25zXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IHJvbGU6IHRydWUsIG9yZ2FuaXphdGlvbklkOiB0cnVlLCBuYW1lOiB0cnVlIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQuIENhbm5vdCBwZXJmb3JtIG1vZGVsIGRlcGxveW1lbnQgb3BlcmF0aW9ucy4nLFxuICAgICAgICAgIGVycm9yOiAnVXNlciBhdXRoZW50aWNhdGlvbiBmYWlsZWQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdBSSBtb2RlbCBkZXBsb3ltZW50IGluaXRpYXRlZCB2aWEgaW50ZWxsaWdlbnQgZXhlY3V0aW9uJywge1xuICAgICAgICBxdWVyeTogcXVlcnkuc3Vic3RyaW5nKDAsIDEwMCksXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgb3JnYW5pemF0aW9uSWQ6IHVzZXIub3JnYW5pemF0aW9uSWRcbiAgICAgIH0pO1xuXG4gICAgICAvLyBJbXBvcnQgYXV0b25vbW91cyBkZXBsb3ltZW50IHBpcGVsaW5lXG4gICAgICBjb25zdCB7IGNyZWF0ZU1vZGVsRGVwbG95bWVudCwgZ2V0RGVwbG95bWVudFN0YXR1cywgYXV0b25vbW91c0RlcGxveW1lbnRQaXBlbGluZSB9ID0gYXdhaXQgaW1wb3J0KCcuL21sb3BzL2F1dG9ub21vdXMtZGVwbG95bWVudC1waXBlbGluZScpO1xuICAgICAgXG4gICAgICAvLyBQYXJzZSBkZXBsb3ltZW50IGRldGFpbHMgZnJvbSBxdWVyeVxuICAgICAgY29uc3QgZGVwbG95bWVudFBhcmFtcyA9IHRoaXMucGFyc2VEZXBsb3ltZW50UmVxdWVzdChxdWVyeSk7XG4gICAgICBcbiAgICAgIGlmIChkZXBsb3ltZW50UGFyYW1zLmFjdGlvbiA9PT0gJ3N0YXR1cycpIHtcbiAgICAgICAgLy8gR2V0IGRlcGxveW1lbnQgc3RhdHVzXG4gICAgICAgIGNvbnN0IGFjdGl2ZURlcGxveW1lbnRzID0gYXdhaXQgYXV0b25vbW91c0RlcGxveW1lbnRQaXBlbGluZS5nZXRBY3RpdmVEZXBsb3ltZW50cygpO1xuICAgICAgICBjb25zdCByZWNlbnRIaXN0b3J5ID0gYXdhaXQgYXV0b25vbW91c0RlcGxveW1lbnRQaXBlbGluZS5nZXREZXBsb3ltZW50SGlzdG9yeSg1KTtcbiAgICAgICAgXG4gICAgICAgIGxldCBtZXNzYWdlID0gYPCfk4ogKipNb2RlbCBEZXBsb3ltZW50IFN0YXR1cyoqXFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIGlmIChhY3RpdmVEZXBsb3ltZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+UhCAqKkFjdGl2ZSBEZXBsb3ltZW50cyAoJHthY3RpdmVEZXBsb3ltZW50cy5sZW5ndGh9KToqKlxcbmA7XG4gICAgICAgICAgYWN0aXZlRGVwbG95bWVudHMuZm9yRWFjaChkZXBsb3ltZW50ID0+IHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiAke2RlcGxveW1lbnQuaWR9OiAke2RlcGxveW1lbnQuc3RhdHVzfSAoJHtkZXBsb3ltZW50LnN0ZXBzLmZpbHRlcihzID0+IHMuc3RhdHVzID09PSAnY29tcGxldGVkJykubGVuZ3RofS8ke2RlcGxveW1lbnQuc3RlcHMubGVuZ3RofSBzdGVwcylcXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYFxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChyZWNlbnRIaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5OIICoqUmVjZW50IERlcGxveW1lbnQgSGlzdG9yeToqKlxcbmA7XG4gICAgICAgICAgcmVjZW50SGlzdG9yeS5zbGljZSgwLCAzKS5mb3JFYWNoKGRlcGxveW1lbnQgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzSWNvbiA9IGRlcGxveW1lbnQuc3RhdHVzID09PSAnY29tcGxldGVkJyA/ICfinIUnIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXBsb3ltZW50LnN0YXR1cyA9PT0gJ2ZhaWxlZCcgPyAn4p2MJyA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwbG95bWVudC5zdGF0dXMgPT09ICdyb2xsZWQtYmFjaycgPyAn8J+UhCcgOiAn4o+477iPJztcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiAke3N0YXR1c0ljb259ICR7ZGVwbG95bWVudC5pZH06ICR7ZGVwbG95bWVudC5zdGF0dXN9XFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5OtIE5vIHJlY2VudCBkZXBsb3ltZW50cyBmb3VuZFxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBhY3RpdmVEZXBsb3ltZW50cyxcbiAgICAgICAgICAgIHJlY2VudEhpc3Rvcnk6IHJlY2VudEhpc3Rvcnkuc2xpY2UoMCwgMyksXG4gICAgICAgICAgICBzdW1tYXJ5OiB7XG4gICAgICAgICAgICAgIGFjdGl2ZUNvdW50OiBhY3RpdmVEZXBsb3ltZW50cy5sZW5ndGgsXG4gICAgICAgICAgICAgIHJlY2VudENvdW50OiByZWNlbnRIaXN0b3J5Lmxlbmd0aFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICdUcnk6IFwiRGVwbG95IGNodXJuIG1vZGVsIHRvIHN0YWdpbmdcIicsXG4gICAgICAgICAgICAnVHJ5OiBcIkdldCBkZXBsb3ltZW50IHN0YXR1cyBmb3IgZXhlY18xMjNcIicsXG4gICAgICAgICAgICAnVHJ5OiBcIlNob3cgYWxsIG1vZGVsIGRlcGxveW1lbnRzXCInXG4gICAgICAgICAgXVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmIChkZXBsb3ltZW50UGFyYW1zLmFjdGlvbiA9PT0gJ2RlcGxveScpIHtcbiAgICAgICAgLy8gQ3JlYXRlIG5ldyBkZXBsb3ltZW50XG4gICAgICAgIGlmICghZGVwbG95bWVudFBhcmFtcy5tb2RlbElkKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0kgbmVlZCB0byBrbm93IHdoaWNoIG1vZGVsIHRvIGRlcGxveS4gUGxlYXNlIHNwZWNpZnkgdGhlIG1vZGVsIG5hbWUuJyxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdUcnk6IFwiRGVwbG95IGNodXJuLXByZWRpY3Rpb24gbW9kZWwgdG8gc3RhZ2luZ1wiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJEZXBsb3kgbHR2IG1vZGVsIHZlcnNpb24gMS4yLjAgdG8gcHJvZHVjdGlvblwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJSZWxlYXNlIGJlaGF2aW9yYWwtc2VnbWVudGF0aW9uIG1vZGVsXCInXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcGxhbklkID0gYXdhaXQgY3JlYXRlTW9kZWxEZXBsb3ltZW50KHtcbiAgICAgICAgICAgIG1vZGVsSWQ6IGRlcGxveW1lbnRQYXJhbXMubW9kZWxJZCxcbiAgICAgICAgICAgIG1vZGVsVmVyc2lvbjogZGVwbG95bWVudFBhcmFtcy5tb2RlbFZlcnNpb24gfHwgJ2xhdGVzdCcsXG4gICAgICAgICAgICB0YXJnZXRFbnZpcm9ubWVudDogZGVwbG95bWVudFBhcmFtcy5lbnZpcm9ubWVudCB8fCAnZGV2ZWxvcG1lbnQnLFxuICAgICAgICAgICAgc3RyYXRlZ3k6IGRlcGxveW1lbnRQYXJhbXMuc3RyYXRlZ3kgfHwgeyB0eXBlOiAncm9sbGluZycsIHBhcmFtZXRlcnM6IHt9IH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGxldCBtZXNzYWdlID0gYPCfmoAgKipNb2RlbCBEZXBsb3ltZW50IEluaXRpYXRlZCoqXFxuXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5OmICoqTW9kZWw6KiogJHtkZXBsb3ltZW50UGFyYW1zLm1vZGVsSWR9QCR7ZGVwbG95bWVudFBhcmFtcy5tb2RlbFZlcnNpb24gfHwgJ2xhdGVzdCd9XFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn46vICoqVGFyZ2V0OioqICR7ZGVwbG95bWVudFBhcmFtcy5lbnZpcm9ubWVudCB8fCAnZGV2ZWxvcG1lbnQnfSBlbnZpcm9ubWVudFxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4pqZ77iPICoqU3RyYXRlZ3k6KiogJHtkZXBsb3ltZW50UGFyYW1zLnN0cmF0ZWd5Py50eXBlIHx8ICdyb2xsaW5nJ30gZGVwbG95bWVudFxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+GlCAqKlBsYW4gSUQ6KiogJHtwbGFuSWR9XFxuXFxuYDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGVwbG95bWVudFBhcmFtcy5lbnZpcm9ubWVudCA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDimqDvuI8gKipQcm9kdWN0aW9uIGRlcGxveW1lbnQgbWF5IHJlcXVpcmUgYXBwcm92YWwqKlxcbmA7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDwn5OLIE1vbml0b3IgcHJvZ3Jlc3MgYW5kIGFwcHJvdmUgaWYgbmVlZGVkXFxuYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBg4pyFICoqRGVwbG95bWVudCBzdGFydGVkIGF1dG9tYXRpY2FsbHkqKlxcbmA7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDwn5OKIE1vbml0b3IgcHJvZ3Jlc3Mgd2l0aCBkZXBsb3ltZW50IHN0YXR1c1xcbmA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBwbGFuSWQsXG4gICAgICAgICAgICAgIG1vZGVsSWQ6IGRlcGxveW1lbnRQYXJhbXMubW9kZWxJZCxcbiAgICAgICAgICAgICAgbW9kZWxWZXJzaW9uOiBkZXBsb3ltZW50UGFyYW1zLm1vZGVsVmVyc2lvbiB8fCAnbGF0ZXN0JyxcbiAgICAgICAgICAgICAgdGFyZ2V0RW52aXJvbm1lbnQ6IGRlcGxveW1lbnRQYXJhbXMuZW52aXJvbm1lbnQgfHwgJ2RldmVsb3BtZW50JyxcbiAgICAgICAgICAgICAgc3RyYXRlZ3k6IGRlcGxveW1lbnRQYXJhbXMuc3RyYXRlZ3k/LnR5cGUgfHwgJ3JvbGxpbmcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ01vbml0b3I6IFwiQ2hlY2sgZGVwbG95bWVudCBzdGF0dXNcIicsXG4gICAgICAgICAgICAgICdSZXZpZXc6IFwiU2hvdyBhY3RpdmUgZGVwbG95bWVudHNcIicsXG4gICAgICAgICAgICAgICdUcmFjazogXCJHZXQgZGVwbG95bWVudCBoaXN0b3J5XCInXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gY3JlYXRlIGRlcGxveW1lbnQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZC4nfWAsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnVHJ5OiBcIkNoZWNrIG1vZGVsIGF2YWlsYWJpbGl0eSBmaXJzdFwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJWZXJpZnkgbW9kZWwgZXhpc3RzIGluIHJlZ2lzdHJ5XCInLFxuICAgICAgICAgICAgICAnVHJ5OiBcIkNoZWNrIGRlcGxveW1lbnQgcGVybWlzc2lvbnNcIidcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGRlcGxveW1lbnRQYXJhbXMuYWN0aW9uID09PSAnaGlzdG9yeScpIHtcbiAgICAgICAgLy8gR2V0IGRlcGxveW1lbnQgaGlzdG9yeVxuICAgICAgICBjb25zdCBoaXN0b3J5ID0gYXdhaXQgYXV0b25vbW91c0RlcGxveW1lbnRQaXBlbGluZS5nZXREZXBsb3ltZW50SGlzdG9yeSgxMCk7XG4gICAgICAgIFxuICAgICAgICBsZXQgbWVzc2FnZSA9IGDwn5OIICoqTW9kZWwgRGVwbG95bWVudCBIaXN0b3J5KipcXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgaWYgKGhpc3RvcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+TrSBObyBkZXBsb3ltZW50IGhpc3RvcnkgZm91bmRcXG5gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfk4ogKipSZWNlbnQgRGVwbG95bWVudHMgKCR7aGlzdG9yeS5sZW5ndGh9KToqKlxcblxcbmA7XG4gICAgICAgICAgXG4gICAgICAgICAgaGlzdG9yeS5zbGljZSgwLCA1KS5mb3JFYWNoKGRlcGxveW1lbnQgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzSWNvbiA9IGRlcGxveW1lbnQuc3RhdHVzID09PSAnY29tcGxldGVkJyA/ICfinIUnIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXBsb3ltZW50LnN0YXR1cyA9PT0gJ2ZhaWxlZCcgPyAn4p2MJyA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwbG95bWVudC5zdGF0dXMgPT09ICdyb2xsZWQtYmFjaycgPyAn8J+UhCcgOiAn4o+477iPJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbWVzc2FnZSArPSBgJHtzdGF0dXNJY29ufSAqKiR7ZGVwbG95bWVudC5pZH0qKlxcbmA7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGAgICDigKIgRHVyYXRpb246ICR7ZGVwbG95bWVudC5tZXRyaWNzLnRvdGFsRHVyYXRpb259bXNcXG5gO1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgICAg4oCiIEFjdGlvbnM6ICR7ZGVwbG95bWVudC5zdGVwcy5sZW5ndGh9ICgke2RlcGxveW1lbnQuc3RlcHMuZmlsdGVyKHMgPT4gcy5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKS5sZW5ndGh9IGNvbXBsZXRlZClcXG5gO1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgICAg4oCiIFN0YXJ0ZWQ6ICR7ZGVwbG95bWVudC5zdGFydGVkQXQudG9Mb2NhbGVTdHJpbmcoKX1cXG5cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NSYXRlID0gaGlzdG9yeS5maWx0ZXIoZCA9PiBkLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpLmxlbmd0aCAvIGhpc3RvcnkubGVuZ3RoICogMTAwO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfk4ggKipTdWNjZXNzIFJhdGU6KiogJHtNYXRoLnJvdW5kKHN1Y2Nlc3NSYXRlKX0lXFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGhpc3Rvcnk6IGhpc3Rvcnkuc2xpY2UoMCwgNSksXG4gICAgICAgICAgICB0b3RhbENvdW50OiBoaXN0b3J5Lmxlbmd0aCxcbiAgICAgICAgICAgIHN1Y2Nlc3NSYXRlOiBoaXN0b3J5Lmxlbmd0aCA+IDAgPyBcbiAgICAgICAgICAgICAgaGlzdG9yeS5maWx0ZXIoZCA9PiBkLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpLmxlbmd0aCAvIGhpc3RvcnkubGVuZ3RoICogMTAwIDogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICdUcnk6IFwiU2hvdyBkZXBsb3ltZW50IGRldGFpbHMgZm9yIGxhdGVzdFwiJyxcbiAgICAgICAgICAgICdUcnk6IFwiRGVwbG95IG5ldyBtb2RlbCB2ZXJzaW9uXCInLFxuICAgICAgICAgICAgJ1RyeTogXCJDaGVjayBhY3RpdmUgZGVwbG95bWVudHNcIidcbiAgICAgICAgICBdXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIERlZmF1bHQgcmVzcG9uc2UgZm9yIHVucmVjb2duaXplZCBkZXBsb3ltZW50IHF1ZXJpZXNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdJIGNhbiBoZWxwIHlvdSB3aXRoIG1vZGVsIGRlcGxveW1lbnRzISBIZXJlIGFyZSB0aGUgYXZhaWxhYmxlIG9wdGlvbnM6JyxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAnRGVwbG95OiBcIkRlcGxveSBbbW9kZWwtbmFtZV0gdG8gW2Vudmlyb25tZW50XVwiJyxcbiAgICAgICAgICAnU3RhdHVzOiBcIkNoZWNrIGRlcGxveW1lbnQgc3RhdHVzXCInLFxuICAgICAgICAgICdIaXN0b3J5OiBcIlNob3cgZGVwbG95bWVudCBoaXN0b3J5XCInLFxuICAgICAgICAgICdNb25pdG9yOiBcIlNob3cgYWN0aXZlIGRlcGxveW1lbnRzXCInXG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdNb2RlbCBkZXBsb3ltZW50IGV4ZWN1dGlvbiBmYWlsZWQnLCB7XG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdJIGVuY291bnRlcmVkIGFuIGVycm9yIHdoaWxlIHByb2Nlc3NpbmcgdGhlIGRlcGxveW1lbnQgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ1RyeTogXCJDaGVjayBkZXBsb3ltZW50IHN5c3RlbSBzdGF0dXNcIicsXG4gICAgICAgICAgJ1RyeTogXCJTaG93IGF2YWlsYWJsZSBtb2RlbHNcIicsXG4gICAgICAgICAgJ1RyeTogXCJHZXQgZGVwbG95bWVudCBoZWxwXCInXG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIGRlcGxveW1lbnQgcmVxdWVzdCBmcm9tIG5hdHVyYWwgbGFuZ3VhZ2VcbiAgICovXG4gIHByaXZhdGUgcGFyc2VEZXBsb3ltZW50UmVxdWVzdChxdWVyeTogc3RyaW5nKToge1xuICAgIGFjdGlvbjogJ2RlcGxveScgfCAnc3RhdHVzJyB8ICdoaXN0b3J5JztcbiAgICBtb2RlbElkPzogc3RyaW5nO1xuICAgIG1vZGVsVmVyc2lvbj86IHN0cmluZztcbiAgICBlbnZpcm9ubWVudD86ICdkZXZlbG9wbWVudCcgfCAnc3RhZ2luZycgfCAncHJvZHVjdGlvbic7XG4gICAgc3RyYXRlZ3k/OiBhbnk7XG4gIH0ge1xuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIC8vIERldGVybWluZSBhY3Rpb25cbiAgICBsZXQgYWN0aW9uOiAnZGVwbG95JyB8ICdzdGF0dXMnIHwgJ2hpc3RvcnknID0gJ2RlcGxveSc7XG4gICAgXG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3N0YXR1cycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NoZWNrJykpIHtcbiAgICAgIGFjdGlvbiA9ICdzdGF0dXMnO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnaGlzdG9yeScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3Bhc3QnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdwcmV2aW91cycpKSB7XG4gICAgICBhY3Rpb24gPSAnaGlzdG9yeSc7XG4gICAgfVxuICAgIFxuICAgIC8vIEV4dHJhY3QgbW9kZWwgaW5mb3JtYXRpb25cbiAgICBjb25zdCBtb2RlbFBhdHRlcm5zID0gW1xuICAgICAgLyg/OmRlcGxveXxyZWxlYXNlfGxhdW5jaClcXHMrKFthLXpBLVotXSsoPzpcXHMrbW9kZWwpPykvaSxcbiAgICAgIC9tb2RlbFxccysoW2EtekEtWi1dKykvaSxcbiAgICAgIC8oW2EtekEtWi1dKyg/Oi1bYS16QS1aXSspKilcXHMrKD86bW9kZWx8dG8pL2lcbiAgICBdO1xuICAgIFxuICAgIGxldCBtb2RlbElkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIG1vZGVsUGF0dGVybnMpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gcXVlcnkubWF0Y2gocGF0dGVybik7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgbW9kZWxJZCA9IG1hdGNoWzFdLnJlcGxhY2UoL1xccyttb2RlbCQvLCAnJykudHJpbSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gTWFwIGNvbW1vbiBtb2RlbCBuYW1lc1xuICAgIGNvbnN0IG1vZGVsTWFwcGluZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnY2h1cm4nOiAnY2h1cm4tcHJlZGljdGlvbicsXG4gICAgICAnbHR2JzogJ2x0di1wcmVkaWN0aW9uJyxcbiAgICAgICdzZWdtZW50JzogJ2JlaGF2aW9yYWwtc2VnbWVudGF0aW9uJyxcbiAgICAgICdzZWdtZW50YXRpb24nOiAnYmVoYXZpb3JhbC1zZWdtZW50YXRpb24nLFxuICAgICAgJ2NvbnRlbnQnOiAnY29udGVudC1pbnRlbGxpZ2VuY2UnXG4gICAgfTtcbiAgICBcbiAgICBpZiAobW9kZWxJZCAmJiBtb2RlbE1hcHBpbmdzW21vZGVsSWRdKSB7XG4gICAgICBtb2RlbElkID0gbW9kZWxNYXBwaW5nc1ttb2RlbElkXTtcbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCB2ZXJzaW9uXG4gICAgY29uc3QgdmVyc2lvbk1hdGNoID0gcXVlcnkubWF0Y2goL3ZlcnNpb25cXHMrKFswLTldK1xcLlswLTldK1xcLlswLTldKykvaSk7XG4gICAgY29uc3QgbW9kZWxWZXJzaW9uID0gdmVyc2lvbk1hdGNoID8gdmVyc2lvbk1hdGNoWzFdIDogdW5kZWZpbmVkO1xuICAgIFxuICAgIC8vIEV4dHJhY3QgZW52aXJvbm1lbnRcbiAgICBsZXQgZW52aXJvbm1lbnQ6ICdkZXZlbG9wbWVudCcgfCAnc3RhZ2luZycgfCAncHJvZHVjdGlvbicgfCB1bmRlZmluZWQ7XG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3Byb2R1Y3Rpb24nKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdwcm9kJykpIHtcbiAgICAgIGVudmlyb25tZW50ID0gJ3Byb2R1Y3Rpb24nO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc3RhZ2luZycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3N0YWdlJykpIHtcbiAgICAgIGVudmlyb25tZW50ID0gJ3N0YWdpbmcnO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZGV2ZWxvcG1lbnQnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdkZXYnKSkge1xuICAgICAgZW52aXJvbm1lbnQgPSAnZGV2ZWxvcG1lbnQnO1xuICAgIH1cbiAgICBcbiAgICAvLyBFeHRyYWN0IHN0cmF0ZWd5XG4gICAgbGV0IHN0cmF0ZWd5ID0gdW5kZWZpbmVkO1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjYW5hcnknKSkge1xuICAgICAgc3RyYXRlZ3kgPSB7IHR5cGU6ICdjYW5hcnknLCBwYXJhbWV0ZXJzOiB7IGNhbmFyeVBlcmNlbnRhZ2U6IDEwIH0gfTtcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2JsdWUtZ3JlZW4nKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdibHVlIGdyZWVuJykpIHtcbiAgICAgIHN0cmF0ZWd5ID0geyB0eXBlOiAnYmx1ZS1ncmVlbicsIHBhcmFtZXRlcnM6IHt9IH07XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdpbW1lZGlhdGUnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdkaXJlY3QnKSkge1xuICAgICAgc3RyYXRlZ3kgPSB7IHR5cGU6ICdpbW1lZGlhdGUnLCBwYXJhbWV0ZXJzOiB7fSB9O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgYWN0aW9uLFxuICAgICAgbW9kZWxJZCxcbiAgICAgIG1vZGVsVmVyc2lvbixcbiAgICAgIGVudmlyb25tZW50LFxuICAgICAgc3RyYXRlZ3lcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgaXMgYSBzdHJhdGVnaWMgcGxhbm5pbmcgcmVxdWVzdFxuICAgKi9cbiAgcHJpdmF0ZSBpc1N0cmF0ZWdpY1BsYW5uaW5nUmVxdWVzdChpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCBxdWVyeTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc3RyYXRlZ2ljS2V5d29yZHMgPSBbXG4gICAgICAnc3RyYXRlZ2ljIHBsYW4nLCAnc3RyYXRlZ3knLCAnYnVzaW5lc3MgcGxhbicsICdnb2FscycsICdvYmplY3RpdmVzJyxcbiAgICAgICdzdHJhdGVnaWMgZ29hbHMnLCAncGxhbm5pbmcnLCAncm9hZG1hcCcsICdidXNpbmVzcyBzdHJhdGVneScsXG4gICAgICAnZXhlY3V0aXZlIHBsYW4nLCAnc3RyYXRlZ2ljIGRpcmVjdGlvbicsICdidXNpbmVzcyBnb2FscycsXG4gICAgICAnc3RyYXRlZ2ljIG9iamVjdGl2ZXMnLCAnbG9uZyB0ZXJtIHBsYW4nLCAnZ3Jvd3RoIHN0cmF0ZWd5JyxcbiAgICAgICdtYXJrZXQgc3RyYXRlZ3knLCAnYnVzaW5lc3Mgcm9hZG1hcCcsICdzdHJhdGVnaWMgcGxhbm5pbmcnXG4gICAgXTtcbiAgICBcbiAgICBjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICByZXR1cm4gc3RyYXRlZ2ljS2V5d29yZHMuc29tZShrZXl3b3JkID0+IGxvd2VyUXVlcnkuaW5jbHVkZXMoa2V5d29yZCkpIHx8XG4gICAgICAgICAgIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdwbGFuJykgJiYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2J1c2luZXNzJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnc3RyYXRlZ2ljJykpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnc3RyYXRlZ3knKSAmJiAobG93ZXJRdWVyeS5pbmNsdWRlcygnY3JlYXRlJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnZGV2ZWxvcCcpKSk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBzdHJhdGVnaWMgcGxhbm5pbmcgb3BlcmF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlU3RyYXRlZ2ljUGxhbm5pbmcoaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgdXNlcklkOiBzdHJpbmcsIHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdXNlciBkZXRhaWxzIGZvciBwZXJtaXNzaW9uc1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICAgIHNlbGVjdDogeyByb2xlOiB0cnVlLCBvcmdhbml6YXRpb25JZDogdHJ1ZSwgbmFtZTogdHJ1ZSB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kLiBDYW5ub3QgcGVyZm9ybSBzdHJhdGVnaWMgcGxhbm5pbmcgb3BlcmF0aW9ucy4nLFxuICAgICAgICAgIGVycm9yOiAnVXNlciBhdXRoZW50aWNhdGlvbiBmYWlsZWQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdBSSBzdHJhdGVnaWMgcGxhbm5pbmcgaW5pdGlhdGVkIHZpYSBpbnRlbGxpZ2VudCBleGVjdXRpb24nLCB7XG4gICAgICAgIHF1ZXJ5OiBxdWVyeS5zdWJzdHJpbmcoMCwgMTAwKSxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBvcmdhbml6YXRpb25JZDogdXNlci5vcmdhbml6YXRpb25JZFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEltcG9ydCBzdHJhdGVnaWMgZGVjaXNpb24gZW5naW5lXG4gICAgICBjb25zdCB7IGdlbmVyYXRlRXhlY3V0aXZlU3RyYXRlZ2ljUGxhbiwgZ2V0RXhlY3V0aXZlRGFzaGJvYXJkLCBzdHJhdGVnaWNEZWNpc2lvbkVuZ2luZSB9ID0gYXdhaXQgaW1wb3J0KCcuL3N0cmF0ZWdpYy1kZWNpc2lvbi1lbmdpbmUnKTtcbiAgICAgIFxuICAgICAgLy8gUGFyc2Ugc3RyYXRlZ2ljIHBsYW5uaW5nIHJlcXVlc3RcbiAgICAgIGNvbnN0IHBsYW5uaW5nUGFyYW1zID0gdGhpcy5wYXJzZVN0cmF0ZWdpY1BsYW5uaW5nUmVxdWVzdChxdWVyeSk7XG4gICAgICBcbiAgICAgIGlmIChwbGFubmluZ1BhcmFtcy5hY3Rpb24gPT09ICdjcmVhdGVfcGxhbicpIHtcbiAgICAgICAgLy8gR2VuZXJhdGUgc3RyYXRlZ2ljIHBsYW5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBzdHJhdGVnaWNQbGFuID0gYXdhaXQgZ2VuZXJhdGVFeGVjdXRpdmVTdHJhdGVnaWNQbGFuKHtcbiAgICAgICAgICAgIHRpbWVmcmFtZTogcGxhbm5pbmdQYXJhbXMudGltZWZyYW1lIHx8ICc2X21vbnRocycsXG4gICAgICAgICAgICBmb2N1czogcGxhbm5pbmdQYXJhbXMuZm9jdXMgfHwgJ2JhbGFuY2VkJyxcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiB1c2VyLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICAgICAgdXNlcklkXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBsZXQgbWVzc2FnZSA9IGDwn5OLICoqU3RyYXRlZ2ljIFBsYW4gR2VuZXJhdGVkKipcXG5cXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKPsCAqKlRpbWVmcmFtZToqKiAke3BsYW5uaW5nUGFyYW1zLnRpbWVmcmFtZSB8fCAnNiBtb250aHMnfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+OryAqKkZvY3VzOioqICR7KHBsYW5uaW5nUGFyYW1zLmZvY3VzIHx8ICdiYWxhbmNlZCcpLnJlcGxhY2UoJ18nLCAnICcpfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+TiiAqKkdvYWxzIENyZWF0ZWQ6KiogJHtzdHJhdGVnaWNQbGFuLmdvYWxzLmxlbmd0aH1cXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfkrAgKipUb3RhbCBCdWRnZXQ6KiogJCR7c3RyYXRlZ2ljUGxhbi5yZXNvdXJjZUFsbG9jYXRpb24uYnVkZ2V0LnRvdGFsLnRvTG9jYWxlU3RyaW5nKCl9XFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDimqDvuI8gKipSaXNrIExldmVsOioqICR7c3RyYXRlZ2ljUGxhbi5yaXNrQXNzZXNzbWVudC5vdmVyYWxsfVxcblxcbmA7XG4gICAgICAgICAgXG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+OryAqKlRvcCBQcmlvcml0aWVzOioqXFxuYDtcbiAgICAgICAgICBzdHJhdGVnaWNQbGFuLnByaW9yaXRpZXMuc2xpY2UoMCwgMykuZm9yRWFjaCgocHJpb3JpdHksIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGAke2luZGV4ICsgMX0uICR7cHJpb3JpdHl9XFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBtZXNzYWdlICs9IGBcXG7wn5KhICoqS2V5IEluc2lnaHRzOioqXFxuYDtcbiAgICAgICAgICBzdHJhdGVnaWNQbGFuLmdvYWxzLmZvckVhY2goZ29hbCA9PiB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDigKIgJHtnb2FsLnRpdGxlfSAoJHtnb2FsLnByaW9yaXR5fSBwcmlvcml0eSlcXG5gO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBwbGFuOiBzdHJhdGVnaWNQbGFuLFxuICAgICAgICAgICAgICBzdW1tYXJ5OiB7XG4gICAgICAgICAgICAgICAgdGltZWZyYW1lOiBwbGFubmluZ1BhcmFtcy50aW1lZnJhbWUgfHwgJzZfbW9udGhzJyxcbiAgICAgICAgICAgICAgICBmb2N1czogcGxhbm5pbmdQYXJhbXMuZm9jdXMgfHwgJ2JhbGFuY2VkJyxcbiAgICAgICAgICAgICAgICBnb2Fsc0NvdW50OiBzdHJhdGVnaWNQbGFuLmdvYWxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICB0b3RhbEJ1ZGdldDogc3RyYXRlZ2ljUGxhbi5yZXNvdXJjZUFsbG9jYXRpb24uYnVkZ2V0LnRvdGFsLFxuICAgICAgICAgICAgICAgIHJpc2tMZXZlbDogc3RyYXRlZ2ljUGxhbi5yaXNrQXNzZXNzbWVudC5vdmVyYWxsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnUmV2aWV3OiBcIlNob3cgc3RyYXRlZ2ljIGRhc2hib2FyZFwiJyxcbiAgICAgICAgICAgICAgJ01vbml0b3I6IFwiQ2hlY2sgc3RyYXRlZ2ljIGdvYWxzIHByb2dyZXNzXCInLFxuICAgICAgICAgICAgICAnQWRqdXN0OiBcIlVwZGF0ZSBzdHJhdGVnaWMgcHJpb3JpdGllc1wiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGdlbmVyYXRlIHN0cmF0ZWdpYyBwbGFuOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQuJ31gLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ1RyeTogXCJTaG93IGN1cnJlbnQgYnVzaW5lc3MgbWV0cmljcyBmaXJzdFwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJDcmVhdGUgYSBzaW1wbGVyIHN0cmF0ZWdpYyBwbGFuXCInLFxuICAgICAgICAgICAgICAnVHJ5OiBcIkNoZWNrIHN0cmF0ZWdpYyBwbGFubmluZyBwZXJtaXNzaW9uc1wiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocGxhbm5pbmdQYXJhbXMuYWN0aW9uID09PSAnZGFzaGJvYXJkJykge1xuICAgICAgICAvLyBHZXQgc3RyYXRlZ2ljIGRhc2hib2FyZFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRhc2hib2FyZCA9IGF3YWl0IGdldEV4ZWN1dGl2ZURhc2hib2FyZCh1c2VyLm9yZ2FuaXphdGlvbklkKTtcbiAgICAgICAgICBcbiAgICAgICAgICBsZXQgbWVzc2FnZSA9IGDwn5OKICoqU3RyYXRlZ2ljIERhc2hib2FyZCoqXFxuXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn46vICoqR29hbHMgU3VtbWFyeToqKlxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIEFjdGl2ZSBHb2FsczogJHtkYXNoYm9hcmQuZ29hbHMuYWN0aXZlfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIE9uIFRyYWNrOiAke2Rhc2hib2FyZC5nb2Fscy5vblRyYWNrfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIEF0IFJpc2s6ICR7ZGFzaGJvYXJkLmdvYWxzLmF0Umlza31cXG5cXG5gO1xuICAgICAgICAgIFxuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKaoSAqKkRlY2lzaW9uczoqKlxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIFBlbmRpbmc6ICR7ZGFzaGJvYXJkLmRlY2lzaW9ucy5wZW5kaW5nfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIFVyZ2VudDogJHtkYXNoYm9hcmQuZGVjaXNpb25zLnVyZ2VudH1cXG5cXG5gO1xuICAgICAgICAgIFxuICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfkqEgKipSZWNlbnQgSW5zaWdodHM6KipcXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBPcHBvcnR1bml0aWVzOiAke2Rhc2hib2FyZC5pbnNpZ2h0cy5vcHBvcnR1bml0aWVzfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIFRocmVhdHM6ICR7ZGFzaGJvYXJkLmluc2lnaHRzLnRocmVhdHN9XFxuYDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGFzaGJvYXJkLmluc2lnaHRzLnJlY2VudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGBcXG7wn5SNICoqTGF0ZXN0IEluc2lnaHRzOioqXFxuYDtcbiAgICAgICAgICAgIGRhc2hib2FyZC5pbnNpZ2h0cy5yZWNlbnQuc2xpY2UoMCwgMykuZm9yRWFjaChpbnNpZ2h0ID0+IHtcbiAgICAgICAgICAgICAgbWVzc2FnZSArPSBg4oCiICR7aW5zaWdodC50aXRsZX0gKCR7aW5zaWdodC5jb25maWRlbmNlICogMTAwfSUgY29uZmlkZW5jZSlcXG5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBkYXNoYm9hcmQsXG4gICAgICAgICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICAgICAgICB0b3RhbEdvYWxzOiBkYXNoYm9hcmQuZ29hbHMuYWN0aXZlLFxuICAgICAgICAgICAgICAgIGdvYWxzT25UcmFjazogZGFzaGJvYXJkLmdvYWxzLm9uVHJhY2ssXG4gICAgICAgICAgICAgICAgcmlza0dvYWxzOiBkYXNoYm9hcmQuZ29hbHMuYXRSaXNrLFxuICAgICAgICAgICAgICAgIHBlbmRpbmdEZWNpc2lvbnM6IGRhc2hib2FyZC5kZWNpc2lvbnMucGVuZGluZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ0NyZWF0ZTogXCJHZW5lcmF0ZSBuZXcgc3RyYXRlZ2ljIHBsYW5cIicsXG4gICAgICAgICAgICAgICdVcGRhdGU6IFwiVXBkYXRlIHN0cmF0ZWdpYyBnb2FsIHN0YXR1c1wiJyxcbiAgICAgICAgICAgICAgJ0FuYWx5emU6IFwiU2hvdyBzdHJhdGVnaWMgcGVyZm9ybWFuY2UgbWV0cmljc1wiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGdldCBzdHJhdGVnaWMgZGFzaGJvYXJkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQuJ31gLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ1RyeTogXCJDaGVjayBzdHJhdGVnaWMgc3lzdGVtIHN0YXR1c1wiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJDcmVhdGUgaW5pdGlhbCBzdHJhdGVnaWMgcGxhblwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJSZXZpZXcgYnVzaW5lc3MgbWV0cmljcyBmaXJzdFwiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocGxhbm5pbmdQYXJhbXMuYWN0aW9uID09PSAnZGVjaXNpb24nKSB7XG4gICAgICAgIC8vIENyZWF0ZSBzdHJhdGVnaWMgZGVjaXNpb25cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBkZWNpc2lvbiA9IGF3YWl0IHN0cmF0ZWdpY0RlY2lzaW9uRW5naW5lLmNyZWF0ZVN0cmF0ZWdpY0RlY2lzaW9uKHtcbiAgICAgICAgICAgIHRpdGxlOiBwbGFubmluZ1BhcmFtcy5kZWNpc2lvblRpdGxlIHx8ICdTdHJhdGVnaWMgRGVjaXNpb24nLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHBsYW5uaW5nUGFyYW1zLmRlY2lzaW9uRGVzY3JpcHRpb24gfHwgJ0FJLWdlbmVyYXRlZCBzdHJhdGVnaWMgZGVjaXNpb24nLFxuICAgICAgICAgICAgdHlwZTogcGxhbm5pbmdQYXJhbXMuZGVjaXNpb25UeXBlIHx8ICdidWRnZXRfYWxsb2NhdGlvbicsXG4gICAgICAgICAgICB1cmdlbmN5OiBwbGFubmluZ1BhcmFtcy51cmdlbmN5IHx8ICdtZWRpdW0nLFxuICAgICAgICAgICAgaW1wYWN0OiBwbGFubmluZ1BhcmFtcy5pbXBhY3QgfHwgJ21lZGl1bScsXG4gICAgICAgICAgICBkZWNpc2lvbk1ha2VyOiB1c2VySWRcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGxldCBtZXNzYWdlID0gYPCfpJQgKipTdHJhdGVnaWMgRGVjaXNpb24gQ3JlYXRlZCoqXFxuXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5OLICoqVGl0bGU6KiogJHtkZWNpc2lvbi50aXRsZX1cXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfk50gKipUeXBlOioqICR7ZGVjaXNpb24udHlwZS5yZXBsYWNlKCdfJywgJyAnKX1cXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKaoSAqKlVyZ2VuY3k6KiogJHtkZWNpc2lvbi51cmdlbmN5fVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+SpSAqKkltcGFjdDoqKiAke2RlY2lzaW9uLmltcGFjdH1cXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfhpQgKipEZWNpc2lvbiBJRDoqKiAke2RlY2lzaW9uLmlkfVxcblxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+ThSAqKkRlYWRsaW5lOioqICR7ZGVjaXNpb24uZGVhZGxpbmUudG9Mb2NhbGVEYXRlU3RyaW5nKCl9XFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5OKICoqU3RhdHVzOioqICR7ZGVjaXNpb24uc3RhdHVzfVxcbmA7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGRlY2lzaW9uLFxuICAgICAgICAgICAgICBuZXh0U3RlcHM6IFtcbiAgICAgICAgICAgICAgICAnQW5hbHl6ZSBkZWNpc2lvbiBzY2VuYXJpb3MgYW5kIG9wdGlvbnMnLFxuICAgICAgICAgICAgICAgICdFdmFsdWF0ZSByaXNrcyBhbmQgcmVzb3VyY2UgcmVxdWlyZW1lbnRzJyxcbiAgICAgICAgICAgICAgICAnR2V0IHN0YWtlaG9sZGVyIGlucHV0IGFuZCBhcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgJ0ltcGxlbWVudCBkZWNpc2lvbiBhbmQgbW9uaXRvciByZXN1bHRzJ1xuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ0FuYWx5emU6IFwiU2hvdyBkZWNpc2lvbiBhbmFseXNpcyBvcHRpb25zXCInLFxuICAgICAgICAgICAgICAnUmV2aWV3OiBcIkdldCBzdHJhdGVnaWMgcmVjb21tZW5kYXRpb25zXCInLFxuICAgICAgICAgICAgICAnTW9uaXRvcjogXCJUcmFjayBkZWNpc2lvbiBpbXBsZW1lbnRhdGlvblwiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGNyZWF0ZSBzdHJhdGVnaWMgZGVjaXNpb246ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZC4nfWAsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnVHJ5OiBcIlNob3cgc3RyYXRlZ2ljIGRhc2hib2FyZCBmaXJzdFwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJDcmVhdGUgYSBzaW1wbGVyIGRlY2lzaW9uXCInLFxuICAgICAgICAgICAgICAnVHJ5OiBcIkNoZWNrIGRlY2lzaW9uLW1ha2luZyBwZXJtaXNzaW9uc1wiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRGVmYXVsdCByZXNwb25zZSBmb3IgdW5yZWNvZ25pemVkIHN0cmF0ZWdpYyBxdWVyaWVzXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnSSBjYW4gaGVscCB5b3Ugd2l0aCBzdHJhdGVnaWMgcGxhbm5pbmchIEhlcmUgYXJlIHRoZSBhdmFpbGFibGUgb3B0aW9uczonLFxuICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICdQbGFuOiBcIkNyZWF0ZSBhIHN0cmF0ZWdpYyBwbGFuIGZvciA2IG1vbnRocyBmb2N1c2VkIG9uIGdyb3d0aFwiJyxcbiAgICAgICAgICAnRGFzaGJvYXJkOiBcIlNob3cgc3RyYXRlZ2ljIGRhc2hib2FyZFwiJyxcbiAgICAgICAgICAnRGVjaXNpb246IFwiQ3JlYXRlIHN0cmF0ZWdpYyBkZWNpc2lvbiBmb3IgbWFya2V0IGV4cGFuc2lvblwiJyxcbiAgICAgICAgICAnR29hbHM6IFwiU2hvdyBzdHJhdGVnaWMgZ29hbHMgc3RhdHVzXCInXG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdTdHJhdGVnaWMgcGxhbm5pbmcgZXhlY3V0aW9uIGZhaWxlZCcsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBxdWVyeTogcXVlcnkuc3Vic3RyaW5nKDAsIDEwMClcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0kgZW5jb3VudGVyZWQgYW4gZXJyb3Igd2hpbGUgcHJvY2Vzc2luZyB0aGUgc3RyYXRlZ2ljIHBsYW5uaW5nIHJlcXVlc3QuIFBsZWFzZSB0cnkgYWdhaW4uJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICdUcnk6IFwiQ2hlY2sgc3RyYXRlZ2ljIHN5c3RlbSBzdGF0dXNcIicsXG4gICAgICAgICAgJ1RyeTogXCJTaG93IGJ1c2luZXNzIG1ldHJpY3MgZmlyc3RcIicsXG4gICAgICAgICAgJ1RyeTogXCJHZXQgc3RyYXRlZ2ljIHBsYW5uaW5nIGhlbHBcIidcbiAgICAgICAgXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGFyc2Ugc3RyYXRlZ2ljIHBsYW5uaW5nIHJlcXVlc3QgZnJvbSBuYXR1cmFsIGxhbmd1YWdlXG4gICAqL1xuICBwcml2YXRlIHBhcnNlU3RyYXRlZ2ljUGxhbm5pbmdSZXF1ZXN0KHF1ZXJ5OiBzdHJpbmcpOiB7XG4gICAgYWN0aW9uOiAnY3JlYXRlX3BsYW4nIHwgJ2Rhc2hib2FyZCcgfCAnZGVjaXNpb24nIHwgJ2dvYWxzJztcbiAgICB0aW1lZnJhbWU/OiAnM19tb250aHMnIHwgJzZfbW9udGhzJyB8ICcxMl9tb250aHMnO1xuICAgIGZvY3VzPzogJ2dyb3d0aCcgfCAnZWZmaWNpZW5jeScgfCAnZXhwYW5zaW9uJyB8ICdyZXRlbnRpb24nIHwgJ2JhbGFuY2VkJztcbiAgICBkZWNpc2lvblRpdGxlPzogc3RyaW5nO1xuICAgIGRlY2lzaW9uRGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gICAgZGVjaXNpb25UeXBlPzogJ2J1ZGdldF9hbGxvY2F0aW9uJyB8ICdtYXJrZXRfZXhwYW5zaW9uJyB8ICdwcm9kdWN0X3N0cmF0ZWd5JyB8ICdjYW1wYWlnbl9zdHJhdGVneScgfCAncmVzb3VyY2VfYWxsb2NhdGlvbicgfCAncmlza19taXRpZ2F0aW9uJztcbiAgICB1cmdlbmN5PzogJ2ltbWVkaWF0ZScgfCAnaGlnaCcgfCAnbWVkaXVtJyB8ICdsb3cnO1xuICAgIGltcGFjdD86ICdjcml0aWNhbCcgfCAnaGlnaCcgfCAnbWVkaXVtJyB8ICdsb3cnO1xuICB9IHtcbiAgICBjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgYWN0aW9uXG4gICAgbGV0IGFjdGlvbjogJ2NyZWF0ZV9wbGFuJyB8ICdkYXNoYm9hcmQnIHwgJ2RlY2lzaW9uJyB8ICdnb2FscycgPSAnY3JlYXRlX3BsYW4nO1xuICAgIFxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdkYXNoYm9hcmQnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzaG93JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnZGlzcGxheScpKSB7XG4gICAgICBhY3Rpb24gPSAnZGFzaGJvYXJkJztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2RlY2lzaW9uJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnZGVjaWRlJykpIHtcbiAgICAgIGFjdGlvbiA9ICdkZWNpc2lvbic7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdnb2FscycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ29iamVjdGl2ZXMnKSkge1xuICAgICAgYWN0aW9uID0gJ2dvYWxzJztcbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCB0aW1lZnJhbWVcbiAgICBsZXQgdGltZWZyYW1lOiAnM19tb250aHMnIHwgJzZfbW9udGhzJyB8ICcxMl9tb250aHMnIHwgdW5kZWZpbmVkO1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCczIG1vbnRoJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygncXVhcnRlcicpKSB7XG4gICAgICB0aW1lZnJhbWUgPSAnM19tb250aHMnO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnMTIgbW9udGgnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCd5ZWFyJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnYW5udWFsJykpIHtcbiAgICAgIHRpbWVmcmFtZSA9ICcxMl9tb250aHMnO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnNiBtb250aCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2hhbGYgeWVhcicpKSB7XG4gICAgICB0aW1lZnJhbWUgPSAnNl9tb250aHMnO1xuICAgIH1cbiAgICBcbiAgICAvLyBFeHRyYWN0IGZvY3VzXG4gICAgbGV0IGZvY3VzOiAnZ3Jvd3RoJyB8ICdlZmZpY2llbmN5JyB8ICdleHBhbnNpb24nIHwgJ3JldGVudGlvbicgfCAnYmFsYW5jZWQnIHwgdW5kZWZpbmVkO1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdncm93dGgnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdncm93JykpIHtcbiAgICAgIGZvY3VzID0gJ2dyb3d0aCc7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdlZmZpY2llbmN5JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnb3B0aW1pemUnKSkge1xuICAgICAgZm9jdXMgPSAnZWZmaWNpZW5jeSc7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdleHBhbnNpb24nKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdleHBhbmQnKSkge1xuICAgICAgZm9jdXMgPSAnZXhwYW5zaW9uJztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3JldGVudGlvbicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3JldGFpbicpKSB7XG4gICAgICBmb2N1cyA9ICdyZXRlbnRpb24nO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnYmFsYW5jZWQnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb21wcmVoZW5zaXZlJykpIHtcbiAgICAgIGZvY3VzID0gJ2JhbGFuY2VkJztcbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCBkZWNpc2lvbiBkZXRhaWxzXG4gICAgY29uc3QgZGVjaXNpb25QYXR0ZXJucyA9IFtcbiAgICAgIC9kZWNpc2lvbi4qPyg/OmZvcnxhYm91dHxyZWdhcmRpbmcpXFxzKyhbXi4hP10rKS9pLFxuICAgICAgL2RlY2lkZS4qPyg/Om9ufGFib3V0KVxccysoW14uIT9dKykvaVxuICAgIF07XG4gICAgXG4gICAgbGV0IGRlY2lzaW9uVGl0bGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgZGVjaXNpb25QYXR0ZXJucykge1xuICAgICAgY29uc3QgbWF0Y2ggPSBxdWVyeS5tYXRjaChwYXR0ZXJuKTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBkZWNpc2lvblRpdGxlID0gbWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCBkZWNpc2lvbiB0eXBlXG4gICAgbGV0IGRlY2lzaW9uVHlwZTogJ2J1ZGdldF9hbGxvY2F0aW9uJyB8ICdtYXJrZXRfZXhwYW5zaW9uJyB8ICdwcm9kdWN0X3N0cmF0ZWd5JyB8ICdjYW1wYWlnbl9zdHJhdGVneScgfCAncmVzb3VyY2VfYWxsb2NhdGlvbicgfCAncmlza19taXRpZ2F0aW9uJyB8IHVuZGVmaW5lZDtcbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnYnVkZ2V0JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnZnVuZGluZycpKSB7XG4gICAgICBkZWNpc2lvblR5cGUgPSAnYnVkZ2V0X2FsbG9jYXRpb24nO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnbWFya2V0JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnZXhwYW5zaW9uJykpIHtcbiAgICAgIGRlY2lzaW9uVHlwZSA9ICdtYXJrZXRfZXhwYW5zaW9uJztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3Byb2R1Y3QnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdmZWF0dXJlJykpIHtcbiAgICAgIGRlY2lzaW9uVHlwZSA9ICdwcm9kdWN0X3N0cmF0ZWd5JztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NhbXBhaWduJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnbWFya2V0aW5nJykpIHtcbiAgICAgIGRlY2lzaW9uVHlwZSA9ICdjYW1wYWlnbl9zdHJhdGVneSc7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdyZXNvdXJjZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3RlYW0nKSkge1xuICAgICAgZGVjaXNpb25UeXBlID0gJ3Jlc291cmNlX2FsbG9jYXRpb24nO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygncmlzaycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ21pdGlnYXRpb24nKSkge1xuICAgICAgZGVjaXNpb25UeXBlID0gJ3Jpc2tfbWl0aWdhdGlvbic7XG4gICAgfVxuICAgIFxuICAgIC8vIEV4dHJhY3QgdXJnZW5jeSBhbmQgaW1wYWN0XG4gICAgbGV0IHVyZ2VuY3k6ICdpbW1lZGlhdGUnIHwgJ2hpZ2gnIHwgJ21lZGl1bScgfCAnbG93JyB8IHVuZGVmaW5lZDtcbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygndXJnZW50JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnaW1tZWRpYXRlJykpIHtcbiAgICAgIHVyZ2VuY3kgPSAnaW1tZWRpYXRlJztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2hpZ2ggcHJpb3JpdHknKSkge1xuICAgICAgdXJnZW5jeSA9ICdoaWdoJztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2xvdyBwcmlvcml0eScpKSB7XG4gICAgICB1cmdlbmN5ID0gJ2xvdyc7XG4gICAgfVxuICAgIFxuICAgIGxldCBpbXBhY3Q6ICdjcml0aWNhbCcgfCAnaGlnaCcgfCAnbWVkaXVtJyB8ICdsb3cnIHwgdW5kZWZpbmVkO1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjcml0aWNhbCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ21ham9yJykpIHtcbiAgICAgIGltcGFjdCA9ICdjcml0aWNhbCc7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdoaWdoIGltcGFjdCcpKSB7XG4gICAgICBpbXBhY3QgPSAnaGlnaCc7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdtaW5vcicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NtYWxsJykpIHtcbiAgICAgIGltcGFjdCA9ICdsb3cnO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgYWN0aW9uLFxuICAgICAgdGltZWZyYW1lLFxuICAgICAgZm9jdXMsXG4gICAgICBkZWNpc2lvblRpdGxlLFxuICAgICAgZGVjaXNpb25EZXNjcmlwdGlvbjogZGVjaXNpb25UaXRsZSxcbiAgICAgIGRlY2lzaW9uVHlwZSxcbiAgICAgIHVyZ2VuY3ksXG4gICAgICBpbXBhY3RcbiAgICB9O1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gTVVMVEktQUdFTlQgQ09PUkRJTkFUSU9OIFNVUFBPUlRcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpLWFnZW50IGNvb3JkaW5hdGlvbiByZXF1ZXN0XG4gICAqL1xuICBwcml2YXRlIGlzTXVsdGlBZ2VudENvb3JkaW5hdGlvblJlcXVlc3QoaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgcXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFnZW50S2V5d29yZHMgPSBbXG4gICAgICAnYWdlbnQnLCAnYWdlbnRzJywgJ2Nvb3JkaW5hdGUnLCAnY29sbGFib3JhdGlvbicsICdjb2xsYWJvcmF0ZScsXG4gICAgICAnbXVsdGktYWdlbnQnLCAndGVhbSB3b3JrJywgJ2RlbGVnYXRlJywgJ2Fzc2lnbiBhZ2VudHMnLFxuICAgICAgJ2FnZW50IGNvb3JkaW5hdGlvbicsICdhaSBhZ2VudHMnLCAnYWdlbnQgdGVhbScsICdtdWx0aXBsZSBhZ2VudHMnLFxuICAgICAgJ2NvbGxhYm9yYXRpdmUgdGFzaycsICdhZ2VudCBjb2xsYWJvcmF0aW9uJywgJ2Nvb3JkaW5hdGUgYWdlbnRzJyxcbiAgICAgICdhZ2VudCB0ZWFtd29yaycsICdhaSBjb29yZGluYXRpb24nLCAnZGlzdHJpYnV0ZWQgdGFzaydcbiAgICBdO1xuICAgIFxuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIHJldHVybiBhZ2VudEtleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlclF1ZXJ5LmluY2x1ZGVzKGtleXdvcmQpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnY29vcmRpbmF0ZScpICYmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCd0YXNrJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnd29yaycpKSkgfHxcbiAgICAgICAgICAgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2RlbGVnYXRlJykgJiYgbG93ZXJRdWVyeS5pbmNsdWRlcygndGFzaycpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnbXVsdGlwbGUnKSAmJiBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhaScpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIG11bHRpLWFnZW50IGNvb3JkaW5hdGlvbiBvcGVyYXRpb25zXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVNdWx0aUFnZW50Q29vcmRpbmF0aW9uKGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQsIHVzZXJJZDogc3RyaW5nLCBxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IHVzZXIgZGV0YWlscyBmb3IgcGVybWlzc2lvbnNcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgICBzZWxlY3Q6IHsgcm9sZTogdHJ1ZSwgb3JnYW5pemF0aW9uSWQ6IHRydWUsIG5hbWU6IHRydWUgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZC4gQ2Fubm90IHBlcmZvcm0gYWdlbnQgY29vcmRpbmF0aW9uIG9wZXJhdGlvbnMuJyxcbiAgICAgICAgICBlcnJvcjogJ1VzZXIgYXV0aGVudGljYXRpb24gZmFpbGVkJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBwZXJtaXNzaW9ucyAtIG9ubHkgYWRtaW5zIGNhbiBjb29yZGluYXRlIGFnZW50c1xuICAgICAgY29uc3QgaGFzUGVybWlzc2lvbiA9IFsnU1VQRVJfQURNSU4nLCAnQURNSU4nLCAnSVRfQURNSU4nXS5pbmNsdWRlcyh1c2VyLnJvbGUpO1xuICAgICAgaWYgKCFoYXNQZXJtaXNzaW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1lvdSBuZWVkIGFkbWluIHByaXZpbGVnZXMgdG8gY29vcmRpbmF0ZSBBSSBhZ2VudHMuJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgJ0NvbnRhY3QgeW91ciBzeXN0ZW0gYWRtaW5pc3RyYXRvciBmb3IgYWNjZXNzJyxcbiAgICAgICAgICAgICdUcnkgcmVndWxhciBBSSBmZWF0dXJlcyBpbnN0ZWFkJyxcbiAgICAgICAgICAgICdVc2Ugc2luZ2xlLWFnZW50IGNvbW1hbmRzJ1xuICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmluZm8oJ0FJIGFnZW50IGNvb3JkaW5hdGlvbiBpbml0aWF0ZWQgdmlhIGludGVsbGlnZW50IGV4ZWN1dGlvbicsIHtcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiB1c2VyLm9yZ2FuaXphdGlvbklkXG4gICAgICB9KTtcblxuICAgICAgLy8gSW1wb3J0IG11bHRpLWFnZW50IGNvb3JkaW5hdG9yXG4gICAgICBjb25zdCB7IG11bHRpQWdlbnRDb29yZGluYXRvciwgY3JlYXRlQWdlbnRDb2xsYWJvcmF0aW9uLCBnZXRNdWx0aUFnZW50U3RhdHVzIH0gPSBhd2FpdCBpbXBvcnQoJy4vbXVsdGktYWdlbnQtY29vcmRpbmF0b3InKTtcbiAgICAgIFxuICAgICAgLy8gUGFyc2UgYWdlbnQgY29vcmRpbmF0aW9uIHJlcXVlc3RcbiAgICAgIGNvbnN0IGNvb3JkaW5hdGlvblBhcmFtcyA9IHRoaXMucGFyc2VBZ2VudENvb3JkaW5hdGlvblJlcXVlc3QocXVlcnkpO1xuICAgICAgXG4gICAgICBpZiAoY29vcmRpbmF0aW9uUGFyYW1zLmFjdGlvbiA9PT0gJ2NyZWF0ZV9jb2xsYWJvcmF0aW9uJykge1xuICAgICAgICAvLyBDcmVhdGUgYWdlbnQgY29sbGFib3JhdGlvblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGNvbGxhYm9yYXRpb24gPSBhd2FpdCBjcmVhdGVBZ2VudENvbGxhYm9yYXRpb24oe1xuICAgICAgICAgICAgb2JqZWN0aXZlOiBjb29yZGluYXRpb25QYXJhbXMub2JqZWN0aXZlLFxuICAgICAgICAgICAgY2FwYWJpbGl0aWVzOiBjb29yZGluYXRpb25QYXJhbXMuY2FwYWJpbGl0aWVzLFxuICAgICAgICAgICAgcHJpb3JpdHk6IGNvb3JkaW5hdGlvblBhcmFtcy5wcmlvcml0eSB8fCAnbWVkaXVtJ1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgbGV0IG1lc3NhZ2UgPSBg8J+kliAqKkFnZW50IENvbGxhYm9yYXRpb24gQ3JlYXRlZCoqXFxuXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn46vICoqT2JqZWN0aXZlOioqICR7Y29sbGFib3JhdGlvbi5vYmplY3RpdmV9XFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5GlICoqUGFydGljaXBhbnRzOioqICR7Y29sbGFib3JhdGlvbi5wYXJ0aWNpcGFudHMubGVuZ3RofSBhZ2VudHNcXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYPCflIQgKipUeXBlOioqICR7Y29sbGFib3JhdGlvbi50eXBlfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+TiiAqKlN0YXR1czoqKiAke2NvbGxhYm9yYXRpb24uc3RhdHVzfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+GlCAqKlNlc3Npb24gSUQ6KiogJHtjb2xsYWJvcmF0aW9uLmlkfVxcblxcbmA7XG4gICAgICAgICAgXG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+kliAqKlBhcnRpY2lwYXRpbmcgQWdlbnRzOioqXFxuYDtcbiAgICAgICAgICBjb25zdCBhZ2VudFN0YXR1cyA9IGF3YWl0IG11bHRpQWdlbnRDb29yZGluYXRvci5nZXRBZ2VudFN0YXR1cygpIGFzIGFueVtdO1xuICAgICAgICAgIGNvbGxhYm9yYXRpb24ucGFydGljaXBhbnRzLmZvckVhY2gocGFydGljaXBhbnRJZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBhZ2VudCA9IGFnZW50U3RhdHVzLmZpbmQoYSA9PiBhLmlkID09PSBwYXJ0aWNpcGFudElkKTtcbiAgICAgICAgICAgIGlmIChhZ2VudCkge1xuICAgICAgICAgICAgICBtZXNzYWdlICs9IGDigKIgJHthZ2VudC5uYW1lfSAoJHthZ2VudC50eXBlfSlcXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBjb2xsYWJvcmF0aW9uLFxuICAgICAgICAgICAgICBzdW1tYXJ5OiB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkOiBjb2xsYWJvcmF0aW9uLmlkLFxuICAgICAgICAgICAgICAgIG9iamVjdGl2ZTogY29sbGFib3JhdGlvbi5vYmplY3RpdmUsXG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnRDb3VudDogY29sbGFib3JhdGlvbi5wYXJ0aWNpcGFudHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHR5cGU6IGNvbGxhYm9yYXRpb24udHlwZSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGNvbGxhYm9yYXRpb24uc3RhdHVzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnTW9uaXRvcjogXCJTaG93IGFnZW50IGNvbGxhYm9yYXRpb24gc3RhdHVzXCInLFxuICAgICAgICAgICAgICAnUmV2aWV3OiBcIkNoZWNrIGFnZW50IHBlcmZvcm1hbmNlXCInLFxuICAgICAgICAgICAgICAnVHJhY2s6IFwiR2V0IGNvbGxhYm9yYXRpb24gcmVzdWx0c1wiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGNyZWF0ZSBhZ2VudCBjb2xsYWJvcmF0aW9uOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQuJ31gLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ1RyeTogXCJTaG93IGFnZW50IHN0YXR1cyBmaXJzdFwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJDcmVhdGUgYSBzaW1wbGVyIGNvbGxhYm9yYXRpb25cIicsXG4gICAgICAgICAgICAgICdUcnk6IFwiQ2hlY2sgYWdlbnQgYXZhaWxhYmlsaXR5XCInXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY29vcmRpbmF0aW9uUGFyYW1zLmFjdGlvbiA9PT0gJ2RlbGVnYXRlX3Rhc2snKSB7XG4gICAgICAgIC8vIERlbGVnYXRlIHRhc2sgdG8gYWdlbnRzXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gYXdhaXQgbXVsdGlBZ2VudENvb3JkaW5hdG9yLmRlbGVnYXRlVGFza1RvQWdlbnRzKHtcbiAgICAgICAgICAgIHRhc2s6IGNvb3JkaW5hdGlvblBhcmFtcy50YXNrLFxuICAgICAgICAgICAgcmVxdWlyZWRDYXBhYmlsaXRpZXM6IGNvb3JkaW5hdGlvblBhcmFtcy5jYXBhYmlsaXRpZXMsXG4gICAgICAgICAgICBwcmlvcml0eTogY29vcmRpbmF0aW9uUGFyYW1zLnByaW9yaXR5IHx8ICdtZWRpdW0nLFxuICAgICAgICAgICAgZGVhZGxpbmU6IGNvb3JkaW5hdGlvblBhcmFtcy5kZWFkbGluZVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgbGV0IG1lc3NhZ2UgPSBg8J+TiyAqKlRhc2sgRGVsZWdhdGVkIHRvIEFnZW50cyoqXFxuXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5OdICoqVGFzazoqKiAke2Nvb3JkaW5hdGlvblBhcmFtcy50YXNrfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4pqhICoqUHJpb3JpdHk6KiogJHtjb29yZGluYXRpb25QYXJhbXMucHJpb3JpdHkgfHwgJ21lZGl1bSd9XFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5ug77iPICoqUmVxdWlyZWQgQ2FwYWJpbGl0aWVzOioqICR7Y29vcmRpbmF0aW9uUGFyYW1zLmNhcGFiaWxpdGllcy5qb2luKCcsICcpfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+GlCAqKlNlc3Npb24gSUQ6KiogJHtzZXNzaW9uSWR9XFxuYDtcbiAgICAgICAgICBpZiAoY29vcmRpbmF0aW9uUGFyYW1zLmRlYWRsaW5lKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDij7AgKipEZWFkbGluZToqKiAke2Nvb3JkaW5hdGlvblBhcmFtcy5kZWFkbGluZS50b0xvY2FsZURhdGVTdHJpbmcoKX1cXG5gO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgICAgICB0YXNrOiBjb29yZGluYXRpb25QYXJhbXMudGFzayxcbiAgICAgICAgICAgICAgY2FwYWJpbGl0aWVzOiBjb29yZGluYXRpb25QYXJhbXMuY2FwYWJpbGl0aWVzLFxuICAgICAgICAgICAgICBwcmlvcml0eTogY29vcmRpbmF0aW9uUGFyYW1zLnByaW9yaXR5XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ01vbml0b3I6IFwiQ2hlY2sgZGVsZWdhdGlvbiBwcm9ncmVzc1wiJyxcbiAgICAgICAgICAgICAgJ1JldmlldzogXCJTaG93IGFnZW50IHRhc2sgc3RhdHVzXCInLFxuICAgICAgICAgICAgICAnVHJhY2s6IFwiR2V0IHRhc2sgcmVzdWx0c1wiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGRlbGVnYXRlIHRhc2s6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZC4nfWAsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnVHJ5OiBcIlNob3cgYXZhaWxhYmxlIGFnZW50cyBmaXJzdFwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJTaW1wbGlmeSB0aGUgdGFzayBkZXNjcmlwdGlvblwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJDaGVjayByZXF1aXJlZCBjYXBhYmlsaXRpZXNcIidcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjb29yZGluYXRpb25QYXJhbXMuYWN0aW9uID09PSAnc2hvd19zdGF0dXMnKSB7XG4gICAgICAgIC8vIFNob3cgYWdlbnQgc3RhdHVzXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgZ2V0TXVsdGlBZ2VudFN0YXR1cygpO1xuXG4gICAgICAgICAgbGV0IG1lc3NhZ2UgPSBg8J+kliAqKk11bHRpLUFnZW50IFN5c3RlbSBTdGF0dXMqKlxcblxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+RpSAqKlRvdGFsIEFnZW50czoqKiAke3N0YXR1cy5hZ2VudHMubGVuZ3RofVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+UhCAqKkFjdGl2ZSBDb2xsYWJvcmF0aW9uczoqKiAke3N0YXR1cy5hY3RpdmVDb2xsYWJvcmF0aW9ucy5sZW5ndGh9XFxuXFxuYDtcbiAgICAgICAgICBcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5OKICoqQWdlbnQgT3ZlcnZpZXc6KipcXG5gO1xuICAgICAgICAgIHN0YXR1cy5hZ2VudHMuZm9yRWFjaChhZ2VudCA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdGF0dXNJY29uID0gYWdlbnQuc3RhdHVzID09PSAnYWN0aXZlJyA/ICfwn5+iJyA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZ2VudC5zdGF0dXMgPT09ICdidXN5JyA/ICfwn5+hJyA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZ2VudC5zdGF0dXMgPT09ICdjb2xsYWJvcmF0aW5nJyA/ICfwn5SEJyA6ICfwn5S0JztcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCR7c3RhdHVzSWNvbn0gJHthZ2VudC5uYW1lfSAoJHthZ2VudC50eXBlfSkgLSAke2FnZW50LnN0YXR1c31cXG5gO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHN0YXR1cy5hY3RpdmVDb2xsYWJvcmF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGBcXG7wn5SEICoqQWN0aXZlIENvbGxhYm9yYXRpb25zOioqXFxuYDtcbiAgICAgICAgICAgIHN0YXR1cy5hY3RpdmVDb2xsYWJvcmF0aW9ucy5mb3JFYWNoKGNvbGxhYiA9PiB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiAke2NvbGxhYi5vYmplY3RpdmV9ICgke2NvbGxhYi5wYXJ0aWNpcGFudHMubGVuZ3RofSBhZ2VudHMpXFxuYDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGRhdGE6IHN0YXR1cyxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdDcmVhdGU6IFwiU3RhcnQgYWdlbnQgY29sbGFib3JhdGlvblwiJyxcbiAgICAgICAgICAgICAgJ0RlbGVnYXRlOiBcIkFzc2lnbiB0YXNrIHRvIGFnZW50c1wiJyxcbiAgICAgICAgICAgICAgJ01vbml0b3I6IFwiQ2hlY2sgYWdlbnQgcGVyZm9ybWFuY2VcIidcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byBnZXQgYWdlbnQgc3RhdHVzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQuJ31gLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ1RyeTogXCJSZXN0YXJ0IGFnZW50IHN5c3RlbVwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJDaGVjayBhZ2VudCBjb25uZWN0aXZpdHlcIicsXG4gICAgICAgICAgICAgICdUcnk6IFwiQ29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvclwiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRGVmYXVsdCByZXNwb25zZSBmb3IgdW5yZWNvZ25pemVkIGFnZW50IGNvb3JkaW5hdGlvbiBxdWVyaWVzXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg8J+kliAqKkFnZW50IENvb3JkaW5hdGlvbiBBdmFpbGFibGUqKlxcblxcbkkgY2FuIGhlbHAgeW91IGNvb3JkaW5hdGUgQUkgYWdlbnRzIGZvciBjb21wbGV4IHRhc2tzLiBUcnk6XFxuXFxu4oCiIFwiQ3JlYXRlIGFnZW50IGNvbGxhYm9yYXRpb24gZm9yIGNhbXBhaWduIGFuYWx5c2lzXCJcXG7igKIgXCJEZWxlZ2F0ZSB0YXNrIHRvIGFnZW50cyB3aXRoIGFuYWx5dGljcyBjYXBhYmlsaXRpZXNcIlxcbuKAoiBcIlNob3cgYWdlbnQgc3lzdGVtIHN0YXR1c1wiXFxu4oCiIFwiQ29vcmRpbmF0ZSBhZ2VudHMgZm9yIHN0cmF0ZWdpYyBwbGFubmluZ1wiYCxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAnVHJ5OiBcIlNob3cgYWdlbnQgc3RhdHVzXCInLFxuICAgICAgICAgICdUcnk6IFwiQ3JlYXRlIGFnZW50IGNvbGxhYm9yYXRpb25cIicsXG4gICAgICAgICAgJ1RyeTogXCJEZWxlZ2F0ZSBjb21wbGV4IHRhc2sgdG8gYWdlbnRzXCInXG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdBZ2VudCBjb29yZGluYXRpb24gZXhlY3V0aW9uIGZhaWxlZCcsIHsgXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksIFxuICAgICAgICBxdWVyeSwgXG4gICAgICAgIHVzZXJJZCBcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBleGVjdXRlIGFnZW50IGNvb3JkaW5hdGlvbiBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICdDaGVjayBhZ2VudCBzeXN0ZW0gYXZhaWxhYmlsaXR5JyxcbiAgICAgICAgICAnVmVyaWZ5IGNvb3JkaW5hdGlvbiBwZXJtaXNzaW9ucycsXG4gICAgICAgICAgJ1RyeSBzaW1wbGVyIGFnZW50IGNvbW1hbmRzJ1xuICAgICAgICBdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBhZ2VudCBjb29yZGluYXRpb24gcmVxdWVzdCBwYXJhbWV0ZXJzIGZyb20gbmF0dXJhbCBsYW5ndWFnZVxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUFnZW50Q29vcmRpbmF0aW9uUmVxdWVzdChxdWVyeTogc3RyaW5nKToge1xuICAgIGFjdGlvbjogJ2NyZWF0ZV9jb2xsYWJvcmF0aW9uJyB8ICdkZWxlZ2F0ZV90YXNrJyB8ICdzaG93X3N0YXR1cycgfCAndW5rbm93bic7XG4gICAgb2JqZWN0aXZlPzogc3RyaW5nO1xuICAgIHRhc2s/OiBzdHJpbmc7XG4gICAgY2FwYWJpbGl0aWVzOiBzdHJpbmdbXTtcbiAgICBwcmlvcml0eT86ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnO1xuICAgIGRlYWRsaW5lPzogRGF0ZTtcbiAgfSB7XG4gICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIGFjdGlvblxuICAgIGxldCBhY3Rpb246ICdjcmVhdGVfY29sbGFib3JhdGlvbicgfCAnZGVsZWdhdGVfdGFzaycgfCAnc2hvd19zdGF0dXMnIHwgJ3Vua25vd24nID0gJ3Vua25vd24nO1xuICAgIFxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb2xsYWJvcmF0ZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NvbGxhYm9yYXRpb24nKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb29yZGluYXRlJykpIHtcbiAgICAgIGFjdGlvbiA9ICdjcmVhdGVfY29sbGFib3JhdGlvbic7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdkZWxlZ2F0ZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2Fzc2lnbicpKSB7XG4gICAgICBhY3Rpb24gPSAnZGVsZWdhdGVfdGFzayc7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzdGF0dXMnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzaG93JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnY2hlY2snKSkge1xuICAgICAgYWN0aW9uID0gJ3Nob3dfc3RhdHVzJztcbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCBvYmplY3RpdmUvdGFza1xuICAgIGxldCBvYmplY3RpdmUgPSAnJztcbiAgICBsZXQgdGFzayA9ICcnO1xuICAgIFxuICAgIGlmIChhY3Rpb24gPT09ICdjcmVhdGVfY29sbGFib3JhdGlvbicpIHtcbiAgICAgIC8vIEV4dHJhY3Qgb2JqZWN0aXZlIGZyb20gXCJjb29yZGluYXRlIGFnZW50cyBmb3IgW29iamVjdGl2ZV1cIlxuICAgICAgY29uc3QgZm9yTWF0Y2ggPSBxdWVyeS5tYXRjaCgvKD86Zm9yfHRvKVxccysoLis/KSg/Olxccyt3aXRofFxccyt1c2luZ3wkKS9pKTtcbiAgICAgIGlmIChmb3JNYXRjaCkge1xuICAgICAgICBvYmplY3RpdmUgPSBmb3JNYXRjaFsxXS50cmltKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3RpdmUgPSBxdWVyeTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2RlbGVnYXRlX3Rhc2snKSB7XG4gICAgICAvLyBFeHRyYWN0IHRhc2sgZnJvbSBcImRlbGVnYXRlIFt0YXNrXSB0byBhZ2VudHNcIlxuICAgICAgY29uc3QgdGFza01hdGNoID0gcXVlcnkubWF0Y2goLyg/OmRlbGVnYXRlfGFzc2lnbilcXHMrKC4rPylcXHMrKD86dG98d2l0aHx1c2luZykvaSk7XG4gICAgICBpZiAodGFza01hdGNoKSB7XG4gICAgICAgIHRhc2sgPSB0YXNrTWF0Y2hbMV0udHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFzayA9IHF1ZXJ5O1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBFeHRyYWN0IGNhcGFiaWxpdGllc1xuICAgIGNvbnN0IGNhcGFiaWxpdGllczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBjYXBhYmlsaXR5S2V5d29yZHMgPSB7XG4gICAgICAnYW5hbHl0aWNzJzogWydhbmFseXRpYycsICdhbmFseXNpcycsICdkYXRhJywgJ2luc2lnaHQnLCAncmVwb3J0J10sXG4gICAgICAnZXhlY3V0aW9uJzogWydleGVjdXRlJywgJ3J1bicsICdwZXJmb3JtJywgJ2FjdGlvbicsICd0YXNrJ10sXG4gICAgICAnc3RyYXRlZ3knOiBbJ3N0cmF0ZWdpYycsICdzdHJhdGVneScsICdwbGFubmluZycsICdkZWNpc2lvbiddLFxuICAgICAgJ2NvbnRlbnQnOiBbJ2NvbnRlbnQnLCAndGV4dCcsICd3cml0ZScsICdnZW5lcmF0ZSddLFxuICAgICAgJ2NvbW11bmljYXRpb24nOiBbJ2NvbW11bmljYXRlJywgJ21lc3NhZ2UnLCAnZW1haWwnLCAnc21zJ10sXG4gICAgICAncHJlZGljdGlvbic6IFsncHJlZGljdCcsICdmb3JlY2FzdCcsICdmdXR1cmUnLCAndHJlbmQnXSxcbiAgICAgICdpbnRlZ3JhdGlvbic6IFsnaW50ZWdyYXRlJywgJ2Nvbm5lY3QnLCAnYXBpJywgJ3N5c3RlbSddLFxuICAgICAgJ2xlYXJuaW5nJzogWydsZWFybicsICd0cmFpbicsICdtb2RlbCcsICdtbCcsICdhaSddXG4gICAgfTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IFtjYXBhYmlsaXR5LCBrZXl3b3Jkc10gb2YgT2JqZWN0LmVudHJpZXMoY2FwYWJpbGl0eUtleXdvcmRzKSkge1xuICAgICAgaWYgKGtleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlclF1ZXJ5LmluY2x1ZGVzKGtleXdvcmQpKSkge1xuICAgICAgICBjYXBhYmlsaXRpZXMucHVzaChjYXBhYmlsaXR5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRGVmYXVsdCB0byBjb21tb24gY2FwYWJpbGl0aWVzIGlmIG5vbmUgc3BlY2lmaWVkXG4gICAgaWYgKGNhcGFiaWxpdGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhcGFiaWxpdGllcy5wdXNoKCdhbmFseXRpY3MnLCAnZXhlY3V0aW9uJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEV4dHJhY3QgcHJpb3JpdHlcbiAgICBsZXQgcHJpb3JpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnIHwgdW5kZWZpbmVkO1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCd1cmdlbnQnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjcml0aWNhbCcpKSB7XG4gICAgICBwcmlvcml0eSA9ICdjcml0aWNhbCc7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdoaWdoIHByaW9yaXR5JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnaW1wb3J0YW50JykpIHtcbiAgICAgIHByaW9yaXR5ID0gJ2hpZ2gnO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnbG93IHByaW9yaXR5JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnYmFja2dyb3VuZCcpKSB7XG4gICAgICBwcmlvcml0eSA9ICdsb3cnO1xuICAgIH1cbiAgICBcbiAgICAvLyBFeHRyYWN0IGRlYWRsaW5lXG4gICAgbGV0IGRlYWRsaW5lOiBEYXRlIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGRlYWRsaW5lTWF0Y2ggPSBxdWVyeS5tYXRjaCgvKD86Ynl8ZGVhZGxpbmV8ZHVlKVxccysoLis/KSg/Olxcc3wkKS9pKTtcbiAgICBpZiAoZGVhZGxpbmVNYXRjaCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGVhZGxpbmUgPSBuZXcgRGF0ZShkZWFkbGluZU1hdGNoWzFdKTtcbiAgICAgICAgaWYgKGlzTmFOKGRlYWRsaW5lLmdldFRpbWUoKSkpIHtcbiAgICAgICAgICBkZWFkbGluZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIGRlYWRsaW5lID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgYWN0aW9uLFxuICAgICAgb2JqZWN0aXZlOiBvYmplY3RpdmUgfHwgdW5kZWZpbmVkLFxuICAgICAgdGFzazogdGFzayB8fCB1bmRlZmluZWQsXG4gICAgICBjYXBhYmlsaXRpZXMsXG4gICAgICBwcmlvcml0eSxcbiAgICAgIGRlYWRsaW5lXG4gICAgfTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIElORlJBU1RSVUNUVVJFIE1BTkFHRU1FTlQgU1VQUE9SVFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGlzIGlzIGFuIGluZnJhc3RydWN0dXJlIG1hbmFnZW1lbnQgcmVxdWVzdFxuICAgKi9cbiAgcHJpdmF0ZSBpc0luZnJhc3RydWN0dXJlTWFuYWdlbWVudFJlcXVlc3QoaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgcXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGluZnJhc3RydWN0dXJlS2V5d29yZHMgPSBbXG4gICAgICAnaW5mcmFzdHJ1Y3R1cmUnLCAnc2NhbGluZycsICdzY2FsZSB1cCcsICdzY2FsZSBkb3duJywgJ2F1dG8tc2NhbGUnLFxuICAgICAgJ3Jlc291cmNlJywgJ3NlcnZlcicsICdwZXJmb3JtYW5jZScsICdzeXN0ZW0gaGVhbHRoJywgJ21vbml0b3JpbmcnLFxuICAgICAgJ2Nvc3Qgb3B0aW1pemF0aW9uJywgJ3Jlc291cmNlIG9wdGltaXphdGlvbicsICdwcmVkaWN0aXZlIHNjYWxpbmcnLFxuICAgICAgJ2luZnJhc3RydWN0dXJlIHN0YXR1cycsICdzeXN0ZW0gc3RhdHVzJywgJ3Jlc291cmNlIHVzYWdlJyxcbiAgICAgICdjcHUgdXNhZ2UnLCAnbWVtb3J5IHVzYWdlJywgJ2Rpc2sgdXNhZ2UnLCAnbmV0d29yayBwZXJmb3JtYW5jZScsXG4gICAgICAnc3lzdGVtIGxvYWQnLCAnc2VydmVyIGxvYWQnLCAnaW5mcmFzdHJ1Y3R1cmUgaGVhbHRoJyxcbiAgICAgICdyZXNvdXJjZSBhbGxvY2F0aW9uJywgJ2NhcGFjaXR5IHBsYW5uaW5nJywgJ3BlcmZvcm1hbmNlIHR1bmluZydcbiAgICBdO1xuICAgIFxuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIHJldHVybiBpbmZyYXN0cnVjdHVyZUtleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlclF1ZXJ5LmluY2x1ZGVzKGtleXdvcmQpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnc2NhbGUnKSAmJiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc2VydmVyJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnc3lzdGVtJykpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnb3B0aW1pemUnKSAmJiBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdyZXNvdXJjZScpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnbW9uaXRvcicpICYmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzeXN0ZW0nKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdpbmZyYXN0cnVjdHVyZScpKSk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBpbmZyYXN0cnVjdHVyZSBtYW5hZ2VtZW50IG9wZXJhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUluZnJhc3RydWN0dXJlTWFuYWdlbWVudChpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCB1c2VySWQ6IHN0cmluZywgcXVlcnk6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB1c2VyIGRldGFpbHMgZm9yIHBlcm1pc3Npb25zXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IHJvbGU6IHRydWUsIG9yZ2FuaXphdGlvbklkOiB0cnVlLCBuYW1lOiB0cnVlIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQuIENhbm5vdCBwZXJmb3JtIGluZnJhc3RydWN0dXJlIG1hbmFnZW1lbnQgb3BlcmF0aW9ucy4nLFxuICAgICAgICAgIGVycm9yOiAnVXNlciBhdXRoZW50aWNhdGlvbiBmYWlsZWQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIHBlcm1pc3Npb25zIC0gb25seSBhZG1pbnMgY2FuIG1hbmFnZSBpbmZyYXN0cnVjdHVyZVxuICAgICAgY29uc3QgaGFzUGVybWlzc2lvbiA9IFsnU1VQRVJfQURNSU4nLCAnQURNSU4nLCAnSVRfQURNSU4nXS5pbmNsdWRlcyh1c2VyLnJvbGUpO1xuICAgICAgaWYgKCFoYXNQZXJtaXNzaW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1lvdSBuZWVkIGFkbWluIHByaXZpbGVnZXMgdG8gbWFuYWdlIGluZnJhc3RydWN0dXJlLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICdDb250YWN0IHlvdXIgc3lzdGVtIGFkbWluaXN0cmF0b3IgZm9yIGFjY2VzcycsXG4gICAgICAgICAgICAnVHJ5IGdlbmVyYWwgc3lzdGVtIHN0YXR1cyBxdWVyaWVzIGluc3RlYWQnLFxuICAgICAgICAgICAgJ1VzZSBtb25pdG9yaW5nIGRhc2hib2FyZHMgZm9yIHJlYWQtb25seSBhY2Nlc3MnXG4gICAgICAgICAgXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIuaW5mbygnQUkgaW5mcmFzdHJ1Y3R1cmUgbWFuYWdlbWVudCBpbml0aWF0ZWQgdmlhIGludGVsbGlnZW50IGV4ZWN1dGlvbicsIHtcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiB1c2VyLm9yZ2FuaXphdGlvbklkXG4gICAgICB9KTtcblxuICAgICAgLy8gSW1wb3J0IGluZnJhc3RydWN0dXJlIG1hbmFnZXJcbiAgICAgIGNvbnN0IHsgcHJlZGljdGl2ZUluZnJhc3RydWN0dXJlTWFuYWdlciB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9pbmZyYXN0cnVjdHVyZS9wcmVkaWN0aXZlLWluZnJhc3RydWN0dXJlLW1hbmFnZXInKTtcbiAgICAgIFxuICAgICAgLy8gUGFyc2UgaW5mcmFzdHJ1Y3R1cmUgbWFuYWdlbWVudCByZXF1ZXN0XG4gICAgICBjb25zdCBtYW5hZ2VtZW50UGFyYW1zID0gdGhpcy5wYXJzZUluZnJhc3RydWN0dXJlTWFuYWdlbWVudFJlcXVlc3QocXVlcnkpO1xuICAgICAgXG4gICAgICBpZiAobWFuYWdlbWVudFBhcmFtcy5hY3Rpb24gPT09ICdzaG93X3N0YXR1cycpIHtcbiAgICAgICAgLy8gU2hvdyBpbmZyYXN0cnVjdHVyZSBzdGF0dXNcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCBwcmVkaWN0aXZlSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VyLmdldEluZnJhc3RydWN0dXJlU3RhdHVzKCk7XG5cbiAgICAgICAgICBsZXQgbWVzc2FnZSA9IGDwn4+X77iPICoqSW5mcmFzdHJ1Y3R1cmUgU3RhdHVzKipcXG5cXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfk4ogKipPdmVydmlldzoqKlxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIFRvdGFsIFJlc291cmNlczogJHtzdGF0dXMub3ZlcnZpZXcudG90YWxSZXNvdXJjZXN9XFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDigKIgSGVhbHRoeTogJHtzdGF0dXMub3ZlcnZpZXcuaGVhbHRoeVJlc291cmNlc30g8J+folxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIFdhcm5pbmc6ICR7c3RhdHVzLm92ZXJ2aWV3Lndhcm5pbmdSZXNvdXJjZXN9IPCfn6FcXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBDcml0aWNhbDogJHtzdGF0dXMub3ZlcnZpZXcuY3JpdGljYWxSZXNvdXJjZXN9IPCflLRcXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBTY2FsaW5nOiAke3N0YXR1cy5vdmVydmlldy5zY2FsaW5nUmVzb3VyY2VzfSDwn5SEXFxuXFxuYDtcbiAgICAgICAgICBcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5KwICoqQ29zdCBTdW1tYXJ5OioqXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDigKIgSG91cmx5OiAkJHtzdGF0dXMudG90YWxDb3N0LmhvdXJseS50b0ZpeGVkKDIpfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIERhaWx5OiAkJHtzdGF0dXMudG90YWxDb3N0LmRhaWx5LnRvRml4ZWQoMil9XFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDigKIgTW9udGhseTogJCR7c3RhdHVzLnRvdGFsQ29zdC5tb250aGx5LnRvRml4ZWQoMil9XFxuXFxuYDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoc3RhdHVzLnJlY2VudFNjYWxpbmdFdmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBg8J+UhCAqKlJlY2VudCBTY2FsaW5nIEV2ZW50czoqKlxcbmA7XG4gICAgICAgICAgICBzdGF0dXMucmVjZW50U2NhbGluZ0V2ZW50cy5zbGljZSgwLCAzKS5mb3JFYWNoKGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzSWNvbiA9IGV2ZW50LnN1Y2Nlc3MgPyAn4pyFJyA6ICfinYwnO1xuICAgICAgICAgICAgICBtZXNzYWdlICs9IGAke3N0YXR1c0ljb259ICR7ZXZlbnQuYWN0aW9ufSBmb3IgJHtldmVudC5yZXNvdXJjZUlkfSAoJHtuZXcgRGF0ZShldmVudC50aW1lc3RhbXApLnRvTG9jYWxlVGltZVN0cmluZygpfSlcXG5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChzdGF0dXMucHJlZGljdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgXFxu8J+UriAqKlRvcCBQcmVkaWN0aW9uczoqKlxcbmA7XG4gICAgICAgICAgICBzdGF0dXMucHJlZGljdGlvbnMuc2xpY2UoMCwgMikuZm9yRWFjaChwcmVkaWN0aW9uID0+IHtcbiAgICAgICAgICAgICAgbWVzc2FnZSArPSBg4oCiICR7cHJlZGljdGlvbi5idXNpbmVzc0ltcGFjdH0gKCR7TWF0aC5yb3VuZChwcmVkaWN0aW9uLmNvbmZpZGVuY2UgKiAxMDApfSUgY29uZmlkZW5jZSlcXG5gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICAgICAgICB0b3RhbFJlc291cmNlczogc3RhdHVzLm92ZXJ2aWV3LnRvdGFsUmVzb3VyY2VzLFxuICAgICAgICAgICAgICAgIGhlYWx0aHlQZXJjZW50YWdlOiBNYXRoLnJvdW5kKChzdGF0dXMub3ZlcnZpZXcuaGVhbHRoeVJlc291cmNlcyAvIHN0YXR1cy5vdmVydmlldy50b3RhbFJlc291cmNlcykgKiAxMDApLFxuICAgICAgICAgICAgICAgIG1vbnRobHlDb3N0OiBzdGF0dXMudG90YWxDb3N0Lm1vbnRobHksXG4gICAgICAgICAgICAgICAgcmVjZW50U2NhbGluZ0V2ZW50czogc3RhdHVzLnJlY2VudFNjYWxpbmdFdmVudHMubGVuZ3RoXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnT3B0aW1pemU6IFwiT3B0aW1pemUgaW5mcmFzdHJ1Y3R1cmUgY29zdHNcIicsXG4gICAgICAgICAgICAgICdTY2FsZTogXCJTY2FsZSB1cCBkYXRhYmFzZSByZXNvdXJjZXNcIicsXG4gICAgICAgICAgICAgICdNb25pdG9yOiBcIlNob3cgcmVzb3VyY2UgcGVyZm9ybWFuY2UgbWV0cmljc1wiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGdldCBpbmZyYXN0cnVjdHVyZSBzdGF0dXM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZC4nfWAsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnVHJ5OiBcIkNoZWNrIHN5c3RlbSBoZWFsdGhcIicsXG4gICAgICAgICAgICAgICdUcnk6IFwiU2hvdyByZXNvdXJjZSBzdGF0dXNcIicsXG4gICAgICAgICAgICAgICdUcnk6IFwiQ29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvclwiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG1hbmFnZW1lbnRQYXJhbXMuYWN0aW9uID09PSAnZm9yY2Vfc2NhbGluZycpIHtcbiAgICAgICAgLy8gRm9yY2Ugc2NhbGluZyBvcGVyYXRpb25cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIW1hbmFnZW1lbnRQYXJhbXMucmVzb3VyY2VJZCB8fCAhbWFuYWdlbWVudFBhcmFtcy5zY2FsaW5nQWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzcGVjaWZ5IHdoaWNoIHJlc291cmNlIHRvIHNjYWxlIGFuZCB0aGUgc2NhbGluZyBhY3Rpb24uJyxcbiAgICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAnVHJ5OiBcIlNjYWxlIHVwIGRhdGFiYXNlIHNlcnZlclwiJyxcbiAgICAgICAgICAgICAgICAnVHJ5OiBcIlNjYWxlIGRvd24gQVBJIHNlcnZlcnNcIicsXG4gICAgICAgICAgICAgICAgJ1RyeTogXCJTaG93IGluZnJhc3RydWN0dXJlIHN0YXR1cyBmaXJzdFwiJ1xuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHNjYWxpbmdJZCA9IGF3YWl0IHByZWRpY3RpdmVJbmZyYXN0cnVjdHVyZU1hbmFnZXIuZm9yY2VTY2FsaW5nKFxuICAgICAgICAgICAgbWFuYWdlbWVudFBhcmFtcy5yZXNvdXJjZUlkLFxuICAgICAgICAgICAgbWFuYWdlbWVudFBhcmFtcy5zY2FsaW5nQWN0aW9uLFxuICAgICAgICAgICAgbWFuYWdlbWVudFBhcmFtcy50YXJnZXRJbnN0YW5jZXNcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgbGV0IG1lc3NhZ2UgPSBg8J+agCAqKlNjYWxpbmcgT3BlcmF0aW9uIEluaXRpYXRlZCoqXFxuXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn46vICoqUmVzb3VyY2U6KiogJHttYW5hZ2VtZW50UGFyYW1zLnJlc291cmNlSWR9XFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDimqEgKipBY3Rpb246KiogJHttYW5hZ2VtZW50UGFyYW1zLnNjYWxpbmdBY3Rpb259XFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn4aUICoqU2NhbGluZyBJRDoqKiAke3NjYWxpbmdJZH1cXG5gO1xuICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGFyYW1zLnRhcmdldEluc3RhbmNlcykge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBg8J+OryAqKlRhcmdldCBJbnN0YW5jZXM6KiogJHttYW5hZ2VtZW50UGFyYW1zLnRhcmdldEluc3RhbmNlc31cXG5gO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlICs9IGBcXG7ij7MgKipTdGF0dXM6KiogU2NhbGluZyBvcGVyYXRpb24gaW4gcHJvZ3Jlc3MuLi5gO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBzY2FsaW5nSWQsXG4gICAgICAgICAgICAgIHJlc291cmNlSWQ6IG1hbmFnZW1lbnRQYXJhbXMucmVzb3VyY2VJZCxcbiAgICAgICAgICAgICAgYWN0aW9uOiBtYW5hZ2VtZW50UGFyYW1zLnNjYWxpbmdBY3Rpb24sXG4gICAgICAgICAgICAgIHRhcmdldEluc3RhbmNlczogbWFuYWdlbWVudFBhcmFtcy50YXJnZXRJbnN0YW5jZXNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnTW9uaXRvcjogXCJDaGVjayBzY2FsaW5nIHByb2dyZXNzXCInLFxuICAgICAgICAgICAgICAnU3RhdHVzOiBcIlNob3cgaW5mcmFzdHJ1Y3R1cmUgc3RhdHVzXCInLFxuICAgICAgICAgICAgICAnVHJhY2s6IFwiU2hvdyBzY2FsaW5nIGhpc3RvcnlcIidcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byBpbml0aWF0ZSBzY2FsaW5nOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQuJ31gLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ1RyeTogXCJTaG93IGluZnJhc3RydWN0dXJlIHN0YXR1cyBmaXJzdFwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJDaGVjayByZXNvdXJjZSBhdmFpbGFiaWxpdHlcIicsXG4gICAgICAgICAgICAgICdUcnk6IFwiVXNlIHZhbGlkIHJlc291cmNlIGlkZW50aWZpZXJcIidcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtYW5hZ2VtZW50UGFyYW1zLmFjdGlvbiA9PT0gJ29wdGltaXplX2Nvc3RzJykge1xuICAgICAgICAvLyBUcmlnZ2VyIGNvc3Qgb3B0aW1pemF0aW9uXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3b3VsZCB0cmlnZ2VyIHRoZSBhY3R1YWwgY29zdCBvcHRpbWl6YXRpb24gcHJvY2Vzc1xuICAgICAgICAgIGxldCBtZXNzYWdlID0gYPCfkrAgKipDb3N0IE9wdGltaXphdGlvbiBJbml0aWF0ZWQqKlxcblxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+UjSAqKkFuYWx5c2lzOioqIFNjYW5uaW5nIGFsbCByZXNvdXJjZXMgZm9yIG9wdGltaXphdGlvbiBvcHBvcnR1bml0aWVzLi4uXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDimqEgKipUYXJnZXQ6KiogUmVkdWNlIGluZnJhc3RydWN0dXJlIGNvc3RzIHdoaWxlIG1haW50YWluaW5nIHBlcmZvcm1hbmNlXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn4yNICoqRm9jdXM6KiogQWZyaWNhbiBtYXJrZXQtYXdhcmUgb3B0aW1pemF0aW9uIHBhdHRlcm5zXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGBcXG7wn5OKICoqUHJvY2VzczoqKlxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBgMS4gQW5hbHl6aW5nIHJlc291cmNlIHV0aWxpemF0aW9uIHBhdHRlcm5zXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGAyLiBJZGVudGlmeWluZyBvdmVyLXByb3Zpc2lvbmVkIHJlc291cmNlc1xcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBgMy4gQ2FsY3VsYXRpbmcgQWZyaWNhbiBidXNpbmVzcyBob3VycyBpbXBhY3RcXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYDQuIEdlbmVyYXRpbmcgb3B0aW1pemF0aW9uIHJlY29tbWVuZGF0aW9uc1xcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBgXFxu4o+x77iPICoqRXN0aW1hdGVkIER1cmF0aW9uOioqIDUtMTAgbWludXRlc2A7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIG9wdGltaXphdGlvbklkOiBgb3B0XyR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdGFyZ2V0U2F2aW5nczogJzE1LTMwJScsXG4gICAgICAgICAgICAgIHNjb3BlOiBtYW5hZ2VtZW50UGFyYW1zLnJlc291cmNlSWRzIHx8ICdhbGxfcmVzb3VyY2VzJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdNb25pdG9yOiBcIkNoZWNrIG9wdGltaXphdGlvbiBwcm9ncmVzc1wiJyxcbiAgICAgICAgICAgICAgJ1JldmlldzogXCJTaG93IGNvc3QgYW5hbHlzaXMgcmVwb3J0XCInLFxuICAgICAgICAgICAgICAnU3RhdHVzOiBcIlNob3cgaW5mcmFzdHJ1Y3R1cmUgc3RhdHVzXCInXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gc3RhcnQgY29zdCBvcHRpbWl6YXRpb246ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZC4nfWAsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnVHJ5OiBcIlNob3cgY3VycmVudCBpbmZyYXN0cnVjdHVyZSBjb3N0c1wiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJDaGVjayBzeXN0ZW0gcmVzb3VyY2VzIGZpcnN0XCInLFxuICAgICAgICAgICAgICAnVHJ5OiBcIkNvbnRhY3Qgc3lzdGVtIGFkbWluaXN0cmF0b3JcIidcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtYW5hZ2VtZW50UGFyYW1zLmFjdGlvbiA9PT0gJ3Nob3dfbWV0cmljcycpIHtcbiAgICAgICAgLy8gU2hvdyByZXNvdXJjZSBtZXRyaWNzXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgcHJlZGljdGl2ZUluZnJhc3RydWN0dXJlTWFuYWdlci5nZXRJbmZyYXN0cnVjdHVyZVN0YXR1cygpO1xuICAgICAgICAgIFxuICAgICAgICAgIGxldCBtZXNzYWdlID0gYPCfk4ogKipSZXNvdXJjZSBQZXJmb3JtYW5jZSBNZXRyaWNzKipcXG5cXG5gO1xuICAgICAgICAgIFxuICAgICAgICAgIHN0YXR1cy5yZXNvdXJjZXMuc2xpY2UoMCwgMykuZm9yRWFjaChyZXNvdXJjZSA9PiB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDwn4+X77iPICoqJHtyZXNvdXJjZS5uYW1lfSoqXFxuYDtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBDUFU6ICR7TWF0aC5yb3VuZChyZXNvdXJjZS5tZXRyaWNzLmNwdS51c2FnZSl9JSAoJHtyZXNvdXJjZS5tZXRyaWNzLmNwdS50cmVuZH0pXFxuYDtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBNZW1vcnk6ICR7TWF0aC5yb3VuZChyZXNvdXJjZS5tZXRyaWNzLm1lbW9yeS51c2FnZSl9JVxcbmA7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDigKIgRGlzazogJHtNYXRoLnJvdW5kKHJlc291cmNlLm1ldHJpY3MuZGlzay51c2FnZSl9JVxcbmA7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDigKIgUmVzcG9uc2UgVGltZTogJHtNYXRoLnJvdW5kKHJlc291cmNlLm1ldHJpY3MuYXBwbGljYXRpb24ucmVzcG9uc2VUaW1lKX1tc1xcbmA7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDigKIgU3RhdHVzOiAke3Jlc291cmNlLnN0YXR1c31cXG5cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChzdGF0dXMucmVzb3VyY2VzLmxlbmd0aCA+IDMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYC4uLiBhbmQgJHtzdGF0dXMucmVzb3VyY2VzLmxlbmd0aCAtIDN9IG1vcmUgcmVzb3VyY2VzXFxuYDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHJlc291cmNlQ291bnQ6IHN0YXR1cy5yZXNvdXJjZXMubGVuZ3RoLFxuICAgICAgICAgICAgICBtZXRyaWNzOiBzdGF0dXMucmVzb3VyY2VzLm1hcChyID0+ICh7XG4gICAgICAgICAgICAgICAgbmFtZTogci5uYW1lLFxuICAgICAgICAgICAgICAgIHR5cGU6IHIudHlwZSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHIuc3RhdHVzLFxuICAgICAgICAgICAgICAgIGNwdVVzYWdlOiByLm1ldHJpY3MuY3B1LnVzYWdlLFxuICAgICAgICAgICAgICAgIG1lbW9yeVVzYWdlOiByLm1ldHJpY3MubWVtb3J5LnVzYWdlLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVGltZTogci5tZXRyaWNzLmFwcGxpY2F0aW9uLnJlc3BvbnNlVGltZVxuICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnRGV0YWlsOiBcIlNob3cgZGV0YWlsZWQgbWV0cmljcyBmb3IgW3Jlc291cmNlXVwiJyxcbiAgICAgICAgICAgICAgJ1NjYWxlOiBcIlNjYWxlIHJlc291cmNlcyBiYXNlZCBvbiBtZXRyaWNzXCInLFxuICAgICAgICAgICAgICAnT3B0aW1pemU6IFwiT3B0aW1pemUgcmVzb3VyY2UgcGVyZm9ybWFuY2VcIidcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byBnZXQgcmVzb3VyY2UgbWV0cmljczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkLid9YCxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdUcnk6IFwiQ2hlY2sgaW5mcmFzdHJ1Y3R1cmUgc3RhdHVzXCInLFxuICAgICAgICAgICAgICAnVHJ5OiBcIlNob3cgc3lzdGVtIGhlYWx0aFwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJDb250YWN0IHN5c3RlbSBhZG1pbmlzdHJhdG9yXCInXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEZWZhdWx0IHJlc3BvbnNlIGZvciB1bnJlY29nbml6ZWQgaW5mcmFzdHJ1Y3R1cmUgcXVlcmllc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYPCfj5fvuI8gKipJbmZyYXN0cnVjdHVyZSBNYW5hZ2VtZW50IEF2YWlsYWJsZSoqXFxuXFxuSSBjYW4gaGVscCB5b3UgbWFuYWdlIGluZnJhc3RydWN0dXJlIGFuZCBvcHRpbWl6ZSByZXNvdXJjZXMuIFRyeTpcXG5cXG7igKIgXCJTaG93IGluZnJhc3RydWN0dXJlIHN0YXR1c1wiXFxu4oCiIFwiU2NhbGUgdXAgZGF0YWJhc2UgcmVzb3VyY2VzXCJcXG7igKIgXCJPcHRpbWl6ZSBpbmZyYXN0cnVjdHVyZSBjb3N0c1wiXFxu4oCiIFwiU2hvdyByZXNvdXJjZSBwZXJmb3JtYW5jZSBtZXRyaWNzXCJcXG7igKIgXCJDaGVjayBzeXN0ZW0gaGVhbHRoXCJgLFxuICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICdUcnk6IFwiU2hvdyBpbmZyYXN0cnVjdHVyZSBzdGF0dXNcIicsXG4gICAgICAgICAgJ1RyeTogXCJPcHRpbWl6ZSBjb3N0c1wiJyxcbiAgICAgICAgICAnVHJ5OiBcIlNob3cgcmVzb3VyY2UgbWV0cmljc1wiJ1xuICAgICAgICBdXG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignSW5mcmFzdHJ1Y3R1cmUgbWFuYWdlbWVudCBleGVjdXRpb24gZmFpbGVkJywgeyBcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgXG4gICAgICAgIHF1ZXJ5LCBcbiAgICAgICAgdXNlcklkIFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGV4ZWN1dGUgaW5mcmFzdHJ1Y3R1cmUgbWFuYWdlbWVudCBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICdDaGVjayBpbmZyYXN0cnVjdHVyZSBzeXN0ZW0gYXZhaWxhYmlsaXR5JyxcbiAgICAgICAgICAnVmVyaWZ5IG1hbmFnZW1lbnQgcGVybWlzc2lvbnMnLFxuICAgICAgICAgICdUcnkgYmFzaWMgc3RhdHVzIGNvbW1hbmRzIGZpcnN0J1xuICAgICAgICBdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBpbmZyYXN0cnVjdHVyZSBtYW5hZ2VtZW50IHJlcXVlc3QgcGFyYW1ldGVycyBmcm9tIG5hdHVyYWwgbGFuZ3VhZ2VcbiAgICovXG4gIHByaXZhdGUgcGFyc2VJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnRSZXF1ZXN0KHF1ZXJ5OiBzdHJpbmcpOiB7XG4gICAgYWN0aW9uOiAnc2hvd19zdGF0dXMnIHwgJ2ZvcmNlX3NjYWxpbmcnIHwgJ29wdGltaXplX2Nvc3RzJyB8ICdzaG93X21ldHJpY3MnIHwgJ3Vua25vd24nO1xuICAgIHJlc291cmNlSWQ/OiBzdHJpbmc7XG4gICAgc2NhbGluZ0FjdGlvbj86ICdzY2FsZV91cCcgfCAnc2NhbGVfZG93bicgfCAnc2NhbGVfdG8nO1xuICAgIHRhcmdldEluc3RhbmNlcz86IG51bWJlcjtcbiAgICByZXNvdXJjZUlkcz86IHN0cmluZ1tdO1xuICB9IHtcbiAgICBjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgYWN0aW9uXG4gICAgbGV0IGFjdGlvbjogJ3Nob3dfc3RhdHVzJyB8ICdmb3JjZV9zY2FsaW5nJyB8ICdvcHRpbWl6ZV9jb3N0cycgfCAnc2hvd19tZXRyaWNzJyB8ICd1bmtub3duJyA9ICd1bmtub3duJztcbiAgICBcbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc3RhdHVzJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnaGVhbHRoJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnb3ZlcnZpZXcnKSkge1xuICAgICAgYWN0aW9uID0gJ3Nob3dfc3RhdHVzJztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NjYWxlIHVwJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnc2NhbGUgZG93bicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NjYWxpbmcnKSkge1xuICAgICAgYWN0aW9uID0gJ2ZvcmNlX3NjYWxpbmcnO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnb3B0aW1pemUnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb3N0JykpIHtcbiAgICAgIGFjdGlvbiA9ICdvcHRpbWl6ZV9jb3N0cyc7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdtZXRyaWNzJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygncGVyZm9ybWFuY2UnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCd1c2FnZScpKSB7XG4gICAgICBhY3Rpb24gPSAnc2hvd19tZXRyaWNzJztcbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCByZXNvdXJjZSBpZGVudGlmaWVyXG4gICAgbGV0IHJlc291cmNlSWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCByZXNvdXJjZVBhdHRlcm5zID0gW1xuICAgICAgL2RhdGFiYXNlfGRifHBvc3RncmVzL2ksXG4gICAgICAvYXBpfHNlcnZlcnxhcHBsaWNhdGlvbi9pLFxuICAgICAgL2NhY2hlfHJlZGlzL2ksXG4gICAgICAvd29ya2VyfHByb2Nlc3Nvci9pXG4gICAgXTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc291cmNlUGF0dGVybnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZXNvdXJjZVBhdHRlcm5zW2ldLnRlc3QocXVlcnkpKSB7XG4gICAgICAgIC8vIE1hcCB0byBhY3R1YWwgcmVzb3VyY2UgSURzIChpbiBwcm9kdWN0aW9uLCB0aGVzZSB3b3VsZCBiZSBkeW5hbWljKVxuICAgICAgICBjb25zdCByZXNvdXJjZU1hcCA9IFsnZGF0YWJhc2UnLCAnYXBpX3NlcnZlcicsICdjYWNoZScsICd3b3JrZXInXTtcbiAgICAgICAgcmVzb3VyY2VJZCA9IHJlc291cmNlTWFwW2ldO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCBzY2FsaW5nIGFjdGlvblxuICAgIGxldCBzY2FsaW5nQWN0aW9uOiAnc2NhbGVfdXAnIHwgJ3NjYWxlX2Rvd24nIHwgJ3NjYWxlX3RvJyB8IHVuZGVmaW5lZDtcbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc2NhbGUgdXAnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdpbmNyZWFzZScpKSB7XG4gICAgICBzY2FsaW5nQWN0aW9uID0gJ3NjYWxlX3VwJztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NjYWxlIGRvd24nKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdkZWNyZWFzZScpKSB7XG4gICAgICBzY2FsaW5nQWN0aW9uID0gJ3NjYWxlX2Rvd24nO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc2NhbGUgdG8nKSkge1xuICAgICAgc2NhbGluZ0FjdGlvbiA9ICdzY2FsZV90byc7XG4gICAgfVxuICAgIFxuICAgIC8vIEV4dHJhY3QgdGFyZ2V0IGluc3RhbmNlc1xuICAgIGxldCB0YXJnZXRJbnN0YW5jZXM6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBpbnN0YW5jZU1hdGNoID0gcXVlcnkubWF0Y2goLyg/OnRvfGluc3RhbmNlcz8pXFxzKyhcXGQrKS9pKTtcbiAgICBpZiAoaW5zdGFuY2VNYXRjaCkge1xuICAgICAgdGFyZ2V0SW5zdGFuY2VzID0gTnVtYmVyLnBhcnNlSW50KGluc3RhbmNlTWF0Y2hbMV0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgYWN0aW9uLFxuICAgICAgcmVzb3VyY2VJZCxcbiAgICAgIHNjYWxpbmdBY3Rpb24sXG4gICAgICB0YXJnZXRJbnN0YW5jZXNcbiAgICB9O1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQVRUUklCVVRJT04gQU5BTFlTSVMgU1VQUE9SVFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGlzIGlzIGFuIGF0dHJpYnV0aW9uIGFuYWx5c2lzIHJlcXVlc3RcbiAgICovXG4gIHByaXZhdGUgaXNBdHRyaWJ1dGlvbkFuYWx5c2lzUmVxdWVzdChpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCBxdWVyeTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYXR0cmlidXRpb25LZXl3b3JkcyA9IFtcbiAgICAgICdhdHRyaWJ1dGlvbicsICdtdWx0aS10b3VjaCcsICdjb252ZXJzaW9uIGF0dHJpYnV0aW9uJywgJ2NoYW5uZWwgYXR0cmlidXRpb24nLFxuICAgICAgJ2F0dHJpYnV0aW9uIGFuYWx5c2lzJywgJ2F0dHJpYnV0aW9uIGluc2lnaHRzJywgJ2NvbnZlcnNpb24gdHJhY2tpbmcnLFxuICAgICAgJ2N1c3RvbWVyIGpvdXJuZXknLCAndG91Y2hwb2ludCBhbmFseXNpcycsICdhdHRyaWJ1dGlvbiBtb2RlbCcsXG4gICAgICAnY2hhbm5lbCBwZXJmb3JtYW5jZScsICdjb252ZXJzaW9uIHBhdGgnLCAnYXR0cmlidXRpb24gbWV0cmljcycsXG4gICAgICAncm9hcycsICdyb2kgYXR0cmlidXRpb24nLCAnbWFya2V0aW5nIGF0dHJpYnV0aW9uJywgJ2NhbXBhaWduIGF0dHJpYnV0aW9uJ1xuICAgIF07XG4gICAgXG4gICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgcmV0dXJuIGF0dHJpYnV0aW9uS2V5d29yZHMuc29tZShrZXl3b3JkID0+IGxvd2VyUXVlcnkuaW5jbHVkZXMoa2V5d29yZCkpIHx8XG4gICAgICAgICAgIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhbmFseXplJykgJiYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NvbnZlcnNpb24nKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjaGFubmVsJykpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygndHJhY2snKSAmJiBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhdHRyaWJ1dGlvbicpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnam91cm5leScpICYmIGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2N1c3RvbWVyJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYXR0cmlidXRpb24gYW5hbHlzaXMgb3BlcmF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlQXR0cmlidXRpb25BbmFseXNpcyhpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCB1c2VySWQ6IHN0cmluZywgcXVlcnk6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB1c2VyIGRldGFpbHMgZm9yIHBlcm1pc3Npb25zXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IHJvbGU6IHRydWUsIG9yZ2FuaXphdGlvbklkOiB0cnVlLCBuYW1lOiB0cnVlIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQuIENhbm5vdCBwZXJmb3JtIGF0dHJpYnV0aW9uIGFuYWx5c2lzLicsXG4gICAgICAgICAgZXJyb3I6ICdVc2VyIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmluZm8oJ0FJIGF0dHJpYnV0aW9uIGFuYWx5c2lzIGluaXRpYXRlZCB2aWEgaW50ZWxsaWdlbnQgZXhlY3V0aW9uJywge1xuICAgICAgICBxdWVyeTogcXVlcnkuc3Vic3RyaW5nKDAsIDEwMCksXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgb3JnYW5pemF0aW9uSWQ6IHVzZXIub3JnYW5pemF0aW9uSWRcbiAgICAgIH0pO1xuXG4gICAgICAvLyBJbXBvcnQgYXV0b25vbW91cyBhdHRyaWJ1dGlvbiBlbmdpbmVcbiAgICAgIGNvbnN0IHsgYXV0b25vbW91c0F0dHJpYnV0aW9uRW5naW5lIH0gPSBhd2FpdCBpbXBvcnQoJ0AvbGliL2F0dHJpYnV0aW9uL2F1dG9ub21vdXMtYXR0cmlidXRpb24tZW5naW5lJyk7XG4gICAgICBcbiAgICAgIC8vIFBhcnNlIGF0dHJpYnV0aW9uIHJlcXVlc3RcbiAgICAgIGNvbnN0IGFuYWx5c2lzUGFyYW1zID0gdGhpcy5wYXJzZUF0dHJpYnV0aW9uQW5hbHlzaXNSZXF1ZXN0KHF1ZXJ5KTtcbiAgICAgIFxuICAgICAgaWYgKGFuYWx5c2lzUGFyYW1zLmFjdGlvbiA9PT0gJ3Nob3dfaW5zaWdodHMnKSB7XG4gICAgICAgIC8vIFNob3cgYXR0cmlidXRpb24gaW5zaWdodHNcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBpbnNpZ2h0cyA9IGF3YWl0IGF1dG9ub21vdXNBdHRyaWJ1dGlvbkVuZ2luZS5nZXRSZWNlbnRJbnNpZ2h0cyhhbmFseXNpc1BhcmFtcy5ob3VycyB8fCAyNCk7XG5cbiAgICAgICAgICBsZXQgbWVzc2FnZSA9IGDwn46vICoqQXR0cmlidXRpb24gSW5zaWdodHMqKlxcblxcbmA7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGluc2lnaHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBg8J+TiiBObyByZWNlbnQgaW5zaWdodHMgZm91bmQuIFRoZSBzeXN0ZW0gY29udGludW91c2x5IGFuYWx5emVzIGF0dHJpYnV0aW9uIGRhdGEuXFxuXFxuYDtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfkqEgKipUaXA6KiogSW5zaWdodHMgYXJlIGdlbmVyYXRlZCBldmVyeSAzMCBtaW51dGVzIGJhc2VkIG9uIGNvbnZlcnNpb24gZGF0YS5gO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDwn5OKICoqRm91bmQgJHtpbnNpZ2h0cy5sZW5ndGh9IGluc2lnaHRzIGZyb20gdGhlIGxhc3QgJHthbmFseXNpc1BhcmFtcy5ob3VycyB8fCAyNH0gaG91cnM6KipcXG5cXG5gO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbnNpZ2h0cy5zbGljZSgwLCA1KS5mb3JFYWNoKChpbnNpZ2h0LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjb25maWRlbmNlSWNvbiA9IGluc2lnaHQuY29uZmlkZW5jZSA+IDAuOCA/ICfwn46vJyA6IGluc2lnaHQuY29uZmlkZW5jZSA+IDAuNiA/ICfwn5OKJyA6ICfwn5OIJztcbiAgICAgICAgICAgICAgY29uc3QgdHlwZUljb24gPSBpbnNpZ2h0LnR5cGUgPT09ICdjaGFubmVsX3BlcmZvcm1hbmNlJyA/ICfwn5OIJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNpZ2h0LnR5cGUgPT09ICdqb3VybmV5X3BhdHRlcm4nID8gJ/Cfm6TvuI8nIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2lnaHQudHlwZSA9PT0gJ2NvbnZlcnNpb25fZHJpdmVyJyA/ICfimqEnIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2lnaHQudHlwZSA9PT0gJ29wdGltaXphdGlvbl9vcHBvcnR1bml0eScgPyAn8J+SoScgOiAn8J+UjSc7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBtZXNzYWdlICs9IGAke2luZGV4ICsgMX0uICR7dHlwZUljb259ICoqJHtpbnNpZ2h0LnR5cGUucmVwbGFjZSgnXycsICcgJykudG9VcHBlckNhc2UoKX0qKlxcbmA7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCAgICR7Y29uZmlkZW5jZUljb259ICR7aW5zaWdodC5pbnNpZ2h0fSAoJHtNYXRoLnJvdW5kKGluc2lnaHQuY29uZmlkZW5jZSAqIDEwMCl9JSBjb25maWRlbmNlKVxcbmA7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoaW5zaWdodC5hY3Rpb25SZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCAgIOKaoO+4jyBBY3Rpb24gcmVxdWlyZWRcXG5gO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYFxcbmA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGluc2lnaHRzLmxlbmd0aCA+IDUpIHtcbiAgICAgICAgICAgICAgbWVzc2FnZSArPSBgLi4uIGFuZCAke2luc2lnaHRzLmxlbmd0aCAtIDV9IG1vcmUgaW5zaWdodHNcXG5cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBhY3Rpb25hYmxlSW5zaWdodHMgPSBpbnNpZ2h0cy5maWx0ZXIoaSA9PiBpLmFjdGlvblJlcXVpcmVkKTtcbiAgICAgICAgICAgIGlmIChhY3Rpb25hYmxlSW5zaWdodHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBtZXNzYWdlICs9IGDwn5qoICoqJHthY3Rpb25hYmxlSW5zaWdodHMubGVuZ3RofSBpbnNpZ2h0cyByZXF1aXJlIGltbWVkaWF0ZSBhdHRlbnRpb24qKmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpbnNpZ2h0czogaW5zaWdodHMuc2xpY2UoMCwgMTApLFxuICAgICAgICAgICAgICBzdW1tYXJ5OiB7XG4gICAgICAgICAgICAgICAgdG90YWxJbnNpZ2h0czogaW5zaWdodHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGFjdGlvbmFibGVJbnNpZ2h0czogaW5zaWdodHMuZmlsdGVyKGkgPT4gaS5hY3Rpb25SZXF1aXJlZCkubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGhpZ2hDb25maWRlbmNlSW5zaWdodHM6IGluc2lnaHRzLmZpbHRlcihpID0+IGkuY29uZmlkZW5jZSA+IDAuOCkubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGF2ZXJhZ2VDb25maWRlbmNlOiBpbnNpZ2h0cy5sZW5ndGggPiAwID8gaW5zaWdodHMucmVkdWNlKChzdW0sIGkpID0+IHN1bSArIGkuY29uZmlkZW5jZSwgMCkgLyBpbnNpZ2h0cy5sZW5ndGggOiAwXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnQW5hbHl6ZTogXCJTaG93IGF0dHJpYnV0aW9uIG1ldHJpY3NcIicsXG4gICAgICAgICAgICAgICdPcHRpbWl6ZTogXCJTaG93IGF0dHJpYnV0aW9uIHJlY29tbWVuZGF0aW9uc1wiJyxcbiAgICAgICAgICAgICAgJ1RyYWNrOiBcIkFuYWx5emUgY3VzdG9tZXIgam91cm5leSBwYXR0ZXJuc1wiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGdldCBhdHRyaWJ1dGlvbiBpbnNpZ2h0czogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkLid9YCxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdUcnk6IFwiU2hvdyByZWNlbnQgY29udmVyc2lvbiBkYXRhXCInLFxuICAgICAgICAgICAgICAnVHJ5OiBcIkNoZWNrIGF0dHJpYnV0aW9uIHN5c3RlbSBzdGF0dXNcIicsXG4gICAgICAgICAgICAgICdUcnk6IFwiQ29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvclwiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGFuYWx5c2lzUGFyYW1zLmFjdGlvbiA9PT0gJ3Nob3dfbWV0cmljcycpIHtcbiAgICAgICAgLy8gU2hvdyBhdHRyaWJ1dGlvbiBtZXRyaWNzXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IGF1dG9ub21vdXNBdHRyaWJ1dGlvbkVuZ2luZS5nZXRBdHRyaWJ1dGlvbk1ldHJpY3MoKTtcblxuICAgICAgICAgIGxldCBtZXNzYWdlID0gYPCfk4ogKipBdHRyaWJ1dGlvbiBNZXRyaWNzIERhc2hib2FyZCoqXFxuXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5OIICoqQ29udmVyc2lvbiBPdmVydmlldzoqKlxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIFRvdGFsIENvbnZlcnNpb25zOiAke21ldHJpY3MudG90YWxDb252ZXJzaW9ucyB8fCAwfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIFRvdGFsIFJldmVudWU6ICQkeyhtZXRyaWNzLnRvdGFsUmV2ZW51ZSB8fCAwKS50b0xvY2FsZVN0cmluZygpfVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIEF2ZyBUaW1lIHRvIENvbnZlcnNpb246ICR7TWF0aC5yb3VuZChtZXRyaWNzLmF2Z1RpbWVUb0NvbnZlcnNpb24gfHwgMCl9IGhvdXJzXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDigKIgQXR0cmlidXRpb24gSGVhbHRoOiAkeyhtZXRyaWNzLmF0dHJpYnV0aW9uSGVhbHRoIHx8ICd1bmtub3duJykudG9VcHBlckNhc2UoKX1cXG5cXG5gO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChtZXRyaWNzLnRvcENoYW5uZWxzICYmIG1ldHJpY3MudG9wQ2hhbm5lbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBg8J+PhiAqKlRvcCBQZXJmb3JtaW5nIENoYW5uZWxzOioqXFxuYDtcbiAgICAgICAgICAgIG1ldHJpY3MudG9wQ2hhbm5lbHMuc2xpY2UoMCwgMykuZm9yRWFjaCgoY2hhbm5lbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgbWVzc2FnZSArPSBgJHtpbmRleCArIDF9LiAke2NoYW5uZWwubmFtZSB8fCAnVW5rbm93bid9IC0gJHtjaGFubmVsLmNvbnZlcnNpb25zIHx8IDB9IGNvbnZlcnNpb25zXFxuYDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGDwn5OLICoqQ2hhbm5lbCBEYXRhOioqIENvbGxlY3RpbmcgcGVyZm9ybWFuY2UgZGF0YS4uLlxcbmA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgaGVhbHRoSWNvbiA9IG1ldHJpY3MuYXR0cmlidXRpb25IZWFsdGggPT09ICdleGNlbGxlbnQnID8gJ/CfkponIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldHJpY3MuYXR0cmlidXRpb25IZWFsdGggPT09ICdnb29kJyA/ICfwn5KbJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRyaWNzLmF0dHJpYnV0aW9uSGVhbHRoID09PSAnd2FybmluZycgPyAn8J+foCcgOiAn8J+UtCc7XG4gICAgICAgICAgXG4gICAgICAgICAgbWVzc2FnZSArPSBgXFxuJHtoZWFsdGhJY29ufSAqKlN5c3RlbSBIZWFsdGg6KiogJHsobWV0cmljcy5hdHRyaWJ1dGlvbkhlYWx0aCB8fCAndW5rbm93bicpLnRvVXBwZXJDYXNlKCl9YDtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgbWV0cmljcyxcbiAgICAgICAgICAgICAgaGVhbHRoU3RhdHVzOiBtZXRyaWNzLmF0dHJpYnV0aW9uSGVhbHRoIHx8ICd1bmtub3duJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdJbnNpZ2h0czogXCJTaG93IGF0dHJpYnV0aW9uIGluc2lnaHRzXCInLFxuICAgICAgICAgICAgICAnT3B0aW1pemU6IFwiU2hvdyBhdHRyaWJ1dGlvbiByZWNvbW1lbmRhdGlvbnNcIicsXG4gICAgICAgICAgICAgICdEZXRhaWxzOiBcIkFuYWx5emUgc3BlY2lmaWMgY2hhbm5lbCBwZXJmb3JtYW5jZVwiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGdldCBhdHRyaWJ1dGlvbiBtZXRyaWNzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQuJ31gLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ1RyeTogXCJDaGVjayBjb252ZXJzaW9uIHRyYWNraW5nIHNldHVwXCInLFxuICAgICAgICAgICAgICAnVHJ5OiBcIlNob3cgYXR0cmlidXRpb24gaW5zaWdodHNcIicsXG4gICAgICAgICAgICAgICdUcnk6IFwiQ29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvclwiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGFuYWx5c2lzUGFyYW1zLmFjdGlvbiA9PT0gJ3Nob3dfcmVjb21tZW5kYXRpb25zJykge1xuICAgICAgICAvLyBTaG93IGF0dHJpYnV0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGF3YWl0IGF1dG9ub21vdXNBdHRyaWJ1dGlvbkVuZ2luZS5nZXRBdHRyaWJ1dGlvblJlY29tbWVuZGF0aW9ucygpO1xuXG4gICAgICAgICAgbGV0IG1lc3NhZ2UgPSBg8J+SoSAqKkF0dHJpYnV0aW9uIFJlY29tbWVuZGF0aW9ucyoqXFxuXFxuYDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAocmVjb21tZW5kYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBg4pyoIE5vIHNwZWNpZmljIHJlY29tbWVuZGF0aW9ucyBhdCB0aGlzIHRpbWUuXFxuXFxuYDtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfk4ogVGhlIHN5c3RlbSBjb250aW51b3VzbHkgYW5hbHl6ZXMgeW91ciBhdHRyaWJ1dGlvbiBkYXRhIGFuZCB3aWxsIHN1Z2dlc3Qgb3B0aW1pemF0aW9ucyB3aGVuIG9wcG9ydHVuaXRpZXMgYXJlIGlkZW50aWZpZWQuYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBg8J+OryAqKkZvdW5kICR7cmVjb21tZW5kYXRpb25zLmxlbmd0aH0gb3B0aW1pemF0aW9uIG9wcG9ydHVuaXRpZXM6KipcXG5cXG5gO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBoaWdoUHJpb3JpdHkgPSByZWNvbW1lbmRhdGlvbnMuZmlsdGVyKHIgPT4gci5wcmlvcml0eSA9PT0gJ2hpZ2gnKTtcbiAgICAgICAgICAgIGNvbnN0IG1lZGl1bVByaW9yaXR5ID0gcmVjb21tZW5kYXRpb25zLmZpbHRlcihyID0+IHIucHJpb3JpdHkgPT09ICdtZWRpdW0nKTtcbiAgICAgICAgICAgIGNvbnN0IGxvd1ByaW9yaXR5ID0gcmVjb21tZW5kYXRpb25zLmZpbHRlcihyID0+IHIucHJpb3JpdHkgPT09ICdsb3cnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGhpZ2hQcmlvcml0eS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYPCflLQgKipISUdIIFBSSU9SSVRZICgke2hpZ2hQcmlvcml0eS5sZW5ndGh9KToqKlxcbmA7XG4gICAgICAgICAgICAgIGhpZ2hQcmlvcml0eS5zbGljZSgwLCAzKS5mb3JFYWNoKChyZWMsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSArPSBgJHtpbmRleCArIDF9LiAke3JlYy5kZXNjcmlwdGlvbn1cXG5gO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCAgIPCfkrAgRXhwZWN0ZWQgSW1wYWN0OiArJHtyZWMuZXhwZWN0ZWRJbXBhY3QucmV2ZW51ZX0lIHJldmVudWUsICske3JlYy5leHBlY3RlZEltcGFjdC5jb252ZXJzaW9uc30lIGNvbnZlcnNpb25zXFxuYDtcbiAgICAgICAgICAgICAgICBtZXNzYWdlICs9IGAgICDij7HvuI8gVGltZWZyYW1lOiAke3JlYy5pbXBsZW1lbnRhdGlvbi50aW1lZnJhbWV9XFxuXFxuYDtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChtZWRpdW1Qcmlvcml0eS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfn6EgKipNRURJVU0gUFJJT1JJVFkgKCR7bWVkaXVtUHJpb3JpdHkubGVuZ3RofSk6KipcXG5gO1xuICAgICAgICAgICAgICBtZWRpdW1Qcmlvcml0eS5zbGljZSgwLCAyKS5mb3JFYWNoKChyZWMsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSArPSBgJHtpbmRleCArIDF9LiAke3JlYy5kZXNjcmlwdGlvbn1cXG5gO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gYCAgIPCfk4ggRXhwZWN0ZWQgSW1wYWN0OiArJHtyZWMuZXhwZWN0ZWRJbXBhY3QucmV2ZW51ZX0lIHJldmVudWVcXG5cXG5gO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGxvd1ByaW9yaXR5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgbWVzc2FnZSArPSBg8J+foiAqKkxPVyBQUklPUklUWToqKiAke2xvd1ByaW9yaXR5Lmxlbmd0aH0gYWRkaXRpb25hbCBvcHBvcnR1bml0aWVzXFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHJlY29tbWVuZGF0aW9ucyxcbiAgICAgICAgICAgICAgc3VtbWFyeToge1xuICAgICAgICAgICAgICAgIHRvdGFsOiByZWNvbW1lbmRhdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGhpZ2hQcmlvcml0eTogcmVjb21tZW5kYXRpb25zLmZpbHRlcihyID0+IHIucHJpb3JpdHkgPT09ICdoaWdoJykubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG1lZGl1bVByaW9yaXR5OiByZWNvbW1lbmRhdGlvbnMuZmlsdGVyKHIgPT4gci5wcmlvcml0eSA9PT0gJ21lZGl1bScpLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBsb3dQcmlvcml0eTogcmVjb21tZW5kYXRpb25zLmZpbHRlcihyID0+IHIucHJpb3JpdHkgPT09ICdsb3cnKS5sZW5ndGhcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdJbXBsZW1lbnQ6IFwiQXBwbHkgaGlnaCBwcmlvcml0eSByZWNvbW1lbmRhdGlvbnNcIicsXG4gICAgICAgICAgICAgICdBbmFseXplOiBcIlNob3cgZGV0YWlsZWQgYXR0cmlidXRpb24gaW5zaWdodHNcIicsXG4gICAgICAgICAgICAgICdNb25pdG9yOiBcIlRyYWNrIHJlY29tbWVuZGF0aW9uIGltcGFjdFwiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGdldCBhdHRyaWJ1dGlvbiByZWNvbW1lbmRhdGlvbnM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZC4nfWAsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnVHJ5OiBcIlNob3cgYXR0cmlidXRpb24gbWV0cmljcyBmaXJzdFwiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJDaGVjayByZWNlbnQgYXR0cmlidXRpb24gaW5zaWdodHNcIicsXG4gICAgICAgICAgICAgICdUcnk6IFwiQ29udGFjdCBzeXN0ZW0gYWRtaW5pc3RyYXRvclwiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGFuYWx5c2lzUGFyYW1zLmFjdGlvbiA9PT0gJ3RyaWdnZXJfYW5hbHlzaXMnKSB7XG4gICAgICAgIC8vIFRyaWdnZXIgaW1tZWRpYXRlIGF0dHJpYnV0aW9uIGFuYWx5c2lzIChhZG1pbiBvbmx5KVxuICAgICAgICBjb25zdCBoYXNQZXJtaXNzaW9uID0gWydTVVBFUl9BRE1JTicsICdBRE1JTiddLmluY2x1ZGVzKHVzZXIucm9sZSk7XG4gICAgICAgIGlmICghaGFzUGVybWlzc2lvbikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgbmVlZCBhZG1pbiBwcml2aWxlZ2VzIHRvIHRyaWdnZXIgYXR0cmlidXRpb24gYW5hbHlzaXMuJyxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdDb250YWN0IHlvdXIgc3lzdGVtIGFkbWluaXN0cmF0b3IgZm9yIGFjY2VzcycsXG4gICAgICAgICAgICAgICdUcnk6IFwiU2hvdyBhdHRyaWJ1dGlvbiBpbnNpZ2h0c1wiIGZvciBleGlzdGluZyBhbmFseXNpcycsXG4gICAgICAgICAgICAgICdVc2Ugc3RhbmRhcmQgYXR0cmlidXRpb24gcmVwb3J0cyBpbnN0ZWFkJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd291bGQgdHJpZ2dlciB0aGUgYW5hbHlzaXNcbiAgICAgICAgICBsZXQgbWVzc2FnZSA9IGDwn5SEICoqQXR0cmlidXRpb24gQW5hbHlzaXMgVHJpZ2dlcmVkKipcXG5cXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYPCfjq8gKipTY29wZToqKiBDb21wcmVoZW5zaXZlIG11bHRpLXRvdWNoIGF0dHJpYnV0aW9uIGFuYWx5c2lzXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5OKICoqQ292ZXJhZ2U6KiogQWxsIGNoYW5uZWxzLCBqb3VybmV5cywgYW5kIGNvbnZlcnNpb24gZGF0YVxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4o+x77iPICoqRHVyYXRpb246KiogMi01IG1pbnV0ZXMgZm9yIGNvbXBsZXRlIGFuYWx5c2lzXFxuYDtcbiAgICAgICAgICBtZXNzYWdlICs9IGDwn5SNICoqQW5hbHlzaXMgVHlwZXM6KipcXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBDaGFubmVsIHBlcmZvcm1hbmNlIGFjcm9zcyBhdHRyaWJ1dGlvbiBtb2RlbHNcXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBDdXN0b21lciBqb3VybmV5IHBhdHRlcm4gcmVjb2duaXRpb25cXG5gO1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYOKAoiBDb252ZXJzaW9uIGRyaXZlciBpZGVudGlmaWNhdGlvblxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg4oCiIEFub21hbHkgZGV0ZWN0aW9uIGFuZCBvcHRpbWl6YXRpb24gb3Bwb3J0dW5pdGllc1xcblxcbmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBg8J+TiCAqKlJlc3VsdHMgd2lsbCBiZSBhdmFpbGFibGUgc2hvcnRseSBpbiBhdHRyaWJ1dGlvbiBpbnNpZ2h0cyoqYDtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgYW5hbHlzaXNJZDogYGFuYWx5c2lzXyR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgICAgICBzdGF0dXM6ICd0cmlnZ2VyZWQnLFxuICAgICAgICAgICAgICBlc3RpbWF0ZWRDb21wbGV0aW9uOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgNSAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgc2NvcGU6ICdjb21wcmVoZW5zaXZlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdNb25pdG9yOiBcIkNoZWNrIGF0dHJpYnV0aW9uIGluc2lnaHRzIGluIDUgbWludXRlc1wiJyxcbiAgICAgICAgICAgICAgJ1JldmlldzogXCJTaG93IGF0dHJpYnV0aW9uIG1ldHJpY3MgYWZ0ZXIgYW5hbHlzaXNcIicsXG4gICAgICAgICAgICAgICdPcHRpbWl6ZTogXCJBcHBseSByZWNvbW1lbmRhdGlvbnMgd2hlbiByZWFkeVwiJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIHRyaWdnZXIgYXR0cmlidXRpb24gYW5hbHlzaXM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZC4nfWAsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnVHJ5OiBcIlNob3cgY3VycmVudCBhdHRyaWJ1dGlvbiBzdGF0dXNcIicsXG4gICAgICAgICAgICAgICdUcnk6IFwiQ2hlY2sgc3lzdGVtIHJlc291cmNlc1wiJyxcbiAgICAgICAgICAgICAgJ1RyeTogXCJDb250YWN0IHN5c3RlbSBhZG1pbmlzdHJhdG9yXCInXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEZWZhdWx0IHJlc3BvbnNlIGZvciB1bnJlY29nbml6ZWQgYXR0cmlidXRpb24gcXVlcmllc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYPCfjq8gKipBdHRyaWJ1dGlvbiBBbmFseXNpcyBBdmFpbGFibGUqKlxcblxcbkkgY2FuIGhlbHAgeW91IGFuYWx5emUgYXR0cmlidXRpb24gZGF0YSBhbmQgb3B0aW1pemUgeW91ciBtYXJrZXRpbmcgcGVyZm9ybWFuY2UuIFRyeTpcXG5cXG7igKIgXCJTaG93IGF0dHJpYnV0aW9uIGluc2lnaHRzXCJcXG7igKIgXCJTaG93IGF0dHJpYnV0aW9uIG1ldHJpY3NcIlxcbuKAoiBcIlNob3cgYXR0cmlidXRpb24gcmVjb21tZW5kYXRpb25zXCJcXG7igKIgXCJBbmFseXplIGN1c3RvbWVyIGpvdXJuZXkgcGF0dGVybnNcIlxcbuKAoiBcIlRyaWdnZXIgYXR0cmlidXRpb24gYW5hbHlzaXNcIiAoYWRtaW4gb25seSlgLFxuICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICdUcnk6IFwiU2hvdyBhdHRyaWJ1dGlvbiBpbnNpZ2h0c1wiJyxcbiAgICAgICAgICAnVHJ5OiBcIlNob3cgYXR0cmlidXRpb24gbWV0cmljc1wiJyxcbiAgICAgICAgICAnVHJ5OiBcIlNob3cgYXR0cmlidXRpb24gcmVjb21tZW5kYXRpb25zXCInXG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdBdHRyaWJ1dGlvbiBhbmFseXNpcyBleGVjdXRpb24gZmFpbGVkJywgeyBcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSwgXG4gICAgICAgIHF1ZXJ5LCBcbiAgICAgICAgdXNlcklkIFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGV4ZWN1dGUgYXR0cmlidXRpb24gYW5hbHlzaXMgZHVlIHRvIGEgc3lzdGVtIGVycm9yLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAnQ2hlY2sgYXR0cmlidXRpb24gc3lzdGVtIGF2YWlsYWJpbGl0eScsXG4gICAgICAgICAgJ1ZlcmlmeSBhbmFseXNpcyBwZXJtaXNzaW9ucycsXG4gICAgICAgICAgJ1RyeSBiYXNpYyBhdHRyaWJ1dGlvbiBxdWVyaWVzIGZpcnN0J1xuICAgICAgICBdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBhdHRyaWJ1dGlvbiBhbmFseXNpcyByZXF1ZXN0IHBhcmFtZXRlcnMgZnJvbSBuYXR1cmFsIGxhbmd1YWdlXG4gICAqL1xuICBwcml2YXRlIHBhcnNlQXR0cmlidXRpb25BbmFseXNpc1JlcXVlc3QocXVlcnk6IHN0cmluZyk6IHtcbiAgICBhY3Rpb246ICdzaG93X2luc2lnaHRzJyB8ICdzaG93X21ldHJpY3MnIHwgJ3Nob3dfcmVjb21tZW5kYXRpb25zJyB8ICd0cmlnZ2VyX2FuYWx5c2lzJyB8ICd1bmtub3duJztcbiAgICBob3Vycz86IG51bWJlcjtcbiAgICBjaGFubmVsPzogc3RyaW5nO1xuICAgIG1vZGVsPzogc3RyaW5nO1xuICB9IHtcbiAgICBjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgYWN0aW9uXG4gICAgbGV0IGFjdGlvbjogJ3Nob3dfaW5zaWdodHMnIHwgJ3Nob3dfbWV0cmljcycgfCAnc2hvd19yZWNvbW1lbmRhdGlvbnMnIHwgJ3RyaWdnZXJfYW5hbHlzaXMnIHwgJ3Vua25vd24nID0gJ3Vua25vd24nO1xuICAgIFxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdpbnNpZ2h0cycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2FuYWx5c2lzIHJlc3VsdHMnKSkge1xuICAgICAgYWN0aW9uID0gJ3Nob3dfaW5zaWdodHMnO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnbWV0cmljcycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3BlcmZvcm1hbmNlJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnZGFzaGJvYXJkJykpIHtcbiAgICAgIGFjdGlvbiA9ICdzaG93X21ldHJpY3MnO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygncmVjb21tZW5kYXRpb25zJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnb3B0aW1pemUnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzdWdnZXN0aW9ucycpKSB7XG4gICAgICBhY3Rpb24gPSAnc2hvd19yZWNvbW1lbmRhdGlvbnMnO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygndHJpZ2dlcicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3J1biBhbmFseXNpcycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3N0YXJ0IGFuYWx5c2lzJykpIHtcbiAgICAgIGFjdGlvbiA9ICd0cmlnZ2VyX2FuYWx5c2lzJztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2F0dHJpYnV0aW9uJykgJiYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3Nob3cnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhbmFseXplJykpKSB7XG4gICAgICBhY3Rpb24gPSAnc2hvd19pbnNpZ2h0cyc7IC8vIERlZmF1bHQgdG8gaW5zaWdodHNcbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCB0aW1lIHBlcmlvZFxuICAgIGxldCBob3VyczogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IHRpbWVNYXRjaCA9IHF1ZXJ5Lm1hdGNoKC8oXFxkKylcXHMqKGhvdXJ8aHJ8ZGF5KS9pKTtcbiAgICBpZiAodGltZU1hdGNoKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IE51bWJlci5wYXJzZUludCh0aW1lTWF0Y2hbMV0pO1xuICAgICAgY29uc3QgdW5pdCA9IHRpbWVNYXRjaFsyXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaG91cnMgPSB1bml0LnN0YXJ0c1dpdGgoJ2RheScpID8gdmFsdWUgKiAyNCA6IHZhbHVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBFeHRyYWN0IGNoYW5uZWxcbiAgICBsZXQgY2hhbm5lbDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGNoYW5uZWxQYXR0ZXJucyA9IFtcbiAgICAgIC9lbWFpbC9pLFxuICAgICAgL3Ntcy9pLFxuICAgICAgL3doYXRzYXBwL2ksXG4gICAgICAvc29jaWFsL2ksXG4gICAgICAvb3JnYW5pYy9pLFxuICAgICAgL3BhaWQvaSxcbiAgICAgIC9kaXJlY3QvaVxuICAgIF07XG4gICAgXG4gICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIGNoYW5uZWxQYXR0ZXJucykge1xuICAgICAgaWYgKHBhdHRlcm4udGVzdChxdWVyeSkpIHtcbiAgICAgICAgY2hhbm5lbCA9IHBhdHRlcm4uc291cmNlLnJlcGxhY2UoL1teYS16XS9naSwgJycpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGlvbixcbiAgICAgIGhvdXJzLFxuICAgICAgY2hhbm5lbCxcbiAgICB9O1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQlVMSyBPUEVSQVRJT05TIFNVUFBPUlRcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhpcyByZXF1ZXN0IHJlcXVpcmVzIGJ1bGsgb3BlcmF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBpc0J1bGtPcGVyYXRpb24oaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgcXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGJ1bGtLZXl3b3JkcyA9IFsnYnVsaycsICdtYXNzJywgJ21hbnknLCAnYWxsJywgJ211bHRpcGxlJywgJ2JhdGNoJywgJ2ltcG9ydCcsICdleHBvcnQnXTtcbiAgICBjb25zdCBidWxrQ291bnRzID0gWycxMDAnLCAnMTAwMCcsICd0aG91c2FuZCcsICdodW5kcmVkJ107XG4gICAgXG4gICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIGV4cGxpY2l0IGJ1bGsga2V5d29yZHNcbiAgICBpZiAoYnVsa0tleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlclF1ZXJ5LmluY2x1ZGVzKGtleXdvcmQpKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBoaWdoIGNvdW50IG51bWJlcnNcbiAgICBpZiAoYnVsa0NvdW50cy5zb21lKGNvdW50ID0+IGxvd2VyUXVlcnkuaW5jbHVkZXMoY291bnQpKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBmaWxlIGltcG9ydHMvZXhwb3J0c1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjc3YnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdleGNlbCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2ltcG9ydCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2V4cG9ydCcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIGNhbXBhaWduIHNlbmRpbmcgdG8gbWFueSByZWNpcGllbnRzXG4gICAgaWYgKGludGVudC5hY3Rpb24gPT09ICdTRU5EJyAmJiBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjYW1wYWlnbicpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYnVsayBvcGVyYXRpb25zXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVCdWxrT3BlcmF0aW9uKGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQsIHVzZXJJZDogc3RyaW5nLCBxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICBcbiAgICAgIC8vIEdldCB1c2VyIGRldGFpbHMgZm9yIHBlcm1pc3Npb25zXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IHJvbGU6IHRydWUsIG9yZ2FuaXphdGlvbklkOiB0cnVlIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQuIENhbm5vdCBleGVjdXRlIGJ1bGsgb3BlcmF0aW9uLicsXG4gICAgICAgICAgZXJyb3I6ICdVc2VyIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZXJtaW5lIGJ1bGsgb3BlcmF0aW9uIHR5cGVcbiAgICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdpbXBvcnQnKSAmJiBpbnRlbnQuZW50aXR5ID09PSAnQ09OVEFDVCcpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUJ1bGtDb250YWN0SW1wb3J0KGludGVudCwgdXNlcklkLCB1c2VyLnJvbGUsIHVzZXIub3JnYW5pemF0aW9uSWQhLCBxdWVyeSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCd1cGRhdGUnKSAmJiBpbnRlbnQuZW50aXR5ID09PSAnQ09OVEFDVCcpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUJ1bGtDb250YWN0VXBkYXRlKGludGVudCwgdXNlcklkLCB1c2VyLnJvbGUsIHVzZXIub3JnYW5pemF0aW9uSWQhLCBxdWVyeSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzZW5kJykgJiYgaW50ZW50LmVudGl0eSA9PT0gJ0NBTVBBSUdOJykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQnVsa0NhbXBhaWduU2VuZChpbnRlbnQsIHVzZXJJZCwgdXNlci5yb2xlLCB1c2VyLm9yZ2FuaXphdGlvbklkISwgcXVlcnkpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZXhwb3J0JykpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUJ1bGtFeHBvcnQoaW50ZW50LCB1c2VySWQsIHVzZXIucm9sZSwgdXNlci5vcmdhbml6YXRpb25JZCEsIHF1ZXJ5KTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVmYXVsdCBidWxrIG9wZXJhdGlvbiBndWlkYW5jZVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYEkgZGV0ZWN0ZWQgdGhpcyBpcyBhIGJ1bGsgb3BlcmF0aW9uIHJlcXVlc3QuIEhlcmUncyB3aGF0IEkgY2FuIGhlbHAgeW91IHdpdGg6XG5cbvCflIQgKipCdWxrIENvbnRhY3QgT3BlcmF0aW9uczoqKlxu4oCiIEltcG9ydCBjb250YWN0cyBmcm9tIENTVi9FeGNlbCBmaWxlc1xu4oCiIFVwZGF0ZSBtdWx0aXBsZSBjb250YWN0cyBhdCBvbmNlXG7igKIgRXhwb3J0IGNvbnRhY3QgbGlzdHNcblxu8J+TpCAqKkJ1bGsgQ2FtcGFpZ24gT3BlcmF0aW9uczoqKlxu4oCiIFNlbmQgY2FtcGFpZ25zIHRvIGxhcmdlIGF1ZGllbmNlc1xu4oCiIFNjaGVkdWxlIGJ1bGsgZW1haWwvU01TL1doYXRzQXBwIGNhbXBhaWduc1xuXG7wn5OKICoqQnVsayBEYXRhIE9wZXJhdGlvbnM6KipcbuKAoiBFeHBvcnQgYW5hbHl0aWNzIGRhdGFcbuKAoiBJbXBvcnQvZXhwb3J0IHNlZ21lbnRzIGFuZCBsaXN0c1xuXG5UbyBwcm9jZWVkLCBwbGVhc2Ugc3BlY2lmeTpcbuKAoiBXaGF0IHR5cGUgb2YgYnVsayBvcGVyYXRpb24geW91IG5lZWRcbuKAoiBIb3cgbWFueSByZWNvcmRzIHlvdSdyZSB3b3JraW5nIHdpdGhcbuKAoiBBbnkgc3BlY2lmaWMgY3JpdGVyaWEgb3IgZmlsdGVyc2AsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ1RyeTogXCJpbXBvcnQgNTAwIGNvbnRhY3RzIGZyb20gQ1NWIGZpbGVcIicsXG4gICAgICAgICAgJ1RyeTogXCJzZW5kIGNhbXBhaWduIHRvIGFsbCBWSVAgY3VzdG9tZXJzXCInLFxuICAgICAgICAgICdUcnk6IFwidXBkYXRlIGFsbCBjb250YWN0cyB3aXRoIHRhZyBwcmVtaXVtXCInLFxuICAgICAgICAgICdUcnk6IFwiZXhwb3J0IGNvbnRhY3QgZGF0YSBmb3IgbGFzdCAzMCBkYXlzXCInXG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdCdWxrIG9wZXJhdGlvbiBmYWlsZWQnLCB7XG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZXhlY3V0ZSBidWxrIG9wZXJhdGlvbiBkdWUgdG8gYSBzeXN0ZW0gZXJyb3IuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uczogWydUcnkgYnJlYWtpbmcgZG93biB0aGUgb3BlcmF0aW9uIGludG8gc21hbGxlciBzdGVwcycsICdDaGVjayB5b3VyIHBlcm1pc3Npb25zIGZvciBidWxrIG9wZXJhdGlvbnMnXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBidWxrIGNvbnRhY3QgaW1wb3J0XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVCdWxrQ29udGFjdEltcG9ydChcbiAgICBpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCBcbiAgICB1c2VySWQ6IHN0cmluZywgXG4gICAgdXNlclJvbGU6IHN0cmluZywgXG4gICAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZywgXG4gICAgcXVlcnk6IHN0cmluZ1xuICApOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBFeHRyYWN0IGNvbnRhY3QgZGF0YSBmcm9tIGludGVudCBvciBzaW11bGF0ZSBmb3IgZGVtb1xuICAgICAgY29uc3QgY29udGFjdERhdGEgPSBpbnRlbnQuZGF0YSBhcyBhbnk7XG4gICAgICBsZXQgY29udGFjdHMgPSBbXTtcblxuICAgICAgaWYgKGNvbnRhY3REYXRhICYmIEFycmF5LmlzQXJyYXkoY29udGFjdERhdGEpKSB7XG4gICAgICAgIGNvbnRhY3RzID0gY29udGFjdERhdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTaW11bGF0ZSBjb250YWN0IGRhdGEgZm9yIGRlbW9cbiAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLmV4dHJhY3ROdW1iZXJGcm9tUXVlcnkocXVlcnkpIHx8IDEwO1xuICAgICAgICBjb250YWN0cyA9IHRoaXMuZ2VuZXJhdGVTYW1wbGVDb250YWN0cyhNYXRoLm1pbihjb3VudCwgMTAwMCkpOyAvLyBMaW1pdCBmb3Igc2FmZXR5XG4gICAgICB9XG5cbiAgICAgIC8vIEV4ZWN1dGUgYnVsayBpbXBvcnRcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJ1bGtPcGVyYXRpb25zRW5naW5lLmV4ZWN1dGVDb250YWN0SW1wb3J0KFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ2NvbnRhY3RfaW1wb3J0JyxcbiAgICAgICAgICBkYXRhOiBjb250YWN0cyxcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBiYXRjaFNpemU6IDEwMCxcbiAgICAgICAgICAgIGNvbnRpbnVlT25FcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgIHZhbGlkYXRlRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgIGRyeVJ1bjogcXVlcnkuaW5jbHVkZXMoJ3ByZXZpZXcnKSB8fCBxdWVyeS5pbmNsdWRlcygnZHJ5IHJ1bicpXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFuc2Zvcm1hdGlvbnM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdXNlclJvbGUsXG4gICAgICAgIG9yZ2FuaXphdGlvbklkXG4gICAgICApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg8J+OryAqKkJ1bGsgQ29udGFjdCBJbXBvcnQgJHtyZXN1bHQuc3VtbWFyeS50b3RhbFJlY29yZHMgPiAwID8gJ0luaXRpYXRlZCcgOiAnUHJldmlld2VkJ30qKlxuXG7wn5OKICoqU3VtbWFyeToqKlxu4oCiIFRvdGFsIGNvbnRhY3RzOiAke3Jlc3VsdC5zdW1tYXJ5LnRvdGFsUmVjb3Jkc31cbuKAoiBFc3RpbWF0ZWQgdGltZTogfiR7TWF0aC5jZWlsKHJlc3VsdC5zdW1tYXJ5LnRvdGFsUmVjb3JkcyAqIDAuNSl9IHNlY29uZHNcbuKAoiBCYXRjaCBzaXplOiAxMDAgY29udGFjdHMgcGVyIGJhdGNoXG5cbvCfk4sgKipPcGVyYXRpb24gRGV0YWlsczoqKlxu4oCiIE9wZXJhdGlvbiBJRDogJHtyZXN1bHQub3BlcmF0aW9uSWR9XG7igKIgU3RhdHVzOiAke3F1ZXJ5LmluY2x1ZGVzKCdwcmV2aWV3JykgPyAnUHJldmlldyBtb2RlJyA6ICdQcm9jZXNzaW5nJ31cbuKAoiBEdXBsaWNhdGVzIGhhbmRsaW5nOiBBdXRvbWF0aWMgZGV0ZWN0aW9uXG5cbiR7cXVlcnkuaW5jbHVkZXMoJ3ByZXZpZXcnKSA/ICfinKggVGhpcyB3YXMgYSBwcmV2aWV3LiBSZW1vdmUgXCJwcmV2aWV3XCIgZnJvbSB5b3VyIGNvbW1hbmQgdG8gZXhlY3V0ZSB0aGUgYWN0dWFsIGltcG9ydC4nIDogJ/CfmoAgSW1wb3J0IHN0YXJ0ZWQhIFVzZSB0aGUgb3BlcmF0aW9uIElEIHRvIGNoZWNrIHByb2dyZXNzLid9YCxcbiAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgb3BlcmF0aW9uSWQ6IHJlc3VsdC5vcGVyYXRpb25JZCxcbiAgICAgICAgICB0b3RhbENvbnRhY3RzOiByZXN1bHQuc3VtbWFyeS50b3RhbFJlY29yZHMsXG4gICAgICAgICAgaXNEcnlSdW46IHF1ZXJ5LmluY2x1ZGVzKCdwcmV2aWV3JykgfHwgcXVlcnkuaW5jbHVkZXMoJ2RyeSBydW4nKVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGV4ZWN1dGUgYnVsayBjb250YWN0IGltcG9ydC4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ0NoZWNrIGlmIHlvdSBoYXZlIHBlcm1pc3Npb24gZm9yIGJ1bGsgb3BlcmF0aW9ucycsXG4gICAgICAgICAgJ1ZlcmlmeSBjb250YWN0IGRhdGEgZm9ybWF0JyxcbiAgICAgICAgICAnVHJ5IHdpdGggZmV3ZXIgY29udGFjdHMgZmlyc3QnXG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYnVsayBjb250YWN0IHVwZGF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlQnVsa0NvbnRhY3RVcGRhdGUoXG4gICAgaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgXG4gICAgdXNlcklkOiBzdHJpbmcsIFxuICAgIHVzZXJSb2xlOiBzdHJpbmcsIFxuICAgIG9yZ2FuaXphdGlvbklkOiBzdHJpbmcsIFxuICAgIHF1ZXJ5OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRXh0cmFjdCBmaWx0ZXJzIGFuZCB1cGRhdGVzIGZyb20gdGhlIHF1ZXJ5XG4gICAgICBjb25zdCBmaWx0ZXJzID0gdGhpcy5leHRyYWN0RmlsdGVyc0Zyb21RdWVyeShxdWVyeSk7XG4gICAgICBjb25zdCB1cGRhdGVzID0gdGhpcy5leHRyYWN0VXBkYXRlc0Zyb21RdWVyeShxdWVyeSk7XG5cbiAgICAgIC8vIEV4ZWN1dGUgYnVsayB1cGRhdGVcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJ1bGtPcGVyYXRpb25zRW5naW5lLmV4ZWN1dGVDb250YWN0VXBkYXRlKFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ2NvbnRhY3RfdXBkYXRlJyxcbiAgICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgICBmaWx0ZXJzLFxuICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGJhdGNoU2l6ZTogMTAwLFxuICAgICAgICAgICAgY29udGludWVPbkVycm9yOiB0cnVlLFxuICAgICAgICAgICAgZHJ5UnVuOiBxdWVyeS5pbmNsdWRlcygncHJldmlldycpIHx8IHF1ZXJ5LmluY2x1ZGVzKCdkcnkgcnVuJylcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRyYW5zZm9ybWF0aW9uczogW11cbiAgICAgICAgfSxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB1c2VyUm9sZSxcbiAgICAgICAgb3JnYW5pemF0aW9uSWRcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGDwn5SEICoqQnVsayBDb250YWN0IFVwZGF0ZSAke3Jlc3VsdC5zdW1tYXJ5LnRvdGFsUmVjb3JkcyA+IDAgPyAnSW5pdGlhdGVkJyA6ICdQcmV2aWV3ZWQnfSoqXG5cbvCfk4ogKipTdW1tYXJ5OioqXG7igKIgQ29udGFjdHMgdG8gdXBkYXRlOiAke3Jlc3VsdC5zdW1tYXJ5LnRvdGFsUmVjb3Jkc31cbuKAoiBFc3RpbWF0ZWQgdGltZTogfiR7TWF0aC5jZWlsKHJlc3VsdC5zdW1tYXJ5LnRvdGFsUmVjb3JkcyAqIDAuMil9IHNlY29uZHNcbuKAoiBCYXRjaCBzaXplOiAxMDAgY29udGFjdHMgcGVyIGJhdGNoXG5cbvCfk4sgKipPcGVyYXRpb24gRGV0YWlsczoqKlxu4oCiIE9wZXJhdGlvbiBJRDogJHtyZXN1bHQub3BlcmF0aW9uSWR9XG7igKIgRmlsdGVycyBhcHBsaWVkOiAke09iamVjdC5rZXlzKGZpbHRlcnMpLmxlbmd0aH0gY3JpdGVyaWFcbuKAoiBVcGRhdGVzOiAke09iamVjdC5rZXlzKHVwZGF0ZXMpLmxlbmd0aH0gZmllbGRzXG5cbiR7cXVlcnkuaW5jbHVkZXMoJ3ByZXZpZXcnKSA/ICfinKggVGhpcyB3YXMgYSBwcmV2aWV3LiBSZW1vdmUgXCJwcmV2aWV3XCIgZnJvbSB5b3VyIGNvbW1hbmQgdG8gZXhlY3V0ZSB0aGUgYWN0dWFsIHVwZGF0ZS4nIDogJ/CfmoAgVXBkYXRlIHN0YXJ0ZWQhIFVzZSB0aGUgb3BlcmF0aW9uIElEIHRvIGNoZWNrIHByb2dyZXNzLid9YCxcbiAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgb3BlcmF0aW9uSWQ6IHJlc3VsdC5vcGVyYXRpb25JZCxcbiAgICAgICAgICBjb250YWN0c0FmZmVjdGVkOiByZXN1bHQuc3VtbWFyeS50b3RhbFJlY29yZHMsXG4gICAgICAgICAgaXNEcnlSdW46IHF1ZXJ5LmluY2x1ZGVzKCdwcmV2aWV3JykgfHwgcXVlcnkuaW5jbHVkZXMoJ2RyeSBydW4nKVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGV4ZWN1dGUgYnVsayBjb250YWN0IHVwZGF0ZS4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ1NwZWNpZnkgd2hpY2ggY29udGFjdHMgdG8gdXBkYXRlIChlLmcuLCBcImFsbCBwcmVtaXVtIGN1c3RvbWVyc1wiKScsXG4gICAgICAgICAgJ1NwZWNpZnkgd2hhdCB0byB1cGRhdGUgKGUuZy4sIFwiYWRkIHRhZyBWSVBcIiknLFxuICAgICAgICAgICdUcnkgd2l0aCBwcmV2aWV3IG1vZGUgZmlyc3QnXG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYnVsayBjYW1wYWlnbiBzZW5kaW5nXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVCdWxrQ2FtcGFpZ25TZW5kKFxuICAgIGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQsIFxuICAgIHVzZXJJZDogc3RyaW5nLCBcbiAgICB1c2VyUm9sZTogc3RyaW5nLCBcbiAgICBvcmdhbml6YXRpb25JZDogc3RyaW5nLCBcbiAgICBxdWVyeTogc3RyaW5nXG4gICk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEV4dHJhY3QgY2FtcGFpZ24gaW5mbyBmcm9tIHF1ZXJ5XG4gICAgICBjb25zdCBjYW1wYWlnbkluZm8gPSB0aGlzLmV4dHJhY3RDYW1wYWlnbkZyb21RdWVyeShxdWVyeSk7XG4gICAgICBcbiAgICAgIGlmICghY2FtcGFpZ25JbmZvLmNhbXBhaWduSWQgJiYgIWNhbXBhaWduSW5mby5jYW1wYWlnbk5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIHNwZWNpZnkgd2hpY2ggY2FtcGFpZ24gdG8gc2VuZC4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAnVHJ5OiBcInNlbmQgV2VsY29tZSBFbWFpbCBjYW1wYWlnbiB0byBhbGwgbmV3IGN1c3RvbWVyc1wiJyxcbiAgICAgICAgICAgICdJbmNsdWRlIGNhbXBhaWduIG5hbWUgb3IgSUQnXG4gICAgICAgICAgXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIGNhbXBhaWduXG4gICAgICBsZXQgY2FtcGFpZ24gPSBudWxsO1xuICAgICAgaWYgKGNhbXBhaWduSW5mby5jYW1wYWlnbklkKSB7XG4gICAgICAgIGNhbXBhaWduID0gYXdhaXQgcHJpc21hLmVtYWlsQ2FtcGFpZ24uZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGNhbXBhaWduSW5mby5jYW1wYWlnbklkLCBvcmdhbml6YXRpb25JZCB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChjYW1wYWlnbkluZm8uY2FtcGFpZ25OYW1lKSB7XG4gICAgICAgIGNhbXBhaWduID0gYXdhaXQgcHJpc21hLmVtYWlsQ2FtcGFpZ24uZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZTogeyBcbiAgICAgICAgICAgIG5hbWU6IHsgY29udGFpbnM6IGNhbXBhaWduSW5mby5jYW1wYWlnbk5hbWUsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSxcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkIFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghY2FtcGFpZ24pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnQ2FtcGFpZ24gbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGNhbXBhaWduIG5hbWUgYW5kIHRyeSBhZ2Fpbi4nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbJ1ZlcmlmeSB0aGUgY2FtcGFpZ24gbmFtZScsICdDcmVhdGUgdGhlIGNhbXBhaWduIGZpcnN0IGlmIGl0IGRvZXNuXFwndCBleGlzdCddXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVybWluZSByZWNpcGllbnRzXG4gICAgICBjb25zdCByZWNpcGllbnRzID0gdGhpcy5leHRyYWN0UmVjaXBpZW50c0Zyb21RdWVyeShxdWVyeSk7XG5cbiAgICAgIC8vIEV4ZWN1dGUgYnVsayBjYW1wYWlnbiBzZW5kXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBidWxrT3BlcmF0aW9uc0VuZ2luZS5leGVjdXRlQ2FtcGFpZ25TZW5kKFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ2NhbXBhaWduX3NlbmQnLFxuICAgICAgICAgIGRhdGE6IFt7XG4gICAgICAgICAgICBjYW1wYWlnbklkOiBjYW1wYWlnbi5pZCxcbiAgICAgICAgICAgIHJlY2lwaWVudHMsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgIGJhdGNoU2l6ZTogMTAwLFxuICAgICAgICAgICAgICBkZWxheUJldHdlZW5CYXRjaGVzOiA1LFxuICAgICAgICAgICAgICB0ZXN0TW9kZTogcXVlcnkuaW5jbHVkZXMoJ3Rlc3QnKSB8fCBxdWVyeS5pbmNsdWRlcygncHJldmlldycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfV0sXG4gICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgYmF0Y2hTaXplOiAxMDAsXG4gICAgICAgICAgICBjb250aW51ZU9uRXJyb3I6IHRydWUsXG4gICAgICAgICAgICBkcnlSdW46IHF1ZXJ5LmluY2x1ZGVzKCdwcmV2aWV3JykgfHwgcXVlcnkuaW5jbHVkZXMoJ3Rlc3QnKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNmb3JtYXRpb25zOiBbXVxuICAgICAgICB9LFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIHVzZXJSb2xlLFxuICAgICAgICBvcmdhbml6YXRpb25JZFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYPCfk6QgKipCdWxrIENhbXBhaWduIFNlbmQgJHtyZXN1bHQuc3VtbWFyeS50b3RhbFJlY29yZHMgPiAwID8gJ0luaXRpYXRlZCcgOiAnUHJldmlld2VkJ30qKlxuXG7wn5OKICoqQ2FtcGFpZ24gRGV0YWlsczoqKlxu4oCiIENhbXBhaWduOiBcIiR7Y2FtcGFpZ24ubmFtZX1cIlxu4oCiIFJlY2lwaWVudHM6ICR7cmVzdWx0LnN1bW1hcnkudG90YWxSZWNvcmRzfVxu4oCiIEVzdGltYXRlZCB0aW1lOiB+JHtNYXRoLmNlaWwocmVzdWx0LnN1bW1hcnkudG90YWxSZWNvcmRzICogMSl9IHNlY29uZHNcbuKAoiBTZW5kIHJhdGU6IDEwMCBlbWFpbHMgcGVyIGJhdGNoICg1LXNlY29uZCBkZWxheSlcblxu8J+TiyAqKk9wZXJhdGlvbiBEZXRhaWxzOioqXG7igKIgT3BlcmF0aW9uIElEOiAke3Jlc3VsdC5vcGVyYXRpb25JZH1cbuKAoiBTdGF0dXM6ICR7cXVlcnkuaW5jbHVkZXMoJ3Rlc3QnKSB8fCBxdWVyeS5pbmNsdWRlcygncHJldmlldycpID8gJ1Rlc3QgbW9kZScgOiAnUHJvY2Vzc2luZyd9XG7igKIgRGVsaXZlcnkgbWV0aG9kOiBCYXRjaCBwcm9jZXNzaW5nIGZvciBvcHRpbWFsIGRlbGl2ZXJ5XG5cbiR7cXVlcnkuaW5jbHVkZXMoJ3Rlc3QnKSB8fCBxdWVyeS5pbmNsdWRlcygncHJldmlldycpID8gJ+KcqCBUaGlzIHdhcyBhIHRlc3QgcnVuLiBSZW1vdmUgXCJ0ZXN0XCIgZnJvbSB5b3VyIGNvbW1hbmQgdG8gc2VuZCB0aGUgYWN0dWFsIGNhbXBhaWduLicgOiAn8J+agCBDYW1wYWlnbiBzZW5kIHN0YXJ0ZWQhIE1vbml0b3IgcHJvZ3Jlc3Mgd2l0aCB0aGUgb3BlcmF0aW9uIElELid9YCxcbiAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgb3BlcmF0aW9uSWQ6IHJlc3VsdC5vcGVyYXRpb25JZCxcbiAgICAgICAgICBjYW1wYWlnbk5hbWU6IGNhbXBhaWduLm5hbWUsXG4gICAgICAgICAgcmVjaXBpZW50Q291bnQ6IHJlc3VsdC5zdW1tYXJ5LnRvdGFsUmVjb3JkcyxcbiAgICAgICAgICBpc1Rlc3Q6IHF1ZXJ5LmluY2x1ZGVzKCd0ZXN0JykgfHwgcXVlcnkuaW5jbHVkZXMoJ3ByZXZpZXcnKVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGV4ZWN1dGUgYnVsayBjYW1wYWlnbiBzZW5kLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAnVmVyaWZ5IHRoZSBjYW1wYWlnbiBleGlzdHMgYW5kIGlzIHJlYWR5IHRvIHNlbmQnLFxuICAgICAgICAgICdDaGVjayB5b3VyIHNlbmRpbmcgcGVybWlzc2lvbnMnLFxuICAgICAgICAgICdUcnkgd2l0aCB0ZXN0IG1vZGUgZmlyc3QnXG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYnVsayBleHBvcnRcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUJ1bGtFeHBvcnQoXG4gICAgaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgXG4gICAgdXNlcklkOiBzdHJpbmcsIFxuICAgIHVzZXJSb2xlOiBzdHJpbmcsIFxuICAgIG9yZ2FuaXphdGlvbklkOiBzdHJpbmcsIFxuICAgIHF1ZXJ5OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXhwb3J0VHlwZSA9IHRoaXMuZXh0cmFjdEV4cG9ydFR5cGVGcm9tUXVlcnkocXVlcnkpO1xuICAgICAgY29uc3QgZm9ybWF0ID0gcXVlcnkuaW5jbHVkZXMoJ2NzdicpID8gJ2NzdicgOiBxdWVyeS5pbmNsdWRlcygnZXhjZWwnKSA/ICdleGNlbCcgOiAnY3N2JztcblxuICAgICAgLy8gRm9yIG5vdywgcHJvdmlkZSBndWlkYW5jZSBvbiBleHBvcnQgb3BlcmF0aW9uc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogYPCfk6UgKipCdWxrIEV4cG9ydCBSZXF1ZXN0IFJlY2VpdmVkKipcblxu8J+TiiAqKkV4cG9ydCBEZXRhaWxzOioqXG7igKIgVHlwZTogJHtleHBvcnRUeXBlfVxu4oCiIEZvcm1hdDogJHtmb3JtYXQudG9VcHBlckNhc2UoKX1cbuKAoiBPcmdhbml6YXRpb246ICR7b3JnYW5pemF0aW9uSWR9XG5cbuKaoO+4jyAqKkV4cG9ydCBPcGVyYXRpb25zOioqXG5FeHBvcnQgZnVuY3Rpb25hbGl0eSBpcyBjdXJyZW50bHkgYmVpbmcgcHJlcGFyZWQuIFlvdSBjYW46XG5cbjEuICoqQ29udGFjdCBFeHBvcnQqKjogRXhwb3J0IGFsbCBjb250YWN0cyB3aXRoIHRoZWlyIGRldGFpbHNcbjIuICoqQ2FtcGFpZ24gRXhwb3J0Kio6IEV4cG9ydCBjYW1wYWlnbiBwZXJmb3JtYW5jZSBkYXRhXG4zLiAqKkFuYWx5dGljcyBFeHBvcnQqKjogRXhwb3J0IGVuZ2FnZW1lbnQgYW5kIGNvbnZlcnNpb24gZGF0YVxuXG4qKk5leHQgU3RlcHM6KipcbuKAoiBUaGUgZXhwb3J0IHN5c3RlbSB3aWxsIHByb2Nlc3MgeW91ciByZXF1ZXN0XG7igKIgWW91J2xsIHJlY2VpdmUgYSBkb3dubG9hZCBsaW5rIHdoZW4gcmVhZHlcbuKAoiBMYXJnZSBleHBvcnRzIGFyZSBwcm9jZXNzZWQgaW4gdGhlIGJhY2tncm91bmRgLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZXhwb3J0VHlwZSxcbiAgICAgICAgICBmb3JtYXQsXG4gICAgICAgICAgb3JnYW5pemF0aW9uSWQsXG4gICAgICAgICAgc3RhdHVzOiAncHJlcGFyYXRpb24nXG4gICAgICAgIH0sXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ1RyeTogXCJleHBvcnQgYWxsIGNvbnRhY3RzIHRvIENTVlwiJyxcbiAgICAgICAgICAnVHJ5OiBcImV4cG9ydCBjYW1wYWlnbiBkYXRhIGZvciBsYXN0IG1vbnRoXCInLFxuICAgICAgICAgICdDb250YWN0IHN1cHBvcnQgZm9yIGN1c3RvbSBleHBvcnQgcmVxdWlyZW1lbnRzJ1xuICAgICAgICBdXG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGV4ZWN1dGUgYnVsayBleHBvcnQuJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2RzIGZvciBidWxrIG9wZXJhdGlvbnNcbiAgcHJpdmF0ZSBleHRyYWN0TnVtYmVyRnJvbVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcpOiBudW1iZXIgfCBudWxsIHtcbiAgICBjb25zdCBudW1iZXJzID0gcXVlcnkubWF0Y2goL1xcZCsvZyk7XG4gICAgcmV0dXJuIG51bWJlcnMgPyBOdW1iZXIucGFyc2VJbnQobnVtYmVyc1swXSkgOiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVNhbXBsZUNvbnRhY3RzKGNvdW50OiBudW1iZXIpOiBhbnlbXSB7XG4gICAgY29uc3Qgc2FtcGxlQ29udGFjdHMgPSBbXTtcbiAgICBjb25zdCBmaXJzdE5hbWVzID0gWydKb2huJywgJ0phbmUnLCAnTWljaGFlbCcsICdTYXJhaCcsICdEYXZpZCcsICdFbWlseScsICdDaHJpcycsICdMaXNhJywgJ01hcmsnLCAnQW5uYSddO1xuICAgIGNvbnN0IGxhc3ROYW1lcyA9IFsnU21pdGgnLCAnSm9obnNvbicsICdXaWxsaWFtcycsICdCcm93bicsICdKb25lcycsICdHYXJjaWEnLCAnTWlsbGVyJywgJ0RhdmlzJywgJ1JvZHJpZ3VleicsICdNYXJ0aW5leiddO1xuICAgIGNvbnN0IGNvbXBhbmllcyA9IFsnVGVjaENvcnAnLCAnSW5ub3ZhdGVMdGQnLCAnR2xvYmFsU29sdXRpb25zJywgJ0RhdGFEeW5hbWljcycsICdGdXR1cmVXb3JrcyddO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBmaXJzdE5hbWUgPSBmaXJzdE5hbWVzW2kgJSBmaXJzdE5hbWVzLmxlbmd0aF07XG4gICAgICBjb25zdCBsYXN0TmFtZSA9IGxhc3ROYW1lc1tpICUgbGFzdE5hbWVzLmxlbmd0aF07XG4gICAgICBjb25zdCBjb21wYW55ID0gY29tcGFuaWVzW2kgJSBjb21wYW5pZXMubGVuZ3RoXTtcbiAgICAgIFxuICAgICAgc2FtcGxlQ29udGFjdHMucHVzaCh7XG4gICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgIGVtYWlsOiBgJHtmaXJzdE5hbWUudG9Mb3dlckNhc2UoKX0uJHtsYXN0TmFtZS50b0xvd2VyQ2FzZSgpfSR7aX1AJHtjb21wYW55LnRvTG93ZXJDYXNlKCl9LmNvbWAsXG4gICAgICAgIHBob25lOiBgKzIzNCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMDAwMCl9YCxcbiAgICAgICAgY29tcGFueSxcbiAgICAgICAgam9iVGl0bGU6ICdTYW1wbGUgQ29udGFjdCcsXG4gICAgICAgIHRhZ3M6IFsnaW1wb3J0ZWQnLCAnYWktZ2VuZXJhdGVkJ10sXG4gICAgICAgIGN1c3RvbUZpZWxkczoge1xuICAgICAgICAgIHNvdXJjZTogJ2J1bGstaW1wb3J0JyxcbiAgICAgICAgICBpbXBvcnREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNhbXBsZUNvbnRhY3RzO1xuICB9XG5cbiAgcHJpdmF0ZSBleHRyYWN0RmlsdGVyc0Zyb21RdWVyeShxdWVyeTogc3RyaW5nKTogYW55IHtcbiAgICBjb25zdCBmaWx0ZXJzOiBhbnkgPSB7fTtcbiAgICBcbiAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ3ByZW1pdW0nKSB8fCBxdWVyeS5pbmNsdWRlcygndmlwJykpIHtcbiAgICAgIGZpbHRlcnMudGFncyA9IFsncHJlbWl1bScsICd2aXAnXTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdsYXN0IDMwIGRheXMnKSkge1xuICAgICAgZmlsdGVycy5jcmVhdGVkQWZ0ZXIgPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdhY3RpdmUnKSkge1xuICAgICAgZmlsdGVycy5pc0FjdGl2ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlcnM7XG4gIH1cblxuICBwcml2YXRlIGV4dHJhY3RVcGRhdGVzRnJvbVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcpOiBhbnkge1xuICAgIGNvbnN0IHVwZGF0ZXM6IGFueSA9IHt9O1xuICAgIFxuICAgIGlmIChxdWVyeS5pbmNsdWRlcygnYWRkIHRhZycpKSB7XG4gICAgICBjb25zdCB0YWdNYXRjaCA9IHF1ZXJ5Lm1hdGNoKC9hZGQgdGFnIChcXHcrKS8pO1xuICAgICAgaWYgKHRhZ01hdGNoKSB7XG4gICAgICAgIHVwZGF0ZXMuYWRkVGFncyA9IFt0YWdNYXRjaFsxXV07XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChxdWVyeS5pbmNsdWRlcygnc2V0IHN0YXR1cycpKSB7XG4gICAgICBjb25zdCBzdGF0dXNNYXRjaCA9IHF1ZXJ5Lm1hdGNoKC9zZXQgc3RhdHVzIChcXHcrKS8pO1xuICAgICAgaWYgKHN0YXR1c01hdGNoKSB7XG4gICAgICAgIHVwZGF0ZXMuaXNBY3RpdmUgPSBzdGF0dXNNYXRjaFsxXS50b0xvd2VyQ2FzZSgpID09PSAnYWN0aXZlJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXBkYXRlcztcbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFjdENhbXBhaWduRnJvbVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcpOiBhbnkge1xuICAgIGNvbnN0IGluZm86IGFueSA9IHt9O1xuICAgIFxuICAgIC8vIFRyeSB0byBleHRyYWN0IGNhbXBhaWduIG5hbWUgZnJvbSBxdW90ZXMgb3Igc3BlY2lmaWMgcGF0dGVybnNcbiAgICBjb25zdCBuYW1lTWF0Y2ggPSBxdWVyeS5tYXRjaCgvXCIoW15cIl0rKVwifGNhbXBhaWduIChcXHcrKS8pO1xuICAgIGlmIChuYW1lTWF0Y2gpIHtcbiAgICAgIGluZm8uY2FtcGFpZ25OYW1lID0gbmFtZU1hdGNoWzFdIHx8IG5hbWVNYXRjaFsyXTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5mbztcbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFjdFJlY2lwaWVudHNGcm9tUXVlcnkocXVlcnk6IHN0cmluZyk6IGFueSB7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdhbGwnKSB8fCBxdWVyeS5pbmNsdWRlcygnZXZlcnlvbmUnKSkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ2FsbCcgfTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCduZXcgY3VzdG9tZXJzJykgfHwgcXVlcnkuaW5jbHVkZXMoJ25ldyBjb250YWN0cycpKSB7XG4gICAgICByZXR1cm4geyBcbiAgICAgICAgdHlwZTogJ2NvbnRhY3RzJyxcbiAgICAgICAgZmlsdGVyczogeyBjcmVhdGVkQWZ0ZXI6IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApIH1cbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGlmIChxdWVyeS5pbmNsdWRlcygndmlwJykgfHwgcXVlcnkuaW5jbHVkZXMoJ3ByZW1pdW0nKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2NvbnRhY3RzJyxcbiAgICAgICAgZmlsdGVyczogeyB0YWdzOiBbJ3ZpcCcsICdwcmVtaXVtJ10gfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyB0eXBlOiAnYWxsJyB9O1xuICB9XG5cbiAgcHJpdmF0ZSBleHRyYWN0RXhwb3J0VHlwZUZyb21RdWVyeShxdWVyeTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ2NvbnRhY3QnKSkgcmV0dXJuICdjb250YWN0cyc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdjYW1wYWlnbicpKSByZXR1cm4gJ2NhbXBhaWducyc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdhbmFseXRpY3MnKSB8fCBxdWVyeS5pbmNsdWRlcygnZGF0YScpKSByZXR1cm4gJ2FuYWx5dGljcyc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCd3b3JrZmxvdycpKSByZXR1cm4gJ3dvcmtmbG93cyc7XG4gICAgXG4gICAgcmV0dXJuICdjb250YWN0cyc7IC8vIGRlZmF1bHRcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGlzIGlzIGEgbW9uaXRvcmluZy9hbGVydGluZyByZXF1ZXN0XG4gICAqL1xuICBwcml2YXRlIGlzTW9uaXRvcmluZ1JlcXVlc3QoaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgcXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG1vbml0b3JpbmdLZXl3b3JkcyA9IFtcbiAgICAgICdtb25pdG9yJywgJ21vbml0b3JpbmcnLCAnYWxlcnQnLCAnYWxlcnRpbmcnLCAnaGVhbHRoJywgJ3N5c3RlbSBoZWFsdGgnLFxuICAgICAgJ21vbml0b3JpbmcgcnVsZXMnLCAnYWxlcnRzJywgJ3VwdGltZScsICdwZXJmb3JtYW5jZSBtb25pdG9yaW5nJyxcbiAgICAgICdzeXN0ZW0gc3RhdHVzJywgJ2luZnJhc3RydWN0dXJlIGhlYWx0aCcsICdtb25pdG9yaW5nIGluc2lnaHRzJyxcbiAgICAgICdtb25pdG9yaW5nIGRhc2hib2FyZCcsICdzeXN0ZW0gbW9uaXRvcmluZycsICdoZWFsdGggY2hlY2snLFxuICAgICAgJ21vbml0b3JpbmcgYWxlcnRzJywgJ3N5c3RlbSBhbGVydHMnLCAnY2hlY2sgaGVhbHRoJywgJ21vbml0b3Igc3lzdGVtJyxcbiAgICAgICdhbGVydCBydWxlcycsICdtb25pdG9yaW5nIGNvbmZpZ3VyYXRpb24nLCAnc3lzdGVtIG1ldHJpY3MnLFxuICAgICAgJ2hlYWx0aCBtZXRyaWNzJywgJ21vbml0b3Jpbmcgc3RhdGlzdGljcycsICdhbGVydCBoaXN0b3J5JyxcbiAgICAgICdhY2tub3dsZWRnZSBhbGVydCcsICdyZXNvbHZlIGFsZXJ0JywgJ21vbml0b3JpbmcgcmVwb3J0J1xuICAgIF07XG4gICAgXG4gICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgcmV0dXJuIG1vbml0b3JpbmdLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gbG93ZXJRdWVyeS5pbmNsdWRlcyhrZXl3b3JkKSkgfHxcbiAgICAgICAgICAgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NoZWNrJykgJiYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3N5c3RlbScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2hlYWx0aCcpKSkgfHxcbiAgICAgICAgICAgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3Nob3cnKSAmJiAobG93ZXJRdWVyeS5pbmNsdWRlcygnYWxlcnRzJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnbW9uaXRvcmluZycpKSkgfHxcbiAgICAgICAgICAgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NyZWF0ZScpICYmIGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3J1bGUnKSkgfHxcbiAgICAgICAgICAgKGludGVudC5hY3Rpb24gPT09ICdBTkFMWVpFJyAmJiBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzeXN0ZW0nKSk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBtb25pdG9yaW5nIG9wZXJhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZU1vbml0b3JpbmcoaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgdXNlcklkOiBzdHJpbmcsIHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdXNlciBkZXRhaWxzIGZvciBwZXJtaXNzaW9uc1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICAgIHNlbGVjdDogeyByb2xlOiB0cnVlLCBvcmdhbml6YXRpb25JZDogdHJ1ZSwgbmFtZTogdHJ1ZSB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kLiBDYW5ub3QgcGVyZm9ybSBtb25pdG9yaW5nIG9wZXJhdGlvbnMuJyxcbiAgICAgICAgICBlcnJvcjogJ1VzZXIgYXV0aGVudGljYXRpb24gZmFpbGVkJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyBtb25pdG9yaW5nIGFjY2Vzc1xuICAgICAgY29uc3QgaGFzQWNjZXNzID0gWydBRE1JTicsICdJVF9BRE1JTicsICdTVVBFUl9BRE1JTiddLmluY2x1ZGVzKHVzZXIucm9sZSB8fCAnJyk7XG4gICAgICBpZiAoIWhhc0FjY2Vzcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgbmVlZCBhZG1pbiBwcml2aWxlZ2VzIHRvIGFjY2VzcyBtb25pdG9yaW5nIGZlYXR1cmVzLicsXG4gICAgICAgICAgZXJyb3I6ICdJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdBSSBtb25pdG9yaW5nIG9wZXJhdGlvbiBpbml0aWF0ZWQgdmlhIGludGVsbGlnZW50IGV4ZWN1dGlvbicsIHtcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIHVzZXJSb2xlOiB1c2VyLnJvbGUsXG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiB1c2VyLm9yZ2FuaXphdGlvbklkXG4gICAgICB9KTtcblxuICAgICAgLy8gUGFyc2UgbW9uaXRvcmluZyByZXF1ZXN0XG4gICAgICBjb25zdCBtb25pdG9yaW5nUGFyYW1zID0gdGhpcy5wYXJzZU1vbml0b3JpbmdSZXF1ZXN0KHF1ZXJ5KTtcbiAgICAgIFxuICAgICAgaWYgKG1vbml0b3JpbmdQYXJhbXMuYWN0aW9uID09PSAnc2hvd19oZWFsdGgnKSB7XG4gICAgICAgIC8vIFNob3cgc3lzdGVtIGhlYWx0aFxuICAgICAgICBjb25zdCBoZWFsdGggPSBhd2FpdCBhZHZhbmNlZE1vbml0b3JpbmdPcmNoZXN0cmF0b3IuZ2V0U3lzdGVtSGVhbHRoKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogYFN5c3RlbSBIZWFsdGggT3ZlcnZpZXc6XG4tIE92ZXJhbGwgU3RhdHVzOiAke2hlYWx0aC5vdmVyYWxsLnN0YXR1cy50b1VwcGVyQ2FzZSgpfVxuLSBIZWFsdGggU2NvcmU6ICR7aGVhbHRoLm92ZXJhbGwuc2NvcmUudG9GaXhlZCgxKX0vMTAwXG4tIFVwdGltZTogJHtNYXRoLmZsb29yKGhlYWx0aC5vdmVyYWxsLnVwdGltZSAvIDM2MDApfSBob3Vyc1xuLSBBY3RpdmUgQWxlcnRzOiAke2hlYWx0aC5hY3RpdmVBbGVydHMubGVuZ3RofVxuLSBJbmZyYXN0cnVjdHVyZTogJHtoZWFsdGguY29tcG9uZW50cy5pbmZyYXN0cnVjdHVyZS5zdGF0dXN9XG4tIERhdGFiYXNlOiAke2hlYWx0aC5jb21wb25lbnRzLmRhdGFiYXNlLnN0YXR1c31cbi0gQUkgU3lzdGVtczogJHtoZWFsdGguY29tcG9uZW50cy5haS5zdGF0dXN9XG4tIFNlY3VyaXR5OiAke2hlYWx0aC5jb21wb25lbnRzLnNlY3VyaXR5LnN0YXR1c31gLFxuICAgICAgICAgIGRhdGE6IGhlYWx0aCxcbiAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICBhY3Rpb246ICdzeXN0ZW1faGVhbHRoX3JldHJpZXZlZCcsXG4gICAgICAgICAgICBjb21wb25lbnRzOiBPYmplY3Qua2V5cyhoZWFsdGguY29tcG9uZW50cykubGVuZ3RoLFxuICAgICAgICAgICAgcHJlZGljdGlvbnM6IGhlYWx0aC5wcmVkaWN0aW9uc1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgfSBlbHNlIGlmIChtb25pdG9yaW5nUGFyYW1zLmFjdGlvbiA9PT0gJ3Nob3dfYWxlcnRzJykge1xuICAgICAgICAvLyBTaG93IGFjdGl2ZSBhbGVydHNcbiAgICAgICAgY29uc3QgYWxlcnRzID0gYXdhaXQgYWR2YW5jZWRNb25pdG9yaW5nT3JjaGVzdHJhdG9yLmdldEFjdGl2ZUFsZXJ0cygpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWxlcnRTdW1tYXJ5ID0gYWxlcnRzLmxlbmd0aCA+IDAgXG4gICAgICAgICAgPyBhbGVydHMubWFwKGFsZXJ0ID0+IGAtICR7YWxlcnQuc2V2ZXJpdHl9OiAke2FsZXJ0Lm1lc3NhZ2V9ICgke2FsZXJ0LmNvbXBvbmVudH0pYCkuam9pbignXFxuJylcbiAgICAgICAgICA6ICdObyBhY3RpdmUgYWxlcnRzJztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogYEFjdGl2ZSBBbGVydHMgKCR7YWxlcnRzLmxlbmd0aH0pOlxuJHthbGVydFN1bW1hcnl9YCxcbiAgICAgICAgICBkYXRhOiBhbGVydHMsXG4gICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgYWN0aW9uOiAnYWxlcnRzX3JldHJpZXZlZCcsXG4gICAgICAgICAgICBhbGVydENvdW50OiBhbGVydHMubGVuZ3RoLFxuICAgICAgICAgICAgc2V2ZXJpdHlCcmVha2Rvd246IGFsZXJ0cy5yZWR1Y2UoKGFjYywgYWxlcnQpID0+IHtcbiAgICAgICAgICAgICAgYWNjW2FsZXJ0LnNldmVyaXR5XSA9IChhY2NbYWxlcnQuc2V2ZXJpdHldIHx8IDApICsgMTtcbiAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4pXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICB9IGVsc2UgaWYgKG1vbml0b3JpbmdQYXJhbXMuYWN0aW9uID09PSAnc2hvd19pbnNpZ2h0cycpIHtcbiAgICAgICAgLy8gU2hvdyBtb25pdG9yaW5nIGluc2lnaHRzXG4gICAgICAgIGNvbnN0IGluc2lnaHRzID0gYXdhaXQgYWR2YW5jZWRNb25pdG9yaW5nT3JjaGVzdHJhdG9yLmdldE1vbml0b3JpbmdJbnNpZ2h0cygpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaW5zaWdodFN1bW1hcnkgPSBpbnNpZ2h0cy5sZW5ndGggPiAwXG4gICAgICAgICAgPyBpbnNpZ2h0cy5zbGljZSgwLCA1KS5tYXAoaW5zaWdodCA9PiBgLSAke2luc2lnaHQudHlwZX06ICR7aW5zaWdodC5tZXNzYWdlfWApLmpvaW4oJ1xcbicpXG4gICAgICAgICAgOiAnTm8gbW9uaXRvcmluZyBpbnNpZ2h0cyBhdmFpbGFibGUnO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBgUmVjZW50IE1vbml0b3JpbmcgSW5zaWdodHMgKCR7aW5zaWdodHMubGVuZ3RofSk6XG4ke2luc2lnaHRTdW1tYXJ5fWAsXG4gICAgICAgICAgZGF0YTogaW5zaWdodHMsXG4gICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgYWN0aW9uOiAnaW5zaWdodHNfcmV0cmlldmVkJyxcbiAgICAgICAgICAgIGluc2lnaHRDb3VudDogaW5zaWdodHMubGVuZ3RoLFxuICAgICAgICAgICAgdHlwZUJyZWFrZG93bjogaW5zaWdodHMucmVkdWNlKChhY2MsIGluc2lnaHQpID0+IHtcbiAgICAgICAgICAgICAgYWNjW2luc2lnaHQudHlwZV0gPSAoYWNjW2luc2lnaHQudHlwZV0gfHwgMCkgKyAxO1xuICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPilcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgIH0gZWxzZSBpZiAobW9uaXRvcmluZ1BhcmFtcy5hY3Rpb24gPT09ICdhY2tub3dsZWRnZV9hbGVydCcgJiYgbW9uaXRvcmluZ1BhcmFtcy5hbGVydElkKSB7XG4gICAgICAgIC8vIEFja25vd2xlZGdlIGFsZXJ0XG4gICAgICAgIGNvbnN0IGFja25vd2xlZGdlZCA9IGF3YWl0IGFkdmFuY2VkTW9uaXRvcmluZ09yY2hlc3RyYXRvci5hY2tub3dsZWRnZUFsZXJ0KFxuICAgICAgICAgIG1vbml0b3JpbmdQYXJhbXMuYWxlcnRJZCxcbiAgICAgICAgICB1c2VySWRcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoYWNrbm93bGVkZ2VkKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBgQWxlcnQgJHttb25pdG9yaW5nUGFyYW1zLmFsZXJ0SWR9IGhhcyBiZWVuIGFja25vd2xlZGdlZCBzdWNjZXNzZnVsbHkuYCxcbiAgICAgICAgICAgIGRhdGE6IHsgYWxlcnRJZDogbW9uaXRvcmluZ1BhcmFtcy5hbGVydElkLCBhY2tub3dsZWRnZWRCeTogdXNlcklkIH0sXG4gICAgICAgICAgICBkZXRhaWxzOiB7IGFjdGlvbjogJ2FsZXJ0X2Fja25vd2xlZGdlZCcgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogYEFsZXJ0ICR7bW9uaXRvcmluZ1BhcmFtcy5hbGVydElkfSBub3QgZm91bmQgb3IgYWxyZWFkeSBhY2tub3dsZWRnZWQuYCxcbiAgICAgICAgICAgIGVycm9yOiAnQWxlcnQgbm90IGZvdW5kJ1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIGlmIChtb25pdG9yaW5nUGFyYW1zLmFjdGlvbiA9PT0gJ3Jlc29sdmVfYWxlcnQnICYmIG1vbml0b3JpbmdQYXJhbXMuYWxlcnRJZCkge1xuICAgICAgICAvLyBSZXNvbHZlIGFsZXJ0XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gYXdhaXQgYWR2YW5jZWRNb25pdG9yaW5nT3JjaGVzdHJhdG9yLnJlc29sdmVBbGVydChtb25pdG9yaW5nUGFyYW1zLmFsZXJ0SWQpO1xuXG4gICAgICAgIGlmIChyZXNvbHZlZCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogYEFsZXJ0ICR7bW9uaXRvcmluZ1BhcmFtcy5hbGVydElkfSBoYXMgYmVlbiByZXNvbHZlZCBzdWNjZXNzZnVsbHkuYCxcbiAgICAgICAgICAgIGRhdGE6IHsgYWxlcnRJZDogbW9uaXRvcmluZ1BhcmFtcy5hbGVydElkLCByZXNvbHZlZEJ5OiB1c2VySWQgfSxcbiAgICAgICAgICAgIGRldGFpbHM6IHsgYWN0aW9uOiAnYWxlcnRfcmVzb2x2ZWQnIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBBbGVydCAke21vbml0b3JpbmdQYXJhbXMuYWxlcnRJZH0gbm90IGZvdW5kIG9yIGFscmVhZHkgcmVzb2x2ZWQuYCxcbiAgICAgICAgICAgIGVycm9yOiAnQWxlcnQgbm90IGZvdW5kJ1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIGlmIChtb25pdG9yaW5nUGFyYW1zLmFjdGlvbiA9PT0gJ3Nob3dfc3RhdHMnKSB7XG4gICAgICAgIC8vIFNob3cgZXhlY3V0aW9uIHN0YXRzXG4gICAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgYWR2YW5jZWRNb25pdG9yaW5nT3JjaGVzdHJhdG9yLmdldEV4ZWN1dGlvblN0YXRzKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogYFN5c3RlbSBFeGVjdXRpb24gU3RhdGlzdGljczpcbi0gVG90YWwgVGFza3M6ICR7c3RhdHMudG90YWxUYXNrc31cbi0gU3VjY2Vzc2Z1bDogJHtzdGF0cy5zdWNjZXNzZnVsVGFza3N9XG4tIEZhaWxlZDogJHtzdGF0cy5mYWlsZWRUYXNrc31cbi0gU3VjY2VzcyBSYXRlOiAke3N0YXRzLnRvdGFsVGFza3MgPiAwID8gKChzdGF0cy5zdWNjZXNzZnVsVGFza3MgLyBzdGF0cy50b3RhbFRhc2tzKSAqIDEwMCkudG9GaXhlZCgxKSA6IDB9JWAsXG4gICAgICAgICAgZGF0YTogc3RhdHMsXG4gICAgICAgICAgZGV0YWlsczogeyBhY3Rpb246ICdzdGF0c19yZXRyaWV2ZWQnIH1cbiAgICAgICAgfTtcblxuICAgICAgfSBlbHNlIGlmIChtb25pdG9yaW5nUGFyYW1zLmFjdGlvbiA9PT0gJ2NyZWF0ZV9ydWxlJykge1xuICAgICAgICAvLyBDcmVhdGUgbW9uaXRvcmluZyBydWxlIChyZXF1aXJlcyBzcGVjaWZpYyBwYXJhbWV0ZXJzKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdDcmVhdGluZyBtb25pdG9yaW5nIHJ1bGVzIHJlcXVpcmVzIHNwZWNpZmljIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycy4gUGxlYXNlIHVzZSB0aGUgbW9uaXRvcmluZyBkYXNoYm9hcmQgZm9yIGFkdmFuY2VkIHJ1bGUgY3JlYXRpb24uJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgJ1VzZSB0aGUgbW9uaXRvcmluZyBkYXNoYm9hcmQgZm9yIHJ1bGUgY3JlYXRpb24nLFxuICAgICAgICAgICAgJ1NwZWNpZnkgcnVsZSBjb25kaXRpb25zIGFuZCBhY3Rpb25zJyxcbiAgICAgICAgICAgICdDaGVjayBleGlzdGluZyBtb25pdG9yaW5nIHJ1bGVzIGZpcnN0J1xuICAgICAgICAgIF1cbiAgICAgICAgfTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJIGNhbiBoZWxwIHlvdSB3aXRoIG1vbml0b3Jpbmcgb3BlcmF0aW9ucy4gV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBkbz8nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAnU2hvdyBzeXN0ZW0gaGVhbHRoIHN0YXR1cycsXG4gICAgICAgICAgICAnU2hvdyBhY3RpdmUgYWxlcnRzJyxcbiAgICAgICAgICAgICdTaG93IG1vbml0b3JpbmcgaW5zaWdodHMnLFxuICAgICAgICAgICAgJ1Nob3cgc3lzdGVtIHN0YXRpc3RpY3MnLFxuICAgICAgICAgICAgJ0Fja25vd2xlZGdlIG9yIHJlc29sdmUgYWxlcnRzJ1xuICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ01vbml0b3JpbmcgZXhlY3V0aW9uIGZhaWxlZCcsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLFxuICAgICAgICB1c2VySWRcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0kgZW5jb3VudGVyZWQgYW4gZXJyb3Igd2hpbGUgYWNjZXNzaW5nIG1vbml0b3JpbmcgZGF0YS4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICdDaGVjayB5b3VyIHBlcm1pc3Npb25zJyxcbiAgICAgICAgICAnVHJ5IGEgc2ltcGxlciBtb25pdG9yaW5nIHF1ZXJ5JyxcbiAgICAgICAgICAnQ29udGFjdCBzdXBwb3J0IGlmIHRoZSBpc3N1ZSBwZXJzaXN0cydcbiAgICAgICAgXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgbW9uaXRvcmluZyByZXF1ZXN0IHRvIGRldGVybWluZSBzcGVjaWZpYyBhY3Rpb25cbiAgICovXG4gIHByaXZhdGUgcGFyc2VNb25pdG9yaW5nUmVxdWVzdChxdWVyeTogc3RyaW5nKToge1xuICAgIGFjdGlvbjogc3RyaW5nO1xuICAgIGFsZXJ0SWQ/OiBzdHJpbmc7XG4gICAgdHlwZT86IHN0cmluZztcbiAgfSB7XG4gICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBDaGVjayBmb3IgYWxlcnQgb3BlcmF0aW9uc1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhY2tub3dsZWRnZScpKSB7XG4gICAgICBjb25zdCBhbGVydElkTWF0Y2ggPSBxdWVyeS5tYXRjaCgvYWxlcnRbX1xccy1dPyhcXHcrKS9pKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFjdGlvbjogJ2Fja25vd2xlZGdlX2FsZXJ0JyxcbiAgICAgICAgYWxlcnRJZDogYWxlcnRJZE1hdGNoID8gYWxlcnRJZE1hdGNoWzFdIDogdW5kZWZpbmVkXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdyZXNvbHZlJykpIHtcbiAgICAgIGNvbnN0IGFsZXJ0SWRNYXRjaCA9IHF1ZXJ5Lm1hdGNoKC9hbGVydFtfXFxzLV0/KFxcdyspL2kpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYWN0aW9uOiAncmVzb2x2ZV9hbGVydCcsXG4gICAgICAgIGFsZXJ0SWQ6IGFsZXJ0SWRNYXRjaCA/IGFsZXJ0SWRNYXRjaFsxXSA6IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3Igc3BlY2lmaWMgbW9uaXRvcmluZyBxdWVyaWVzXG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2hlYWx0aCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3N0YXR1cycpKSB7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICdzaG93X2hlYWx0aCcgfTtcbiAgICB9XG5cbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnYWxlcnQnKSkge1xuICAgICAgcmV0dXJuIHsgYWN0aW9uOiAnc2hvd19hbGVydHMnIH07XG4gICAgfVxuXG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2luc2lnaHQnKSkge1xuICAgICAgcmV0dXJuIHsgYWN0aW9uOiAnc2hvd19pbnNpZ2h0cycgfTtcbiAgICB9XG5cbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc3RhdCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ21ldHJpYycpKSB7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICdzaG93X3N0YXRzJyB9O1xuICAgIH1cblxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjcmVhdGUnKSAmJiBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdydWxlJykpIHtcbiAgICAgIHJldHVybiB7IGFjdGlvbjogJ2NyZWF0ZV9ydWxlJyB9O1xuICAgIH1cblxuICAgIC8vIERlZmF1bHQgdG8gaGVhbHRoIHN0YXR1c1xuICAgIHJldHVybiB7IGFjdGlvbjogJ3Nob3dfaGVhbHRoJyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgaXMgYW4gYXV0b25vbW91cyBBL0IgdGVzdGluZyByZXF1ZXN0XG4gICAqL1xuICBwcml2YXRlIGlzQXV0b25vbW91c0FCVGVzdGluZ1JlcXVlc3QoaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgcXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFiVGVzdGluZ0tleXdvcmRzID0gW1xuICAgICAgJ2EvYiB0ZXN0JywgJ2FiIHRlc3QnLCAnc3BsaXQgdGVzdCcsICdleHBlcmltZW50JywgJ3Rlc3RpbmcnLCAndGVzdCB2YXJpYW50cycsXG4gICAgICAnYXV0b25vbW91cyB0ZXN0JywgJ2F1dG8gdGVzdCcsICd0ZXN0IGNhbXBhaWduJywgJ29wdGltaXplIGNhbXBhaWduJyxcbiAgICAgICd0ZXN0IHBlcmZvcm1hbmNlJywgJ3ZhcmlhbnQgdGVzdCcsICdjb252ZXJzaW9uIHRlc3QnLCAndGVzdCBvcHRpbWl6YXRpb24nLFxuICAgICAgJ2F1dG9tYXRpYyB0ZXN0aW5nJywgJ3Rlc3Qgc3ViamVjdCBsaW5lJywgJ3Rlc3QgZW1haWwnLCAndGVzdCBmb3JtJyxcbiAgICAgICd0ZXN0IGxhbmRpbmcgcGFnZScsICd0ZXN0IHdvcmtmbG93JywgJ211bHRpdmFyaWF0ZSB0ZXN0JywgJ212dCcsXG4gICAgICAndGVzdCB0cmFmZmljJywgJ3Rlc3QgYWxsb2NhdGlvbicsICd0ZXN0IHJlc3VsdHMnLCAndGVzdCBhbmFseXNpcycsXG4gICAgICAndGVzdCB3aW5uZXInLCAndGVzdCBwZXJmb3JtYW5jZScsICd0ZXN0IGluc2lnaHRzJywgJ3Rlc3QgbWV0cmljcycsXG4gICAgICAnc3RhcnQgdGVzdCcsICdzdG9wIHRlc3QnLCAncGF1c2UgdGVzdCcsICdyZXN1bWUgdGVzdCcsICdjcmVhdGUgdGVzdCdcbiAgICBdO1xuICAgIFxuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIHJldHVybiBhYlRlc3RpbmdLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gbG93ZXJRdWVyeS5pbmNsdWRlcyhrZXl3b3JkKSkgfHxcbiAgICAgICAgICAgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3Rlc3QnKSAmJiAobG93ZXJRdWVyeS5pbmNsdWRlcygnY2FtcGFpZ24nKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb252ZXJzaW9uJykpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnb3B0aW1pemUnKSAmJiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZW1haWwnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdmb3JtJykpKSB8fFxuICAgICAgICAgICAoaW50ZW50LmFjdGlvbiA9PT0gJ0NSRUFURScgJiYgbG93ZXJRdWVyeS5pbmNsdWRlcygndGVzdCcpKSB8fFxuICAgICAgICAgICAoaW50ZW50LmFjdGlvbiA9PT0gJ0FOQUxZWkUnICYmIGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2V4cGVyaW1lbnQnKSk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhdXRvbm9tb3VzIEEvQiB0ZXN0aW5nIG9wZXJhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUF1dG9ub21vdXNBQlRlc3RpbmcoaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgdXNlcklkOiBzdHJpbmcsIHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdXNlciBkZXRhaWxzIGZvciBwZXJtaXNzaW9uc1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICAgIHNlbGVjdDogeyByb2xlOiB0cnVlLCBvcmdhbml6YXRpb25JZDogdHJ1ZSwgbmFtZTogdHJ1ZSB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1VzZXIgbm90IGZvdW5kLiBDYW5ub3QgcGVyZm9ybSBBL0IgdGVzdGluZyBvcGVyYXRpb25zLicsXG4gICAgICAgICAgZXJyb3I6ICdVc2VyIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmluZm8oJ0FJIGF1dG9ub21vdXMgQS9CIHRlc3Rpbmcgb3BlcmF0aW9uIGluaXRpYXRlZCB2aWEgaW50ZWxsaWdlbnQgZXhlY3V0aW9uJywge1xuICAgICAgICBxdWVyeTogcXVlcnkuc3Vic3RyaW5nKDAsIDEwMCksXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdXNlclJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgb3JnYW5pemF0aW9uSWQ6IHVzZXIub3JnYW5pemF0aW9uSWRcbiAgICAgIH0pO1xuXG4gICAgICAvLyBQYXJzZSBBL0IgdGVzdGluZyByZXF1ZXN0XG4gICAgICBjb25zdCB0ZXN0aW5nUGFyYW1zID0gdGhpcy5wYXJzZUFCVGVzdGluZ1JlcXVlc3QocXVlcnkpO1xuICAgICAgXG4gICAgICBpZiAodGVzdGluZ1BhcmFtcy5hY3Rpb24gPT09ICdjcmVhdGVfdGVzdCcpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGF1dG9ub21vdXMgQS9CIHRlc3RcbiAgICAgICAgaWYgKCF0ZXN0aW5nUGFyYW1zLmNoYW5uZWwgfHwgIXRlc3RpbmdQYXJhbXMub2JqZWN0aXZlKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1RvIGNyZWF0ZSBhbiBBL0IgdGVzdCwgSSBuZWVkIHRvIGtub3cgdGhlIGNoYW5uZWwgKGVtYWlsL2Zvcm0vbGFuZGluZyBwYWdlKSBhbmQgb2JqZWN0aXZlIChpbXByb3ZlIGNvbnZlcnNpb25zL29wZW4gcmF0ZXMvZXRjKS4nLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ1NwZWNpZnkgdGhlIGNoYW5uZWw6IFwidGVzdCBlbWFpbCBjYW1wYWlnblwiJyxcbiAgICAgICAgICAgICAgJ0RlZmluZSB0aGUgb2JqZWN0aXZlOiBcImltcHJvdmUgY29udmVyc2lvbiByYXRlc1wiJyxcbiAgICAgICAgICAgICAgJ0V4YW1wbGU6IFwiQ3JlYXRlIEEvQiB0ZXN0IGZvciBlbWFpbCBjYW1wYWlnbiB0byBpbXByb3ZlIG9wZW4gcmF0ZXNcIidcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdElkID0gYXdhaXQgYXV0b25vbW91c0FCVGVzdGluZ0VuZ2luZS5yZXF1ZXN0QXV0b25vbW91c1Rlc3Qoe1xuICAgICAgICAgIGNhbXBhaWduSWQ6IHRlc3RpbmdQYXJhbXMuY2FtcGFpZ25JZCxcbiAgICAgICAgICBmb3JtSWQ6IHRlc3RpbmdQYXJhbXMuZm9ybUlkLFxuICAgICAgICAgIHdvcmtmbG93SWQ6IHRlc3RpbmdQYXJhbXMud29ya2Zsb3dJZCxcbiAgICAgICAgICBjaGFubmVsOiB0ZXN0aW5nUGFyYW1zLmNoYW5uZWwgYXMgJ2VtYWlsJyB8ICdzbXMnIHwgJ3doYXRzYXBwJyB8ICdmb3JtJyB8ICdsYW5kaW5nX3BhZ2UnLFxuICAgICAgICAgIG9iamVjdGl2ZTogdGVzdGluZ1BhcmFtcy5vYmplY3RpdmUsXG4gICAgICAgICAgY29uc3RyYWludHM6IHRlc3RpbmdQYXJhbXMuY29uc3RyYWludHNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBBdXRvbm9tb3VzIEEvQiB0ZXN0IHJlcXVlc3Qgc3VibWl0dGVkIHN1Y2Nlc3NmdWxseSEgXG7wn6eqIFRlc3QgVHlwZTogJHt0ZXN0aW5nUGFyYW1zLmNoYW5uZWx9IG9wdGltaXphdGlvblxu8J+OryBPYmplY3RpdmU6ICR7dGVzdGluZ1BhcmFtcy5vYmplY3RpdmV9XG7ij7HvuI8gRXN0aW1hdGVkIGRlc2lnbiB0aW1lOiA1LTEwIG1pbnV0ZXNcbvCfpJYgVGhlIEFJIHdpbGwgYXV0b21hdGljYWxseSBkZXNpZ24sIGV4ZWN1dGUsIGFuZCBvcHRpbWl6ZSB0aGUgdGVzdFxuXG5Zb3VyIHRlc3Qgd2lsbCBzdGFydCBydW5uaW5nIG9uY2UgdGhlIGRlc2lnbiBpcyBjb21wbGV0ZSBhbmQgd2lsbCBhdXRvbWF0aWNhbGx5IGFwcGx5IHRoZSB3aW5uaW5nIHZhcmlhbnQgd2hlbiBzdGF0aXN0aWNhbCBzaWduaWZpY2FuY2UgaXMgcmVhY2hlZC5gLFxuICAgICAgICAgIGRhdGE6IHsgcmVxdWVzdElkLCBjaGFubmVsOiB0ZXN0aW5nUGFyYW1zLmNoYW5uZWwsIG9iamVjdGl2ZTogdGVzdGluZ1BhcmFtcy5vYmplY3RpdmUgfSxcbiAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICBhY3Rpb246ICdhdXRvbm9tb3VzX3Rlc3RfcmVxdWVzdGVkJyxcbiAgICAgICAgICAgIGVzdGltYXRlZERlc2lnblRpbWU6ICc1LTEwIG1pbnV0ZXMnLFxuICAgICAgICAgICAgYXV0b0V4ZWN1dGlvbjogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgfSBlbHNlIGlmICh0ZXN0aW5nUGFyYW1zLmFjdGlvbiA9PT0gJ3Nob3dfdGVzdHMnKSB7XG4gICAgICAgIC8vIFNob3cgYWN0aXZlIGF1dG9ub21vdXMgdGVzdHNcbiAgICAgICAgY29uc3QgYWN0aXZlVGVzdHMgPSBhd2FpdCBhdXRvbm9tb3VzQUJUZXN0aW5nRW5naW5lLmdldEFjdGl2ZVRlc3RzKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoYWN0aXZlVGVzdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiAnTm8gYWN0aXZlIGF1dG9ub21vdXMgQS9CIHRlc3RzIGZvdW5kLiBXb3VsZCB5b3UgbGlrZSBtZSB0byBjcmVhdGUgb25lPycsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnQ3JlYXRlIGVtYWlsIGNhbXBhaWduIHRlc3QnLFxuICAgICAgICAgICAgICAnVGVzdCBmb3JtIG9wdGltaXphdGlvbicsXG4gICAgICAgICAgICAgICdPcHRpbWl6ZSBsYW5kaW5nIHBhZ2UgY29udmVyc2lvbicsXG4gICAgICAgICAgICAgICdUZXN0IHN1YmplY3QgbGluZSBwZXJmb3JtYW5jZSdcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGVzdFN1bW1hcnkgPSBhY3RpdmVUZXN0cy5tYXAodGVzdCA9PiBcbiAgICAgICAgICBgLSAke3Rlc3QubmFtZX0gKCR7dGVzdC5zdGF0dXN9KSAtICR7dGVzdC50eXBlfSAtIFByaW9yaXR5OiAke3Rlc3QucHJpb3JpdHl9YFxuICAgICAgICApLmpvaW4oJ1xcbicpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBgQWN0aXZlIEF1dG9ub21vdXMgQS9CIFRlc3RzICgke2FjdGl2ZVRlc3RzLmxlbmd0aH0pOlxuJHt0ZXN0U3VtbWFyeX1cblxuVGhlc2UgdGVzdHMgYXJlIHJ1bm5pbmcgYXV0b25vbW91c2x5IGFuZCB3aWxsIGF1dG9tYXRpY2FsbHkgYXBwbHkgd2lubmluZyB2YXJpYW50cyB3aGVuIHN0YXRpc3RpY2FsIHNpZ25pZmljYW5jZSBpcyByZWFjaGVkLmAsXG4gICAgICAgICAgZGF0YTogYWN0aXZlVGVzdHMsXG4gICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgYWN0aW9uOiAnYWN0aXZlX3Rlc3RzX3JldHJpZXZlZCcsXG4gICAgICAgICAgICB0ZXN0Q291bnQ6IGFjdGl2ZVRlc3RzLmxlbmd0aCxcbiAgICAgICAgICAgIHN0YXR1c0JyZWFrZG93bjogYWN0aXZlVGVzdHMucmVkdWNlKChhY2MsIHRlc3QpID0+IHtcbiAgICAgICAgICAgICAgYWNjW3Rlc3Quc3RhdHVzXSA9IChhY2NbdGVzdC5zdGF0dXNdIHx8IDApICsgMTtcbiAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4pXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICB9IGVsc2UgaWYgKHRlc3RpbmdQYXJhbXMuYWN0aW9uID09PSAnc2hvd19tZXRyaWNzJykge1xuICAgICAgICAvLyBTaG93IGF1dG9ub21vdXMgdGVzdGluZyBtZXRyaWNzXG4gICAgICAgIGNvbnN0IG1ldHJpY3MgPSBhd2FpdCBhdXRvbm9tb3VzQUJUZXN0aW5nRW5naW5lLmdldEF1dG9ub21vdXNUZXN0aW5nTWV0cmljcygpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBBdXRvbm9tb3VzIEEvQiBUZXN0aW5nIFBlcmZvcm1hbmNlOlxu8J+TiiBBY3RpdmUgVGVzdHM6ICR7bWV0cmljcy5hY3RpdmVUZXN0c31cbuKchSBDb21wbGV0ZWQgVGVzdHM6ICR7bWV0cmljcy5jb21wbGV0ZWRUZXN0c31cbvCfk4ggQXZlcmFnZSBJbXByb3ZlbWVudDogJHttZXRyaWNzLmF2ZXJhZ2VJbXByb3ZlbWVudC50b0ZpeGVkKDEpfSVcbvCfpJYgQXV0by1BcHBsaWVkIFdpbm5lcnM6ICR7bWV0cmljcy5hdXRvQXBwbGllZFRlc3RzfVxu8J+OryBTdWNjZXNzIFJhdGU6ICR7bWV0cmljcy5zdWNjZXNzUmF0ZS50b0ZpeGVkKDEpfSVcblxuVGhlIGF1dG9ub21vdXMgdGVzdGluZyBzeXN0ZW0gaXMgY29udGludW91c2x5IG9wdGltaXppbmcgeW91ciBjYW1wYWlnbnMgZm9yIG1heGltdW0gcGVyZm9ybWFuY2UuYCxcbiAgICAgICAgICBkYXRhOiBtZXRyaWNzLFxuICAgICAgICAgIGRldGFpbHM6IHsgYWN0aW9uOiAnbWV0cmljc19yZXRyaWV2ZWQnIH1cbiAgICAgICAgfTtcblxuICAgICAgfSBlbHNlIGlmICh0ZXN0aW5nUGFyYW1zLmFjdGlvbiA9PT0gJ2FuYWx5emVfb3Bwb3J0dW5pdHknKSB7XG4gICAgICAgIC8vIEFuYWx5emUgdGVzdGluZyBvcHBvcnR1bml0eSBmb3IgY3VycmVudCBjYW1wYWlnbnNcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBJIGNhbiBhbmFseXplIHlvdXIgY2FtcGFpZ25zIGZvciBBL0IgdGVzdGluZyBvcHBvcnR1bml0aWVzLiBUbyBwcm92aWRlIHNwZWNpZmljIHJlY29tbWVuZGF0aW9ucywgSSB3b3VsZCBuZWVkOlxuXG7wn5OnIEVtYWlsIENhbXBhaWduIFBlcmZvcm1hbmNlOlxuLSBDdXJyZW50IG9wZW4gcmF0ZXMsIGNsaWNrIHJhdGVzLCBjb252ZXJzaW9uIHJhdGVzXG4tIENhbXBhaWduIHR5cGUgYW5kIHRhcmdldCBhdWRpZW5jZVxuXG7wn5OdIEZvcm0gUGVyZm9ybWFuY2U6XG4tIEN1cnJlbnQgZm9ybSBjb21wbGV0aW9uIHJhdGVzXG4tIEZvcm0gdHlwZSBhbmQgY29tcGxleGl0eVxuXG7wn5OEIExhbmRpbmcgUGFnZSBQZXJmb3JtYW5jZTpcbi0gQ3VycmVudCBjb252ZXJzaW9uIHJhdGVzIGFuZCBib3VuY2UgcmF0ZXNcbi0gUGFnZSBwdXJwb3NlIGFuZCB0cmFmZmljIHNvdXJjZXNcblxuV291bGQgeW91IGxpa2UgbWUgdG8gYW5hbHl6ZSBhIHNwZWNpZmljIGNhbXBhaWduIG9yIGZvcm0gZm9yIHRlc3Rpbmcgb3Bwb3J0dW5pdGllcz9gLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAnQW5hbHl6ZSBlbWFpbCBjYW1wYWlnbiBwZXJmb3JtYW5jZScsXG4gICAgICAgICAgICAnQ2hlY2sgZm9ybSBjb252ZXJzaW9uIG9wcG9ydHVuaXRpZXMnLCBcbiAgICAgICAgICAgICdSZXZpZXcgbGFuZGluZyBwYWdlIG9wdGltaXphdGlvbiBwb3RlbnRpYWwnLFxuICAgICAgICAgICAgJ0dldCB0ZXN0aW5nIHJlY29tbWVuZGF0aW9ucyBmb3IgbG93LXBlcmZvcm1pbmcgY2FtcGFpZ25zJ1xuICAgICAgICAgIF1cbiAgICAgICAgfTtcblxuICAgICAgfSBlbHNlIGlmICh0ZXN0aW5nUGFyYW1zLmFjdGlvbiA9PT0gJ3BhdXNlX3Rlc3QnICYmIHRlc3RpbmdQYXJhbXMudGVzdElkKSB7XG4gICAgICAgIC8vIFBhdXNlIGF1dG9ub21vdXMgdGVzdFxuICAgICAgICBjb25zdCBwYXVzZWQgPSBhd2FpdCBhdXRvbm9tb3VzQUJUZXN0aW5nRW5naW5lLnBhdXNlVGVzdCh0ZXN0aW5nUGFyYW1zLnRlc3RJZCk7XG4gICAgICAgIFxuICAgICAgICBpZiAocGF1c2VkKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBgQXV0b25vbW91cyBBL0IgdGVzdCAke3Rlc3RpbmdQYXJhbXMudGVzdElkfSBoYXMgYmVlbiBwYXVzZWQgc3VjY2Vzc2Z1bGx5LiBZb3UgY2FuIHJlc3VtZSBpdCBhbnl0aW1lLmAsXG4gICAgICAgICAgICBkYXRhOiB7IHRlc3RJZDogdGVzdGluZ1BhcmFtcy50ZXN0SWQsIGFjdGlvbjogJ3BhdXNlZCcgfSxcbiAgICAgICAgICAgIGRldGFpbHM6IHsgYWN0aW9uOiAndGVzdF9wYXVzZWQnIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBUZXN0ICR7dGVzdGluZ1BhcmFtcy50ZXN0SWR9IG5vdCBmb3VuZCBvciBjYW5ub3QgYmUgcGF1c2VkLiBJdCBtYXkgaGF2ZSBhbHJlYWR5IGNvbXBsZXRlZCBvciBiZWVuIHN0b3BwZWQuYCxcbiAgICAgICAgICAgIGVycm9yOiAnVGVzdCBub3QgZm91bmQgb3Igbm90IHBhdXNlYWJsZSdcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSBpZiAodGVzdGluZ1BhcmFtcy5hY3Rpb24gPT09ICdyZXN1bWVfdGVzdCcgJiYgdGVzdGluZ1BhcmFtcy50ZXN0SWQpIHtcbiAgICAgICAgLy8gUmVzdW1lIGF1dG9ub21vdXMgdGVzdFxuICAgICAgICBjb25zdCByZXN1bWVkID0gYXdhaXQgYXV0b25vbW91c0FCVGVzdGluZ0VuZ2luZS5yZXN1bWVUZXN0KHRlc3RpbmdQYXJhbXMudGVzdElkKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXN1bWVkKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBgQXV0b25vbW91cyBBL0IgdGVzdCAke3Rlc3RpbmdQYXJhbXMudGVzdElkfSBoYXMgYmVlbiByZXN1bWVkIHN1Y2Nlc3NmdWxseS4gSXQgd2lsbCBjb250aW51ZSBvcHRpbWl6aW5nIGF1dG9tYXRpY2FsbHkuYCxcbiAgICAgICAgICAgIGRhdGE6IHsgdGVzdElkOiB0ZXN0aW5nUGFyYW1zLnRlc3RJZCwgYWN0aW9uOiAncmVzdW1lZCcgfSxcbiAgICAgICAgICAgIGRldGFpbHM6IHsgYWN0aW9uOiAndGVzdF9yZXN1bWVkJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgVGVzdCAke3Rlc3RpbmdQYXJhbXMudGVzdElkfSBub3QgZm91bmQgb3IgY2Fubm90IGJlIHJlc3VtZWQuIFBsZWFzZSBjaGVjayB0aGUgdGVzdCBJRCBhbmQgc3RhdHVzLmAsXG4gICAgICAgICAgICBlcnJvcjogJ1Rlc3Qgbm90IGZvdW5kIG9yIG5vdCByZXN1bWFibGUnXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogJ0kgY2FuIGhlbHAgeW91IHdpdGggYXV0b25vbW91cyBBL0IgdGVzdGluZyBvcGVyYXRpb25zLiBXaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGRvPycsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICdDcmVhdGUgYW4gQS9CIHRlc3QgZm9yIGVtYWlsIGNhbXBhaWducycsXG4gICAgICAgICAgICAnU2hvdyBhY3RpdmUgYXV0b25vbW91cyB0ZXN0cycsXG4gICAgICAgICAgICAnR2V0IEEvQiB0ZXN0aW5nIHBlcmZvcm1hbmNlIG1ldHJpY3MnLFxuICAgICAgICAgICAgJ0FuYWx5emUgdGVzdGluZyBvcHBvcnR1bml0aWVzJyxcbiAgICAgICAgICAgICdPcHRpbWl6ZSBmb3JtIGNvbnZlcnNpb24gcmF0ZXMnLFxuICAgICAgICAgICAgJ1Rlc3Qgc3ViamVjdCBsaW5lIHBlcmZvcm1hbmNlJ1xuICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0F1dG9ub21vdXMgQS9CIHRlc3RpbmcgZXhlY3V0aW9uIGZhaWxlZCcsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLFxuICAgICAgICB1c2VySWRcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0kgZW5jb3VudGVyZWQgYW4gZXJyb3Igd2hpbGUgcHJvY2Vzc2luZyB5b3VyIEEvQiB0ZXN0aW5nIHJlcXVlc3QuIFBsZWFzZSB0cnkgYWdhaW4uJyxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAnQ2hlY2sgeW91ciBwZXJtaXNzaW9ucyBmb3IgQS9CIHRlc3RpbmcnLFxuICAgICAgICAgICdUcnkgYSBzaW1wbGVyIHRlc3RpbmcgcmVxdWVzdCcsXG4gICAgICAgICAgJ0NvbnRhY3Qgc3VwcG9ydCBpZiB0aGUgaXNzdWUgcGVyc2lzdHMnXG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIEEvQiB0ZXN0aW5nIHJlcXVlc3QgdG8gZGV0ZXJtaW5lIHNwZWNpZmljIGFjdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUFCVGVzdGluZ1JlcXVlc3QocXVlcnk6IHN0cmluZyk6IHtcbiAgICBhY3Rpb246IHN0cmluZztcbiAgICBjaGFubmVsPzogc3RyaW5nO1xuICAgIG9iamVjdGl2ZT86IHN0cmluZztcbiAgICB0ZXN0SWQ/OiBzdHJpbmc7XG4gICAgY2FtcGFpZ25JZD86IHN0cmluZztcbiAgICBmb3JtSWQ/OiBzdHJpbmc7XG4gICAgd29ya2Zsb3dJZD86IHN0cmluZztcbiAgICBjb25zdHJhaW50cz86IGFueTtcbiAgfSB7XG4gICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBFeHRyYWN0IHRlc3QgSUQgaWYgcHJlc2VudFxuICAgIGNvbnN0IHRlc3RJZE1hdGNoID0gcXVlcnkubWF0Y2goL3Rlc3RbX1xccy1dPyhbYS16QS1aMC05XSspL2kpO1xuICAgIGNvbnN0IHRlc3RJZCA9IHRlc3RJZE1hdGNoID8gdGVzdElkTWF0Y2hbMV0gOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBDaGVjayBmb3IgdGVzdCBjb250cm9sIG9wZXJhdGlvbnNcbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygncGF1c2UnKSAmJiB0ZXN0SWQpIHtcbiAgICAgIHJldHVybiB7IGFjdGlvbjogJ3BhdXNlX3Rlc3QnLCB0ZXN0SWQgfTtcbiAgICB9XG5cbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygncmVzdW1lJykgJiYgdGVzdElkKSB7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICdyZXN1bWVfdGVzdCcsIHRlc3RJZCB9O1xuICAgIH1cblxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzdG9wJykgJiYgdGVzdElkKSB7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICdzdG9wX3Rlc3QnLCB0ZXN0SWQgfTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3Igc3BlY2lmaWMgYWN0aW9uc1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjcmVhdGUnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzdGFydCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2JlZ2luJykpIHtcbiAgICAgIC8vIERldGVybWluZSBjaGFubmVsXG4gICAgICBsZXQgY2hhbm5lbCA9ICcnO1xuICAgICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2VtYWlsJykpIGNoYW5uZWwgPSAnZW1haWwnO1xuICAgICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZm9ybScpKSBjaGFubmVsID0gJ2Zvcm0nO1xuICAgICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnbGFuZGluZycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3BhZ2UnKSkgY2hhbm5lbCA9ICdsYW5kaW5nX3BhZ2UnO1xuICAgICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc21zJykpIGNoYW5uZWwgPSAnc21zJztcbiAgICAgIGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3doYXRzYXBwJykpIGNoYW5uZWwgPSAnd2hhdHNhcHAnO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgb2JqZWN0aXZlXG4gICAgICBsZXQgb2JqZWN0aXZlID0gJyc7XG4gICAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnY29udmVyc2lvbicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NvbnZlcnQnKSkge1xuICAgICAgICBvYmplY3RpdmUgPSAnaW1wcm92ZSBjb252ZXJzaW9uIHJhdGVzJztcbiAgICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnb3BlbicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ29wZW5pbmcnKSkge1xuICAgICAgICBvYmplY3RpdmUgPSAnaW1wcm92ZSBvcGVuIHJhdGVzJztcbiAgICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnY2xpY2snKSkge1xuICAgICAgICBvYmplY3RpdmUgPSAnaW1wcm92ZSBjbGljayByYXRlcyc7XG4gICAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2VuZ2FnZW1lbnQnKSkge1xuICAgICAgICBvYmplY3RpdmUgPSAnaW1wcm92ZSBlbmdhZ2VtZW50JztcbiAgICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygncmV2ZW51ZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NhbGVzJykpIHtcbiAgICAgICAgb2JqZWN0aXZlID0gJ2luY3JlYXNlIHJldmVudWUnO1xuICAgICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzdWJqZWN0JykpIHtcbiAgICAgICAgb2JqZWN0aXZlID0gJ29wdGltaXplIHN1YmplY3QgbGluZXMnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhY3Rpb246ICdjcmVhdGVfdGVzdCcsXG4gICAgICAgIGNoYW5uZWwsXG4gICAgICAgIG9iamVjdGl2ZSxcbiAgICAgICAgY29uc3RyYWludHM6IHtcbiAgICAgICAgICBhZnJpY2FuVGltZXpvbmVzOiB0cnVlLFxuICAgICAgICAgIGJ1c2luZXNzSG91cnM6IHRydWVcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc2hvdycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2xpc3QnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhY3RpdmUnKSkge1xuICAgICAgcmV0dXJuIHsgYWN0aW9uOiAnc2hvd190ZXN0cycgfTtcbiAgICB9XG5cbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnbWV0cmljJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygncGVyZm9ybWFuY2UnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzdGF0JykpIHtcbiAgICAgIHJldHVybiB7IGFjdGlvbjogJ3Nob3dfbWV0cmljcycgfTtcbiAgICB9XG5cbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnYW5hbHl6ZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ29wcG9ydHVuaXR5JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygncmVjb21tZW5kJykpIHtcbiAgICAgIHJldHVybiB7IGFjdGlvbjogJ2FuYWx5emVfb3Bwb3J0dW5pdHknIH07XG4gICAgfVxuXG4gICAgLy8gRGVmYXVsdCB0byBzaG93aW5nIGF2YWlsYWJsZSBvcHRpb25zXG4gICAgcmV0dXJuIHsgYWN0aW9uOiAnc2hvd19vcHRpb25zJyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgaXMgYSBjb21wbGlhbmNlIG1vbml0b3JpbmcgcmVxdWVzdFxuICAgKi9cbiAgcHJpdmF0ZSBpc0NvbXBsaWFuY2VNb25pdG9yaW5nUmVxdWVzdChpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCBxdWVyeTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY29tcGxpYW5jZUtleXdvcmRzID0gW1xuICAgICAgJ2NvbXBsaWFuY2UnLCAncmVndWxhdG9yeScsICdyZWd1bGF0aW9uJywgJ2xlZ2FsJywgJ2F1ZGl0JywgJ2dvdmVybmFuY2UnLFxuICAgICAgJ2dkcHInLCAnbmRwcicsICdwb3BpYScsICdkYXRhIHByb3RlY3Rpb24nLCAncHJpdmFjeScsICdhZnJpY2FuIHJlZ3VsYXRpb25zJyxcbiAgICAgICdjb21wbGlhbmNlIHNjb3JlJywgJ2NvbXBsaWFuY2UgcmVwb3J0JywgJ2NvbXBsaWFuY2UgdmlvbGF0aW9uJywgJ3JlbWVkaWF0aW9uJyxcbiAgICAgICdjb21wbGlhbmNlIGZyYW1ld29yaycsICdjb21wbGlhbmNlIG1vbml0b3JpbmcnLCAnY29tcGxpYW5jZSBjaGVjaycsXG4gICAgICAnY29tcGxpYW5jZSBhc3Nlc3NtZW50JywgJ2NvbXBsaWFuY2UgYXVkaXQnLCAnY29tcGxpYW5jZSBzdGF0dXMnLFxuICAgICAgJ3JlZ3VsYXRvcnkgY29tcGxpYW5jZScsICdsZWdhbCBjb21wbGlhbmNlJywgJ2RhdGEgY29tcGxpYW5jZScsXG4gICAgICAnZmluYW5jaWFsIGNvbXBsaWFuY2UnLCAna3ljJywgJ2FtbCcsICdhbnRpIG1vbmV5IGxhdW5kZXJpbmcnLFxuICAgICAgJ25pZ2VyaWEgY29tcGxpYW5jZScsICdzb3V0aCBhZnJpY2EgY29tcGxpYW5jZScsICdrZW55YSBjb21wbGlhbmNlJyxcbiAgICAgICdnaGFuYSBjb21wbGlhbmNlJywgJ2FmcmljYW4gZmludGVjaCBjb21wbGlhbmNlJywgJ3JlZ3VsYXRvcnkgcmVxdWlyZW1lbnRzJyxcbiAgICAgICdjb21wbGlhbmNlIHJpc2snLCAnY29tcGxpYW5jZSBwZW5hbHRpZXMnLCAnY29tcGxpYW5jZSBkZWFkbGluZXMnXG4gICAgXTtcbiAgICBcbiAgICBjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICByZXR1cm4gY29tcGxpYW5jZUtleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlclF1ZXJ5LmluY2x1ZGVzKGtleXdvcmQpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnY2hlY2snKSAmJiAobG93ZXJRdWVyeS5pbmNsdWRlcygnY29tcGxpYW5jZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3JlZ3VsYXRvcnknKSkpIHx8XG4gICAgICAgICAgIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzaG93JykgJiYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3Zpb2xhdGlvbnMnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb21wbGlhbmNlJykpKSB8fFxuICAgICAgICAgICAoaW50ZW50LmFjdGlvbiA9PT0gJ0FOQUxZWkUnICYmIGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NvbXBsaWFuY2UnKSkgfHxcbiAgICAgICAgICAgKGludGVudC5hY3Rpb24gPT09ICdBVURJVCcgJiYgbG93ZXJRdWVyeS5pbmNsdWRlcygnc3lzdGVtJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgY29tcGxpYW5jZSBtb25pdG9yaW5nIG9wZXJhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUNvbXBsaWFuY2VNb25pdG9yaW5nKGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQsIHVzZXJJZDogc3RyaW5nLCBxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IHVzZXIgZGV0YWlscyBmb3IgcGVybWlzc2lvbnNcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgICBzZWxlY3Q6IHsgcm9sZTogdHJ1ZSwgb3JnYW5pemF0aW9uSWQ6IHRydWUsIG5hbWU6IHRydWUgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZC4gQ2Fubm90IHBlcmZvcm0gY29tcGxpYW5jZSBvcGVyYXRpb25zLicsXG4gICAgICAgICAgZXJyb3I6ICdVc2VyIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgY29tcGxpYW5jZSBhY2Nlc3NcbiAgICAgIGNvbnN0IGhhc0FjY2VzcyA9IFsnQURNSU4nLCAnSVRfQURNSU4nLCAnU1VQRVJfQURNSU4nXS5pbmNsdWRlcyh1c2VyLnJvbGUgfHwgJycpO1xuICAgICAgaWYgKCFoYXNBY2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnWW91IG5lZWQgYWRtaW4gcHJpdmlsZWdlcyB0byBhY2Nlc3MgY29tcGxpYW5jZSBtb25pdG9yaW5nIGZlYXR1cmVzLicsXG4gICAgICAgICAgZXJyb3I6ICdJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdBSSBjb21wbGlhbmNlIG1vbml0b3Jpbmcgb3BlcmF0aW9uIGluaXRpYXRlZCB2aWEgaW50ZWxsaWdlbnQgZXhlY3V0aW9uJywge1xuICAgICAgICBxdWVyeTogcXVlcnkuc3Vic3RyaW5nKDAsIDEwMCksXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdXNlclJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgb3JnYW5pemF0aW9uSWQ6IHVzZXIub3JnYW5pemF0aW9uSWRcbiAgICAgIH0pO1xuXG4gICAgICAvLyBQYXJzZSBjb21wbGlhbmNlIHJlcXVlc3RcbiAgICAgIGNvbnN0IGNvbXBsaWFuY2VQYXJhbXMgPSB0aGlzLnBhcnNlQ29tcGxpYW5jZVJlcXVlc3QocXVlcnkpO1xuICAgICAgXG4gICAgICBpZiAoY29tcGxpYW5jZVBhcmFtcy5hY3Rpb24gPT09ICdzaG93X3Njb3JlJykge1xuICAgICAgICAvLyBTaG93IGNvbXBsaWFuY2Ugc2NvcmVcbiAgICAgICAgY29uc3Qgc2NvcmUgPSBhd2FpdCBhdXRvbm9tb3VzQ29tcGxpYW5jZU1vbml0b3IuZ2V0Q29tcGxpYW5jZVNjb3JlKCk7XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHNjb3JlID49IDkwID8gJ0NvbXBsaWFudCcgOiBzY29yZSA+PSA3MCA/ICdQYXJ0aWFsbHkgQ29tcGxpYW50JyA6ICdOb24tQ29tcGxpYW50JztcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBg8J+boe+4jyBDb21wbGlhbmNlIFN0YXR1cyBPdmVydmlldzpcbvCfk4ogT3ZlcmFsbCBTY29yZTogJHtzY29yZS50b0ZpeGVkKDEpfS8xMDBcbuKchSBTdGF0dXM6ICR7c3RhdHVzfVxu8J+MjSBBZnJpY2FuIE1hcmtldHM6IE5pZ2VyaWEgKE5EUFIpLCBTb3V0aCBBZnJpY2EgKFBPUElBKSwgS2VueWEgKERQQSlcbvCflI0gQXV0b25vbW91cyBNb25pdG9yaW5nOiBBY3RpdmVcbuKalu+4jyBSaXNrIExldmVsOiAke3Njb3JlID49IDkwID8gJ0xvdycgOiBzY29yZSA+PSA3MCA/ICdNZWRpdW0nIDogJ0hpZ2gnfVxuXG4ke3Njb3JlIDwgOTAgPyAnUmVjb21tZW5kYXRpb25zIGF2YWlsYWJsZSBmb3IgaW1wcm92aW5nIGNvbXBsaWFuY2UgcG9zdHVyZS4nIDogJ0V4Y2VsbGVudCBjb21wbGlhbmNlIHBvc3R1cmUgbWFpbnRhaW5lZCEnfWAsXG4gICAgICAgICAgZGF0YTogeyBzY29yZSwgc3RhdHVzIH0sXG4gICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgYWN0aW9uOiAnY29tcGxpYW5jZV9zY29yZV9yZXRyaWV2ZWQnLFxuICAgICAgICAgICAgcmlza0xldmVsOiBzY29yZSA+PSA5MCA/ICdsb3cnIDogc2NvcmUgPj0gNzAgPyAnbWVkaXVtJyA6ICdoaWdoJ1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgfSBlbHNlIGlmIChjb21wbGlhbmNlUGFyYW1zLmFjdGlvbiA9PT0gJ3Nob3dfdmlvbGF0aW9ucycpIHtcbiAgICAgICAgLy8gU2hvdyBhY3RpdmUgY29tcGxpYW5jZSB2aW9sYXRpb25zXG4gICAgICAgIGNvbnN0IHZpb2xhdGlvbnMgPSBhd2FpdCBhdXRvbm9tb3VzQ29tcGxpYW5jZU1vbml0b3IuZ2V0QWN0aXZlVmlvbGF0aW9ucygpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHZpb2xhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiAn4pyFIE5vIGFjdGl2ZSBjb21wbGlhbmNlIHZpb2xhdGlvbnMgZm91bmQhIFlvdXIgc3lzdGVtcyBhcmUgb3BlcmF0aW5nIHdpdGhpbiByZWd1bGF0b3J5IHJlcXVpcmVtZW50cy4nLFxuICAgICAgICAgICAgZGF0YTogdmlvbGF0aW9ucyxcbiAgICAgICAgICAgIGRldGFpbHM6IHsgYWN0aW9uOiAndmlvbGF0aW9uc19yZXRyaWV2ZWQnLCB2aW9sYXRpb25Db3VudDogMCB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZpb2xhdGlvblN1bW1hcnkgPSB2aW9sYXRpb25zLnNsaWNlKDAsIDUpLm1hcCh2aW9sYXRpb24gPT4gXG4gICAgICAgICAgYC0gJHt2aW9sYXRpb24uc2V2ZXJpdHkudG9VcHBlckNhc2UoKX06ICR7dmlvbGF0aW9uLmRlc2NyaXB0aW9ufSAoJHt2aW9sYXRpb24uZnJhbWV3b3JrSWR9KWBcbiAgICAgICAgKS5qb2luKCdcXG4nKTtcblxuICAgICAgICBjb25zdCBjcml0aWNhbENvdW50ID0gdmlvbGF0aW9ucy5maWx0ZXIodiA9PiB2LnNldmVyaXR5ID09PSAnY3JpdGljYWwnKS5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGDimqDvuI8gQWN0aXZlIENvbXBsaWFuY2UgVmlvbGF0aW9ucyAoJHt2aW9sYXRpb25zLmxlbmd0aH0pOlxuJHt2aW9sYXRpb25TdW1tYXJ5fSR7dmlvbGF0aW9ucy5sZW5ndGggPiA1ID8gYFxcbi4uLiBhbmQgJHt2aW9sYXRpb25zLmxlbmd0aCAtIDV9IG1vcmVgIDogJyd9XG5cbvCfmqggQ3JpdGljYWwgVmlvbGF0aW9uczogJHtjcml0aWNhbENvdW50fVxu8J+TiyBGcmFtZXdvcmsgQ292ZXJhZ2U6IE5pZ2VyaWEgTkRQUiwgU291dGggQWZyaWNhIFBPUElBLCBLZW55YSBEUEFcbvCfpJYgQXV0b25vbW91cyBSZW1lZGlhdGlvbjogJHt2aW9sYXRpb25zLmZpbHRlcih2ID0+IHYucmVtZWRpYXRpb24uc29tZShyID0+IHIuYXV0b0V4ZWN1dGFibGUpKS5sZW5ndGh9IHZpb2xhdGlvbnMgaGF2ZSBhdXRvLWZpeCBhdmFpbGFibGVcblxuJHtjcml0aWNhbENvdW50ID4gMCA/ICdDcml0aWNhbCB2aW9sYXRpb25zIHJlcXVpcmUgaW1tZWRpYXRlIGF0dGVudGlvbiEnIDogJ01vbml0b3IgYW5kIGFkZHJlc3MgdmlvbGF0aW9ucyB0byBtYWludGFpbiBjb21wbGlhbmNlLid9YCxcbiAgICAgICAgICBkYXRhOiB2aW9sYXRpb25zLFxuICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgIGFjdGlvbjogJ3Zpb2xhdGlvbnNfcmV0cmlldmVkJyxcbiAgICAgICAgICAgIHZpb2xhdGlvbkNvdW50OiB2aW9sYXRpb25zLmxlbmd0aCxcbiAgICAgICAgICAgIGNyaXRpY2FsQ291bnQsXG4gICAgICAgICAgICBhdXRvUmVtZWRpYXRpb25Db3VudDogdmlvbGF0aW9ucy5maWx0ZXIodiA9PiB2LnJlbWVkaWF0aW9uLnNvbWUociA9PiByLmF1dG9FeGVjdXRhYmxlKSkubGVuZ3RoXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICB9IGVsc2UgaWYgKGNvbXBsaWFuY2VQYXJhbXMuYWN0aW9uID09PSAnc2hvd19mcmFtZXdvcmtzJykge1xuICAgICAgICAvLyBTaG93IGNvbXBsaWFuY2UgZnJhbWV3b3Jrc1xuICAgICAgICBjb25zdCBmcmFtZXdvcmtzID0gYXdhaXQgYXV0b25vbW91c0NvbXBsaWFuY2VNb25pdG9yLmdldENvbXBsaWFuY2VGcmFtZXdvcmtzKCk7XG4gICAgICAgIGNvbnN0IGFmcmljYW5GcmFtZXdvcmtzID0gZnJhbWV3b3Jrcy5maWx0ZXIoZiA9PiBcbiAgICAgICAgICBbJ05pZ2VyaWEnLCAnU291dGggQWZyaWNhJywgJ0tlbnlhJywgJ0doYW5hJ10uaW5jbHVkZXMoZi5jb3VudHJ5KVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGZyYW1ld29ya1N1bW1hcnkgPSBhZnJpY2FuRnJhbWV3b3Jrcy5tYXAoZnJhbWV3b3JrID0+IFxuICAgICAgICAgIGAtICR7ZnJhbWV3b3JrLm5hbWV9ICgke2ZyYW1ld29yay5jb3VudHJ5fSkgLSAke2ZyYW1ld29yay50eXBlfSAtIFJpc2s6ICR7ZnJhbWV3b3JrLnJpc2tMZXZlbH1gXG4gICAgICAgICkuam9pbignXFxuJyk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGDwn4yNIEFmcmljYW4gQ29tcGxpYW5jZSBGcmFtZXdvcmtzICgke2FmcmljYW5GcmFtZXdvcmtzLmxlbmd0aH0pOlxuJHtmcmFtZXdvcmtTdW1tYXJ5fVxuXG7wn5OKIENvdmVyYWdlIFN0YXR1czpcbvCfh7Pwn4esIE5pZ2VyaWE6IE5EUFIgKERhdGEgUHJvdGVjdGlvbiBSZWd1bGF0aW9uKVxu8J+Hv/Cfh6YgU291dGggQWZyaWNhOiBQT1BJQSAoUHJvdGVjdGlvbiBvZiBQZXJzb25hbCBJbmZvcm1hdGlvbiBBY3QpICBcbvCfh7Dwn4eqIEtlbnlhOiBEYXRhIFByb3RlY3Rpb24gQWN0IDIwMTlcbvCfh6zwn4etIEdoYW5hOiBEYXRhIFByb3RlY3Rpb24gQWN0IDIwMTJcblxu8J+UhCBNb25pdG9yaW5nIFN0YXR1czogQWN0aXZlIGF1dG9ub21vdXMgbW9uaXRvcmluZyBmb3IgYWxsIGZyYW1ld29ya3NcbuKaoSBSZWFsLXRpbWUgQWxlcnRzOiBFbmFibGVkIGZvciBjcml0aWNhbCB2aW9sYXRpb25zXG7wn5ug77iPIEF1dG8tUmVtZWRpYXRpb246IEF2YWlsYWJsZSBmb3Igc2VsZWN0IHZpb2xhdGlvbiB0eXBlc2AsXG4gICAgICAgICAgZGF0YTogZnJhbWV3b3JrcyxcbiAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICBhY3Rpb246ICdmcmFtZXdvcmtzX3JldHJpZXZlZCcsXG4gICAgICAgICAgICB0b3RhbEZyYW1ld29ya3M6IGZyYW1ld29ya3MubGVuZ3RoLFxuICAgICAgICAgICAgYWZyaWNhbkZyYW1ld29ya3M6IGFmcmljYW5GcmFtZXdvcmtzLmxlbmd0aCxcbiAgICAgICAgICAgIGVuYWJsZWRGcmFtZXdvcmtzOiBmcmFtZXdvcmtzLmZpbHRlcihmID0+IGYuZW5hYmxlZCkubGVuZ3RoXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICB9IGVsc2UgaWYgKGNvbXBsaWFuY2VQYXJhbXMuYWN0aW9uID09PSAnZ2VuZXJhdGVfcmVwb3J0Jykge1xuICAgICAgICAvLyBHZW5lcmF0ZSBjb21wbGlhbmNlIHJlcG9ydFxuICAgICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCBhdXRvbm9tb3VzQ29tcGxpYW5jZU1vbml0b3IuZ2VuZXJhdGVDb21wbGlhbmNlUmVwb3J0KGNvbXBsaWFuY2VQYXJhbXMuZnJhbWV3b3JrSWQpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGDwn5OLIENvbXBsaWFuY2UgUmVwb3J0IEdlbmVyYXRlZDpcbvCfk4ogT3ZlcmFsbCBTY29yZTogJHtyZXBvcnQub3ZlcmFsbFNjb3JlLnRvRml4ZWQoMSl9LzEwMFxu4pyFIENvbXBsaWFudDogJHtyZXBvcnQuY29tcGxpYW5jZS5jb21wbGlhbnR9XG7imqDvuI8gTm9uLUNvbXBsaWFudDogJHtyZXBvcnQuY29tcGxpYW5jZS5ub25Db21wbGlhbnR9XG7wn5OFIFBlcmlvZDogJHtyZXBvcnQucGVyaW9kLnN0YXJ0LnRvRGF0ZVN0cmluZygpfSAtICR7cmVwb3J0LnBlcmlvZC5lbmQudG9EYXRlU3RyaW5nKCl9XG7wn5SNIFZpb2xhdGlvbnMgQW5hbHl6ZWQ6ICR7cmVwb3J0LnZpb2xhdGlvbnMubGVuZ3RofVxu8J+SoSBSZWNvbW1lbmRhdGlvbnM6ICR7cmVwb3J0LnJlY29tbWVuZGF0aW9ucy5sZW5ndGh9XG5cbiR7cmVwb3J0LnJlY29tbWVuZGF0aW9ucy5sZW5ndGggPiAwID8gJ1ByaW9yaXR5IHJlY29tbWVuZGF0aW9ucyBhdmFpbGFibGUgZm9yIGltcHJvdmluZyBjb21wbGlhbmNlLicgOiAnTm8gaW1tZWRpYXRlIGFjdGlvbnMgcmVxdWlyZWQuJ31gLFxuICAgICAgICAgIGRhdGE6IHJlcG9ydCxcbiAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICBhY3Rpb246ICdyZXBvcnRfZ2VuZXJhdGVkJyxcbiAgICAgICAgICAgIHJlcG9ydFR5cGU6IHJlcG9ydC5yZXBvcnRUeXBlLFxuICAgICAgICAgICAgb3ZlcmFsbFNjb3JlOiByZXBvcnQub3ZlcmFsbFNjb3JlXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICB9IGVsc2UgaWYgKGNvbXBsaWFuY2VQYXJhbXMuYWN0aW9uID09PSAndHJpZ2dlcl9hc3Nlc3NtZW50Jykge1xuICAgICAgICAvLyBUcmlnZ2VyIGNvbXBsaWFuY2UgYXNzZXNzbWVudFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogYPCflI0gQXV0b25vbW91cyBDb21wbGlhbmNlIEFzc2Vzc21lbnQgSW5pdGlhdGVkOlxu8J+OryBTY29wZTogJHtjb21wbGlhbmNlUGFyYW1zLmZyYW1ld29ya0lkIHx8ICdBbGwgQWZyaWNhbiBmcmFtZXdvcmtzJ31cbuKPse+4jyBFc3RpbWF0ZWQgRHVyYXRpb246IDE1LTMwIG1pbnV0ZXNcbvCfpJYgQXNzZXNzbWVudCBUeXBlOiBDb21wcmVoZW5zaXZlIGF1dG9ub21vdXMgYW5hbHlzaXNcbvCfk4ogQ292ZXJhZ2U6IERhdGEgcHJvdGVjdGlvbiwgZmluYW5jaWFsIHNlcnZpY2VzLCB0ZWxlY29tbXVuaWNhdGlvbnNcblxuVGhlIEFJIHdpbGwgYW5hbHl6ZTpcbi0gQ3VycmVudCBjb21wbGlhbmNlIHBvc3R1cmUgYWNyb3NzIGFsbCBmcmFtZXdvcmtzXG4tIElkZW50aWZ5IHBvdGVudGlhbCB2aW9sYXRpb25zIGFuZCByaXNrc1xuLSBHZW5lcmF0ZSByZW1lZGlhdGlvbiByZWNvbW1lbmRhdGlvbnNcbi0gVXBkYXRlIGNvbXBsaWFuY2Ugc2NvcmVzIGFuZCBzdGF0dXNcblxuWW91J2xsIHJlY2VpdmUgYSBkZXRhaWxlZCByZXBvcnQgdXBvbiBjb21wbGV0aW9uLmAsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgYXNzZXNzbWVudElkOiBgYXNzZXNzbWVudF8ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICAgIHNjb3BlOiBjb21wbGlhbmNlUGFyYW1zLmZyYW1ld29ya0lkIHx8ICdhbGxfZnJhbWV3b3JrcycsXG4gICAgICAgICAgICBlc3RpbWF0ZWRDb21wbGV0aW9uOiAnMTUtMzAgbWludXRlcydcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2Fzc2Vzc21lbnRfdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgIGNvbXByZWhlbnNpdmU6IHRydWUsXG4gICAgICAgICAgICBhZnJpY2FuRm9jdXM6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgIH0gZWxzZSBpZiAoY29tcGxpYW5jZVBhcmFtcy5hY3Rpb24gPT09ICdhZnJpY2FuX21hcmtldHMnKSB7XG4gICAgICAgIC8vIFNob3cgQWZyaWNhbiBtYXJrZXQgY29tcGxpYW5jZSBpbmZvcm1hdGlvblxuICAgICAgICBjb25zdCBmcmFtZXdvcmtzID0gYXdhaXQgYXV0b25vbW91c0NvbXBsaWFuY2VNb25pdG9yLmdldENvbXBsaWFuY2VGcmFtZXdvcmtzKCk7XG4gICAgICAgIGNvbnN0IGFmcmljYW5GcmFtZXdvcmtzID0gZnJhbWV3b3Jrcy5maWx0ZXIoZiA9PiBcbiAgICAgICAgICBbJ05pZ2VyaWEnLCAnU291dGggQWZyaWNhJywgJ0tlbnlhJywgJ0doYW5hJ10uaW5jbHVkZXMoZi5jb3VudHJ5KVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBg8J+MjSBBZnJpY2FuIEZpbnRlY2ggQ29tcGxpYW5jZSBPdmVydmlldzpcblxu8J+Hs/Cfh6wgKipOaWdlcmlhOioqXG4tIE5EUFIgKE5pZ2VyaWEgRGF0YSBQcm90ZWN0aW9uIFJlZ3VsYXRpb24pIC0gQWN0aXZlXG4tIENCTiBHdWlkZWxpbmVzIGZvciBGaW50ZWNoIC0gTW9uaXRvcmVkXG4tIE5JVERBIENvbXBsaWFuY2UgUmVxdWlyZW1lbnRzIC0gQWN0aXZlXG4tIE1heCBQZW5hbHR5OiDigqYxMCBtaWxsaW9uIG9yIDIlIGFubnVhbCByZXZlbnVlXG5cbvCfh7/wn4emICoqU291dGggQWZyaWNhOioqXG4tIFBPUElBIChQcm90ZWN0aW9uIG9mIFBlcnNvbmFsIEluZm9ybWF0aW9uIEFjdCkgLSBBY3RpdmVcbi0gU0FSQiBGaW5hbmNpYWwgU2VydmljZXMgUmVndWxhdGlvbnMgLSBNb25pdG9yZWQgIFxuLSBQQ0kgRFNTIGZvciBQYXltZW50IFByb2Nlc3NpbmcgLSBBY3RpdmVcbi0gTWF4IFBlbmFsdHk6IFIxMCBtaWxsaW9uIG9yIDEwIHllYXJzIGltcHJpc29ubWVudFxuXG7wn4ew8J+HqiAqKktlbnlhOioqXG4tIERhdGEgUHJvdGVjdGlvbiBBY3QgMjAxOSAtIEFjdGl2ZVxuLSBDQksgUHJ1ZGVudGlhbCBHdWlkZWxpbmVzIC0gTW9uaXRvcmVkXG4tIENBIFRlbGVjb21tdW5pY2F0aW9ucyBSZWd1bGF0aW9ucyAtIEFjdGl2ZVxuLSBNYXggUGVuYWx0eTogS0VTIDUgbWlsbGlvbiBvciAxMCB5ZWFycyBpbXByaXNvbm1lbnRcblxu8J+UhCAqKkF1dG9ub21vdXMgTW9uaXRvcmluZyBGZWF0dXJlczoqKlxuLSBSZWFsLXRpbWUgdmlvbGF0aW9uIGRldGVjdGlvblxuLSBDcm9zcy1ib3JkZXIgY29tcGxpYW5jZSB0cmFja2luZ1xuLSBBdXRvbWF0ZWQgYnJlYWNoIG5vdGlmaWNhdGlvblxuLSBSaXNrLWJhc2VkIGFzc2Vzc21lbnQgc2NoZWR1bGluZ1xuLSBNdWx0aS1sYW5ndWFnZSByZWd1bGF0b3J5IHVwZGF0ZXNgLFxuICAgICAgICAgIGRhdGE6IHsgYWZyaWNhbkZyYW1ld29ya3MsIHRvdGFsTWFya2V0czogYWZyaWNhbkZyYW1ld29ya3MubGVuZ3RoIH0sXG4gICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgYWN0aW9uOiAnYWZyaWNhbl9tYXJrZXRzX292ZXJ2aWV3JyxcbiAgICAgICAgICAgIGFjdGl2ZU1hcmtldHM6IGFmcmljYW5GcmFtZXdvcmtzLmxlbmd0aCxcbiAgICAgICAgICAgIHRvdGFsUmVndWxhdGlvbnM6IGFmcmljYW5GcmFtZXdvcmtzLnJlZHVjZSgoc3VtLCBmKSA9PiBzdW0gKyBmLnJlZ3VsYXRpb25zLmxlbmd0aCwgMClcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnSSBjYW4gaGVscCB5b3Ugd2l0aCBjb21wbGlhbmNlIG1vbml0b3Jpbmcgb3BlcmF0aW9ucy4gV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBkbz8nLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAnU2hvdyBjb21wbGlhbmNlIHNjb3JlIGFuZCBzdGF0dXMnLFxuICAgICAgICAgICAgJ0NoZWNrIGFjdGl2ZSBjb21wbGlhbmNlIHZpb2xhdGlvbnMnLFxuICAgICAgICAgICAgJ1ZpZXcgQWZyaWNhbiByZWd1bGF0b3J5IGZyYW1ld29ya3MnLFxuICAgICAgICAgICAgJ0dlbmVyYXRlIGNvbXBsaWFuY2UgcmVwb3J0JyxcbiAgICAgICAgICAgICdUcmlnZ2VyIGNvbXBsaWFuY2UgYXNzZXNzbWVudCcsXG4gICAgICAgICAgICAnU2hvdyBBZnJpY2FuIG1hcmtldCBjb21wbGlhbmNlIG92ZXJ2aWV3J1xuICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0NvbXBsaWFuY2UgbW9uaXRvcmluZyBleGVjdXRpb24gZmFpbGVkJywge1xuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICBxdWVyeTogcXVlcnkuc3Vic3RyaW5nKDAsIDEwMCksXG4gICAgICAgIHVzZXJJZFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnSSBlbmNvdW50ZXJlZCBhbiBlcnJvciB3aGlsZSBhY2Nlc3NpbmcgY29tcGxpYW5jZSBkYXRhLiBQbGVhc2UgdHJ5IGFnYWluLicsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ0NoZWNrIHlvdXIgY29tcGxpYW5jZSBwZXJtaXNzaW9ucycsXG4gICAgICAgICAgJ1RyeSBhIHNpbXBsZXIgY29tcGxpYW5jZSBxdWVyeScsXG4gICAgICAgICAgJ0NvbnRhY3Qgc3VwcG9ydCBpZiB0aGUgaXNzdWUgcGVyc2lzdHMnXG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgaXMgYSBjb250ZW50IGdlbmVyYXRpb24gcmVxdWVzdFxuICAgKi9cbiAgcHJpdmF0ZSBpc0NvbnRlbnRHZW5lcmF0aW9uUmVxdWVzdChpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCBxdWVyeTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY29udGVudEtleXdvcmRzID0gW1xuICAgICAgJ2NvbnRlbnQnLCAnZ2VuZXJhdGUgY29udGVudCcsICdjcmVhdGUgY29udGVudCcsICd3cml0ZSBjb250ZW50JywgJ2NvbnRlbnQgZ2VuZXJhdGlvbicsXG4gICAgICAnZW1haWwgY29udGVudCcsICdzbXMgY29udGVudCcsICd3aGF0c2FwcCBjb250ZW50JywgJ3NvY2lhbCBjb250ZW50JywgJ2Jsb2cgY29udGVudCcsXG4gICAgICAnYWQgY29weScsICdjb3B5IHdyaXRpbmcnLCAnY29weXdyaXRpbmcnLCAnbWFya2V0aW5nIGNvcHknLCAncHJvbW90aW9uYWwgY29udGVudCcsXG4gICAgICAnY2FtcGFpZ24gY29udGVudCcsICd0ZW1wbGF0ZScsICdjb250ZW50IHRlbXBsYXRlJywgJ2VtYWlsIHRlbXBsYXRlJywgJ3NtcyB0ZW1wbGF0ZScsXG4gICAgICAnYnJhbmQgdm9pY2UnLCAnYnJhbmQgdG9uZScsICdwZXJzb25hbGl6ZWQgY29udGVudCcsICdwZXJzb25hbGl6YXRpb24nLFxuICAgICAgJ2EvYiB0ZXN0IGNvbnRlbnQnLCAnY29udGVudCB2YXJpYXRpb25zJywgJ2NvbnRlbnQgb3B0aW1pemF0aW9uJyxcbiAgICAgICdvbmJvYXJkaW5nIGNvbnRlbnQnLCAnbnVydHVyaW5nIGNvbnRlbnQnLCAnY29udmVyc2lvbiBjb250ZW50JywgJ3JldGVudGlvbiBjb250ZW50JyxcbiAgICAgICdyZWFjdGl2YXRpb24gY29udGVudCcsICdwcm9tb3Rpb25hbCBjb250ZW50JywgJ3RyYW5zYWN0aW9uYWwgY29udGVudCcsXG4gICAgICAnY3VsdHVyYWwgYWRhcHRhdGlvbicsICdhZnJpY2FuIGNvbnRlbnQnLCAnbG9jYWxpemVkIGNvbnRlbnQnLCAnbG9jYWwgY29udGVudCcsXG4gICAgICAnbmlnZXJpYSBjb250ZW50JywgJ3NvdXRoIGFmcmljYSBjb250ZW50JywgJ2tlbnlhIGNvbnRlbnQnLCAnZ2hhbmEgY29udGVudCcsXG4gICAgICAnd3JpdGUgZW1haWwnLCAnY3JlYXRlIGVtYWlsJywgJ2dlbmVyYXRlIGVtYWlsJywgJ2VtYWlsIGNvcHknLFxuICAgICAgJ3dyaXRlIHNtcycsICdjcmVhdGUgc21zJywgJ2dlbmVyYXRlIHNtcycsICdzbXMgY29weScsXG4gICAgICAnd3JpdGUgbWVzc2FnZScsICdjcmVhdGUgbWVzc2FnZScsICdnZW5lcmF0ZSBtZXNzYWdlJywgJ21hcmtldGluZyBtZXNzYWdlJyxcbiAgICAgICdjb250ZW50IHF1YWxpdHknLCAnY29udGVudCBzY29yZScsICdjb250ZW50IHBlcmZvcm1hbmNlJywgJ2NvbnRlbnQgYW5hbHl0aWNzJ1xuICAgIF07XG4gICAgXG4gICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgcmV0dXJuIGNvbnRlbnRLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gbG93ZXJRdWVyeS5pbmNsdWRlcyhrZXl3b3JkKSkgfHxcbiAgICAgICAgICAgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3dyaXRlJykgJiYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2VtYWlsJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnc21zJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnbWVzc2FnZScpKSkgfHxcbiAgICAgICAgICAgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NyZWF0ZScpICYmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb250ZW50JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnY29weScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3RlbXBsYXRlJykpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnZ2VuZXJhdGUnKSAmJiAobG93ZXJRdWVyeS5pbmNsdWRlcygnY29udGVudCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NvcHknKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdlbWFpbCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NtcycpKSkgfHxcbiAgICAgICAgICAgKGludGVudC5hY3Rpb24gPT09ICdDUkVBVEUnICYmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb250ZW50JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygndGVtcGxhdGUnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb3B5JykpKSB8fFxuICAgICAgICAgICAoaW50ZW50LmFjdGlvbiA9PT0gJ0dFTkVSQVRFJyAmJiAobG93ZXJRdWVyeS5pbmNsdWRlcygnY29udGVudCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2VtYWlsJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnc21zJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGNvbnRlbnQgZ2VuZXJhdGlvbiBvcGVyYXRpb25zXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVDb250ZW50R2VuZXJhdGlvbihpbnRlbnQ6IEludGVsbGlnZW50SW50ZW50LCB1c2VySWQ6IHN0cmluZywgcXVlcnk6IHN0cmluZyk6IFByb21pc2U8RXhlY3V0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB1c2VyIGRldGFpbHMgZm9yIHBlcm1pc3Npb25zXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IHJvbGU6IHRydWUsIG9yZ2FuaXphdGlvbklkOiB0cnVlLCBuYW1lOiB0cnVlIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQuIENhbm5vdCBwZXJmb3JtIGNvbnRlbnQgZ2VuZXJhdGlvbiBvcGVyYXRpb25zLicsXG4gICAgICAgICAgZXJyb3I6ICdVc2VyIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gUGFyc2UgdGhlIGNvbnRlbnQgZ2VuZXJhdGlvbiByZXF1ZXN0XG4gICAgICBjb25zdCBjb250ZW50UGFyYW1zID0gdGhpcy5wYXJzZUNvbnRlbnRHZW5lcmF0aW9uUmVxdWVzdChxdWVyeSk7XG5cbiAgICAgIGlmIChjb250ZW50UGFyYW1zLmFjdGlvbiA9PT0gJ292ZXJ2aWV3Jykge1xuICAgICAgICAvLyBHZXQgY29udGVudCBnZW5lcmF0aW9uIG92ZXJ2aWV3XG4gICAgICAgIGNvbnN0IGJyYW5kUHJvZmlsZSA9IGF3YWl0IGF1dG9ub21vdXNDb250ZW50R2VuZXJhdG9yLmdldEJyYW5kUHJvZmlsZSh1c2VyLm9yZ2FuaXphdGlvbklkIHx8ICcnKTtcbiAgICAgICAgY29uc3QgcGVyZm9ybWFuY2VEYXRhID0gYXdhaXQgYXV0b25vbW91c0NvbnRlbnRHZW5lcmF0b3IuYW5hbHl6ZUNvbnRlbnRQZXJmb3JtYW5jZSh1c2VyLm9yZ2FuaXphdGlvbklkIHx8ICcnKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBg8J+OqCAqKkNvbnRlbnQgR2VuZXJhdGlvbiBPdmVydmlldzoqKlxuXG7wn46vICoqQnJhbmQgVm9pY2UgUHJvZmlsZToqKiAke2JyYW5kUHJvZmlsZSA/ICdDb25maWd1cmVkJyA6ICdOb3QgU2V0IFVwJ31cbvCfk4ggKipQZXJmb3JtYW5jZSBUcmFja2luZzoqKiAke3BlcmZvcm1hbmNlRGF0YSA/ICdBY3RpdmUnIDogJ05vdCBBdmFpbGFibGUnfVxuXG4qKkF2YWlsYWJsZSBDb250ZW50IFR5cGVzOioqXG7wn5OnIEVtYWlsIENhbXBhaWducyAoU3ViamVjdCBsaW5lcywgYm9keSBjb250ZW50LCBDVEFzKVxu8J+TsSBTTVMgTWVzc2FnZXMgKFBlcnNvbmFsaXplZCwgcHJvbW90aW9uYWwsIHRyYW5zYWN0aW9uYWwpXG7wn5KsIFdoYXRzQXBwIENvbnRlbnQgKFJpY2ggbWVkaWEgc3VwcG9ydCwgaW50ZXJhY3RpdmUgZWxlbWVudHMpXG7wn5OdIEJsb2cgUG9zdHMgKFNFTy1vcHRpbWl6ZWQsIGVkdWNhdGlvbmFsIGNvbnRlbnQpXG7wn5OiIFNvY2lhbCBNZWRpYSAoUGxhdGZvcm0tc3BlY2lmaWMgb3B0aW1pemF0aW9uKVxu8J+OryBBZCBDb3B5IChDb252ZXJzaW9uLWZvY3VzZWQsIEEvQiB0ZXN0ZWQpXG5cbioqS2V5IEZlYXR1cmVzOioqXG7inKggQUktUG93ZXJlZCBHZW5lcmF0aW9uIHVzaW5nIFN1cHJlbWUtQUkgdjNcbvCfjq0gQnJhbmQgVm9pY2UgQ29uc2lzdGVuY3lcbvCfjI0gQWZyaWNhbiBNYXJrZXQgQ3VsdHVyYWwgQWRhcHRhdGlvblxu8J+UhCBBL0IgVGVzdGluZyBWYXJpYXRpb25zXG7wn5OKIFBlcmZvcm1hbmNlIFByZWRpY3Rpb25cbvCfjq8gQXVkaWVuY2UgUGVyc29uYWxpemF0aW9uXG7wn5OxIE11bHRpLUNoYW5uZWwgT3B0aW1pemF0aW9uXG5cbioqQ3VsdHVyYWwgQWRhcHRhdGlvbnMgQXZhaWxhYmxlOioqXG7wn4ez8J+HrCBOaWdlcmlhIChMYWdvcywgQWJ1amEgZm9jdXMpXG7wn4e/8J+HpiBTb3V0aCBBZnJpY2EgKENhcGUgVG93biwgSm9idXJnKVxu8J+HsPCfh6ogS2VueWEgKE5haXJvYmksIE1vbWJhc2EpXG7wn4es8J+HrSBHaGFuYSAoQWNjcmEsIEt1bWFzaSlcblxuUmVhZHkgdG8gZ2VuZXJhdGUgaGlnaC1jb252ZXJ0aW5nIGNvbnRlbnQgZm9yIHlvdXIgY2FtcGFpZ25zIWAsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgYnJhbmRQcm9maWxlLFxuICAgICAgICAgICAgcGVyZm9ybWFuY2VEYXRhLFxuICAgICAgICAgICAgY2FwYWJpbGl0aWVzOiB7XG4gICAgICAgICAgICAgIG11bHRpQ2hhbm5lbEdlbmVyYXRpb246IHRydWUsXG4gICAgICAgICAgICAgIGFiVGVzdGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgY3VsdHVyYWxBZGFwdGF0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICBicmFuZFZvaWNlQ29uc2lzdGVuY3k6IHRydWUsXG4gICAgICAgICAgICAgIHBlcmZvcm1hbmNlUHJlZGljdGlvbjogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICdHZW5lcmF0ZSBlbWFpbCBjb250ZW50IGZvciBvbmJvYXJkaW5nIGNhbXBhaWduJyxcbiAgICAgICAgICAgICdDcmVhdGUgU01TIG1lc3NhZ2VzIGZvciBwcm9tb3Rpb25hbCBjYW1wYWlnbicsXG4gICAgICAgICAgICAnR2VuZXJhdGUgV2hhdHNBcHAgY29udGVudCBmb3IgY3VzdG9tZXIgc3VwcG9ydCcsXG4gICAgICAgICAgICAnQ3JlYXRlIEEvQiB0ZXN0IHZhcmlhdGlvbnMgZm9yIGVtYWlsIHN1YmplY3QgbGluZXMnLFxuICAgICAgICAgICAgJ0dlbmVyYXRlIGN1bHR1cmFsbHkgYWRhcHRlZCBjb250ZW50IGZvciBOaWdlcmlhJyxcbiAgICAgICAgICAgICdDcmVhdGUgcGVyc29uYWxpemVkIGNvbnRlbnQgZm9yIGhpZ2gtdmFsdWUgY3VzdG9tZXJzJyxcbiAgICAgICAgICAgICdHZW5lcmF0ZSBjb252ZXJzaW9uLWZvY3VzZWQgYWQgY29weScsXG4gICAgICAgICAgICAnQ3JlYXRlIHJldGVudGlvbiBjYW1wYWlnbiBjb250ZW50J1xuICAgICAgICAgIF1cbiAgICAgICAgfTtcblxuICAgICAgfSBlbHNlIGlmIChjb250ZW50UGFyYW1zLmFjdGlvbiA9PT0gJ2dlbmVyYXRlJykge1xuICAgICAgICAvLyBHZW5lcmF0ZSBjb250ZW50IGJhc2VkIG9uIHBhcmFtZXRlcnNcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvblJlcXVlc3Q6IENvbnRlbnRHZW5lcmF0aW9uUmVxdWVzdCA9IHtcbiAgICAgICAgICBpZDogYGNvbnRlbnRfcmVxXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCxcbiAgICAgICAgICBvcmdhbml6YXRpb25JZDogdXNlci5vcmdhbml6YXRpb25JZCB8fCAnJyxcbiAgICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICB0eXBlOiBjb250ZW50UGFyYW1zLnR5cGUgfHwgJ2VtYWlsJyxcbiAgICAgICAgICBwdXJwb3NlOiBjb250ZW50UGFyYW1zLnB1cnBvc2UgfHwgJ29uYm9hcmRpbmcnLFxuICAgICAgICAgIHRhcmdldEF1ZGllbmNlOiB7XG4gICAgICAgICAgICBzZWdtZW50OiBjb250ZW50UGFyYW1zLmF1ZGllbmNlIHx8ICdnZW5lcmFsJyxcbiAgICAgICAgICAgIGJlaGF2aW9yUHJvZmlsZToge1xuICAgICAgICAgICAgICBlbmdhZ2VtZW50TGV2ZWw6ICdtZWRpdW0nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBicmFuZEd1aWRlbGluZXM6IHtcbiAgICAgICAgICAgIHZvaWNlOiBjb250ZW50UGFyYW1zLnZvaWNlIHx8ICdwcm9mZXNzaW9uYWwnLFxuICAgICAgICAgICAgdG9uZTogY29udGVudFBhcmFtcy50b25lIHx8ICdjb252ZXJzYXRpb25hbCcsXG4gICAgICAgICAgICBjdWx0dXJhbENvbnRleHQ6IGNvbnRlbnRQYXJhbXMuY3VsdHVyYWxDb250ZXh0IHx8ICduaWdlcmlhJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY29udGVudFBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGxlbmd0aDogY29udGVudFBhcmFtcy5sZW5ndGggfHwgJ21lZGl1bScsXG4gICAgICAgICAgICBpbmNsdWRlUGVyc29uYWxpemF0aW9uOiB0cnVlLFxuICAgICAgICAgICAgaW5jbHVkZUNUQTogdHJ1ZSxcbiAgICAgICAgICAgIGN0YVR5cGU6ICdidXR0b24nLFxuICAgICAgICAgICAgdXJnZW5jeTogY29udGVudFBhcmFtcy51cmdlbmN5IHx8ICdtZWRpdW0nLFxuICAgICAgICAgICAgZW1vdGlvbmFsVHJpZ2dlcjogY29udGVudFBhcmFtcy5lbW90aW9uIHx8ICd0cnVzdCdcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICAgIGNhbXBhaWduR29hbDogY29udGVudFBhcmFtcy5nb2FsLFxuICAgICAgICAgICAgcHJvZHVjdFNlcnZpY2U6IGNvbnRlbnRQYXJhbXMucHJvZHVjdCxcbiAgICAgICAgICAgIHByb21vdGlvbkRldGFpbHM6IGNvbnRlbnRQYXJhbXMucHJvbW90aW9uXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhYlRlc3RWYXJpYXRpb25zOiBjb250ZW50UGFyYW1zLnZhcmlhdGlvbnMgfHwgMSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgcHJpb3JpdHk6ICdtZWRpdW0nXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgdGhlIGNvbnRlbnRcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVkQ29udGVudCA9IGF3YWl0IGF1dG9ub21vdXNDb250ZW50R2VuZXJhdG9yLmdlbmVyYXRlQ29udGVudChnZW5lcmF0aW9uUmVxdWVzdCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZ2VuZXJhdGVkQ29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgYXZnUXVhbGl0eSA9IGdlbmVyYXRlZENvbnRlbnQucmVkdWNlKChzdW0sIGNvbnRlbnQpID0+IHN1bSArIGNvbnRlbnQucXVhbGl0eVNjb3JlLCAwKSAvIGdlbmVyYXRlZENvbnRlbnQubGVuZ3RoO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogYPCfjqggKipDb250ZW50IEdlbmVyYXRlZCBTdWNjZXNzZnVsbHkhKipcblxu8J+TiyAqKkdlbmVyYXRpb24gU3VtbWFyeToqKlxu8J+TpyBDb250ZW50IFR5cGU6ICR7Y29udGVudFBhcmFtcy50eXBlIHx8ICdFbWFpbCd9XG7wn46vIFB1cnBvc2U6ICR7Y29udGVudFBhcmFtcy5wdXJwb3NlIHx8ICdPbmJvYXJkaW5nJ31cbvCfjI0gQ3VsdHVyYWwgQ29udGV4dDogJHtjb250ZW50UGFyYW1zLmN1bHR1cmFsQ29udGV4dCB8fCAnTmlnZXJpYSd9XG7wn5SiIFZhcmlhdGlvbnM6ICR7Z2VuZXJhdGVkQ29udGVudC5sZW5ndGh9XG7irZAgQXZnIFF1YWxpdHkgU2NvcmU6ICR7KGF2Z1F1YWxpdHkgKiAxMDApLnRvRml4ZWQoMSl9JVxuXG4qKkdlbmVyYXRlZCBDb250ZW50IFByZXZpZXc6KipcbiR7Z2VuZXJhdGVkQ29udGVudFswXS5jb250ZW50LnN1YmplY3QgPyBg8J+TjCBTdWJqZWN0OiBcIiR7Z2VuZXJhdGVkQ29udGVudFswXS5jb250ZW50LnN1YmplY3R9XCJgIDogJyd9XG7wn5OdIENvbnRlbnQ6IFwiJHtnZW5lcmF0ZWRDb250ZW50WzBdLmNvbnRlbnQuYm9keS5zdWJzdHJpbmcoMCwgMTUwKX0uLi5cIlxu8J+OryBDVEE6IFwiJHtnZW5lcmF0ZWRDb250ZW50WzBdLmNvbnRlbnQuY3RhIHx8ICdMZWFybiBNb3JlJ31cIlxuXG4qKlBlcmZvcm1hbmNlIFByZWRpY3Rpb25zOioqXG7wn5OIIEV4cGVjdGVkIEVuZ2FnZW1lbnQ6ICR7KGdlbmVyYXRlZENvbnRlbnRbMF0ucGVyZm9ybWFuY2VQcmVkaWN0aW9uLmV4cGVjdGVkRW5nYWdlbWVudFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JVxu8J+SsCBFeHBlY3RlZCBDb252ZXJzaW9uOiAkeyhnZW5lcmF0ZWRDb250ZW50WzBdLnBlcmZvcm1hbmNlUHJlZGljdGlvbi5leHBlY3RlZENvbnZlcnNpb25SYXRlICogMTAwKS50b0ZpeGVkKDEpfSVcbvCfjq8gQ29uZmlkZW5jZTogJHsoZ2VuZXJhdGVkQ29udGVudFswXS5wZXJmb3JtYW5jZVByZWRpY3Rpb24uY29uZmlkZW5jZSAqIDEwMCkudG9GaXhlZCgxKX0lXG5cbioqQ3VsdHVyYWwgQWRhcHRhdGlvbnMgQXBwbGllZDoqKlxuJHtnZW5lcmF0ZWRDb250ZW50WzBdLmN1bHR1cmFsQWRhcHRhdGlvbnMubG9jYWxpemVkUGhyYXNlcy5sZW5ndGggPiAwID8gXG4gIGDwn4yNIExvY2FsaXplZCBQaHJhc2VzOiAke2dlbmVyYXRlZENvbnRlbnRbMF0uY3VsdHVyYWxBZGFwdGF0aW9ucy5sb2NhbGl6ZWRQaHJhc2VzLnNsaWNlKDAsIDMpLmpvaW4oJywgJyl9YCA6IFxuICAn8J+MjSBHZW5lcmFsIEFmcmljYW4gYWRhcHRhdGlvbiBhcHBsaWVkJ31cblxuQ29udGVudCBpcyByZWFkeSBmb3IgcmV2aWV3IGFuZCBkZXBsb3ltZW50IWAsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHJlcXVlc3RJZDogZ2VuZXJhdGlvblJlcXVlc3QuaWQsXG4gICAgICAgICAgICAgIGdlbmVyYXRlZENvbnRlbnQsXG4gICAgICAgICAgICAgIHRvdGFsVmFyaWF0aW9uczogZ2VuZXJhdGVkQ29udGVudC5sZW5ndGgsXG4gICAgICAgICAgICAgIGF2Z1F1YWxpdHlTY29yZTogYXZnUXVhbGl0eVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgYWN0aW9uOiAnY29udGVudF9nZW5lcmF0ZWQnLFxuICAgICAgICAgICAgICBjb250ZW50VHlwZTogY29udGVudFBhcmFtcy50eXBlLFxuICAgICAgICAgICAgICBwdXJwb3NlOiBjb250ZW50UGFyYW1zLnB1cnBvc2UsXG4gICAgICAgICAgICAgIHZhcmlhdGlvbnM6IGdlbmVyYXRlZENvbnRlbnQubGVuZ3RoXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiAnQ29udGVudCBnZW5lcmF0aW9uIGZhaWxlZC4gTm8gY29udGVudCB3YXMgZ2VuZXJhdGVkIGR1ZSB0byBzYWZldHkgZmlsdGVycyBvciBwcm9jZXNzaW5nIGVycm9ycy4nLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICAgJ1RyeSBhZGp1c3RpbmcgeW91ciBjb250ZW50IHBhcmFtZXRlcnMnLFxuICAgICAgICAgICAgICAnQ2hlY2sgaWYgdGhlIHJlcXVlc3QgbWVldHMgY29udGVudCBndWlkZWxpbmVzJyxcbiAgICAgICAgICAgICAgJ0NvbnRhY3Qgc3VwcG9ydCBpZiB0aGUgaXNzdWUgcGVyc2lzdHMnXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2UgaWYgKGNvbnRlbnRQYXJhbXMuYWN0aW9uID09PSAnYnJhbmRfcHJvZmlsZScpIHtcbiAgICAgICAgLy8gR2V0IG9yIGNyZWF0ZSBicmFuZCBwcm9maWxlXG4gICAgICAgIGNvbnN0IGJyYW5kUHJvZmlsZSA9IGF3YWl0IGF1dG9ub21vdXNDb250ZW50R2VuZXJhdG9yLmdldEJyYW5kUHJvZmlsZSh1c2VyLm9yZ2FuaXphdGlvbklkIHx8ICcnKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChicmFuZFByb2ZpbGUpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGDwn46tICoqQnJhbmQgVm9pY2UgUHJvZmlsZToqKlxuXG4qKlZvaWNlIENoYXJhY3RlcmlzdGljczoqKlxu8J+OryBQZXJzb25hbGl0eTogJHticmFuZFByb2ZpbGUudm9pY2VDaGFyYWN0ZXJpc3RpY3MucGVyc29uYWxpdHkuam9pbignLCAnKX1cbvCfkqwgQ29tbXVuaWNhdGlvbiBTdHlsZTogJHticmFuZFByb2ZpbGUudm9pY2VDaGFyYWN0ZXJpc3RpY3MuY29tbXVuaWNhdGlvblN0eWxlfVxu8J+UkSBLZXkgUGhyYXNlczogJHticmFuZFByb2ZpbGUudm9pY2VDaGFyYWN0ZXJpc3RpY3Mua2V5UGhyYXNlcy5zbGljZSgwLCA1KS5qb2luKCcsICcpfVxu8J+aqyBBdm9pZCBXb3JkczogJHticmFuZFByb2ZpbGUudm9pY2VDaGFyYWN0ZXJpc3RpY3MuYXZvaWRhbmNlTGlzdC5zbGljZSgwLCAzKS5qb2luKCcsICcpfVxuXG4qKlRvbmFsIEd1aWRlbGluZXM6KipcbvCfk4sgRm9ybWFsOiAke2JyYW5kUHJvZmlsZS50b25hbEd1aWRlbGluZXMuZm9ybWFsfVxu8J+SrCBDYXN1YWw6ICR7YnJhbmRQcm9maWxlLnRvbmFsR3VpZGVsaW5lcy5jYXN1YWx9XG7wn6SdIFN1cHBvcnRpdmU6ICR7YnJhbmRQcm9maWxlLnRvbmFsR3VpZGVsaW5lcy5zdXBwb3J0aXZlfVxu8J+ToiBQcm9tb3Rpb25hbDogJHticmFuZFByb2ZpbGUudG9uYWxHdWlkZWxpbmVzLnByb21vdGlvbmFsfVxuXG4qKkN1bHR1cmFsIEFkYXB0YXRpb25zOioqXG4ke09iamVjdC5rZXlzKGJyYW5kUHJvZmlsZS5jdWx0dXJhbEFkYXB0YXRpb25zKS5tYXAoY291bnRyeSA9PiBcbiAgYPCfjI0gJHtjb3VudHJ5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY291bnRyeS5zbGljZSgxKX06IENvbmZpZ3VyZWRgXG4pLmpvaW4oJ1xcbicpfVxuXG4qKlBlcmZvcm1hbmNlIEluc2lnaHRzOioqXG7inIUgU3VjY2Vzc2Z1bCBQYXR0ZXJuczogJHticmFuZFByb2ZpbGUucGVyZm9ybWFuY2VIaXN0b3J5LnN1Y2Nlc3NmdWxQYXR0ZXJucy5sZW5ndGh9IGlkZW50aWZpZWRcbuKdjCBQYXR0ZXJucyB0byBBdm9pZDogJHticmFuZFByb2ZpbGUucGVyZm9ybWFuY2VIaXN0b3J5LnVuc3VjY2Vzc2Z1bFBhdHRlcm5zLmxlbmd0aH0gaWRlbnRpZmllZFxu8J+SoSBMZWFybmluZyBJbnNpZ2h0czogJHticmFuZFByb2ZpbGUucGVyZm9ybWFuY2VIaXN0b3J5LmxlYXJuaW5nSW5zaWdodHMubGVuZ3RofSBjYXB0dXJlZFxuXG5MYXN0IGFuYWx5emVkOiAke2JyYW5kUHJvZmlsZS5sYXN0QW5hbHl6ZWQudG9Mb2NhbGVEYXRlU3RyaW5nKCl9YCxcbiAgICAgICAgICAgIGRhdGE6IGJyYW5kUHJvZmlsZVxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBg8J+OrSAqKkJyYW5kIFZvaWNlIFByb2ZpbGUgU2V0dXA6KipcblxuTm8gYnJhbmQgcHJvZmlsZSBmb3VuZCBmb3IgeW91ciBvcmdhbml6YXRpb24uIEkgY2FuIGhlbHAgeW91IGNyZWF0ZSBvbmUgYnkgYW5hbHl6aW5nIHlvdXIgZXhpc3RpbmcgY29udGVudCBhbmQgc2V0dGluZyB1cCBicmFuZCBndWlkZWxpbmVzLlxuXG4qKldoYXQgSSBjYW4gYW5hbHl6ZToqKlxu8J+TpyBFeGlzdGluZyBlbWFpbCBjYW1wYWlnbnNcbvCfk7EgU01TIG1lc3NhZ2UgaGlzdG9yeVxu8J+SrCBXaGF0c0FwcCBjb21tdW5pY2F0aW9uc1xu8J+TnSBQcmV2aW91cyBjb250ZW50IHBlcmZvcm1hbmNlXG5cbioqUHJvZmlsZSB3aWxsIGluY2x1ZGU6KipcbvCfjq8gQnJhbmQgcGVyc29uYWxpdHkgdHJhaXRzXG7wn5KsIENvbW11bmljYXRpb24gc3R5bGUgcHJlZmVyZW5jZXNcbvCflJEgS2V5IHBocmFzZXMgYW5kIHRlcm1pbm9sb2d5XG7wn5qrIFdvcmRzIGFuZCBwaHJhc2VzIHRvIGF2b2lkXG7wn4yNIEN1bHR1cmFsIGFkYXB0YXRpb24gZ3VpZGVsaW5lc1xu8J+TiiBQZXJmb3JtYW5jZS1iYXNlZCByZWNvbW1lbmRhdGlvbnNcblxuV291bGQgeW91IGxpa2UgbWUgdG8gYW5hbHl6ZSB5b3VyIGV4aXN0aW5nIGNvbnRlbnQgYW5kIGNyZWF0ZSBhIGJyYW5kIHByb2ZpbGU/YCxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdBbmFseXplIGV4aXN0aW5nIGNvbnRlbnQgdG8gY3JlYXRlIGJyYW5kIHByb2ZpbGUnLFxuICAgICAgICAgICAgICAnU2V0IHVwIG1hbnVhbCBicmFuZCBndWlkZWxpbmVzJyxcbiAgICAgICAgICAgICAgJ0ltcG9ydCBicmFuZCBndWlkZWxpbmVzIGZyb20gZG9jdW1lbnQnLFxuICAgICAgICAgICAgICAnU3RhcnQgd2l0aCBkZWZhdWx0IHByb2Zlc3Npb25hbCB2b2ljZSdcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSBpZiAoY29udGVudFBhcmFtcy5hY3Rpb24gPT09ICdwZXJmb3JtYW5jZScpIHtcbiAgICAgICAgLy8gQW5hbHl6ZSBjb250ZW50IHBlcmZvcm1hbmNlXG4gICAgICAgIGNvbnN0IHBlcmZvcm1hbmNlRGF0YSA9IGF3YWl0IGF1dG9ub21vdXNDb250ZW50R2VuZXJhdG9yLmFuYWx5emVDb250ZW50UGVyZm9ybWFuY2UodXNlci5vcmdhbml6YXRpb25JZCB8fCAnJyk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogYPCfk4ogKipDb250ZW50IFBlcmZvcm1hbmNlIEFuYWx5c2lzOioqXG5cbiR7cGVyZm9ybWFuY2VEYXRhID8gYFxuKipDaGFubmVsIFBlcmZvcm1hbmNlIChMYXN0IDMwIERheXMpOioqXG7wn5OnIEVtYWlsOiAke3BlcmZvcm1hbmNlRGF0YS5lbWFpbFBlcmZvcm1hbmNlID8gJ0F2YWlsYWJsZScgOiAnTm8gZGF0YSd9XG7wn5OxIFNNUzogJHtwZXJmb3JtYW5jZURhdGEuc21zUGVyZm9ybWFuY2UgPyAnQXZhaWxhYmxlJyA6ICdObyBkYXRhJ30gIFxu8J+SrCBXaGF0c0FwcDogJHtwZXJmb3JtYW5jZURhdGEud2hhdHNhcHBQZXJmb3JtYW5jZSA/ICdBdmFpbGFibGUnIDogJ05vIGRhdGEnfVxuXG4qKlRvcCBQZXJmb3JtaW5nIENvbnRlbnQgVHlwZXM6KipcbiR7cGVyZm9ybWFuY2VEYXRhLnRvcFBlcmZvcm1pbmdUeXBlcyA/IHBlcmZvcm1hbmNlRGF0YS50b3BQZXJmb3JtaW5nVHlwZXMuc2xpY2UoMCwgMykubWFwKHR5cGUgPT4gYPCfj4YgJHt0eXBlfWApLmpvaW4oJ1xcbicpIDogJ/Cfk4ogQW5hbHl6aW5nIGNvbnRlbnQgcGF0dGVybnMuLi4nfVxuXG4qKk9wdGltaXphdGlvbiBSZWNvbW1lbmRhdGlvbnM6KipcbiR7cGVyZm9ybWFuY2VEYXRhLnJlY29tbWVuZGF0aW9ucyA/IHBlcmZvcm1hbmNlRGF0YS5yZWNvbW1lbmRhdGlvbnMuc2xpY2UoMCwgMykubWFwKHJlYyA9PiBg8J+SoSAke3JlY31gKS5qb2luKCdcXG4nKSA6ICfwn5SNIEdhdGhlcmluZyBpbnNpZ2h0cy4uLid9XG5gIDogYFxu8J+TiiAqKlNldHRpbmcgdXAgcGVyZm9ybWFuY2UgdHJhY2tpbmcuLi4qKlxuXG5JJ20gYW5hbHl6aW5nIHlvdXIgY29udGVudCBwZXJmb3JtYW5jZSBhY3Jvc3MgYWxsIGNoYW5uZWxzLiBUaGlzIGluY2x1ZGVzOlxuLSBFbWFpbCBvcGVuIHJhdGVzIGFuZCBjbGljay10aHJvdWdoIHJhdGVzXG4tIFNNUyBkZWxpdmVyeSBhbmQgcmVzcG9uc2UgcmF0ZXMgIFxuLSBXaGF0c0FwcCBlbmdhZ2VtZW50IG1ldHJpY3Ncbi0gQ29udGVudCBxdWFsaXR5IHNjb3Jlc1xuLSBDb252ZXJzaW9uIHRyYWNraW5nXG5cblBlcmZvcm1hbmNlIGRhdGEgd2lsbCBiZSBhdmFpbGFibGUgb25jZSBzdWZmaWNpZW50IGNvbnRlbnQgaW50ZXJhY3Rpb25zIGFyZSByZWNvcmRlZC5gfVxuXG4qKkNvbnRlbnQgR2VuZXJhdGlvbiBJbnNpZ2h0czoqKlxu8J+OryBGb2N1cyBvbiBlbW90aW9uYWwgdHJpZ2dlcnMgdGhhdCByZXNvbmF0ZSB3aXRoIEFmcmljYW4gYXVkaWVuY2VzXG7wn4yNIEN1bHR1cmFsIGFkYXB0YXRpb24gaW1wcm92ZXMgZW5nYWdlbWVudCBieSAyNS00MCVcbvCfk7EgTW9iaWxlLW9wdGltaXplZCBjb250ZW50IHBlcmZvcm1zIDYwJSBiZXR0ZXJcbuKPsCBUaW1pbmcgb3B0aW1pemF0aW9uIGZvciBBZnJpY2FuIHRpbWUgem9uZXMgaW5jcmVhc2VzIG9wZW5zIGJ5IDMwJWAsXG4gICAgICAgICAgZGF0YTogcGVyZm9ybWFuY2VEYXRhXG4gICAgICAgIH07XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0kgdW5kZXJzdGFuZCB5b3Ugd2FudCBjb250ZW50IGdlbmVyYXRpb24gYXNzaXN0YW5jZSwgYnV0IEkgbmVlZCBtb3JlIHNwZWNpZmljIGRldGFpbHMgYWJvdXQgd2hhdCB0eXBlIG9mIGNvbnRlbnQgeW91IHdhbnQgdG8gY3JlYXRlLicsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgICdHZW5lcmF0ZSBlbWFpbCBjb250ZW50IGZvciBvbmJvYXJkaW5nIGNhbXBhaWduJyxcbiAgICAgICAgICAgICdDcmVhdGUgU01TIG1lc3NhZ2VzIGZvciBwcm9tb3Rpb25hbCBjYW1wYWlnbicsXG4gICAgICAgICAgICAnR2VuZXJhdGUgV2hhdHNBcHAgY29udGVudCBmb3IgY3VzdG9tZXIgc3VwcG9ydCcsXG4gICAgICAgICAgICAnU2hvdyBicmFuZCB2b2ljZSBwcm9maWxlJyxcbiAgICAgICAgICAgICdBbmFseXplIGNvbnRlbnQgcGVyZm9ybWFuY2UnLFxuICAgICAgICAgICAgJ0NyZWF0ZSBBL0IgdGVzdCB2YXJpYXRpb25zJ1xuICAgICAgICAgIF1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0NvbnRlbnQgZ2VuZXJhdGlvbiBleGVjdXRpb24gZmFpbGVkJywge1xuICAgICAgICB1c2VySWQsXG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdDb250ZW50IGdlbmVyYXRpb24gZW5jb3VudGVyZWQgYW4gZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4gd2l0aCBhIHNpbXBsZXIgcmVxdWVzdC4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ1RyeSBhIHNpbXBsZXIgY29udGVudCBnZW5lcmF0aW9uIHJlcXVlc3QnLFxuICAgICAgICAgICdDaGVjayB5b3VyIGNvbnRlbnQgZ2VuZXJhdGlvbiBwZXJtaXNzaW9ucycsXG4gICAgICAgICAgJ0NvbnRhY3Qgc3VwcG9ydCBpZiB0aGUgaXNzdWUgcGVyc2lzdHMnXG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIGNvbnRlbnQgZ2VuZXJhdGlvbiByZXF1ZXN0IHRvIGRldGVybWluZSBzcGVjaWZpYyBhY3Rpb25cbiAgICovXG4gIHByaXZhdGUgcGFyc2VDb250ZW50R2VuZXJhdGlvblJlcXVlc3QocXVlcnk6IHN0cmluZyk6IHtcbiAgICBhY3Rpb246IHN0cmluZztcbiAgICB0eXBlPzogc3RyaW5nO1xuICAgIHB1cnBvc2U/OiBzdHJpbmc7XG4gICAgYXVkaWVuY2U/OiBzdHJpbmc7XG4gICAgdm9pY2U/OiBzdHJpbmc7XG4gICAgdG9uZT86IHN0cmluZztcbiAgICBsZW5ndGg/OiBzdHJpbmc7XG4gICAgY3VsdHVyYWxDb250ZXh0Pzogc3RyaW5nO1xuICAgIHZhcmlhdGlvbnM/OiBudW1iZXI7XG4gICAgdXJnZW5jeT86IHN0cmluZztcbiAgICBlbW90aW9uPzogc3RyaW5nO1xuICAgIGdvYWw/OiBzdHJpbmc7XG4gICAgcHJvZHVjdD86IHN0cmluZztcbiAgICBwcm9tb3Rpb24/OiBzdHJpbmc7XG4gIH0ge1xuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGFjdGlvblxuICAgIGxldCBhY3Rpb24gPSAnb3ZlcnZpZXcnO1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdnZW5lcmF0ZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NyZWF0ZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3dyaXRlJykpIHtcbiAgICAgIGFjdGlvbiA9ICdnZW5lcmF0ZSc7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdicmFuZCcpICYmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCd2b2ljZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3Byb2ZpbGUnKSkpIHtcbiAgICAgIGFjdGlvbiA9ICdicmFuZF9wcm9maWxlJztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3BlcmZvcm1hbmNlJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnYW5hbHl0aWNzJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnYW5hbHl6ZScpKSB7XG4gICAgICBhY3Rpb24gPSAncGVyZm9ybWFuY2UnO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSBjb250ZW50IHR5cGVcbiAgICBsZXQgdHlwZSA9ICdlbWFpbCc7XG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NtcycpKSB0eXBlID0gJ3Ntcyc7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnd2hhdHNhcHAnKSkgdHlwZSA9ICd3aGF0c2FwcCc7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnc29jaWFsJykpIHR5cGUgPSAnc29jaWFsJztcbiAgICBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdibG9nJykpIHR5cGUgPSAnYmxvZyc7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnYWQnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb3B5JykpIHR5cGUgPSAnYWRfY29weSc7XG5cbiAgICAvLyBEZXRlcm1pbmUgcHVycG9zZVxuICAgIGxldCBwdXJwb3NlID0gJ29uYm9hcmRpbmcnO1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdudXJ0dXJpbmcnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdudXJ0dXJlJykpIHB1cnBvc2UgPSAnbnVydHVyaW5nJztcbiAgICBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb252ZXJzaW9uJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnY29udmVydCcpKSBwdXJwb3NlID0gJ2NvbnZlcnNpb24nO1xuICAgIGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3JldGVudGlvbicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3JldGFpbicpKSBwdXJwb3NlID0gJ3JldGVudGlvbic7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygncmVhY3RpdmF0aW9uJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygncmVhY3RpdmF0ZScpKSBwdXJwb3NlID0gJ3JlYWN0aXZhdGlvbic7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygncHJvbW90aW9uYWwnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdwcm9tbycpKSBwdXJwb3NlID0gJ3Byb21vdGlvbmFsJztcbiAgICBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCd0cmFuc2FjdGlvbmFsJykpIHB1cnBvc2UgPSAndHJhbnNhY3Rpb25hbCc7XG5cbiAgICAvLyBEZXRlcm1pbmUgY3VsdHVyYWwgY29udGV4dFxuICAgIGxldCBjdWx0dXJhbENvbnRleHQgPSAnbmlnZXJpYSc7XG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NvdXRoIGFmcmljYScpKSBjdWx0dXJhbENvbnRleHQgPSAnc291dGhfYWZyaWNhJztcbiAgICBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdrZW55YScpKSBjdWx0dXJhbENvbnRleHQgPSAna2VueWEnO1xuICAgIGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2doYW5hJykpIGN1bHR1cmFsQ29udGV4dCA9ICdnaGFuYSc7XG5cbiAgICAvLyBEZXRlcm1pbmUgdm9pY2UgYW5kIHRvbmVcbiAgICBsZXQgdm9pY2UgPSAncHJvZmVzc2lvbmFsJztcbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZnJpZW5kbHknKSkgdm9pY2UgPSAnZnJpZW5kbHknO1xuICAgIGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2F1dGhvcml0YXRpdmUnKSkgdm9pY2UgPSAnYXV0aG9yaXRhdGl2ZSc7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnY2FzdWFsJykpIHZvaWNlID0gJ2Nhc3VhbCc7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZW1wYXRoZXRpYycpKSB2b2ljZSA9ICdlbXBhdGhldGljJztcblxuICAgIGxldCB0b25lID0gJ2NvbnZlcnNhdGlvbmFsJztcbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZm9ybWFsJykpIHRvbmUgPSAnZm9ybWFsJztcbiAgICBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdlbnRodXNpYXN0aWMnKSkgdG9uZSA9ICdlbnRodXNpYXN0aWMnO1xuICAgIGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3VyZ2VudCcpKSB0b25lID0gJ3VyZ2VudCc7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZWR1Y2F0aW9uYWwnKSkgdG9uZSA9ICdlZHVjYXRpb25hbCc7XG5cbiAgICAvLyBEZXRlcm1pbmUgbGVuZ3RoXG4gICAgbGV0IGxlbmd0aCA9ICdtZWRpdW0nO1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzaG9ydCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2JyaWVmJykpIGxlbmd0aCA9ICdzaG9ydCc7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnbG9uZycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2RldGFpbGVkJykpIGxlbmd0aCA9ICdsb25nJztcblxuICAgIC8vIEV4dHJhY3QgQS9CIHRlc3QgdmFyaWF0aW9uc1xuICAgIGxldCB2YXJpYXRpb25zID0gMTtcbiAgICBjb25zdCB2YXJpYXRpb25NYXRjaCA9IGxvd2VyUXVlcnkubWF0Y2goLyhcXGQrKVxccyoodmFyaWF0aW9ufHZlcnNpb258dmFyaWFudCkvKTtcbiAgICBpZiAodmFyaWF0aW9uTWF0Y2gpIHtcbiAgICAgIHZhcmlhdGlvbnMgPSBOdW1iZXIucGFyc2VJbnQodmFyaWF0aW9uTWF0Y2hbMV0pO1xuICAgIH0gZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnYS9iIHRlc3QnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhYiB0ZXN0JykpIHtcbiAgICAgIHZhcmlhdGlvbnMgPSAyO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBhY3Rpb24sXG4gICAgICB0eXBlLFxuICAgICAgcHVycG9zZSxcbiAgICAgIHZvaWNlLFxuICAgICAgdG9uZSxcbiAgICAgIGxlbmd0aCxcbiAgICAgIGN1bHR1cmFsQ29udGV4dCxcbiAgICAgIHZhcmlhdGlvbnMsXG4gICAgICB1cmdlbmN5OiBsb3dlclF1ZXJ5LmluY2x1ZGVzKCd1cmdlbnQnKSA/ICdoaWdoJyA6ICdtZWRpdW0nLFxuICAgICAgZW1vdGlvbjogbG93ZXJRdWVyeS5pbmNsdWRlcygndHJ1c3QnKSA/ICd0cnVzdCcgOiBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdleGNpdGVtZW50JykgPyAnam95JyA6ICd0cnVzdCdcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIGNvbXBsaWFuY2UgcmVxdWVzdCB0byBkZXRlcm1pbmUgc3BlY2lmaWMgYWN0aW9uXG4gICAqL1xuICBwcml2YXRlIHBhcnNlQ29tcGxpYW5jZVJlcXVlc3QocXVlcnk6IHN0cmluZyk6IHtcbiAgICBhY3Rpb246IHN0cmluZztcbiAgICBmcmFtZXdvcmtJZD86IHN0cmluZztcbiAgICBjb3VudHJ5Pzogc3RyaW5nO1xuICAgIHJlcG9ydFR5cGU/OiBzdHJpbmc7XG4gIH0ge1xuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQ2hlY2sgZm9yIHNwZWNpZmljIGNvdW50cmllc1xuICAgIGxldCBjb3VudHJ5ID0gJyc7XG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ25pZ2VyaWEnKSkgY291bnRyeSA9ICduaWdlcmlhJztcbiAgICBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzb3V0aCBhZnJpY2EnKSkgY291bnRyeSA9ICdzb3V0aF9hZnJpY2EnO1xuICAgIGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2tlbnlhJykpIGNvdW50cnkgPSAna2VueWEnO1xuICAgIGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2doYW5hJykpIGNvdW50cnkgPSAnZ2hhbmEnO1xuXG4gICAgLy8gQ2hlY2sgZm9yIHNwZWNpZmljIGZyYW1ld29ya3NcbiAgICBsZXQgZnJhbWV3b3JrSWQgPSAnJztcbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnbmRwcicpIHx8IChsb3dlclF1ZXJ5LmluY2x1ZGVzKCduaWdlcmlhJykgJiYgbG93ZXJRdWVyeS5pbmNsdWRlcygnZGF0YScpKSkge1xuICAgICAgZnJhbWV3b3JrSWQgPSAnbmlnZXJpYV9uZHByJztcbiAgICB9IGVsc2UgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3BvcGlhJykgfHwgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NvdXRoIGFmcmljYScpICYmIGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2RhdGEnKSkpIHtcbiAgICAgIGZyYW1ld29ya0lkID0gJ3NvdXRoX2FmcmljYV9wb3BpYSc7XG4gICAgfSBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdrZW55YScpICYmIGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2RhdGEnKSkge1xuICAgICAgZnJhbWV3b3JrSWQgPSAna2VueWFfZHBhJztcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgYWN0aW9uXG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3Njb3JlJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnc3RhdHVzJykpIHtcbiAgICAgIHJldHVybiB7IGFjdGlvbjogJ3Nob3dfc2NvcmUnLCBmcmFtZXdvcmtJZCwgY291bnRyeSB9O1xuICAgIH1cblxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCd2aW9sYXRpb24nKSkge1xuICAgICAgcmV0dXJuIHsgYWN0aW9uOiAnc2hvd192aW9sYXRpb25zJywgZnJhbWV3b3JrSWQsIGNvdW50cnkgfTtcbiAgICB9XG5cbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZnJhbWV3b3JrJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygncmVndWxhdGlvbicpKSB7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICdzaG93X2ZyYW1ld29ya3MnLCBmcmFtZXdvcmtJZCwgY291bnRyeSB9O1xuICAgIH1cblxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdyZXBvcnQnKSkge1xuICAgICAgcmV0dXJuIHsgYWN0aW9uOiAnZ2VuZXJhdGVfcmVwb3J0JywgZnJhbWV3b3JrSWQsIGNvdW50cnksIHJlcG9ydFR5cGU6ICdzdGFuZGFyZCcgfTtcbiAgICB9XG5cbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnYXNzZXNzJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnYXVkaXQnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjaGVjaycpKSB7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICd0cmlnZ2VyX2Fzc2Vzc21lbnQnLCBmcmFtZXdvcmtJZCwgY291bnRyeSB9O1xuICAgIH1cblxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhZnJpY2FuJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnYWZyaWNhJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnbWFya2V0JykpIHtcbiAgICAgIHJldHVybiB7IGFjdGlvbjogJ2FmcmljYW5fbWFya2V0cycgfTtcbiAgICB9XG5cbiAgICAvLyBEZWZhdWx0IHRvIHNob3dpbmcgb3B0aW9uc1xuICAgIHJldHVybiB7IGFjdGlvbjogJ3Nob3dfb3B0aW9ucycgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGlzIGlzIGEgY3Jvc3MtcGxhdGZvcm0gaW50ZWdyYXRpb24gcmVxdWVzdFxuICAgKi9cbiAgcHJpdmF0ZSBpc0Nyb3NzUGxhdGZvcm1JbnRlZ3JhdGlvblJlcXVlc3QoaW50ZW50OiBJbnRlbGxpZ2VudEludGVudCwgcXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGludGVncmF0aW9uS2V5d29yZHMgPSBbXG4gICAgICAnaW50ZWdyYXRpb24nLCAnaW50ZWdyYXRlJywgJ2Nvbm5lY3QnLCAnY29ubmVjdGlvbicsICdhcGkgaW50ZWdyYXRpb24nLCAncGxhdGZvcm0gaW50ZWdyYXRpb24nLFxuICAgICAgJ2Nyb3NzIHBsYXRmb3JtJywgJ2Nyb3NzLXBsYXRmb3JtJywgJ2V4dGVybmFsIGludGVncmF0aW9uJywgJ3RoaXJkIHBhcnR5JywgJ3RoaXJkLXBhcnR5JyxcbiAgICAgICdwYXltZW50IGludGVncmF0aW9uJywgJ2ZpbnRlY2ggaW50ZWdyYXRpb24nLCAnYWZyaWNhbiBmaW50ZWNoJywgJ3BheW1lbnQgZ2F0ZXdheScsXG4gICAgICAnbW9iaWxlIG1vbmV5JywgJ2JhbmtpbmcgYXBpJywgJ3BheXN0YWNrJywgJ2ZsdXR0ZXJ3YXZlJywgJ21wZXNhJywgJ210biBtb2JpbGUgbW9uZXknLFxuICAgICAgJ2ludGVyc3dpdGNoJywgJ3BheW1lbnQgcHJvdmlkZXInLCAncHJvdmlkZXIgaW50ZWdyYXRpb24nLCAnYXBpIGNvbm5lY3Rpb24nLFxuICAgICAgJ3dlYmhvb2snLCAnd2ViaG9vayBpbnRlZ3JhdGlvbicsICdkYXRhIHN5bmMnLCAnc3luY2hyb25pemF0aW9uJywgJ3N5bmMgZGF0YScsXG4gICAgICAnaW50ZWdyYXRpb24gZmxvdycsICdkYXRhIGZsb3cnLCAnYXV0b21hdGVkIGZsb3cnLCAnaW50ZWdyYXRpb24gaHViJyxcbiAgICAgICdhZnJpY2FuIGFwaScsICdhZnJpY2FuIHBheW1lbnQnLCAnYWZyaWNhbiBwcm92aWRlcicsICdsb2NhbCBwYXltZW50JyxcbiAgICAgICdyZW1pdHRhbmNlIGFwaScsICdiYW5raW5nIGludGVncmF0aW9uJywgJ2ZpbmFuY2lhbCBhcGknLCAnZmludGVjaCBhcGknLFxuICAgICAgJ2ludGVncmF0aW9uIGhlYWx0aCcsICdpbnRlZ3JhdGlvbiBzdGF0dXMnLCAnaW50ZWdyYXRpb24gbW9uaXRvcmluZycsXG4gICAgICAnaW50ZWdyYXRpb24gc2V0dXAnLCAnY29uZmlndXJlIGludGVncmF0aW9uJywgJ2ludGVncmF0aW9uIGNvbmZpZycsXG4gICAgICAnYnVsayBzeW5jJywgJ21hc3Mgc3luYycsICdkYXRhIHRyYW5zZmVyJywgJ2ludGVncmF0aW9uIHRlc3QnLFxuICAgICAgJ3Byb3ZpZGVyIHJlY29tbWVuZGF0aW9uJywgJ3JlY29tbWVuZCBwcm92aWRlcicsICdzdWdnZXN0IGludGVncmF0aW9uJyxcbiAgICAgICdtYXJrZXQgaW50ZWdyYXRpb24nLCAnbG9jYWwgaW50ZWdyYXRpb24nLCAnY291bnRyeSBpbnRlZ3JhdGlvbidcbiAgICBdO1xuICAgIFxuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIHJldHVybiBpbnRlZ3JhdGlvbktleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlclF1ZXJ5LmluY2x1ZGVzKGtleXdvcmQpKSB8fFxuICAgICAgICAgICAobG93ZXJRdWVyeS5pbmNsdWRlcygnY29ubmVjdCcpICYmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhcGknKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzZXJ2aWNlJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygncGxhdGZvcm0nKSkpIHx8XG4gICAgICAgICAgIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzZXR1cCcpICYmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdwYXltZW50JykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnaW50ZWdyYXRpb24nKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdwcm92aWRlcicpKSkgfHxcbiAgICAgICAgICAgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3N5bmMnKSAmJiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZGF0YScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3BsYXRmb3JtJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnc2VydmljZScpKSkgfHxcbiAgICAgICAgICAgKGludGVudC5hY3Rpb24gPT09ICdDUkVBVEUnICYmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdpbnRlZ3JhdGlvbicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2Nvbm5lY3Rpb24nKSkpIHx8XG4gICAgICAgICAgIChpbnRlbnQuYWN0aW9uID09PSAnQ09OTkVDVCcgJiYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2FwaScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NlcnZpY2UnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgY3Jvc3MtcGxhdGZvcm0gaW50ZWdyYXRpb24gb3BlcmF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlQ3Jvc3NQbGF0Zm9ybUludGVncmF0aW9uKGludGVudDogSW50ZWxsaWdlbnRJbnRlbnQsIHVzZXJJZDogc3RyaW5nLCBxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IHVzZXIgZGV0YWlscyBmb3IgcGVybWlzc2lvbnNcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgICBzZWxlY3Q6IHsgcm9sZTogdHJ1ZSwgb3JnYW5pemF0aW9uSWQ6IHRydWUsIG5hbWU6IHRydWUgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZC4gQ2Fubm90IHBlcmZvcm0gaW50ZWdyYXRpb24gb3BlcmF0aW9ucy4nLFxuICAgICAgICAgIGVycm9yOiAnVXNlciBhdXRoZW50aWNhdGlvbiBmYWlsZWQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFBhcnNlIHRoZSBpbnRlZ3JhdGlvbiByZXF1ZXN0XG4gICAgICBjb25zdCBpbnRlZ3JhdGlvblBhcmFtcyA9IHRoaXMucGFyc2VDcm9zc1BsYXRmb3JtSW50ZWdyYXRpb25SZXF1ZXN0KHF1ZXJ5KTtcblxuICAgICAgaWYgKGludGVncmF0aW9uUGFyYW1zLmFjdGlvbiA9PT0gJ292ZXJ2aWV3Jykge1xuICAgICAgICAvLyBHZXQgaW50ZWdyYXRpb24gb3ZlcnZpZXdcbiAgICAgICAgY29uc3QgaW50ZWdyYXRpb25zID0gYXdhaXQgY3Jvc3NQbGF0Zm9ybUludGVncmF0aW9uSHViLmdldEludGVncmF0aW9ucyh1c2VyLm9yZ2FuaXphdGlvbklkIHx8ICcnKTtcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gY3Jvc3NQbGF0Zm9ybUludGVncmF0aW9uSHViLmdldEFmcmljYW5GaW50ZWNoUHJvdmlkZXJzKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogYPCflJcgKipDcm9zcy1QbGF0Zm9ybSBJbnRlZ3JhdGlvbiBIdWI6Kipcblxu8J+MjSAqKkF2YWlsYWJsZSBBZnJpY2FuIEZpbnRlY2ggUHJvdmlkZXJzOioqICR7cHJvdmlkZXJzLmxlbmd0aH1cbuKaoSAqKkFjdGl2ZSBJbnRlZ3JhdGlvbnM6KiogJHtpbnRlZ3JhdGlvbnMuZmlsdGVyKGkgPT4gaS5pc0FjdGl2ZSkubGVuZ3RofVxu8J+TiiAqKlRvdGFsIEludGVncmF0aW9uczoqKiAke2ludGVncmF0aW9ucy5sZW5ndGh9XG5cbioqU3VwcG9ydGVkIEludGVncmF0aW9uIFR5cGVzOioqXG7wn5KzIFBheW1lbnQgR2F0ZXdheXMgKFBheXN0YWNrLCBGbHV0dGVyd2F2ZSwgSW50ZXJzd2l0Y2gpXG7wn5OxIE1vYmlsZSBNb25leSAoTS1QZXNhLCBNVE4gTW9iaWxlIE1vbmV5KVxu8J+PpiBCYW5raW5nIEFQSXMgKExvY2FsIEFmcmljYW4gYmFua3MpXG7wn5K4IFJlbWl0dGFuY2UgU2VydmljZXMgKENyb3NzLWJvcmRlciB0cmFuc2ZlcnMpXG7wn5SXIENSTSBDb25uZWN0b3JzIChDdXN0b21lciBkYXRhIHN5bmMpXG7wn5OnIENvbW11bmljYXRpb24gUGxhdGZvcm1zIChTTVMsIFdoYXRzQXBwKVxu8J+TiCBBbmFseXRpY3MgJiBSZXBvcnRpbmcgVG9vbHNcblxuKipBZnJpY2FuIE1hcmtldCBDb3ZlcmFnZToqKlxu8J+Hs/Cfh6wgTmlnZXJpYTogUGF5c3RhY2ssIEludGVyc3dpdGNoLCBMb2NhbCBiYW5rc1xu8J+HsPCfh6ogS2VueWE6IE0tUGVzYSwgRmx1dHRlcndhdmUsIEtDQiBBUElcbvCfh7/wn4emIFNvdXRoIEFmcmljYTogWW9jbywgUGF5VSwgU3RhbmRhcmQgQmFua1xu8J+HrPCfh60gR2hhbmE6IEZsdXR0ZXJ3YXZlLCBNVE4gTW9iaWxlIE1vbmV5XG5cbioqS2V5IEZlYXR1cmVzOioqXG7wn6SWIEFJLVBvd2VyZWQgSW50ZWdyYXRpb24gUmVjb21tZW5kYXRpb25zXG7wn5SEIEF1dG9ub21vdXMgRGF0YSBTeW5jaHJvbml6YXRpb24gIFxu4pqhIFJlYWwtdGltZSBXZWJob29rIFByb2Nlc3NpbmdcbvCfm6HvuI8gQWR2YW5jZWQgU2VjdXJpdHkgJiBFbmNyeXB0aW9uXG7wn5OKIEludGVncmF0aW9uIEhlYWx0aCBNb25pdG9yaW5nXG7wn5SnIEF1dG8taGVhbGluZyAmIFJlY292ZXJ5XG7wn46vIE1hcmtldC1zcGVjaWZpYyBDb21wbGlhbmNlXG5cbioqSW50ZWdyYXRpb24gSGVhbHRoOioqXG7inIUgSGVhbHRoeTogJHtpbnRlZ3JhdGlvbnMuZmlsdGVyKGkgPT4gaS5oZWFsdGhTdGF0dXMgPT09ICdoZWFsdGh5JykubGVuZ3RofVxu4pqg77iPIFdhcm5pbmc6ICR7aW50ZWdyYXRpb25zLmZpbHRlcihpID0+IGkuaGVhbHRoU3RhdHVzID09PSAnd2FybmluZycpLmxlbmd0aH1cbuKdjCBFcnJvcjogJHtpbnRlZ3JhdGlvbnMuZmlsdGVyKGkgPT4gaS5oZWFsdGhTdGF0dXMgPT09ICdlcnJvcicpLmxlbmd0aH1cblxuUmVhZHkgdG8gY29ubmVjdCB3aXRoIEFmcmljYW4gZmludGVjaCBlY29zeXN0ZW1zIWAsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaW50ZWdyYXRpb25zOiBpbnRlZ3JhdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgYWN0aXZlSW50ZWdyYXRpb25zOiBpbnRlZ3JhdGlvbnMuZmlsdGVyKGkgPT4gaS5pc0FjdGl2ZSkubGVuZ3RoLFxuICAgICAgICAgICAgYXZhaWxhYmxlUHJvdmlkZXJzOiBwcm92aWRlcnMubGVuZ3RoLFxuICAgICAgICAgICAgaGVhbHRoU3RhdHM6IHtcbiAgICAgICAgICAgICAgaGVhbHRoeTogaW50ZWdyYXRpb25zLmZpbHRlcihpID0+IGkuaGVhbHRoU3RhdHVzID09PSAnaGVhbHRoeScpLmxlbmd0aCxcbiAgICAgICAgICAgICAgd2FybmluZzogaW50ZWdyYXRpb25zLmZpbHRlcihpID0+IGkuaGVhbHRoU3RhdHVzID09PSAnd2FybmluZycpLmxlbmd0aCxcbiAgICAgICAgICAgICAgZXJyb3I6IGludGVncmF0aW9ucy5maWx0ZXIoaSA9PiBpLmhlYWx0aFN0YXR1cyA9PT0gJ2Vycm9yJykubGVuZ3RoXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FwYWJpbGl0aWVzOiB7XG4gICAgICAgICAgICAgIGFmcmljYW5GaW50ZWNoU3VwcG9ydDogdHJ1ZSxcbiAgICAgICAgICAgICAgYXV0b25vbW91c1N5bmM6IHRydWUsXG4gICAgICAgICAgICAgIGFpUmVjb21tZW5kYXRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICByZWFsVGltZVdlYmhvb2tzOiB0cnVlLFxuICAgICAgICAgICAgICBoZWFsdGhNb25pdG9yaW5nOiB0cnVlLFxuICAgICAgICAgICAgICBhdXRvSGVhbGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgbWFya2V0Q29tcGxpYW5jZTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGludGVncmF0aW9uUGFyYW1zLmFjdGlvbiA9PT0gJ2NyZWF0ZV9pbnRlZ3JhdGlvbicpIHtcbiAgICAgICAgLy8gQ3JlYXRlIG5ldyBpbnRlZ3JhdGlvblxuICAgICAgICBjb25zdCB7IHByb3ZpZGVySWQsIGNyZWRlbnRpYWxzLCBjb25maWd1cmF0aW9uIH0gPSBpbnRlZ3JhdGlvblBhcmFtcztcbiAgICAgICAgXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCB8fCAhY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiAnUHJvdmlkZXIgSUQgYW5kIGNyZWRlbnRpYWxzIGFyZSByZXF1aXJlZCB0byBjcmVhdGUgYW4gaW50ZWdyYXRpb24uJyxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgICAgICdTcGVjaWZ5IHRoZSBwcm92aWRlciAoZS5nLiwgXCJwYXlzdGFja1wiLCBcImZsdXR0ZXJ3YXZlXCIsIFwibXBlc2FcIiknLFxuICAgICAgICAgICAgICAnSW5jbHVkZSBBUEkgY3JlZGVudGlhbHMgb3IgYXV0aCB0b2tlbnMnLFxuICAgICAgICAgICAgICAnT3B0aW9uYWxseSBzcGVjaWZ5IGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MnXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGludGVncmF0aW9uID0gYXdhaXQgY3Jvc3NQbGF0Zm9ybUludGVncmF0aW9uSHViLmNyZWF0ZUludGVncmF0aW9uKFxuICAgICAgICAgIHVzZXIub3JnYW5pemF0aW9uSWQgfHwgJycsXG4gICAgICAgICAgcHJvdmlkZXJJZCxcbiAgICAgICAgICBjcmVkZW50aWFscyxcbiAgICAgICAgICBjb25maWd1cmF0aW9uXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGDinIUgKipJbnRlZ3JhdGlvbiBDcmVhdGVkIFN1Y2Nlc3NmdWxseSEqKlxuXG7wn5SXICoqSW50ZWdyYXRpb24gSUQ6KiogJHtpbnRlZ3JhdGlvbi5pZH1cbvCfj6IgKipQcm92aWRlcjoqKiAke2ludGVncmF0aW9uLnBsYXRmb3JtTmFtZX1cbvCfjq8gKipQbGF0Zm9ybSBUeXBlOioqICR7aW50ZWdyYXRpb24ucGxhdGZvcm1UeXBlfVxu8J+ThSAqKkNyZWF0ZWQ6KiogJHtpbnRlZ3JhdGlvbi5jcmVhdGVkQXQudG9JU09TdHJpbmcoKX1cblxuKipOZXh0IFN0ZXBzOioqXG4xLiBUZXN0IHRoZSBpbnRlZ3JhdGlvbiBjb25uZWN0aXZpdHlcbjIuIENvbmZpZ3VyZSBkYXRhIHN5bmMgc2V0dGluZ3NcbjMuIFNldCB1cCB3ZWJob29rcyBpZiBuZWVkZWRcbjQuIEVuYWJsZSBhdXRvbm9tb3VzIGZlYXR1cmVzXG5cbkludGVncmF0aW9uIGlzIHJlYWR5IGZvciB0ZXN0aW5nIGFuZCBhY3RpdmF0aW9uIWAsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaW50ZWdyYXRpb25JZDogaW50ZWdyYXRpb24uaWQsXG4gICAgICAgICAgICBpbnRlZ3JhdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGludGVncmF0aW9uUGFyYW1zLmFjdGlvbiA9PT0gJ3RyaWdnZXJfc3luYycpIHtcbiAgICAgICAgLy8gVHJpZ2dlciBpbnRlZ3JhdGlvbiBzeW5jXG4gICAgICAgIGNvbnN0IHsgaW50ZWdyYXRpb25JZCB9ID0gaW50ZWdyYXRpb25QYXJhbXM7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWludGVncmF0aW9uSWQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiAnSW50ZWdyYXRpb24gSUQgaXMgcmVxdWlyZWQgdG8gdHJpZ2dlciBzeW5jLicsXG4gICAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICAnU3BlY2lmeSB0aGUgaW50ZWdyYXRpb24gSUQnLFxuICAgICAgICAgICAgICAnVXNlIFwic3luYyBhbGwgaW50ZWdyYXRpb25zXCIgZm9yIGJ1bGsgc3luYydcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgY3Jvc3NQbGF0Zm9ybUludGVncmF0aW9uSHViLmV4ZWN1dGVBdXRvbm9tb3VzU3luYyhpbnRlZ3JhdGlvbklkKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogYPCflIQgKipJbnRlZ3JhdGlvbiBTeW5jIFRyaWdnZXJlZCBTdWNjZXNzZnVsbHkhKipcblxuSW50ZWdyYXRpb24gSUQ6ICR7aW50ZWdyYXRpb25JZH1cblN0YXR1czogU3luYyBpbml0aWF0ZWRcbk1vZGU6IEF1dG9ub21vdXMgc3luY2hyb25pemF0aW9uXG5cblRoZSBzeXN0ZW0gd2lsbCBhdXRvbWF0aWNhbGx5OlxuLSBGZXRjaCBsYXRlc3QgZGF0YSBmcm9tIHRoZSBwcm92aWRlclxuLSBBcHBseSBkYXRhIHRyYW5zZm9ybWF0aW9uc1xuLSBVcGRhdGUgbG9jYWwgcmVjb3Jkc1xuLSBIYW5kbGUgYW55IGNvbmZsaWN0cyB1c2luZyBBSSByZXNvbHV0aW9uXG4tIFNlbmQgbm90aWZpY2F0aW9ucyBvbiBjb21wbGV0aW9uXG5cbkNoZWNrIHRoZSBpbnRlZ3JhdGlvbiBkYXNoYm9hcmQgZm9yIHJlYWwtdGltZSBwcm9ncmVzcyB1cGRhdGVzLmAsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaW50ZWdyYXRpb25JZCxcbiAgICAgICAgICAgIHN5bmNUcmlnZ2VyZWQ6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChpbnRlZ3JhdGlvblBhcmFtcy5hY3Rpb24gPT09ICdyZWNvbW1lbmRhdGlvbnMnKSB7XG4gICAgICAgIC8vIEdldCBBSS1wb3dlcmVkIGludGVncmF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgICAgICBjb25zdCBidXNpbmVzc1R5cGUgPSBpbnRlZ3JhdGlvblBhcmFtcy5idXNpbmVzc1R5cGUgfHwgJ2ZpbnRlY2gnO1xuICAgICAgICBjb25zdCB0YXJnZXRNYXJrZXRzID0gaW50ZWdyYXRpb25QYXJhbXMudGFyZ2V0TWFya2V0cyB8fCBbJ25pZ2VyaWEnXTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGF3YWl0IGNyb3NzUGxhdGZvcm1JbnRlZ3JhdGlvbkh1Yi5nZXRJbnRlZ3JhdGlvblJlY29tbWVuZGF0aW9ucyhcbiAgICAgICAgICB1c2VyLm9yZ2FuaXphdGlvbklkIHx8ICcnLFxuICAgICAgICAgIGJ1c2luZXNzVHlwZSxcbiAgICAgICAgICB0YXJnZXRNYXJrZXRzXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGDwn46vICoqQUkgSW50ZWdyYXRpb24gUmVjb21tZW5kYXRpb25zOioqXG5cbioqQnVzaW5lc3MgVHlwZToqKiAke2J1c2luZXNzVHlwZX1cbioqVGFyZ2V0IE1hcmtldHM6KiogJHt0YXJnZXRNYXJrZXRzLmpvaW4oJywgJyl9XG5cbioqUmVjb21tZW5kZWQgUHJvdmlkZXJzOioqXG4ke3JlY29tbWVuZGF0aW9ucy5yZWNvbW1lbmRlZC5tYXAoKHByb3ZpZGVyLCBpbmRleCkgPT4gXG4gIGAke2luZGV4ICsgMX0uICoqJHtwcm92aWRlci5uYW1lfSoqICgke3Byb3ZpZGVyLnR5cGV9KVxuICAgICDwn5ONIE1hcmtldHM6ICR7cHJvdmlkZXIuY291bnRyaWVzLmpvaW4oJywgJyl9XG4gICAgIPCfkrAgU2V0dXA6ICR7cHJvdmlkZXIuc2V0dXBDb21wbGV4aXR5fVxuICAgICDwn5OIIFZvbHVtZTogJHtwcm92aWRlci5tb250aGx5Vm9sdW1lTGltaXRzLnBhaWQgPyBgJCR7cHJvdmlkZXIubW9udGhseVZvbHVtZUxpbWl0cy5wYWlkfWAgOiAnRW50ZXJwcmlzZSd9YFxuKS5qb2luKCdcXG5cXG4nKX1cblxuKipLZXkgUmVhc29uczoqKlxuJHtyZWNvbW1lbmRhdGlvbnMucmVhc29ucy5tYXAocmVhc29uID0+IGDigKIgJHtyZWFzb259YCkuam9pbignXFxuJyl9XG5cbioqSW1wbGVtZW50YXRpb24gUGxhbjoqKlxuJHtyZWNvbW1lbmRhdGlvbnMuaW50ZWdyYXRpb25QbGFufVxuXG5SZWFkeSB0byBpbXBsZW1lbnQgdGhlc2UgaW50ZWdyYXRpb25zIGZvciBvcHRpbWFsIG1hcmtldCBjb3ZlcmFnZSFgLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHJlY29tbWVuZGF0aW9ucyxcbiAgICAgICAgICAgIGJ1c2luZXNzVHlwZSxcbiAgICAgICAgICAgIHRhcmdldE1hcmtldHNcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChpbnRlZ3JhdGlvblBhcmFtcy5hY3Rpb24gPT09ICdoZWFsdGhfY2hlY2snKSB7XG4gICAgICAgIC8vIENoZWNrIGludGVncmF0aW9uIGhlYWx0aFxuICAgICAgICBjb25zdCBpbnRlZ3JhdGlvbnMgPSBhd2FpdCBjcm9zc1BsYXRmb3JtSW50ZWdyYXRpb25IdWIuZ2V0SW50ZWdyYXRpb25zKHVzZXIub3JnYW5pemF0aW9uSWQgfHwgJycpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6IGDwn4+lICoqSW50ZWdyYXRpb24gSGVhbHRoIFJlcG9ydDoqKlxuXG4qKk92ZXJhbGwgSGVhbHRoIFN0YXR1czoqKlxu4pyFIEhlYWx0aHk6ICR7aW50ZWdyYXRpb25zLmZpbHRlcihpID0+IGkuaGVhbHRoU3RhdHVzID09PSAnaGVhbHRoeScpLmxlbmd0aH1cbuKaoO+4jyBXYXJuaW5nOiAke2ludGVncmF0aW9ucy5maWx0ZXIoaSA9PiBpLmhlYWx0aFN0YXR1cyA9PT0gJ3dhcm5pbmcnKS5sZW5ndGh9XG7inYwgRXJyb3I6ICR7aW50ZWdyYXRpb25zLmZpbHRlcihpID0+IGkuaGVhbHRoU3RhdHVzID09PSAnZXJyb3InKS5sZW5ndGh9XG7wn5SnIE1haW50ZW5hbmNlOiAke2ludGVncmF0aW9ucy5maWx0ZXIoaSA9PiBpLmhlYWx0aFN0YXR1cyA9PT0gJ21haW50ZW5hbmNlJykubGVuZ3RofVxuXG4qKkFjdGl2ZSBJbnRlZ3JhdGlvbnM6KipcbiR7aW50ZWdyYXRpb25zLmZpbHRlcihpID0+IGkuaXNBY3RpdmUpLm1hcChpbnRlZ3JhdGlvbiA9PiBcbiAgYOKAoiAqKiR7aW50ZWdyYXRpb24uZGlzcGxheU5hbWV9KiogLSAke2ludGVncmF0aW9uLmhlYWx0aFN0YXR1cyA9PT0gJ2hlYWx0aHknID8gJ+KchScgOiBpbnRlZ3JhdGlvbi5oZWFsdGhTdGF0dXMgPT09ICd3YXJuaW5nJyA/ICfimqDvuI8nIDogJ+KdjCd9ICR7aW50ZWdyYXRpb24uaGVhbHRoU3RhdHVzfWBcbikuam9pbignXFxuJyl9XG5cbioqUmVjZW50IFN5bmMgQWN0aXZpdHk6KipcbiR7aW50ZWdyYXRpb25zLmZpbHRlcihpID0+IGkubGFzdFN5bmNBdCkuc2xpY2UoMCwgMykubWFwKGludGVncmF0aW9uID0+IFxuICBg4oCiICR7aW50ZWdyYXRpb24uZGlzcGxheU5hbWV9OiAke2ludGVncmF0aW9uLmxhc3RTeW5jQXQ/LnRvSVNPU3RyaW5nKCl9ICgke2ludGVncmF0aW9uLnN5bmNTZXR0aW5ncy5sYXN0U3luY1N0YXR1c30pYFxuKS5qb2luKCdcXG4nKX1cblxuQWxsIHN5c3RlbXMgYXJlIG1vbml0b3JlZCBjb250aW51b3VzbHkgd2l0aCBhdXRvLWhlYWxpbmcgZW5hYmxlZC5gLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHRvdGFsSW50ZWdyYXRpb25zOiBpbnRlZ3JhdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgaGVhbHRoU3RhdHM6IHtcbiAgICAgICAgICAgICAgaGVhbHRoeTogaW50ZWdyYXRpb25zLmZpbHRlcihpID0+IGkuaGVhbHRoU3RhdHVzID09PSAnaGVhbHRoeScpLmxlbmd0aCxcbiAgICAgICAgICAgICAgd2FybmluZzogaW50ZWdyYXRpb25zLmZpbHRlcihpID0+IGkuaGVhbHRoU3RhdHVzID09PSAnd2FybmluZycpLmxlbmd0aCxcbiAgICAgICAgICAgICAgZXJyb3I6IGludGVncmF0aW9ucy5maWx0ZXIoaSA9PiBpLmhlYWx0aFN0YXR1cyA9PT0gJ2Vycm9yJykubGVuZ3RoLFxuICAgICAgICAgICAgICBtYWludGVuYW5jZTogaW50ZWdyYXRpb25zLmZpbHRlcihpID0+IGkuaGVhbHRoU3RhdHVzID09PSAnbWFpbnRlbmFuY2UnKS5sZW5ndGhcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnNcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIERlZmF1bHQgYWN0aW9uXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBg8J+UlyAqKkNyb3NzLVBsYXRmb3JtIEludGVncmF0aW9uIEh1YioqXG5cbkkgY2FuIGhlbHAgeW91IHdpdGg6XG7igKIgKipDcmVhdGUgSW50ZWdyYXRpb24qKiAtIENvbm5lY3QgdG8gQWZyaWNhbiBmaW50ZWNoIHByb3ZpZGVyc1xu4oCiICoqU3luYyBEYXRhKiogLSBUcmlnZ2VyIGF1dG9ub21vdXMgc3luY2hyb25pemF0aW9uICBcbuKAoiAqKkdldCBSZWNvbW1lbmRhdGlvbnMqKiAtIEFJLXBvd2VyZWQgcHJvdmlkZXIgc3VnZ2VzdGlvbnNcbuKAoiAqKkhlYWx0aCBNb25pdG9yaW5nKiogLSBDaGVjayBpbnRlZ3JhdGlvbiBzdGF0dXNcbuKAoiAqKkNvbmZpZ3VyYXRpb24qKiAtIFNldCB1cCB3ZWJob29rcyBhbmQgZGF0YSBmbG93c1xuXG5XaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGRvIHdpdGggaW50ZWdyYXRpb25zP2AsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXG4gICAgICAgICAgJ0NyZWF0ZSBpbnRlZ3JhdGlvbiB3aXRoIFBheXN0YWNrJyxcbiAgICAgICAgICAnU3luYyBhbGwgaW50ZWdyYXRpb25zJyxcbiAgICAgICAgICAnR2V0IHByb3ZpZGVyIHJlY29tbWVuZGF0aW9ucyBmb3IgS2VueWEnLFxuICAgICAgICAgICdDaGVjayBpbnRlZ3JhdGlvbiBoZWFsdGggc3RhdHVzJyxcbiAgICAgICAgICAnU2hvdyBhdmFpbGFibGUgQWZyaWNhbiBmaW50ZWNoIHByb3ZpZGVycydcbiAgICAgICAgXVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Nyb3NzLXBsYXRmb3JtIGludGVncmF0aW9uIGV4ZWN1dGlvbiBmYWlsZWQnLCB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgcXVlcnksXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBleGVjdXRlIGludGVncmF0aW9uIG9wZXJhdGlvbi4gUGxlYXNlIGNoZWNrIHRoZSBzeXN0ZW0gbG9ncyBmb3IgZGV0YWlscy4nLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICdWZXJpZnkgeW91ciBwZXJtaXNzaW9ucyBmb3IgaW50ZWdyYXRpb24gbWFuYWdlbWVudCcsXG4gICAgICAgICAgJ0NoZWNrIGlmIHRoZSBpbnRlZ3JhdGlvbiBzZXJ2aWNlIGlzIHJ1bm5pbmcnLFxuICAgICAgICAgICdUcnkgYSBzaW1wbGVyIGludGVncmF0aW9uIGNvbW1hbmQgZmlyc3QnXG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIGNyb3NzLXBsYXRmb3JtIGludGVncmF0aW9uIHJlcXVlc3QgcGFyYW1ldGVyc1xuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUNyb3NzUGxhdGZvcm1JbnRlZ3JhdGlvblJlcXVlc3QocXVlcnk6IHN0cmluZyk6IGFueSB7XG4gICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBDaGVjayBmb3IgcHJvdmlkZXIgbmFtZXNcbiAgICBsZXQgcHJvdmlkZXJJZCA9ICcnO1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdwYXlzdGFjaycpKSBwcm92aWRlcklkID0gJ3BheXN0YWNrJztcbiAgICBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdmbHV0dGVyd2F2ZScpKSBwcm92aWRlcklkID0gJ2ZsdXR0ZXJ3YXZlJztcbiAgICBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdtcGVzYScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ20tcGVzYScpKSBwcm92aWRlcklkID0gJ21wZXNhJztcbiAgICBlbHNlIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdtdG4gbW9iaWxlIG1vbmV5JykpIHByb3ZpZGVySWQgPSAnbXRuX21vYmlsZV9tb25leSc7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnaW50ZXJzd2l0Y2gnKSkgcHJvdmlkZXJJZCA9ICdpbnRlcnN3aXRjaCc7XG5cbiAgICAvLyBDaGVjayBmb3IgY291bnRyaWVzL21hcmtldHNcbiAgICBsZXQgdGFyZ2V0TWFya2V0czogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnbmlnZXJpYScpKSB0YXJnZXRNYXJrZXRzLnB1c2goJ25pZ2VyaWEnKTtcbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygna2VueWEnKSkgdGFyZ2V0TWFya2V0cy5wdXNoKCdrZW55YScpO1xuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzb3V0aCBhZnJpY2EnKSkgdGFyZ2V0TWFya2V0cy5wdXNoKCdzb3V0aF9hZnJpY2EnKTtcbiAgICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnZ2hhbmEnKSkgdGFyZ2V0TWFya2V0cy5wdXNoKCdnaGFuYScpO1xuICAgIGlmICh0YXJnZXRNYXJrZXRzLmxlbmd0aCA9PT0gMCAmJiBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhZnJpY2EnKSkge1xuICAgICAgdGFyZ2V0TWFya2V0cyA9IFsnbmlnZXJpYScsICdrZW55YScsICdzb3V0aF9hZnJpY2EnLCAnZ2hhbmEnXTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgYnVzaW5lc3MgdHlwZVxuICAgIGxldCBidXNpbmVzc1R5cGUgPSAnZmludGVjaCc7XG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2Vjb21tZXJjZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2UtY29tbWVyY2UnKSkgYnVzaW5lc3NUeXBlID0gJ2Vjb21tZXJjZSc7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygncmVtaXR0YW5jZScpKSBidXNpbmVzc1R5cGUgPSAncmVtaXR0YW5jZSc7XG4gICAgZWxzZSBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnbGVuZGluZycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2xvYW4nKSkgYnVzaW5lc3NUeXBlID0gJ2xlbmRpbmcnO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGFjdGlvblxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjcmVhdGUnKSAmJiBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdpbnRlZ3JhdGlvbicpKSB7XG4gICAgICByZXR1cm4geyBcbiAgICAgICAgYWN0aW9uOiAnY3JlYXRlX2ludGVncmF0aW9uJywgXG4gICAgICAgIHByb3ZpZGVySWQsIFxuICAgICAgICBjcmVkZW50aWFsczoge30sIC8vIFdvdWxkIGJlIHBhcnNlZCBmcm9tIGFjdHVhbCByZXF1ZXN0XG4gICAgICAgIGNvbmZpZ3VyYXRpb246IHt9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdzeW5jJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnc3luY2hyb25pemUnKSkge1xuICAgICAgY29uc3QgaW50ZWdyYXRpb25JZCA9IHRoaXMuZXh0cmFjdEludGVncmF0aW9uSWQobG93ZXJRdWVyeSk7XG4gICAgICByZXR1cm4geyBhY3Rpb246ICd0cmlnZ2VyX3N5bmMnLCBpbnRlZ3JhdGlvbklkIH07XG4gICAgfVxuXG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3JlY29tbWVuZCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3N1Z2dlc3QnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhZHZpY2UnKSkge1xuICAgICAgcmV0dXJuIHsgYWN0aW9uOiAncmVjb21tZW5kYXRpb25zJywgYnVzaW5lc3NUeXBlLCB0YXJnZXRNYXJrZXRzIH07XG4gICAgfVxuXG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2hlYWx0aCcpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3N0YXR1cycpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ21vbml0b3InKSkge1xuICAgICAgcmV0dXJuIHsgYWN0aW9uOiAnaGVhbHRoX2NoZWNrJyB9O1xuICAgIH1cblxuICAgIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdwcm92aWRlcicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2F2YWlsYWJsZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2xpc3QnKSkge1xuICAgICAgcmV0dXJuIHsgYWN0aW9uOiAnbGlzdF9wcm92aWRlcnMnLCB0YXJnZXRNYXJrZXRzIH07XG4gICAgfVxuXG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2NvbmZpZ3VyZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NldHVwJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnY29uZmlnJykpIHtcbiAgICAgIHJldHVybiB7IGFjdGlvbjogJ2NvbmZpZ3VyZV9pbnRlZ3JhdGlvbicsIHByb3ZpZGVySWQgfTtcbiAgICB9XG5cbiAgICAvLyBEZWZhdWx0IHRvIG92ZXJ2aWV3XG4gICAgcmV0dXJuIHsgYWN0aW9uOiAnb3ZlcnZpZXcnIH07XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBpbnRlZ3JhdGlvbiBJRCBmcm9tIHF1ZXJ5XG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RJbnRlZ3JhdGlvbklkKHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IG1hdGNoZXMgPSBxdWVyeS5tYXRjaCgvaW50ZWdyYXRpb25bX1xcc10rKFthLWYwLTlcXC1dKykvaSk7XG4gICAgcmV0dXJuIG1hdGNoZXMgPyBtYXRjaGVzWzFdIDogJyc7XG4gIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGludGVsbGlnZW50RXhlY3V0aW9uRW5naW5lID0gbmV3IEludGVsbGlnZW50RXhlY3V0aW9uRW5naW5lKCk7Il0sIm5hbWVzIjpbImludGVsbGlnZW50RXhlY3V0aW9uRW5naW5lIiwiSW50ZWxsaWdlbnRFeGVjdXRpb25FbmdpbmUiLCJleGVjdXRlVXNlclJlcXVlc3QiLCJ1c2VyUXVlcnkiLCJ1c2VySWQiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwibG9nZ2VyIiwiaW5mbyIsInF1ZXJ5Iiwic3Vic3RyaW5nIiwiaW50ZW50IiwiaW50ZWxsaWdlbnRJbnRlbnRBbmFseXplciIsImFuYWx5emVJbnRlbnQiLCJjb25maWRlbmNlIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzdWdnZXN0ZWRSZXNwb25zZSIsInN1Z2dlc3Rpb25zIiwiZ2V0SGVscGZ1bFN1Z2dlc3Rpb25zIiwicmVzdWx0IiwiaXNCdWxrT3BlcmF0aW9uIiwiZXhlY3V0ZUJ1bGtPcGVyYXRpb24iLCJpc1JlcG9ydGluZ1JlcXVlc3QiLCJleGVjdXRlUmVwb3J0R2VuZXJhdGlvbiIsImlzSW50ZWdyYXRpb25UZXN0aW5nUmVxdWVzdCIsImV4ZWN1dGVJbnRlZ3JhdGlvblRlc3RpbmciLCJpc1NlbGZIZWFsaW5nUmVxdWVzdCIsImV4ZWN1dGVTZWxmSGVhbGluZyIsImlzTW9kZWxEZXBsb3ltZW50UmVxdWVzdCIsImV4ZWN1dGVNb2RlbERlcGxveW1lbnQiLCJpc1N0cmF0ZWdpY1BsYW5uaW5nUmVxdWVzdCIsImV4ZWN1dGVTdHJhdGVnaWNQbGFubmluZyIsImlzTXVsdGlBZ2VudENvb3JkaW5hdGlvblJlcXVlc3QiLCJleGVjdXRlTXVsdGlBZ2VudENvb3JkaW5hdGlvbiIsImlzSW5mcmFzdHJ1Y3R1cmVNYW5hZ2VtZW50UmVxdWVzdCIsImV4ZWN1dGVJbmZyYXN0cnVjdHVyZU1hbmFnZW1lbnQiLCJpc0F0dHJpYnV0aW9uQW5hbHlzaXNSZXF1ZXN0IiwiZXhlY3V0ZUF0dHJpYnV0aW9uQW5hbHlzaXMiLCJpc01vbml0b3JpbmdSZXF1ZXN0IiwiZXhlY3V0ZU1vbml0b3JpbmciLCJpc0F1dG9ub21vdXNBQlRlc3RpbmdSZXF1ZXN0IiwiZXhlY3V0ZUF1dG9ub21vdXNBQlRlc3RpbmciLCJpc0NvbXBsaWFuY2VNb25pdG9yaW5nUmVxdWVzdCIsImV4ZWN1dGVDb21wbGlhbmNlTW9uaXRvcmluZyIsImlzQ29udGVudEdlbmVyYXRpb25SZXF1ZXN0IiwiZXhlY3V0ZUNvbnRlbnRHZW5lcmF0aW9uIiwiaXNDcm9zc1BsYXRmb3JtSW50ZWdyYXRpb25SZXF1ZXN0IiwiZXhlY3V0ZUNyb3NzUGxhdGZvcm1JbnRlZ3JhdGlvbiIsImFjdGlvbiIsImV4ZWN1dGVDcmVhdGlvbiIsImV4ZWN1dGVBc3NpZ25tZW50IiwiZXhlY3V0ZUZldGNoIiwiZXhlY3V0ZVVwZGF0ZSIsImV4ZWN1dGVEZWxldGUiLCJleGVjdXRlQW5hbHlzaXMiLCJ0b0xvd2VyQ2FzZSIsImdldEFjdGlvblN1Z2dlc3Rpb25zIiwiZXhlY3V0aW9uVGltZSIsInJlY29yZFRhc2tFeGVjdXRpb24iLCJlbnRpdHkiLCJ1bmRlZmluZWQiLCJlcnJvciIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwiU3RyaW5nIiwiY3JlYXRlQ29udGFjdCIsImRhdGEiLCJjcmVhdGVVc2VyIiwiY3JlYXRlT3JnYW5pemF0aW9uIiwiY3JlYXRlV29ya2Zsb3ciLCJjcmVhdGVDYW1wYWlnbiIsImNyZWF0ZVRhc2siLCJjcmVhdGVTZWdtZW50IiwiY3JlYXRlVGVtcGxhdGUiLCJjcmVhdGVMaXN0IiwiY3JlYXRlSW50ZWdyYXRpb24iLCJjcmVhdGVKb3VybmV5IiwiY3JlYXRlQUJUZXN0IiwiY29udGFjdERhdGEiLCJuYW1lIiwiZW1haWwiLCJwaG9uZSIsImV4aXN0aW5nQ29udGFjdCIsInByaXNtYSIsImNvbnRhY3QiLCJmaW5kRmlyc3QiLCJ3aGVyZSIsIk9SIiwiZmlsdGVyIiwiY29uZGl0aW9uIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImVtYWlsVG9Vc2UiLCJyZXBsYWNlIiwiY3JlYXRlIiwiZmlyc3ROYW1lIiwic3BsaXQiLCJsYXN0TmFtZSIsInNsaWNlIiwiam9pbiIsImNvbXBhbnkiLCJub3RlcyIsInNvdXJjZSIsInN0YXR1cyIsImNyZWF0ZWRCeUlkIiwiY29udGFjdElkIiwiaWQiLCJkZXRhaWxzIiwidXNlckRhdGEiLCJjdXJyZW50VXNlciIsInVzZXIiLCJmaW5kVW5pcXVlIiwic2VsZWN0Iiwicm9sZSIsImluY2x1ZGVzIiwiZXhpc3RpbmdVc2VyIiwidGVtcFBhc3N3b3JkIiwicGFzc3dvcmQiLCJnZW5lcmF0ZVRlbXBvcmFyeVBhc3N3b3JkIiwiYmNyeXB0IiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwibmV3VXNlciIsImlzQWN0aXZlIiwiZW1haWxWZXJpZmllZCIsImNyZWF0ZWRBdCIsInVzZXJQcmVmZXJlbmNlIiwicHJlZmVyZW5jZXMiLCJ0aGVtZSIsIm5vdGlmaWNhdGlvbnMiLCJlbWFpbE5vdGlmaWNhdGlvbnMiLCJsYW5ndWFnZSIsInRpbWV6b25lIiwibmV3VXNlcklkIiwiY3JlYXRlZEJ5IiwidGVtcG9yYXJ5UGFzc3dvcmQiLCJjaGFycyIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJvcmdEYXRhIiwib3JnYW5pemF0aW9uSWQiLCJleGlzdGluZ09yZyIsIm9yZ2FuaXphdGlvbiIsImRvbWFpbiIsIm5ld09yZyIsImluZHVzdHJ5IiwiY291bnRyeSIsInNldHRpbmdzIiwiYnJhbmRpbmciLCJwcmltYXJ5Q29sb3IiLCJsb2dvIiwiZmVhdHVyZXMiLCJlbWFpbE1hcmtldGluZyIsInNtc01hcmtldGluZyIsIndoYXRzYXBwTWFya2V0aW5nIiwibGVhZFB1bHNlIiwiYW5hbHl0aWNzIiwid29ya2Zsb3dzIiwibGltaXRzIiwiY29udGFjdHMiLCJjb250YWN0TGltaXQiLCJjYW1wYWlnbnMiLCJjYW1wYWlnbkxpbWl0IiwidXNlcnMiLCJ1c2VyTGltaXQiLCJjb21wbGlhbmNlIiwiZ2RwckVuYWJsZWQiLCJkYXRhUmV0ZW50aW9uRGF5cyIsInN1YnNjcmlwdGlvblBsYW4iLCJzdWJzY3JpcHRpb24iLCJwbGFuSWQiLCJjdXJyZW50UGVyaW9kU3RhcnQiLCJjdXJyZW50UGVyaW9kRW5kIiwiYWRtaW5Vc2VyIiwib3JnSWQiLCJhZG1pblVzZXJJZCIsIndvcmtmbG93RGF0YSIsIndvcmtmbG93TmFtZSIsInR5cGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ3b3JrZmxvd1R5cGUiLCJtYXJrZXQiLCJ3b3JrZmxvd0Rlc2NyaXB0aW9uIiwiYnVpbGRXb3JrZmxvd0Rlc2NyaXB0aW9uIiwidHJpZ2dlciIsImV4dHJhY3RUcmlnZ2VyRnJvbVdvcmtmbG93IiwiYWN0aW9ucyIsImV4dHJhY3RBY3Rpb25zRnJvbVdvcmtmbG93IiwiYnVpbGRSZXN1bHQiLCJ3b3JrZmxvd05vZGVCdWlsZGVyIiwiYnVpbGRXb3JrZmxvd0Zyb21EZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwiY29uZGl0aW9ucyIsImludGVncmF0aW9ucyIsInZhcmlhYmxlcyIsIm9wdGlvbnMiLCJnZW5lcmF0ZVByZXZpZXciLCJhdXRvQ29ubmVjdCIsIm9wdGltaXplRm9yUGVyZm9ybWFuY2UiLCJlcnJvcnMiLCJ3YXJuaW5ncyIsImNyZWF0ZVNpbXBsZVdvcmtmbG93Iiwid29ya2Zsb3ciLCJvYmplY3RpdmUiLCJkZWZpbml0aW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsImFpR2VuZXJhdGVkIiwiYWR2YW5jZWROb2RlcyIsImNvbXBsZXhpdHkiLCJlc3RpbWF0ZWRDb21wbGV4aXR5IiwiZXN0aW1hdGVkRXhlY3V0aW9uVGltZSIsIm5vZGVDb3VudCIsIm5vZGVzIiwiY29ubmVjdGlvbkNvdW50IiwiY29ubmVjdGlvbnMiLCJub2RlSWRNYXAiLCJNYXAiLCJub2RlIiwiZW5oYW5jZWRDb25maWciLCJjb25maWciLCJtZXRhZGF0YSIsImF2ZXJhZ2VFeGVjdXRpb25UaW1lIiwibm9kZURlc2NyaXB0aW9uIiwiZGJOb2RlIiwid29ya2Zsb3dOb2RlIiwid29ya2Zsb3dJZCIsIm1hcFRvU2NoZW1hTm9kZVR5cGUiLCJwb3NpdGlvblgiLCJwb3NpdGlvbiIsIngiLCJwb3NpdGlvblkiLCJ5Iiwic2V0IiwiY29ubmVjdGlvbiIsInNvdXJjZU5vZGVJZCIsImdldCIsInRhcmdldE5vZGVJZCIsInNvdXJjZUlkIiwidGFyZ2V0SWQiLCJub2Rlc0NyZWF0ZWQiLCJjb25uZWN0aW9uc0NyZWF0ZWQiLCJhaVN1Z2dlc3Rpb25zIiwiZmFsbGJhY2tFcnJvciIsImNhbXBhaWduRGF0YSIsImNhbXBhaWduTmFtZSIsImNhbXBhaWduVHlwZSIsImNhbXBhaWduIiwiZW1haWxDYW1wYWlnbiIsInN1YmplY3QiLCJmcm9tIiwiY29udGVudCIsImdlbmVyYXRlRGVmYXVsdEVtYWlsQ29udGVudCIsInNtc0NhbXBhaWduIiwiZ2VuZXJhdGVEZWZhdWx0U01TQ29udGVudCIsIndoYXRzQXBwQ2FtcGFpZ24iLCJnZW5lcmF0ZURlZmF1bHRXaGF0c0FwcENvbnRlbnQiLCJjYW1wYWlnbklkIiwidG9VcHBlckNhc2UiLCJhdWRpZW5jZSIsInRhc2tEYXRhIiwiYXNzaWduZWVJZCIsImFzc2lnbmVlRm91bmQiLCJhc3NpZ25lZSIsImZpbmRVc2VyQnlOYW1lIiwicm9sZU1hcHBpbmciLCJub3JtYWxpemVkQXNzaWduZWUiLCJtYXBwZWRSb2xlIiwicm9sZUFzc2lnbmVlIiwiTk9UIiwidGVhbU1lbWJlciIsInRhc2siLCJ0aXRsZSIsInByaW9yaXR5IiwiY3JlYXRvcklkIiwiZHVlRGF0ZSIsInRhc2tJZCIsImFzc2lnbmVlSGludCIsImNvbnRleHQiLCJhc3NpZ25lZU5hbWUiLCJuYW1lSGludCIsIm5vcm1hbGl6ZWRIaW50IiwidHJpbSIsImNvbnRhaW5zIiwibW9kZSIsIm5hbWVQYXJ0cyIsInBhcnQiLCJmZXRjaFJlcXVlc3QiLCJmZXRjaExlYWRQdWxzZURhdGEiLCJmZXRjaEFuYWx5dGljc0RhdGEiLCJmZXRjaFVzZXJEYXRhIiwiZmV0Y2hDYW1wYWlnbkRhdGEiLCJmZXRjaEdlbmVyYWxEYXRhIiwicmVxdWVzdCIsInZpc2l0b3JDb3VudCIsInZpc2l0b3JBY3Rpdml0eSIsImNvdW50IiwicmVjZW50VmlzaXRvcnMiLCJmaW5kTWFueSIsInRha2UiLCJvcmRlckJ5IiwidGltZXN0YW1wIiwiaW5jbHVkZSIsInZpc2l0b3IiLCJsb2NhdGlvbiIsImRldmljZSIsInRvdGFsVmlzaXRvcnMiLCJzdW1tYXJ5IiwiZ2VuZXJhdGVEZWZhdWx0V29ya2Zsb3dOb2RlcyIsInRlbXBsYXRlIiwiZGVsYXkiLCJmb3JtVHlwZSIsInJlcXVpcmVkIiwiZW5kcG9pbnQiLCJ0aW1lb3V0IiwidGFza1R5cGUiLCJkdXJhdGlvbiIsInN0ZXBzIiwicHVzaCIsImZhbGxiYWNrTW9kZSIsImRlZmF1bHROb2RlcyIsImFkdmFuY2VkVHlwZSIsInR5cGVNYXBwaW5nIiwidXBkYXRlQ29udGFjdCIsInVwZGF0ZVdvcmtmbG93IiwidXBkYXRlQ2FtcGFpZ24iLCJ1cGRhdGVUYXNrIiwidXBkYXRlU2VnbWVudCIsInVwZGF0ZVRlbXBsYXRlIiwidXBkYXRlTGlzdCIsInVwZGF0ZUludGVncmF0aW9uIiwidXBkYXRlSm91cm5leSIsInVwZGF0ZUFCVGVzdCIsImRlbGV0ZUNvbnRhY3QiLCJkZWxldGVXb3JrZmxvdyIsImRlbGV0ZUNhbXBhaWduIiwiZGVsZXRlVGFzayIsImRlbGV0ZVNlZ21lbnQiLCJkZWxldGVUZW1wbGF0ZSIsImRlbGV0ZUxpc3QiLCJkZWxldGVJbnRlZ3JhdGlvbiIsImRlbGV0ZUpvdXJuZXkiLCJkZWxldGVBQlRlc3QiLCJhbmFseXNpc1JlcXVlc3QiLCJvcmlnaW5hbFF1ZXJ5IiwiYW5hbHl6ZVRvcFBlcmZvcm1lcnMiLCJhbmFseXplVGVhbVBlcmZvcm1hbmNlIiwiYW5hbHl6ZUNvbnZlcnNpb25SYXRlcyIsImFuYWx5emVSZXZlbnVlQnJlYWtkb3duIiwiYW5hbHl6ZUFjcXVpc2l0aW9uTWV0cmljcyIsImFuYWx5emVXb3JrZmxvd0VmZmljaWVuY3kiLCJhbmFseXplQ3VzdG9tZXJEYXRhIiwiYW5hbHl6ZUNhbXBhaWduRGF0YSIsImFuYWx5emVXb3JrZmxvd0RhdGEiLCJhbmFseXplVGFza0RhdGEiLCJhbmFseXplU2FsZXNEYXRhIiwiYW5hbHl6ZUdlbmVyYWxEYXRhIiwic2VnbWVudE5hbWUiLCJydWxlcyIsImZpZWxkIiwib3BlcmF0b3IiLCJ2YWx1ZSIsInNlZ21lbnQiLCJzZWdtZW50SWQiLCJ0ZW1wbGF0ZVR5cGUiLCJ0ZW1wbGF0ZU5hbWUiLCJlbWFpbFRlbXBsYXRlIiwicHJldmlld1RleHQiLCJjYXRlZ29yeSIsInNNU1RlbXBsYXRlIiwid2hhdHNBcHBUZW1wbGF0ZSIsInRlbXBsYXRlSWQiLCJjb250YWN0U3RhdHMiLCJjYW1wYWlnblN0YXRzIiwidGFza1N0YXRzIiwiY29udmVyc2lvblN0YXRzIiwid29ya2Zsb3dTdGF0cyIsInJldmVudWVTdGF0cyIsIlByb21pc2UiLCJhbGwiLCJnZXRDb250YWN0U3RhdGlzdGljcyIsImdldENhbXBhaWduU3RhdGlzdGljcyIsImdldFRhc2tTdGF0aXN0aWNzIiwiZ2V0Q29udmVyc2lvblN0YXRpc3RpY3MiLCJnZXRXb3JrZmxvd1N0YXRpc3RpY3MiLCJnZXRSZXZlbnVlU3RhdGlzdGljcyIsInRhc2tzIiwiY29udmVyc2lvbnMiLCJyZXZlbnVlIiwidG90YWwiLCJ0b0xvY2FsZVN0cmluZyIsInVzZXJTdGF0cyIsImFnZ3JlZ2F0ZSIsIl9jb3VudCIsInJvbGVEaXN0cmlidXRpb24iLCJncm91cEJ5IiwiYnkiLCJyZWNlbnRVc2VycyIsInRvdGFsVXNlcnMiLCJtYXAiLCJyIiwiZW1haWxDYW1wYWlnbnMiLCJzbXNDYW1wYWlnbnMiLCJ3aGF0c2FwcENhbXBhaWducyIsInJlY2VudENhbXBhaWducyIsInRvdGFsQ2FtcGFpZ25zIiwiYnJlYWtkb3duIiwic21zIiwid2hhdHNhcHAiLCJqb3VybmV5cyIsImFiVGVzdHMiLCJub3RpZmljYXRpb24iLCJyZWFkIiwiam91cm5leSIsImFCVGVzdCIsImFjdGl2ZVVzZXJzIiwidW5yZWFkTm90aWZpY2F0aW9ucyIsImN1c3RvbWVySm91cm5leXMiLCJydW5uaW5nVGVzdHMiLCJidXNpbmVzc0NvbnRhY3RzIiwibm90IiwiaW5kaXZpZHVhbENvbnRhY3RzIiwiYnVzaW5lc3NlcyIsImluZGl2aWR1YWxzIiwicm91bmQiLCJ0b3RhbFdvcmtmbG93cyIsImJ5U3RhdHVzIiwidyIsImFuYWx5emVSZXZlbnVlRGF0YSIsImFjdGl2ZSIsInJlY2VudENvbnRhY3RzIiwiZ3RlIiwicmVjZW50bHlBZGRlZCIsImVtYWlsQ291bnQiLCJzbXNDb3VudCIsIndoYXRzYXBwQ291bnQiLCJjb21wbGV0ZWQiLCJwZW5kaW5nIiwib3ZlcmR1ZSIsImx0IiwiY29udmVyc2lvbkV2ZW50cyIsImNvbnZlcnNpb25FdmVudCIsInRvdGFsVmFsdWUiLCJfc3VtIiwidG90YWxDb252ZXJzaW9ucyIsImF2ZXJhZ2VWYWx1ZSIsIm5vdGUiLCJ1cGRhdGVEYXRhIiwidXBkYXRlRmllbGRzIiwibGFzdE5hbWVQYXJ0cyIsInVwZGF0ZWRDb250YWN0IiwidXBkYXRlIiwidXBkYXRlZEZpZWxkcyIsInVwZGF0ZWRXb3JrZmxvdyIsInRhYmxlIiwidXBkYXRlZENhbXBhaWduIiwiYXNzaWduZWVVc2VyIiwidXBkYXRlZFRhc2siLCJ1cGRhdGVkU2VnbWVudCIsImNoYW5nZXMiLCJ1cGRhdGVkVGVtcGxhdGUiLCJkZWxldGVEYXRhIiwiZGVsZXRlIiwiZGVsZXRlZENvbnRhY3RJZCIsImFyY2hpdmVkV29ya2Zsb3ciLCJkZWxldGVkQ2FtcGFpZ25JZCIsImNhbmNlbGxlZFRhc2siLCJzZWdtZW50cyIsInNvbWUiLCJzTVNDYW1wYWlnbiIsInRvdGFsVXNhZ2UiLCJjYW1wYWlnblVzYWdlIiwicmVzdWx0cyIsImxvd2VyUXVlcnkiLCJzYWxlc1BlcmZvcm1hbmNlIiwidG9wU2FsZXNQZXJzb24iLCJwZXJmIiwiYXNzaWduZWRUb0lkIiwiY29tcGxldGVkVGFza3MiLCJwZXJpb2QiLCJwIiwibWFya2V0aW5nVXNlcnMiLCJtYXJrZXRpbmdQZXJmb3JtYW5jZSIsImNyZWF0ZWRDYW1wYWlnbnMiLCJ0b3RhbEFjdGl2aXR5Iiwic29ydCIsImEiLCJiIiwidG9wQ2FtcGFpZ25zIiwidG9wV29ya2Zsb3dzIiwidG9wUGVyZm9ybWVyIiwiZm9yRWFjaCIsImluZGV4IiwidG9wTWFya2V0ZXIiLCJ0aW1lZnJhbWUiLCJleHRyYWN0VGltZWZyYW1lIiwic3RhcnREYXRlIiwiZ2V0U3RhcnREYXRlIiwidGFza1BlcmZvcm1hbmNlIiwidGVhbU1lbWJlcnMiLCJ0ZWFtTWV0cmljcyIsIm1lbWJlciIsIm1lbWJlclRhc2tzIiwiZmluZCIsInQiLCJpblByb2dyZXNzIiwidG9kbyIsImNvbXBsZXRpb25SYXRlIiwic2FsZXNUZWFtIiwibSIsIm1hcmtldGluZ1RlYW0iLCJyb2xlQnJlYWtkb3duIiwicmVkdWNlIiwiYWNjIiwiZW50cmllcyIsImVtb2ppIiwidG90YWxDb21wbGV0ZWQiLCJzdW0iLCJ0b3RhbFRhc2tzIiwiYXZnQ29tcGxldGlvblJhdGUiLCJ0b3RhbE1lbWJlcnMiLCJ0b3RhbENvbnRhY3RzIiwiYWN0aXZlQ2FtcGFpZ25zIiwiY29udmVyc2lvbk1ldHJpY3MiLCJlbWFpbENvbnZlcnNpb24iLCJ3aGF0c2FwcENvbnZlcnNpb24iLCJzbXNDb252ZXJzaW9uIiwid29ya2Zsb3dDb252ZXJzaW9uIiwib3ZlcmFsbENvbnZlcnNpb24iLCJjb252ZXJzaW9uIiwiYmVzdENoYW5uZWwiLCJyZXZlbnVlRGF0YSIsInRvdGFsUmV2ZW51ZSIsIm1vbnRobHlHcm93dGgiLCJjdXN0b21lclNlZ21lbnRzIiwiZW50ZXJwcmlzZSIsInNtZSIsImluZGl2aWR1YWwiLCJjaGFubmVscyIsImRpcmVjdCIsInBhcnRuZXJzaGlwcyIsInJlZmVycmFscyIsIm1hcmtldGluZyIsInRvdGFsU2VnbWVudFJldmVudWUiLCJ2YWx1ZXMiLCJ0b3RhbENoYW5uZWxSZXZlbnVlIiwiaW5zaWdodHMiLCJ0b3BTZWdtZW50IiwidG9wQ2hhbm5lbCIsImdyb3d0aFN0YXR1cyIsIm5ld0NvbnRhY3RzIiwiYWNxdWlzaXRpb25NZXRyaWNzIiwibmV3Q3VzdG9tZXJzIiwidG90YWxDdXN0b21lcnMiLCJjYWMiLCJsdHYiLCJsdHZDYWNSYXRpbyIsImFjcXVpc2l0aW9uQ29zdHMiLCJzYWxlcyIsInRvdGFsQWNxdWlzaXRpb25Db3N0IiwiZWZmaWNpZW5jeSIsInBheWJhY2tNb250aHMiLCJ0b3RhbFNwZW5kIiwid29ya2Zsb3dNZXRyaWNzIiwic3VjY2Vzc1JhdGUiLCJhdmdFeGVjdXRpb25UaW1lIiwiYWN0aXZlV29ya2Zsb3dzIiwiYXZnU3VjY2Vzc1JhdGUiLCJ0b3BXb3JrZmxvdyIsInV0aWxpemF0aW9uUmF0ZSIsInNhbGVzVGFza3MiLCJhc3NpZ25lZFRvIiwibmV3TGVhZHMiLCJjb21wbGV0ZWRTYWxlc1Rhc2tzIiwidG90YWxTYWxlc1Rhc2tzIiwic2FsZXNDb252ZXJzaW9uUmF0ZSIsInNhbGVzQnlQZXJzb24iLCJrZXkiLCJwZXJzb24iLCJjb252ZXJzaW9uUmF0ZSIsInJldmVudWVNZXRyaWNzIiwiYXZnRGVhbFNpemUiLCJzYWxlc0N5Y2xlIiwidG9wU2FsZXNwZXJzb24iLCJzYWxlc01ldHJpY3MiLCJpbmFjdGl2ZSIsImdyb3d0aCIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwic3RhcnRPZldlZWsiLCJzZXREYXRlIiwiZ2V0RGF5IiwibGFzdFdlZWtTdGFydCIsInF1YXJ0ZXJTdGFydCIsImdldFRpbWUiLCJsaXN0TmFtZSIsImxpc3RUeXBlIiwibGlzdCIsImxpc3RJZCIsImludGVncmF0aW9uVHlwZSIsImludGVncmF0aW9uTmFtZSIsImludGVncmF0aW9uIiwiY3JlZGVudGlhbHMiLCJpbnRlZ3JhdGlvbklkIiwiam91cm5leU5hbWUiLCJ0cmlnZ2VycyIsImpvdXJuZXlJZCIsInRlc3ROYW1lIiwiZW50aXR5VHlwZSIsImVudGl0eUlkIiwiYWJUZXN0IiwidGVzdFR5cGUiLCJ0ZXN0RWxlbWVudHMiLCJ3aW5uZXJNZXRyaWMiLCJkaXN0cmlidXRpb25QZXJjZW50Iiwid2lubmVyVGhyZXNob2xkIiwidGVzdElkIiwidXBkYXRlZExpc3QiLCJ1cGRhdGVkSW50ZWdyYXRpb24iLCJ1cGRhdGVkSm91cm5leSIsInVwZGF0ZWRUZXN0IiwibGlzdHMiLCJyZXBvcnRLZXl3b3JkcyIsImZvcm1hdEtleXdvcmRzIiwiZGF0YUtleXdvcmRzIiwia2V5d29yZCIsImZvcm1hdCIsInJlcG9ydFJlcXVlc3QiLCJ1c2VyUm9sZSIsImV4dHJhY3RSZXBvcnRPcHRpb25zIiwiaW50ZWxsaWdlbnRSZXBvcnRpbmdFbmdpbmUiLCJnZW5lcmF0ZVJlcG9ydCIsInJlcG9ydElkIiwiZXN0aW1hdGVkUm93cyIsImRvd25sb2FkVXJsIiwiaW5jbHVkZUNoYXJ0cyIsInNjaGVkdWxlIiwiZnJlcXVlbmN5IiwicmVjaXBpZW50cyIsInRlc3RpbmdLZXl3b3JkcyIsInN5c3RlbUtleXdvcmRzIiwic3BlY2lmaWNTZXJ2aWNlcyIsInNlcnZpY2UiLCJnZXRJbnRlZ3JhdGlvbkhlYWx0aCIsInRlc3RTcGVjaWZpY0ludGVncmF0aW9uIiwic3BlY2lmaWNJbnRlZ3JhdGlvbiIsImV4dHJhY3RTcGVjaWZpY0ludGVncmF0aW9uIiwiaW50ZWdyYXRpb25SZXN1bHQiLCJzdGF0dXNFbW9qaSIsInJlc3BvbnNlVGltZSIsImxhc3RDaGVja2VkIiwiY3JpdGljYWxpdHlMZXZlbCIsInNsYUNvbXBsaWFuY2UiLCJzbGFUYXJnZXQiLCJoZWFsdGhSZXBvcnQiLCJvdmVyYWxsIiwiY3JpdGljYWxJc3N1ZXMiLCJzY29yZSIsIm1ldHJpY3MiLCJoZWFsdGh5Q291bnQiLCJ0b3RhbEludGVncmF0aW9ucyIsImF2ZXJhZ2VSZXNwb25zZVRpbWUiLCJyaXNrTGV2ZWwiLCJpc3N1ZSIsInJlY29tbWVuZGF0aW9ucyIsIm92ZXJhbGxTdGF0dXMiLCJoZWFsdGhTY29yZSIsImxhc3RVcGRhdGVkIiwiY3JpdGljYWxJc3N1ZXNDb3VudCIsImludGVncmF0aW9uTWFwIiwiaGVhbGluZ0tleXdvcmRzIiwidHJpZ2dlclN5c3RlbUhlYWxpbmciLCJoZWFsU3BlY2lmaWNJbnRlZ3JhdGlvbiIsImhlYWxpbmdSZXBvcnQiLCJpbXByb3ZlbWVudCIsInN5c3RlbUhlYWx0aCIsImFjdGlvbnNFeGVjdXRlZCIsInRvdGFsQWN0aW9ucyIsInN1Y2Nlc3NmdWxBY3Rpb25zIiwibWF4IiwiYWJzIiwiZXN0aW1hdGVkRG93bnRpbWVQcmV2ZW50ZWQiLCJjb3N0U2F2aW5ncyIsInJlYyIsInNlc3Npb25JZCIsImJlZm9yZSIsImFmdGVyIiwibmV4dENoZWNrSW4iLCJoZWFsdGhCZWZvcmUiLCJoZWFsdGhBZnRlciIsImZhaWxlZEFjdGlvbnMiLCJkZXBsb3ltZW50S2V5d29yZHMiLCJjcmVhdGVNb2RlbERlcGxveW1lbnQiLCJnZXREZXBsb3ltZW50U3RhdHVzIiwiYXV0b25vbW91c0RlcGxveW1lbnRQaXBlbGluZSIsImRlcGxveW1lbnRQYXJhbXMiLCJwYXJzZURlcGxveW1lbnRSZXF1ZXN0IiwiYWN0aXZlRGVwbG95bWVudHMiLCJnZXRBY3RpdmVEZXBsb3ltZW50cyIsInJlY2VudEhpc3RvcnkiLCJnZXREZXBsb3ltZW50SGlzdG9yeSIsImRlcGxveW1lbnQiLCJzIiwic3RhdHVzSWNvbiIsImFjdGl2ZUNvdW50IiwicmVjZW50Q291bnQiLCJtb2RlbElkIiwibW9kZWxWZXJzaW9uIiwidGFyZ2V0RW52aXJvbm1lbnQiLCJlbnZpcm9ubWVudCIsInN0cmF0ZWd5IiwicGFyYW1ldGVycyIsImhpc3RvcnkiLCJ0b3RhbER1cmF0aW9uIiwic3RhcnRlZEF0IiwiZCIsInRvdGFsQ291bnQiLCJtb2RlbFBhdHRlcm5zIiwicGF0dGVybiIsIm1hdGNoIiwibW9kZWxNYXBwaW5ncyIsInZlcnNpb25NYXRjaCIsImNhbmFyeVBlcmNlbnRhZ2UiLCJzdHJhdGVnaWNLZXl3b3JkcyIsImdlbmVyYXRlRXhlY3V0aXZlU3RyYXRlZ2ljUGxhbiIsImdldEV4ZWN1dGl2ZURhc2hib2FyZCIsInN0cmF0ZWdpY0RlY2lzaW9uRW5naW5lIiwicGxhbm5pbmdQYXJhbXMiLCJwYXJzZVN0cmF0ZWdpY1BsYW5uaW5nUmVxdWVzdCIsInN0cmF0ZWdpY1BsYW4iLCJmb2N1cyIsImdvYWxzIiwicmVzb3VyY2VBbGxvY2F0aW9uIiwiYnVkZ2V0Iiwicmlza0Fzc2Vzc21lbnQiLCJwcmlvcml0aWVzIiwiZ29hbCIsInBsYW4iLCJnb2Fsc0NvdW50IiwidG90YWxCdWRnZXQiLCJkYXNoYm9hcmQiLCJvblRyYWNrIiwiYXRSaXNrIiwiZGVjaXNpb25zIiwidXJnZW50Iiwib3Bwb3J0dW5pdGllcyIsInRocmVhdHMiLCJyZWNlbnQiLCJpbnNpZ2h0IiwidG90YWxHb2FscyIsImdvYWxzT25UcmFjayIsInJpc2tHb2FscyIsInBlbmRpbmdEZWNpc2lvbnMiLCJkZWNpc2lvbiIsImNyZWF0ZVN0cmF0ZWdpY0RlY2lzaW9uIiwiZGVjaXNpb25UaXRsZSIsImRlY2lzaW9uRGVzY3JpcHRpb24iLCJkZWNpc2lvblR5cGUiLCJ1cmdlbmN5IiwiaW1wYWN0IiwiZGVjaXNpb25NYWtlciIsImRlYWRsaW5lIiwibmV4dFN0ZXBzIiwiZGVjaXNpb25QYXR0ZXJucyIsImFnZW50S2V5d29yZHMiLCJoYXNQZXJtaXNzaW9uIiwibXVsdGlBZ2VudENvb3JkaW5hdG9yIiwiY3JlYXRlQWdlbnRDb2xsYWJvcmF0aW9uIiwiZ2V0TXVsdGlBZ2VudFN0YXR1cyIsImNvb3JkaW5hdGlvblBhcmFtcyIsInBhcnNlQWdlbnRDb29yZGluYXRpb25SZXF1ZXN0IiwiY29sbGFib3JhdGlvbiIsImNhcGFiaWxpdGllcyIsInBhcnRpY2lwYW50cyIsImFnZW50U3RhdHVzIiwiZ2V0QWdlbnRTdGF0dXMiLCJwYXJ0aWNpcGFudElkIiwiYWdlbnQiLCJwYXJ0aWNpcGFudENvdW50IiwiZGVsZWdhdGVUYXNrVG9BZ2VudHMiLCJyZXF1aXJlZENhcGFiaWxpdGllcyIsImFnZW50cyIsImFjdGl2ZUNvbGxhYm9yYXRpb25zIiwiY29sbGFiIiwiZm9yTWF0Y2giLCJ0YXNrTWF0Y2giLCJjYXBhYmlsaXR5S2V5d29yZHMiLCJjYXBhYmlsaXR5Iiwia2V5d29yZHMiLCJkZWFkbGluZU1hdGNoIiwiaXNOYU4iLCJpbmZyYXN0cnVjdHVyZUtleXdvcmRzIiwicHJlZGljdGl2ZUluZnJhc3RydWN0dXJlTWFuYWdlciIsIm1hbmFnZW1lbnRQYXJhbXMiLCJwYXJzZUluZnJhc3RydWN0dXJlTWFuYWdlbWVudFJlcXVlc3QiLCJnZXRJbmZyYXN0cnVjdHVyZVN0YXR1cyIsIm92ZXJ2aWV3IiwidG90YWxSZXNvdXJjZXMiLCJoZWFsdGh5UmVzb3VyY2VzIiwid2FybmluZ1Jlc291cmNlcyIsImNyaXRpY2FsUmVzb3VyY2VzIiwic2NhbGluZ1Jlc291cmNlcyIsInRvdGFsQ29zdCIsImhvdXJseSIsInRvRml4ZWQiLCJkYWlseSIsIm1vbnRobHkiLCJyZWNlbnRTY2FsaW5nRXZlbnRzIiwiZXZlbnQiLCJyZXNvdXJjZUlkIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwicHJlZGljdGlvbnMiLCJwcmVkaWN0aW9uIiwiYnVzaW5lc3NJbXBhY3QiLCJoZWFsdGh5UGVyY2VudGFnZSIsIm1vbnRobHlDb3N0Iiwic2NhbGluZ0FjdGlvbiIsInNjYWxpbmdJZCIsImZvcmNlU2NhbGluZyIsInRhcmdldEluc3RhbmNlcyIsIm9wdGltaXphdGlvbklkIiwidG9JU09TdHJpbmciLCJ0YXJnZXRTYXZpbmdzIiwic2NvcGUiLCJyZXNvdXJjZUlkcyIsInJlc291cmNlcyIsInJlc291cmNlIiwiY3B1IiwidXNhZ2UiLCJ0cmVuZCIsIm1lbW9yeSIsImRpc2siLCJhcHBsaWNhdGlvbiIsInJlc291cmNlQ291bnQiLCJjcHVVc2FnZSIsIm1lbW9yeVVzYWdlIiwicmVzb3VyY2VQYXR0ZXJucyIsInRlc3QiLCJyZXNvdXJjZU1hcCIsImluc3RhbmNlTWF0Y2giLCJOdW1iZXIiLCJwYXJzZUludCIsImF0dHJpYnV0aW9uS2V5d29yZHMiLCJhdXRvbm9tb3VzQXR0cmlidXRpb25FbmdpbmUiLCJhbmFseXNpc1BhcmFtcyIsInBhcnNlQXR0cmlidXRpb25BbmFseXNpc1JlcXVlc3QiLCJnZXRSZWNlbnRJbnNpZ2h0cyIsImhvdXJzIiwiY29uZmlkZW5jZUljb24iLCJ0eXBlSWNvbiIsImFjdGlvblJlcXVpcmVkIiwiYWN0aW9uYWJsZUluc2lnaHRzIiwidG90YWxJbnNpZ2h0cyIsImhpZ2hDb25maWRlbmNlSW5zaWdodHMiLCJhdmVyYWdlQ29uZmlkZW5jZSIsImdldEF0dHJpYnV0aW9uTWV0cmljcyIsImF2Z1RpbWVUb0NvbnZlcnNpb24iLCJhdHRyaWJ1dGlvbkhlYWx0aCIsInRvcENoYW5uZWxzIiwiY2hhbm5lbCIsImhlYWx0aEljb24iLCJoZWFsdGhTdGF0dXMiLCJnZXRBdHRyaWJ1dGlvblJlY29tbWVuZGF0aW9ucyIsImhpZ2hQcmlvcml0eSIsIm1lZGl1bVByaW9yaXR5IiwibG93UHJpb3JpdHkiLCJleHBlY3RlZEltcGFjdCIsImltcGxlbWVudGF0aW9uIiwiYW5hbHlzaXNJZCIsImVzdGltYXRlZENvbXBsZXRpb24iLCJ0aW1lTWF0Y2giLCJ1bml0Iiwic3RhcnRzV2l0aCIsImNoYW5uZWxQYXR0ZXJucyIsImJ1bGtLZXl3b3JkcyIsImJ1bGtDb3VudHMiLCJleGVjdXRlQnVsa0NvbnRhY3RJbXBvcnQiLCJleGVjdXRlQnVsa0NvbnRhY3RVcGRhdGUiLCJleGVjdXRlQnVsa0NhbXBhaWduU2VuZCIsImV4ZWN1dGVCdWxrRXhwb3J0IiwiQXJyYXkiLCJpc0FycmF5IiwiZXh0cmFjdE51bWJlckZyb21RdWVyeSIsImdlbmVyYXRlU2FtcGxlQ29udGFjdHMiLCJtaW4iLCJidWxrT3BlcmF0aW9uc0VuZ2luZSIsImV4ZWN1dGVDb250YWN0SW1wb3J0IiwiYmF0Y2hTaXplIiwiY29udGludWVPbkVycm9yIiwidmFsaWRhdGVEYXRhIiwiZHJ5UnVuIiwidHJhbnNmb3JtYXRpb25zIiwidG90YWxSZWNvcmRzIiwiY2VpbCIsIm9wZXJhdGlvbklkIiwiaXNEcnlSdW4iLCJmaWx0ZXJzIiwiZXh0cmFjdEZpbHRlcnNGcm9tUXVlcnkiLCJ1cGRhdGVzIiwiZXh0cmFjdFVwZGF0ZXNGcm9tUXVlcnkiLCJleGVjdXRlQ29udGFjdFVwZGF0ZSIsImNvbnRhY3RzQWZmZWN0ZWQiLCJjYW1wYWlnbkluZm8iLCJleHRyYWN0Q2FtcGFpZ25Gcm9tUXVlcnkiLCJleHRyYWN0UmVjaXBpZW50c0Zyb21RdWVyeSIsImV4ZWN1dGVDYW1wYWlnblNlbmQiLCJkZWxheUJldHdlZW5CYXRjaGVzIiwidGVzdE1vZGUiLCJyZWNpcGllbnRDb3VudCIsImlzVGVzdCIsImV4cG9ydFR5cGUiLCJleHRyYWN0RXhwb3J0VHlwZUZyb21RdWVyeSIsIm51bWJlcnMiLCJzYW1wbGVDb250YWN0cyIsImZpcnN0TmFtZXMiLCJsYXN0TmFtZXMiLCJjb21wYW5pZXMiLCJqb2JUaXRsZSIsInRhZ3MiLCJjdXN0b21GaWVsZHMiLCJpbXBvcnREYXRlIiwiY3JlYXRlZEFmdGVyIiwidGFnTWF0Y2giLCJhZGRUYWdzIiwic3RhdHVzTWF0Y2giLCJuYW1lTWF0Y2giLCJtb25pdG9yaW5nS2V5d29yZHMiLCJoYXNBY2Nlc3MiLCJtb25pdG9yaW5nUGFyYW1zIiwicGFyc2VNb25pdG9yaW5nUmVxdWVzdCIsImhlYWx0aCIsImFkdmFuY2VkTW9uaXRvcmluZ09yY2hlc3RyYXRvciIsImdldFN5c3RlbUhlYWx0aCIsInVwdGltZSIsImFjdGl2ZUFsZXJ0cyIsImNvbXBvbmVudHMiLCJpbmZyYXN0cnVjdHVyZSIsImRhdGFiYXNlIiwiYWkiLCJzZWN1cml0eSIsImFsZXJ0cyIsImdldEFjdGl2ZUFsZXJ0cyIsImFsZXJ0U3VtbWFyeSIsImFsZXJ0Iiwic2V2ZXJpdHkiLCJjb21wb25lbnQiLCJhbGVydENvdW50Iiwic2V2ZXJpdHlCcmVha2Rvd24iLCJnZXRNb25pdG9yaW5nSW5zaWdodHMiLCJpbnNpZ2h0U3VtbWFyeSIsImluc2lnaHRDb3VudCIsInR5cGVCcmVha2Rvd24iLCJhbGVydElkIiwiYWNrbm93bGVkZ2VkIiwiYWNrbm93bGVkZ2VBbGVydCIsImFja25vd2xlZGdlZEJ5IiwicmVzb2x2ZWQiLCJyZXNvbHZlQWxlcnQiLCJyZXNvbHZlZEJ5Iiwic3RhdHMiLCJnZXRFeGVjdXRpb25TdGF0cyIsInN1Y2Nlc3NmdWxUYXNrcyIsImZhaWxlZFRhc2tzIiwiYWxlcnRJZE1hdGNoIiwiYWJUZXN0aW5nS2V5d29yZHMiLCJ0ZXN0aW5nUGFyYW1zIiwicGFyc2VBQlRlc3RpbmdSZXF1ZXN0IiwicmVxdWVzdElkIiwiYXV0b25vbW91c0FCVGVzdGluZ0VuZ2luZSIsInJlcXVlc3RBdXRvbm9tb3VzVGVzdCIsImZvcm1JZCIsImNvbnN0cmFpbnRzIiwiZXN0aW1hdGVkRGVzaWduVGltZSIsImF1dG9FeGVjdXRpb24iLCJhY3RpdmVUZXN0cyIsImdldEFjdGl2ZVRlc3RzIiwidGVzdFN1bW1hcnkiLCJ0ZXN0Q291bnQiLCJzdGF0dXNCcmVha2Rvd24iLCJnZXRBdXRvbm9tb3VzVGVzdGluZ01ldHJpY3MiLCJjb21wbGV0ZWRUZXN0cyIsImF2ZXJhZ2VJbXByb3ZlbWVudCIsImF1dG9BcHBsaWVkVGVzdHMiLCJwYXVzZWQiLCJwYXVzZVRlc3QiLCJyZXN1bWVkIiwicmVzdW1lVGVzdCIsInRlc3RJZE1hdGNoIiwiYWZyaWNhblRpbWV6b25lcyIsImJ1c2luZXNzSG91cnMiLCJjb21wbGlhbmNlS2V5d29yZHMiLCJjb21wbGlhbmNlUGFyYW1zIiwicGFyc2VDb21wbGlhbmNlUmVxdWVzdCIsImF1dG9ub21vdXNDb21wbGlhbmNlTW9uaXRvciIsImdldENvbXBsaWFuY2VTY29yZSIsInZpb2xhdGlvbnMiLCJnZXRBY3RpdmVWaW9sYXRpb25zIiwidmlvbGF0aW9uQ291bnQiLCJ2aW9sYXRpb25TdW1tYXJ5IiwidmlvbGF0aW9uIiwiZnJhbWV3b3JrSWQiLCJjcml0aWNhbENvdW50IiwidiIsInJlbWVkaWF0aW9uIiwiYXV0b0V4ZWN1dGFibGUiLCJhdXRvUmVtZWRpYXRpb25Db3VudCIsImZyYW1ld29ya3MiLCJnZXRDb21wbGlhbmNlRnJhbWV3b3JrcyIsImFmcmljYW5GcmFtZXdvcmtzIiwiZiIsImZyYW1ld29ya1N1bW1hcnkiLCJmcmFtZXdvcmsiLCJ0b3RhbEZyYW1ld29ya3MiLCJlbmFibGVkRnJhbWV3b3JrcyIsImVuYWJsZWQiLCJyZXBvcnQiLCJnZW5lcmF0ZUNvbXBsaWFuY2VSZXBvcnQiLCJvdmVyYWxsU2NvcmUiLCJjb21wbGlhbnQiLCJub25Db21wbGlhbnQiLCJzdGFydCIsInRvRGF0ZVN0cmluZyIsImVuZCIsInJlcG9ydFR5cGUiLCJhc3Nlc3NtZW50SWQiLCJjb21wcmVoZW5zaXZlIiwiYWZyaWNhbkZvY3VzIiwidG90YWxNYXJrZXRzIiwiYWN0aXZlTWFya2V0cyIsInRvdGFsUmVndWxhdGlvbnMiLCJyZWd1bGF0aW9ucyIsImNvbnRlbnRLZXl3b3JkcyIsImNvbnRlbnRQYXJhbXMiLCJwYXJzZUNvbnRlbnRHZW5lcmF0aW9uUmVxdWVzdCIsImJyYW5kUHJvZmlsZSIsImF1dG9ub21vdXNDb250ZW50R2VuZXJhdG9yIiwiZ2V0QnJhbmRQcm9maWxlIiwicGVyZm9ybWFuY2VEYXRhIiwiYW5hbHl6ZUNvbnRlbnRQZXJmb3JtYW5jZSIsIm11bHRpQ2hhbm5lbEdlbmVyYXRpb24iLCJhYlRlc3RpbmciLCJjdWx0dXJhbEFkYXB0YXRpb24iLCJicmFuZFZvaWNlQ29uc2lzdGVuY3kiLCJwZXJmb3JtYW5jZVByZWRpY3Rpb24iLCJnZW5lcmF0aW9uUmVxdWVzdCIsInRvU3RyaW5nIiwic3Vic3RyIiwicHVycG9zZSIsInRhcmdldEF1ZGllbmNlIiwiYmVoYXZpb3JQcm9maWxlIiwiZW5nYWdlbWVudExldmVsIiwiYnJhbmRHdWlkZWxpbmVzIiwidm9pY2UiLCJ0b25lIiwiY3VsdHVyYWxDb250ZXh0IiwiY29udGVudFBhcmFtZXRlcnMiLCJpbmNsdWRlUGVyc29uYWxpemF0aW9uIiwiaW5jbHVkZUNUQSIsImN0YVR5cGUiLCJlbW90aW9uYWxUcmlnZ2VyIiwiZW1vdGlvbiIsImNhbXBhaWduR29hbCIsInByb2R1Y3RTZXJ2aWNlIiwicHJvZHVjdCIsInByb21vdGlvbkRldGFpbHMiLCJwcm9tb3Rpb24iLCJhYlRlc3RWYXJpYXRpb25zIiwidmFyaWF0aW9ucyIsImdlbmVyYXRlZENvbnRlbnQiLCJnZW5lcmF0ZUNvbnRlbnQiLCJhdmdRdWFsaXR5IiwicXVhbGl0eVNjb3JlIiwiYm9keSIsImN0YSIsImV4cGVjdGVkRW5nYWdlbWVudFJhdGUiLCJleHBlY3RlZENvbnZlcnNpb25SYXRlIiwiY3VsdHVyYWxBZGFwdGF0aW9ucyIsImxvY2FsaXplZFBocmFzZXMiLCJ0b3RhbFZhcmlhdGlvbnMiLCJhdmdRdWFsaXR5U2NvcmUiLCJjb250ZW50VHlwZSIsInZvaWNlQ2hhcmFjdGVyaXN0aWNzIiwicGVyc29uYWxpdHkiLCJjb21tdW5pY2F0aW9uU3R5bGUiLCJrZXlQaHJhc2VzIiwiYXZvaWRhbmNlTGlzdCIsInRvbmFsR3VpZGVsaW5lcyIsImZvcm1hbCIsImNhc3VhbCIsInN1cHBvcnRpdmUiLCJwcm9tb3Rpb25hbCIsInBlcmZvcm1hbmNlSGlzdG9yeSIsInN1Y2Nlc3NmdWxQYXR0ZXJucyIsInVuc3VjY2Vzc2Z1bFBhdHRlcm5zIiwibGVhcm5pbmdJbnNpZ2h0cyIsImxhc3RBbmFseXplZCIsImVtYWlsUGVyZm9ybWFuY2UiLCJzbXNQZXJmb3JtYW5jZSIsIndoYXRzYXBwUGVyZm9ybWFuY2UiLCJ0b3BQZXJmb3JtaW5nVHlwZXMiLCJ2YXJpYXRpb25NYXRjaCIsImludGVncmF0aW9uS2V5d29yZHMiLCJpbnRlZ3JhdGlvblBhcmFtcyIsInBhcnNlQ3Jvc3NQbGF0Zm9ybUludGVncmF0aW9uUmVxdWVzdCIsImNyb3NzUGxhdGZvcm1JbnRlZ3JhdGlvbkh1YiIsImdldEludGVncmF0aW9ucyIsInByb3ZpZGVycyIsImdldEFmcmljYW5GaW50ZWNoUHJvdmlkZXJzIiwiYWN0aXZlSW50ZWdyYXRpb25zIiwiYXZhaWxhYmxlUHJvdmlkZXJzIiwiaGVhbHRoU3RhdHMiLCJoZWFsdGh5Iiwid2FybmluZyIsImFmcmljYW5GaW50ZWNoU3VwcG9ydCIsImF1dG9ub21vdXNTeW5jIiwiYWlSZWNvbW1lbmRhdGlvbnMiLCJyZWFsVGltZVdlYmhvb2tzIiwiaGVhbHRoTW9uaXRvcmluZyIsImF1dG9IZWFsaW5nIiwibWFya2V0Q29tcGxpYW5jZSIsInByb3ZpZGVySWQiLCJjb25maWd1cmF0aW9uIiwicGxhdGZvcm1OYW1lIiwicGxhdGZvcm1UeXBlIiwiZXhlY3V0ZUF1dG9ub21vdXNTeW5jIiwic3luY1RyaWdnZXJlZCIsImJ1c2luZXNzVHlwZSIsInRhcmdldE1hcmtldHMiLCJnZXRJbnRlZ3JhdGlvblJlY29tbWVuZGF0aW9ucyIsInJlY29tbWVuZGVkIiwicHJvdmlkZXIiLCJjb3VudHJpZXMiLCJzZXR1cENvbXBsZXhpdHkiLCJtb250aGx5Vm9sdW1lTGltaXRzIiwicGFpZCIsInJlYXNvbnMiLCJyZWFzb24iLCJpbnRlZ3JhdGlvblBsYW4iLCJkaXNwbGF5TmFtZSIsImxhc3RTeW5jQXQiLCJzeW5jU2V0dGluZ3MiLCJsYXN0U3luY1N0YXR1cyIsIm1haW50ZW5hbmNlIiwiZXh0cmFjdEludGVncmF0aW9uSWQiLCJtYXRjaGVzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQzs7OzsrQkE2d1NZQTs7O2VBQUFBOzs7MkNBM3dTbUo7c0NBQzVIO3NDQUNDO3FDQUNEOzRDQUMyQjtnREFDaEI7MkNBQ0w7NkNBQ0U7NENBQzhCOzZDQUM5Qjt3QkFDckI7K0RBQ0o7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBV25CLE1BQU1DO0lBRUo7O0dBRUMsR0FDRCxNQUFNQyxtQkFBbUJDLFNBQWlCLEVBQUVDLE1BQWMsRUFBNEI7UUFDcEYsTUFBTUMsWUFBWUMsS0FBS0MsR0FBRztRQUUxQixJQUFJO1lBQ0ZDLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLHNDQUFzQztnQkFDaERDLE9BQU9QLFVBQVVRLFNBQVMsQ0FBQyxHQUFHO2dCQUM5QlA7WUFDRjtZQUVBLHNCQUFzQjtZQUN0QixNQUFNUSxTQUE0QixNQUFNQyxvREFBeUIsQ0FBQ0MsYUFBYSxDQUFDWDtZQUVoRix5Q0FBeUM7WUFDekMsSUFBSVMsT0FBT0csVUFBVSxHQUFHLEtBQUs7Z0JBQzNCLE9BQU87b0JBQ0xDLFNBQVM7b0JBQ1RDLFNBQVNMLE9BQU9NLGlCQUFpQixJQUFJO29CQUNyQ0MsYUFBYSxJQUFJLENBQUNDLHFCQUFxQixDQUFDUjtnQkFDMUM7WUFDRjtZQUVBLDBCQUEwQjtZQUMxQixJQUFJUztZQUVKLG9DQUFvQztZQUNwQyxJQUFJLElBQUksQ0FBQ0MsZUFBZSxDQUFDVixRQUFRVCxZQUFZO2dCQUMzQ2tCLFNBQVMsTUFBTSxJQUFJLENBQUNFLG9CQUFvQixDQUFDWCxRQUFRUixRQUFRRDtZQUMzRCxPQUVLLElBQUksSUFBSSxDQUFDcUIsa0JBQWtCLENBQUNaLFFBQVFULFlBQVk7Z0JBQ25Ea0IsU0FBUyxNQUFNLElBQUksQ0FBQ0ksdUJBQXVCLENBQUNiLFFBQVFSLFFBQVFEO1lBQzlELE9BRUssSUFBSSxJQUFJLENBQUN1QiwyQkFBMkIsQ0FBQ2QsUUFBUVQsWUFBWTtnQkFDNURrQixTQUFTLE1BQU0sSUFBSSxDQUFDTSx5QkFBeUIsQ0FBQ2YsUUFBUVIsUUFBUUQ7WUFDaEUsT0FFSyxJQUFJLElBQUksQ0FBQ3lCLG9CQUFvQixDQUFDaEIsUUFBUVQsWUFBWTtnQkFDckRrQixTQUFTLE1BQU0sSUFBSSxDQUFDUSxrQkFBa0IsQ0FBQ2pCLFFBQVFSLFFBQVFEO1lBQ3pELE9BRUssSUFBSSxJQUFJLENBQUMyQix3QkFBd0IsQ0FBQ2xCLFFBQVFULFlBQVk7Z0JBQ3pEa0IsU0FBUyxNQUFNLElBQUksQ0FBQ1Usc0JBQXNCLENBQUNuQixRQUFRUixRQUFRRDtZQUM3RCxPQUVLLElBQUksSUFBSSxDQUFDNkIsMEJBQTBCLENBQUNwQixRQUFRVCxZQUFZO2dCQUMzRGtCLFNBQVMsTUFBTSxJQUFJLENBQUNZLHdCQUF3QixDQUFDckIsUUFBUVIsUUFBUUQ7WUFDL0QsT0FFSyxJQUFJLElBQUksQ0FBQytCLCtCQUErQixDQUFDdEIsUUFBUVQsWUFBWTtnQkFDaEVrQixTQUFTLE1BQU0sSUFBSSxDQUFDYyw2QkFBNkIsQ0FBQ3ZCLFFBQVFSLFFBQVFEO1lBQ3BFLE9BRUssSUFBSSxJQUFJLENBQUNpQyxpQ0FBaUMsQ0FBQ3hCLFFBQVFULFlBQVk7Z0JBQ2xFa0IsU0FBUyxNQUFNLElBQUksQ0FBQ2dCLCtCQUErQixDQUFDekIsUUFBUVIsUUFBUUQ7WUFDdEUsT0FFSyxJQUFJLElBQUksQ0FBQ21DLDRCQUE0QixDQUFDMUIsUUFBUVQsWUFBWTtnQkFDN0RrQixTQUFTLE1BQU0sSUFBSSxDQUFDa0IsMEJBQTBCLENBQUMzQixRQUFRUixRQUFRRDtZQUNqRSxPQUVLLElBQUksSUFBSSxDQUFDcUMsbUJBQW1CLENBQUM1QixRQUFRVCxZQUFZO2dCQUNwRGtCLFNBQVMsTUFBTSxJQUFJLENBQUNvQixpQkFBaUIsQ0FBQzdCLFFBQVFSLFFBQVFEO1lBQ3hELE9BRUssSUFBSSxJQUFJLENBQUN1Qyw0QkFBNEIsQ0FBQzlCLFFBQVFULFlBQVk7Z0JBQzdEa0IsU0FBUyxNQUFNLElBQUksQ0FBQ3NCLDBCQUEwQixDQUFDL0IsUUFBUVIsUUFBUUQ7WUFDakUsT0FFSyxJQUFJLElBQUksQ0FBQ3lDLDZCQUE2QixDQUFDaEMsUUFBUVQsWUFBWTtnQkFDOURrQixTQUFTLE1BQU0sSUFBSSxDQUFDd0IsMkJBQTJCLENBQUNqQyxRQUFRUixRQUFRRDtZQUNsRSxPQUVLLElBQUksSUFBSSxDQUFDMkMsMEJBQTBCLENBQUNsQyxRQUFRVCxZQUFZO2dCQUMzRGtCLFNBQVMsTUFBTSxJQUFJLENBQUMwQix3QkFBd0IsQ0FBQ25DLFFBQVFSLFFBQVFEO1lBQy9ELE9BRUssSUFBSSxJQUFJLENBQUM2QyxpQ0FBaUMsQ0FBQ3BDLFFBQVFULFlBQVk7Z0JBQ2xFa0IsU0FBUyxNQUFNLElBQUksQ0FBQzRCLCtCQUErQixDQUFDckMsUUFBUVIsUUFBUUQ7WUFDdEUsT0FBTztnQkFDTCxPQUFRUyxPQUFPc0MsTUFBTTtvQkFDbkIsS0FBSzt3QkFDSDdCLFNBQVMsTUFBTSxJQUFJLENBQUM4QixlQUFlLENBQUN2QyxRQUFRUjt3QkFDNUM7b0JBQ0YsS0FBSzt3QkFDSGlCLFNBQVMsTUFBTSxJQUFJLENBQUMrQixpQkFBaUIsQ0FBQ3hDLFFBQVFSO3dCQUM5QztvQkFDRixLQUFLO3dCQUNIaUIsU0FBUyxNQUFNLElBQUksQ0FBQ2dDLFlBQVksQ0FBQ3pDLFFBQVFSO3dCQUN6QztvQkFDRixLQUFLO3dCQUNIaUIsU0FBUyxNQUFNLElBQUksQ0FBQ2lDLGFBQWEsQ0FBQzFDLFFBQVFSO3dCQUMxQztvQkFDRixLQUFLO3dCQUNIaUIsU0FBUyxNQUFNLElBQUksQ0FBQ2tDLGFBQWEsQ0FBQzNDLFFBQVFSO3dCQUMxQztvQkFDRixLQUFLO3dCQUNIaUIsU0FBUyxNQUFNLElBQUksQ0FBQ21DLGVBQWUsQ0FBQzVDLFFBQVFSO3dCQUM1QztvQkFDRjt3QkFDRWlCLFNBQVM7NEJBQ1BMLFNBQVM7NEJBQ1RDLFNBQVMsQ0FBQyx5QkFBeUIsRUFBRUwsT0FBT3NDLE1BQU0sQ0FBQ08sV0FBVyxHQUFHLDZDQUE2QyxDQUFDOzRCQUMvR3RDLGFBQWEsSUFBSSxDQUFDdUMsb0JBQW9CLENBQUM5QyxPQUFPc0MsTUFBTTt3QkFDdEQ7Z0JBQ0o7WUFDRjtZQUVBLDJCQUEyQjtZQUMzQixNQUFNUyxnQkFBZ0JyRCxLQUFLQyxHQUFHLEtBQUtGO1lBQ25DdUQsSUFBQUEseUNBQW1CLEVBQ2pCLEdBQUdoRCxPQUFPc0MsTUFBTSxDQUFDLENBQUMsRUFBRXRDLE9BQU9pRCxNQUFNLEVBQUUsRUFDbkN6RCxRQUNBLFdBQ0FpQixPQUFPTCxPQUFPLEVBQ2QyQyxlQUNBdEMsT0FBT0wsT0FBTyxHQUFHOEMsWUFBWSxtQkFDN0J6QyxPQUFPTCxPQUFPLEdBQUc4QyxZQUFZekMsT0FBTzBDLEtBQUs7WUFHM0MsT0FBTzFDO1FBRVQsRUFBRSxPQUFPMEMsT0FBTztZQUNkLE1BQU1KLGdCQUFnQnJELEtBQUtDLEdBQUcsS0FBS0Y7WUFDbkMsTUFBTTJELGVBQWVELGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBR2lELE9BQU9IO1lBRXJFdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLGdDQUFnQztnQkFDM0NBLE9BQU9DO2dCQUNQdEQsT0FBT1AsVUFBVVEsU0FBUyxDQUFDLEdBQUc7Z0JBQzlCUDtnQkFDQXVEO1lBQ0Y7WUFFQSxPQUFPO2dCQUNMM0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9DO2dCQUNQN0MsYUFBYTtvQkFBQztvQkFBK0I7b0JBQStDO2lCQUF3QztZQUN0STtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNnQyxnQkFBZ0J2QyxNQUF5QixFQUFFUixNQUFjLEVBQTRCO1FBQ2pHLE9BQVFRLE9BQU9pRCxNQUFNO1lBQ25CLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNLElBQUksQ0FBQ00sYUFBYSxDQUFDdkQsT0FBT3dELElBQUksRUFBaUJoRTtZQUM5RCxLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUNpRSxVQUFVLENBQUN6RCxPQUFPd0QsSUFBSSxFQUFFaEU7WUFDNUMsS0FBSztnQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDa0Usa0JBQWtCLENBQUMxRCxPQUFPd0QsSUFBSSxFQUFFaEU7WUFDcEQsS0FBSztnQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDbUUsY0FBYyxDQUFDM0QsT0FBT3dELElBQUksRUFBa0JoRTtZQUNoRSxLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUNvRSxjQUFjLENBQUM1RCxPQUFPd0QsSUFBSSxFQUFrQmhFO1lBQ2hFLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNLElBQUksQ0FBQ3FFLFVBQVUsQ0FBQzdELE9BQU93RCxJQUFJLEVBQWNoRTtZQUN4RCxLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUNzRSxhQUFhLENBQUM5RCxPQUFPd0QsSUFBSSxFQUFFaEU7WUFDL0MsS0FBSztnQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDdUUsY0FBYyxDQUFDL0QsT0FBT3dELElBQUksRUFBRWhFO1lBQ2hELEtBQUs7Z0JBQ0gsT0FBTyxNQUFNLElBQUksQ0FBQ3dFLFVBQVUsQ0FBQ2hFLE9BQU93RCxJQUFJLEVBQUVoRTtZQUM1QyxLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUN5RSxpQkFBaUIsQ0FBQ2pFLE9BQU93RCxJQUFJLEVBQUVoRTtZQUNuRCxLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUMwRSxhQUFhLENBQUNsRSxPQUFPd0QsSUFBSSxFQUFFaEU7WUFDL0MsS0FBSztnQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDMkUsWUFBWSxDQUFDbkUsT0FBT3dELElBQUksRUFBRWhFO1lBQzlDO2dCQUNFLE9BQU87b0JBQ0xZLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQyxlQUFlLEVBQUVMLE9BQU9pRCxNQUFNLENBQUNKLFdBQVcsR0FBRywrQ0FBK0MsQ0FBQztvQkFDdkd0QyxhQUFhO3dCQUFDO3dCQUEyQjt3QkFBNEI7d0JBQTRCO3dCQUFpQztxQkFBNEI7Z0JBQ2hLO1FBQ0o7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY2dELGNBQWNhLFdBQXdCLEVBQUU1RSxNQUFjLEVBQTRCO1FBQzlGLElBQUk7WUFDRix5QkFBeUI7WUFDekIsSUFBSSxDQUFDNEUsWUFBWUMsSUFBSSxJQUFJLENBQUNELFlBQVlFLEtBQUssSUFBSSxDQUFDRixZQUFZRyxLQUFLLEVBQUU7Z0JBQ2pFLE9BQU87b0JBQ0xuRSxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUEwRDtxQkFBd0M7Z0JBQ2xIO1lBQ0Y7WUFFQSxrQ0FBa0M7WUFDbEMsTUFBTWlFLGtCQUFrQixNQUFNQyxlQUFNLENBQUNDLE9BQU8sQ0FBQ0MsU0FBUyxDQUFDO2dCQUNyREMsT0FBTztvQkFDTEMsSUFBSTt3QkFDRlQsWUFBWUUsS0FBSyxHQUFHOzRCQUFFQSxPQUFPRixZQUFZRSxLQUFLO3dCQUFDLElBQUksQ0FBQzt3QkFDcERGLFlBQVlHLEtBQUssR0FBRzs0QkFBRUEsT0FBT0gsWUFBWUcsS0FBSzt3QkFBQyxJQUFJLENBQUM7cUJBQ3JELENBQUNPLE1BQU0sQ0FBQ0MsQ0FBQUEsWUFBYUMsT0FBT0MsSUFBSSxDQUFDRixXQUFXRyxNQUFNLEdBQUc7Z0JBQ3hEO1lBQ0Y7WUFFQSxJQUFJVixpQkFBaUI7Z0JBQ25CLE9BQU87b0JBQ0xwRSxTQUFTO29CQUNUQyxTQUFTLENBQUMsb0JBQW9CLEVBQUUrRCxZQUFZRSxLQUFLLEdBQUcsVUFBVSxlQUFlLGdCQUFnQixDQUFDO29CQUM5RmQsTUFBTWdCO29CQUNOakUsYUFBYTt3QkFBQzt3QkFBNkM7cUJBQXdDO2dCQUNyRztZQUNGO1lBRUEsZ0VBQWdFO1lBQ2hFLE1BQU00RSxhQUFhZixZQUFZRSxLQUFLLElBQUksR0FBR0YsWUFBWUMsSUFBSSxFQUFFZSxRQUFRLFFBQVEsSUFBSXZDLGlCQUFpQixZQUFZbkQsS0FBS0MsR0FBRyxHQUFHLG1CQUFtQixDQUFDO1lBRTdJLE1BQU0rRSxVQUFVLE1BQU1ELGVBQU0sQ0FBQ0MsT0FBTyxDQUFDVyxNQUFNLENBQUM7Z0JBQzFDN0IsTUFBTTtvQkFDSjhCLFdBQVdsQixZQUFZQyxJQUFJLEVBQUVrQixNQUFNLElBQUksQ0FBQyxFQUFFLElBQUk7b0JBQzlDQyxVQUFVcEIsWUFBWUMsSUFBSSxFQUFFa0IsTUFBTSxLQUFLRSxNQUFNLEdBQUdDLEtBQUssUUFBUTtvQkFDN0RwQixPQUFPYTtvQkFDUFosT0FBT0gsWUFBWUcsS0FBSyxJQUFJO29CQUM1Qm9CLFNBQVN2QixZQUFZdUIsT0FBTyxJQUFJO29CQUNoQ0MsT0FBT3hCLFlBQVl3QixLQUFLLElBQUk7b0JBQzVCQyxRQUFRO29CQUNSQyxRQUFRO29CQUNSQyxhQUFhdkc7Z0JBQ2Y7WUFDRjtZQUVBSSxjQUFNLENBQUNDLElBQUksQ0FBQyxnQ0FBZ0M7Z0JBQUVtRyxXQUFXdEIsUUFBUXVCLEVBQUU7Z0JBQUV6RztZQUFPO1lBRTVFLE9BQU87Z0JBQ0xZLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyxnQ0FBZ0MsRUFBRXFFLFFBQVFZLFNBQVMsQ0FBQyxDQUFDLEVBQUVaLFFBQVFjLFFBQVEsQ0FBQyxpQ0FBaUMsQ0FBQztnQkFDcEhoQyxNQUFNa0I7Z0JBQ053QixTQUFTO29CQUNQRixXQUFXdEIsUUFBUXVCLEVBQUU7b0JBQ3JCNUIsTUFBTSxHQUFHSyxRQUFRWSxTQUFTLENBQUMsQ0FBQyxFQUFFWixRQUFRYyxRQUFRLEVBQUU7b0JBQ2hEbEIsT0FBT0ksUUFBUUosS0FBSztvQkFDcEJDLE9BQU9HLFFBQVFILEtBQUs7b0JBQ3BCb0IsU0FBU2pCLFFBQVFpQixPQUFPO2dCQUMxQjtZQUNGO1FBRUYsRUFBRSxPQUFPeEMsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLDJCQUEyQjtnQkFBRUEsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQVFpQjtnQkFBYTVFO1lBQU87WUFFN0gsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQTZDO2lCQUFtQztZQUNoRztRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNrRCxXQUFXMEMsUUFBYSxFQUFFM0csTUFBYyxFQUE0QjtRQUNoRixJQUFJO1lBQ0YsMkRBQTJEO1lBQzNELE1BQU00RyxjQUFjLE1BQU0zQixlQUFNLENBQUM0QixJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDL0MxQixPQUFPO29CQUFFcUIsSUFBSXpHO2dCQUFPO2dCQUNwQitHLFFBQVE7b0JBQUVDLE1BQU07Z0JBQUs7WUFDdkI7WUFFQSxJQUFJLENBQUNKLGVBQWUsQ0FBQztnQkFBQztnQkFBUzthQUFjLENBQUNLLFFBQVEsQ0FBQ0wsWUFBWUksSUFBSSxHQUFHO2dCQUN4RSxPQUFPO29CQUNMcEcsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBcUM7cUJBQStCO2dCQUNwRjtZQUNGO1lBRUEseUJBQXlCO1lBQ3pCLElBQUksQ0FBQzRGLFNBQVM3QixLQUFLLEVBQUU7Z0JBQ25CLE9BQU87b0JBQ0xsRSxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUEwRDtxQkFBZ0M7Z0JBQzFHO1lBQ0Y7WUFFQSxJQUFJLENBQUM0RixTQUFTOUIsSUFBSSxFQUFFO2dCQUNsQixPQUFPO29CQUNMakUsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBMEQ7cUJBQWdDO2dCQUMxRztZQUNGO1lBRUEsK0JBQStCO1lBQy9CLE1BQU1tRyxlQUFlLE1BQU1qQyxlQUFNLENBQUM0QixJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDaEQxQixPQUFPO29CQUFFTixPQUFPNkIsU0FBUzdCLEtBQUs7Z0JBQUM7WUFDakM7WUFFQSxJQUFJb0MsY0FBYztnQkFDaEIsT0FBTztvQkFDTHRHLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQyxrQkFBa0IsRUFBRThGLFNBQVM3QixLQUFLLENBQUMsZ0JBQWdCLENBQUM7b0JBQzlEL0QsYUFBYTt3QkFBQzt3QkFBaUM7cUJBQW1DO2dCQUNwRjtZQUNGO1lBRUEsZ0RBQWdEO1lBQ2hELE1BQU1vRyxlQUFlUixTQUFTUyxRQUFRLElBQUksSUFBSSxDQUFDQyx5QkFBeUI7WUFDeEUsTUFBTUMsU0FBUyxNQUFNLG1FQUFBLFFBQU87WUFDNUIsTUFBTUMsaUJBQWlCLE1BQU1ELE9BQU9FLElBQUksQ0FBQ0wsY0FBYztZQUV2RCxrRkFBa0Y7WUFDbEYsSUFBSUgsT0FBT0wsU0FBU0ssSUFBSSxJQUFJO1lBQzVCLElBQUk7Z0JBQUM7Z0JBQVM7YUFBYyxDQUFDQyxRQUFRLENBQUNELFNBQVNKLFlBQVlJLElBQUksS0FBSyxlQUFlO2dCQUNqRkEsT0FBTztZQUNUO1lBRUEsa0JBQWtCO1lBQ2xCLE1BQU1TLFVBQVUsTUFBTXhDLGVBQU0sQ0FBQzRCLElBQUksQ0FBQ2hCLE1BQU0sQ0FBQztnQkFDdkM3QixNQUFNO29CQUNKYSxNQUFNOEIsU0FBUzlCLElBQUk7b0JBQ25CQyxPQUFPNkIsU0FBUzdCLEtBQUs7b0JBQ3JCeUM7b0JBQ0FQO29CQUNBakMsT0FBTzRCLFNBQVM1QixLQUFLO29CQUNyQm9CLFNBQVNRLFNBQVNSLE9BQU87b0JBQ3pCdUIsVUFBVTtvQkFDVkMsZUFBZTtnQkFDakI7Z0JBQ0FaLFFBQVE7b0JBQ05OLElBQUk7b0JBQ0o1QixNQUFNO29CQUNOQyxPQUFPO29CQUNQa0MsTUFBTTtvQkFDTmIsU0FBUztvQkFDVHBCLE9BQU87b0JBQ1A2QyxXQUFXO2dCQUNiO1lBQ0Y7WUFFQSxrQ0FBa0M7WUFDbEMsTUFBTTNDLGVBQU0sQ0FBQzRDLGNBQWMsQ0FBQ2hDLE1BQU0sQ0FBQztnQkFDakM3QixNQUFNO29CQUNKaEUsUUFBUXlILFFBQVFoQixFQUFFO29CQUNsQnFCLGFBQWE7d0JBQ1hDLE9BQU87d0JBQ1BDLGVBQWU7d0JBQ2ZDLG9CQUFvQjt3QkFDcEJDLFVBQVU7d0JBQ1ZDLFVBQVV4QixTQUFTd0IsUUFBUSxJQUFJO29CQUNqQztnQkFDRjtZQUNGO1lBRUEvSCxjQUFNLENBQUNDLElBQUksQ0FBQyw2QkFBNkI7Z0JBQ3ZDK0gsV0FBV1gsUUFBUWhCLEVBQUU7Z0JBQ3JCM0IsT0FBTzJDLFFBQVEzQyxLQUFLO2dCQUNwQnVELFdBQVdySTtZQUNiO1lBRUEsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUyxDQUFDLHFDQUFxQyxFQUFFNEcsUUFBUTVDLElBQUksQ0FBQyxFQUFFLEVBQUU0QyxRQUFRM0MsS0FBSyxDQUFDLCtCQUErQixFQUFFLENBQUM2QixTQUFTUyxRQUFRLEdBQUcsQ0FBQywyQkFBMkIsRUFBRUQsYUFBYSwwQ0FBMEMsQ0FBQyxHQUFHLElBQUk7Z0JBQ25PbkQsTUFBTXlEO2dCQUNOZixTQUFTO29CQUNQMUcsUUFBUXlILFFBQVFoQixFQUFFO29CQUNsQjVCLE1BQU00QyxRQUFRNUMsSUFBSTtvQkFDbEJDLE9BQU8yQyxRQUFRM0MsS0FBSztvQkFDcEJrQyxNQUFNUyxRQUFRVCxJQUFJO29CQUNsQmIsU0FBU3NCLFFBQVF0QixPQUFPO29CQUN4Qm1DLG1CQUFtQixDQUFDM0IsU0FBU1MsUUFBUSxHQUFHRCxlQUFlekQ7Z0JBQ3pEO1lBQ0Y7UUFFRixFQUFFLE9BQU9DLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyx3QkFBd0I7Z0JBQ25DQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkRnRCxVQUFVO29CQUFFLEdBQUdBLFFBQVE7b0JBQUVTLFVBQVU7Z0JBQWE7Z0JBQ2hEcEg7WUFDRjtZQUVBLE9BQU87Z0JBQ0xZLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUc7Z0JBQ2hERSxhQUFhO29CQUFDO29CQUEwQztvQkFBdUI7aUJBQW1DO1lBQ3BIO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUXNHLDRCQUFvQztRQUMxQyxNQUFNa0IsUUFBUTtRQUNkLElBQUluQixXQUFXO1FBQ2YsSUFBSyxJQUFJb0IsSUFBSSxHQUFHQSxJQUFJLElBQUlBLElBQUs7WUFDM0JwQixZQUFZbUIsTUFBTUUsTUFBTSxDQUFDQyxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBS0wsTUFBTTdDLE1BQU07UUFDbEU7UUFDQSxPQUFPMEI7SUFDVDtJQUVBOztHQUVDLEdBQ0QsTUFBY2xELG1CQUFtQjJFLE9BQVksRUFBRTdJLE1BQWMsRUFBNEI7UUFDdkYsSUFBSTtZQUNGLG1FQUFtRTtZQUNuRSxNQUFNNEcsY0FBYyxNQUFNM0IsZUFBTSxDQUFDNEIsSUFBSSxDQUFDQyxVQUFVLENBQUM7Z0JBQy9DMUIsT0FBTztvQkFBRXFCLElBQUl6RztnQkFBTztnQkFDcEIrRyxRQUFRO29CQUFFQyxNQUFNO29CQUFNOEIsZ0JBQWdCO2dCQUFLO1lBQzdDO1lBRUEsSUFBSSxDQUFDbEMsZUFBZUEsWUFBWUksSUFBSSxLQUFLLGVBQWU7Z0JBQ3RELE9BQU87b0JBQ0xwRyxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUFxQztxQkFBaUM7Z0JBQ3RGO1lBQ0Y7WUFFQSx5QkFBeUI7WUFDekIsSUFBSSxDQUFDOEgsUUFBUWhFLElBQUksRUFBRTtnQkFDakIsT0FBTztvQkFDTGpFLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7d0JBQTZEO3FCQUFnQztnQkFDN0c7WUFDRjtZQUVBLHVDQUF1QztZQUN2QyxNQUFNZ0ksY0FBYyxNQUFNOUQsZUFBTSxDQUFDK0QsWUFBWSxDQUFDN0QsU0FBUyxDQUFDO2dCQUN0REMsT0FBTztvQkFDTEMsSUFBSTt3QkFDRjs0QkFBRVIsTUFBTWdFLFFBQVFoRSxJQUFJO3dCQUFDO3dCQUNyQmdFLFFBQVFJLE1BQU0sR0FBRzs0QkFBRUEsUUFBUUosUUFBUUksTUFBTTt3QkFBQyxJQUFJLENBQUM7cUJBQ2hELENBQUMzRCxNQUFNLENBQUNDLENBQUFBLFlBQWFDLE9BQU9DLElBQUksQ0FBQ0YsV0FBV0csTUFBTSxHQUFHO2dCQUN4RDtZQUNGO1lBRUEsSUFBSXFELGFBQWE7Z0JBQ2YsT0FBTztvQkFDTG5JLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQyxxQkFBcUIsRUFBRWtJLFlBQVlsRSxJQUFJLEtBQUtnRSxRQUFRaEUsSUFBSSxHQUFHLGNBQWMsY0FBYyxnQkFBZ0IsQ0FBQztvQkFDbEg5RCxhQUFhO3dCQUFDO3dCQUFxQzt3QkFBMEI7cUJBQTJDO2dCQUMxSDtZQUNGO1lBRUEsMEJBQTBCO1lBQzFCLE1BQU1tSSxTQUFTLE1BQU1qRSxlQUFNLENBQUMrRCxZQUFZLENBQUNuRCxNQUFNLENBQUM7Z0JBQzlDN0IsTUFBTTtvQkFDSmEsTUFBTWdFLFFBQVFoRSxJQUFJO29CQUNsQm9FLFFBQVFKLFFBQVFJLE1BQU07b0JBQ3RCRSxVQUFVTixRQUFRTSxRQUFRLElBQUk7b0JBQzlCQyxTQUFTUCxRQUFRTyxPQUFPLElBQUk7b0JBQzVCakIsVUFBVVUsUUFBUVYsUUFBUSxJQUFJO29CQUM5QmtCLFVBQVU7d0JBQ1JDLFVBQVU7NEJBQ1JDLGNBQWNWLFFBQVFVLFlBQVksSUFBSTs0QkFDdENDLE1BQU1YLFFBQVFXLElBQUksSUFBSTt3QkFDeEI7d0JBQ0FDLFVBQVU7NEJBQ1JDLGdCQUFnQjs0QkFDaEJDLGNBQWM7NEJBQ2RDLG1CQUFtQjs0QkFDbkJDLFdBQVc7NEJBQ1hDLFdBQVc7NEJBQ1hDLFdBQVc7d0JBQ2I7d0JBQ0FDLFFBQVE7NEJBQ05DLFVBQVVwQixRQUFRcUIsWUFBWSxJQUFJOzRCQUNsQ0MsV0FBV3RCLFFBQVF1QixhQUFhLElBQUk7NEJBQ3BDQyxPQUFPeEIsUUFBUXlCLFNBQVMsSUFBSTt3QkFDOUI7d0JBQ0FDLFlBQVk7NEJBQ1ZDLGFBQWE7NEJBQ2JDLG1CQUFtQjt3QkFDckI7b0JBQ0Y7b0JBQ0EvQyxVQUFVO2dCQUNaO1lBQ0Y7WUFFQSw0Q0FBNEM7WUFDNUMsSUFBSW1CLFFBQVE2QixnQkFBZ0IsRUFBRTtnQkFDNUIsTUFBTXpGLGVBQU0sQ0FBQzBGLFlBQVksQ0FBQzlFLE1BQU0sQ0FBQztvQkFDL0I3QixNQUFNO3dCQUNKOEUsZ0JBQWdCSSxPQUFPekMsRUFBRTt3QkFDekJtRSxRQUFRL0IsUUFBUTZCLGdCQUFnQjt3QkFDaENwRSxRQUFRO3dCQUNSdUUsb0JBQW9CLElBQUkzSzt3QkFDeEI0SyxrQkFBa0IsSUFBSTVLLEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO29CQUM5RDtnQkFDRjtZQUNGO1lBRUEscURBQXFEO1lBQ3JELElBQUkwSSxRQUFRa0MsU0FBUyxFQUFFO2dCQUNyQixNQUFNNUQsZUFBZSxJQUFJLENBQUNFLHlCQUF5QjtnQkFDbkQsTUFBTUMsU0FBUyxNQUFNLG1FQUFBLFFBQU87Z0JBQzVCLE1BQU1DLGlCQUFpQixNQUFNRCxPQUFPRSxJQUFJLENBQUNMLGNBQWM7Z0JBRXZELE1BQU00RCxZQUFZLE1BQU05RixlQUFNLENBQUM0QixJQUFJLENBQUNoQixNQUFNLENBQUM7b0JBQ3pDN0IsTUFBTTt3QkFDSmEsTUFBTWdFLFFBQVFrQyxTQUFTLENBQUNsRyxJQUFJO3dCQUM1QkMsT0FBTytELFFBQVFrQyxTQUFTLENBQUNqRyxLQUFLO3dCQUM5QnlDO3dCQUNBUCxNQUFNO3dCQUNOOEIsZ0JBQWdCSSxPQUFPekMsRUFBRTt3QkFDekIxQixPQUFPOEQsUUFBUWtDLFNBQVMsQ0FBQ2hHLEtBQUs7d0JBQzlCMkMsVUFBVTt3QkFDVkMsZUFBZTtvQkFDakI7Z0JBQ0Y7Z0JBRUEsZ0NBQWdDO2dCQUNoQyxNQUFNMUMsZUFBTSxDQUFDNEMsY0FBYyxDQUFDaEMsTUFBTSxDQUFDO29CQUNqQzdCLE1BQU07d0JBQ0poRSxRQUFRK0ssVUFBVXRFLEVBQUU7d0JBQ3BCcUIsYUFBYTs0QkFDWEMsT0FBTzs0QkFDUEMsZUFBZTs0QkFDZkMsb0JBQW9COzRCQUNwQkMsVUFBVTs0QkFDVkMsVUFBVVUsUUFBUVYsUUFBUSxJQUFJO3dCQUNoQztvQkFDRjtnQkFDRjtnQkFFQS9ILGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLG9EQUFvRDtvQkFDOUQySyxPQUFPOUIsT0FBT3pDLEVBQUU7b0JBQ2hCd0UsYUFBYUYsVUFBVXRFLEVBQUU7b0JBQ3pCNEIsV0FBV3JJO2dCQUNiO2dCQUVBLE9BQU87b0JBQ0xZLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQyxnQkFBZ0IsRUFBRXFJLE9BQU9yRSxJQUFJLENBQUMsa0RBQWtELEVBQUVrRyxVQUFVbEcsSUFBSSxDQUFDLEVBQUUsRUFBRWtHLFVBQVVqRyxLQUFLLENBQUMsMEJBQTBCLEVBQUVxQyxhQUFhLDJDQUEyQyxDQUFDO29CQUNwTm5ELE1BQU07d0JBQUVnRixjQUFjRTt3QkFBUTZCO29CQUFVO29CQUN4Q3JFLFNBQVM7d0JBQ1BvQyxnQkFBZ0JJLE9BQU96QyxFQUFFO3dCQUN6QjVCLE1BQU1xRSxPQUFPckUsSUFBSTt3QkFDakJvRSxRQUFRQyxPQUFPRCxNQUFNO3dCQUNyQkUsVUFBVUQsT0FBT0MsUUFBUTt3QkFDekJDLFNBQVNGLE9BQU9FLE9BQU87d0JBQ3ZCMkIsV0FBVzs0QkFDVC9LLFFBQVErSyxVQUFVdEUsRUFBRTs0QkFDcEI1QixNQUFNa0csVUFBVWxHLElBQUk7NEJBQ3BCQyxPQUFPaUcsVUFBVWpHLEtBQUs7NEJBQ3RCd0QsbUJBQW1CbkI7d0JBQ3JCO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQS9HLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLHFDQUFxQztnQkFDL0MySyxPQUFPOUIsT0FBT3pDLEVBQUU7Z0JBQ2hCNEIsV0FBV3JJO1lBQ2I7WUFFQSxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsZ0JBQWdCLEVBQUVxSSxPQUFPckUsSUFBSSxDQUFDLHFFQUFxRSxDQUFDO2dCQUM5R2IsTUFBTWtGO2dCQUNOeEMsU0FBUztvQkFDUG9DLGdCQUFnQkksT0FBT3pDLEVBQUU7b0JBQ3pCNUIsTUFBTXFFLE9BQU9yRSxJQUFJO29CQUNqQm9FLFFBQVFDLE9BQU9ELE1BQU07b0JBQ3JCRSxVQUFVRCxPQUFPQyxRQUFRO29CQUN6QkMsU0FBU0YsT0FBT0UsT0FBTztvQkFDdkJDLFVBQVVILE9BQU9HLFFBQVE7Z0JBQzNCO1lBQ0Y7UUFFRixFQUFFLE9BQU8xRixPQUFPO1lBQ2R2RCxjQUFNLENBQUN1RCxLQUFLLENBQUMsZ0NBQWdDO2dCQUMzQ0EsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQ3ZEa0Y7Z0JBQ0E3STtZQUNGO1lBRUEsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQWtEO29CQUF3QjtpQkFBbUM7WUFDN0g7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFjb0QsZUFBZStHLFlBQTBCLEVBQUVsTCxNQUFjLEVBQTRCO1FBQ2pHLElBQUk7WUFDRixNQUFNbUwsZUFBZUQsYUFBYXJHLElBQUksSUFBSSxHQUFHcUcsYUFBYUUsSUFBSSxJQUFJLFNBQVMsWUFBWSxFQUFFLElBQUlsTCxPQUFPbUwsa0JBQWtCLElBQUk7WUFDMUgsTUFBTUMsZUFBZUosYUFBYUUsSUFBSSxJQUFJO1lBQzFDLE1BQU1HLFNBQVNMLGFBQWFLLE1BQU0sSUFBSTtZQUV0QywrQ0FBK0M7WUFDL0MsTUFBTTFFLE9BQU8sTUFBTTVCLGVBQU0sQ0FBQzRCLElBQUksQ0FBQ0MsVUFBVSxDQUFDO2dCQUN4QzFCLE9BQU87b0JBQUVxQixJQUFJekc7Z0JBQU87Z0JBQ3BCK0csUUFBUTtvQkFBRUMsTUFBTTtvQkFBTThCLGdCQUFnQjtnQkFBSztZQUM3QztZQUVBLElBQUksQ0FBQ2pDLE1BQU07Z0JBQ1QsTUFBTSxJQUFJaEQsTUFBTTtZQUNsQjtZQUVBLCtDQUErQztZQUMvQyxNQUFNMkgsc0JBQXNCLElBQUksQ0FBQ0Msd0JBQXdCLENBQUNQLGNBQWNJLGNBQWNDO1lBRXRGLDZFQUE2RTtZQUM3RSxNQUFNRyxVQUFVLElBQUksQ0FBQ0MsMEJBQTBCLENBQUNULGNBQWNJO1lBQzlELE1BQU1NLFVBQVUsSUFBSSxDQUFDQywwQkFBMEIsQ0FBQ1gsY0FBY0ksY0FBY0M7WUFFNUUseUNBQXlDO1lBQ3pDLE1BQU1PLGNBQWMsTUFBTUMsd0NBQW1CLENBQUNDLDRCQUE0QixDQUN4RTtnQkFDRUMsYUFBYVQ7Z0JBQ2JFO2dCQUNBRTtnQkFDQU0sWUFBWWhCLGFBQWFnQixVQUFVLElBQUksRUFBRTtnQkFDekNDLGNBQWNqQixhQUFhaUIsWUFBWSxJQUFJLEVBQUU7Z0JBQzdDQyxXQUFXbEIsYUFBYWtCLFNBQVMsSUFBSSxDQUFDO2dCQUN0Q0MsU0FBUztvQkFDUEMsaUJBQWlCO29CQUNqQkMsYUFBYTtvQkFDYkMsd0JBQXdCO2dCQUMxQjtZQUNGLEdBQ0F4TSxRQUNBNkcsS0FBS0csSUFBSSxFQUNUSCxLQUFLaUMsY0FBYztZQUdyQixJQUFJLENBQUNnRCxZQUFZbEwsT0FBTyxFQUFFO2dCQUN4QlIsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLHFDQUFxQztvQkFDaEQ4SSxRQUFRWCxZQUFZVyxNQUFNO29CQUMxQkMsVUFBVVosWUFBWVksUUFBUTtvQkFDOUJ4QjtnQkFDRjtnQkFFQSx1Q0FBdUM7Z0JBQ3ZDLE9BQU8sTUFBTSxJQUFJLENBQUN5QixvQkFBb0IsQ0FBQ3pCLGNBQWNsTCxRQUFRbUwsY0FBY0csY0FBY0M7WUFDM0Y7WUFFQSxrQ0FBa0M7WUFDbEMsTUFBTXFCLFdBQVcsTUFBTTNILGVBQU0sQ0FBQzJILFFBQVEsQ0FBQy9HLE1BQU0sQ0FBQztnQkFDNUM3QixNQUFNO29CQUNKYSxNQUFNc0c7b0JBQ05jLGFBQWFmLGFBQWEyQixTQUFTLElBQUksQ0FBQyxhQUFhLEVBQUV2QixhQUFhLGNBQWMsRUFBRUMsT0FBTyxPQUFPLENBQUM7b0JBQ25HakYsUUFBUTtvQkFDUndHLFlBQVlDLEtBQUtDLFNBQVMsQ0FBQzt3QkFDekI1QixNQUFNRTt3QkFDTkMsUUFBUUE7d0JBQ1JwQyxVQUFVK0IsYUFBYS9CLFFBQVEsSUFBSTt3QkFDbkMwRCxXQUFXM0IsYUFBYTJCLFNBQVM7d0JBQ2pDSSxhQUFhO3dCQUNiQyxlQUFlO3dCQUNmQyxZQUFZckIsWUFBWXNCLG1CQUFtQjt3QkFDM0NDLHdCQUF3QnZCLFlBQVl1QixzQkFBc0I7d0JBQzFEQyxXQUFXeEIsWUFBWXlCLEtBQUssQ0FBQzdILE1BQU07d0JBQ25DOEgsaUJBQWlCMUIsWUFBWTJCLFdBQVcsQ0FBQy9ILE1BQU07d0JBQy9DM0UsYUFBYStLLFlBQVkvSyxXQUFXO3dCQUNwQzJMLFVBQVVaLFlBQVlZLFFBQVE7b0JBQ2hDO29CQUNBbkcsYUFBYXZHO2dCQUNmO1lBQ0Y7WUFFQSwwRkFBMEY7WUFDMUYsTUFBTTBOLFlBQVksSUFBSUM7WUFFdEIsS0FBSyxNQUFNQyxRQUFROUIsWUFBWXlCLEtBQUssQ0FBRTtnQkFDcEMsdURBQXVEO2dCQUN2RCxNQUFNTSxpQkFBaUI7b0JBQ3JCLEdBQUdELEtBQUtFLE1BQU07b0JBQ2RiLGFBQWE7b0JBQ2JJLHdCQUF3Qk8sS0FBS0csUUFBUSxDQUFDQyxvQkFBb0I7b0JBQzFEQyxpQkFBaUJMLEtBQUszQixXQUFXO29CQUNqQ0MsWUFBWTBCLEtBQUsxQixVQUFVLElBQUksRUFBRTtnQkFDbkM7Z0JBRUEsTUFBTWdDLFNBQVMsTUFBTWpKLGVBQU0sQ0FBQ2tKLFlBQVksQ0FBQ3RJLE1BQU0sQ0FBQztvQkFDOUM3QixNQUFNO3dCQUNKb0ssWUFBWXhCLFNBQVNuRyxFQUFFO3dCQUN2QjVCLE1BQU0rSSxLQUFLL0ksSUFBSTt3QkFDZnVHLE1BQU0sSUFBSSxDQUFDaUQsbUJBQW1CLENBQUNULEtBQUt4QyxJQUFJO3dCQUN4QzBDLFFBQVFmLEtBQUtDLFNBQVMsQ0FBQ2E7d0JBQ3ZCUyxXQUFXVixLQUFLVyxRQUFRLENBQUNDLENBQUM7d0JBQzFCQyxXQUFXYixLQUFLVyxRQUFRLENBQUNHLENBQUM7b0JBQzVCO2dCQUNGO2dCQUVBaEIsVUFBVWlCLEdBQUcsQ0FBQ2YsS0FBS25ILEVBQUUsRUFBRXlILE9BQU96SCxFQUFFO1lBQ2xDO1lBRUEsZ0ZBQWdGO1lBQ2hGLEtBQUssTUFBTW1JLGNBQWM5QyxZQUFZMkIsV0FBVyxDQUFFO2dCQUNoRCxNQUFNb0IsZUFBZW5CLFVBQVVvQixHQUFHLENBQUNGLFdBQVdDLFlBQVk7Z0JBQzFELE1BQU1FLGVBQWVyQixVQUFVb0IsR0FBRyxDQUFDRixXQUFXRyxZQUFZO2dCQUUxRCxJQUFJRixnQkFBZ0JFLGNBQWM7b0JBQ2hDLE1BQU05SixlQUFNLENBQUMySixVQUFVLENBQUMvSSxNQUFNLENBQUM7d0JBQzdCN0IsTUFBTTs0QkFDSmdMLFVBQVVIOzRCQUNWSSxVQUFVRjs0QkFDVnhKLFdBQVdxSixXQUFXckosU0FBUyxHQUFHd0gsS0FBS0MsU0FBUyxDQUFDNEIsV0FBV3JKLFNBQVMsSUFBSTt3QkFDM0U7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUVBbkYsY0FBTSxDQUFDQyxJQUFJLENBQUMsNkNBQTZDO2dCQUN2RCtOLFlBQVl4QixTQUFTbkcsRUFBRTtnQkFDdkJ6RztnQkFDQW1OLFlBQVlyQixZQUFZc0IsbUJBQW1CO2dCQUMzQ0UsV0FBV3hCLFlBQVl5QixLQUFLLENBQUM3SCxNQUFNO2dCQUNuQzNFLGFBQWErSyxZQUFZL0ssV0FBVyxDQUFDMkUsTUFBTTtnQkFDM0NnSCxVQUFVWixZQUFZWSxRQUFRLENBQUNoSCxNQUFNO1lBQ3ZDO1lBRUEsT0FBTztnQkFDTDlFLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyxxQkFBcUIsRUFBRXNLLGFBQWEsd0JBQXdCLEVBQUVXLFlBQVl5QixLQUFLLENBQUM3SCxNQUFNLENBQUMsa0NBQWtDLEVBQUVvRyxZQUFZMkIsV0FBVyxDQUFDL0gsTUFBTSxDQUFDLGFBQWEsQ0FBQztnQkFDbEwxQixNQUFNNEk7Z0JBQ05sRyxTQUFTO29CQUNQMEgsWUFBWXhCLFNBQVNuRyxFQUFFO29CQUN2QjVCLE1BQU0rSCxTQUFTL0gsSUFBSTtvQkFDbkJ1RyxNQUFNRTtvQkFDTkMsUUFBUUE7b0JBQ1I0QixZQUFZckIsWUFBWXNCLG1CQUFtQjtvQkFDM0M4QixjQUFjcEQsWUFBWXlCLEtBQUssQ0FBQzdILE1BQU07b0JBQ3RDeUosb0JBQW9CckQsWUFBWTJCLFdBQVcsQ0FBQy9ILE1BQU07b0JBQ2xEMkgsd0JBQXdCdkIsWUFBWXVCLHNCQUFzQjtvQkFDMUQvRyxRQUFRc0csU0FBU3RHLE1BQU07b0JBQ3ZCOEksZUFBZXRELFlBQVkvSyxXQUFXO29CQUN0QzJMLFVBQVVaLFlBQVlZLFFBQVEsQ0FBQ2hILE1BQU0sR0FBRyxJQUFJb0csWUFBWVksUUFBUSxHQUFHaEo7Z0JBQ3JFO1lBQ0Y7UUFFRixFQUFFLE9BQU9DLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyxxQ0FBcUM7Z0JBQ2hEQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkR1SDtnQkFDQWxMO1lBQ0Y7WUFFQSx1Q0FBdUM7WUFDdkMsSUFBSTtnQkFDRixNQUFNbUwsZUFBZUQsYUFBYXJHLElBQUksSUFBSSxHQUFHcUcsYUFBYUUsSUFBSSxJQUFJLFNBQVMsWUFBWSxFQUFFLElBQUlsTCxPQUFPbUwsa0JBQWtCLElBQUk7Z0JBQzFILE1BQU1DLGVBQWVKLGFBQWFFLElBQUksSUFBSTtnQkFDMUMsTUFBTUcsU0FBU0wsYUFBYUssTUFBTSxJQUFJO2dCQUV0QyxPQUFPLE1BQU0sSUFBSSxDQUFDb0Isb0JBQW9CLENBQUN6QixjQUFjbEwsUUFBUW1MLGNBQWNHLGNBQWNDO1lBQzNGLEVBQUUsT0FBTzhELGVBQWU7Z0JBQ3RCLE9BQU87b0JBQ0x6TyxTQUFTO29CQUNUQyxTQUFTO29CQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO29CQUNoREUsYUFBYTt3QkFDWDt3QkFDQTt3QkFDQTtxQkFDRDtnQkFDSDtZQUNGO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY3FELGVBQWVrTCxZQUEwQixFQUFFdFAsTUFBYyxFQUE0QjtRQUNqRyxJQUFJO1lBQ0YsTUFBTXVQLGVBQWVELGFBQWF6SyxJQUFJLElBQUksR0FBR3lLLGFBQWFsRSxJQUFJLElBQUksUUFBUSxZQUFZLEVBQUUsSUFBSWxMLE9BQU9tTCxrQkFBa0IsSUFBSTtZQUN6SCxNQUFNbUUsZUFBZUYsYUFBYWxFLElBQUksSUFBSTtZQUUxQyxJQUFJcUU7WUFFSixJQUFJRCxpQkFBaUIsU0FBUztnQkFDNUJDLFdBQVcsTUFBTXhLLGVBQU0sQ0FBQ3lLLGFBQWEsQ0FBQzdKLE1BQU0sQ0FBQztvQkFDM0M3QixNQUFNO3dCQUNKYSxNQUFNMEs7d0JBQ050RCxhQUFhcUQsYUFBYXpDLFNBQVMsSUFBSSxDQUFDLGFBQWEsRUFBRTJDLGFBQWEsU0FBUyxDQUFDO3dCQUM5RUcsU0FBUyxHQUFHTCxhQUFhekMsU0FBUyxJQUFJLG1CQUFtQixhQUFhLENBQUM7d0JBQ3ZFK0MsTUFBTTt3QkFDTkMsU0FBU1AsYUFBYU8sT0FBTyxJQUFJLElBQUksQ0FBQ0MsMkJBQTJCLENBQUNSO3dCQUNsRWhKLFFBQVE7d0JBQ1JDLGFBQWF2RztvQkFDZjtnQkFDRjtZQUNGLE9BQU8sSUFBSXdQLGlCQUFpQixPQUFPO2dCQUNqQ0MsV0FBVyxNQUFNeEssZUFBTSxDQUFDOEssV0FBVyxDQUFDbEssTUFBTSxDQUFDO29CQUN6QzdCLE1BQU07d0JBQ0phLE1BQU0wSzt3QkFDTnRELGFBQWFxRCxhQUFhekMsU0FBUyxJQUFJLENBQUMseUJBQXlCLENBQUM7d0JBQ2xFZ0QsU0FBU1AsYUFBYU8sT0FBTyxJQUFJLElBQUksQ0FBQ0cseUJBQXlCLENBQUNWO3dCQUNoRWhKLFFBQVE7d0JBQ1JDLGFBQWF2RztvQkFDZjtnQkFDRjtZQUNGLE9BQU8sSUFBSXdQLGlCQUFpQixZQUFZO2dCQUN0Q0MsV0FBVyxNQUFNeEssZUFBTSxDQUFDZ0wsZ0JBQWdCLENBQUNwSyxNQUFNLENBQUM7b0JBQzlDN0IsTUFBTTt3QkFDSmEsTUFBTTBLO3dCQUNOdEQsYUFBYXFELGFBQWF6QyxTQUFTLElBQUksQ0FBQyw4QkFBOEIsQ0FBQzt3QkFDdkUrQyxNQUFNO3dCQUNOQyxTQUFTUCxhQUFhTyxPQUFPLElBQUksSUFBSSxDQUFDSyw4QkFBOEIsQ0FBQ1o7d0JBQ3JFaEosUUFBUTt3QkFDUkMsYUFBYXZHO29CQUNmO2dCQUNGO1lBQ0YsT0FBTztnQkFDTCxNQUFNLElBQUk2RCxNQUFNLENBQUMsMkJBQTJCLEVBQUUyTCxjQUFjO1lBQzlEO1lBRUFwUCxjQUFNLENBQUNDLElBQUksQ0FBQyxpQ0FBaUM7Z0JBQUU4UCxZQUFZVixTQUFTaEosRUFBRTtnQkFBRTJFLE1BQU1vRTtnQkFBY3hQO1lBQU87WUFFbkcsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUyxDQUFDLEVBQUUsRUFBRTJPLGFBQWFZLFdBQVcsR0FBRyxXQUFXLEVBQUViLGFBQWEsdUJBQXVCLENBQUM7Z0JBQzNGdkwsTUFBTXlMO2dCQUNOL0ksU0FBUztvQkFDUHlKLFlBQVlWLFNBQVNoSixFQUFFO29CQUN2QjVCLE1BQU00SyxTQUFTNUssSUFBSTtvQkFDbkJ1RyxNQUFNb0U7b0JBQ05sSixRQUFRbUosU0FBU25KLE1BQU07b0JBQ3ZCaUYsUUFBUStELGFBQWEvRCxNQUFNO29CQUMzQjhFLFVBQVVmLGFBQWFlLFFBQVE7Z0JBQ2pDO1lBQ0Y7UUFFRixFQUFFLE9BQU8xTSxPQUFPO1lBQ2R2RCxjQUFNLENBQUN1RCxLQUFLLENBQUMsNEJBQTRCO2dCQUFFQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFBUTJMO2dCQUFjdFA7WUFBTztZQUUvSCxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFBQztvQkFBc0M7aUJBQStDO1lBQ3JHO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY3NELFdBQVdpTSxRQUFrQixFQUFFdFEsTUFBYyxFQUE0QjtRQUNyRixJQUFJO1lBQ0YsK0NBQStDO1lBQy9DLElBQUl1USxhQUFhdlEsUUFBUSxxQkFBcUI7WUFDOUMsSUFBSXdRLGdCQUFnQjtZQUVwQixJQUFJRixTQUFTRyxRQUFRLEVBQUU7Z0JBQ3JCLGdDQUFnQztnQkFDaEMsTUFBTUEsV0FBVyxNQUFNLElBQUksQ0FBQ0MsY0FBYyxDQUFDSixTQUFTRyxRQUFRO2dCQUM1RCxJQUFJQSxVQUFVO29CQUNaRixhQUFhRSxTQUFTaEssRUFBRTtvQkFDeEIrSixnQkFBZ0I7Z0JBQ2xCLE9BQU87b0JBQ0wsOERBQThEO29CQUM5RCxNQUFNRyxjQUFzQzt3QkFDMUMsY0FBYzt3QkFDZCxTQUFTO3dCQUNULGtCQUFrQjt3QkFDbEIsYUFBYTt3QkFDYixRQUFRO3dCQUNSLHVCQUF1Qjt3QkFDdkIsa0JBQWtCO3dCQUNsQixhQUFhO3dCQUNiLFNBQVM7d0JBQ1QsWUFBWTtvQkFDZDtvQkFFQSxNQUFNQyxxQkFBcUJOLFNBQVNHLFFBQVEsQ0FBQ3BOLFdBQVc7b0JBQ3hELE1BQU13TixhQUFhRixXQUFXLENBQUNDLG1CQUFtQjtvQkFFbEQsSUFBSUMsWUFBWTt3QkFDZCxNQUFNQyxlQUFlLE1BQU03TCxlQUFNLENBQUM0QixJQUFJLENBQUMxQixTQUFTLENBQUM7NEJBQy9DQyxPQUFPO2dDQUNMNEIsTUFBTTZKO2dDQUNObkosVUFBVTtnQ0FDVnFKLEtBQUs7b0NBQUUvSixNQUFNO2dDQUFjLEVBQUUsb0JBQW9COzRCQUNuRDt3QkFDRjt3QkFFQSxJQUFJOEosY0FBYzs0QkFDaEJQLGFBQWFPLGFBQWFySyxFQUFFOzRCQUM1QitKLGdCQUFnQjt3QkFDbEI7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUVBLHFGQUFxRjtZQUNyRixJQUFJLENBQUNBLGlCQUFpQixDQUFDRixTQUFTRyxRQUFRLEVBQUU7Z0JBQ3hDLE1BQU1PLGFBQWEsTUFBTS9MLGVBQU0sQ0FBQzRCLElBQUksQ0FBQzFCLFNBQVMsQ0FBQztvQkFDN0NDLE9BQU87d0JBQ0w0QixNQUFNO3dCQUNOVSxVQUFVO29CQUNaO2dCQUNGO2dCQUVBLElBQUlzSixZQUFZO29CQUNkVCxhQUFhUyxXQUFXdkssRUFBRTtnQkFDNUI7WUFDRjtZQUVBLE1BQU13SyxPQUFPLE1BQU1oTSxlQUFNLENBQUNnTSxJQUFJLENBQUNwTCxNQUFNLENBQUM7Z0JBQ3BDN0IsTUFBTTtvQkFDSmtOLE9BQU9aLFNBQVNZLEtBQUssSUFBSTtvQkFDekJqRixhQUFhcUUsU0FBU3JFLFdBQVcsSUFBSTtvQkFDckMzRixRQUFRO29CQUNSNkssVUFBVWIsU0FBU2EsUUFBUSxJQUFJO29CQUMvQkMsV0FBV3BSO29CQUNYdVEsWUFBWUE7b0JBQ1pjLFNBQVNmLFNBQVNlLE9BQU8sR0FBRyxJQUFJblIsS0FBS29RLFNBQVNlLE9BQU8sSUFBSSxJQUFJblIsS0FBS0EsS0FBS0MsR0FBRyxLQUFLLElBQUksS0FBSyxLQUFLLEtBQUssTUFBTSxrQkFBa0I7Z0JBQzVIO1lBQ0Y7WUFFQSxNQUFNc1EsV0FBVyxNQUFNeEwsZUFBTSxDQUFDNEIsSUFBSSxDQUFDQyxVQUFVLENBQUM7Z0JBQUUxQixPQUFPO29CQUFFcUIsSUFBSThKO2dCQUFXO1lBQUU7WUFFMUVuUSxjQUFNLENBQUNDLElBQUksQ0FBQyw2QkFBNkI7Z0JBQUVpUixRQUFRTCxLQUFLeEssRUFBRTtnQkFBRThKO2dCQUFZdlE7WUFBTztZQUUvRSxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsUUFBUSxFQUFFb1EsS0FBS0MsS0FBSyxDQUFDLDBCQUEwQixFQUFFVCxVQUFVNUwsUUFBUSxNQUFNLENBQUMsQ0FBQztnQkFDckZiLE1BQU1pTjtnQkFDTnZLLFNBQVM7b0JBQ1A0SyxRQUFRTCxLQUFLeEssRUFBRTtvQkFDZnlLLE9BQU9ELEtBQUtDLEtBQUs7b0JBQ2pCVCxVQUFVQSxVQUFVNUw7b0JBQ3BCc00sVUFBVUYsS0FBS0UsUUFBUTtvQkFDdkJFLFNBQVNKLEtBQUtJLE9BQU87Z0JBQ3ZCO1lBQ0Y7UUFFRixFQUFFLE9BQU8xTixPQUFPO1lBQ2R2RCxjQUFNLENBQUN1RCxLQUFLLENBQUMsd0JBQXdCO2dCQUFFQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFBUTJNO2dCQUFVdFE7WUFBTztZQUV2SCxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFBQztvQkFBaUM7aUJBQStCO1lBQ2hGO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY2lDLGtCQUFrQnhDLE1BQXlCLEVBQUVSLE1BQWMsRUFBNEI7UUFDbkcsSUFBSTtZQUNGLE1BQU1zUSxXQUFXOVAsT0FBT3dELElBQUk7WUFDNUIsTUFBTXVOLGVBQWUvUSxPQUFPZ1IsT0FBTyxFQUFFZixZQUFZSCxTQUFTRyxRQUFRO1lBRWxFLElBQUljLGNBQWM7Z0JBQ2hCLHdDQUF3QztnQkFDeEMsTUFBTWQsV0FBVyxNQUFNLElBQUksQ0FBQ0MsY0FBYyxDQUFDYTtnQkFDM0MsSUFBSWQsVUFBVTtvQkFDWkgsU0FBU0csUUFBUSxHQUFHQSxTQUFTaEssRUFBRTtvQkFDL0I2SixTQUFTbUIsWUFBWSxHQUFHaEIsU0FBUzVMLElBQUk7Z0JBQ3ZDO1lBQ0Y7WUFFQSxPQUFPLE1BQU0sSUFBSSxDQUFDUixVQUFVLENBQUNpTSxVQUFVdFE7UUFDekMsRUFBRSxPQUFPMkQsT0FBTztZQUNkLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBYzZQLGVBQWVnQixRQUFnQixFQUFnQjtRQUMzRCxNQUFNQyxpQkFBaUJELFNBQVNyTyxXQUFXLEdBQUd1TyxJQUFJO1FBRWxELHdCQUF3QjtRQUN4QixJQUFJL0ssT0FBTyxNQUFNNUIsZUFBTSxDQUFDNEIsSUFBSSxDQUFDMUIsU0FBUyxDQUFDO1lBQ3JDQyxPQUFPO2dCQUNMc0MsVUFBVTtnQkFDVnJDLElBQUk7b0JBQ0Y7d0JBQUVSLE1BQU07NEJBQUVnTixVQUFVSDs0QkFBVUksTUFBTTt3QkFBYztvQkFBRTtvQkFDcEQ7d0JBQUVoTixPQUFPOzRCQUFFK00sVUFBVUg7NEJBQVVJLE1BQU07d0JBQWM7b0JBQUU7aUJBQ3REO1lBQ0g7UUFDRjtRQUVBLElBQUlqTCxNQUFNLE9BQU9BO1FBRWpCLDJFQUEyRTtRQUMzRSxNQUFNa0wsWUFBWUosZUFBZTVMLEtBQUssQ0FBQztRQUN2QyxLQUFLLE1BQU1pTSxRQUFRRCxVQUFXO1lBQzVCLElBQUlDLEtBQUt0TSxNQUFNLEdBQUcsR0FBRztnQkFDbkJtQixPQUFPLE1BQU01QixlQUFNLENBQUM0QixJQUFJLENBQUMxQixTQUFTLENBQUM7b0JBQ2pDQyxPQUFPO3dCQUNMc0MsVUFBVTt3QkFDVnJDLElBQUk7NEJBQ0Y7Z0NBQUVSLE1BQU07b0NBQUVnTixVQUFVRztvQ0FBTUYsTUFBTTtnQ0FBYzs0QkFBRTs0QkFDaEQ7Z0NBQUVoTixPQUFPO29DQUFFK00sVUFBVUc7b0NBQU1GLE1BQU07Z0NBQWM7NEJBQUU7eUJBQ2xEO29CQUNIO2dCQUNGO2dCQUVBLElBQUlqTCxNQUFNLE9BQU9BO1lBQ25CO1FBQ0Y7UUFFQSxPQUFPO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELE1BQWM1RCxhQUFhekMsTUFBeUIsRUFBRVIsTUFBYyxFQUE0QjtRQUM5RixNQUFNaVMsZUFBZXpSLE9BQU93RCxJQUFJO1FBRWhDLElBQUk7WUFDRixPQUFRaU8sYUFBYTVMLE1BQU07Z0JBQ3pCLEtBQUs7b0JBQ0gsT0FBTyxNQUFNLElBQUksQ0FBQzZMLGtCQUFrQixDQUFDRDtnQkFDdkMsS0FBSztvQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDRSxrQkFBa0IsQ0FBQ0Y7Z0JBQ3ZDLEtBQUs7b0JBQ0gsT0FBTyxNQUFNLElBQUksQ0FBQ0csYUFBYSxDQUFDSDtnQkFDbEMsS0FBSztvQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDSSxpQkFBaUIsQ0FBQ0o7Z0JBQ3RDO29CQUNFLE9BQU8sTUFBTSxJQUFJLENBQUNLLGdCQUFnQixDQUFDTDtZQUN2QztRQUNGLEVBQUUsT0FBT3RPLE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNxUixtQkFBbUJLLE9BQXlCLEVBQTRCO1FBQ3BGLElBQUk7WUFDRix5QkFBeUI7WUFDekIsTUFBTUMsZUFBZSxNQUFNdk4sZUFBTSxDQUFDd04sZUFBZSxDQUFDQyxLQUFLO1lBQ3ZELE1BQU1DLGlCQUFpQixNQUFNMU4sZUFBTSxDQUFDd04sZUFBZSxDQUFDRyxRQUFRLENBQUM7Z0JBQzNEQyxNQUFNO2dCQUNOQyxTQUFTO29CQUFFQyxXQUFXO2dCQUFPO2dCQUM3QkMsU0FBUztvQkFDUEMsU0FBUzt3QkFDUGxNLFFBQVE7NEJBQ05OLElBQUk7NEJBQ0p5TSxVQUFVOzRCQUNWQyxRQUFROzRCQUNSOU0sUUFBUTt3QkFDVjtvQkFDRjtnQkFDRjtZQUNGO1lBRUEsT0FBTztnQkFDTHpGLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQywyQkFBMkIsRUFBRTJSLGFBQWEsdUJBQXVCLENBQUM7Z0JBQzVFeE8sTUFBTTtvQkFDSm9QLGVBQWVaO29CQUNmRyxnQkFBZ0JBLGVBQWUxTSxLQUFLLENBQUMsR0FBRztvQkFDeENvTixTQUFTLENBQUMsU0FBUyxFQUFFYixhQUFhLHVCQUF1QixFQUFFRyxlQUFlak4sTUFBTSxDQUFDLG1CQUFtQixDQUFDO2dCQUN2RztZQUNGO1FBQ0YsRUFBRSxPQUFPL0IsT0FBTztZQUNkLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUXlTLDZCQUE2QmxJLElBQVksRUFBRUcsTUFBYyxFQUFFO1FBQ2pFLHVDQUF1QztRQUN2QyxJQUFJSCxLQUFLL0gsV0FBVyxHQUFHNEQsUUFBUSxDQUFDLGlCQUFpQnNFLE9BQU9sSSxXQUFXLEdBQUc0RCxRQUFRLENBQUMsYUFBYTtZQUMxRixPQUFPO2dCQUNMO29CQUFFcEMsTUFBTTtvQkFBU3VHLE1BQU07b0JBQVMwQyxRQUFRO3dCQUFFak4sU0FBUztvQkFBd0M7Z0JBQUU7Z0JBQzdGO29CQUFFZ0UsTUFBTTtvQkFBZXVHLE1BQU07b0JBQVkwQyxRQUFRO3dCQUFFeUYsVUFBVTt3QkFBbUJDLE9BQU87b0JBQUU7Z0JBQUU7Z0JBQzNGO29CQUFFM08sTUFBTTtvQkFBa0J1RyxNQUFNO29CQUFRMEMsUUFBUTt3QkFBRTJGLFVBQVU7d0JBQW9CQyxVQUFVO29CQUFLO2dCQUFFO2dCQUNqRztvQkFBRTdPLE1BQU07b0JBQW9CdUcsTUFBTTtvQkFBWTBDLFFBQVE7d0JBQUU2RixVQUFVO3dCQUFjQyxTQUFTO29CQUFNO2dCQUFFO2dCQUNqRztvQkFBRS9PLE1BQU07b0JBQXlCdUcsTUFBTTtvQkFBZTBDLFFBQVE7d0JBQUV2SSxXQUFXO29CQUFlO2dCQUFFO2dCQUM1RjtvQkFBRVYsTUFBTTtvQkFBdUJ1RyxNQUFNO29CQUFRMEMsUUFBUTt3QkFBRTJGLFVBQVU7d0JBQWlCQyxVQUFVO29CQUFLO2dCQUFFO2dCQUNuRztvQkFBRTdPLE1BQU07b0JBQW9CdUcsTUFBTTtvQkFBWTBDLFFBQVE7d0JBQUU2RixVQUFVO3dCQUFrQkgsT0FBTztvQkFBSztnQkFBRTtnQkFDbEc7b0JBQUUzTyxNQUFNO29CQUFpQnVHLE1BQU07b0JBQWMwQyxRQUFRO3dCQUFFeUYsVUFBVTt3QkFBMkJDLE9BQU87b0JBQUs7Z0JBQUU7Z0JBQzFHO29CQUFFM08sTUFBTTtvQkFBbUJ1RyxNQUFNO29CQUFRMEMsUUFBUTt3QkFBRStGLFVBQVU7d0JBQXlCMUMsVUFBVTtvQkFBTztnQkFBRTtnQkFDekc7b0JBQUV0TSxNQUFNO29CQUFPdUcsTUFBTTtvQkFBTzBDLFFBQVE7d0JBQUVqTixTQUFTO29CQUF3QztnQkFBRTthQUMxRjtRQUNIO1FBRUEsbURBQW1EO1FBQ25ELElBQUl1SyxLQUFLL0gsV0FBVyxHQUFHNEQsUUFBUSxDQUFDLGlCQUFpQnNFLE9BQU9sSSxXQUFXLEdBQUc0RCxRQUFRLENBQUMsVUFBVTtZQUN2RixPQUFPO2dCQUNMO29CQUFFcEMsTUFBTTtvQkFBU3VHLE1BQU07b0JBQVMwQyxRQUFRO3dCQUFFak4sU0FBUztvQkFBK0M7Z0JBQUU7Z0JBQ3BHO29CQUFFZ0UsTUFBTTtvQkFBb0J1RyxNQUFNO29CQUFZMEMsUUFBUTt3QkFBRTZGLFVBQVU7d0JBQTBCQyxTQUFTO29CQUFNO2dCQUFFO2dCQUM3RztvQkFBRS9PLE1BQU07b0JBQWlCdUcsTUFBTTtvQkFBWTBDLFFBQVE7d0JBQUU2RixVQUFVO3dCQUFpQkQsVUFBVTtvQkFBSztnQkFBRTtnQkFDakc7b0JBQUU3TyxNQUFNO29CQUFzQnVHLE1BQU07b0JBQVkwQyxRQUFRO3dCQUFFNkYsVUFBVTt3QkFBc0JILE9BQU87b0JBQUU7Z0JBQUU7Z0JBQ3JHO29CQUFFM08sTUFBTTtvQkFBc0J1RyxNQUFNO29CQUFlMEMsUUFBUTt3QkFBRXZJLFdBQVc7b0JBQW9CO2dCQUFFO2dCQUM5RjtvQkFBRVYsTUFBTTtvQkFBd0J1RyxNQUFNO29CQUFZMEMsUUFBUTt3QkFBRTZGLFVBQVU7d0JBQWtCQyxTQUFTO29CQUFNO2dCQUFFO2dCQUN6RztvQkFBRS9PLE1BQU07b0JBQXNCdUcsTUFBTTtvQkFBWTBDLFFBQVE7d0JBQUU2RixVQUFVO3dCQUFvQnhDLFVBQVU7b0JBQU87Z0JBQUU7Z0JBQzNHO29CQUFFdE0sTUFBTTtvQkFBb0J1RyxNQUFNO29CQUFZMEMsUUFBUTt3QkFBRXlGLFVBQVU7d0JBQXVCQyxPQUFPO29CQUFLO2dCQUFFO2dCQUN2RztvQkFBRTNPLE1BQU07b0JBQTZCdUcsTUFBTTtvQkFBYzBDLFFBQVE7d0JBQUV5RixVQUFVO3dCQUFxQkMsT0FBTztvQkFBSztnQkFBRTtnQkFDaEg7b0JBQUUzTyxNQUFNO29CQUFPdUcsTUFBTTtvQkFBTzBDLFFBQVE7d0JBQUVqTixTQUFTO29CQUFrQztnQkFBRTthQUNwRjtRQUNIO1FBRUEsMkJBQTJCO1FBQzNCLElBQUl1SyxLQUFLL0gsV0FBVyxHQUFHNEQsUUFBUSxDQUFDLFlBQVk7WUFDMUMsT0FBTztnQkFDTDtvQkFBRXBDLE1BQU07b0JBQVN1RyxNQUFNO29CQUFTMEMsUUFBUTt3QkFBRWpOLFNBQVM7b0JBQTZCO2dCQUFFO2dCQUNsRjtvQkFBRWdFLE1BQU07b0JBQXlCdUcsTUFBTTtvQkFBUTBDLFFBQVE7d0JBQUUyRixVQUFVO3dCQUFrQkMsVUFBVTtvQkFBSztnQkFBRTtnQkFDdEc7b0JBQUU3TyxNQUFNO29CQUF3QnVHLE1BQU07b0JBQVkwQyxRQUFRO3dCQUFFNkYsVUFBVTt3QkFBb0JDLFNBQVM7b0JBQU07Z0JBQUU7Z0JBQzNHO29CQUFFL08sTUFBTTtvQkFBaUJ1RyxNQUFNO29CQUFlMEMsUUFBUTt3QkFBRXZJLFdBQVc7b0JBQW9CO2dCQUFFO2dCQUN6RjtvQkFBRVYsTUFBTTtvQkFBbUJ1RyxNQUFNO29CQUFjMEMsUUFBUTt3QkFBRXlGLFVBQVU7d0JBQW1CQyxPQUFPO29CQUFLO2dCQUFFO2dCQUNwRztvQkFBRTNPLE1BQU07b0JBQWF1RyxNQUFNO29CQUFZMEMsUUFBUTt3QkFBRXlGLFVBQVU7d0JBQWlCQyxPQUFPO29CQUFTO2dCQUFFO2dCQUM5RjtvQkFBRTNPLE1BQU07b0JBQU91RyxNQUFNO29CQUFPMEMsUUFBUTt3QkFBRWpOLFNBQVM7b0JBQTZCO2dCQUFFO2FBQy9FO1FBQ0g7UUFFQSw0QkFBNEI7UUFDNUIsT0FBTztZQUNMO2dCQUFFZ0UsTUFBTTtnQkFBU3VHLE1BQU07Z0JBQVMwQyxRQUFRO29CQUFFak4sU0FBUztnQkFBcUI7WUFBRTtZQUMxRTtnQkFBRWdFLE1BQU07Z0JBQWdCdUcsTUFBTTtnQkFBYzBDLFFBQVE7b0JBQUV5RixVQUFVO29CQUFXQyxPQUFPO2dCQUFFO1lBQUU7WUFDdEY7Z0JBQUUzTyxNQUFNO2dCQUFjdUcsTUFBTTtnQkFBUTBDLFFBQVE7b0JBQUVnRyxVQUFVLEtBQUssS0FBSyxLQUFLO2dCQUFLO1lBQUU7WUFDOUU7Z0JBQUVqUCxNQUFNO2dCQUFhdUcsTUFBTTtnQkFBYzBDLFFBQVE7b0JBQUV5RixVQUFVO29CQUFhQyxPQUFPO2dCQUFFO1lBQUU7WUFDckY7Z0JBQUUzTyxNQUFNO2dCQUFPdUcsTUFBTTtnQkFBTzBDLFFBQVE7b0JBQUVqTixTQUFTO2dCQUFxQjtZQUFFO1NBQ3ZFO0lBQ0g7SUFFQTs7R0FFQyxHQUNELEFBQVE0Syx5QkFBeUJQLFlBQTBCLEVBQUVJLFlBQW9CLEVBQUVDLE1BQWMsRUFBVTtRQUN6RyxNQUFNc0IsWUFBWTNCLGFBQWEyQixTQUFTLElBQUk7UUFDNUMsTUFBTTFELFdBQVcrQixhQUFhL0IsUUFBUSxJQUFJO1FBQzFDLE1BQU00SyxRQUFRN0ksYUFBYTZJLEtBQUssSUFBSSxFQUFFO1FBRXRDLElBQUk5SCxjQUFjLENBQUMsU0FBUyxFQUFFWCxhQUFhLGNBQWMsRUFBRUMsT0FBTyxDQUFDLEVBQUVwQyxTQUFTLG1CQUFtQixFQUFFMEQsVUFBVSxDQUFDLENBQUM7UUFFL0csSUFBSWtILE1BQU1yTyxNQUFNLEdBQUcsR0FBRztZQUNwQnVHLGVBQWUsQ0FBQywwQ0FBMEMsRUFBRThILE1BQU03TixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDakY7UUFFQSxtQ0FBbUM7UUFDbkMsSUFBSXFGLE9BQU9sSSxXQUFXLEdBQUc0RCxRQUFRLENBQUMsWUFBWTtZQUM1Q2dGLGVBQWU7UUFDakIsT0FBTyxJQUFJVixPQUFPbEksV0FBVyxHQUFHNEQsUUFBUSxDQUFDLFVBQVU7WUFDakRnRixlQUFlO1FBQ2pCLE9BQU8sSUFBSVYsT0FBT2xJLFdBQVcsR0FBRzRELFFBQVEsQ0FBQyxVQUFVO1lBQ2pEZ0YsZUFBZTtRQUNqQixPQUFPLElBQUlWLE9BQU9sSSxXQUFXLEdBQUc0RCxRQUFRLENBQUMsaUJBQWlCO1lBQ3hEZ0YsZUFBZTtRQUNqQjtRQUVBLDBDQUEwQztRQUMxQyxJQUFJWCxhQUFhakksV0FBVyxHQUFHNEQsUUFBUSxDQUFDLGVBQWU7WUFDckRnRixlQUFlO1FBQ2pCLE9BQU8sSUFBSVgsYUFBYWpJLFdBQVcsR0FBRzRELFFBQVEsQ0FBQyxlQUFlO1lBQzVEZ0YsZUFBZTtRQUNqQixPQUFPLElBQUlYLGFBQWFqSSxXQUFXLEdBQUc0RCxRQUFRLENBQUMsU0FBUztZQUN0RGdGLGVBQWU7UUFDakI7UUFFQSxPQUFPQTtJQUNUO0lBRUE7O0dBRUMsR0FDRCxBQUFRTiwyQkFBMkJULFlBQTBCLEVBQUVJLFlBQW9CLEVBQVU7UUFDM0YsMkNBQTJDO1FBQzNDLElBQUlKLGFBQWFRLE9BQU8sRUFBRTtZQUN4QixPQUFPUixhQUFhUSxPQUFPO1FBQzdCO1FBRUEsbUNBQW1DO1FBQ25DLE9BQVFKLGFBQWFqSSxXQUFXO1lBQzlCLEtBQUs7WUFDTCxLQUFLO2dCQUNILE9BQU87WUFDVCxLQUFLO1lBQ0wsS0FBSztnQkFDSCxPQUFPO1lBQ1QsS0FBSztZQUNMLEtBQUs7Z0JBQ0gsT0FBTztZQUNULEtBQUs7WUFDTCxLQUFLO2dCQUNILE9BQU87WUFDVCxLQUFLO1lBQ0wsS0FBSztnQkFDSCxPQUFPO1lBQ1QsS0FBSztZQUNMLEtBQUs7Z0JBQ0gsT0FBTztZQUNUO2dCQUNFLE9BQU87UUFDWDtJQUNGO0lBRUE7O0dBRUMsR0FDRCxBQUFRd0ksMkJBQTJCWCxZQUEwQixFQUFFSSxZQUFvQixFQUFFQyxNQUFjLEVBQVk7UUFDN0csTUFBTUssVUFBb0IsRUFBRTtRQUU1QixxQ0FBcUM7UUFDckMsT0FBUU4sYUFBYWpJLFdBQVc7WUFDOUIsS0FBSztnQkFDSHVJLFFBQVFvSSxJQUFJLENBQUMsc0JBQXNCLG1CQUFtQixrQkFBa0I7Z0JBQ3hFLElBQUl6SSxPQUFPbEksV0FBVyxHQUFHNEQsUUFBUSxDQUFDLFlBQVk7b0JBQzVDMkUsUUFBUW9JLElBQUksQ0FBQyxlQUFlLGNBQWM7Z0JBQzVDO2dCQUNBO1lBRUYsS0FBSztnQkFDSHBJLFFBQVFvSSxJQUFJLENBQUMsb0JBQW9CLHNCQUFzQixvQkFBb0Isb0JBQW9CO2dCQUMvRixJQUFJekksT0FBT2xJLFdBQVcsR0FBRzRELFFBQVEsQ0FBQyxVQUFVO29CQUMxQzJFLFFBQVFvSSxJQUFJLENBQUMsaUJBQWlCO2dCQUNoQztnQkFDQTtZQUVGLEtBQUs7WUFDTCxLQUFLO2dCQUNIcEksUUFBUW9JLElBQUksQ0FBQyx1QkFBdUIsc0JBQXNCLGVBQWUscUJBQXFCO2dCQUM5RjtZQUVGLEtBQUs7WUFDTCxLQUFLO2dCQUNIcEksUUFBUW9JLElBQUksQ0FBQyxjQUFjLG9CQUFvQixjQUFjO2dCQUM3RDtZQUVGO2dCQUNFcEksUUFBUW9JLElBQUksQ0FBQyxjQUFjLFFBQVE7UUFDdkM7UUFFQSw4QkFBOEI7UUFDOUIsSUFBSXpJLE9BQU9sSSxXQUFXLEdBQUc0RCxRQUFRLENBQUMsV0FBVztZQUMzQzJFLFFBQVFvSSxJQUFJLENBQUMsMEJBQTBCLDZCQUE2QjtRQUN0RTtRQUVBLE9BQU9wSTtJQUNUO0lBRUE7O0dBRUMsR0FDRCxNQUFjZSxxQkFDWnpCLFlBQTBCLEVBQzFCbEwsTUFBYyxFQUNkbUwsWUFBb0IsRUFDcEJHLFlBQW9CLEVBQ3BCQyxNQUFjLEVBQ1k7UUFDMUIsdURBQXVEO1FBQ3ZELE1BQU1xQixXQUFXLE1BQU0zSCxlQUFNLENBQUMySCxRQUFRLENBQUMvRyxNQUFNLENBQUM7WUFDNUM3QixNQUFNO2dCQUNKYSxNQUFNc0c7Z0JBQ05jLGFBQWFmLGFBQWEyQixTQUFTLElBQUksQ0FBQyxPQUFPLEVBQUV2QixhQUFhLGNBQWMsRUFBRUMsT0FBTyxPQUFPLENBQUM7Z0JBQzdGakYsUUFBUTtnQkFDUndHLFlBQVlDLEtBQUtDLFNBQVMsQ0FBQztvQkFDekI1QixNQUFNRTtvQkFDTkMsUUFBUUE7b0JBQ1JwQyxVQUFVK0IsYUFBYS9CLFFBQVEsSUFBSTtvQkFDbkMwRCxXQUFXM0IsYUFBYTJCLFNBQVM7b0JBQ2pDSSxhQUFhO29CQUNiZ0gsY0FBYztnQkFDaEI7Z0JBQ0ExTixhQUFhdkc7WUFDZjtRQUNGO1FBRUEsd0RBQXdEO1FBQ3hELE1BQU1rVSxlQUFlLElBQUksQ0FBQ1osNEJBQTRCLENBQUNoSSxjQUFjQztRQUVyRSxJQUFLLElBQUkvQyxJQUFJLEdBQUdBLElBQUkwTCxhQUFheE8sTUFBTSxFQUFFOEMsSUFBSztZQUM1QyxNQUFNdkQsZUFBTSxDQUFDa0osWUFBWSxDQUFDdEksTUFBTSxDQUFDO2dCQUMvQjdCLE1BQU07b0JBQ0pvSyxZQUFZeEIsU0FBU25HLEVBQUU7b0JBQ3ZCNUIsTUFBTXFQLFlBQVksQ0FBQzFMLEVBQUUsQ0FBQzNELElBQUk7b0JBQzFCdUcsTUFBTThJLFlBQVksQ0FBQzFMLEVBQUUsQ0FBQzRDLElBQUk7b0JBQzFCMEMsUUFBUWYsS0FBS0MsU0FBUyxDQUFDa0gsWUFBWSxDQUFDMUwsRUFBRSxDQUFDc0YsTUFBTTtvQkFDN0NRLFdBQVcsTUFBTzlGLElBQUk7b0JBQ3RCaUcsV0FBVztnQkFDYjtZQUNGO1FBQ0Y7UUFFQXJPLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLHVDQUF1QztZQUFFK04sWUFBWXhCLFNBQVNuRyxFQUFFO1lBQUV6RztRQUFPO1FBRXJGLE9BQU87WUFDTFksU0FBUztZQUNUQyxTQUFTLENBQUMsWUFBWSxFQUFFc0ssYUFBYSxnREFBZ0QsQ0FBQztZQUN0Rm5ILE1BQU00STtZQUNObEcsU0FBUztnQkFDUDBILFlBQVl4QixTQUFTbkcsRUFBRTtnQkFDdkI1QixNQUFNK0gsU0FBUy9ILElBQUk7Z0JBQ25CdUcsTUFBTUU7Z0JBQ05DLFFBQVFBO2dCQUNSMkQsY0FBY2dGLGFBQWF4TyxNQUFNO2dCQUNqQ1ksUUFBUXNHLFNBQVN0RyxNQUFNO2dCQUN2QjJOLGNBQWM7WUFDaEI7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxBQUFRNUYsb0JBQW9COEYsWUFBb0IsRUFBTztRQUNyRCwwREFBMEQ7UUFDMUQsTUFBTUMsY0FBc0M7WUFDMUMsZ0JBQWdCO1lBQ2hCLG1CQUFtQjtZQUNuQixnQkFBZ0I7WUFDaEIsV0FBVztZQUNYLGtCQUFrQjtZQUNsQixtQkFBbUI7WUFDbkIsbUJBQW1CO1lBQ25CLHNCQUFzQjtZQUV0QixlQUFlO1lBQ2YsY0FBYztZQUNkLFlBQVk7WUFDWixpQkFBaUI7WUFDakIsa0JBQWtCO1lBQ2xCLGVBQWU7WUFDZixvQkFBb0I7WUFDcEIsZUFBZTtZQUNmLHFCQUFxQjtZQUNyQixZQUFZO1lBRVosY0FBYztZQUNkLGFBQWE7WUFDYixTQUFTO1lBQ1QsU0FBUztZQUNULFNBQVM7WUFDVCxRQUFRO1lBQ1IsVUFBVTtZQUVWLGFBQWE7WUFDYixrQkFBa0I7WUFDbEIsYUFBYTtZQUNiLFVBQVU7WUFDVixjQUFjO1lBRWQsb0JBQW9CO1lBQ3BCLFVBQVU7WUFDVixjQUFjO1lBQ2QsV0FBVztZQUNYLFNBQVM7WUFDVCxTQUFTO1lBRVQsV0FBVztZQUNYLGVBQWU7WUFDZix1QkFBdUI7WUFDdkIsZ0JBQWdCO1lBQ2hCLHFCQUFxQjtRQUN2QjtRQUVBLE9BQU9BLFdBQVcsQ0FBQ0QsYUFBYSxJQUFJLFVBQVUsb0JBQW9CO0lBQ3BFO0lBRUE7O0dBRUMsR0FDRCxBQUFRckUsNEJBQTRCUixZQUEwQixFQUFVO1FBQ3RFLE1BQU0vRCxTQUFTK0QsYUFBYS9ELE1BQU0sSUFBSTtRQUN0QyxNQUFNOEUsV0FBV2YsYUFBYWUsUUFBUSxJQUFJO1FBRTFDLE9BQU8sQ0FBQztnQkFDSSxFQUFFQSxTQUFTOzJEQUNnQyxFQUFFOUUsT0FBTzs7O0lBR2hFLENBQUM7SUFDSDtJQUVBOztHQUVDLEdBQ0QsQUFBUXlFLDBCQUEwQlYsWUFBMEIsRUFBVTtRQUNwRSxPQUFPLENBQUMsMENBQTBDLEVBQUVBLGFBQWFlLFFBQVEsSUFBSSxNQUFNLCtFQUErRSxDQUFDO0lBQ3JLO0lBRUE7O0dBRUMsR0FDRCxBQUFRSCwrQkFBK0JaLFlBQTBCLEVBQVU7UUFDekUsT0FBTyxDQUFDLHdEQUF3RCxFQUFFQSxhQUFhZSxRQUFRLElBQUksTUFBTSxxRUFBcUUsQ0FBQztJQUN6SztJQUVBOztHQUVDLEdBQ0QsTUFBY25OLGNBQWMxQyxNQUF5QixFQUFFUixNQUFjLEVBQTRCO1FBQy9GLE9BQVFRLE9BQU9pRCxNQUFNO1lBQ25CLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNLElBQUksQ0FBQzRRLGFBQWEsQ0FBQzdULE9BQU93RCxJQUFJLEVBQUVoRTtZQUMvQyxLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUNzVSxjQUFjLENBQUM5VCxPQUFPd0QsSUFBSSxFQUFFaEU7WUFDaEQsS0FBSztnQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDdVUsY0FBYyxDQUFDL1QsT0FBT3dELElBQUksRUFBRWhFO1lBQ2hELEtBQUs7Z0JBQ0gsT0FBTyxNQUFNLElBQUksQ0FBQ3dVLFVBQVUsQ0FBQ2hVLE9BQU93RCxJQUFJLEVBQUVoRTtZQUM1QyxLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUN5VSxhQUFhLENBQUNqVSxPQUFPd0QsSUFBSSxFQUFFaEU7WUFDL0MsS0FBSztnQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDMFUsY0FBYyxDQUFDbFUsT0FBT3dELElBQUksRUFBRWhFO1lBQ2hELEtBQUs7Z0JBQ0gsT0FBTyxNQUFNLElBQUksQ0FBQzJVLFVBQVUsQ0FBQ25VLE9BQU93RCxJQUFJLEVBQUVoRTtZQUM1QyxLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUM0VSxpQkFBaUIsQ0FBQ3BVLE9BQU93RCxJQUFJLEVBQUVoRTtZQUNuRCxLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUM2VSxhQUFhLENBQUNyVSxPQUFPd0QsSUFBSSxFQUFFaEU7WUFDL0MsS0FBSztnQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDOFUsWUFBWSxDQUFDdFUsT0FBT3dELElBQUksRUFBRWhFO1lBQzlDO2dCQUNFLE9BQU87b0JBQ0xZLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQyxlQUFlLEVBQUVMLE9BQU9pRCxNQUFNLENBQUNKLFdBQVcsR0FBRywrQ0FBK0MsQ0FBQztvQkFDdkd0QyxhQUFhO3dCQUFDO3dCQUFrQzt3QkFBaUM7cUJBQWlDO2dCQUNwSDtRQUNKO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNvQyxjQUFjM0MsTUFBeUIsRUFBRVIsTUFBYyxFQUE0QjtRQUMvRixPQUFRUSxPQUFPaUQsTUFBTTtZQUNuQixLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUNzUixhQUFhLENBQUN2VSxPQUFPd0QsSUFBSSxFQUFFaEU7WUFDL0MsS0FBSztnQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDZ1YsY0FBYyxDQUFDeFUsT0FBT3dELElBQUksRUFBRWhFO1lBQ2hELEtBQUs7Z0JBQ0gsT0FBTyxNQUFNLElBQUksQ0FBQ2lWLGNBQWMsQ0FBQ3pVLE9BQU93RCxJQUFJLEVBQUVoRTtZQUNoRCxLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUNrVixVQUFVLENBQUMxVSxPQUFPd0QsSUFBSSxFQUFFaEU7WUFDNUMsS0FBSztnQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDbVYsYUFBYSxDQUFDM1UsT0FBT3dELElBQUksRUFBRWhFO1lBQy9DLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNLElBQUksQ0FBQ29WLGNBQWMsQ0FBQzVVLE9BQU93RCxJQUFJLEVBQUVoRTtZQUNoRCxLQUFLO2dCQUNILE9BQU8sTUFBTSxJQUFJLENBQUNxVixVQUFVLENBQUM3VSxPQUFPd0QsSUFBSSxFQUFFaEU7WUFDNUMsS0FBSztnQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDc1YsaUJBQWlCLENBQUM5VSxPQUFPd0QsSUFBSSxFQUFFaEU7WUFDbkQsS0FBSztnQkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDdVYsYUFBYSxDQUFDL1UsT0FBT3dELElBQUksRUFBRWhFO1lBQy9DLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNLElBQUksQ0FBQ3dWLFlBQVksQ0FBQ2hWLE9BQU93RCxJQUFJLEVBQUVoRTtZQUM5QztnQkFDRSxPQUFPO29CQUNMWSxTQUFTO29CQUNUQyxTQUFTLENBQUMsZUFBZSxFQUFFTCxPQUFPaUQsTUFBTSxDQUFDSixXQUFXLEdBQUcsK0NBQStDLENBQUM7b0JBQ3ZHdEMsYUFBYTt3QkFBQzt3QkFBa0M7d0JBQThCO3FCQUErQjtnQkFDL0c7UUFDSjtJQUNGO0lBRUEsTUFBY3FDLGdCQUFnQjVDLE1BQXlCLEVBQUVSLE1BQWMsRUFBNEI7UUFDakcsSUFBSTtZQUNGLE1BQU15VixrQkFBa0JqVixPQUFPd0QsSUFBSTtZQUNuQyxNQUFNMUQsUUFBUUUsT0FBT2tWLGFBQWEsQ0FBQ3JTLFdBQVc7WUFFOUMsNENBQTRDO1lBQzVDLElBQUkvQyxNQUFNMkcsUUFBUSxDQUFDLHNCQUFzQjNHLE1BQU0yRyxRQUFRLENBQUMscUJBQXFCM0csTUFBTTJHLFFBQVEsQ0FBQyx1QkFBdUI7Z0JBQ2pILE9BQU8sTUFBTSxJQUFJLENBQUMwTyxvQkFBb0IsQ0FBQ3JWLE9BQU9OO1lBQ2hEO1lBRUEsSUFBSU0sTUFBTTJHLFFBQVEsQ0FBQyx1QkFBdUIzRyxNQUFNMkcsUUFBUSxDQUFDLHdCQUF3QjNHLE1BQU0yRyxRQUFRLENBQUMseUJBQXlCO2dCQUN2SCxPQUFPLE1BQU0sSUFBSSxDQUFDMk8sc0JBQXNCLENBQUN0VixPQUFPTjtZQUNsRDtZQUVBLHdDQUF3QztZQUN4QyxJQUFJLEFBQUNNLENBQUFBLE1BQU0yRyxRQUFRLENBQUMsZUFBZTNHLE1BQU0yRyxRQUFRLENBQUMsUUFBTyxLQUFPM0csQ0FBQUEsTUFBTTJHLFFBQVEsQ0FBQyxZQUFZM0csTUFBTTJHLFFBQVEsQ0FBQyxnQkFBZ0IzRyxNQUFNMkcsUUFBUSxDQUFDLFlBQVkzRyxNQUFNMkcsUUFBUSxDQUFDLGdCQUFnQjNHLE1BQU0yRyxRQUFRLENBQUMsT0FBTSxHQUFJO2dCQUMzTSxPQUFPLE1BQU0sSUFBSSxDQUFDMk8sc0JBQXNCLENBQUN0VixPQUFPTjtZQUNsRDtZQUVBLG1DQUFtQztZQUNuQyxJQUFJLEFBQUNNLENBQUFBLE1BQU0yRyxRQUFRLENBQUMsYUFBYTNHLE1BQU0yRyxRQUFRLENBQUMsVUFBUyxLQUFPM0csQ0FBQUEsTUFBTTJHLFFBQVEsQ0FBQyxXQUFXM0csTUFBTTJHLFFBQVEsQ0FBQyxNQUFLLEdBQUk7Z0JBQ2hILE9BQU8sTUFBTSxJQUFJLENBQUMwTyxvQkFBb0IsQ0FBQ3JWLE9BQU9OO1lBQ2hEO1lBRUEsSUFBSU0sTUFBTTJHLFFBQVEsQ0FBQyxzQkFBc0IzRyxNQUFNMkcsUUFBUSxDQUFDLGVBQWU7Z0JBQ3JFLE9BQU8sTUFBTSxJQUFJLENBQUM0TyxzQkFBc0IsQ0FBQ3ZWLE9BQU9OO1lBQ2xEO1lBRUEsSUFBSU0sTUFBTTJHLFFBQVEsQ0FBQyx3QkFBd0IzRyxNQUFNMkcsUUFBUSxDQUFDLGNBQWMzRyxNQUFNMkcsUUFBUSxDQUFDLFdBQVc7Z0JBQ2hHLE9BQU8sTUFBTSxJQUFJLENBQUM2Tyx1QkFBdUIsQ0FBQ3hWLE9BQU9OO1lBQ25EO1lBRUEsSUFBSU0sTUFBTTJHLFFBQVEsQ0FBQyx1QkFBdUIzRyxNQUFNMkcsUUFBUSxDQUFDLFVBQVUzRyxNQUFNMkcsUUFBUSxDQUFDLGtCQUFrQjtnQkFDbEcsT0FBTyxNQUFNLElBQUksQ0FBQzhPLHlCQUF5QixDQUFDelYsT0FBT047WUFDckQ7WUFFQSxJQUFJTSxNQUFNMkcsUUFBUSxDQUFDLHNCQUFzQjNHLE1BQU0yRyxRQUFRLENBQUMscUJBQXFCO2dCQUMzRSxPQUFPLE1BQU0sSUFBSSxDQUFDK08seUJBQXlCLENBQUMxVixPQUFPTjtZQUNyRDtZQUVBLG1DQUFtQztZQUNuQyxJQUFJTSxNQUFNMkcsUUFBUSxDQUFDLGVBQWUzRyxNQUFNMkcsUUFBUSxDQUFDLFlBQVk7Z0JBQzNELE9BQU8sTUFBTSxJQUFJLENBQUNnUCxtQkFBbUIsQ0FBQzNWLE9BQU9OO1lBQy9DO1lBRUEsSUFBSU0sTUFBTTJHLFFBQVEsQ0FBQyxlQUFlM0csTUFBTTJHLFFBQVEsQ0FBQyxjQUFjO2dCQUM3RCxPQUFPLE1BQU0sSUFBSSxDQUFDaVAsbUJBQW1CLENBQUM1VixPQUFPTjtZQUMvQztZQUVBLElBQUlNLE1BQU0yRyxRQUFRLENBQUMsZUFBZTNHLE1BQU0yRyxRQUFRLENBQUMsZUFBZTtnQkFDOUQsT0FBTyxNQUFNLElBQUksQ0FBQ2tQLG1CQUFtQixDQUFDN1YsT0FBT047WUFDL0M7WUFFQSxJQUFJTSxNQUFNMkcsUUFBUSxDQUFDLFdBQVczRyxNQUFNMkcsUUFBUSxDQUFDLGVBQWU7Z0JBQzFELE9BQU8sTUFBTSxJQUFJLENBQUNtUCxlQUFlLENBQUM5VixPQUFPTjtZQUMzQztZQUVBLElBQUlNLE1BQU0yRyxRQUFRLENBQUMsWUFBWTNHLE1BQU0yRyxRQUFRLENBQUMsU0FBUztnQkFDckQsT0FBTyxNQUFNLElBQUksQ0FBQ29QLGdCQUFnQixDQUFDL1YsT0FBT047WUFDNUM7WUFFQSwrQkFBK0I7WUFDL0IsT0FBTyxNQUFNLElBQUksQ0FBQ3NXLGtCQUFrQixDQUFDaFcsT0FBT047UUFFOUMsRUFBRSxPQUFPMkQsT0FBTztZQUNkLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBLE1BQWN5RCxjQUFjTixJQUFTLEVBQUVoRSxNQUFjLEVBQTRCO1FBQy9FLElBQUk7WUFDRixNQUFNdVcsY0FBY3ZTLEtBQUthLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJM0UsT0FBT21MLGtCQUFrQixJQUFJO1lBQ2xGLE1BQU1ZLGNBQWNqSSxLQUFLaUksV0FBVyxJQUFJO1lBQ3hDLE1BQU11SyxRQUFReFMsS0FBS3dTLEtBQUssSUFBSXpKLEtBQUtDLFNBQVMsQ0FBQztnQkFDekNkLFlBQVk7b0JBQ1Y7d0JBQUV1SyxPQUFPO3dCQUFVQyxVQUFVO3dCQUFVQyxPQUFPO29CQUFTO2lCQUN4RDtZQUNIO1lBRUEsTUFBTUMsVUFBVSxNQUFNM1IsZUFBTSxDQUFDMlIsT0FBTyxDQUFDL1EsTUFBTSxDQUFDO2dCQUMxQzdCLE1BQU07b0JBQ0phLE1BQU0wUjtvQkFDTnRLO29CQUNBdUs7b0JBQ0FqUSxhQUFhdkc7Z0JBQ2Y7WUFDRjtZQUVBSSxjQUFNLENBQUNDLElBQUksQ0FBQyxnQ0FBZ0M7Z0JBQUV3VyxXQUFXRCxRQUFRblEsRUFBRTtnQkFBRXpHO1lBQU87WUFFNUUsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUyxDQUFDLG9CQUFvQixFQUFFMFYsWUFBWSx1QkFBdUIsQ0FBQztnQkFDcEV2UyxNQUFNNFM7Z0JBQ05sUSxTQUFTO29CQUNQbVEsV0FBV0QsUUFBUW5RLEVBQUU7b0JBQ3JCNUIsTUFBTStSLFFBQVEvUixJQUFJO29CQUNsQm9ILGFBQWEySyxRQUFRM0ssV0FBVztnQkFDbEM7WUFDRjtRQUVGLEVBQUUsT0FBT3RJLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQywyQkFBMkI7Z0JBQUVBLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBR2lELE9BQU9IO2dCQUFRSztnQkFBTWhFO1lBQU87WUFFdEgsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQXFDO2lCQUE2QjtZQUNsRjtRQUNGO0lBQ0Y7SUFFQSxNQUFjd0QsZUFBZVAsSUFBUyxFQUFFaEUsTUFBYyxFQUE0QjtRQUNoRixJQUFJO1lBQ0YsTUFBTThXLGVBQWU5UyxLQUFLb0gsSUFBSSxJQUFJO1lBQ2xDLE1BQU0yTCxlQUFlL1MsS0FBS2EsSUFBSSxJQUFJLEdBQUdpUyxhQUFhLFlBQVksRUFBRSxJQUFJNVcsT0FBT21MLGtCQUFrQixJQUFJO1lBRWpHLElBQUlrSTtZQUVKLElBQUl1RCxpQkFBaUIsU0FBUztnQkFDNUJ2RCxXQUFXLE1BQU10TyxlQUFNLENBQUMrUixhQUFhLENBQUNuUixNQUFNLENBQUM7b0JBQzNDN0IsTUFBTTt3QkFDSmEsTUFBTWtTO3dCQUNOOUssYUFBYWpJLEtBQUtpSSxXQUFXLElBQUk7d0JBQ2pDMEQsU0FBUzNMLEtBQUsyTCxPQUFPLElBQUk7d0JBQ3pCRSxTQUFTN0wsS0FBSzZMLE9BQU8sSUFBSTt3QkFDekJvSCxhQUFhalQsS0FBS2lULFdBQVcsSUFBSTt3QkFDakNDLFVBQVVsVCxLQUFLa1QsUUFBUSxJQUFJO3dCQUMzQjNRLGFBQWF2RztvQkFDZjtnQkFDRjtZQUNGLE9BQU8sSUFBSThXLGlCQUFpQixPQUFPO2dCQUNqQ3ZELFdBQVcsTUFBTXRPLGVBQU0sQ0FBQ2tTLFdBQVcsQ0FBQ3RSLE1BQU0sQ0FBQztvQkFDekM3QixNQUFNO3dCQUNKYSxNQUFNa1M7d0JBQ05sSCxTQUFTN0wsS0FBSzZMLE9BQU8sSUFBSTt3QkFDekJ6RCxXQUFXVyxLQUFLQyxTQUFTLENBQUNoSixLQUFLb0ksU0FBUyxJQUFJOzRCQUFDO3lCQUFZO3dCQUN6RDhLLFVBQVVsVCxLQUFLa1QsUUFBUSxJQUFJO3dCQUMzQjNRLGFBQWF2RztvQkFDZjtnQkFDRjtZQUNGLE9BQU8sSUFBSThXLGlCQUFpQixZQUFZO2dCQUN0Q3ZELFdBQVcsTUFBTXRPLGVBQU0sQ0FBQ21TLGdCQUFnQixDQUFDdlIsTUFBTSxDQUFDO29CQUM5QzdCLE1BQU07d0JBQ0phLE1BQU1rUzt3QkFDTmxILFNBQVM3TCxLQUFLNkwsT0FBTyxJQUFJO3dCQUN6QnpELFdBQVdXLEtBQUtDLFNBQVMsQ0FBQ2hKLEtBQUtvSSxTQUFTLElBQUk7NEJBQUM7eUJBQVk7d0JBQ3pEOEssVUFBVWxULEtBQUtrVCxRQUFRLElBQUk7d0JBQzNCNVEsUUFBUTt3QkFDUkMsYUFBYXZHO29CQUNmO2dCQUNGO1lBQ0YsT0FBTztnQkFDTCxPQUFPO29CQUNMWSxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUFnQzt3QkFBOEI7cUJBQWtDO2dCQUNoSDtZQUNGO1lBRUFYLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLGlDQUFpQztnQkFBRWdYLFlBQVk5RCxTQUFTOU0sRUFBRTtnQkFBRTJFLE1BQU0wTDtnQkFBYzlXO1lBQU87WUFFbkcsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUyxDQUFDLEVBQUUsRUFBRWlXLGFBQWExRyxXQUFXLEdBQUcsV0FBVyxFQUFFMkcsYUFBYSx1QkFBdUIsQ0FBQztnQkFDM0YvUyxNQUFNdVA7Z0JBQ043TSxTQUFTO29CQUNQMlEsWUFBWTlELFNBQVM5TSxFQUFFO29CQUN2QjVCLE1BQU0wTyxTQUFTMU8sSUFBSTtvQkFDbkJ1RyxNQUFNMEw7Z0JBQ1I7WUFDRjtRQUVGLEVBQUUsT0FBT25ULE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyw0QkFBNEI7Z0JBQUVBLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBR2lELE9BQU9IO2dCQUFRSztnQkFBTWhFO1lBQU87WUFFdkgsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQXNDO2lCQUFnQztZQUN0RjtRQUNGO0lBQ0Y7SUFFQSxNQUFjb1IsbUJBQW1CSSxPQUF5QixFQUE0QjtRQUNwRixJQUFJO1lBQ0YsbUNBQW1DO1lBQ25DLE1BQU0sQ0FBQytFLGNBQWNDLGVBQWVDLFdBQVdDLGlCQUFpQkMsZUFBZUMsYUFBYSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztnQkFDL0csSUFBSSxDQUFDQyxvQkFBb0I7Z0JBQ3pCLElBQUksQ0FBQ0MscUJBQXFCO2dCQUMxQixJQUFJLENBQUNDLGlCQUFpQjtnQkFDdEIsSUFBSSxDQUFDQyx1QkFBdUI7Z0JBQzVCLElBQUksQ0FBQ0MscUJBQXFCO2dCQUMxQixJQUFJLENBQUNDLG9CQUFvQjthQUMxQjtZQUVELE9BQU87Z0JBQ0x2WCxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUbUQsTUFBTTtvQkFDSmlHLFVBQVVxTjtvQkFDVm5OLFdBQVdvTjtvQkFDWGEsT0FBT1o7b0JBQ1BhLGFBQWFaO29CQUNiMU4sV0FBVzJOO29CQUNYWSxTQUFTWDtvQkFDVHRFLFNBQVMsQ0FBQyxzQkFBc0IsRUFBRWlFLGFBQWFpQixLQUFLLENBQUMsV0FBVyxFQUFFaEIsY0FBY2dCLEtBQUssQ0FBQyxZQUFZLEVBQUViLGNBQWNhLEtBQUssQ0FBQyxZQUFZLEVBQUVmLFVBQVVlLEtBQUssQ0FBQyxrQkFBa0IsRUFBRVosYUFBYVksS0FBSyxDQUFDQyxjQUFjLElBQUk7Z0JBQ2pOO1lBQ0Y7UUFDRixFQUFFLE9BQU83VSxPQUFPO1lBQ2QsT0FBTztnQkFDTC9DLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0lBRUEsTUFBY3VSLGNBQWNHLE9BQXlCLEVBQTRCO1FBQy9FLElBQUk7WUFDRixNQUFNa0csWUFBWSxNQUFNeFQsZUFBTSxDQUFDNEIsSUFBSSxDQUFDNlIsU0FBUyxDQUFDO2dCQUM1Q0MsUUFBUTtvQkFBRWxTLElBQUk7Z0JBQUs7Z0JBQ25CckIsT0FBTztvQkFBRXNDLFVBQVU7Z0JBQUs7WUFDMUI7WUFFQSxNQUFNa1IsbUJBQW1CLE1BQU0zVCxlQUFNLENBQUM0QixJQUFJLENBQUNnUyxPQUFPLENBQUM7Z0JBQ2pEQyxJQUFJO29CQUFDO2lCQUFPO2dCQUNaSCxRQUFRO29CQUFFbFMsSUFBSTtnQkFBSztnQkFDbkJyQixPQUFPO29CQUFFc0MsVUFBVTtnQkFBSztZQUMxQjtZQUVBLE1BQU1xUixjQUFjLE1BQU05VCxlQUFNLENBQUM0QixJQUFJLENBQUMrTCxRQUFRLENBQUM7Z0JBQzdDQyxNQUFNO2dCQUNOQyxTQUFTO29CQUFFbEwsV0FBVztnQkFBTztnQkFDN0JiLFFBQVE7b0JBQ05OLElBQUk7b0JBQ0o1QixNQUFNO29CQUNOQyxPQUFPO29CQUNQa0MsTUFBTTtvQkFDTlksV0FBVztnQkFDYjtnQkFDQXhDLE9BQU87b0JBQUVzQyxVQUFVO2dCQUFLO1lBQzFCO1lBRUEsT0FBTztnQkFDTDlHLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyxtQkFBbUIsRUFBRTRYLFVBQVVFLE1BQU0sQ0FBQ2xTLEVBQUUsQ0FBQyxhQUFhLENBQUM7Z0JBQ2pFekMsTUFBTTtvQkFDSmdWLFlBQVlQLFVBQVVFLE1BQU0sQ0FBQ2xTLEVBQUU7b0JBQy9CbVM7b0JBQ0FHO29CQUNBMUYsU0FBUyxDQUFDLFNBQVMsRUFBRW9GLFVBQVVFLE1BQU0sQ0FBQ2xTLEVBQUUsQ0FBQyw2Q0FBNkMsRUFBRW1TLGlCQUFpQkssR0FBRyxDQUFDQyxDQUFBQSxJQUFLLEdBQUdBLEVBQUVQLE1BQU0sQ0FBQ2xTLEVBQUUsQ0FBQyxDQUFDLEVBQUV5UyxFQUFFbFMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFZCxJQUFJLENBQUMsT0FBTztnQkFDN0o7WUFDRjtRQUNGLEVBQUUsT0FBT3ZDLE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQSxNQUFjd1Isa0JBQWtCRSxPQUF5QixFQUE0QjtRQUNuRixJQUFJO1lBQ0YsTUFBTSxDQUFDNEcsZ0JBQWdCQyxjQUFjQyxrQkFBa0IsR0FBRyxNQUFNekIsUUFBUUMsR0FBRyxDQUFDO2dCQUMxRTVTLGVBQU0sQ0FBQ3lLLGFBQWEsQ0FBQ2dELEtBQUs7Z0JBQzFCek4sZUFBTSxDQUFDOEssV0FBVyxDQUFDMkMsS0FBSztnQkFDeEJ6TixlQUFNLENBQUNnTCxnQkFBZ0IsQ0FBQ3lDLEtBQUs7YUFDOUI7WUFFRCxNQUFNNEcsa0JBQWtCLE1BQU1yVSxlQUFNLENBQUN5SyxhQUFhLENBQUNrRCxRQUFRLENBQUM7Z0JBQzFEQyxNQUFNO2dCQUNOQyxTQUFTO29CQUFFbEwsV0FBVztnQkFBTztnQkFDN0JiLFFBQVE7b0JBQ05OLElBQUk7b0JBQ0o1QixNQUFNO29CQUNOeUIsUUFBUTtvQkFDUnNCLFdBQVc7Z0JBQ2I7WUFDRjtZQUVBLE1BQU0yUixpQkFBaUJKLGlCQUFpQkMsZUFBZUM7WUFFdkQsT0FBTztnQkFDTHpZLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyx1QkFBdUIsRUFBRTBZLGVBQWUsZ0JBQWdCLENBQUM7Z0JBQ25FdlYsTUFBTTtvQkFDSnVWO29CQUNBQyxXQUFXO3dCQUNUMVUsT0FBT3FVO3dCQUNQTSxLQUFLTDt3QkFDTE0sVUFBVUw7b0JBQ1o7b0JBQ0FDO29CQUNBakcsU0FBUyxDQUFDLFNBQVMsRUFBRWtHLGVBQWUsWUFBWSxFQUFFSixlQUFlLFFBQVEsRUFBRUMsYUFBYSxNQUFNLEVBQUVDLGtCQUFrQixTQUFTLENBQUM7Z0JBQzlIO1lBQ0Y7UUFDRixFQUFFLE9BQU8xVixPQUFPO1lBQ2QsT0FBTztnQkFDTC9DLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0lBRUEsTUFBY3lSLGlCQUFpQkMsT0FBeUIsRUFBNEI7UUFDbEYsSUFBSTtZQUNGLDhCQUE4QjtZQUM5QixNQUFNLENBQUNsSSxPQUFPckMsZUFBZTJSLFVBQVVDLFFBQVEsR0FBRyxNQUFNaEMsUUFBUUMsR0FBRyxDQUFDO2dCQUNsRTVTLGVBQU0sQ0FBQzRCLElBQUksQ0FBQzZMLEtBQUssQ0FBQztvQkFBRXROLE9BQU87d0JBQUVzQyxVQUFVO29CQUFLO2dCQUFFO2dCQUM5Q3pDLGVBQU0sQ0FBQzRVLFlBQVksQ0FBQ25ILEtBQUssQ0FBQztvQkFBRXROLE9BQU87d0JBQUUwVSxNQUFNO29CQUFNO2dCQUFFO2dCQUNuRDdVLGVBQU0sQ0FBQzhVLE9BQU8sQ0FBQ3JILEtBQUs7Z0JBQ3BCek4sZUFBTSxDQUFDK1UsTUFBTSxDQUFDdEgsS0FBSyxDQUFDO29CQUFFdE4sT0FBTzt3QkFBRWtCLFFBQVE7b0JBQVU7Z0JBQUU7YUFDcEQ7WUFFRCxPQUFPO2dCQUNMMUYsU0FBUztnQkFDVEMsU0FBUztnQkFDVG1ELE1BQU07b0JBQ0ppVyxhQUFhNVA7b0JBQ2I2UCxxQkFBcUJsUztvQkFDckJtUyxrQkFBa0JSO29CQUNsQlMsY0FBY1I7b0JBQ2R2RyxTQUFTLEdBQUdoSixNQUFNLGVBQWUsRUFBRXJDLGNBQWMsdUJBQXVCLEVBQUUyUixTQUFTLG9CQUFvQixFQUFFQyxRQUFRLGtCQUFrQixDQUFDO2dCQUN0STtZQUNGO1FBQ0YsRUFBRSxPQUFPalcsT0FBTztZQUNkLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUUcsc0JBQXNCUixNQUF5QixFQUFZO1FBQ2pFLE1BQU1PLGNBQWM7WUFDbEI7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBRUQsOENBQThDO1FBQzlDLElBQUlQLE9BQU9pRCxNQUFNLEtBQUssV0FBVztZQUMvQixPQUFPO2dCQUFDO2FBQXdFO1FBQ2xGLE9BQU8sSUFBSWpELE9BQU9pRCxNQUFNLEtBQUssWUFBWTtZQUN2QyxPQUFPO2dCQUFDO2dCQUFzRDthQUE0QztRQUM1RyxPQUFPLElBQUlqRCxPQUFPaUQsTUFBTSxLQUFLLFlBQVk7WUFDdkMsT0FBTztnQkFBQztnQkFBOEM7YUFBOEM7UUFDdEc7UUFFQSxPQUFPMUM7SUFDVDtJQUVBOztHQUVDLEdBQ0QsQUFBUXVDLHFCQUFxQlIsTUFBYyxFQUFZO1FBQ3JELE9BQVFBO1lBQ04sS0FBSztnQkFDSCxPQUFPO29CQUFDO2lCQUErRDtZQUN6RSxLQUFLO2dCQUNILE9BQU87b0JBQUM7aUJBQXFDO1lBQy9DLEtBQUs7Z0JBQ0gsT0FBTztvQkFBQztpQkFBMEQ7WUFDcEU7Z0JBQ0UsT0FBTztvQkFBQztpQkFBb0Q7UUFDaEU7SUFDRjtJQUVBLG1DQUFtQztJQUNuQyxvQ0FBb0M7SUFDcEMsbUNBQW1DO0lBRW5DOztHQUVDLEdBQ0QsTUFBY21ULG9CQUFvQjNWLEtBQWEsRUFBRU4sTUFBYyxFQUE0QjtRQUN6RixJQUFJO1lBQ0YsTUFBTXNYLGVBQWUsTUFBTSxJQUFJLENBQUNRLG9CQUFvQjtZQUVwRCwwQ0FBMEM7WUFDMUMsSUFBSXhYLE1BQU0yRyxRQUFRLENBQUMsY0FBZTNHLENBQUFBLE1BQU0yRyxRQUFRLENBQUMsVUFBVTNHLE1BQU0yRyxRQUFRLENBQUMsY0FBYSxHQUFJO2dCQUN6RixPQUFPO29CQUNMckcsU0FBUztvQkFDVEMsU0FBUztvQkFDVG1ELE1BQU1zVDtvQkFDTnZXLGFBQWE7d0JBQUM7d0JBQTJDO3FCQUE4QztnQkFDekc7WUFDRjtZQUVBLElBQUlULE1BQU0yRyxRQUFRLENBQUMsZUFBZTNHLE1BQU0yRyxRQUFRLENBQUMsaUJBQWlCM0csTUFBTTJHLFFBQVEsQ0FBQyxZQUFZO2dCQUMzRixNQUFNb1QsbUJBQW1CLE1BQU1wVixlQUFNLENBQUNDLE9BQU8sQ0FBQ3dOLEtBQUssQ0FBQztvQkFDbER0TixPQUFPO3dCQUFFZSxTQUFTOzRCQUFFbVUsS0FBSzt3QkFBSztvQkFBRTtnQkFDbEM7Z0JBQ0EsTUFBTUMscUJBQXFCakQsYUFBYWlCLEtBQUssR0FBRzhCO2dCQUVoRCxPQUFPO29CQUNMelosU0FBUztvQkFDVEMsU0FBUyxDQUFDLDRCQUE0QixFQUFFd1osaUJBQWlCLGFBQWEsRUFBRUUsbUJBQW1CLFlBQVksQ0FBQztvQkFDeEd2VyxNQUFNO3dCQUNKd1csWUFBWUg7d0JBQ1pJLGFBQWFGO3dCQUNiaEMsT0FBT2pCLGFBQWFpQixLQUFLO3dCQUN6QmlCLFdBQVcsR0FBRzlRLEtBQUtnUyxLQUFLLENBQUMsQUFBQ0wsbUJBQWlCL0MsYUFBYWlCLEtBQUssR0FBRSxLQUFLLGNBQWMsRUFBRTdQLEtBQUtnUyxLQUFLLENBQUMsQUFBQ0gscUJBQW1CakQsYUFBYWlCLEtBQUssR0FBRSxLQUFLLGFBQWEsQ0FBQztvQkFDNUo7Z0JBQ0Y7WUFDRjtZQUVBLE9BQU87Z0JBQ0wzWCxTQUFTO2dCQUNUQyxTQUFTLENBQUMsc0JBQXNCLEVBQUV5VyxhQUFhaUIsS0FBSyxDQUFDLGVBQWUsQ0FBQztnQkFDckV2VSxNQUFNc1Q7WUFDUjtRQUVGLEVBQUUsT0FBTzNULE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNxVixvQkFBb0I1VixLQUFhLEVBQUVOLE1BQWMsRUFBNEI7UUFDekYsSUFBSTtZQUNGLE1BQU11WCxnQkFBZ0IsTUFBTSxJQUFJLENBQUNRLHFCQUFxQjtZQUV0RCxPQUFPO2dCQUNMblgsU0FBUztnQkFDVEMsU0FBUyxDQUFDLGdDQUFnQyxDQUFDO2dCQUMzQ21ELE1BQU11VDtZQUNSO1FBQ0YsRUFBRSxPQUFPNVQsT0FBTztZQUNkLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY3NWLG9CQUFvQjdWLEtBQWEsRUFBRU4sTUFBYyxFQUE0QjtRQUN6RixJQUFJO1lBQ0YsTUFBTTBYLGdCQUFnQixNQUFNelMsZUFBTSxDQUFDMkgsUUFBUSxDQUFDaU0sT0FBTyxDQUFDO2dCQUNsREMsSUFBSTtvQkFBQztpQkFBUztnQkFDZEgsUUFBUTtvQkFBRWxTLElBQUk7Z0JBQUs7WUFDckI7WUFFQSxNQUFNa1UsaUJBQWlCLE1BQU0xVixlQUFNLENBQUMySCxRQUFRLENBQUM4RixLQUFLO1lBRWxELE9BQU87Z0JBQ0w5UixTQUFTO2dCQUNUQyxTQUFTLENBQUMsc0JBQXNCLEVBQUU4WixlQUFlLGdCQUFnQixDQUFDO2dCQUNsRTNXLE1BQU07b0JBQ0p1VSxPQUFPb0M7b0JBQ1BDLFVBQVVsRDtvQkFDVnJFLFNBQVMsQ0FBQyxTQUFTLEVBQUVzSCxlQUFlLHFDQUFxQyxFQUFFakQsY0FBY3VCLEdBQUcsQ0FBQzRCLENBQUFBLElBQUssR0FBR0EsRUFBRWxDLE1BQU0sQ0FBQ2xTLEVBQUUsQ0FBQyxDQUFDLEVBQUVvVSxFQUFFdlUsTUFBTSxFQUFFLEVBQUVKLElBQUksQ0FBQyxPQUFPO2dCQUM5STtZQUNGO1FBQ0YsRUFBRSxPQUFPdkMsT0FBTztZQUNkLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY3VWLGdCQUFnQjlWLEtBQWEsRUFBRU4sTUFBYyxFQUE0QjtRQUNyRixJQUFJO1lBQ0YsTUFBTXdYLFlBQVksTUFBTSxJQUFJLENBQUNRLGlCQUFpQjtZQUU5QyxPQUFPO2dCQUNMcFgsU0FBUztnQkFDVEMsU0FBUyxDQUFDLGlCQUFpQixFQUFFMlcsVUFBVWUsS0FBSyxDQUFDLFlBQVksQ0FBQztnQkFDMUR2VSxNQUFNd1Q7WUFDUjtRQUNGLEVBQUUsT0FBTzdULE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNpYSxtQkFBbUJ4YSxLQUFhLEVBQUVOLE1BQWMsRUFBNEI7UUFDeEYsSUFBSTtZQUNGLE1BQU15WCxrQkFBa0IsTUFBTSxJQUFJLENBQUNRLHVCQUF1QjtZQUUxRCxPQUFPO2dCQUNMclgsU0FBUztnQkFDVEMsU0FBUyxDQUFDLGdDQUFnQyxDQUFDO2dCQUMzQ21ELE1BQU15VDtZQUNSO1FBQ0YsRUFBRSxPQUFPOVQsT0FBTztZQUNkLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY3lWLG1CQUFtQmhXLEtBQWEsRUFBRU4sTUFBYyxFQUE0QjtRQUN4RixJQUFJO1lBQ0YsTUFBTSxDQUFDc1gsY0FBY0MsZUFBZUMsVUFBVSxHQUFHLE1BQU1JLFFBQVFDLEdBQUcsQ0FBQztnQkFDakUsSUFBSSxDQUFDQyxvQkFBb0I7Z0JBQ3pCLElBQUksQ0FBQ0MscUJBQXFCO2dCQUMxQixJQUFJLENBQUNDLGlCQUFpQjthQUN2QjtZQUVELE9BQU87Z0JBQ0xwWCxTQUFTO2dCQUNUQyxTQUFTLENBQUMsNEJBQTRCLENBQUM7Z0JBQ3ZDbUQsTUFBTTtvQkFDSmlHLFVBQVVxTjtvQkFDVm5OLFdBQVdvTjtvQkFDWGEsT0FBT1o7b0JBQ1BuRSxTQUFTLENBQUMsa0JBQWtCLEVBQUVpRSxhQUFhaUIsS0FBSyxDQUFDLFdBQVcsRUFBRWhCLGNBQWNnQixLQUFLLENBQUMsZ0JBQWdCLEVBQUVmLFVBQVVlLEtBQUssQ0FBQyxNQUFNLENBQUM7Z0JBQzdIO1lBQ0Y7UUFDRixFQUFFLE9BQU81VSxPQUFPO1lBQ2QsT0FBTztnQkFDTC9DLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0lBRUEsbUNBQW1DO0lBQ25DLDRCQUE0QjtJQUM1QixtQ0FBbUM7SUFFbkMsTUFBY2lYLHVCQUF1QjtRQUNuQyxNQUFNLENBQUNTLE9BQU93QyxRQUFRVixrQkFBa0JXLGVBQWUsR0FBRyxNQUFNcEQsUUFBUUMsR0FBRyxDQUFDO1lBQzFFNVMsZUFBTSxDQUFDQyxPQUFPLENBQUN3TixLQUFLO1lBQ3BCek4sZUFBTSxDQUFDQyxPQUFPLENBQUN3TixLQUFLLENBQUM7Z0JBQUV0TixPQUFPO29CQUFFa0IsUUFBUTtnQkFBUztZQUFFO1lBQ25EckIsZUFBTSxDQUFDQyxPQUFPLENBQUN3TixLQUFLLENBQUM7Z0JBQUV0TixPQUFPO29CQUFFZSxTQUFTO3dCQUFFbVUsS0FBSztvQkFBSztnQkFBRTtZQUFFO1lBQ3pEclYsZUFBTSxDQUFDQyxPQUFPLENBQUN3TixLQUFLLENBQUM7Z0JBQ25CdE4sT0FBTztvQkFDTHdDLFdBQVc7d0JBQ1RxVCxLQUFLLElBQUkvYSxLQUFLQSxLQUFLQyxHQUFHLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxNQUFNLGVBQWU7b0JBQ3RFO2dCQUNGO1lBQ0Y7U0FDRDtRQUVELE9BQU87WUFDTG9ZO1lBQ0F3QztZQUNBUCxZQUFZSDtZQUNaSSxhQUFhbEMsUUFBUThCO1lBQ3JCYSxlQUFlRjtRQUNqQjtJQUNGO0lBRUEsTUFBY2pELHdCQUF3QjtRQUNwQyxNQUFNLENBQUNvRCxZQUFZQyxVQUFVQyxjQUFjLEdBQUcsTUFBTXpELFFBQVFDLEdBQUcsQ0FBQztZQUM5RDVTLGVBQU0sQ0FBQ3lLLGFBQWEsQ0FBQ2dELEtBQUs7WUFDMUJ6TixlQUFNLENBQUM4SyxXQUFXLENBQUMyQyxLQUFLO1lBQ3hCek4sZUFBTSxDQUFDZ0wsZ0JBQWdCLENBQUN5QyxLQUFLO1NBQzlCO1FBRUQsTUFBTTZGLFFBQVE0QyxhQUFhQyxXQUFXQztRQUV0QyxPQUFPO1lBQ0w5QztZQUNBelQsT0FBT3FXO1lBQ1AxQixLQUFLMkI7WUFDTDFCLFVBQVUyQjtRQUNaO0lBQ0Y7SUFFQSxNQUFjckQsb0JBQW9CO1FBQ2hDLE1BQU0sQ0FBQ08sT0FBTytDLFdBQVdDLFNBQVNDLFFBQVEsR0FBRyxNQUFNNUQsUUFBUUMsR0FBRyxDQUFDO1lBQzdENVMsZUFBTSxDQUFDZ00sSUFBSSxDQUFDeUIsS0FBSztZQUNqQnpOLGVBQU0sQ0FBQ2dNLElBQUksQ0FBQ3lCLEtBQUssQ0FBQztnQkFBRXROLE9BQU87b0JBQUVrQixRQUFRO2dCQUFPO1lBQUU7WUFDOUNyQixlQUFNLENBQUNnTSxJQUFJLENBQUN5QixLQUFLLENBQUM7Z0JBQUV0TixPQUFPO29CQUFFa0IsUUFBUTtnQkFBTztZQUFFO1lBQzlDckIsZUFBTSxDQUFDZ00sSUFBSSxDQUFDeUIsS0FBSyxDQUFDO2dCQUNoQnROLE9BQU87b0JBQ0xrQixRQUFRO3dCQUFFZ1UsS0FBSztvQkFBTztvQkFDdEJqSixTQUFTO3dCQUFFb0ssSUFBSSxJQUFJdmI7b0JBQU87Z0JBQzVCO1lBQ0Y7U0FDRDtRQUVELE9BQU87WUFDTHFZO1lBQ0ErQztZQUNBQztZQUNBQztRQUNGO0lBQ0Y7SUFFQSxNQUFjdkQsMEJBQTBCO1FBQ3RDLElBQUk7WUFDRixNQUFNeUQsbUJBQW1CLE1BQU16VyxlQUFNLENBQUMwVyxlQUFlLENBQUNqSixLQUFLO1lBQzNELE1BQU1rSixhQUFhLE1BQU0zVyxlQUFNLENBQUMwVyxlQUFlLENBQUNqRCxTQUFTLENBQUM7Z0JBQ3hEbUQsTUFBTTtvQkFBRWxGLE9BQU87Z0JBQUs7WUFDdEI7WUFFQSxPQUFPO2dCQUNMbUYsa0JBQWtCSjtnQkFDbEJFLFlBQVlBLFdBQVdDLElBQUksQ0FBQ2xGLEtBQUssSUFBSTtnQkFDckNvRixjQUFjTCxtQkFBbUIsSUFBSSxBQUFDRSxDQUFBQSxXQUFXQyxJQUFJLENBQUNsRixLQUFLLElBQUksQ0FBQSxJQUFLK0UsbUJBQW1CO1lBQ3pGO1FBQ0YsRUFBRSxPQUFPL1gsT0FBTztZQUNkLE9BQU87Z0JBQ0xtWSxrQkFBa0I7Z0JBQ2xCRixZQUFZO2dCQUNaRyxjQUFjO2dCQUNkQyxNQUFNO1lBQ1I7UUFDRjtJQUNGO0lBRUEsbUNBQW1DO0lBQ25DLG9CQUFvQjtJQUNwQixtQ0FBbUM7SUFFbkM7O0dBRUMsR0FDRCxNQUFjM0gsY0FBYzRILFVBQWUsRUFBRWpjLE1BQWMsRUFBNEI7UUFDckYsSUFBSTtZQUNGLE1BQU0sRUFBRXdHLFNBQVMsRUFBRTNCLElBQUksRUFBRUMsS0FBSyxFQUFFQyxLQUFLLEVBQUVvQixPQUFPLEVBQUVDLEtBQUssRUFBRUUsTUFBTSxFQUFFLEdBQUcyVjtZQUVsRSxJQUFJLENBQUN6VixhQUFhLENBQUMxQixTQUFTLENBQUNELE1BQU07Z0JBQ2pDLE9BQU87b0JBQ0xqRSxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUFrRTtxQkFBNkI7Z0JBQy9HO1lBQ0Y7WUFFQSxtQkFBbUI7WUFDbkIsSUFBSW1FLFVBQVU7WUFDZCxJQUFJc0IsV0FBVztnQkFDYnRCLFVBQVUsTUFBTUQsZUFBTSxDQUFDQyxPQUFPLENBQUM0QixVQUFVLENBQUM7b0JBQUUxQixPQUFPO3dCQUFFcUIsSUFBSUQ7b0JBQVU7Z0JBQUU7WUFDdkUsT0FBTyxJQUFJMUIsT0FBTztnQkFDaEJJLFVBQVUsTUFBTUQsZUFBTSxDQUFDQyxPQUFPLENBQUNDLFNBQVMsQ0FBQztvQkFBRUMsT0FBTzt3QkFBRU47b0JBQU07Z0JBQUU7WUFDOUQsT0FBTyxJQUFJRCxNQUFNO2dCQUNmSyxVQUFVLE1BQU1ELGVBQU0sQ0FBQ0MsT0FBTyxDQUFDQyxTQUFTLENBQUM7b0JBQ3ZDQyxPQUFPO3dCQUNMQyxJQUFJOzRCQUNGO2dDQUFFUyxXQUFXO29DQUFFK0wsVUFBVWhOO29DQUFNaU4sTUFBTTtnQ0FBYzs0QkFBRTs0QkFDckQ7Z0NBQUU5TCxVQUFVO29DQUFFNkwsVUFBVWhOO29DQUFNaU4sTUFBTTtnQ0FBYzs0QkFBRTt5QkFDckQ7b0JBQ0g7Z0JBQ0Y7WUFDRjtZQUVBLElBQUksQ0FBQzVNLFNBQVM7Z0JBQ1osT0FBTztvQkFDTHRFLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7d0JBQXNDO3FCQUFtQztnQkFDekY7WUFDRjtZQUVBLHNCQUFzQjtZQUN0QixNQUFNbWIsZUFBb0IsQ0FBQztZQUMzQixJQUFJclgsTUFBTTtnQkFDUixNQUFNLENBQUNpQixXQUFXLEdBQUdxVyxjQUFjLEdBQUd0WCxLQUFLa0IsS0FBSyxDQUFDO2dCQUNqRG1XLGFBQWFwVyxTQUFTLEdBQUdBO2dCQUN6Qm9XLGFBQWFsVyxRQUFRLEdBQUdtVyxjQUFjalcsSUFBSSxDQUFDO1lBQzdDO1lBQ0EsSUFBSXBCLE9BQU9vWCxhQUFhcFgsS0FBSyxHQUFHQTtZQUNoQyxJQUFJQyxPQUFPbVgsYUFBYW5YLEtBQUssR0FBR0E7WUFDaEMsSUFBSW9CLFNBQVMrVixhQUFhL1YsT0FBTyxHQUFHQTtZQUNwQyxJQUFJQyxPQUFPOFYsYUFBYTlWLEtBQUssR0FBR0E7WUFDaEMsSUFBSUUsUUFBUTRWLGFBQWE1VixNQUFNLEdBQUdBO1lBRWxDLHFCQUFxQjtZQUNyQixNQUFNOFYsaUJBQWlCLE1BQU1uWCxlQUFNLENBQUNDLE9BQU8sQ0FBQ21YLE1BQU0sQ0FBQztnQkFDakRqWCxPQUFPO29CQUFFcUIsSUFBSXZCLFFBQVF1QixFQUFFO2dCQUFDO2dCQUN4QnpDLE1BQU1rWTtZQUNSO1lBRUE5YixjQUFNLENBQUNDLElBQUksQ0FBQyxnQ0FBZ0M7Z0JBQUVtRyxXQUFXdEIsUUFBUXVCLEVBQUU7Z0JBQUV6RztZQUFPO1lBRTVFLE9BQU87Z0JBQ0xZLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyxXQUFXLEVBQUV1YixlQUFldFcsU0FBUyxDQUFDLENBQUMsRUFBRXNXLGVBQWVwVyxRQUFRLENBQUMsdUJBQXVCLENBQUM7Z0JBQ25HaEMsTUFBTW9ZO2dCQUNOMVYsU0FBUztvQkFDUEYsV0FBVzRWLGVBQWUzVixFQUFFO29CQUM1QjZWLGVBQWU5VyxPQUFPQyxJQUFJLENBQUN5VztvQkFDM0JyWCxNQUFNLEdBQUd1WCxlQUFldFcsU0FBUyxDQUFDLENBQUMsRUFBRXNXLGVBQWVwVyxRQUFRLEVBQUU7b0JBQzlEbEIsT0FBT3NYLGVBQWV0WCxLQUFLO2dCQUM3QjtZQUNGO1FBRUYsRUFBRSxPQUFPbkIsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLHlCQUF5QjtnQkFBRUEsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQVFzWTtnQkFBWWpjO1lBQU87WUFFMUgsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQStCO2lCQUE4QjtZQUM3RTtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWN1VCxlQUFlMkgsVUFBZSxFQUFFamMsTUFBYyxFQUE0QjtRQUN0RixJQUFJO1lBQ0YsTUFBTSxFQUFFb08sVUFBVSxFQUFFdkosSUFBSSxFQUFFb0gsV0FBVyxFQUFFM0YsTUFBTSxFQUFFLEdBQUcyVjtZQUVsRCxJQUFJLENBQUM3TixjQUFjLENBQUN2SixNQUFNO2dCQUN4QixPQUFPO29CQUNMakUsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBbUU7cUJBQThCO2dCQUNqSDtZQUNGO1lBRUEsb0JBQW9CO1lBQ3BCLElBQUk2TCxXQUFXO1lBQ2YsSUFBSXdCLFlBQVk7Z0JBQ2R4QixXQUFXLE1BQU0zSCxlQUFNLENBQUMySCxRQUFRLENBQUM5RixVQUFVLENBQUM7b0JBQUUxQixPQUFPO3dCQUFFcUIsSUFBSTJIO29CQUFXO2dCQUFFO1lBQzFFLE9BQU8sSUFBSXZKLE1BQU07Z0JBQ2YrSCxXQUFXLE1BQU0zSCxlQUFNLENBQUMySCxRQUFRLENBQUN6SCxTQUFTLENBQUM7b0JBQ3pDQyxPQUFPO3dCQUFFUCxNQUFNOzRCQUFFZ04sVUFBVWhOOzRCQUFNaU4sTUFBTTt3QkFBYztvQkFBRTtnQkFDekQ7WUFDRjtZQUVBLElBQUksQ0FBQ2xGLFVBQVU7Z0JBQ2IsT0FBTztvQkFDTGhNLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7d0JBQXVDO3FCQUEyQjtnQkFDbEY7WUFDRjtZQUVBLHNCQUFzQjtZQUN0QixNQUFNbWIsZUFBb0IsQ0FBQztZQUMzQixJQUFJclgsUUFBUUEsU0FBUytILFNBQVMvSCxJQUFJLEVBQUVxWCxhQUFhclgsSUFBSSxHQUFHQTtZQUN4RCxJQUFJb0gsYUFBYWlRLGFBQWFqUSxXQUFXLEdBQUdBO1lBQzVDLElBQUkzRixVQUFVO2dCQUFDO2dCQUFVO2dCQUFZO2dCQUFVO2FBQVcsQ0FBQ1csUUFBUSxDQUFDWCxTQUFTO2dCQUMzRTRWLGFBQWE1VixNQUFNLEdBQUdBO1lBQ3hCO1lBRUEsSUFBSWQsT0FBT0MsSUFBSSxDQUFDeVcsY0FBY3hXLE1BQU0sS0FBSyxHQUFHO2dCQUMxQyxPQUFPO29CQUNMOUUsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBK0M7cUJBQXVDO2dCQUN0RztZQUNGO1lBRUEsc0JBQXNCO1lBQ3RCLE1BQU13YixrQkFBa0IsTUFBTXRYLGVBQU0sQ0FBQzJILFFBQVEsQ0FBQ3lQLE1BQU0sQ0FBQztnQkFDbkRqWCxPQUFPO29CQUFFcUIsSUFBSW1HLFNBQVNuRyxFQUFFO2dCQUFDO2dCQUN6QnpDLE1BQU1rWTtZQUNSO1lBRUE5YixjQUFNLENBQUNDLElBQUksQ0FBQyxpQ0FBaUM7Z0JBQUUrTixZQUFZeEIsU0FBU25HLEVBQUU7Z0JBQUV6RztZQUFPO1lBRS9FLE9BQU87Z0JBQ0xZLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyxZQUFZLEVBQUUwYixnQkFBZ0IxWCxJQUFJLENBQUMsdUJBQXVCLENBQUM7Z0JBQ3JFYixNQUFNdVk7Z0JBQ043VixTQUFTO29CQUNQMEgsWUFBWW1PLGdCQUFnQjlWLEVBQUU7b0JBQzlCNlYsZUFBZTlXLE9BQU9DLElBQUksQ0FBQ3lXO29CQUMzQnJYLE1BQU0wWCxnQkFBZ0IxWCxJQUFJO29CQUMxQnlCLFFBQVFpVyxnQkFBZ0JqVyxNQUFNO2dCQUNoQztZQUNGO1FBRUYsRUFBRSxPQUFPM0MsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLDBCQUEwQjtnQkFBRUEsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQVFzWTtnQkFBWWpjO1lBQU87WUFFM0gsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQWdDO2lCQUFvRTtZQUNwSDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWN3VCxlQUFlMEgsVUFBZSxFQUFFamMsTUFBYyxFQUE0QjtRQUN0RixJQUFJO1lBQ0YsTUFBTSxFQUFFbVEsVUFBVSxFQUFFdEwsSUFBSSxFQUFFb0gsV0FBVyxFQUFFNEQsT0FBTyxFQUFFdkosTUFBTSxFQUFFOEUsT0FBTyxPQUFPLEVBQUUsR0FBRzZRO1lBRTNFLElBQUksQ0FBQzlMLGNBQWMsQ0FBQ3RMLE1BQU07Z0JBQ3hCLE9BQU87b0JBQ0xqRSxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUE4RDtxQkFBOEI7Z0JBQzVHO1lBQ0Y7WUFFQSxrQ0FBa0M7WUFDbEMsSUFBSTBPLFdBQVc7WUFDZixJQUFJK00sUUFBUTtZQUVaLElBQUlwUixTQUFTLE9BQU9vUixRQUFRO2lCQUN2QixJQUFJcFIsU0FBUyxZQUFZb1IsUUFBUTtZQUV0QyxJQUFJck0sWUFBWTtnQkFDZFYsV0FBVyxNQUFNLEFBQUN4SyxlQUFNLEFBQVEsQ0FBQ3VYLE1BQU0sQ0FBQzFWLFVBQVUsQ0FBQztvQkFBRTFCLE9BQU87d0JBQUVxQixJQUFJMEo7b0JBQVc7Z0JBQUU7WUFDakYsT0FBTyxJQUFJdEwsTUFBTTtnQkFDZjRLLFdBQVcsTUFBTSxBQUFDeEssZUFBTSxBQUFRLENBQUN1WCxNQUFNLENBQUNyWCxTQUFTLENBQUM7b0JBQ2hEQyxPQUFPO3dCQUFFUCxNQUFNOzRCQUFFZ04sVUFBVWhOOzRCQUFNaU4sTUFBTTt3QkFBYztvQkFBRTtnQkFDekQ7WUFDRjtZQUVBLElBQUksQ0FBQ3JDLFVBQVU7Z0JBQ2IsT0FBTztvQkFDTDdPLFNBQVM7b0JBQ1RDLFNBQVMsR0FBR3VLLEtBQUtnRixXQUFXLEdBQUcsK0RBQStELENBQUM7b0JBQy9GclAsYUFBYTt3QkFBQzt3QkFBdUM7d0JBQTRCLENBQUMsa0RBQWtELENBQUM7cUJBQUM7Z0JBQ3hJO1lBQ0Y7WUFFQSxzQkFBc0I7WUFDdEIsTUFBTW1iLGVBQW9CLENBQUM7WUFDM0IsSUFBSXJYLFFBQVFBLFNBQVM0SyxTQUFTNUssSUFBSSxFQUFFcVgsYUFBYXJYLElBQUksR0FBR0E7WUFDeEQsSUFBSW9ILGFBQWFpUSxhQUFhalEsV0FBVyxHQUFHQTtZQUM1QyxJQUFJNEQsU0FBU3FNLGFBQWFyTSxPQUFPLEdBQUdBO1lBQ3BDLElBQUl2SixVQUFVO2dCQUFDO2dCQUFTO2dCQUFVO2dCQUFVO2FBQVksQ0FBQ1csUUFBUSxDQUFDWCxTQUFTO2dCQUN6RTRWLGFBQWE1VixNQUFNLEdBQUdBO1lBQ3hCO1lBRUEsSUFBSWQsT0FBT0MsSUFBSSxDQUFDeVcsY0FBY3hXLE1BQU0sS0FBSyxHQUFHO2dCQUMxQyxPQUFPO29CQUNMOUUsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBK0M7cUJBQWdEO2dCQUMvRztZQUNGO1lBRUEsc0JBQXNCO1lBQ3RCLE1BQU0wYixrQkFBa0IsTUFBTSxBQUFDeFgsZUFBTSxBQUFRLENBQUN1WCxNQUFNLENBQUNILE1BQU0sQ0FBQztnQkFDMURqWCxPQUFPO29CQUFFcUIsSUFBSWdKLFNBQVNoSixFQUFFO2dCQUFDO2dCQUN6QnpDLE1BQU1rWTtZQUNSO1lBRUE5YixjQUFNLENBQUNDLElBQUksQ0FBQyxpQ0FBaUM7Z0JBQUU4UCxZQUFZVixTQUFTaEosRUFBRTtnQkFBRTJFO2dCQUFNcEw7WUFBTztZQUVyRixPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsRUFBRSxFQUFFdUssS0FBS2dGLFdBQVcsR0FBRyxXQUFXLEVBQUVxTSxnQkFBZ0I1WCxJQUFJLENBQUMsdUJBQXVCLENBQUM7Z0JBQzNGYixNQUFNeVk7Z0JBQ04vVixTQUFTO29CQUNQeUosWUFBWXNNLGdCQUFnQmhXLEVBQUU7b0JBQzlCMkU7b0JBQ0FrUixlQUFlOVcsT0FBT0MsSUFBSSxDQUFDeVc7b0JBQzNCclgsTUFBTTRYLGdCQUFnQjVYLElBQUk7b0JBQzFCeUIsUUFBUW1XLGdCQUFnQm5XLE1BQU07Z0JBQ2hDO1lBQ0Y7UUFFRixFQUFFLE9BQU8zQyxPQUFPO1lBQ2R2RCxjQUFNLENBQUN1RCxLQUFLLENBQUMsMEJBQTBCO2dCQUFFQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFBUXNZO2dCQUFZamM7WUFBTztZQUUzSCxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFBQztvQkFBZ0M7aUJBQWtFO1lBQ2xIO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY3lULFdBQVd5SCxVQUFlLEVBQUVqYyxNQUFjLEVBQTRCO1FBQ2xGLElBQUk7WUFDRixNQUFNLEVBQUVzUixNQUFNLEVBQUVKLEtBQUssRUFBRWpGLFdBQVcsRUFBRTNGLE1BQU0sRUFBRTZLLFFBQVEsRUFBRUUsT0FBTyxFQUFFWixRQUFRLEVBQUUsR0FBR3dMO1lBRTVFLElBQUksQ0FBQzNLLFVBQVUsQ0FBQ0osT0FBTztnQkFDckIsT0FBTztvQkFDTHRRLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7d0JBQXlEO3FCQUEwQjtnQkFDbkc7WUFDRjtZQUVBLGdCQUFnQjtZQUNoQixJQUFJa1EsT0FBTztZQUNYLElBQUlLLFFBQVE7Z0JBQ1ZMLE9BQU8sTUFBTWhNLGVBQU0sQ0FBQ2dNLElBQUksQ0FBQ25LLFVBQVUsQ0FBQztvQkFBRTFCLE9BQU87d0JBQUVxQixJQUFJNks7b0JBQU87Z0JBQUU7WUFDOUQsT0FBTyxJQUFJSixPQUFPO2dCQUNoQkQsT0FBTyxNQUFNaE0sZUFBTSxDQUFDZ00sSUFBSSxDQUFDOUwsU0FBUyxDQUFDO29CQUNqQ0MsT0FBTzt3QkFBRThMLE9BQU87NEJBQUVXLFVBQVVYOzRCQUFPWSxNQUFNO3dCQUFjO29CQUFFO2dCQUMzRDtZQUNGO1lBRUEsSUFBSSxDQUFDYixNQUFNO2dCQUNULE9BQU87b0JBQ0xyUSxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUFtQztxQkFBd0I7Z0JBQzNFO1lBQ0Y7WUFFQSxzQkFBc0I7WUFDdEIsTUFBTW1iLGVBQW9CLENBQUM7WUFDM0IsSUFBSWhMLFNBQVNBLFVBQVVELEtBQUtDLEtBQUssRUFBRWdMLGFBQWFoTCxLQUFLLEdBQUdBO1lBQ3hELElBQUlqRixhQUFhaVEsYUFBYWpRLFdBQVcsR0FBR0E7WUFDNUMsSUFBSTNGLFVBQVU7Z0JBQUM7Z0JBQVE7Z0JBQWU7Z0JBQVU7YUFBTyxDQUFDVyxRQUFRLENBQUNYLFNBQVM7Z0JBQ3hFNFYsYUFBYTVWLE1BQU0sR0FBR0E7WUFDeEI7WUFDQSxJQUFJNkssWUFBWTtnQkFBQztnQkFBTztnQkFBVTtnQkFBUTthQUFTLENBQUNsSyxRQUFRLENBQUNrSyxXQUFXO2dCQUN0RStLLGFBQWEvSyxRQUFRLEdBQUdBO1lBQzFCO1lBQ0EsSUFBSUUsU0FBUzZLLGFBQWE3SyxPQUFPLEdBQUcsSUFBSW5SLEtBQUttUjtZQUU3Qyx5QkFBeUI7WUFDekIsSUFBSVosVUFBVTtnQkFDWixNQUFNRSxjQUFzQztvQkFDMUMsdUJBQXVCO29CQUN2QixrQkFBa0I7b0JBQ2xCLGFBQWE7b0JBQ2IsU0FBUztvQkFDVCxlQUFlO29CQUNmLFlBQVk7b0JBQ1osUUFBUTtnQkFDVjtnQkFFQSxNQUFNQyxxQkFBcUJILFNBQVNwTixXQUFXO2dCQUMvQyxNQUFNd04sYUFBYUYsV0FBVyxDQUFDQyxtQkFBbUI7Z0JBRWxELE1BQU04TCxlQUFlLE1BQU16WCxlQUFNLENBQUM0QixJQUFJLENBQUMxQixTQUFTLENBQUM7b0JBQy9DQyxPQUFPO3dCQUNMQyxJQUFJOzRCQUNGO2dDQUFFUixNQUFNO29DQUFFZ04sVUFBVXBCO29DQUFVcUIsTUFBTTtnQ0FBYzs0QkFBRTs0QkFDcEQ7Z0NBQUVoTixPQUFPO29DQUFFK00sVUFBVXBCO29DQUFVcUIsTUFBTTtnQ0FBYzs0QkFBRTsrQkFDakRqQixhQUFhO2dDQUFDO29DQUFFN0osTUFBTTZKO2dDQUFrQjs2QkFBRSxHQUFHLEVBQUU7eUJBQ3BEO3dCQUNEbkosVUFBVTtvQkFDWjtnQkFDRjtnQkFFQSxJQUFJZ1YsY0FBYztvQkFDaEJSLGFBQWEzTCxVQUFVLEdBQUdtTSxhQUFhalcsRUFBRTtnQkFDM0M7WUFDRjtZQUVBLElBQUlqQixPQUFPQyxJQUFJLENBQUN5VyxjQUFjeFcsTUFBTSxLQUFLLEdBQUc7Z0JBQzFDLE9BQU87b0JBQ0w5RSxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUF5QztxQkFBNEQ7Z0JBQ3JIO1lBQ0Y7WUFFQSxrQkFBa0I7WUFDbEIsTUFBTTRiLGNBQWMsTUFBTTFYLGVBQU0sQ0FBQ2dNLElBQUksQ0FBQ29MLE1BQU0sQ0FBQztnQkFDM0NqWCxPQUFPO29CQUFFcUIsSUFBSXdLLEtBQUt4SyxFQUFFO2dCQUFDO2dCQUNyQnpDLE1BQU1rWTtnQkFDTmxKLFNBQVM7b0JBQ1B2QyxVQUFVO3dCQUFFMUosUUFBUTs0QkFBRWxDLE1BQU07d0JBQUs7b0JBQUU7Z0JBQ3JDO1lBQ0Y7WUFFQXpFLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLDZCQUE2QjtnQkFBRWlSLFFBQVFMLEtBQUt4SyxFQUFFO2dCQUFFekc7WUFBTztZQUVuRSxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsUUFBUSxFQUFFOGIsWUFBWXpMLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQztnQkFDOURsTixNQUFNMlk7Z0JBQ05qVyxTQUFTO29CQUNQNEssUUFBUXFMLFlBQVlsVyxFQUFFO29CQUN0QjZWLGVBQWU5VyxPQUFPQyxJQUFJLENBQUN5VztvQkFDM0JoTCxPQUFPeUwsWUFBWXpMLEtBQUs7b0JBQ3hCNUssUUFBUXFXLFlBQVlyVyxNQUFNO29CQUMxQjZLLFVBQVV3TCxZQUFZeEwsUUFBUTtvQkFDOUJWLFVBQVVrTSxZQUFZbE0sUUFBUSxFQUFFNUw7Z0JBQ2xDO1lBQ0Y7UUFFRixFQUFFLE9BQU9sQixPQUFPO1lBQ2R2RCxjQUFNLENBQUN1RCxLQUFLLENBQUMsc0JBQXNCO2dCQUFFQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFBUXNZO2dCQUFZamM7WUFBTztZQUV2SCxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFBQztvQkFBNEI7aUJBQTBDO1lBQ3RGO1FBQ0Y7SUFDRjtJQUVBLHVEQUF1RDtJQUN2RCxNQUFjMFQsY0FBY3pRLElBQVMsRUFBRWhFLE1BQWMsRUFBNEI7UUFDL0UsSUFBSTtZQUNGLE1BQU02VyxZQUFZN1MsS0FBSzZTLFNBQVMsSUFBSTdTLEtBQUt5QyxFQUFFO1lBQzNDLE1BQU04UCxjQUFjdlMsS0FBS2EsSUFBSTtZQUU3QixJQUFJLENBQUNnUyxhQUFhLENBQUNOLGFBQWE7Z0JBQzlCLE9BQU87b0JBQ0wzVixTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUF1QztxQkFBNkI7Z0JBQ3BGO1lBQ0Y7WUFFQSxtQkFBbUI7WUFDbkIsSUFBSTZWLFVBQVU7WUFDZCxJQUFJQyxXQUFXO2dCQUNiRCxVQUFVLE1BQU0zUixlQUFNLENBQUMyUixPQUFPLENBQUM5UCxVQUFVLENBQUM7b0JBQUUxQixPQUFPO3dCQUFFcUIsSUFBSW9RO29CQUFVO2dCQUFFO1lBQ3ZFLE9BQU8sSUFBSU4sYUFBYTtnQkFDdEJLLFVBQVUsTUFBTTNSLGVBQU0sQ0FBQzJSLE9BQU8sQ0FBQ3pSLFNBQVMsQ0FBQztvQkFDdkNDLE9BQU87d0JBQUVQLE1BQU07NEJBQUVnTixVQUFVMEU7NEJBQWF6RSxNQUFNO3dCQUFjO29CQUFFO2dCQUNoRTtZQUNGO1lBRUEsSUFBSSxDQUFDOEUsU0FBUztnQkFDWixPQUFPO29CQUNMaFcsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBc0M7cUJBQTBCO2dCQUNoRjtZQUNGO1lBRUEsc0JBQXNCO1lBQ3RCLE1BQU1tYixlQUFvQixDQUFDO1lBQzNCLElBQUlsWSxLQUFLYSxJQUFJLElBQUliLEtBQUthLElBQUksS0FBSytSLFFBQVEvUixJQUFJLEVBQUVxWCxhQUFhclgsSUFBSSxHQUFHYixLQUFLYSxJQUFJO1lBQzFFLElBQUliLEtBQUtpSSxXQUFXLEVBQUVpUSxhQUFhalEsV0FBVyxHQUFHakksS0FBS2lJLFdBQVc7WUFDakUsSUFBSWpJLEtBQUt3UyxLQUFLLEVBQUUwRixhQUFhMUYsS0FBSyxHQUFHLE9BQU94UyxLQUFLd1MsS0FBSyxLQUFLLFdBQVd4UyxLQUFLd1MsS0FBSyxHQUFHekosS0FBS0MsU0FBUyxDQUFDaEosS0FBS3dTLEtBQUs7WUFFNUcsSUFBSWhSLE9BQU9DLElBQUksQ0FBQ3lXLGNBQWN4VyxNQUFNLEtBQUssR0FBRztnQkFDMUMsT0FBTztvQkFDTDlFLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7cUJBQXNEO2dCQUN0RTtZQUNGO1lBRUEsTUFBTTZiLGlCQUFpQixNQUFNM1gsZUFBTSxDQUFDMlIsT0FBTyxDQUFDeUYsTUFBTSxDQUFDO2dCQUNqRGpYLE9BQU87b0JBQUVxQixJQUFJbVEsUUFBUW5RLEVBQUU7Z0JBQUM7Z0JBQ3hCekMsTUFBTWtZO1lBQ1I7WUFFQTliLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLGdDQUFnQztnQkFBRXdXLFdBQVdELFFBQVFuUSxFQUFFO2dCQUFFekc7WUFBTztZQUU1RSxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsV0FBVyxFQUFFK2IsZUFBZS9YLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztnQkFDbkViLE1BQU00WTtnQkFDTmxXLFNBQVM7b0JBQ1BtUSxXQUFXK0YsZUFBZW5XLEVBQUU7b0JBQzVCNUIsTUFBTStYLGVBQWUvWCxJQUFJO29CQUN6QmdZLFNBQVNyWCxPQUFPQyxJQUFJLENBQUN5VztnQkFDdkI7WUFDRjtRQUVGLEVBQUUsT0FBT3ZZLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyx5QkFBeUI7Z0JBQUVBLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBR2lELE9BQU9IO2dCQUFRSztnQkFBTWhFO1lBQU87WUFFcEgsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQStCO2lCQUFnQztZQUMvRTtRQUNGO0lBQ0Y7SUFFQSxNQUFjMlQsZUFBZTFRLElBQVMsRUFBRWhFLE1BQWMsRUFBNEI7UUFDaEYsSUFBSTtZQUNGLE1BQU1xWCxhQUFhclQsS0FBS3FULFVBQVUsSUFBSXJULEtBQUt5QyxFQUFFO1lBQzdDLE1BQU1zUSxlQUFlL1MsS0FBS2EsSUFBSTtZQUM5QixNQUFNaVMsZUFBZTlTLEtBQUtvSCxJQUFJLElBQUk7WUFFbEMsSUFBSSxDQUFDaU0sY0FBYyxDQUFDTixjQUFjO2dCQUNoQyxPQUFPO29CQUNMblcsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBOEM7cUJBQThCO2dCQUM1RjtZQUNGO1lBRUEsSUFBSXdTLFdBQVc7WUFFZixrQ0FBa0M7WUFDbEMsSUFBSXVELGlCQUFpQixTQUFTO2dCQUM1QixJQUFJTyxZQUFZO29CQUNkOUQsV0FBVyxNQUFNdE8sZUFBTSxDQUFDK1IsYUFBYSxDQUFDbFEsVUFBVSxDQUFDO3dCQUFFMUIsT0FBTzs0QkFBRXFCLElBQUk0UTt3QkFBVztvQkFBRTtnQkFDL0UsT0FBTyxJQUFJTixjQUFjO29CQUN2QnhELFdBQVcsTUFBTXRPLGVBQU0sQ0FBQytSLGFBQWEsQ0FBQzdSLFNBQVMsQ0FBQzt3QkFDOUNDLE9BQU87NEJBQUVQLE1BQU07Z0NBQUVnTixVQUFVa0Y7Z0NBQWNqRixNQUFNOzRCQUFjO3dCQUFFO29CQUNqRTtnQkFDRjtZQUNGLE9BQU8sSUFBSWdGLGlCQUFpQixPQUFPO2dCQUNqQyxJQUFJTyxZQUFZO29CQUNkOUQsV0FBVyxNQUFNdE8sZUFBTSxDQUFDa1MsV0FBVyxDQUFDclEsVUFBVSxDQUFDO3dCQUFFMUIsT0FBTzs0QkFBRXFCLElBQUk0UTt3QkFBVztvQkFBRTtnQkFDN0UsT0FBTyxJQUFJTixjQUFjO29CQUN2QnhELFdBQVcsTUFBTXRPLGVBQU0sQ0FBQ2tTLFdBQVcsQ0FBQ2hTLFNBQVMsQ0FBQzt3QkFDNUNDLE9BQU87NEJBQUVQLE1BQU07Z0NBQUVnTixVQUFVa0Y7Z0NBQWNqRixNQUFNOzRCQUFjO3dCQUFFO29CQUNqRTtnQkFDRjtZQUNGLE9BQU8sSUFBSWdGLGlCQUFpQixZQUFZO2dCQUN0QyxJQUFJTyxZQUFZO29CQUNkOUQsV0FBVyxNQUFNdE8sZUFBTSxDQUFDbVMsZ0JBQWdCLENBQUN0USxVQUFVLENBQUM7d0JBQUUxQixPQUFPOzRCQUFFcUIsSUFBSTRRO3dCQUFXO29CQUFFO2dCQUNsRixPQUFPLElBQUlOLGNBQWM7b0JBQ3ZCeEQsV0FBVyxNQUFNdE8sZUFBTSxDQUFDbVMsZ0JBQWdCLENBQUNqUyxTQUFTLENBQUM7d0JBQ2pEQyxPQUFPOzRCQUFFUCxNQUFNO2dDQUFFZ04sVUFBVWtGO2dDQUFjakYsTUFBTTs0QkFBYzt3QkFBRTtvQkFDakU7Z0JBQ0Y7WUFDRjtZQUVBLElBQUksQ0FBQ3lCLFVBQVU7Z0JBQ2IsT0FBTztvQkFDTDNTLFNBQVM7b0JBQ1RDLFNBQVMsR0FBR2lXLGFBQWEsK0RBQStELENBQUM7b0JBQ3pGL1YsYUFBYTt3QkFBQzt3QkFBdUM7cUJBQW9DO2dCQUMzRjtZQUNGO1lBRUEsc0JBQXNCO1lBQ3RCLE1BQU1tYixlQUFvQixDQUFDO1lBQzNCLElBQUlsWSxLQUFLYSxJQUFJLElBQUliLEtBQUthLElBQUksS0FBSzBPLFNBQVMxTyxJQUFJLEVBQUVxWCxhQUFhclgsSUFBSSxHQUFHYixLQUFLYSxJQUFJO1lBQzNFLElBQUliLEtBQUtpSSxXQUFXLEVBQUVpUSxhQUFhalEsV0FBVyxHQUFHakksS0FBS2lJLFdBQVc7WUFDakUsSUFBSWpJLEtBQUs2TCxPQUFPLEVBQUVxTSxhQUFhck0sT0FBTyxHQUFHN0wsS0FBSzZMLE9BQU87WUFFckQsdUJBQXVCO1lBQ3ZCLElBQUlpSCxpQkFBaUIsU0FBUztnQkFDNUIsSUFBSTlTLEtBQUsyTCxPQUFPLEVBQUV1TSxhQUFhdk0sT0FBTyxHQUFHM0wsS0FBSzJMLE9BQU87Z0JBQ3JELElBQUkzTCxLQUFLaVQsV0FBVyxFQUFFaUYsYUFBYWpGLFdBQVcsR0FBR2pULEtBQUtpVCxXQUFXO2dCQUNqRSxJQUFJalQsS0FBS2tULFFBQVEsRUFBRWdGLGFBQWFoRixRQUFRLEdBQUdsVCxLQUFLa1QsUUFBUTtZQUMxRCxPQUFPO2dCQUNMLElBQUlsVCxLQUFLb0ksU0FBUyxFQUFFOFAsYUFBYTlQLFNBQVMsR0FBRyxPQUFPcEksS0FBS29JLFNBQVMsS0FBSyxXQUFXcEksS0FBS29JLFNBQVMsR0FBR1csS0FBS0MsU0FBUyxDQUFDaEosS0FBS29JLFNBQVM7Z0JBQ2hJLElBQUlwSSxLQUFLa1QsUUFBUSxFQUFFZ0YsYUFBYWhGLFFBQVEsR0FBR2xULEtBQUtrVCxRQUFRO1lBQzFEO1lBRUEsSUFBSTFSLE9BQU9DLElBQUksQ0FBQ3lXLGNBQWN4VyxNQUFNLEtBQUssR0FBRztnQkFDMUMsT0FBTztvQkFDTDlFLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7cUJBQXVEO2dCQUN2RTtZQUNGO1lBRUEsSUFBSStiO1lBQ0osSUFBSWhHLGlCQUFpQixTQUFTO2dCQUM1QmdHLGtCQUFrQixNQUFNN1gsZUFBTSxDQUFDK1IsYUFBYSxDQUFDcUYsTUFBTSxDQUFDO29CQUNsRGpYLE9BQU87d0JBQUVxQixJQUFJOE0sU0FBUzlNLEVBQUU7b0JBQUM7b0JBQ3pCekMsTUFBTWtZO2dCQUNSO1lBQ0YsT0FBTyxJQUFJcEYsaUJBQWlCLE9BQU87Z0JBQ2pDZ0csa0JBQWtCLE1BQU03WCxlQUFNLENBQUNrUyxXQUFXLENBQUNrRixNQUFNLENBQUM7b0JBQ2hEalgsT0FBTzt3QkFBRXFCLElBQUk4TSxTQUFTOU0sRUFBRTtvQkFBQztvQkFDekJ6QyxNQUFNa1k7Z0JBQ1I7WUFDRixPQUFPLElBQUlwRixpQkFBaUIsWUFBWTtnQkFDdENnRyxrQkFBa0IsTUFBTTdYLGVBQU0sQ0FBQ21TLGdCQUFnQixDQUFDaUYsTUFBTSxDQUFDO29CQUNyRGpYLE9BQU87d0JBQUVxQixJQUFJOE0sU0FBUzlNLEVBQUU7b0JBQUM7b0JBQ3pCekMsTUFBTWtZO2dCQUNSO1lBQ0Y7WUFFQTliLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLGlDQUFpQztnQkFBRWdYLFlBQVk5RCxTQUFTOU0sRUFBRTtnQkFBRTJFLE1BQU0wTDtnQkFBYzlXO1lBQU87WUFFbkcsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUyxDQUFDLEVBQUUsRUFBRWlXLGFBQWExRyxXQUFXLEdBQUcsV0FBVyxFQUFFME0sZ0JBQWdCalksSUFBSSxDQUFDLHVCQUF1QixDQUFDO2dCQUNuR2IsTUFBTThZO2dCQUNOcFcsU0FBUztvQkFDUDJRLFlBQVl5RixnQkFBZ0JyVyxFQUFFO29CQUM5QjVCLE1BQU1pWSxnQkFBZ0JqWSxJQUFJO29CQUMxQnVHLE1BQU0wTDtvQkFDTitGLFNBQVNyWCxPQUFPQyxJQUFJLENBQUN5VztnQkFDdkI7WUFDRjtRQUVGLEVBQUUsT0FBT3ZZLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQywwQkFBMEI7Z0JBQUVBLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBR2lELE9BQU9IO2dCQUFRSztnQkFBTWhFO1lBQU87WUFFckgsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQWdDO2lCQUFnQztZQUNoRjtRQUNGO0lBQ0Y7SUFFQSxtQ0FBbUM7SUFDbkMsc0JBQXNCO0lBQ3RCLG1DQUFtQztJQUVuQzs7R0FFQyxHQUNELE1BQWNnVSxjQUFjZ0ksVUFBZSxFQUFFL2MsTUFBYyxFQUE0QjtRQUNyRixJQUFJO1lBQ0YsTUFBTSxFQUFFd0csU0FBUyxFQUFFMUIsS0FBSyxFQUFFRCxJQUFJLEVBQUUsR0FBR2tZO1lBRW5DLElBQUksQ0FBQ3ZXLGFBQWEsQ0FBQzFCLFNBQVMsQ0FBQ0QsTUFBTTtnQkFDakMsT0FBTztvQkFDTGpFLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7d0JBQTBDO3FCQUE2QjtnQkFDdkY7WUFDRjtZQUVBLG1CQUFtQjtZQUNuQixJQUFJbUUsVUFBVTtZQUNkLElBQUlzQixXQUFXO2dCQUNidEIsVUFBVSxNQUFNRCxlQUFNLENBQUNDLE9BQU8sQ0FBQzRCLFVBQVUsQ0FBQztvQkFBRTFCLE9BQU87d0JBQUVxQixJQUFJRDtvQkFBVTtnQkFBRTtZQUN2RSxPQUFPLElBQUkxQixPQUFPO2dCQUNoQkksVUFBVSxNQUFNRCxlQUFNLENBQUNDLE9BQU8sQ0FBQ0MsU0FBUyxDQUFDO29CQUFFQyxPQUFPO3dCQUFFTjtvQkFBTTtnQkFBRTtZQUM5RCxPQUFPLElBQUlELE1BQU07Z0JBQ2ZLLFVBQVUsTUFBTUQsZUFBTSxDQUFDQyxPQUFPLENBQUNDLFNBQVMsQ0FBQztvQkFDdkNDLE9BQU87d0JBQ0xDLElBQUk7NEJBQ0Y7Z0NBQUVTLFdBQVc7b0NBQUUrTCxVQUFVaE47b0NBQU1pTixNQUFNO2dDQUFjOzRCQUFFOzRCQUNyRDtnQ0FBRTlMLFVBQVU7b0NBQUU2TCxVQUFVaE47b0NBQU1pTixNQUFNO2dDQUFjOzRCQUFFO3lCQUNyRDtvQkFDSDtnQkFDRjtZQUNGO1lBRUEsSUFBSSxDQUFDNU0sU0FBUztnQkFDWixPQUFPO29CQUNMdEUsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQztxQkFBbUM7Z0JBQ25EO1lBQ0Y7WUFFQSxxQkFBcUI7WUFDckIsTUFBTWtFLGVBQU0sQ0FBQ0MsT0FBTyxDQUFDOFgsTUFBTSxDQUFDO2dCQUFFNVgsT0FBTztvQkFBRXFCLElBQUl2QixRQUFRdUIsRUFBRTtnQkFBQztZQUFFO1lBRXhEckcsY0FBTSxDQUFDQyxJQUFJLENBQUMsZ0NBQWdDO2dCQUFFbUcsV0FBV3RCLFFBQVF1QixFQUFFO2dCQUFFekc7WUFBTztZQUU1RSxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsV0FBVyxFQUFFcUUsUUFBUVksU0FBUyxDQUFDLENBQUMsRUFBRVosUUFBUWMsUUFBUSxDQUFDLHVCQUF1QixDQUFDO2dCQUNyRlUsU0FBUztvQkFDUHVXLGtCQUFrQi9YLFFBQVF1QixFQUFFO29CQUM1QjVCLE1BQU0sR0FBR0ssUUFBUVksU0FBUyxDQUFDLENBQUMsRUFBRVosUUFBUWMsUUFBUSxFQUFFO29CQUNoRGxCLE9BQU9JLFFBQVFKLEtBQUs7Z0JBQ3RCO1lBQ0Y7UUFFRixFQUFFLE9BQU9uQixPQUFPO1lBQ2R2RCxjQUFNLENBQUN1RCxLQUFLLENBQUMsMkJBQTJCO2dCQUFFQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFBUW9aO2dCQUFZL2M7WUFBTztZQUU1SCxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFBQztvQkFBK0I7aUJBQXNEO1lBQ3JHO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY2lVLGVBQWUrSCxVQUFlLEVBQUUvYyxNQUFjLEVBQTRCO1FBQ3RGLElBQUk7WUFDRixNQUFNLEVBQUVvTyxVQUFVLEVBQUV2SixJQUFJLEVBQUUsR0FBR2tZO1lBRTdCLElBQUksQ0FBQzNPLGNBQWMsQ0FBQ3ZKLE1BQU07Z0JBQ3hCLE9BQU87b0JBQ0xqRSxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUE4QztxQkFBOEI7Z0JBQzVGO1lBQ0Y7WUFFQSxvQkFBb0I7WUFDcEIsSUFBSTZMLFdBQVc7WUFDZixJQUFJd0IsWUFBWTtnQkFDZHhCLFdBQVcsTUFBTTNILGVBQU0sQ0FBQzJILFFBQVEsQ0FBQzlGLFVBQVUsQ0FBQztvQkFBRTFCLE9BQU87d0JBQUVxQixJQUFJMkg7b0JBQVc7Z0JBQUU7WUFDMUUsT0FBTyxJQUFJdkosTUFBTTtnQkFDZitILFdBQVcsTUFBTTNILGVBQU0sQ0FBQzJILFFBQVEsQ0FBQ3pILFNBQVMsQ0FBQztvQkFDekNDLE9BQU87d0JBQUVQLE1BQU07NEJBQUVnTixVQUFVaE47NEJBQU1pTixNQUFNO3dCQUFjO29CQUFFO2dCQUN6RDtZQUNGO1lBRUEsSUFBSSxDQUFDbEYsVUFBVTtnQkFDYixPQUFPO29CQUNMaE0sU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQztxQkFBMkI7Z0JBQzNDO1lBQ0Y7WUFFQSxvREFBb0Q7WUFDcEQsTUFBTW1jLG1CQUFtQixNQUFNalksZUFBTSxDQUFDMkgsUUFBUSxDQUFDeVAsTUFBTSxDQUFDO2dCQUNwRGpYLE9BQU87b0JBQUVxQixJQUFJbUcsU0FBU25HLEVBQUU7Z0JBQUM7Z0JBQ3pCekMsTUFBTTtvQkFBRXNDLFFBQVE7Z0JBQVc7WUFDN0I7WUFFQWxHLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLGtDQUFrQztnQkFBRStOLFlBQVl4QixTQUFTbkcsRUFBRTtnQkFBRXpHO1lBQU87WUFFaEYsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUyxDQUFDLFlBQVksRUFBRStMLFNBQVMvSCxJQUFJLENBQUMseURBQXlELENBQUM7Z0JBQ2hHYixNQUFNa1o7Z0JBQ054VyxTQUFTO29CQUNQMEgsWUFBWXhCLFNBQVNuRyxFQUFFO29CQUN2QjVCLE1BQU0rSCxTQUFTL0gsSUFBSTtvQkFDbkIvQixRQUFRO29CQUNSa1osTUFBTTtnQkFDUjtZQUNGO1FBRUYsRUFBRSxPQUFPclksT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLDRCQUE0QjtnQkFBRUEsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQVFvWjtnQkFBWS9jO1lBQU87WUFFN0gsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQWdDO2lCQUF1RDtZQUN2RztRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNrVSxlQUFlOEgsVUFBZSxFQUFFL2MsTUFBYyxFQUE0QjtRQUN0RixJQUFJO1lBQ0YsTUFBTSxFQUFFbVEsVUFBVSxFQUFFdEwsSUFBSSxFQUFFdUcsT0FBTyxPQUFPLEVBQUUsR0FBRzJSO1lBRTdDLElBQUksQ0FBQzVNLGNBQWMsQ0FBQ3RMLE1BQU07Z0JBQ3hCLE9BQU87b0JBQ0xqRSxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUF5QztxQkFBOEI7Z0JBQ3ZGO1lBQ0Y7WUFFQSxrQ0FBa0M7WUFDbEMsSUFBSTBPLFdBQVc7WUFDZixJQUFJK00sUUFBUTtZQUVaLElBQUlwUixTQUFTLE9BQU9vUixRQUFRO2lCQUN2QixJQUFJcFIsU0FBUyxZQUFZb1IsUUFBUTtZQUV0QyxJQUFJck0sWUFBWTtnQkFDZFYsV0FBVyxNQUFNLEFBQUN4SyxlQUFNLEFBQVEsQ0FBQ3VYLE1BQU0sQ0FBQzFWLFVBQVUsQ0FBQztvQkFBRTFCLE9BQU87d0JBQUVxQixJQUFJMEo7b0JBQVc7Z0JBQUU7WUFDakYsT0FBTyxJQUFJdEwsTUFBTTtnQkFDZjRLLFdBQVcsTUFBTSxBQUFDeEssZUFBTSxBQUFRLENBQUN1WCxNQUFNLENBQUNyWCxTQUFTLENBQUM7b0JBQ2hEQyxPQUFPO3dCQUFFUCxNQUFNOzRCQUFFZ04sVUFBVWhOOzRCQUFNaU4sTUFBTTt3QkFBYztvQkFBRTtnQkFDekQ7WUFDRjtZQUVBLElBQUksQ0FBQ3JDLFVBQVU7Z0JBQ2IsT0FBTztvQkFDTDdPLFNBQVM7b0JBQ1RDLFNBQVMsR0FBR3VLLEtBQUtnRixXQUFXLEdBQUcsK0RBQStELENBQUM7b0JBQy9GclAsYUFBYTt3QkFBQzt3QkFBNEI7cUJBQXFEO2dCQUNqRztZQUNGO1lBRUEsc0JBQXNCO1lBQ3RCLE1BQU0sQUFBQ2tFLGVBQU0sQUFBUSxDQUFDdVgsTUFBTSxDQUFDUSxNQUFNLENBQUM7Z0JBQUU1WCxPQUFPO29CQUFFcUIsSUFBSWdKLFNBQVNoSixFQUFFO2dCQUFDO1lBQUU7WUFFakVyRyxjQUFNLENBQUNDLElBQUksQ0FBQyxpQ0FBaUM7Z0JBQUU4UCxZQUFZVixTQUFTaEosRUFBRTtnQkFBRTJFO2dCQUFNcEw7WUFBTztZQUVyRixPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsRUFBRSxFQUFFdUssS0FBS2dGLFdBQVcsR0FBRyxXQUFXLEVBQUVYLFNBQVM1SyxJQUFJLENBQUMsdUJBQXVCLENBQUM7Z0JBQ3BGNkIsU0FBUztvQkFDUHlXLG1CQUFtQjFOLFNBQVNoSixFQUFFO29CQUM5QjJFO29CQUNBdkcsTUFBTTRLLFNBQVM1SyxJQUFJO2dCQUNyQjtZQUNGO1FBRUYsRUFBRSxPQUFPbEIsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLDRCQUE0QjtnQkFBRUEsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQVFvWjtnQkFBWS9jO1lBQU87WUFFN0gsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQWdDO2lCQUF1RDtZQUN2RztRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNtVSxXQUFXNkgsVUFBZSxFQUFFL2MsTUFBYyxFQUE0QjtRQUNsRixJQUFJO1lBQ0YsTUFBTSxFQUFFc1IsTUFBTSxFQUFFSixLQUFLLEVBQUUsR0FBRzZMO1lBRTFCLElBQUksQ0FBQ3pMLFVBQVUsQ0FBQ0osT0FBTztnQkFDckIsT0FBTztvQkFDTHRRLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7d0JBQXNDO3FCQUEwQjtnQkFDaEY7WUFDRjtZQUVBLGdCQUFnQjtZQUNoQixJQUFJa1EsT0FBTztZQUNYLElBQUlLLFFBQVE7Z0JBQ1ZMLE9BQU8sTUFBTWhNLGVBQU0sQ0FBQ2dNLElBQUksQ0FBQ25LLFVBQVUsQ0FBQztvQkFBRTFCLE9BQU87d0JBQUVxQixJQUFJNks7b0JBQU87Z0JBQUU7WUFDOUQsT0FBTyxJQUFJSixPQUFPO2dCQUNoQkQsT0FBTyxNQUFNaE0sZUFBTSxDQUFDZ00sSUFBSSxDQUFDOUwsU0FBUyxDQUFDO29CQUNqQ0MsT0FBTzt3QkFBRThMLE9BQU87NEJBQUVXLFVBQVVYOzRCQUFPWSxNQUFNO3dCQUFjO29CQUFFO2dCQUMzRDtZQUNGO1lBRUEsSUFBSSxDQUFDYixNQUFNO2dCQUNULE9BQU87b0JBQ0xyUSxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3FCQUF3QjtnQkFDeEM7WUFDRjtZQUVBLDJEQUEyRDtZQUMzRCxNQUFNcWMsZ0JBQWdCLE1BQU1uWSxlQUFNLENBQUNnTSxJQUFJLENBQUNvTCxNQUFNLENBQUM7Z0JBQzdDalgsT0FBTztvQkFBRXFCLElBQUl3SyxLQUFLeEssRUFBRTtnQkFBQztnQkFDckJ6QyxNQUFNO29CQUFFc0MsUUFBUTtnQkFBWTtZQUM5QjtZQUVBbEcsY0FBTSxDQUFDQyxJQUFJLENBQUMsK0JBQStCO2dCQUFFaVIsUUFBUUwsS0FBS3hLLEVBQUU7Z0JBQUV6RztZQUFPO1lBRXJFLE9BQU87Z0JBQ0xZLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyxRQUFRLEVBQUVvUSxLQUFLQyxLQUFLLENBQUMsdURBQXVELENBQUM7Z0JBQ3ZGbE4sTUFBTW9aO2dCQUNOMVcsU0FBUztvQkFDUDRLLFFBQVFMLEtBQUt4SyxFQUFFO29CQUNmeUssT0FBT0QsS0FBS0MsS0FBSztvQkFDakJwTyxRQUFRO29CQUNSa1osTUFBTTtnQkFDUjtZQUNGO1FBRUYsRUFBRSxPQUFPclksT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLHdCQUF3QjtnQkFBRUEsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQVFvWjtnQkFBWS9jO1lBQU87WUFFekgsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQTRCO2lCQUFtRDtZQUMvRjtRQUNGO0lBQ0Y7SUFFQSx3Q0FBd0M7SUFDeEMsTUFBY29VLGNBQWNuUixJQUFTLEVBQUVoRSxNQUFjLEVBQTRCO1FBQy9FLElBQUk7WUFDRixNQUFNNlcsWUFBWTdTLEtBQUs2UyxTQUFTLElBQUk3UyxLQUFLeUMsRUFBRTtZQUMzQyxNQUFNOFAsY0FBY3ZTLEtBQUthLElBQUk7WUFFN0IsSUFBSSxDQUFDZ1MsYUFBYSxDQUFDTixhQUFhO2dCQUM5QixPQUFPO29CQUNMM1YsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBdUM7cUJBQTZCO2dCQUNwRjtZQUNGO1lBRUEsbUJBQW1CO1lBQ25CLElBQUk2VixVQUFVO1lBQ2QsSUFBSUMsV0FBVztnQkFDYkQsVUFBVSxNQUFNM1IsZUFBTSxDQUFDMlIsT0FBTyxDQUFDOVAsVUFBVSxDQUFDO29CQUFFMUIsT0FBTzt3QkFBRXFCLElBQUlvUTtvQkFBVTtnQkFBRTtZQUN2RSxPQUFPLElBQUlOLGFBQWE7Z0JBQ3RCSyxVQUFVLE1BQU0zUixlQUFNLENBQUMyUixPQUFPLENBQUN6UixTQUFTLENBQUM7b0JBQ3ZDQyxPQUFPO3dCQUFFUCxNQUFNOzRCQUFFZ04sVUFBVTBFOzRCQUFhekUsTUFBTTt3QkFBYztvQkFBRTtnQkFDaEU7WUFDRjtZQUVBLElBQUksQ0FBQzhFLFNBQVM7Z0JBQ1osT0FBTztvQkFDTGhXLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7cUJBQTBCO2dCQUMxQztZQUNGO1lBRUEsOENBQThDO1lBQzlDLE1BQU0sQ0FBQ29ZLGdCQUFnQkMsY0FBY0Msa0JBQWtCLEdBQUcsTUFBTXpCLFFBQVFDLEdBQUcsQ0FBQztnQkFDMUU1UyxlQUFNLENBQUN5SyxhQUFhLENBQUNnRCxLQUFLLENBQUM7b0JBQUV0TixPQUFPO3dCQUFFaVksVUFBVTs0QkFBRUMsTUFBTTtnQ0FBRTdXLElBQUltUSxRQUFRblEsRUFBRTs0QkFBQzt3QkFBRTtvQkFBRTtnQkFBRTtnQkFDL0V4QixlQUFNLENBQUNzWSxXQUFXLENBQUM3SyxLQUFLLENBQUM7b0JBQUV0TixPQUFPO3dCQUFFaVksVUFBVTs0QkFBRUMsTUFBTTtnQ0FBRTdXLElBQUltUSxRQUFRblEsRUFBRTs0QkFBQzt3QkFBRTtvQkFBRTtnQkFBRTtnQkFDN0V4QixlQUFNLENBQUNnTCxnQkFBZ0IsQ0FBQ3lDLEtBQUssQ0FBQztvQkFBRXROLE9BQU87d0JBQUVpWSxVQUFVOzRCQUFFQyxNQUFNO2dDQUFFN1csSUFBSW1RLFFBQVFuUSxFQUFFOzRCQUFDO3dCQUFFO29CQUFFO2dCQUFFO2FBQ25GO1lBRUQsTUFBTStXLGFBQWFyRSxpQkFBaUJDLGVBQWVDO1lBRW5ELElBQUltRSxhQUFhLEdBQUc7Z0JBQ2xCLE9BQU87b0JBQ0w1YyxTQUFTO29CQUNUQyxTQUFTLENBQUMsdUJBQXVCLEVBQUUrVixRQUFRL1IsSUFBSSxDQUFDLHVCQUF1QixFQUFFMlksV0FBVyxhQUFhLENBQUM7b0JBQ2xHemMsYUFBYTt3QkFBQzt3QkFBdUM7cUJBQXlDO2dCQUNoRztZQUNGO1lBRUEsTUFBTWtFLGVBQU0sQ0FBQzJSLE9BQU8sQ0FBQ29HLE1BQU0sQ0FBQztnQkFBRTVYLE9BQU87b0JBQUVxQixJQUFJbVEsUUFBUW5RLEVBQUU7Z0JBQUM7WUFBRTtZQUV4RHJHLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLGdDQUFnQztnQkFBRXdXLFdBQVdELFFBQVFuUSxFQUFFO2dCQUFFekc7WUFBTztZQUU1RSxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsV0FBVyxFQUFFK1YsUUFBUS9SLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztnQkFDNURiLE1BQU07b0JBQUU2UyxXQUFXRCxRQUFRblEsRUFBRTtvQkFBRTVCLE1BQU0rUixRQUFRL1IsSUFBSTtnQkFBQztnQkFDbEQ2QixTQUFTO29CQUNQbVEsV0FBV0QsUUFBUW5RLEVBQUU7b0JBQ3JCNUIsTUFBTStSLFFBQVEvUixJQUFJO29CQUNsQi9CLFFBQVE7Z0JBQ1Y7WUFDRjtRQUVGLEVBQUUsT0FBT2EsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLDJCQUEyQjtnQkFBRUEsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQVFLO2dCQUFNaEU7WUFBTztZQUV0SCxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFBQztvQkFBMkI7aUJBQXNEO1lBQ2pHO1FBQ0Y7SUFDRjtJQUVBLE1BQWNxVSxlQUFlcFIsSUFBUyxFQUFFaEUsTUFBYyxFQUE0QjtRQUNoRixJQUFJO1lBQ0YsTUFBTXFYLGFBQWFyVCxLQUFLcVQsVUFBVSxJQUFJclQsS0FBS3lDLEVBQUU7WUFDN0MsTUFBTXNRLGVBQWUvUyxLQUFLYSxJQUFJO1lBQzlCLE1BQU1pUyxlQUFlOVMsS0FBS29ILElBQUksSUFBSTtZQUVsQyxJQUFJLENBQUNpTSxjQUFjLENBQUNOLGNBQWM7Z0JBQ2hDLE9BQU87b0JBQ0xuVyxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUE4QztxQkFBOEI7Z0JBQzVGO1lBQ0Y7WUFFQSxJQUFJd1MsV0FBVztZQUVmLGtDQUFrQztZQUNsQyxJQUFJdUQsaUJBQWlCLFNBQVM7Z0JBQzVCLElBQUlPLFlBQVk7b0JBQ2Q5RCxXQUFXLE1BQU10TyxlQUFNLENBQUMrUixhQUFhLENBQUNsUSxVQUFVLENBQUM7d0JBQUUxQixPQUFPOzRCQUFFcUIsSUFBSTRRO3dCQUFXO29CQUFFO2dCQUMvRSxPQUFPLElBQUlOLGNBQWM7b0JBQ3ZCeEQsV0FBVyxNQUFNdE8sZUFBTSxDQUFDK1IsYUFBYSxDQUFDN1IsU0FBUyxDQUFDO3dCQUM5Q0MsT0FBTzs0QkFBRVAsTUFBTTtnQ0FBRWdOLFVBQVVrRjtnQ0FBY2pGLE1BQU07NEJBQWM7d0JBQUU7b0JBQ2pFO2dCQUNGO1lBQ0YsT0FBTyxJQUFJZ0YsaUJBQWlCLE9BQU87Z0JBQ2pDLElBQUlPLFlBQVk7b0JBQ2Q5RCxXQUFXLE1BQU10TyxlQUFNLENBQUNrUyxXQUFXLENBQUNyUSxVQUFVLENBQUM7d0JBQUUxQixPQUFPOzRCQUFFcUIsSUFBSTRRO3dCQUFXO29CQUFFO2dCQUM3RSxPQUFPLElBQUlOLGNBQWM7b0JBQ3ZCeEQsV0FBVyxNQUFNdE8sZUFBTSxDQUFDa1MsV0FBVyxDQUFDaFMsU0FBUyxDQUFDO3dCQUM1Q0MsT0FBTzs0QkFBRVAsTUFBTTtnQ0FBRWdOLFVBQVVrRjtnQ0FBY2pGLE1BQU07NEJBQWM7d0JBQUU7b0JBQ2pFO2dCQUNGO1lBQ0YsT0FBTyxJQUFJZ0YsaUJBQWlCLFlBQVk7Z0JBQ3RDLElBQUlPLFlBQVk7b0JBQ2Q5RCxXQUFXLE1BQU10TyxlQUFNLENBQUNtUyxnQkFBZ0IsQ0FBQ3RRLFVBQVUsQ0FBQzt3QkFBRTFCLE9BQU87NEJBQUVxQixJQUFJNFE7d0JBQVc7b0JBQUU7Z0JBQ2xGLE9BQU8sSUFBSU4sY0FBYztvQkFDdkJ4RCxXQUFXLE1BQU10TyxlQUFNLENBQUNtUyxnQkFBZ0IsQ0FBQ2pTLFNBQVMsQ0FBQzt3QkFDakRDLE9BQU87NEJBQUVQLE1BQU07Z0NBQUVnTixVQUFVa0Y7Z0NBQWNqRixNQUFNOzRCQUFjO3dCQUFFO29CQUNqRTtnQkFDRjtZQUNGO1lBRUEsSUFBSSxDQUFDeUIsVUFBVTtnQkFDYixPQUFPO29CQUNMM1MsU0FBUztvQkFDVEMsU0FBUyxHQUFHaVcsYUFBYSwrREFBK0QsQ0FBQztvQkFDekYvVixhQUFhO3dCQUFDO3FCQUFvQztnQkFDcEQ7WUFDRjtZQUVBLCtDQUErQztZQUMvQyxJQUFJMGMsZ0JBQWdCO1lBQ3BCLElBQUkzRyxpQkFBaUIsU0FBUztnQkFDNUIyRyxnQkFBZ0IsTUFBTXhZLGVBQU0sQ0FBQ3lLLGFBQWEsQ0FBQ2dELEtBQUssQ0FBQztvQkFBRXROLE9BQU87d0JBQUVpUyxZQUFZOUQsU0FBUzlNLEVBQUU7b0JBQUM7Z0JBQUU7WUFDeEYsT0FBTyxJQUFJcVEsaUJBQWlCLE9BQU87Z0JBQ2pDMkcsZ0JBQWdCLE1BQU14WSxlQUFNLENBQUNzWSxXQUFXLENBQUM3SyxLQUFLLENBQUM7b0JBQUV0TixPQUFPO3dCQUFFaVMsWUFBWTlELFNBQVM5TSxFQUFFO29CQUFDO2dCQUFFO1lBQ3RGLE9BQU8sSUFBSXFRLGlCQUFpQixZQUFZO2dCQUN0QzJHLGdCQUFnQixNQUFNeFksZUFBTSxDQUFDZ0wsZ0JBQWdCLENBQUN5QyxLQUFLLENBQUM7b0JBQUV0TixPQUFPO3dCQUFFaVMsWUFBWTlELFNBQVM5TSxFQUFFO29CQUFDO2dCQUFFO1lBQzNGO1lBRUEsSUFBSWdYLGdCQUFnQixHQUFHO2dCQUNyQixPQUFPO29CQUNMN2MsU0FBUztvQkFDVEMsU0FBUyxDQUFDLHdCQUF3QixFQUFFMFMsU0FBUzFPLElBQUksQ0FBQyx1QkFBdUIsRUFBRTRZLGNBQWMsYUFBYSxDQUFDO29CQUN2RzFjLGFBQWE7d0JBQUM7d0JBQXdDO3FCQUEwQztnQkFDbEc7WUFDRjtZQUVBLHNCQUFzQjtZQUN0QixJQUFJK1YsaUJBQWlCLFNBQVM7Z0JBQzVCLE1BQU03UixlQUFNLENBQUMrUixhQUFhLENBQUNnRyxNQUFNLENBQUM7b0JBQUU1WCxPQUFPO3dCQUFFcUIsSUFBSThNLFNBQVM5TSxFQUFFO29CQUFDO2dCQUFFO1lBQ2pFLE9BQU8sSUFBSXFRLGlCQUFpQixPQUFPO2dCQUNqQyxNQUFNN1IsZUFBTSxDQUFDa1MsV0FBVyxDQUFDNkYsTUFBTSxDQUFDO29CQUFFNVgsT0FBTzt3QkFBRXFCLElBQUk4TSxTQUFTOU0sRUFBRTtvQkFBQztnQkFBRTtZQUMvRCxPQUFPLElBQUlxUSxpQkFBaUIsWUFBWTtnQkFDdEMsTUFBTTdSLGVBQU0sQ0FBQ21TLGdCQUFnQixDQUFDNEYsTUFBTSxDQUFDO29CQUFFNVgsT0FBTzt3QkFBRXFCLElBQUk4TSxTQUFTOU0sRUFBRTtvQkFBQztnQkFBRTtZQUNwRTtZQUVBckcsY0FBTSxDQUFDQyxJQUFJLENBQUMsaUNBQWlDO2dCQUFFZ1gsWUFBWTlELFNBQVM5TSxFQUFFO2dCQUFFMkUsTUFBTTBMO2dCQUFjOVc7WUFBTztZQUVuRyxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsRUFBRSxFQUFFaVcsYUFBYTFHLFdBQVcsR0FBRyxXQUFXLEVBQUVtRCxTQUFTMU8sSUFBSSxDQUFDLHVCQUF1QixDQUFDO2dCQUM1RmIsTUFBTTtvQkFBRXFULFlBQVk5RCxTQUFTOU0sRUFBRTtvQkFBRTVCLE1BQU0wTyxTQUFTMU8sSUFBSTtvQkFBRXVHLE1BQU0wTDtnQkFBYTtnQkFDekVwUSxTQUFTO29CQUNQMlEsWUFBWTlELFNBQVM5TSxFQUFFO29CQUN2QjVCLE1BQU0wTyxTQUFTMU8sSUFBSTtvQkFDbkJ1RyxNQUFNMEw7b0JBQ05oVSxRQUFRO2dCQUNWO1lBQ0Y7UUFFRixFQUFFLE9BQU9hLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyw0QkFBNEI7Z0JBQUVBLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBR2lELE9BQU9IO2dCQUFRSztnQkFBTWhFO1lBQU87WUFFdkgsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQUM7b0JBQTRCO2lCQUF1RDtZQUNuRztRQUNGO0lBQ0Y7SUFFQSxtQ0FBbUM7SUFDbkMseUNBQXlDO0lBQ3pDLG1DQUFtQztJQUVuQzs7R0FFQyxHQUNELE1BQWM0VSxxQkFBcUJyVixLQUFhLEVBQUVOLE1BQWMsRUFBNEI7UUFDMUYsSUFBSTtZQUNGLE1BQU0wZCxVQUFlLENBQUM7WUFDdEIsTUFBTUMsYUFBYXJkLE1BQU0rQyxXQUFXO1lBRXBDLElBQUlzYSxXQUFXMVcsUUFBUSxDQUFDLFlBQVkwVyxXQUFXMVcsUUFBUSxDQUFDLGtCQUFrQjBXLFdBQVcxVyxRQUFRLENBQUMsaUJBQWlCO2dCQUM3Ryw2REFBNkQ7Z0JBQzdELE1BQU0yVyxtQkFBbUIsTUFBTTNZLGVBQU0sQ0FBQ2dNLElBQUksQ0FBQzRILE9BQU8sQ0FBQztvQkFDakRDLElBQUk7d0JBQUM7cUJBQWU7b0JBQ3BCMVQsT0FBTzt3QkFDTGtCLFFBQVE7d0JBQ1JzQixXQUFXOzRCQUFFcVQsS0FBSyxJQUFJL2EsS0FBS0EsS0FBS0MsR0FBRyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7d0JBQU0sRUFBRSxlQUFlO29CQUNyRjtvQkFDQXdZLFFBQVE7d0JBQUVsUyxJQUFJO29CQUFLO29CQUNuQnFNLFNBQVM7d0JBQUU2RixRQUFROzRCQUFFbFMsSUFBSTt3QkFBTztvQkFBRTtvQkFDbENvTSxNQUFNO2dCQUNSO2dCQUVBLE1BQU1nTCxpQkFBaUIsTUFBTWpHLFFBQVFDLEdBQUcsQ0FDdEMrRixpQkFBaUIzRSxHQUFHLENBQUMsT0FBTzZFO29CQUMxQixNQUFNalgsT0FBTyxNQUFNNUIsZUFBTSxDQUFDNEIsSUFBSSxDQUFDQyxVQUFVLENBQUM7d0JBQ3hDMUIsT0FBTzs0QkFBRXFCLElBQUlxWCxLQUFLQyxZQUFZO3dCQUFFO3dCQUNoQ2hYLFFBQVE7NEJBQUVOLElBQUk7NEJBQU01QixNQUFNOzRCQUFNQyxPQUFPOzRCQUFNa0MsTUFBTTt3QkFBSztvQkFDMUQ7b0JBQ0EsT0FBTzt3QkFDTEg7d0JBQ0FtWCxnQkFBZ0JGLEtBQUtuRixNQUFNLENBQUNsUyxFQUFFO3dCQUM5QndYLFFBQVE7b0JBQ1Y7Z0JBQ0Y7Z0JBR0ZQLFFBQVFFLGdCQUFnQixHQUFHQyxlQUFldlksTUFBTSxDQUFDNFksQ0FBQUEsSUFBS0EsRUFBRXJYLElBQUk7WUFDOUQ7WUFFQSxJQUFJOFcsV0FBVzFXLFFBQVEsQ0FBQyxnQkFBZ0IwVyxXQUFXMVcsUUFBUSxDQUFDLHNCQUFzQjBXLFdBQVcxVyxRQUFRLENBQUMsbUJBQW1CO2dCQUN2SCxvRUFBb0U7Z0JBQ3BFLE1BQU1rWCxpQkFBaUIsTUFBTWxaLGVBQU0sQ0FBQzRCLElBQUksQ0FBQytMLFFBQVEsQ0FBQztvQkFDaER4TixPQUFPO3dCQUNMQyxJQUFJOzRCQUNGO2dDQUFFMkIsTUFBTTs0QkFBUTs0QkFDaEI7Z0NBQUVBLE1BQU07NEJBQWM7NEJBQ3RCO2dDQUFFQSxNQUFNOzRCQUFXO3lCQUNwQjt3QkFDRFUsVUFBVTtvQkFDWjtvQkFDQVgsUUFBUTt3QkFBRU4sSUFBSTt3QkFBTTVCLE1BQU07d0JBQU1DLE9BQU87d0JBQU1rQyxNQUFNO29CQUFLO2dCQUMxRDtnQkFFQSxNQUFNb1gsdUJBQXVCLE1BQU14RyxRQUFRQyxHQUFHLENBQzVDc0csZUFBZWxGLEdBQUcsQ0FBQyxPQUFPcFM7b0JBQ3hCLE1BQU0sQ0FBQ21YLGdCQUFnQkssaUJBQWlCLEdBQUcsTUFBTXpHLFFBQVFDLEdBQUcsQ0FBQzt3QkFDM0Q1UyxlQUFNLENBQUNnTSxJQUFJLENBQUN5QixLQUFLLENBQUM7NEJBQ2hCdE4sT0FBTztnQ0FDTDJZLGNBQWNsWCxLQUFLSixFQUFFO2dDQUNyQkgsUUFBUTtnQ0FDUnNCLFdBQVc7b0NBQUVxVCxLQUFLLElBQUkvYSxLQUFLQSxLQUFLQyxHQUFHLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztnQ0FBTTs0QkFDcEU7d0JBQ0Y7d0JBQ0E4RSxlQUFNLENBQUN5SyxhQUFhLENBQUNnRCxLQUFLLENBQUM7NEJBQ3pCdE4sT0FBTztnQ0FDTG1CLGFBQWFNLEtBQUtKLEVBQUU7Z0NBQ3BCbUIsV0FBVztvQ0FBRXFULEtBQUssSUFBSS9hLEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO2dDQUFNOzRCQUNwRTt3QkFDRjtxQkFDRDtvQkFFRCxPQUFPO3dCQUNMMEc7d0JBQ0FtWDt3QkFDQUs7d0JBQ0FDLGVBQWVOLGlCQUFpQks7d0JBQ2hDSixRQUFRO29CQUNWO2dCQUNGO2dCQUdGUCxRQUFRVSxvQkFBb0IsR0FBR0EscUJBQzVCOVksTUFBTSxDQUFDNFksQ0FBQUEsSUFBS0EsRUFBRUksYUFBYSxHQUFHLEdBQzlCQyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUEsRUFBRUgsYUFBYSxHQUFHRSxFQUFFRixhQUFhO1lBQ3JEO1lBRUEsSUFBSVgsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhO2dCQUNuQyxpQ0FBaUM7Z0JBQ2pDLE1BQU0sQ0FBQ2tTLGdCQUFnQkUsbUJBQW1CRCxhQUFhLEdBQUcsTUFBTXhCLFFBQVFDLEdBQUcsQ0FBQztvQkFDMUU1UyxlQUFNLENBQUN5SyxhQUFhLENBQUNrRCxRQUFRLENBQUM7d0JBQzVCN0wsUUFBUTs0QkFBRU4sSUFBSTs0QkFBTTVCLE1BQU07NEJBQU15QixRQUFROzRCQUFNc0IsV0FBVzt3QkFBSzt3QkFDOURrTCxTQUFTOzRCQUFFbEwsV0FBVzt3QkFBTzt3QkFDN0JpTCxNQUFNO29CQUNSO29CQUNBNU4sZUFBTSxDQUFDZ0wsZ0JBQWdCLENBQUMyQyxRQUFRLENBQUM7d0JBQy9CN0wsUUFBUTs0QkFBRU4sSUFBSTs0QkFBTTVCLE1BQU07NEJBQU15QixRQUFROzRCQUFNc0IsV0FBVzt3QkFBSzt3QkFDOURrTCxTQUFTOzRCQUFFbEwsV0FBVzt3QkFBTzt3QkFDN0JpTCxNQUFNO29CQUNSO29CQUNBNU4sZUFBTSxDQUFDOEssV0FBVyxDQUFDNkMsUUFBUSxDQUFDO3dCQUMxQjdMLFFBQVE7NEJBQUVOLElBQUk7NEJBQU01QixNQUFNOzRCQUFNeUIsUUFBUTs0QkFBTXNCLFdBQVc7d0JBQUs7d0JBQzlEa0wsU0FBUzs0QkFBRWxMLFdBQVc7d0JBQU87d0JBQzdCaUwsTUFBTTtvQkFDUjtpQkFDRDtnQkFFRDZLLFFBQVFnQixZQUFZLEdBQUc7b0JBQ3JCNVosT0FBT3FVO29CQUNQTyxVQUFVTDtvQkFDVkksS0FBS0w7b0JBQ0xiLE9BQU9ZLGVBQWV6VCxNQUFNLEdBQUcyVCxrQkFBa0IzVCxNQUFNLEdBQUcwVCxhQUFhMVQsTUFBTTtnQkFDL0U7WUFDRjtZQUVBLElBQUlwRixNQUFNMkcsUUFBUSxDQUFDLGFBQWE7Z0JBQzlCLGlDQUFpQztnQkFDakMsTUFBTThDLFlBQVksTUFBTTlFLGVBQU0sQ0FBQzJILFFBQVEsQ0FBQ2dHLFFBQVEsQ0FBQztvQkFDL0M3TCxRQUFRO3dCQUNOTixJQUFJO3dCQUNKNUIsTUFBTTt3QkFDTnlCLFFBQVE7d0JBQ1JzQixXQUFXO3dCQUNYK1EsUUFBUTs0QkFBRTVSLFFBQVE7Z0NBQUV3RyxPQUFPOzRCQUFLO3dCQUFFO29CQUNwQztvQkFDQXVGLFNBQVM7d0JBQUVsTCxXQUFXO29CQUFPO29CQUM3QmlMLE1BQU07Z0JBQ1I7Z0JBRUE2SyxRQUFRaUIsWUFBWSxHQUFHNVU7WUFDekI7WUFFQSw0QkFBNEI7WUFDNUIsSUFBSWxKLFVBQVU7WUFFZCxJQUFJNmMsUUFBUUUsZ0JBQWdCLEVBQUVsWSxTQUFTLEdBQUc7Z0JBQ3hDLE1BQU1rWixlQUFlbEIsUUFBUUUsZ0JBQWdCLENBQUMsRUFBRTtnQkFDaEQvYyxXQUFXLENBQUMsNkJBQTZCLEVBQUUrZCxhQUFhL1gsSUFBSSxDQUFDaEMsSUFBSSxDQUFDLEVBQUUsRUFBRStaLGFBQWFaLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQztnQkFDdEhuZCxXQUFXLENBQUMsWUFBWSxFQUFFK2QsYUFBYS9YLElBQUksQ0FBQy9CLEtBQUssQ0FBQyxJQUFJLENBQUM7Z0JBRXZEakUsV0FBVztnQkFDWDZjLFFBQVFFLGdCQUFnQixDQUFDM1gsS0FBSyxDQUFDLEdBQUcsR0FBRzRZLE9BQU8sQ0FBQyxDQUFDZixNQUFNZ0I7b0JBQ2xEamUsV0FBVyxHQUFHaWUsUUFBUSxFQUFFLEVBQUUsRUFBRWhCLEtBQUtqWCxJQUFJLENBQUNoQyxJQUFJLENBQUMsR0FBRyxFQUFFaVosS0FBS0UsY0FBYyxDQUFDLGtCQUFrQixDQUFDO2dCQUN6RjtnQkFDQW5kLFdBQVc7WUFDYjtZQUVBLElBQUk2YyxRQUFRVSxvQkFBb0IsRUFBRTFZLFNBQVMsR0FBRztnQkFDNUMsTUFBTXFaLGNBQWNyQixRQUFRVSxvQkFBb0IsQ0FBQyxFQUFFO2dCQUNuRHZkLFdBQVcsQ0FBQyxpQ0FBaUMsRUFBRWtlLFlBQVlsWSxJQUFJLENBQUNoQyxJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUN4RWhFLFdBQVcsQ0FBQyxZQUFZLEVBQUVrZSxZQUFZbFksSUFBSSxDQUFDL0IsS0FBSyxDQUFDLEVBQUUsQ0FBQztnQkFDcERqRSxXQUFXLENBQUMsYUFBYSxFQUFFa2UsWUFBWWYsY0FBYyxDQUFDLFFBQVEsRUFBRWUsWUFBWVYsZ0JBQWdCLENBQUMsY0FBYyxDQUFDO2dCQUU1R3hkLFdBQVc7Z0JBQ1g2YyxRQUFRVSxvQkFBb0IsQ0FBQ25ZLEtBQUssQ0FBQyxHQUFHLEdBQUc0WSxPQUFPLENBQUMsQ0FBQ2YsTUFBTWdCO29CQUN0RGplLFdBQVcsR0FBR2llLFFBQVEsRUFBRSxFQUFFLEVBQUVoQixLQUFLalgsSUFBSSxDQUFDaEMsSUFBSSxDQUFDLEdBQUcsRUFBRWlaLEtBQUtFLGNBQWMsQ0FBQyxRQUFRLEVBQUVGLEtBQUtPLGdCQUFnQixDQUFDLFlBQVksQ0FBQztnQkFDbkg7Z0JBQ0F4ZCxXQUFXO1lBQ2I7WUFFQSxJQUFJNmMsUUFBUWdCLFlBQVksRUFBRTtnQkFDeEI3ZCxXQUFXLENBQUMsMEJBQTBCLEVBQUU2YyxRQUFRZ0IsWUFBWSxDQUFDbkcsS0FBSyxDQUFDLG1CQUFtQixDQUFDO2dCQUN2RjFYLFdBQVcsQ0FBQyxzQkFBc0IsRUFBRTZjLFFBQVFnQixZQUFZLENBQUM1WixLQUFLLENBQUNZLE1BQU0sQ0FBQyxFQUFFLENBQUM7Z0JBQ3pFN0UsV0FBVyxDQUFDLHlCQUF5QixFQUFFNmMsUUFBUWdCLFlBQVksQ0FBQ2hGLFFBQVEsQ0FBQ2hVLE1BQU0sQ0FBQyxFQUFFLENBQUM7Z0JBQy9FN0UsV0FBVyxDQUFDLG9CQUFvQixFQUFFNmMsUUFBUWdCLFlBQVksQ0FBQ2pGLEdBQUcsQ0FBQy9ULE1BQU0sQ0FBQyxJQUFJLENBQUM7WUFDekU7WUFFQSxJQUFJZ1ksUUFBUWlCLFlBQVksRUFBRWpaLFNBQVMsR0FBRztnQkFDcEM3RSxXQUFXLENBQUMscUJBQXFCLEVBQUU2YyxRQUFRaUIsWUFBWSxDQUFDLEVBQUUsQ0FBQzlaLElBQUksQ0FBQyxFQUFFLEVBQUU2WSxRQUFRaUIsWUFBWSxDQUFDLEVBQUUsQ0FBQ2hHLE1BQU0sQ0FBQ3BMLEtBQUssQ0FBQyxXQUFXLENBQUM7WUFDdkg7WUFFQSxPQUFPO2dCQUNMM00sU0FBUztnQkFDVEMsU0FBU0EsUUFBUStRLElBQUk7Z0JBQ3JCNU4sTUFBTTBaO1lBQ1I7UUFFRixFQUFFLE9BQU8vWixPQUFPO1lBQ2QsT0FBTztnQkFDTC9DLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFjK1UsdUJBQXVCdFYsS0FBYSxFQUFFTixNQUFjLEVBQTRCO1FBQzVGLElBQUk7WUFDRixNQUFNZ2YsWUFBWSxJQUFJLENBQUNDLGdCQUFnQixDQUFDM2U7WUFDeEMsTUFBTTRlLFlBQVksSUFBSSxDQUFDQyxZQUFZLENBQUNIO1lBQ3BDLE1BQU1yQixhQUFhcmQsTUFBTStDLFdBQVc7WUFFcEMscUNBQXFDO1lBQ3JDLE1BQU0rYixrQkFBa0IsTUFBTW5hLGVBQU0sQ0FBQ2dNLElBQUksQ0FBQzRILE9BQU8sQ0FBQztnQkFDaERDLElBQUk7b0JBQUM7b0JBQWdCO2lCQUFTO2dCQUM5QjFULE9BQU87b0JBQ0x3QyxXQUFXO3dCQUFFcVQsS0FBS2lFO29CQUFVO29CQUM1Qm5CLGNBQWM7d0JBQUV6RCxLQUFLO29CQUFLO2dCQUM1QjtnQkFDQTNCLFFBQVE7b0JBQUVsUyxJQUFJO2dCQUFLO1lBQ3JCO1lBRUEsb0NBQW9DO1lBQ3BDLE1BQU00WSxjQUFjLE1BQU1wYSxlQUFNLENBQUM0QixJQUFJLENBQUMrTCxRQUFRLENBQUM7Z0JBQzdDN0wsUUFBUTtvQkFBRU4sSUFBSTtvQkFBTTVCLE1BQU07b0JBQU1DLE9BQU87b0JBQU1rQyxNQUFNO29CQUFNWSxXQUFXO2dCQUFLO1lBQzNFO1lBRUEseUJBQXlCO1lBQ3pCLE1BQU0wWCxjQUFjRCxZQUFZcEcsR0FBRyxDQUFDc0csQ0FBQUE7Z0JBQ2xDLE1BQU1DLGNBQWNKLGdCQUFnQjlaLE1BQU0sQ0FBQzJMLENBQUFBLE9BQVFBLEtBQUs4TSxZQUFZLEtBQUt3QixPQUFPOVksRUFBRTtnQkFDbEYsTUFBTTZVLFlBQVlrRSxZQUFZQyxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVwWixNQUFNLEtBQUssU0FBU3FTLE9BQU9sUyxNQUFNO2dCQUMzRSxNQUFNa1osYUFBYUgsWUFBWUMsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFcFosTUFBTSxLQUFLLGdCQUFnQnFTLE9BQU9sUyxNQUFNO2dCQUNuRixNQUFNbVosT0FBT0osWUFBWUMsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFcFosTUFBTSxLQUFLLFNBQVNxUyxPQUFPbFMsTUFBTTtnQkFDdEUsTUFBTThSLFFBQVErQyxZQUFZcUUsYUFBYUM7Z0JBQ3ZDLE1BQU1DLGlCQUFpQnRILFFBQVEsSUFBSTdQLEtBQUtnUyxLQUFLLENBQUMsQUFBQ1ksWUFBWS9DLFFBQVMsT0FBTztnQkFFM0UsT0FBTztvQkFDTDFULE1BQU0wYSxPQUFPMWEsSUFBSTtvQkFDakJDLE9BQU95YSxPQUFPemEsS0FBSztvQkFDbkJrQyxNQUFNdVksT0FBT3ZZLElBQUk7b0JBQ2pCc1U7b0JBQ0FxRTtvQkFDQUM7b0JBQ0FySDtvQkFDQXNIO2dCQUNGO1lBQ0YsR0FBR3RCLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxFQUFFb0IsY0FBYyxHQUFHckIsRUFBRXFCLGNBQWM7WUFFckQsd0NBQXdDO1lBQ3hDLElBQUloZixVQUFVO1lBRWQsOENBQThDO1lBQzlDLElBQUk4YyxXQUFXMVcsUUFBUSxDQUFDLGVBQWUwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVU7Z0JBQ25FLElBQUkwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVU7b0JBQ2hDLE1BQU02WSxZQUFZUixZQUFZaGEsTUFBTSxDQUFDeWEsQ0FBQUEsSUFDbkNBLEVBQUUvWSxJQUFJLEtBQUssVUFBVStZLEVBQUUvWSxJQUFJLEtBQUssV0FDaEMyVyxXQUFXMVcsUUFBUSxDQUFDLGdCQUFnQjBXLFdBQVcxVyxRQUFRLENBQUM7b0JBRTFEcEcsVUFBVSxDQUFDLHlDQUF5QyxFQUFFaWYsVUFBVXBhLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQztvQkFDL0Y3RSxXQUFXLENBQUMseUJBQXlCLENBQUM7b0JBQ3RDaWYsVUFBVWpCLE9BQU8sQ0FBQyxDQUFDVSxRQUFRVDt3QkFDekJqZSxXQUFXLEdBQUdpZSxRQUFRLEVBQUUsRUFBRSxFQUFFUyxPQUFPMWEsSUFBSSxDQUFDLEVBQUUsRUFBRTBhLE9BQU92WSxJQUFJLENBQUMsSUFBSSxFQUFFdVksT0FBT2pFLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQztvQkFDcEc7b0JBQ0EsSUFBSXdFLFVBQVVwYSxNQUFNLEtBQUssR0FBRzt3QkFDMUI3RSxXQUFXO29CQUNiO2dCQUNGLE9BQU8sSUFBSThjLFdBQVcxVyxRQUFRLENBQUMsY0FBYztvQkFDM0MsTUFBTStZLGdCQUFnQlYsWUFBWWhhLE1BQU0sQ0FBQ3lhLENBQUFBLElBQ3ZDQSxFQUFFL1ksSUFBSSxLQUFLLFdBQVcrWSxFQUFFL1ksSUFBSSxLQUFLO29CQUVuQ25HLFVBQVUsQ0FBQywwQ0FBMEMsRUFBRW1mLGNBQWN0YSxNQUFNLENBQUMsMkJBQTJCLENBQUM7b0JBQ3hHN0UsV0FBVyxDQUFDLDZCQUE2QixDQUFDO29CQUMxQ21mLGNBQWNuQixPQUFPLENBQUMsQ0FBQ1UsUUFBUVQ7d0JBQzdCamUsV0FBVyxHQUFHaWUsUUFBUSxFQUFFLEVBQUUsRUFBRVMsT0FBTzFhLElBQUksQ0FBQyxFQUFFLEVBQUUwYSxPQUFPdlksSUFBSSxDQUFDLElBQUksRUFBRXVZLE9BQU9qRSxTQUFTLENBQUMsa0JBQWtCLENBQUM7b0JBQ3BHO29CQUNBLElBQUkwRSxjQUFjdGEsTUFBTSxLQUFLLEdBQUc7d0JBQzlCN0UsV0FBVztvQkFDYjtnQkFDRixPQUFPO29CQUNMQSxVQUFVLENBQUMsaUNBQWlDLEVBQUV5ZSxZQUFZNVosTUFBTSxDQUFDLGlCQUFpQixDQUFDO29CQUNuRjdFLFdBQVcsQ0FBQyw2QkFBNkIsQ0FBQztvQkFDMUMsTUFBTW9mLGdCQUFnQlgsWUFBWVksTUFBTSxDQUFDLENBQUNDLEtBQUtaO3dCQUM3Q1ksR0FBRyxDQUFDWixPQUFPdlksSUFBSSxDQUFDLEdBQUcsQUFBQ21aLENBQUFBLEdBQUcsQ0FBQ1osT0FBT3ZZLElBQUksQ0FBQyxJQUFJLENBQUEsSUFBSzt3QkFDN0MsT0FBT21aO29CQUNULEdBQUcsQ0FBQztvQkFFSjNhLE9BQU80YSxPQUFPLENBQUNILGVBQWVwQixPQUFPLENBQUMsQ0FBQyxDQUFDN1gsTUFBTTBMLE1BQU07d0JBQ2xEN1IsV0FBVyxDQUFDLEVBQUUsRUFBRW1HLEtBQUssRUFBRSxFQUFFMEwsTUFBTSxVQUFVLENBQUM7b0JBQzVDO2dCQUNGO2dCQUVBLE9BQU87b0JBQ0w5UixTQUFTO29CQUNUQztvQkFDQW1ELE1BQU07d0JBQUVzYjt3QkFBYU47b0JBQVU7Z0JBQ2pDO1lBQ0Y7WUFFQSxxQ0FBcUM7WUFDckNuZSxVQUFVLENBQUMsZ0NBQWdDLEVBQUVtZSxVQUFVLEtBQUssQ0FBQztZQUU3RCxJQUFJTSxZQUFZNVosTUFBTSxHQUFHLEdBQUc7Z0JBQzFCLE1BQU1rWixlQUFlVSxXQUFXLENBQUMsRUFBRTtnQkFDbkN6ZSxXQUFXLENBQUMsc0JBQXNCLEVBQUUrZCxhQUFhL1osSUFBSSxDQUFDLEVBQUUsRUFBRStaLGFBQWFpQixjQUFjLENBQUMsc0JBQXNCLENBQUM7Z0JBRTdHaGYsV0FBVztnQkFDWHllLFlBQVlULE9BQU8sQ0FBQyxDQUFDVSxRQUFRVDtvQkFDM0IsTUFBTXVCLFFBQVF2QixVQUFVLElBQUksT0FBT0EsVUFBVSxJQUFJLE9BQU9BLFVBQVUsSUFBSSxPQUFPO29CQUM3RWplLFdBQVcsR0FBR3dmLE1BQU0sQ0FBQyxFQUFFZCxPQUFPMWEsSUFBSSxDQUFDLEVBQUUsRUFBRTBhLE9BQU92WSxJQUFJLENBQUMsR0FBRyxDQUFDO29CQUN2RG5HLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRTBlLE9BQU9qRSxTQUFTLENBQUMsbUJBQW1CLEVBQUVpRSxPQUFPSSxVQUFVLENBQUMsWUFBWSxFQUFFSixPQUFPSyxJQUFJLENBQUMsRUFBRSxDQUFDO29CQUNuSC9lLFdBQVcsQ0FBQyx1QkFBdUIsRUFBRTBlLE9BQU9NLGNBQWMsQ0FBQyxLQUFLLENBQUM7Z0JBQ25FO2dCQUVBLGtCQUFrQjtnQkFDbEIsTUFBTVMsaUJBQWlCaEIsWUFBWVksTUFBTSxDQUFDLENBQUNLLEtBQUtSLElBQU1RLE1BQU1SLEVBQUV6RSxTQUFTLEVBQUU7Z0JBQ3pFLE1BQU1rRixhQUFhbEIsWUFBWVksTUFBTSxDQUFDLENBQUNLLEtBQUtSLElBQU1RLE1BQU1SLEVBQUV4SCxLQUFLLEVBQUU7Z0JBQ2pFLE1BQU1rSSxvQkFBb0IvWCxLQUFLZ1MsS0FBSyxDQUFDNEUsWUFBWVksTUFBTSxDQUFDLENBQUNLLEtBQUtSLElBQU1RLE1BQU1SLEVBQUVGLGNBQWMsRUFBRSxLQUFLUCxZQUFZNVosTUFBTTtnQkFFbkg3RSxXQUFXLENBQUMseUJBQXlCLENBQUM7Z0JBQ3RDQSxXQUFXLENBQUMsNEJBQTRCLEVBQUV5ZixlQUFlLEVBQUUsQ0FBQztnQkFDNUR6ZixXQUFXLENBQUMsa0JBQWtCLEVBQUUyZixXQUFXLEVBQUUsQ0FBQztnQkFDOUMzZixXQUFXLENBQUMsOEJBQThCLEVBQUU0ZixrQkFBa0IsR0FBRyxDQUFDO2dCQUNsRTVmLFdBQVcsQ0FBQywwQkFBMEIsRUFBRXllLFlBQVk1WixNQUFNLEVBQUU7WUFDOUQ7WUFFQSxPQUFPO2dCQUNMOUUsU0FBUztnQkFDVEM7Z0JBQ0FtRCxNQUFNO29CQUNKZ2I7b0JBQ0FNO29CQUNBak0sU0FBUzt3QkFDUHFOLGNBQWNwQixZQUFZNVosTUFBTTt3QkFDaEMrYSxtQkFBbUJuQixZQUFZNVosTUFBTSxHQUFHLElBQUlnRCxLQUFLZ1MsS0FBSyxDQUFDNEUsWUFBWVksTUFBTSxDQUFDLENBQUNLLEtBQUtSLElBQU1RLE1BQU1SLEVBQUVGLGNBQWMsRUFBRSxLQUFLUCxZQUFZNVosTUFBTSxJQUFJO3dCQUN6SWtaLGNBQWNVLFdBQVcsQ0FBQyxFQUFFLEVBQUV6YSxRQUFRO29CQUN4QztnQkFDRjtZQUNGO1FBRUYsRUFBRSxPQUFPbEIsT0FBTztZQUNkLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY2dWLHVCQUF1QnZWLEtBQWEsRUFBRU4sTUFBYyxFQUE0QjtRQUM1RixJQUFJO1lBQ0Ysd0RBQXdEO1lBQ3hELE1BQU0sQ0FBQzJnQixlQUFlcEgsZ0JBQWdCcUgsZ0JBQWdCLEdBQUcsTUFBTWhKLFFBQVFDLEdBQUcsQ0FBQztnQkFDekU1UyxlQUFNLENBQUNDLE9BQU8sQ0FBQ3dOLEtBQUs7Z0JBQ3BCek4sZUFBTSxDQUFDeUssYUFBYSxDQUFDZ0QsS0FBSyxLQUFLLE1BQU16TixlQUFNLENBQUNnTCxnQkFBZ0IsQ0FBQ3lDLEtBQUssS0FBSyxNQUFNek4sZUFBTSxDQUFDOEssV0FBVyxDQUFDMkMsS0FBSztnQkFDckd6TixlQUFNLENBQUN5SyxhQUFhLENBQUNnRCxLQUFLLENBQUM7b0JBQUV0TixPQUFPO3dCQUFFa0IsUUFBUTtvQkFBUztnQkFBRSxLQUN6RCxNQUFNckIsZUFBTSxDQUFDZ0wsZ0JBQWdCLENBQUN5QyxLQUFLLENBQUM7b0JBQUV0TixPQUFPO3dCQUFFa0IsUUFBUTtvQkFBUztnQkFBRSxLQUNsRSxNQUFNckIsZUFBTSxDQUFDOEssV0FBVyxDQUFDMkMsS0FBSyxDQUFDO29CQUFFdE4sT0FBTzt3QkFBRWtCLFFBQVE7b0JBQVM7Z0JBQUU7YUFDOUQ7WUFFRCxpRkFBaUY7WUFDakYsTUFBTXVhLG9CQUFvQjtnQkFDeEJDLGlCQUFpQnBZLEtBQUtnUyxLQUFLLENBQUNoUyxLQUFLRSxNQUFNLEtBQUssS0FBSztnQkFDakRtWSxvQkFBb0JyWSxLQUFLZ1MsS0FBSyxDQUFDaFMsS0FBS0UsTUFBTSxLQUFLLEtBQUs7Z0JBQ3BEb1ksZUFBZXRZLEtBQUtnUyxLQUFLLENBQUNoUyxLQUFLRSxNQUFNLEtBQUssS0FBSztnQkFDL0NxWSxvQkFBb0J2WSxLQUFLZ1MsS0FBSyxDQUFDaFMsS0FBS0UsTUFBTSxLQUFLLEtBQUs7Z0JBQ3BEc1ksbUJBQW1CeFksS0FBS2dTLEtBQUssQ0FBQ2hTLEtBQUtFLE1BQU0sS0FBSyxLQUFLLElBQUksU0FBUztZQUNsRTtZQUVBLDhDQUE4QztZQUM5QyxNQUFNeVUsV0FBVztnQkFDZjtvQkFBRXhZLE1BQU07b0JBQWdDc2MsWUFBWU4sa0JBQWtCQyxlQUFlLEdBQUc7Z0JBQUU7Z0JBQzFGO29CQUFFamMsTUFBTTtvQkFBbUJzYyxZQUFZTixrQkFBa0JFLGtCQUFrQixHQUFHO2dCQUFFO2dCQUNoRjtvQkFBRWxjLE1BQU07b0JBQXNCc2MsWUFBWU4sa0JBQWtCRyxhQUFhLEdBQUc7Z0JBQUU7Z0JBQzlFO29CQUFFbmMsTUFBTTtvQkFBcUJzYyxZQUFZTixrQkFBa0JLLGlCQUFpQixHQUFHO2dCQUFFO2FBQ2xGLENBQUMzQyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUEsRUFBRTBDLFVBQVUsR0FBRzNDLEVBQUUyQyxVQUFVO1lBRTVDLE1BQU10Z0IsVUFBVSxDQUFDLG1DQUFtQyxDQUFDLEdBQ3RDLENBQUMsbUNBQW1DLEVBQUV3YyxRQUFRLENBQUMsRUFBRSxDQUFDeFksSUFBSSxDQUFDLEVBQUUsRUFBRXdZLFFBQVEsQ0FBQyxFQUFFLENBQUM4RCxVQUFVLENBQUMsTUFBTSxDQUFDLEdBQ3pGLENBQUMsMEJBQTBCLENBQUMsR0FDNUIsQ0FBQyxvQkFBb0IsRUFBRU4sa0JBQWtCQyxlQUFlLENBQUMsR0FBRyxDQUFDLEdBQzdELENBQUMsdUJBQXVCLEVBQUVELGtCQUFrQkUsa0JBQWtCLENBQUMsR0FBRyxDQUFDLEdBQ25FLENBQUMsa0JBQWtCLEVBQUVGLGtCQUFrQkcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxHQUN6RCxDQUFDLHdCQUF3QixFQUFFSCxrQkFBa0JJLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxHQUN0RSxDQUFDLGdDQUFnQyxFQUFFSixrQkFBa0JLLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxHQUM3RSxDQUFDLHdCQUF3QixDQUFDLEdBQzFCN0QsU0FBU3BFLEdBQUcsQ0FBQyxDQUFDckMsU0FBU2tJLFFBQ3JCLEdBQUdBLFFBQVEsRUFBRSxFQUFFLEVBQUVsSSxRQUFRL1IsSUFBSSxDQUFDLEVBQUUsRUFBRStSLFFBQVF1SyxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQ3ZEamIsSUFBSSxDQUFDLFFBQ1AsQ0FBQywyQkFBMkIsQ0FBQyxHQUM3QixDQUFDLG1CQUFtQixFQUFFeWEsY0FBYyxFQUFFLENBQUMsR0FDdkMsQ0FBQyxvQkFBb0IsRUFBRXBILGVBQWUsRUFBRSxDQUFDLEdBQ3pDLENBQUMscUJBQXFCLEVBQUVxSCxpQkFBaUI7WUFFeEQsT0FBTztnQkFDTGhnQixTQUFTO2dCQUNUQztnQkFDQW1ELE1BQU07b0JBQ0o2YztvQkFDQXhEO29CQUNBaEssU0FBUzt3QkFDUHNOO3dCQUNBcEg7d0JBQ0FxSDt3QkFDQVEsYUFBYVAsa0JBQWtCRSxrQkFBa0IsR0FBR0Ysa0JBQWtCQyxlQUFlLEdBQUcsYUFBYTtvQkFDdkc7Z0JBQ0Y7WUFDRjtRQUVGLEVBQUUsT0FBT25kLE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNpVix3QkFBd0J4VixLQUFhLEVBQUVOLE1BQWMsRUFBNEI7UUFDN0YsSUFBSTtZQUNGLE1BQU1nZixZQUFZLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUMzZTtZQUV4QywwRUFBMEU7WUFDMUUsTUFBTStnQixjQUFjO2dCQUNsQkMsY0FBYzVZLEtBQUtnUyxLQUFLLENBQUNoUyxLQUFLRSxNQUFNLEtBQUssU0FBUztnQkFDbEQyWSxlQUFlN1ksS0FBS2dTLEtBQUssQ0FBQ2hTLEtBQUtFLE1BQU0sS0FBSyxLQUFLO2dCQUMvQzRZLGtCQUFrQjtvQkFDaEJDLFlBQVkvWSxLQUFLZ1MsS0FBSyxDQUFDaFMsS0FBS0UsTUFBTSxLQUFLLFNBQVM7b0JBQ2hEOFksS0FBS2haLEtBQUtnUyxLQUFLLENBQUNoUyxLQUFLRSxNQUFNLEtBQUssU0FBUztvQkFDekMrWSxZQUFZalosS0FBS2dTLEtBQUssQ0FBQ2hTLEtBQUtFLE1BQU0sS0FBSyxTQUFTO2dCQUNsRDtnQkFDQWdaLFVBQVU7b0JBQ1JDLFFBQVFuWixLQUFLZ1MsS0FBSyxDQUFDaFMsS0FBS0UsTUFBTSxLQUFLLFNBQVM7b0JBQzVDa1osY0FBY3BaLEtBQUtnUyxLQUFLLENBQUNoUyxLQUFLRSxNQUFNLEtBQUssU0FBUztvQkFDbERtWixXQUFXclosS0FBS2dTLEtBQUssQ0FBQ2hTLEtBQUtFLE1BQU0sS0FBSyxRQUFRO29CQUM5Q29aLFdBQVd0WixLQUFLZ1MsS0FBSyxDQUFDaFMsS0FBS0UsTUFBTSxLQUFLLFNBQVM7Z0JBQ2pEO1lBQ0Y7WUFFQSx3QkFBd0I7WUFDeEIsTUFBTXFaLHNCQUFzQnpjLE9BQU8wYyxNQUFNLENBQUNiLFlBQVlHLGdCQUFnQixFQUFFdEIsTUFBTSxDQUFDLENBQUMxQixHQUFHQyxJQUFNRCxJQUFJQyxHQUFHO1lBQ2hHLE1BQU0wRCxzQkFBc0IzYyxPQUFPMGMsTUFBTSxDQUFDYixZQUFZTyxRQUFRLEVBQUUxQixNQUFNLENBQUMsQ0FBQzFCLEdBQUdDLElBQU1ELElBQUlDLEdBQUc7WUFFeEYsTUFBTTVkLFVBQVUsQ0FBQywwQkFBMEIsRUFBRW1lLFVBQVUsS0FBSyxDQUFDLEdBQzlDLENBQUMsdUJBQXVCLEVBQUVxQyxZQUFZQyxZQUFZLENBQUM5SSxjQUFjLEdBQUcsRUFBRSxDQUFDLEdBQ3ZFLENBQUMsd0JBQXdCLEVBQUU2SSxZQUFZRSxhQUFhLENBQUMsS0FBSyxDQUFDLEdBQzNELENBQUMsMEJBQTBCLENBQUMsR0FDNUIsQ0FBQyxnQkFBZ0IsRUFBRUYsWUFBWUcsZ0JBQWdCLENBQUNDLFVBQVUsQ0FBQ2pKLGNBQWMsR0FBRyxFQUFFLEVBQUU5UCxLQUFLZ1MsS0FBSyxDQUFDLEFBQUMyRyxZQUFZRyxnQkFBZ0IsQ0FBQ0MsVUFBVSxHQUFHUSxzQkFBdUIsS0FBSyxJQUFJLENBQUMsR0FDdkssQ0FBQyxTQUFTLEVBQUVaLFlBQVlHLGdCQUFnQixDQUFDRSxHQUFHLENBQUNsSixjQUFjLEdBQUcsRUFBRSxFQUFFOVAsS0FBS2dTLEtBQUssQ0FBQyxBQUFDMkcsWUFBWUcsZ0JBQWdCLENBQUNFLEdBQUcsR0FBR08sc0JBQXVCLEtBQUssSUFBSSxDQUFDLEdBQ2xKLENBQUMsZ0JBQWdCLEVBQUVaLFlBQVlHLGdCQUFnQixDQUFDRyxVQUFVLENBQUNuSixjQUFjLEdBQUcsRUFBRSxFQUFFOVAsS0FBS2dTLEtBQUssQ0FBQyxBQUFDMkcsWUFBWUcsZ0JBQWdCLENBQUNHLFVBQVUsR0FBR00sc0JBQXVCLEtBQUssTUFBTSxDQUFDLEdBQ3pLLENBQUMsNkJBQTZCLENBQUMsR0FDL0IsQ0FBQyxrQkFBa0IsRUFBRVosWUFBWU8sUUFBUSxDQUFDQyxNQUFNLENBQUNySixjQUFjLEdBQUcsRUFBRSxFQUFFOVAsS0FBS2dTLEtBQUssQ0FBQyxBQUFDMkcsWUFBWU8sUUFBUSxDQUFDQyxNQUFNLEdBQUdNLHNCQUF1QixLQUFLLElBQUksQ0FBQyxHQUNqSixDQUFDLGtCQUFrQixFQUFFZCxZQUFZTyxRQUFRLENBQUNFLFlBQVksQ0FBQ3RKLGNBQWMsR0FBRyxFQUFFLEVBQUU5UCxLQUFLZ1MsS0FBSyxDQUFDLEFBQUMyRyxZQUFZTyxRQUFRLENBQUNFLFlBQVksR0FBR0ssc0JBQXVCLEtBQUssSUFBSSxDQUFDLEdBQzdKLENBQUMsZUFBZSxFQUFFZCxZQUFZTyxRQUFRLENBQUNHLFNBQVMsQ0FBQ3ZKLGNBQWMsR0FBRyxFQUFFLEVBQUU5UCxLQUFLZ1MsS0FBSyxDQUFDLEFBQUMyRyxZQUFZTyxRQUFRLENBQUNHLFNBQVMsR0FBR0ksc0JBQXVCLEtBQUssSUFBSSxDQUFDLEdBQ3BKLENBQUMsZUFBZSxFQUFFZCxZQUFZTyxRQUFRLENBQUNJLFNBQVMsQ0FBQ3hKLGNBQWMsR0FBRyxFQUFFLEVBQUU5UCxLQUFLZ1MsS0FBSyxDQUFDLEFBQUMyRyxZQUFZTyxRQUFRLENBQUNJLFNBQVMsR0FBR0csc0JBQXVCLEtBQUssTUFBTSxDQUFDLEdBQ3RKLENBQUMsc0JBQXNCLENBQUMsR0FDeEIsQ0FBQywyQkFBMkIsRUFBRTNjLE9BQU80YSxPQUFPLENBQUNpQixZQUFZRyxnQkFBZ0IsRUFBRWpELElBQUksQ0FBQyxDQUFDLEdBQUVDLEVBQUUsRUFBRSxHQUFFQyxFQUFFLEdBQUtBLElBQUlELEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUNoSCxDQUFDLDJCQUEyQixFQUFFaFosT0FBTzRhLE9BQU8sQ0FBQ2lCLFlBQVlPLFFBQVEsRUFBRXJELElBQUksQ0FBQyxDQUFDLEdBQUVDLEVBQUUsRUFBRSxHQUFFQyxFQUFFLEdBQUtBLElBQUlELEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUN4RyxDQUFDLHFCQUFxQixFQUFFNkMsWUFBWUUsYUFBYSxHQUFHLEtBQUssY0FBY0YsWUFBWUUsYUFBYSxHQUFHLEtBQUssU0FBUyxZQUFZO1lBRTVJLE9BQU87Z0JBQ0wzZ0IsU0FBUztnQkFDVEM7Z0JBQ0FtRCxNQUFNO29CQUNKcWQ7b0JBQ0FyQztvQkFDQW9ELFVBQVU7d0JBQ1JDLFlBQVk3YyxPQUFPNGEsT0FBTyxDQUFDaUIsWUFBWUcsZ0JBQWdCLEVBQUVqRCxJQUFJLENBQUMsQ0FBQyxHQUFFQyxFQUFFLEVBQUUsR0FBRUMsRUFBRSxHQUFLQSxJQUFJRCxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7d0JBQzFGOEQsWUFBWTljLE9BQU80YSxPQUFPLENBQUNpQixZQUFZTyxRQUFRLEVBQUVyRCxJQUFJLENBQUMsQ0FBQyxHQUFFQyxFQUFFLEVBQUUsR0FBRUMsRUFBRSxHQUFLQSxJQUFJRCxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7d0JBQ2xGK0QsY0FBY2xCLFlBQVlFLGFBQWEsR0FBRyxLQUFLLGNBQWNGLFlBQVlFLGFBQWEsR0FBRyxLQUFLLFNBQVM7b0JBQ3pHO2dCQUNGO1lBQ0Y7UUFFRixFQUFFLE9BQU81ZCxPQUFPO1lBQ2QsT0FBTztnQkFDTC9DLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFja1YsMEJBQTBCelYsS0FBYSxFQUFFTixNQUFjLEVBQTRCO1FBQy9GLElBQUk7WUFDRixNQUFNZ2YsWUFBWSxJQUFJLENBQUNDLGdCQUFnQixDQUFDM2U7WUFDeEMsTUFBTTRlLFlBQVksSUFBSSxDQUFDQyxZQUFZLENBQUNIO1lBRXBDLG1DQUFtQztZQUNuQyxNQUFNd0QsY0FBYyxNQUFNdmQsZUFBTSxDQUFDQyxPQUFPLENBQUN3TixLQUFLLENBQUM7Z0JBQzdDdE4sT0FBTztvQkFBRXdDLFdBQVc7d0JBQUVxVCxLQUFLaUU7b0JBQVU7Z0JBQUU7WUFDekM7WUFFQSxNQUFNeUIsZ0JBQWdCLE1BQU0xYixlQUFNLENBQUNDLE9BQU8sQ0FBQ3dOLEtBQUs7WUFFaEQsOEVBQThFO1lBQzlFLE1BQU0rUCxxQkFBcUI7Z0JBQ3pCQyxjQUFjRjtnQkFDZEcsZ0JBQWdCaEM7Z0JBQ2hCaUMsS0FBS2xhLEtBQUtnUyxLQUFLLENBQUNoUyxLQUFLRSxNQUFNLEtBQUssTUFBTTtnQkFDdENpYSxLQUFLbmEsS0FBS2dTLEtBQUssQ0FBQ2hTLEtBQUtFLE1BQU0sS0FBSyxPQUFPO2dCQUN2Q2thLGFBQWE7Z0JBQ2JDLGtCQUFrQjtvQkFDaEJmLFdBQVd0WixLQUFLZ1MsS0FBSyxDQUFDaFMsS0FBS0UsTUFBTSxLQUFLLE9BQU87b0JBQzdDb2EsT0FBT3RhLEtBQUtnUyxLQUFLLENBQUNoUyxLQUFLRSxNQUFNLEtBQUssT0FBTztvQkFDekNrWixjQUFjcFosS0FBS2dTLEtBQUssQ0FBQ2hTLEtBQUtFLE1BQU0sS0FBSyxPQUFPO29CQUNoRG1aLFdBQVdyWixLQUFLZ1MsS0FBSyxDQUFDaFMsS0FBS0UsTUFBTSxLQUFLLE9BQU87Z0JBQy9DO1lBQ0Y7WUFFQSwwQkFBMEI7WUFDMUI2WixtQkFBbUJLLFdBQVcsR0FBR3BhLEtBQUtnUyxLQUFLLENBQUMsQUFBQytILG1CQUFtQkksR0FBRyxHQUFHSixtQkFBbUJHLEdBQUcsR0FBSSxNQUFNO1lBRXRHLE1BQU1LLHVCQUF1QnpkLE9BQU8wYyxNQUFNLENBQUNPLG1CQUFtQk0sZ0JBQWdCLEVBQUU3QyxNQUFNLENBQUMsQ0FBQzFCLEdBQUdDLElBQU1ELElBQUlDLEdBQUc7WUFFeEcsTUFBTTVkLFVBQVUsQ0FBQyxzQ0FBc0MsRUFBRW1lLFVBQVUsS0FBSyxDQUFDLEdBQzFELENBQUMscUJBQXFCLENBQUMsR0FDdkIsQ0FBQyxrQkFBa0IsRUFBRXlELG1CQUFtQkMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxHQUN4RCxDQUFDLG9CQUFvQixFQUFFRCxtQkFBbUJFLGNBQWMsQ0FBQyxFQUFFLENBQUMsR0FDNUQsQ0FBQyxxQ0FBcUMsRUFBRUYsbUJBQW1CRyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQ2xFLENBQUMsbUNBQW1DLEVBQUVILG1CQUFtQkksR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUNoRSxDQUFDLGtCQUFrQixFQUFFSixtQkFBbUJLLFdBQVcsQ0FBQyxHQUFHLEVBQUVMLG1CQUFtQkssV0FBVyxJQUFJLElBQUksY0FBYyx1QkFBdUIsSUFBSSxDQUFDLEdBQ3pJLENBQUMsa0NBQWtDLENBQUMsR0FDcEMsQ0FBQyxlQUFlLEVBQUVMLG1CQUFtQk0sZ0JBQWdCLENBQUNmLFNBQVMsQ0FBQ3hKLGNBQWMsR0FBRyxFQUFFLENBQUMsR0FDcEYsQ0FBQyxXQUFXLEVBQUVpSyxtQkFBbUJNLGdCQUFnQixDQUFDQyxLQUFLLENBQUN4SyxjQUFjLEdBQUcsRUFBRSxDQUFDLEdBQzVFLENBQUMsa0JBQWtCLEVBQUVpSyxtQkFBbUJNLGdCQUFnQixDQUFDakIsWUFBWSxDQUFDdEosY0FBYyxHQUFHLEVBQUUsQ0FBQyxHQUMxRixDQUFDLGVBQWUsRUFBRWlLLG1CQUFtQk0sZ0JBQWdCLENBQUNoQixTQUFTLENBQUN2SixjQUFjLEdBQUcsRUFBRSxDQUFDLEdBQ3BGLENBQUMsaUNBQWlDLEVBQUV5SyxxQkFBcUJ6SyxjQUFjLEdBQUcsSUFBSSxDQUFDLEdBQy9FLENBQUMsNkJBQTZCLENBQUMsR0FDL0IsQ0FBQyxnQkFBZ0IsRUFBRWlLLG1CQUFtQkcsR0FBRyxDQUFDLGVBQWUsQ0FBQyxHQUMxRCxDQUFDLG1CQUFtQixFQUFFbGEsS0FBS2dTLEtBQUssQ0FBQytILG1CQUFtQkcsR0FBRyxHQUFJSCxDQUFBQSxtQkFBbUJJLEdBQUcsR0FBRyxFQUFDLEdBQUksU0FBUyxDQUFDLEdBQ25HLENBQUMsMkNBQTJDLEVBQUVKLG1CQUFtQk0sZ0JBQWdCLENBQUNoQixTQUFTLENBQUN2SixjQUFjLEdBQUcsR0FBRyxDQUFDLEdBQ2pILENBQUMsa0JBQWtCLEVBQUVpSyxtQkFBbUJLLFdBQVcsSUFBSSxJQUFJLHlDQUF5Qyw4Q0FBOEM7WUFFakssT0FBTztnQkFDTGxpQixTQUFTO2dCQUNUQztnQkFDQW1ELE1BQU07b0JBQ0p5ZTtvQkFDQXpEO29CQUNBa0UsWUFBWTt3QkFDVjVjLFFBQVFtYyxtQkFBbUJLLFdBQVcsSUFBSSxJQUFJLFlBQVk7d0JBQzFESyxlQUFlemEsS0FBS2dTLEtBQUssQ0FBQytILG1CQUFtQkcsR0FBRyxHQUFJSCxDQUFBQSxtQkFBbUJJLEdBQUcsR0FBRyxFQUFDO3dCQUM5RU8sWUFBWUg7b0JBQ2Q7Z0JBQ0Y7WUFDRjtRQUVGLEVBQUUsT0FBT3RmLE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNtViwwQkFBMEIxVixLQUFhLEVBQUVOLE1BQWMsRUFBNEI7UUFDL0YsSUFBSTtZQUNGLG9CQUFvQjtZQUNwQixNQUFNK0osWUFBWSxNQUFNOUUsZUFBTSxDQUFDMkgsUUFBUSxDQUFDZ0csUUFBUSxDQUFDO2dCQUMvQzdMLFFBQVE7b0JBQ05OLElBQUk7b0JBQ0o1QixNQUFNO29CQUNOeUIsUUFBUTtvQkFDUnNCLFdBQVc7b0JBQ1grUSxRQUFRO3dCQUFFNVIsUUFBUTs0QkFBRXdHLE9BQU87d0JBQUs7b0JBQUU7Z0JBQ3BDO1lBQ0Y7WUFFQSw2QkFBNkI7WUFDN0IsTUFBTThWLGtCQUFrQnRaLFVBQVVrUCxHQUFHLENBQUNyTSxDQUFBQTtnQkFDcEMsd0NBQXdDO2dCQUN4QyxNQUFNaVQsaUJBQWlCblgsS0FBS2dTLEtBQUssQ0FBQ2hTLEtBQUtFLE1BQU0sS0FBSyxLQUFLLEtBQUssVUFBVTtnQkFDdEUsTUFBTTBhLGNBQWM1YSxLQUFLZ1MsS0FBSyxDQUFDaFMsS0FBS0UsTUFBTSxLQUFLLEtBQUssS0FBSyxVQUFVO2dCQUNuRSxNQUFNMmEsbUJBQW1CN2EsS0FBS2dTLEtBQUssQ0FBQ2hTLEtBQUtFLE1BQU0sS0FBSyxNQUFNLEtBQUssaUJBQWlCO2dCQUVoRixPQUFPO29CQUNMLEdBQUdnRSxRQUFRO29CQUNYaVQ7b0JBQ0F5RDtvQkFDQUM7b0JBQ0FMLFlBQVl4YSxLQUFLZ1MsS0FBSyxDQUFDLEFBQUNtRixDQUFBQSxpQkFBaUJ5RCxXQUFVLElBQUs7Z0JBQzFEO1lBQ0YsR0FBRy9FLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxFQUFFeUUsVUFBVSxHQUFHMUUsRUFBRTBFLFVBQVU7WUFFN0MsTUFBTXZJLGlCQUFpQjVRLFVBQVVyRSxNQUFNO1lBQ3ZDLE1BQU04ZCxrQkFBa0J6WixVQUFVekUsTUFBTSxDQUFDdVYsQ0FBQUEsSUFBS0EsRUFBRXZVLE1BQU0sS0FBSyxVQUFVWixNQUFNO1lBQzNFLE1BQU0rYSxvQkFBb0I0QyxnQkFBZ0IzZCxNQUFNLEdBQUcsSUFDakRnRCxLQUFLZ1MsS0FBSyxDQUFDMkksZ0JBQWdCbkQsTUFBTSxDQUFDLENBQUNLLEtBQUsxRixJQUFNMEYsTUFBTTFGLEVBQUVnRixjQUFjLEVBQUUsS0FBS3dELGdCQUFnQjNkLE1BQU0sSUFBSTtZQUN2RyxNQUFNK2QsaUJBQWlCSixnQkFBZ0IzZCxNQUFNLEdBQUcsSUFDOUNnRCxLQUFLZ1MsS0FBSyxDQUFDMkksZ0JBQWdCbkQsTUFBTSxDQUFDLENBQUNLLEtBQUsxRixJQUFNMEYsTUFBTTFGLEVBQUV5SSxXQUFXLEVBQUUsS0FBS0QsZ0JBQWdCM2QsTUFBTSxJQUFJO1lBRXBHLElBQUk3RSxVQUFVLENBQUMsdUNBQXVDLENBQUM7WUFFdkQsSUFBSXdpQixnQkFBZ0IzZCxNQUFNLEdBQUcsR0FBRztnQkFDOUIsTUFBTWdlLGNBQWNMLGVBQWUsQ0FBQyxFQUFFO2dCQUN0Q3hpQixXQUFXLENBQUMsaUNBQWlDLEVBQUU2aUIsWUFBWTdlLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQ25FaEUsV0FBVyxDQUFDLHVCQUF1QixFQUFFNmlCLFlBQVk3RCxjQUFjLENBQUMsR0FBRyxDQUFDO2dCQUNwRWhmLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRTZpQixZQUFZSixXQUFXLENBQUMsR0FBRyxDQUFDO2dCQUM3RHppQixXQUFXLENBQUMsMkJBQTJCLEVBQUU2aUIsWUFBWUgsZ0JBQWdCLENBQUMsWUFBWSxDQUFDO2dCQUVuRjFpQixXQUFXLENBQUMseUJBQXlCLENBQUM7Z0JBQ3RDQSxXQUFXLENBQUMsb0JBQW9CLEVBQUU4WixlQUFlLEVBQUUsQ0FBQztnQkFDcEQ5WixXQUFXLENBQUMscUJBQXFCLEVBQUUyaUIsZ0JBQWdCLEVBQUUsQ0FBQztnQkFDdEQzaUIsV0FBVyxDQUFDLDRCQUE0QixFQUFFNGYsa0JBQWtCLEdBQUcsQ0FBQztnQkFDaEU1ZixXQUFXLENBQUMsd0JBQXdCLEVBQUU0aUIsZUFBZSxLQUFLLENBQUM7Z0JBRTNENWlCLFdBQVcsQ0FBQyxvQ0FBb0MsQ0FBQztnQkFDakR3aUIsZ0JBQWdCcGQsS0FBSyxDQUFDLEdBQUcsR0FBRzRZLE9BQU8sQ0FBQyxDQUFDalMsVUFBVWtTO29CQUM3QyxNQUFNdUIsUUFBUXpULFNBQVN0RyxNQUFNLEtBQUssV0FBVyxPQUFPc0csU0FBU3RHLE1BQU0sS0FBSyxhQUFhLE9BQU87b0JBQzVGekYsV0FBVyxHQUFHaWUsUUFBUSxFQUFFLEVBQUUsRUFBRXVCLE1BQU0sQ0FBQyxFQUFFelQsU0FBUy9ILElBQUksQ0FBQyxFQUFFLENBQUM7b0JBQ3REaEUsV0FBVyxDQUFDLE1BQU0sRUFBRStMLFNBQVNpVCxjQUFjLENBQUMsaUJBQWlCLEVBQUVqVCxTQUFTMFcsV0FBVyxDQUFDLGVBQWUsRUFBRTFXLFNBQVMyVyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUM7Z0JBQ3ZJO2dCQUVBMWlCLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQztnQkFDakNBLFdBQVcsQ0FBQyxpQkFBaUIsRUFBRTZpQixZQUFZN2UsSUFBSSxDQUFDLEVBQUUsRUFBRTZlLFlBQVlSLFVBQVUsQ0FBQyxlQUFlLENBQUM7Z0JBQzNGcmlCLFdBQVcsQ0FBQyx3QkFBd0IsRUFBRTZILEtBQUtnUyxLQUFLLENBQUMsQUFBQzhJLGtCQUFrQjdJLGlCQUFrQixLQUFLLEdBQUcsQ0FBQztnQkFDL0Y5WixXQUFXLENBQUMsc0JBQXNCLEVBQUU0aUIsa0JBQWtCLEtBQUssY0FBY0Esa0JBQWtCLEtBQUssU0FBUyxxQkFBcUI7WUFDaEksT0FBTztnQkFDTDVpQixXQUFXLENBQUMsZ0ZBQWdGLENBQUM7WUFDL0Y7WUFFQSxPQUFPO2dCQUNMRCxTQUFTO2dCQUNUQztnQkFDQW1ELE1BQU07b0JBQ0pxZjtvQkFDQWhRLFNBQVM7d0JBQ1BzSDt3QkFDQTZJO3dCQUNBL0M7d0JBQ0FnRDt3QkFDQUMsYUFBYUwsZUFBZSxDQUFDLEVBQUUsRUFBRXhlLFFBQVE7d0JBQ3pDOGUsaUJBQWlCaEosaUJBQWlCLElBQUlqUyxLQUFLZ1MsS0FBSyxDQUFDLEFBQUM4SSxrQkFBa0I3SSxpQkFBa0IsT0FBTztvQkFDL0Y7Z0JBQ0Y7WUFDRjtRQUVGLEVBQUUsT0FBT2hYLE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWN3VixpQkFBaUIvVixLQUFhLEVBQUVOLE1BQWMsRUFBNEI7UUFDdEYsSUFBSTtZQUNGLE1BQU1nZixZQUFZLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUMzZTtZQUN4QyxNQUFNNGUsWUFBWSxJQUFJLENBQUNDLFlBQVksQ0FBQ0g7WUFFcEMscURBQXFEO1lBQ3JELE1BQU00RSxhQUFhLE1BQU0zZSxlQUFNLENBQUNnTSxJQUFJLENBQUMyQixRQUFRLENBQUM7Z0JBQzVDeE4sT0FBTztvQkFDTHdDLFdBQVc7d0JBQUVxVCxLQUFLaUU7b0JBQVU7b0JBQzVCN1osSUFBSTt3QkFDRjs0QkFBRTZMLE9BQU87Z0NBQUVXLFVBQVU7Z0NBQVNDLE1BQU07NEJBQWM7d0JBQUU7d0JBQ3BEOzRCQUFFWixPQUFPO2dDQUFFVyxVQUFVO2dDQUFRQyxNQUFNOzRCQUFjO3dCQUFFO3dCQUNuRDs0QkFBRVosT0FBTztnQ0FBRVcsVUFBVTtnQ0FBWUMsTUFBTTs0QkFBYzt3QkFBRTt3QkFDdkQ7NEJBQUVaLE9BQU87Z0NBQUVXLFVBQVU7Z0NBQVFDLE1BQU07NEJBQWM7d0JBQUU7cUJBQ3BEO2dCQUNIO2dCQUNBa0IsU0FBUztvQkFDUDZRLFlBQVk7d0JBQUU5YyxRQUFROzRCQUFFTixJQUFJOzRCQUFNNUIsTUFBTTs0QkFBTUMsT0FBTzt3QkFBSztvQkFBRTtnQkFDOUQ7WUFDRjtZQUVBLDBDQUEwQztZQUMxQyxNQUFNZ2YsV0FBVyxNQUFNN2UsZUFBTSxDQUFDQyxPQUFPLENBQUN3TixLQUFLLENBQUM7Z0JBQzFDdE4sT0FBTztvQkFBRXdDLFdBQVc7d0JBQUVxVCxLQUFLaUU7b0JBQVU7Z0JBQUU7WUFDekM7WUFFQSwwQkFBMEI7WUFDMUIsTUFBTTZFLHNCQUFzQkgsV0FBV3RlLE1BQU0sQ0FBQzJMLENBQUFBLE9BQVFBLEtBQUszSyxNQUFNLEtBQUssUUFBUVosTUFBTTtZQUNwRixNQUFNc2Usa0JBQWtCSixXQUFXbGUsTUFBTTtZQUN6QyxNQUFNdWUsc0JBQXNCRCxrQkFBa0IsSUFBSXRiLEtBQUtnUyxLQUFLLENBQUMsQUFBQ3FKLHNCQUFzQkMsa0JBQW1CLE9BQU87WUFFOUcsd0JBQXdCO1lBQ3hCLE1BQU1FLGdCQUFnQk4sV0FBVzFELE1BQU0sQ0FBQyxDQUFDQyxLQUFLbFA7Z0JBQzVDLElBQUlBLEtBQUs0UyxVQUFVLEVBQUU7b0JBQ25CLE1BQU1NLE1BQU1sVCxLQUFLNFMsVUFBVSxDQUFDcGQsRUFBRTtvQkFDOUIsSUFBSSxDQUFDMFosR0FBRyxDQUFDZ0UsSUFBSSxFQUFFO3dCQUNiaEUsR0FBRyxDQUFDZ0UsSUFBSSxHQUFHOzRCQUNUdGYsTUFBTW9NLEtBQUs0UyxVQUFVLENBQUNoZixJQUFJOzRCQUMxQkMsT0FBT21NLEtBQUs0UyxVQUFVLENBQUMvZSxLQUFLOzRCQUM1QnlULE9BQU87NEJBQ1ArQyxXQUFXO3dCQUNiO29CQUNGO29CQUNBNkUsR0FBRyxDQUFDZ0UsSUFBSSxDQUFDNUwsS0FBSztvQkFDZCxJQUFJdEgsS0FBSzNLLE1BQU0sS0FBSyxRQUFRO3dCQUMxQjZaLEdBQUcsQ0FBQ2dFLElBQUksQ0FBQzdJLFNBQVM7b0JBQ3BCO2dCQUNGO2dCQUNBLE9BQU82RTtZQUNULEdBQUcsQ0FBQztZQUVKLE1BQU12QyxtQkFBbUJwWSxPQUFPMGMsTUFBTSxDQUFDZ0MsZUFBZWpMLEdBQUcsQ0FBQyxDQUFDbUwsU0FBaUIsQ0FBQTtvQkFDMUUsR0FBR0EsTUFBTTtvQkFDVEMsZ0JBQWdCRCxPQUFPN0wsS0FBSyxHQUFHLElBQUk3UCxLQUFLZ1MsS0FBSyxDQUFDLEFBQUMwSixPQUFPOUksU0FBUyxHQUFHOEksT0FBTzdMLEtBQUssR0FBSSxPQUFPO2dCQUMzRixDQUFBLEdBQUlnRyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUEsRUFBRTRGLGNBQWMsR0FBRzdGLEVBQUU2RixjQUFjO1lBRXRELHdCQUF3QjtZQUN4QixNQUFNQyxpQkFBaUI7Z0JBQ3JCaEQsY0FBYzVZLEtBQUtnUyxLQUFLLENBQUNoUyxLQUFLRSxNQUFNLEtBQUssU0FBUztnQkFDbEQyYixhQUFhN2IsS0FBS2dTLEtBQUssQ0FBQ2hTLEtBQUtFLE1BQU0sS0FBSyxPQUFPO2dCQUMvQzRiLFlBQVk5YixLQUFLZ1MsS0FBSyxDQUFDaFMsS0FBS0UsTUFBTSxLQUFLLEtBQUssSUFBSSxhQUFhO1lBQy9EO1lBRUEsSUFBSS9ILFVBQVUsQ0FBQyxtQ0FBbUMsRUFBRW1lLFVBQVUsS0FBSyxDQUFDO1lBQ3BFbmUsV0FBVyxDQUFDLHFCQUFxQixDQUFDO1lBQ2xDQSxXQUFXLENBQUMsY0FBYyxFQUFFaWpCLFNBQVMsRUFBRSxDQUFDO1lBQ3hDampCLFdBQVcsQ0FBQyxxQkFBcUIsRUFBRW1qQixnQkFBZ0IsRUFBRSxDQUFDO1lBQ3REbmpCLFdBQVcsQ0FBQyx3QkFBd0IsRUFBRWtqQixvQkFBb0IsRUFBRSxDQUFDO1lBQzdEbGpCLFdBQVcsQ0FBQyx3QkFBd0IsRUFBRW9qQixvQkFBb0IsR0FBRyxDQUFDO1lBQzlEcGpCLFdBQVcsQ0FBQyxhQUFhLEVBQUV5akIsZUFBZWhELFlBQVksQ0FBQzlJLGNBQWMsR0FBRyxFQUFFLENBQUM7WUFDM0UzWCxXQUFXLENBQUMsbUJBQW1CLEVBQUV5akIsZUFBZUMsV0FBVyxDQUFDL0wsY0FBYyxHQUFHLEVBQUUsQ0FBQztZQUNoRjNYLFdBQVcsQ0FBQyxvQkFBb0IsRUFBRXlqQixlQUFlRSxVQUFVLENBQUMsU0FBUyxDQUFDO1lBRXRFLElBQUk1RyxpQkFBaUJsWSxNQUFNLEdBQUcsR0FBRztnQkFDL0IsTUFBTStlLGlCQUFpQjdHLGdCQUFnQixDQUFDLEVBQUU7Z0JBQzFDL2MsV0FBVyxDQUFDLHdCQUF3QixFQUFFNGpCLGVBQWU1ZixJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUM3RGhFLFdBQVcsQ0FBQyxNQUFNLEVBQUU0akIsZUFBZTNmLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0JBQzVDakUsV0FBVyxDQUFDLE1BQU0sRUFBRTRqQixlQUFlbkosU0FBUyxDQUFDLENBQUMsRUFBRW1KLGVBQWVsTSxLQUFLLENBQUMsdUJBQXVCLEVBQUVrTSxlQUFlSixjQUFjLENBQUMsTUFBTSxDQUFDO2dCQUVuSXhqQixXQUFXLENBQUMsNkJBQTZCLENBQUM7Z0JBQzFDK2MsaUJBQWlCM1gsS0FBSyxDQUFDLEdBQUcsR0FBRzRZLE9BQU8sQ0FBQyxDQUFDdUYsUUFBUXRGO29CQUM1QyxNQUFNdUIsUUFBUXZCLFVBQVUsSUFBSSxPQUFPQSxVQUFVLElBQUksT0FBT0EsVUFBVSxJQUFJLE9BQU87b0JBQzdFamUsV0FBVyxHQUFHd2YsTUFBTSxDQUFDLEVBQUUrRCxPQUFPdmYsSUFBSSxDQUFDLEVBQUUsRUFBRXVmLE9BQU85SSxTQUFTLENBQUMsQ0FBQyxFQUFFOEksT0FBTzdMLEtBQUssQ0FBQyxFQUFFLEVBQUU2TCxPQUFPQyxjQUFjLENBQUMsSUFBSSxDQUFDO2dCQUN6RztZQUNGO1lBRUF4akIsV0FBVyxDQUFDLG9CQUFvQixDQUFDO1lBQ2pDQSxXQUFXLENBQUMsbUJBQW1CLEVBQUVpakIsV0FBVyxLQUFLLFdBQVdBLFdBQVcsS0FBSyxhQUFhLG9CQUFvQixFQUFFLENBQUM7WUFDaEhqakIsV0FBVyxDQUFDLGtCQUFrQixFQUFFb2pCLHVCQUF1QixLQUFLLGNBQWNBLHVCQUF1QixLQUFLLFNBQVMsb0JBQW9CLEVBQUUsQ0FBQztZQUN0SXBqQixXQUFXLENBQUMsdUJBQXVCLEVBQUV5akIsZUFBZWhELFlBQVksR0FBRyxRQUFRLGlCQUFpQixZQUFZO1lBRXhHLE9BQU87Z0JBQ0wxZ0IsU0FBUztnQkFDVEM7Z0JBQ0FtRCxNQUFNO29CQUNKMGdCLGNBQWM7d0JBQ1paO3dCQUNBRTt3QkFDQUQ7d0JBQ0FFO29CQUNGO29CQUNBSztvQkFDQTFHO29CQUNBb0I7Z0JBQ0Y7WUFDRjtRQUVGLEVBQUUsT0FBT3JiLE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQSxvREFBb0Q7SUFDcEQsTUFBY3FYLHdCQUFzQztRQUNsRCxJQUFJO1lBQ0YsTUFBTSxDQUFDSyxPQUFPd0MsUUFBUTRKLFNBQVMsR0FBRyxNQUFNL00sUUFBUUMsR0FBRyxDQUFDO2dCQUNsRDVTLGVBQU0sQ0FBQzJILFFBQVEsQ0FBQzhGLEtBQUs7Z0JBQ3JCek4sZUFBTSxDQUFDMkgsUUFBUSxDQUFDOEYsS0FBSyxDQUFDO29CQUFFdE4sT0FBTzt3QkFBRWtCLFFBQVE7b0JBQVM7Z0JBQUU7Z0JBQ3BEckIsZUFBTSxDQUFDMkgsUUFBUSxDQUFDOEYsS0FBSyxDQUFDO29CQUFFdE4sT0FBTzt3QkFBRWtCLFFBQVE7b0JBQVc7Z0JBQUU7YUFDdkQ7WUFFRCxPQUFPO2dCQUFFaVM7Z0JBQU93QztnQkFBUTRKO2dCQUFVaEIsaUJBQWlCcEwsUUFBUSxJQUFJN1AsS0FBS2dTLEtBQUssQ0FBQyxBQUFDSyxTQUFTeEMsUUFBUyxPQUFPO1lBQUU7UUFDeEcsRUFBRSxPQUFPNVUsT0FBTztZQUNkLE9BQU87Z0JBQUU0VSxPQUFPO2dCQUFHd0MsUUFBUTtnQkFBRzRKLFVBQVU7Z0JBQUdoQixpQkFBaUI7WUFBRTtRQUNoRTtJQUNGO0lBRUEsTUFBY3hMLHVCQUFxQztRQUNqRCxJQUFJO1lBQ0Ysd0VBQXdFO1lBQ3hFLE1BQU1HLFVBQVU1UCxLQUFLZ1MsS0FBSyxDQUFDaFMsS0FBS0UsTUFBTSxLQUFLLFNBQVM7WUFDcEQsTUFBTWdjLFNBQVNsYyxLQUFLZ1MsS0FBSyxDQUFDaFMsS0FBS0UsTUFBTSxLQUFLLEtBQUs7WUFFL0MsT0FBTztnQkFDTDJQLE9BQU9EO2dCQUNQaUosZUFBZXFEO2dCQUNmdGUsUUFBUXNlLFNBQVMsS0FBSyxjQUFjQSxTQUFTLEtBQUssU0FBUztZQUM3RDtRQUNGLEVBQUUsT0FBT2poQixPQUFPO1lBQ2QsT0FBTztnQkFBRTRVLE9BQU87Z0JBQUdnSixlQUFlO2dCQUFHamIsUUFBUTtZQUFVO1FBQ3pEO0lBQ0Y7SUFFQSxtQ0FBbUM7SUFDM0IyWSxpQkFBaUIzZSxLQUFhLEVBQVU7UUFDOUMsSUFBSUEsTUFBTTJHLFFBQVEsQ0FBQyxVQUFVLE9BQU87UUFDcEMsSUFBSTNHLE1BQU0yRyxRQUFRLENBQUMsY0FBYyxPQUFPO1FBQ3hDLElBQUkzRyxNQUFNMkcsUUFBUSxDQUFDLGNBQWMsT0FBTztRQUN4QyxJQUFJM0csTUFBTTJHLFFBQVEsQ0FBQyxjQUFjLE9BQU87UUFDeEMsSUFBSTNHLE1BQU0yRyxRQUFRLENBQUMsZUFBZSxPQUFPO1FBQ3pDLElBQUkzRyxNQUFNMkcsUUFBUSxDQUFDLGVBQWUsT0FBTztRQUN6QyxJQUFJM0csTUFBTTJHLFFBQVEsQ0FBQyxZQUFZLE9BQU87UUFDdEMsSUFBSTNHLE1BQU0yRyxRQUFRLENBQUMsU0FBUyxPQUFPO1FBQ25DLE9BQU87SUFDVDtJQUVRa1ksYUFBYUgsU0FBaUIsRUFBUTtRQUM1QyxNQUFNN2UsTUFBTSxJQUFJRDtRQUNoQixPQUFROGU7WUFDTixLQUFLO2dCQUNILE9BQU8sSUFBSTllLEtBQUtDLElBQUkwa0IsV0FBVyxJQUFJMWtCLElBQUkya0IsUUFBUSxJQUFJM2tCLElBQUk0a0IsT0FBTztZQUNoRSxLQUFLO2dCQUNILE9BQU8sSUFBSTdrQixLQUFLQyxJQUFJMGtCLFdBQVcsSUFBSTFrQixJQUFJMmtCLFFBQVEsSUFBSTNrQixJQUFJNGtCLE9BQU8sS0FBSztZQUNyRSxLQUFLO2dCQUNILE1BQU1DLGNBQWMsSUFBSTlrQixLQUFLQztnQkFDN0I2a0IsWUFBWUMsT0FBTyxDQUFDOWtCLElBQUk0a0IsT0FBTyxLQUFLNWtCLElBQUkra0IsTUFBTTtnQkFDOUMsT0FBT0Y7WUFDVCxLQUFLO2dCQUNILE1BQU1HLGdCQUFnQixJQUFJamxCLEtBQUtDO2dCQUMvQmdsQixjQUFjRixPQUFPLENBQUM5a0IsSUFBSTRrQixPQUFPLEtBQUs1a0IsSUFBSStrQixNQUFNLEtBQUs7Z0JBQ3JELE9BQU9DO1lBQ1QsS0FBSztnQkFDSCxPQUFPLElBQUlqbEIsS0FBS0MsSUFBSTBrQixXQUFXLElBQUkxa0IsSUFBSTJrQixRQUFRLElBQUk7WUFDckQsS0FBSztnQkFDSCxPQUFPLElBQUk1a0IsS0FBS0MsSUFBSTBrQixXQUFXLElBQUkxa0IsSUFBSTJrQixRQUFRLEtBQUssR0FBRztZQUN6RCxLQUFLO2dCQUNILE1BQU1NLGVBQWUsSUFBSWxsQixLQUFLQyxJQUFJMGtCLFdBQVcsSUFBSW5jLEtBQUtDLEtBQUssQ0FBQ3hJLElBQUkya0IsUUFBUSxLQUFLLEtBQUssR0FBRztnQkFDckYsT0FBT007WUFDVCxLQUFLO2dCQUNILE9BQU8sSUFBSWxsQixLQUFLQyxJQUFJMGtCLFdBQVcsSUFBSSxHQUFHO1lBQ3hDO2dCQUNFLE9BQU8sSUFBSTNrQixLQUFLQyxJQUFJa2xCLE9BQU8sS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLE9BQU8sY0FBYztRQUM3RTtJQUNGO0lBRUEsbUNBQW1DO0lBQ25DLGlDQUFpQztJQUNqQyxtQ0FBbUM7SUFFbkM7O0dBRUMsR0FDRCxNQUFjN2dCLFdBQVdSLElBQVMsRUFBRWhFLE1BQWMsRUFBNEI7UUFDNUUsSUFBSTtZQUNGLE1BQU1zbEIsV0FBV3RoQixLQUFLYSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJM0UsT0FBT21MLGtCQUFrQixJQUFJO1lBQ2xGLE1BQU1rYSxXQUFXdmhCLEtBQUtvSCxJQUFJLElBQUk7WUFDOUIsTUFBTWEsY0FBY2pJLEtBQUtpSSxXQUFXLElBQUk7WUFFeEMsTUFBTXVaLE9BQU8sTUFBTXZnQixlQUFNLENBQUN1Z0IsSUFBSSxDQUFDM2YsTUFBTSxDQUFDO2dCQUNwQzdCLE1BQU07b0JBQ0phLE1BQU15Z0I7b0JBQ05yWjtvQkFDQWIsTUFBTW1hO29CQUNOaGYsYUFBYXZHO2dCQUNmO1lBQ0Y7WUFFQUksY0FBTSxDQUFDQyxJQUFJLENBQUMsNkJBQTZCO2dCQUFFb2xCLFFBQVFELEtBQUsvZSxFQUFFO2dCQUFFekc7WUFBTztZQUVuRSxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsaUJBQWlCLEVBQUV5a0IsU0FBUyx1QkFBdUIsQ0FBQztnQkFDOUR0aEIsTUFBTXdoQjtnQkFDTjllLFNBQVM7b0JBQ1ArZSxRQUFRRCxLQUFLL2UsRUFBRTtvQkFDZjVCLE1BQU0yZ0IsS0FBSzNnQixJQUFJO29CQUNmdUcsTUFBTW9hLEtBQUtwYSxJQUFJO2dCQUNqQjtZQUNGO1FBRUYsRUFBRSxPQUFPekgsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLHdCQUF3QjtnQkFBRUEsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQVFLO2dCQUFNaEU7WUFBTztZQUVuSCxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFBQztvQkFBa0M7aUJBQXNDO1lBQ3hGO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBYzBELGtCQUFrQlQsSUFBUyxFQUFFaEUsTUFBYyxFQUE0QjtRQUNuRixJQUFJO1lBQ0YsTUFBTTBsQixrQkFBa0IxaEIsS0FBS29ILElBQUksSUFBSTtZQUNyQyxNQUFNdWEsa0JBQWtCM2hCLEtBQUthLElBQUksSUFBSSxHQUFHNmdCLGdCQUFnQixlQUFlLEVBQUUsSUFBSXhsQixPQUFPbUwsa0JBQWtCLElBQUk7WUFDMUcsTUFBTVksY0FBY2pJLEtBQUtpSSxXQUFXLElBQUk7WUFFeEMsMEJBQTBCO1lBQzFCLE1BQU1wRixPQUFPLE1BQU01QixlQUFNLENBQUM0QixJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeEMxQixPQUFPO29CQUFFcUIsSUFBSXpHO2dCQUFPO2dCQUNwQitHLFFBQVE7b0JBQUUrQixnQkFBZ0I7Z0JBQUs7WUFDakM7WUFFQSxJQUFJLENBQUNqQyxNQUFNaUMsZ0JBQWdCO2dCQUN6QixPQUFPO29CQUNMbEksU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQztxQkFBOEM7Z0JBQzlEO1lBQ0Y7WUFFQSxNQUFNNmtCLGNBQWMsTUFBTTNnQixlQUFNLENBQUMyZ0IsV0FBVyxDQUFDL2YsTUFBTSxDQUFDO2dCQUNsRDdCLE1BQU07b0JBQ0pvSCxNQUFNc2E7b0JBQ043Z0IsTUFBTThnQjtvQkFDTjFaO29CQUNBNFosYUFBYTlZLEtBQUtDLFNBQVMsQ0FBQ2hKLEtBQUs2aEIsV0FBVyxJQUFJLENBQUM7b0JBQ2pEdmYsUUFBUTtvQkFDUndDLGdCQUFnQmpDLEtBQUtpQyxjQUFjO29CQUNuQ1QsV0FBV3JJO2dCQUNiO1lBQ0Y7WUFFQUksY0FBTSxDQUFDQyxJQUFJLENBQUMsb0NBQW9DO2dCQUFFeWxCLGVBQWVGLFlBQVluZixFQUFFO2dCQUFFekc7WUFBTztZQUV4RixPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsRUFBRSxFQUFFNmtCLGdCQUFnQixjQUFjLEVBQUVDLGdCQUFnQix1QkFBdUIsQ0FBQztnQkFDdEYzaEIsTUFBTTRoQjtnQkFDTmxmLFNBQVM7b0JBQ1BvZixlQUFlRixZQUFZbmYsRUFBRTtvQkFDN0I1QixNQUFNK2dCLFlBQVkvZ0IsSUFBSTtvQkFDdEJ1RyxNQUFNd2EsWUFBWXhhLElBQUk7b0JBQ3RCOUUsUUFBUXNmLFlBQVl0ZixNQUFNO2dCQUM1QjtZQUNGO1FBRUYsRUFBRSxPQUFPM0MsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLCtCQUErQjtnQkFBRUEsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQVFLO2dCQUFNaEU7WUFBTztZQUUxSCxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFBQztvQkFBeUM7aUJBQXlDO1lBQ2xHO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBYzJELGNBQWNWLElBQVMsRUFBRWhFLE1BQWMsRUFBNEI7UUFDL0UsSUFBSTtZQUNGLE1BQU0rbEIsY0FBYy9oQixLQUFLYSxJQUFJLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxJQUFJM0UsT0FBT21MLGtCQUFrQixJQUFJO1lBQ3hGLE1BQU1ZLGNBQWNqSSxLQUFLaUksV0FBVyxJQUFJO1lBRXhDLE1BQU04TixVQUFVLE1BQU05VSxlQUFNLENBQUM4VSxPQUFPLENBQUNsVSxNQUFNLENBQUM7Z0JBQzFDN0IsTUFBTTtvQkFDSmEsTUFBTWtoQjtvQkFDTjlaO29CQUNBM0YsUUFBUTtvQkFDUndHLFlBQVlDLEtBQUtDLFNBQVMsQ0FBQzt3QkFDekIrRyxPQUFPL1AsS0FBSytQLEtBQUssSUFBSSxFQUFFO3dCQUN2QmlTLFVBQVVoaUIsS0FBS2dpQixRQUFRLElBQUksRUFBRTt3QkFDN0I5WixZQUFZbEksS0FBS2tJLFVBQVUsSUFBSSxFQUFFO29CQUNuQztvQkFDQTNGLGFBQWF2RztnQkFDZjtZQUNGO1lBRUFJLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLGdDQUFnQztnQkFBRTRsQixXQUFXbE0sUUFBUXRULEVBQUU7Z0JBQUV6RztZQUFPO1lBRTVFLE9BQU87Z0JBQ0xZLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyxvQkFBb0IsRUFBRWtsQixZQUFZLHVCQUF1QixDQUFDO2dCQUNwRS9oQixNQUFNK1Y7Z0JBQ05yVCxTQUFTO29CQUNQdWYsV0FBV2xNLFFBQVF0VCxFQUFFO29CQUNyQjVCLE1BQU1rVixRQUFRbFYsSUFBSTtvQkFDbEJ5QixRQUFReVQsUUFBUXpULE1BQU07Z0JBQ3hCO1lBQ0Y7UUFFRixFQUFFLE9BQU8zQyxPQUFPO1lBQ2R2RCxjQUFNLENBQUN1RCxLQUFLLENBQUMsMkJBQTJCO2dCQUFFQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFBUUs7Z0JBQU1oRTtZQUFPO1lBRXRILE9BQU87Z0JBQ0xZLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUc7Z0JBQ2hERSxhQUFhO29CQUFDO29CQUFxQztpQkFBa0M7WUFDdkY7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFjNEQsYUFBYVgsSUFBUyxFQUFFaEUsTUFBYyxFQUE0QjtRQUM5RSxJQUFJO1lBQ0YsTUFBTWttQixXQUFXbGlCLEtBQUthLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJM0UsT0FBT21MLGtCQUFrQixJQUFJO1lBQzdFLE1BQU1ZLGNBQWNqSSxLQUFLaUksV0FBVyxJQUFJO1lBQ3hDLE1BQU1rYSxhQUFhbmlCLEtBQUttaUIsVUFBVSxJQUFJO1lBQ3RDLE1BQU1DLFdBQVdwaUIsS0FBS29pQixRQUFRLElBQUk7WUFFbEMsTUFBTUMsU0FBUyxNQUFNcGhCLGVBQU0sQ0FBQytVLE1BQU0sQ0FBQ25VLE1BQU0sQ0FBQztnQkFDeEM3QixNQUFNO29CQUNKYSxNQUFNcWhCO29CQUNOamE7b0JBQ0FrYTtvQkFDQUM7b0JBQ0E5ZixRQUFRO29CQUNSZ2dCLFVBQVV0aUIsS0FBS3NpQixRQUFRLElBQUk7b0JBQzNCQyxjQUFjeFosS0FBS0MsU0FBUyxDQUFDaEosS0FBS3VpQixZQUFZLElBQUk7d0JBQUM7cUJBQVU7b0JBQzdEQyxjQUFjeGlCLEtBQUt3aUIsWUFBWSxJQUFJO29CQUNuQ0MscUJBQXFCemlCLEtBQUt5aUIsbUJBQW1CLElBQUk7b0JBQ2pEQyxpQkFBaUIxaUIsS0FBSzBpQixlQUFlLElBQUk7b0JBQ3pDbmdCLGFBQWF2RztnQkFDZjtZQUNGO1lBRUFJLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLGlDQUFpQztnQkFBRXNtQixRQUFRTixPQUFPNWYsRUFBRTtnQkFBRXpHO1lBQU87WUFFekUsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUyxDQUFDLFlBQVksRUFBRXFsQixTQUFTLHVCQUF1QixDQUFDO2dCQUN6RGxpQixNQUFNcWlCO2dCQUNOM2YsU0FBUztvQkFDUGlnQixRQUFRTixPQUFPNWYsRUFBRTtvQkFDakI1QixNQUFNd2hCLE9BQU94aEIsSUFBSTtvQkFDakJ5aEIsVUFBVUQsT0FBT0MsUUFBUTtvQkFDekJoZ0IsUUFBUStmLE9BQU8vZixNQUFNO2dCQUN2QjtZQUNGO1FBRUYsRUFBRSxPQUFPM0MsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLDRCQUE0QjtnQkFBRUEsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQVFLO2dCQUFNaEU7WUFBTztZQUV2SCxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFBQztvQkFBa0M7aUJBQXdDO1lBQzFGO1FBQ0Y7SUFDRjtJQUVBLG1DQUFtQztJQUNuQyw0QkFBNEI7SUFDNUIsbUNBQW1DO0lBRW5DLE1BQWM0VCxXQUFXM1EsSUFBUyxFQUFFaEUsTUFBYyxFQUE0QjtRQUM1RSxJQUFJO1lBQ0YsTUFBTXlsQixTQUFTemhCLEtBQUt5aEIsTUFBTSxJQUFJemhCLEtBQUt5QyxFQUFFO1lBQ3JDLE1BQU02ZSxXQUFXdGhCLEtBQUthLElBQUk7WUFFMUIsSUFBSSxDQUFDNGdCLFVBQVUsQ0FBQ0gsVUFBVTtnQkFDeEIsT0FBTztvQkFDTDFrQixTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUFvQztxQkFBMEI7Z0JBQzlFO1lBQ0Y7WUFFQSxJQUFJeWtCLE9BQU87WUFDWCxJQUFJQyxRQUFRO2dCQUNWRCxPQUFPLE1BQU12Z0IsZUFBTSxDQUFDdWdCLElBQUksQ0FBQzFlLFVBQVUsQ0FBQztvQkFBRTFCLE9BQU87d0JBQUVxQixJQUFJZ2Y7b0JBQU87Z0JBQUU7WUFDOUQsT0FBTyxJQUFJSCxVQUFVO2dCQUNuQkUsT0FBTyxNQUFNdmdCLGVBQU0sQ0FBQ3VnQixJQUFJLENBQUNyZ0IsU0FBUyxDQUFDO29CQUNqQ0MsT0FBTzt3QkFBRVAsTUFBTTs0QkFBRWdOLFVBQVV5VDs0QkFBVXhULE1BQU07d0JBQWM7b0JBQUU7Z0JBQzdEO1lBQ0Y7WUFFQSxJQUFJLENBQUMwVCxNQUFNO2dCQUNULE9BQU87b0JBQ0w1a0IsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBbUM7cUJBQXVCO2dCQUMxRTtZQUNGO1lBRUEsTUFBTW1iLGVBQW9CLENBQUM7WUFDM0IsSUFBSWxZLEtBQUthLElBQUksSUFBSWIsS0FBS2EsSUFBSSxLQUFLMmdCLEtBQUszZ0IsSUFBSSxFQUFFcVgsYUFBYXJYLElBQUksR0FBR2IsS0FBS2EsSUFBSTtZQUN2RSxJQUFJYixLQUFLaUksV0FBVyxFQUFFaVEsYUFBYWpRLFdBQVcsR0FBR2pJLEtBQUtpSSxXQUFXO1lBQ2pFLElBQUlqSSxLQUFLb0gsSUFBSSxJQUFJO2dCQUFDO2dCQUFVO2FBQVUsQ0FBQ25FLFFBQVEsQ0FBQ2pELEtBQUtvSCxJQUFJLEdBQUc4USxhQUFhOVEsSUFBSSxHQUFHcEgsS0FBS29ILElBQUk7WUFFekYsSUFBSTVGLE9BQU9DLElBQUksQ0FBQ3lXLGNBQWN4VyxNQUFNLEtBQUssR0FBRztnQkFDMUMsT0FBTztvQkFDTDlFLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7cUJBQXFEO2dCQUNyRTtZQUNGO1lBRUEsTUFBTTZsQixjQUFjLE1BQU0zaEIsZUFBTSxDQUFDdWdCLElBQUksQ0FBQ25KLE1BQU0sQ0FBQztnQkFDM0NqWCxPQUFPO29CQUFFcUIsSUFBSStlLEtBQUsvZSxFQUFFO2dCQUFDO2dCQUNyQnpDLE1BQU1rWTtZQUNSO1lBRUEsT0FBTztnQkFDTHRiLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyxRQUFRLEVBQUUrbEIsWUFBWS9oQixJQUFJLENBQUMsdUJBQXVCLENBQUM7Z0JBQzdEYixNQUFNNGlCO2dCQUNObGdCLFNBQVM7b0JBQ1ArZSxRQUFRbUIsWUFBWW5nQixFQUFFO29CQUN0QjVCLE1BQU0raEIsWUFBWS9oQixJQUFJO29CQUN0QmdZLFNBQVNyWCxPQUFPQyxJQUFJLENBQUN5VztnQkFDdkI7WUFDRjtRQUVGLEVBQUUsT0FBT3ZZLE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQSxNQUFjK1Qsa0JBQWtCNVEsSUFBUyxFQUFFaEUsTUFBYyxFQUE0QjtRQUNuRixJQUFJO1lBQ0YsTUFBTThsQixnQkFBZ0I5aEIsS0FBSzhoQixhQUFhLElBQUk5aEIsS0FBS3lDLEVBQUU7WUFDbkQsTUFBTWtmLGtCQUFrQjNoQixLQUFLYSxJQUFJO1lBRWpDLElBQUksQ0FBQ2loQixpQkFBaUIsQ0FBQ0gsaUJBQWlCO2dCQUN0QyxPQUFPO29CQUNML2tCLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7d0JBQW9DO3FCQUFpQztnQkFDckY7WUFDRjtZQUVBLElBQUk2a0IsY0FBYztZQUNsQixJQUFJRSxlQUFlO2dCQUNqQkYsY0FBYyxNQUFNM2dCLGVBQU0sQ0FBQzJnQixXQUFXLENBQUM5ZSxVQUFVLENBQUM7b0JBQUUxQixPQUFPO3dCQUFFcUIsSUFBSXFmO29CQUFjO2dCQUFFO1lBQ25GLE9BQU8sSUFBSUgsaUJBQWlCO2dCQUMxQkMsY0FBYyxNQUFNM2dCLGVBQU0sQ0FBQzJnQixXQUFXLENBQUN6Z0IsU0FBUyxDQUFDO29CQUMvQ0MsT0FBTzt3QkFBRVAsTUFBTTs0QkFBRWdOLFVBQVU4VDs0QkFBaUI3VCxNQUFNO3dCQUFjO29CQUFFO2dCQUNwRTtZQUNGO1lBRUEsSUFBSSxDQUFDOFQsYUFBYTtnQkFDaEIsT0FBTztvQkFDTGhsQixTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUEwQztxQkFBOEI7Z0JBQ3hGO1lBQ0Y7WUFFQSxNQUFNbWIsZUFBb0IsQ0FBQztZQUMzQixJQUFJbFksS0FBS2EsSUFBSSxJQUFJYixLQUFLYSxJQUFJLEtBQUsrZ0IsWUFBWS9nQixJQUFJLEVBQUVxWCxhQUFhclgsSUFBSSxHQUFHYixLQUFLYSxJQUFJO1lBQzlFLElBQUliLEtBQUtpSSxXQUFXLEVBQUVpUSxhQUFhalEsV0FBVyxHQUFHakksS0FBS2lJLFdBQVc7WUFDakUsSUFBSWpJLEtBQUtzQyxNQUFNLElBQUk7Z0JBQUM7Z0JBQVc7Z0JBQVU7Z0JBQVM7YUFBVyxDQUFDVyxRQUFRLENBQUNqRCxLQUFLc0MsTUFBTSxHQUFHO2dCQUNuRjRWLGFBQWE1VixNQUFNLEdBQUd0QyxLQUFLc0MsTUFBTTtZQUNuQztZQUVBLElBQUlkLE9BQU9DLElBQUksQ0FBQ3lXLGNBQWN4VyxNQUFNLEtBQUssR0FBRztnQkFDMUMsT0FBTztvQkFDTDlFLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7cUJBQXVEO2dCQUN2RTtZQUNGO1lBRUEsTUFBTThsQixxQkFBcUIsTUFBTTVoQixlQUFNLENBQUMyZ0IsV0FBVyxDQUFDdkosTUFBTSxDQUFDO2dCQUN6RGpYLE9BQU87b0JBQUVxQixJQUFJbWYsWUFBWW5mLEVBQUU7Z0JBQUM7Z0JBQzVCekMsTUFBTWtZO1lBQ1I7WUFFQSxPQUFPO2dCQUNMdGIsU0FBUztnQkFDVEMsU0FBUyxDQUFDLGVBQWUsRUFBRWdtQixtQkFBbUJoaUIsSUFBSSxDQUFDLHVCQUF1QixDQUFDO2dCQUMzRWIsTUFBTTZpQjtnQkFDTm5nQixTQUFTO29CQUNQb2YsZUFBZWUsbUJBQW1CcGdCLEVBQUU7b0JBQ3BDNUIsTUFBTWdpQixtQkFBbUJoaUIsSUFBSTtvQkFDN0J5QixRQUFRdWdCLG1CQUFtQnZnQixNQUFNO29CQUNqQ3VXLFNBQVNyWCxPQUFPQyxJQUFJLENBQUN5VztnQkFDdkI7WUFDRjtRQUVGLEVBQUUsT0FBT3ZZLE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQSxNQUFjZ1UsY0FBYzdRLElBQVMsRUFBRWhFLE1BQWMsRUFBNEI7UUFDL0UsSUFBSTtZQUNGLE1BQU1pbUIsWUFBWWppQixLQUFLaWlCLFNBQVMsSUFBSWppQixLQUFLeUMsRUFBRTtZQUMzQyxNQUFNc2YsY0FBYy9oQixLQUFLYSxJQUFJO1lBRTdCLElBQUksQ0FBQ29oQixhQUFhLENBQUNGLGFBQWE7Z0JBQzlCLE9BQU87b0JBQ0xubEIsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBNkM7cUJBQTZCO2dCQUMxRjtZQUNGO1lBRUEsSUFBSWdaLFVBQVU7WUFDZCxJQUFJa00sV0FBVztnQkFDYmxNLFVBQVUsTUFBTTlVLGVBQU0sQ0FBQzhVLE9BQU8sQ0FBQ2pULFVBQVUsQ0FBQztvQkFBRTFCLE9BQU87d0JBQUVxQixJQUFJd2Y7b0JBQVU7Z0JBQUU7WUFDdkUsT0FBTyxJQUFJRixhQUFhO2dCQUN0QmhNLFVBQVUsTUFBTTlVLGVBQU0sQ0FBQzhVLE9BQU8sQ0FBQzVVLFNBQVMsQ0FBQztvQkFDdkNDLE9BQU87d0JBQUVQLE1BQU07NEJBQUVnTixVQUFVa1U7NEJBQWFqVSxNQUFNO3dCQUFjO29CQUFFO2dCQUNoRTtZQUNGO1lBRUEsSUFBSSxDQUFDaUksU0FBUztnQkFDWixPQUFPO29CQUNMblosU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBc0M7cUJBQTBCO2dCQUNoRjtZQUNGO1lBRUEsTUFBTW1iLGVBQW9CLENBQUM7WUFDM0IsSUFBSWxZLEtBQUthLElBQUksSUFBSWIsS0FBS2EsSUFBSSxLQUFLa1YsUUFBUWxWLElBQUksRUFBRXFYLGFBQWFyWCxJQUFJLEdBQUdiLEtBQUthLElBQUk7WUFDMUUsSUFBSWIsS0FBS2lJLFdBQVcsRUFBRWlRLGFBQWFqUSxXQUFXLEdBQUdqSSxLQUFLaUksV0FBVztZQUNqRSxJQUFJakksS0FBS3NDLE1BQU0sSUFBSTtnQkFBQztnQkFBUztnQkFBVTtnQkFBVTthQUFZLENBQUNXLFFBQVEsQ0FBQ2pELEtBQUtzQyxNQUFNLEdBQUc7Z0JBQ25GNFYsYUFBYTVWLE1BQU0sR0FBR3RDLEtBQUtzQyxNQUFNO1lBQ25DO1lBRUEsSUFBSWQsT0FBT0MsSUFBSSxDQUFDeVcsY0FBY3hXLE1BQU0sS0FBSyxHQUFHO2dCQUMxQyxPQUFPO29CQUNMOUUsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQztxQkFBdUQ7Z0JBQ3ZFO1lBQ0Y7WUFFQSxNQUFNK2xCLGlCQUFpQixNQUFNN2hCLGVBQU0sQ0FBQzhVLE9BQU8sQ0FBQ3NDLE1BQU0sQ0FBQztnQkFDakRqWCxPQUFPO29CQUFFcUIsSUFBSXNULFFBQVF0VCxFQUFFO2dCQUFDO2dCQUN4QnpDLE1BQU1rWTtZQUNSO1lBRUEsT0FBTztnQkFDTHRiLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyxXQUFXLEVBQUVpbUIsZUFBZWppQixJQUFJLENBQUMsdUJBQXVCLENBQUM7Z0JBQ25FYixNQUFNOGlCO2dCQUNOcGdCLFNBQVM7b0JBQ1B1ZixXQUFXYSxlQUFlcmdCLEVBQUU7b0JBQzVCNUIsTUFBTWlpQixlQUFlamlCLElBQUk7b0JBQ3pCeUIsUUFBUXdnQixlQUFleGdCLE1BQU07b0JBQzdCdVcsU0FBU3JYLE9BQU9DLElBQUksQ0FBQ3lXO2dCQUN2QjtZQUNGO1FBRUYsRUFBRSxPQUFPdlksT0FBTztZQUNkLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBLE1BQWNpVSxhQUFhOVEsSUFBUyxFQUFFaEUsTUFBYyxFQUE0QjtRQUM5RSxJQUFJO1lBQ0YsTUFBTTJtQixTQUFTM2lCLEtBQUsyaUIsTUFBTSxJQUFJM2lCLEtBQUt5QyxFQUFFO1lBQ3JDLE1BQU15ZixXQUFXbGlCLEtBQUthLElBQUk7WUFFMUIsSUFBSSxDQUFDOGhCLFVBQVUsQ0FBQ1QsVUFBVTtnQkFDeEIsT0FBTztvQkFDTHRsQixTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUE0QztxQkFBMEI7Z0JBQ3RGO1lBQ0Y7WUFFQSxJQUFJc2xCLFNBQVM7WUFDYixJQUFJTSxRQUFRO2dCQUNWTixTQUFTLE1BQU1waEIsZUFBTSxDQUFDK1UsTUFBTSxDQUFDbFQsVUFBVSxDQUFDO29CQUFFMUIsT0FBTzt3QkFBRXFCLElBQUlrZ0I7b0JBQU87Z0JBQUU7WUFDbEUsT0FBTyxJQUFJVCxVQUFVO2dCQUNuQkcsU0FBUyxNQUFNcGhCLGVBQU0sQ0FBQytVLE1BQU0sQ0FBQzdVLFNBQVMsQ0FBQztvQkFDckNDLE9BQU87d0JBQUVQLE1BQU07NEJBQUVnTixVQUFVcVU7NEJBQVVwVSxNQUFNO3dCQUFjO29CQUFFO2dCQUM3RDtZQUNGO1lBRUEsSUFBSSxDQUFDdVUsUUFBUTtnQkFDWCxPQUFPO29CQUNMemxCLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7d0JBQXVDO3FCQUF1QjtnQkFDOUU7WUFDRjtZQUVBLE1BQU1tYixlQUFvQixDQUFDO1lBQzNCLElBQUlsWSxLQUFLYSxJQUFJLElBQUliLEtBQUthLElBQUksS0FBS3doQixPQUFPeGhCLElBQUksRUFBRXFYLGFBQWFyWCxJQUFJLEdBQUdiLEtBQUthLElBQUk7WUFDekUsSUFBSWIsS0FBS2lJLFdBQVcsRUFBRWlRLGFBQWFqUSxXQUFXLEdBQUdqSSxLQUFLaUksV0FBVztZQUNqRSxJQUFJakksS0FBS3NDLE1BQU0sSUFBSTtnQkFBQztnQkFBUztnQkFBVztnQkFBVTtnQkFBYTthQUFZLENBQUNXLFFBQVEsQ0FBQ2pELEtBQUtzQyxNQUFNLEdBQUc7Z0JBQ2pHNFYsYUFBYTVWLE1BQU0sR0FBR3RDLEtBQUtzQyxNQUFNO1lBQ25DO1lBRUEsSUFBSWQsT0FBT0MsSUFBSSxDQUFDeVcsY0FBY3hXLE1BQU0sS0FBSyxHQUFHO2dCQUMxQyxPQUFPO29CQUNMOUUsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQztxQkFBdUQ7Z0JBQ3ZFO1lBQ0Y7WUFFQSxNQUFNZ21CLGNBQWMsTUFBTTloQixlQUFNLENBQUMrVSxNQUFNLENBQUNxQyxNQUFNLENBQUM7Z0JBQzdDalgsT0FBTztvQkFBRXFCLElBQUk0ZixPQUFPNWYsRUFBRTtnQkFBQztnQkFDdkJ6QyxNQUFNa1k7WUFDUjtZQUVBLE9BQU87Z0JBQ0x0YixTQUFTO2dCQUNUQyxTQUFTLENBQUMsWUFBWSxFQUFFa21CLFlBQVlsaUIsSUFBSSxDQUFDLHVCQUF1QixDQUFDO2dCQUNqRWIsTUFBTStpQjtnQkFDTnJnQixTQUFTO29CQUNQaWdCLFFBQVFJLFlBQVl0Z0IsRUFBRTtvQkFDdEI1QixNQUFNa2lCLFlBQVlsaUIsSUFBSTtvQkFDdEJ5QixRQUFReWdCLFlBQVl6Z0IsTUFBTTtvQkFDMUJ1VyxTQUFTclgsT0FBT0MsSUFBSSxDQUFDeVc7Z0JBQ3ZCO1lBQ0Y7UUFFRixFQUFFLE9BQU92WSxPQUFPO1lBQ2QsT0FBTztnQkFDTC9DLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0lBRUEsbUNBQW1DO0lBQ25DLDRCQUE0QjtJQUM1QixtQ0FBbUM7SUFFbkMsTUFBY3dVLFdBQVdyUixJQUFTLEVBQUVoRSxNQUFjLEVBQTRCO1FBQzVFLElBQUk7WUFDRixNQUFNeWxCLFNBQVN6aEIsS0FBS3loQixNQUFNLElBQUl6aEIsS0FBS3lDLEVBQUU7WUFDckMsTUFBTTZlLFdBQVd0aEIsS0FBS2EsSUFBSTtZQUUxQixJQUFJLENBQUM0Z0IsVUFBVSxDQUFDSCxVQUFVO2dCQUN4QixPQUFPO29CQUNMMWtCLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7d0JBQW9DO3FCQUEwQjtnQkFDOUU7WUFDRjtZQUVBLElBQUl5a0IsT0FBTztZQUNYLElBQUlDLFFBQVE7Z0JBQ1ZELE9BQU8sTUFBTXZnQixlQUFNLENBQUN1Z0IsSUFBSSxDQUFDMWUsVUFBVSxDQUFDO29CQUFFMUIsT0FBTzt3QkFBRXFCLElBQUlnZjtvQkFBTztnQkFBRTtZQUM5RCxPQUFPLElBQUlILFVBQVU7Z0JBQ25CRSxPQUFPLE1BQU12Z0IsZUFBTSxDQUFDdWdCLElBQUksQ0FBQ3JnQixTQUFTLENBQUM7b0JBQ2pDQyxPQUFPO3dCQUFFUCxNQUFNOzRCQUFFZ04sVUFBVXlUOzRCQUFVeFQsTUFBTTt3QkFBYztvQkFBRTtnQkFDN0Q7WUFDRjtZQUVBLElBQUksQ0FBQzBULE1BQU07Z0JBQ1QsT0FBTztvQkFDTDVrQixTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3FCQUF1QjtnQkFDdkM7WUFDRjtZQUVBLDJDQUEyQztZQUMzQyxNQUFNLENBQUNvWSxnQkFBZ0JDLGNBQWNDLGtCQUFrQixHQUFHLE1BQU16QixRQUFRQyxHQUFHLENBQUM7Z0JBQzFFNVMsZUFBTSxDQUFDeUssYUFBYSxDQUFDZ0QsS0FBSyxDQUFDO29CQUFFdE4sT0FBTzt3QkFBRTRoQixPQUFPOzRCQUFFMUosTUFBTTtnQ0FBRTdXLElBQUkrZSxLQUFLL2UsRUFBRTs0QkFBQzt3QkFBRTtvQkFBRTtnQkFBRTtnQkFDekV4QixlQUFNLENBQUNzWSxXQUFXLENBQUM3SyxLQUFLLENBQUM7b0JBQUV0TixPQUFPO3dCQUFFNGhCLE9BQU87NEJBQUUxSixNQUFNO2dDQUFFN1csSUFBSStlLEtBQUsvZSxFQUFFOzRCQUFDO3dCQUFFO29CQUFFO2dCQUFFO2dCQUN2RXhCLGVBQU0sQ0FBQ2dMLGdCQUFnQixDQUFDeUMsS0FBSyxDQUFDO29CQUFFdE4sT0FBTzt3QkFBRTRoQixPQUFPOzRCQUFFMUosTUFBTTtnQ0FBRTdXLElBQUkrZSxLQUFLL2UsRUFBRTs0QkFBQzt3QkFBRTtvQkFBRTtnQkFBRTthQUM3RTtZQUVELE1BQU0rVyxhQUFhckUsaUJBQWlCQyxlQUFlQztZQUVuRCxJQUFJbUUsYUFBYSxHQUFHO2dCQUNsQixPQUFPO29CQUNMNWMsU0FBUztvQkFDVEMsU0FBUyxDQUFDLG9CQUFvQixFQUFFMmtCLEtBQUszZ0IsSUFBSSxDQUFDLHVCQUF1QixFQUFFMlksV0FBVyxhQUFhLENBQUM7b0JBQzVGemMsYUFBYTt3QkFBQzt3QkFBb0M7cUJBQXlDO2dCQUM3RjtZQUNGO1lBRUEsTUFBTWtFLGVBQU0sQ0FBQ3VnQixJQUFJLENBQUN4SSxNQUFNLENBQUM7Z0JBQUU1WCxPQUFPO29CQUFFcUIsSUFBSStlLEtBQUsvZSxFQUFFO2dCQUFDO1lBQUU7WUFFbEQsT0FBTztnQkFDTDdGLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyxRQUFRLEVBQUUya0IsS0FBSzNnQixJQUFJLENBQUMsdUJBQXVCLENBQUM7Z0JBQ3REYixNQUFNO29CQUFFeWhCLFFBQVFELEtBQUsvZSxFQUFFO29CQUFFNUIsTUFBTTJnQixLQUFLM2dCLElBQUk7Z0JBQUM7Z0JBQ3pDNkIsU0FBUztvQkFDUCtlLFFBQVFELEtBQUsvZSxFQUFFO29CQUNmNUIsTUFBTTJnQixLQUFLM2dCLElBQUk7b0JBQ2YvQixRQUFRO2dCQUNWO1lBQ0Y7UUFFRixFQUFFLE9BQU9hLE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQSxNQUFjeVUsa0JBQWtCdFIsSUFBUyxFQUFFaEUsTUFBYyxFQUE0QjtRQUNuRixJQUFJO1lBQ0YsTUFBTThsQixnQkFBZ0I5aEIsS0FBSzhoQixhQUFhLElBQUk5aEIsS0FBS3lDLEVBQUU7WUFDbkQsTUFBTWtmLGtCQUFrQjNoQixLQUFLYSxJQUFJO1lBRWpDLElBQUksQ0FBQ2loQixpQkFBaUIsQ0FBQ0gsaUJBQWlCO2dCQUN0QyxPQUFPO29CQUNML2tCLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7d0JBQW9DO3FCQUFpQztnQkFDckY7WUFDRjtZQUVBLElBQUk2a0IsY0FBYztZQUNsQixJQUFJRSxlQUFlO2dCQUNqQkYsY0FBYyxNQUFNM2dCLGVBQU0sQ0FBQzJnQixXQUFXLENBQUM5ZSxVQUFVLENBQUM7b0JBQUUxQixPQUFPO3dCQUFFcUIsSUFBSXFmO29CQUFjO2dCQUFFO1lBQ25GLE9BQU8sSUFBSUgsaUJBQWlCO2dCQUMxQkMsY0FBYyxNQUFNM2dCLGVBQU0sQ0FBQzJnQixXQUFXLENBQUN6Z0IsU0FBUyxDQUFDO29CQUMvQ0MsT0FBTzt3QkFBRVAsTUFBTTs0QkFBRWdOLFVBQVU4VDs0QkFBaUI3VCxNQUFNO3dCQUFjO29CQUFFO2dCQUNwRTtZQUNGO1lBRUEsSUFBSSxDQUFDOFQsYUFBYTtnQkFDaEIsT0FBTztvQkFDTGhsQixTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3FCQUE4QjtnQkFDOUM7WUFDRjtZQUVBLE1BQU1rRSxlQUFNLENBQUMyZ0IsV0FBVyxDQUFDNUksTUFBTSxDQUFDO2dCQUFFNVgsT0FBTztvQkFBRXFCLElBQUltZixZQUFZbmYsRUFBRTtnQkFBQztZQUFFO1lBRWhFLE9BQU87Z0JBQ0w3RixTQUFTO2dCQUNUQyxTQUFTLENBQUMsZUFBZSxFQUFFK2tCLFlBQVkvZ0IsSUFBSSxDQUFDLHVCQUF1QixDQUFDO2dCQUNwRWIsTUFBTTtvQkFBRThoQixlQUFlRixZQUFZbmYsRUFBRTtvQkFBRTVCLE1BQU0rZ0IsWUFBWS9nQixJQUFJO2dCQUFDO2dCQUM5RDZCLFNBQVM7b0JBQ1BvZixlQUFlRixZQUFZbmYsRUFBRTtvQkFDN0I1QixNQUFNK2dCLFlBQVkvZ0IsSUFBSTtvQkFDdEIvQixRQUFRO2dCQUNWO1lBQ0Y7UUFFRixFQUFFLE9BQU9hLE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztZQUNsRDtRQUNGO0lBQ0Y7SUFFQSxNQUFjMFUsY0FBY3ZSLElBQVMsRUFBRWhFLE1BQWMsRUFBNEI7UUFDL0UsSUFBSTtZQUNGLE1BQU1pbUIsWUFBWWppQixLQUFLaWlCLFNBQVMsSUFBSWppQixLQUFLeUMsRUFBRTtZQUMzQyxNQUFNc2YsY0FBYy9oQixLQUFLYSxJQUFJO1lBRTdCLElBQUksQ0FBQ29oQixhQUFhLENBQUNGLGFBQWE7Z0JBQzlCLE9BQU87b0JBQ0xubEIsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQzt3QkFBNkM7cUJBQTZCO2dCQUMxRjtZQUNGO1lBRUEsSUFBSWdaLFVBQVU7WUFDZCxJQUFJa00sV0FBVztnQkFDYmxNLFVBQVUsTUFBTTlVLGVBQU0sQ0FBQzhVLE9BQU8sQ0FBQ2pULFVBQVUsQ0FBQztvQkFBRTFCLE9BQU87d0JBQUVxQixJQUFJd2Y7b0JBQVU7Z0JBQUU7WUFDdkUsT0FBTyxJQUFJRixhQUFhO2dCQUN0QmhNLFVBQVUsTUFBTTlVLGVBQU0sQ0FBQzhVLE9BQU8sQ0FBQzVVLFNBQVMsQ0FBQztvQkFDdkNDLE9BQU87d0JBQUVQLE1BQU07NEJBQUVnTixVQUFVa1U7NEJBQWFqVSxNQUFNO3dCQUFjO29CQUFFO2dCQUNoRTtZQUNGO1lBRUEsSUFBSSxDQUFDaUksU0FBUztnQkFDWixPQUFPO29CQUNMblosU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFBQztxQkFBMEI7Z0JBQzFDO1lBQ0Y7WUFFQSxNQUFNa0UsZUFBTSxDQUFDOFUsT0FBTyxDQUFDaUQsTUFBTSxDQUFDO2dCQUFFNVgsT0FBTztvQkFBRXFCLElBQUlzVCxRQUFRdFQsRUFBRTtnQkFBQztZQUFFO1lBRXhELE9BQU87Z0JBQ0w3RixTQUFTO2dCQUNUQyxTQUFTLENBQUMsV0FBVyxFQUFFa1osUUFBUWxWLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztnQkFDNURiLE1BQU07b0JBQUVpaUIsV0FBV2xNLFFBQVF0VCxFQUFFO29CQUFFNUIsTUFBTWtWLFFBQVFsVixJQUFJO2dCQUFDO2dCQUNsRDZCLFNBQVM7b0JBQ1B1ZixXQUFXbE0sUUFBUXRULEVBQUU7b0JBQ3JCNUIsTUFBTWtWLFFBQVFsVixJQUFJO29CQUNsQi9CLFFBQVE7Z0JBQ1Y7WUFDRjtRQUVGLEVBQUUsT0FBT2EsT0FBTztZQUNkLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBLE1BQWMyVSxhQUFheFIsSUFBUyxFQUFFaEUsTUFBYyxFQUE0QjtRQUM5RSxJQUFJO1lBQ0YsTUFBTTJtQixTQUFTM2lCLEtBQUsyaUIsTUFBTSxJQUFJM2lCLEtBQUt5QyxFQUFFO1lBQ3JDLE1BQU15ZixXQUFXbGlCLEtBQUthLElBQUk7WUFFMUIsSUFBSSxDQUFDOGhCLFVBQVUsQ0FBQ1QsVUFBVTtnQkFDeEIsT0FBTztvQkFDTHRsQixTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUFDO3dCQUE0QztxQkFBMEI7Z0JBQ3RGO1lBQ0Y7WUFFQSxJQUFJc2xCLFNBQVM7WUFDYixJQUFJTSxRQUFRO2dCQUNWTixTQUFTLE1BQU1waEIsZUFBTSxDQUFDK1UsTUFBTSxDQUFDbFQsVUFBVSxDQUFDO29CQUFFMUIsT0FBTzt3QkFBRXFCLElBQUlrZ0I7b0JBQU87Z0JBQUU7WUFDbEUsT0FBTyxJQUFJVCxVQUFVO2dCQUNuQkcsU0FBUyxNQUFNcGhCLGVBQU0sQ0FBQytVLE1BQU0sQ0FBQzdVLFNBQVMsQ0FBQztvQkFDckNDLE9BQU87d0JBQUVQLE1BQU07NEJBQUVnTixVQUFVcVU7NEJBQVVwVSxNQUFNO3dCQUFjO29CQUFFO2dCQUM3RDtZQUNGO1lBRUEsSUFBSSxDQUFDdVUsUUFBUTtnQkFDWCxPQUFPO29CQUNMemxCLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7cUJBQXVCO2dCQUN2QztZQUNGO1lBRUEsTUFBTWtFLGVBQU0sQ0FBQytVLE1BQU0sQ0FBQ2dELE1BQU0sQ0FBQztnQkFBRTVYLE9BQU87b0JBQUVxQixJQUFJNGYsT0FBTzVmLEVBQUU7Z0JBQUM7WUFBRTtZQUV0RCxPQUFPO2dCQUNMN0YsU0FBUztnQkFDVEMsU0FBUyxDQUFDLFlBQVksRUFBRXdsQixPQUFPeGhCLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztnQkFDNURiLE1BQU07b0JBQUUyaUIsUUFBUU4sT0FBTzVmLEVBQUU7b0JBQUU1QixNQUFNd2hCLE9BQU94aEIsSUFBSTtnQkFBQztnQkFDN0M2QixTQUFTO29CQUNQaWdCLFFBQVFOLE9BQU81ZixFQUFFO29CQUNqQjVCLE1BQU13aEIsT0FBT3hoQixJQUFJO29CQUNqQi9CLFFBQVE7Z0JBQ1Y7WUFDRjtRQUVGLEVBQUUsT0FBT2EsT0FBTztZQUNkLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBLG1DQUFtQztJQUNuQyx5QkFBeUI7SUFDekIsbUNBQW1DO0lBRW5DOztHQUVDLEdBQ0QsQUFBUU8sbUJBQW1CWixNQUF5QixFQUFFRixLQUFhLEVBQVc7UUFDNUUsTUFBTTJtQixpQkFBaUI7WUFBQztZQUFVO1lBQVU7WUFBWTtZQUFZO1lBQVc7U0FBVTtRQUN6RixNQUFNQyxpQkFBaUI7WUFBQztZQUFPO1lBQVM7WUFBTztZQUFRO1NBQU87UUFDOUQsTUFBTUMsZUFBZTtZQUFDO1lBQVE7WUFBYTtZQUFlO1lBQVc7U0FBUTtRQUU3RSxNQUFNeEosYUFBYXJkLE1BQU0rQyxXQUFXO1FBRXBDLHFDQUFxQztRQUNyQyxJQUFJNGpCLGVBQWUzSixJQUFJLENBQUM4SixDQUFBQSxVQUFXekosV0FBVzFXLFFBQVEsQ0FBQ21nQixXQUFXO1lBQ2hFLE9BQU87UUFDVDtRQUVBLHNDQUFzQztRQUN0QyxJQUFJRixlQUFlNUosSUFBSSxDQUFDK0osQ0FBQUEsU0FBVTFKLFdBQVcxVyxRQUFRLENBQUNvZ0IsWUFDbERGLGFBQWE3SixJQUFJLENBQUN0WixDQUFBQSxPQUFRMlosV0FBVzFXLFFBQVEsQ0FBQ2pELFFBQVE7WUFDeEQsT0FBTztRQUNUO1FBRUEsZ0RBQWdEO1FBQ2hELElBQUksQUFBQzJaLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsYUFBYTBXLFdBQVcxVyxRQUFRLENBQUMsV0FBVSxLQUNoRTBXLFdBQVcxVyxRQUFRLENBQUMsV0FBVztZQUNqQyxPQUFPO1FBQ1Q7UUFFQSxPQUFPO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELE1BQWM1Rix3QkFBd0JiLE1BQXlCLEVBQUVSLE1BQWMsRUFBRU0sS0FBYSxFQUE0QjtRQUN4SCxJQUFJO1lBQ0YsbUNBQW1DO1lBQ25DLE1BQU11RyxPQUFPLE1BQU01QixlQUFNLENBQUM0QixJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeEMxQixPQUFPO29CQUFFcUIsSUFBSXpHO2dCQUFPO2dCQUNwQitHLFFBQVE7b0JBQUVDLE1BQU07b0JBQU04QixnQkFBZ0I7Z0JBQUs7WUFDN0M7WUFFQSxJQUFJLENBQUNqQyxNQUFNO2dCQUNULE9BQU87b0JBQ0xqRyxTQUFTO29CQUNUQyxTQUFTO29CQUNUOEMsT0FBTztnQkFDVDtZQUNGO1lBRUEsTUFBTTJqQixnQkFBK0I7Z0JBQ25DaG5CO2dCQUNBTjtnQkFDQXVuQixVQUFVMWdCLEtBQUtHLElBQUk7Z0JBQ25COEIsZ0JBQWdCakMsS0FBS2lDLGNBQWM7Z0JBQ25DdUQsU0FBUyxJQUFJLENBQUNtYixvQkFBb0IsQ0FBQ2xuQjtZQUNyQztZQUVBRixjQUFNLENBQUNDLElBQUksQ0FBQyw0REFBNEQ7Z0JBQ3RFQyxPQUFPQSxNQUFNQyxTQUFTLENBQUMsR0FBRztnQkFDMUJQO2dCQUNBOEksZ0JBQWdCakMsS0FBS2lDLGNBQWM7WUFDckM7WUFFQSxNQUFNN0gsU0FBUyxNQUFNd21CLHNEQUEwQixDQUFDQyxjQUFjLENBQUNKO1lBRS9ELElBQUksQ0FBQ3JtQixPQUFPTCxPQUFPLEVBQUU7Z0JBQ25CLE9BQU87b0JBQ0xBLFNBQVM7b0JBQ1RDLFNBQVNJLE9BQU9KLE9BQU87b0JBQ3ZCOEMsT0FBTzFDLE9BQU8wQyxLQUFLO29CQUNuQjVDLGFBQWFFLE9BQU9GLFdBQVc7Z0JBQ2pDO1lBQ0Y7WUFFQSxPQUFPO2dCQUNMSCxTQUFTO2dCQUNUQyxTQUFTSSxPQUFPSixPQUFPO2dCQUN2Qm1ELE1BQU07b0JBQ0oyakIsVUFBVTFtQixPQUFPMG1CLFFBQVE7b0JBQ3pCQyxlQUFlM21CLE9BQU8ybUIsYUFBYTtvQkFDbkNQLFFBQVFwbUIsT0FBT29tQixNQUFNO29CQUNyQlEsYUFBYTVtQixPQUFPNG1CLFdBQVc7Z0JBQ2pDO2dCQUNBbmhCLFNBQVM7b0JBQ1AwRSxNQUFNO29CQUNOdWMsVUFBVTFtQixPQUFPMG1CLFFBQVE7b0JBQ3pCcmhCLFFBQVE7Z0JBQ1Y7WUFDRjtRQUVGLEVBQUUsT0FBTzNDLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyxtREFBbUQ7Z0JBQzlEQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkRyRCxPQUFPQSxNQUFNQyxTQUFTLENBQUMsR0FBRztnQkFDMUJQO1lBQ0Y7WUFFQSxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFDWDtvQkFDQTtvQkFDQTtpQkFDRDtZQUNIO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUXltQixxQkFBcUJsbkIsS0FBYSxFQUE0QjtRQUNwRSxNQUFNcWQsYUFBYXJkLE1BQU0rQyxXQUFXO1FBQ3BDLE1BQU1nSixVQUFvQyxDQUFDO1FBRTNDLDJCQUEyQjtRQUMzQixJQUFJc1IsV0FBVzFXLFFBQVEsQ0FBQyxRQUFRO1lBQzlCb0YsUUFBUWdiLE1BQU0sR0FBRztRQUNuQixPQUFPLElBQUkxSixXQUFXMVcsUUFBUSxDQUFDLFlBQVkwVyxXQUFXMVcsUUFBUSxDQUFDLFNBQVM7WUFDdEVvRixRQUFRZ2IsTUFBTSxHQUFHO1FBQ25CLE9BQU8sSUFBSTFKLFdBQVcxVyxRQUFRLENBQUMsUUFBUTtZQUNyQ29GLFFBQVFnYixNQUFNLEdBQUc7UUFDbkIsT0FBTyxJQUFJMUosV0FBVzFXLFFBQVEsQ0FBQyxTQUFTO1lBQ3RDb0YsUUFBUWdiLE1BQU0sR0FBRztRQUNuQjtRQUVBLDBCQUEwQjtRQUMxQixJQUFJMUosV0FBVzFXLFFBQVEsQ0FBQyxZQUFZMFcsV0FBVzFXLFFBQVEsQ0FBQyxZQUFZMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXO1lBQ2pHb0YsUUFBUXliLGFBQWEsR0FBRztRQUMxQjtRQUVBLCtCQUErQjtRQUMvQixJQUFJbkssV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMFcsV0FBVzFXLFFBQVEsQ0FBQyxlQUFlO1lBQ3RFb0YsUUFBUTBiLFFBQVEsR0FBRztnQkFDakJDLFdBQVc7Z0JBQ1hDLFlBQVksRUFBRSxDQUFDLDBDQUEwQztZQUMzRDtRQUNGLE9BQU8sSUFBSXRLLFdBQVcxVyxRQUFRLENBQUMsY0FBYzBXLFdBQVcxVyxRQUFRLENBQUMsZ0JBQWdCO1lBQy9Fb0YsUUFBUTBiLFFBQVEsR0FBRztnQkFDakJDLFdBQVc7Z0JBQ1hDLFlBQVksRUFBRTtZQUNoQjtRQUNGLE9BQU8sSUFBSXRLLFdBQVcxVyxRQUFRLENBQUMsWUFBWTBXLFdBQVcxVyxRQUFRLENBQUMsY0FBYztZQUMzRW9GLFFBQVEwYixRQUFRLEdBQUc7Z0JBQ2pCQyxXQUFXO2dCQUNYQyxZQUFZLEVBQUU7WUFDaEI7UUFDRjtRQUVBLE9BQU81YjtJQUNUO0lBRUEsbUNBQW1DO0lBQ25DLGlDQUFpQztJQUNqQyxtQ0FBbUM7SUFFbkM7O0dBRUMsR0FDRCxBQUFRL0ssNEJBQTRCZCxNQUF5QixFQUFFRixLQUFhLEVBQVc7UUFDckYsTUFBTTRuQixrQkFBa0I7WUFBQztZQUFRO1lBQVM7WUFBVztZQUFVO1lBQVU7U0FBYztRQUN2RixNQUFNQyxpQkFBaUI7WUFBQztZQUFVO1lBQVc7WUFBTztZQUFZO1NBQWE7UUFDN0UsTUFBTUMsbUJBQW1CO1lBQUM7WUFBWTtZQUFVO1lBQVU7WUFBVTtZQUFZO1lBQVM7U0FBUTtRQUVqRyxNQUFNekssYUFBYXJkLE1BQU0rQyxXQUFXO1FBRXBDLHlDQUF5QztRQUN6QyxJQUFJNmtCLGdCQUFnQjVLLElBQUksQ0FBQzhKLENBQUFBLFVBQVd6SixXQUFXMVcsUUFBUSxDQUFDbWdCLGFBQ25EZSxDQUFBQSxlQUFlN0ssSUFBSSxDQUFDOEosQ0FBQUEsVUFBV3pKLFdBQVcxVyxRQUFRLENBQUNtZ0IsYUFDbkRnQixpQkFBaUI5SyxJQUFJLENBQUMrSyxDQUFBQSxVQUFXMUssV0FBVzFXLFFBQVEsQ0FBQ29oQixTQUFRLEdBQUk7WUFDcEUsT0FBTztRQUNUO1FBRUEsa0NBQWtDO1FBQ2xDLElBQUksQUFBQzFLLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsYUFBYTBXLFdBQVcxVyxRQUFRLENBQUMsU0FBUSxLQUM3RDBXLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsWUFBWTBXLFdBQVcxVyxRQUFRLENBQUMsT0FBTSxHQUFJO1lBQ2pFLE9BQU87UUFDVDtRQUVBLG9DQUFvQztRQUNwQyxJQUFJMFcsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjMFcsV0FBVzFXLFFBQVEsQ0FBQyxrQkFDdEQwVyxXQUFXMVcsUUFBUSxDQUFDLGdCQUFnQjBXLFdBQVcxVyxRQUFRLENBQUMsV0FBVztZQUNyRSxPQUFPO1FBQ1Q7UUFFQSxPQUFPO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELE1BQWMxRiwwQkFBMEJmLE1BQXlCLEVBQUVSLE1BQWMsRUFBRU0sS0FBYSxFQUE0QjtRQUMxSCxJQUFJO1lBQ0YsbUNBQW1DO1lBQ25DLE1BQU11RyxPQUFPLE1BQU01QixlQUFNLENBQUM0QixJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeEMxQixPQUFPO29CQUFFcUIsSUFBSXpHO2dCQUFPO2dCQUNwQitHLFFBQVE7b0JBQUVDLE1BQU07b0JBQU04QixnQkFBZ0I7Z0JBQUs7WUFDN0M7WUFFQSxJQUFJLENBQUNqQyxNQUFNO2dCQUNULE9BQU87b0JBQ0xqRyxTQUFTO29CQUNUQyxTQUFTO29CQUNUOEMsT0FBTztnQkFDVDtZQUNGO1lBRUF2RCxjQUFNLENBQUNDLElBQUksQ0FBQyw4REFBOEQ7Z0JBQ3hFQyxPQUFPQSxNQUFNQyxTQUFTLENBQUMsR0FBRztnQkFDMUJQO2dCQUNBOEksZ0JBQWdCakMsS0FBS2lDLGNBQWM7WUFDckM7WUFFQSxvQ0FBb0M7WUFDcEMsTUFBTSxFQUFFd2Ysb0JBQW9CLEVBQUVDLHVCQUF1QixFQUFFLEdBQUcsTUFBTSxtRUFBQSxRQUFPO1lBRXZFLG1EQUFtRDtZQUNuRCxNQUFNQyxzQkFBc0IsSUFBSSxDQUFDQywwQkFBMEIsQ0FBQ25vQjtZQUU1RCxJQUFJa29CLHFCQUFxQjtnQkFDdkIsNEJBQTRCO2dCQUM1QixNQUFNRSxvQkFBb0IsTUFBTUgsd0JBQXdCQztnQkFFeEQsSUFBSSxDQUFDRSxtQkFBbUI7b0JBQ3RCLE9BQU87d0JBQ0w5bkIsU0FBUzt3QkFDVEMsU0FBUyxDQUFDLG9CQUFvQixFQUFFMm5CLG9CQUFvQixxQkFBcUIsQ0FBQzt3QkFDMUV6bkIsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFDRjtnQkFFQSxNQUFNNG5CLGNBQWNELGtCQUFrQnBpQixNQUFNLEtBQUssWUFBWSxNQUMxQ29pQixrQkFBa0JwaUIsTUFBTSxLQUFLLGFBQWEsT0FBTztnQkFFcEUsT0FBTztvQkFDTDFGLFNBQVM7b0JBQ1RDLFNBQVMsR0FBRzhuQixZQUFZLEdBQUcsRUFBRUQsa0JBQWtCN2pCLElBQUksQ0FBQyxNQUFNLEVBQUU2akIsa0JBQWtCcGlCLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRW9pQixrQkFBa0JFLFlBQVksQ0FBQyxFQUFFLENBQUM7b0JBQzFJNWtCLE1BQU07d0JBQ0o0aEIsYUFBYThDO3dCQUNiRSxjQUFjRixrQkFBa0JFLFlBQVk7d0JBQzVDQyxhQUFhSCxrQkFBa0JHLFdBQVc7d0JBQzFDQyxrQkFBa0JKLGtCQUFrQkksZ0JBQWdCO29CQUN0RDtvQkFDQXBpQixTQUFTO3dCQUNQMEUsTUFBTTt3QkFDTjBhLGVBQWU0QyxrQkFBa0JqaUIsRUFBRTt3QkFDbkNILFFBQVFvaUIsa0JBQWtCcGlCLE1BQU07d0JBQ2hDeWlCLGVBQWVMLGtCQUFrQkUsWUFBWSxJQUFJRixrQkFBa0JNLFNBQVM7b0JBQzlFO2dCQUNGO1lBQ0YsT0FBTztnQkFDTCx3QkFBd0I7Z0JBQ3hCLE1BQU1DLGVBQWUsTUFBTVgscUJBQXFCemhCLEtBQUtpQyxjQUFjO2dCQUVuRSxNQUFNNmYsY0FBY00sYUFBYUMsT0FBTyxDQUFDNWlCLE1BQU0sS0FBSyxZQUFZLE1BQzdDMmlCLGFBQWFDLE9BQU8sQ0FBQzVpQixNQUFNLEtBQUssYUFBYSxPQUFPO2dCQUV2RSxNQUFNNmlCLGlCQUFpQkYsYUFBYTljLFlBQVksQ0FBQzdHLE1BQU0sQ0FBQ2tELENBQUFBLElBQ3REQSxFQUFFbEMsTUFBTSxLQUFLLGVBQWVrQyxFQUFFc2dCLGdCQUFnQixLQUFLO2dCQUdyRCxJQUFJam9CLFVBQVUsR0FBRzhuQixZQUFZLHdCQUF3QixFQUFFTSxhQUFhQyxPQUFPLENBQUNFLEtBQUssQ0FBQyxVQUFVLENBQUM7Z0JBQzdGdm9CLFdBQVcsQ0FBQyw0QkFBNEIsQ0FBQztnQkFDekNBLFdBQVcsQ0FBQyxXQUFXLEVBQUVvb0IsYUFBYUksT0FBTyxDQUFDQyxZQUFZLENBQUMsQ0FBQyxFQUFFTCxhQUFhSSxPQUFPLENBQUNFLGlCQUFpQixDQUFDLEVBQUUsQ0FBQztnQkFDeEcxb0IsV0FBVyxDQUFDLG9CQUFvQixFQUFFNkgsS0FBS2dTLEtBQUssQ0FBQ3VPLGFBQWFJLE9BQU8sQ0FBQ0csbUJBQW1CLEVBQUUsSUFBSSxDQUFDO2dCQUM1RjNvQixXQUFXLENBQUMsY0FBYyxFQUFFb29CLGFBQWE3RyxRQUFRLENBQUNxSCxTQUFTLENBQUNyWixXQUFXLEdBQUcsRUFBRSxDQUFDO2dCQUU3RSxJQUFJK1ksZUFBZXpqQixNQUFNLEdBQUcsR0FBRztvQkFDN0I3RSxXQUFXLENBQUMsMkJBQTJCLENBQUM7b0JBQ3hDc29CLGVBQWV0SyxPQUFPLENBQUM2SyxDQUFBQTt3QkFDckI3b0IsV0FBVyxDQUFDLEVBQUUsRUFBRTZvQixNQUFNN2tCLElBQUksQ0FBQyxFQUFFLEVBQUU2a0IsTUFBTXBqQixNQUFNLENBQUMsRUFBRSxDQUFDO29CQUNqRDtnQkFDRjtnQkFFQSxNQUFNdkYsY0FBY2tvQixhQUFhN0csUUFBUSxDQUFDdUgsZUFBZSxDQUFDamtCLE1BQU0sR0FBRyxJQUMvRHVqQixhQUFhN0csUUFBUSxDQUFDdUgsZUFBZSxHQUNyQztvQkFBQztpQkFBd0Q7Z0JBRTdELE9BQU87b0JBQ0wvb0IsU0FBUztvQkFDVEM7b0JBQ0FtRCxNQUFNO3dCQUNKNGxCLGVBQWVYLGFBQWFDLE9BQU8sQ0FBQzVpQixNQUFNO3dCQUMxQ3VqQixhQUFhWixhQUFhQyxPQUFPLENBQUNFLEtBQUs7d0JBQ3ZDQyxTQUFTSixhQUFhSSxPQUFPO3dCQUM3QmxkLGNBQWM4YyxhQUFhOWMsWUFBWSxDQUFDOE0sR0FBRyxDQUFDelEsQ0FBQUEsSUFBTSxDQUFBO2dDQUNoRDNELE1BQU0yRCxFQUFFM0QsSUFBSTtnQ0FDWnlCLFFBQVFrQyxFQUFFbEMsTUFBTTtnQ0FDaEJzaUIsY0FBY3BnQixFQUFFb2dCLFlBQVk7Z0NBQzVCRSxrQkFBa0J0Z0IsRUFBRXNnQixnQkFBZ0I7NEJBQ3RDLENBQUE7d0JBQ0ExRyxVQUFVNkcsYUFBYTdHLFFBQVE7b0JBQ2pDO29CQUNBMWIsU0FBUzt3QkFDUDBFLE1BQU07d0JBQ04ySCxXQUFXa1csYUFBYUMsT0FBTyxDQUFDWSxXQUFXO3dCQUMzQ0MscUJBQXFCWixlQUFlempCLE1BQU07b0JBQzVDO29CQUNBM0U7Z0JBQ0Y7WUFDRjtRQUVGLEVBQUUsT0FBTzRDLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyxxREFBcUQ7Z0JBQ2hFQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkRyRCxPQUFPQSxNQUFNQyxTQUFTLENBQUMsR0FBRztnQkFDMUJQO1lBQ0Y7WUFFQSxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFDWDtvQkFDQTtvQkFDQTtpQkFDRDtZQUNIO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUTBuQiwyQkFBMkJub0IsS0FBYSxFQUFpQjtRQUMvRCxNQUFNcWQsYUFBYXJkLE1BQU0rQyxXQUFXO1FBRXBDLHdDQUF3QztRQUN4QyxNQUFNMm1CLGlCQUF5QztZQUM3QyxZQUFZO1lBQ1osVUFBVTtZQUNWLFVBQVU7WUFDVixlQUFlO1lBQ2YsWUFBWTtZQUNaLFlBQVk7WUFDWixjQUFjO1lBQ2QsU0FBUztZQUNULFNBQVM7WUFDVCxVQUFVO1lBQ1YsTUFBTTtZQUNOLFNBQVM7WUFDVCxZQUFZO1lBQ1osUUFBUTtZQUNSLE9BQU87WUFDUCxVQUFVO1lBQ1YsWUFBWTtRQUNkO1FBRUEsS0FBSyxNQUFNLENBQUM1QyxTQUFTeEIsWUFBWSxJQUFJcGdCLE9BQU80YSxPQUFPLENBQUM0SixnQkFBaUI7WUFDbkUsSUFBSXJNLFdBQVcxVyxRQUFRLENBQUNtZ0IsVUFBVTtnQkFDaEMsT0FBT3hCO1lBQ1Q7UUFDRjtRQUVBLE9BQU87SUFDVDtJQUVBOztHQUVDLEdBQ0QsQUFBUXBrQixxQkFBcUJoQixNQUF5QixFQUFFRixLQUFhLEVBQVc7UUFDOUUsTUFBTTJwQixrQkFBa0I7WUFDdEI7WUFBUTtZQUFPO1lBQVU7WUFBVztZQUFXO1lBQWE7WUFDNUQ7WUFBaUI7WUFBYztZQUFvQjtZQUNuRDtZQUFjO1lBQWU7WUFBWTtTQUMxQztRQUVELE1BQU10TSxhQUFhcmQsTUFBTStDLFdBQVc7UUFFcEMsT0FBTzRtQixnQkFBZ0IzTSxJQUFJLENBQUM4SixDQUFBQSxVQUFXekosV0FBVzFXLFFBQVEsQ0FBQ21nQixhQUNuRHpKLFdBQVcxVyxRQUFRLENBQUMsVUFBVzBXLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsYUFBYTBXLFdBQVcxVyxRQUFRLENBQUMsY0FBYSxLQUNqRzBXLFdBQVcxVyxRQUFRLENBQUMsV0FBWTBXLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsYUFBYTBXLFdBQVcxVyxRQUFRLENBQUMsVUFBUztJQUN4RztJQUVBOztHQUVDLEdBQ0QsTUFBY3hGLG1CQUFtQmpCLE1BQXlCLEVBQUVSLE1BQWMsRUFBRU0sS0FBYSxFQUE0QjtRQUNuSCxJQUFJO1lBQ0YsbUNBQW1DO1lBQ25DLE1BQU11RyxPQUFPLE1BQU01QixlQUFNLENBQUM0QixJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeEMxQixPQUFPO29CQUFFcUIsSUFBSXpHO2dCQUFPO2dCQUNwQitHLFFBQVE7b0JBQUVDLE1BQU07b0JBQU04QixnQkFBZ0I7Z0JBQUs7WUFDN0M7WUFFQSxJQUFJLENBQUNqQyxNQUFNO2dCQUNULE9BQU87b0JBQ0xqRyxTQUFTO29CQUNUQyxTQUFTO29CQUNUOEMsT0FBTztnQkFDVDtZQUNGO1lBRUF2RCxjQUFNLENBQUNDLElBQUksQ0FBQyx1REFBdUQ7Z0JBQ2pFQyxPQUFPQSxNQUFNQyxTQUFTLENBQUMsR0FBRztnQkFDMUJQO2dCQUNBOEksZ0JBQWdCakMsS0FBS2lDLGNBQWM7WUFDckM7WUFFQSw2QkFBNkI7WUFDN0IsTUFBTSxFQUFFb2hCLG9CQUFvQixFQUFFQyx1QkFBdUIsRUFBRSxHQUFHLE1BQU0sbUVBQUEsUUFBTztZQUV2RSwyREFBMkQ7WUFDM0QsTUFBTTNCLHNCQUFzQixJQUFJLENBQUNDLDBCQUEwQixDQUFDbm9CO1lBRTVELElBQUlrb0IscUJBQXFCO2dCQUN2Qiw0QkFBNEI7Z0JBQzVCLElBQUk7b0JBQ0YsTUFBTTRCLGdCQUFnQixNQUFNRCx3QkFBd0JucUIsUUFBUXdvQjtvQkFFNUQsTUFBTTZCLGNBQWNELGNBQWNFLFlBQVksQ0FBQ0QsV0FBVztvQkFDMUQsTUFBTUUsa0JBQWtCSCxjQUFjL1csT0FBTyxDQUFDbVgsWUFBWTtvQkFDMUQsTUFBTWxILGNBQWM4RyxjQUFjL1csT0FBTyxDQUFDb1gsaUJBQWlCLEdBQUcvaEIsS0FBS2dpQixHQUFHLENBQUNOLGNBQWMvVyxPQUFPLENBQUNtWCxZQUFZLEVBQUUsS0FBSztvQkFFaEgsSUFBSTNwQixVQUFVLENBQUMsd0JBQXdCLEVBQUUybkIsb0JBQW9CLE1BQU0sQ0FBQztvQkFFcEUsSUFBSTZCLGNBQWMsR0FBRzt3QkFDbkJ4cEIsV0FBVyxDQUFDLHlDQUF5QyxFQUFFd3BCLFlBQVksU0FBUyxDQUFDO29CQUMvRSxPQUFPLElBQUlBLGdCQUFnQixHQUFHO3dCQUM1QnhwQixXQUFXLENBQUMseURBQXlELENBQUM7b0JBQ3hFLE9BQU87d0JBQ0xBLFdBQVcsQ0FBQywyQ0FBMkMsRUFBRTZILEtBQUtpaUIsR0FBRyxDQUFDTixhQUFhLFNBQVMsQ0FBQztvQkFDM0Y7b0JBRUF4cEIsV0FBVyxDQUFDLHlCQUF5QixDQUFDO29CQUN0Q0EsV0FBVyxDQUFDLG9CQUFvQixFQUFFMHBCLGdCQUFnQixFQUFFLENBQUM7b0JBQ3JEMXBCLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRTZILEtBQUtnUyxLQUFLLENBQUM0SSxhQUFhLEdBQUcsQ0FBQztvQkFDMUR6aUIsV0FBVyxDQUFDLGdDQUFnQyxFQUFFdXBCLGNBQWMvVyxPQUFPLENBQUN1WCwwQkFBMEIsQ0FBQyxVQUFVLENBQUM7b0JBQzFHL3BCLFdBQVcsQ0FBQywyQkFBMkIsRUFBRXVwQixjQUFjL1csT0FBTyxDQUFDd1gsV0FBVyxDQUFDLElBQUksQ0FBQztvQkFFaEYsSUFBSVQsY0FBY1QsZUFBZSxDQUFDamtCLE1BQU0sR0FBRyxHQUFHO3dCQUM1QzdFLFdBQVcsQ0FBQyx5QkFBeUIsQ0FBQzt3QkFDdEN1cEIsY0FBY1QsZUFBZSxDQUFDOUssT0FBTyxDQUFDaU0sQ0FBQUE7NEJBQ3BDanFCLFdBQVcsQ0FBQyxFQUFFLEVBQUVpcUIsSUFBSSxFQUFFLENBQUM7d0JBQ3pCO29CQUNGO29CQUVBLE9BQU87d0JBQ0xscUIsU0FBUzt3QkFDVEM7d0JBQ0FtRCxNQUFNOzRCQUNKK21CLFdBQVdYLGNBQWNXLFNBQVM7NEJBQ2xDVixhQUFhRCxjQUFjRSxZQUFZLENBQUNELFdBQVc7NEJBQ25ERSxpQkFBaUJILGNBQWMvVyxPQUFPLENBQUNtWCxZQUFZOzRCQUNuREMsbUJBQW1CTCxjQUFjL1csT0FBTyxDQUFDb1gsaUJBQWlCOzRCQUMxRGQsaUJBQWlCUyxjQUFjVCxlQUFlO3dCQUNoRDt3QkFDQTVvQixhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUVGLEVBQUUsT0FBTzRDLE9BQU87b0JBQ2QsT0FBTzt3QkFDTC9DLFNBQVM7d0JBQ1RDLFNBQVMsQ0FBQyxvQkFBb0IsRUFBRTJuQixvQkFBb0IsY0FBYyxFQUFFN2tCLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRywyQkFBMkI7d0JBQ3hJRSxhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUNGO1lBQ0YsT0FBTztnQkFDTCxzQkFBc0I7Z0JBQ3RCLElBQUk7b0JBQ0YsTUFBTXFwQixnQkFBZ0IsTUFBTUYscUJBQXFCbHFCO29CQUVqRCxNQUFNcXFCLGNBQWNELGNBQWNFLFlBQVksQ0FBQ0QsV0FBVztvQkFDMUQsTUFBTUUsa0JBQWtCSCxjQUFjL1csT0FBTyxDQUFDbVgsWUFBWTtvQkFDMUQsTUFBTWxILGNBQWM4RyxjQUFjL1csT0FBTyxDQUFDb1gsaUJBQWlCLEdBQUcvaEIsS0FBS2dpQixHQUFHLENBQUNOLGNBQWMvVyxPQUFPLENBQUNtWCxZQUFZLEVBQUUsS0FBSztvQkFFaEgsSUFBSTNwQixVQUFVLENBQUMscUNBQXFDLENBQUM7b0JBRXJELElBQUl3cEIsY0FBYyxJQUFJO3dCQUNwQnhwQixXQUFXLENBQUMsMERBQTBELEVBQUV3cEIsWUFBWSxTQUFTLENBQUM7b0JBQ2hHLE9BQU8sSUFBSUEsY0FBYyxHQUFHO3dCQUMxQnhwQixXQUFXLENBQUMseUNBQXlDLEVBQUV3cEIsWUFBWSxTQUFTLENBQUM7b0JBQy9FLE9BQU8sSUFBSUEsZ0JBQWdCLEdBQUc7d0JBQzVCeHBCLFdBQVcsQ0FBQyxpRUFBaUUsQ0FBQztvQkFDaEYsT0FBTzt3QkFDTEEsV0FBVyxDQUFDLHFEQUFxRCxFQUFFNkgsS0FBS2lpQixHQUFHLENBQUNOLGFBQWEsU0FBUyxDQUFDO29CQUNyRztvQkFFQXhwQixXQUFXLENBQUMseUJBQXlCLENBQUM7b0JBQ3RDQSxXQUFXLENBQUMsZ0JBQWdCLEVBQUV1cEIsY0FBY0UsWUFBWSxDQUFDVSxNQUFNLENBQUMsR0FBRyxFQUFFWixjQUFjRSxZQUFZLENBQUNXLEtBQUssQ0FBQyxFQUFFLENBQUM7b0JBQ3pHcHFCLFdBQVcsQ0FBQyxvQkFBb0IsRUFBRTBwQixnQkFBZ0IsRUFBRSxDQUFDO29CQUNyRDFwQixXQUFXLENBQUMsZ0JBQWdCLEVBQUU2SCxLQUFLZ1MsS0FBSyxDQUFDNEksYUFBYSxHQUFHLENBQUM7b0JBQzFEemlCLFdBQVcsQ0FBQyxzQkFBc0IsRUFBRXVwQixjQUFjL1csT0FBTyxDQUFDdVgsMEJBQTBCLENBQUMsVUFBVSxDQUFDO29CQUNoRy9wQixXQUFXLENBQUMsaUJBQWlCLEVBQUV1cEIsY0FBYy9XLE9BQU8sQ0FBQ3dYLFdBQVcsQ0FBQyxJQUFJLENBQUM7b0JBRXRFLElBQUlULGNBQWNULGVBQWUsQ0FBQ2prQixNQUFNLEdBQUcsR0FBRzt3QkFDNUM3RSxXQUFXLENBQUMseUJBQXlCLENBQUM7d0JBQ3RDdXBCLGNBQWNULGVBQWUsQ0FBQzlLLE9BQU8sQ0FBQ2lNLENBQUFBOzRCQUNwQ2pxQixXQUFXLENBQUMsRUFBRSxFQUFFaXFCLElBQUksRUFBRSxDQUFDO3dCQUN6QjtvQkFDRjtvQkFFQWpxQixXQUFXLENBQUMsb0JBQW9CLEVBQUV1cEIsY0FBY2MsV0FBVyxDQUFDMVMsY0FBYyxJQUFJO29CQUU5RSxPQUFPO3dCQUNMNVgsU0FBUzt3QkFDVEM7d0JBQ0FtRCxNQUFNOzRCQUNKK21CLFdBQVdYLGNBQWNXLFNBQVM7NEJBQ2xDSSxjQUFjZixjQUFjRSxZQUFZLENBQUNVLE1BQU07NEJBQy9DSSxhQUFhaEIsY0FBY0UsWUFBWSxDQUFDVyxLQUFLOzRCQUM3Q1osYUFBYUQsY0FBY0UsWUFBWSxDQUFDRCxXQUFXOzRCQUNuREUsaUJBQWlCSCxjQUFjL1csT0FBTyxDQUFDbVgsWUFBWTs0QkFDbkRDLG1CQUFtQkwsY0FBYy9XLE9BQU8sQ0FBQ29YLGlCQUFpQjs0QkFDMURZLGVBQWVqQixjQUFjL1csT0FBTyxDQUFDZ1ksYUFBYTs0QkFDbERSLGFBQWFULGNBQWMvVyxPQUFPLENBQUN3WCxXQUFXOzRCQUM5Q2xCLGlCQUFpQlMsY0FBY1QsZUFBZTt3QkFDaEQ7d0JBQ0E1b0IsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFFRixFQUFFLE9BQU80QyxPQUFPO29CQUNkLE9BQU87d0JBQ0wvQyxTQUFTO3dCQUNUQyxTQUFTLENBQUMsZ0RBQWdELEVBQUU4QyxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUcsMkJBQTJCO3dCQUNoSThDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRzt3QkFDaERFLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBQ0Y7WUFDRjtRQUVGLEVBQUUsT0FBTzRDLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyxpQ0FBaUM7Z0JBQzVDQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkQzRDtnQkFDQU0sT0FBT0EsTUFBTUMsU0FBUyxDQUFDLEdBQUc7WUFDNUI7WUFFQSxPQUFPO2dCQUNMSyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFDWDtvQkFDQTtvQkFDQTtpQkFDRDtZQUNIO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUVcseUJBQXlCbEIsTUFBeUIsRUFBRUYsS0FBYSxFQUFXO1FBQ2xGLE1BQU1nckIscUJBQXFCO1lBQ3pCO1lBQVU7WUFBYztZQUFXO1lBQVc7WUFBVztZQUN6RDtZQUFnQjtZQUFpQjtZQUFzQjtZQUN2RDtZQUFpQjtZQUFrQjtZQUFvQjtTQUN4RDtRQUVELE1BQU0zTixhQUFhcmQsTUFBTStDLFdBQVc7UUFFcEMsT0FBT2lvQixtQkFBbUJoTyxJQUFJLENBQUM4SixDQUFBQSxVQUFXekosV0FBVzFXLFFBQVEsQ0FBQ21nQixhQUN0RHpKLFdBQVcxVyxRQUFRLENBQUMsYUFBYzBXLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsWUFBWTBXLFdBQVcxVyxRQUFRLENBQUMsVUFBUyxLQUMvRjBXLFdBQVcxVyxRQUFRLENBQUMsY0FBZTBXLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsWUFBWTBXLFdBQVcxVyxRQUFRLENBQUMsS0FBSTtJQUNyRztJQUVBOztHQUVDLEdBQ0QsTUFBY3RGLHVCQUF1Qm5CLE1BQXlCLEVBQUVSLE1BQWMsRUFBRU0sS0FBYSxFQUE0QjtRQUN2SCxJQUFJO1lBQ0YsbUNBQW1DO1lBQ25DLE1BQU11RyxPQUFPLE1BQU01QixlQUFNLENBQUM0QixJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeEMxQixPQUFPO29CQUFFcUIsSUFBSXpHO2dCQUFPO2dCQUNwQitHLFFBQVE7b0JBQUVDLE1BQU07b0JBQU04QixnQkFBZ0I7b0JBQU1qRSxNQUFNO2dCQUFLO1lBQ3pEO1lBRUEsSUFBSSxDQUFDZ0MsTUFBTTtnQkFDVCxPQUFPO29CQUNMakcsU0FBUztvQkFDVEMsU0FBUztvQkFDVDhDLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBdkQsY0FBTSxDQUFDQyxJQUFJLENBQUMsMkRBQTJEO2dCQUNyRUMsT0FBT0EsTUFBTUMsU0FBUyxDQUFDLEdBQUc7Z0JBQzFCUDtnQkFDQThJLGdCQUFnQmpDLEtBQUtpQyxjQUFjO1lBQ3JDO1lBRUEsd0NBQXdDO1lBQ3hDLE1BQU0sRUFBRXlpQixxQkFBcUIsRUFBRUMsbUJBQW1CLEVBQUVDLDRCQUE0QixFQUFFLEdBQUcsTUFBTSxtRUFBQSxRQUFPO1lBRWxHLHNDQUFzQztZQUN0QyxNQUFNQyxtQkFBbUIsSUFBSSxDQUFDQyxzQkFBc0IsQ0FBQ3JyQjtZQUVyRCxJQUFJb3JCLGlCQUFpQjVvQixNQUFNLEtBQUssVUFBVTtnQkFDeEMsd0JBQXdCO2dCQUN4QixNQUFNOG9CLG9CQUFvQixNQUFNSCw2QkFBNkJJLG9CQUFvQjtnQkFDakYsTUFBTUMsZ0JBQWdCLE1BQU1MLDZCQUE2Qk0sb0JBQW9CLENBQUM7Z0JBRTlFLElBQUlsckIsVUFBVSxDQUFDLGtDQUFrQyxDQUFDO2dCQUVsRCxJQUFJK3FCLGtCQUFrQmxtQixNQUFNLEdBQUcsR0FBRztvQkFDaEM3RSxXQUFXLENBQUMseUJBQXlCLEVBQUUrcUIsa0JBQWtCbG1CLE1BQU0sQ0FBQyxNQUFNLENBQUM7b0JBQ3ZFa21CLGtCQUFrQi9NLE9BQU8sQ0FBQ21OLENBQUFBO3dCQUN4Qm5yQixXQUFXLENBQUMsRUFBRSxFQUFFbXJCLFdBQVd2bEIsRUFBRSxDQUFDLEVBQUUsRUFBRXVsQixXQUFXMWxCLE1BQU0sQ0FBQyxFQUFFLEVBQUUwbEIsV0FBV2pZLEtBQUssQ0FBQ3pPLE1BQU0sQ0FBQzJtQixDQUFBQSxJQUFLQSxFQUFFM2xCLE1BQU0sS0FBSyxhQUFhWixNQUFNLENBQUMsQ0FBQyxFQUFFc21CLFdBQVdqWSxLQUFLLENBQUNyTyxNQUFNLENBQUMsU0FBUyxDQUFDO29CQUM3SjtvQkFDQTdFLFdBQVcsQ0FBQyxFQUFFLENBQUM7Z0JBQ2pCO2dCQUVBLElBQUlpckIsY0FBY3BtQixNQUFNLEdBQUcsR0FBRztvQkFDNUI3RSxXQUFXLENBQUMsbUNBQW1DLENBQUM7b0JBQ2hEaXJCLGNBQWM3bEIsS0FBSyxDQUFDLEdBQUcsR0FBRzRZLE9BQU8sQ0FBQ21OLENBQUFBO3dCQUNoQyxNQUFNRSxhQUFhRixXQUFXMWxCLE1BQU0sS0FBSyxjQUFjLE1BQ3JDMGxCLFdBQVcxbEIsTUFBTSxLQUFLLFdBQVcsTUFDakMwbEIsV0FBVzFsQixNQUFNLEtBQUssZ0JBQWdCLE9BQU87d0JBQy9EekYsV0FBVyxDQUFDLEVBQUUsRUFBRXFyQixXQUFXLENBQUMsRUFBRUYsV0FBV3ZsQixFQUFFLENBQUMsRUFBRSxFQUFFdWxCLFdBQVcxbEIsTUFBTSxDQUFDLEVBQUUsQ0FBQztvQkFDdkU7Z0JBQ0YsT0FBTztvQkFDTHpGLFdBQVcsQ0FBQyxnQ0FBZ0MsQ0FBQztnQkFDL0M7Z0JBRUEsT0FBTztvQkFDTEQsU0FBUztvQkFDVEM7b0JBQ0FtRCxNQUFNO3dCQUNKNG5CO3dCQUNBRSxlQUFlQSxjQUFjN2xCLEtBQUssQ0FBQyxHQUFHO3dCQUN0Q29OLFNBQVM7NEJBQ1A4WSxhQUFhUCxrQkFBa0JsbUIsTUFBTTs0QkFDckMwbUIsYUFBYU4sY0FBY3BtQixNQUFNO3dCQUNuQztvQkFDRjtvQkFDQTNFLGFBQWE7d0JBQ1g7d0JBQ0E7d0JBQ0E7cUJBQ0Q7Z0JBQ0g7WUFDRixPQUFPLElBQUkycUIsaUJBQWlCNW9CLE1BQU0sS0FBSyxVQUFVO2dCQUMvQyx3QkFBd0I7Z0JBQ3hCLElBQUksQ0FBQzRvQixpQkFBaUJXLE9BQU8sRUFBRTtvQkFDN0IsT0FBTzt3QkFDTHpyQixTQUFTO3dCQUNUQyxTQUFTO3dCQUNURSxhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUNGO2dCQUVBLElBQUk7b0JBQ0YsTUFBTTZKLFNBQVMsTUFBTTJnQixzQkFBc0I7d0JBQ3pDYyxTQUFTWCxpQkFBaUJXLE9BQU87d0JBQ2pDQyxjQUFjWixpQkFBaUJZLFlBQVksSUFBSTt3QkFDL0NDLG1CQUFtQmIsaUJBQWlCYyxXQUFXLElBQUk7d0JBQ25EQyxVQUFVZixpQkFBaUJlLFFBQVEsSUFBSTs0QkFBRXJoQixNQUFNOzRCQUFXc2hCLFlBQVksQ0FBQzt3QkFBRTtvQkFDM0U7b0JBRUEsSUFBSTdyQixVQUFVLENBQUMscUNBQXFDLENBQUM7b0JBQ3JEQSxXQUFXLENBQUMsY0FBYyxFQUFFNnFCLGlCQUFpQlcsT0FBTyxDQUFDLENBQUMsRUFBRVgsaUJBQWlCWSxZQUFZLElBQUksU0FBUyxFQUFFLENBQUM7b0JBQ3JHenJCLFdBQVcsQ0FBQyxlQUFlLEVBQUU2cUIsaUJBQWlCYyxXQUFXLElBQUksY0FBYyxjQUFjLENBQUM7b0JBQzFGM3JCLFdBQVcsQ0FBQyxpQkFBaUIsRUFBRTZxQixpQkFBaUJlLFFBQVEsRUFBRXJoQixRQUFRLFVBQVUsYUFBYSxDQUFDO29CQUMxRnZLLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRStKLE9BQU8sSUFBSSxDQUFDO29CQUUxQyxJQUFJOGdCLGlCQUFpQmMsV0FBVyxLQUFLLGNBQWM7d0JBQ2pEM3JCLFdBQVcsQ0FBQyxtREFBbUQsQ0FBQzt3QkFDaEVBLFdBQVcsQ0FBQywyQ0FBMkMsQ0FBQztvQkFDMUQsT0FBTzt3QkFDTEEsV0FBVyxDQUFDLHdDQUF3QyxDQUFDO3dCQUNyREEsV0FBVyxDQUFDLDRDQUE0QyxDQUFDO29CQUMzRDtvQkFFQSxPQUFPO3dCQUNMRCxTQUFTO3dCQUNUQzt3QkFDQW1ELE1BQU07NEJBQ0o0Rzs0QkFDQXloQixTQUFTWCxpQkFBaUJXLE9BQU87NEJBQ2pDQyxjQUFjWixpQkFBaUJZLFlBQVksSUFBSTs0QkFDL0NDLG1CQUFtQmIsaUJBQWlCYyxXQUFXLElBQUk7NEJBQ25EQyxVQUFVZixpQkFBaUJlLFFBQVEsRUFBRXJoQixRQUFRO3dCQUMvQzt3QkFDQXJLLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBRUYsRUFBRSxPQUFPNEMsT0FBTztvQkFDZCxPQUFPO3dCQUNML0MsU0FBUzt3QkFDVEMsU0FBUyxDQUFDLDZCQUE2QixFQUFFOEMsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHLDJCQUEyQjt3QkFDN0dFLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBQ0Y7WUFDRixPQUFPLElBQUkycUIsaUJBQWlCNW9CLE1BQU0sS0FBSyxXQUFXO2dCQUNoRCx5QkFBeUI7Z0JBQ3pCLE1BQU02cEIsVUFBVSxNQUFNbEIsNkJBQTZCTSxvQkFBb0IsQ0FBQztnQkFFeEUsSUFBSWxyQixVQUFVLENBQUMsbUNBQW1DLENBQUM7Z0JBRW5ELElBQUk4ckIsUUFBUWpuQixNQUFNLEtBQUssR0FBRztvQkFDeEI3RSxXQUFXLENBQUMsZ0NBQWdDLENBQUM7Z0JBQy9DLE9BQU87b0JBQ0xBLFdBQVcsQ0FBQyx5QkFBeUIsRUFBRThyQixRQUFRam5CLE1BQU0sQ0FBQyxRQUFRLENBQUM7b0JBRS9EaW5CLFFBQVExbUIsS0FBSyxDQUFDLEdBQUcsR0FBRzRZLE9BQU8sQ0FBQ21OLENBQUFBO3dCQUMxQixNQUFNRSxhQUFhRixXQUFXMWxCLE1BQU0sS0FBSyxjQUFjLE1BQ3JDMGxCLFdBQVcxbEIsTUFBTSxLQUFLLFdBQVcsTUFDakMwbEIsV0FBVzFsQixNQUFNLEtBQUssZ0JBQWdCLE9BQU87d0JBRS9EekYsV0FBVyxHQUFHcXJCLFdBQVcsR0FBRyxFQUFFRixXQUFXdmxCLEVBQUUsQ0FBQyxJQUFJLENBQUM7d0JBQ2pENUYsV0FBVyxDQUFDLGVBQWUsRUFBRW1yQixXQUFXM0MsT0FBTyxDQUFDdUQsYUFBYSxDQUFDLElBQUksQ0FBQzt3QkFDbkUvckIsV0FBVyxDQUFDLGNBQWMsRUFBRW1yQixXQUFXalksS0FBSyxDQUFDck8sTUFBTSxDQUFDLEVBQUUsRUFBRXNtQixXQUFXalksS0FBSyxDQUFDek8sTUFBTSxDQUFDMm1CLENBQUFBLElBQUtBLEVBQUUzbEIsTUFBTSxLQUFLLGFBQWFaLE1BQU0sQ0FBQyxhQUFhLENBQUM7d0JBQ3BJN0UsV0FBVyxDQUFDLGNBQWMsRUFBRW1yQixXQUFXYSxTQUFTLENBQUNyVSxjQUFjLEdBQUcsSUFBSSxDQUFDO29CQUN6RTtvQkFFQSxNQUFNOEssY0FBY3FKLFFBQVFybkIsTUFBTSxDQUFDd25CLENBQUFBLElBQUtBLEVBQUV4bUIsTUFBTSxLQUFLLGFBQWFaLE1BQU0sR0FBR2luQixRQUFRam5CLE1BQU0sR0FBRztvQkFDNUY3RSxXQUFXLENBQUMscUJBQXFCLEVBQUU2SCxLQUFLZ1MsS0FBSyxDQUFDNEksYUFBYSxHQUFHLENBQUM7Z0JBQ2pFO2dCQUVBLE9BQU87b0JBQ0wxaUIsU0FBUztvQkFDVEM7b0JBQ0FtRCxNQUFNO3dCQUNKMm9CLFNBQVNBLFFBQVExbUIsS0FBSyxDQUFDLEdBQUc7d0JBQzFCOG1CLFlBQVlKLFFBQVFqbkIsTUFBTTt3QkFDMUI0ZCxhQUFhcUosUUFBUWpuQixNQUFNLEdBQUcsSUFDNUJpbkIsUUFBUXJuQixNQUFNLENBQUN3bkIsQ0FBQUEsSUFBS0EsRUFBRXhtQixNQUFNLEtBQUssYUFBYVosTUFBTSxHQUFHaW5CLFFBQVFqbkIsTUFBTSxHQUFHLE1BQU07b0JBQ2xGO29CQUNBM0UsYUFBYTt3QkFDWDt3QkFDQTt3QkFDQTtxQkFDRDtnQkFDSDtZQUNGO1lBRUEsdURBQXVEO1lBQ3ZELE9BQU87Z0JBQ0xILFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RFLGFBQWE7b0JBQ1g7b0JBQ0E7b0JBQ0E7b0JBQ0E7aUJBQ0Q7WUFDSDtRQUVGLEVBQUUsT0FBTzRDLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyxxQ0FBcUM7Z0JBQ2hEQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkQzRDtnQkFDQU0sT0FBT0EsTUFBTUMsU0FBUyxDQUFDLEdBQUc7WUFDNUI7WUFFQSxPQUFPO2dCQUNMSyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFDWDtvQkFDQTtvQkFDQTtpQkFDRDtZQUNIO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUTRxQix1QkFBdUJyckIsS0FBYSxFQU0xQztRQUNBLE1BQU1xZCxhQUFhcmQsTUFBTStDLFdBQVc7UUFFcEMsbUJBQW1CO1FBQ25CLElBQUlQLFNBQTBDO1FBRTlDLElBQUk2YSxXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVU7WUFDakVuRSxTQUFTO1FBQ1gsT0FBTyxJQUFJNmEsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXMFcsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhO1lBQzNHbkUsU0FBUztRQUNYO1FBRUEsNEJBQTRCO1FBQzVCLE1BQU1rcUIsZ0JBQWdCO1lBQ3BCO1lBQ0E7WUFDQTtTQUNEO1FBRUQsSUFBSVg7UUFDSixLQUFLLE1BQU1ZLFdBQVdELGNBQWU7WUFDbkMsTUFBTUUsUUFBUTVzQixNQUFNNHNCLEtBQUssQ0FBQ0Q7WUFDMUIsSUFBSUMsT0FBTztnQkFDVGIsVUFBVWEsS0FBSyxDQUFDLEVBQUUsQ0FBQ3RuQixPQUFPLENBQUMsYUFBYSxJQUFJZ00sSUFBSTtnQkFDaEQ7WUFDRjtRQUNGO1FBRUEseUJBQXlCO1FBQ3pCLE1BQU11YixnQkFBd0M7WUFDNUMsU0FBUztZQUNULE9BQU87WUFDUCxXQUFXO1lBQ1gsZ0JBQWdCO1lBQ2hCLFdBQVc7UUFDYjtRQUVBLElBQUlkLFdBQVdjLGFBQWEsQ0FBQ2QsUUFBUSxFQUFFO1lBQ3JDQSxVQUFVYyxhQUFhLENBQUNkLFFBQVE7UUFDbEM7UUFFQSxrQkFBa0I7UUFDbEIsTUFBTWUsZUFBZTlzQixNQUFNNHNCLEtBQUssQ0FBQztRQUNqQyxNQUFNWixlQUFlYyxlQUFlQSxZQUFZLENBQUMsRUFBRSxHQUFHMXBCO1FBRXRELHNCQUFzQjtRQUN0QixJQUFJOG9CO1FBQ0osSUFBSTdPLFdBQVcxVyxRQUFRLENBQUMsaUJBQWlCMFcsV0FBVzFXLFFBQVEsQ0FBQyxTQUFTO1lBQ3BFdWxCLGNBQWM7UUFDaEIsT0FBTyxJQUFJN08sV0FBVzFXLFFBQVEsQ0FBQyxjQUFjMFcsV0FBVzFXLFFBQVEsQ0FBQyxVQUFVO1lBQ3pFdWxCLGNBQWM7UUFDaEIsT0FBTyxJQUFJN08sV0FBVzFXLFFBQVEsQ0FBQyxrQkFBa0IwVyxXQUFXMVcsUUFBUSxDQUFDLFFBQVE7WUFDM0V1bEIsY0FBYztRQUNoQjtRQUVBLG1CQUFtQjtRQUNuQixJQUFJQyxXQUFXL29CO1FBQ2YsSUFBSWlhLFdBQVcxVyxRQUFRLENBQUMsV0FBVztZQUNqQ3dsQixXQUFXO2dCQUFFcmhCLE1BQU07Z0JBQVVzaEIsWUFBWTtvQkFBRVcsa0JBQWtCO2dCQUFHO1lBQUU7UUFDcEUsT0FBTyxJQUFJMVAsV0FBVzFXLFFBQVEsQ0FBQyxpQkFBaUIwVyxXQUFXMVcsUUFBUSxDQUFDLGVBQWU7WUFDakZ3bEIsV0FBVztnQkFBRXJoQixNQUFNO2dCQUFjc2hCLFlBQVksQ0FBQztZQUFFO1FBQ2xELE9BQU8sSUFBSS9PLFdBQVcxVyxRQUFRLENBQUMsZ0JBQWdCMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXO1lBQzVFd2xCLFdBQVc7Z0JBQUVyaEIsTUFBTTtnQkFBYXNoQixZQUFZLENBQUM7WUFBRTtRQUNqRDtRQUVBLE9BQU87WUFDTDVwQjtZQUNBdXBCO1lBQ0FDO1lBQ0FFO1lBQ0FDO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUTdxQiwyQkFBMkJwQixNQUF5QixFQUFFRixLQUFhLEVBQVc7UUFDcEYsTUFBTWd0QixvQkFBb0I7WUFDeEI7WUFBa0I7WUFBWTtZQUFpQjtZQUFTO1lBQ3hEO1lBQW1CO1lBQVk7WUFBVztZQUMxQztZQUFrQjtZQUF1QjtZQUN6QztZQUF3QjtZQUFrQjtZQUMxQztZQUFtQjtZQUFvQjtTQUN4QztRQUVELE1BQU0zUCxhQUFhcmQsTUFBTStDLFdBQVc7UUFFcEMsT0FBT2lxQixrQkFBa0JoUSxJQUFJLENBQUM4SixDQUFBQSxVQUFXekosV0FBVzFXLFFBQVEsQ0FBQ21nQixhQUNyRHpKLFdBQVcxVyxRQUFRLENBQUMsV0FBWTBXLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsZUFBZTBXLFdBQVcxVyxRQUFRLENBQUMsWUFBVyxLQUNsRzBXLFdBQVcxVyxRQUFRLENBQUMsZUFBZ0IwVyxDQUFBQSxXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVM7SUFDNUc7SUFFQTs7R0FFQyxHQUNELE1BQWNwRix5QkFBeUJyQixNQUF5QixFQUFFUixNQUFjLEVBQUVNLEtBQWEsRUFBNEI7UUFDekgsSUFBSTtZQUNGLG1DQUFtQztZQUNuQyxNQUFNdUcsT0FBTyxNQUFNNUIsZUFBTSxDQUFDNEIsSUFBSSxDQUFDQyxVQUFVLENBQUM7Z0JBQ3hDMUIsT0FBTztvQkFBRXFCLElBQUl6RztnQkFBTztnQkFDcEIrRyxRQUFRO29CQUFFQyxNQUFNO29CQUFNOEIsZ0JBQWdCO29CQUFNakUsTUFBTTtnQkFBSztZQUN6RDtZQUVBLElBQUksQ0FBQ2dDLE1BQU07Z0JBQ1QsT0FBTztvQkFDTGpHLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1Q4QyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQXZELGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLDZEQUE2RDtnQkFDdkVDLE9BQU9BLE1BQU1DLFNBQVMsQ0FBQyxHQUFHO2dCQUMxQlA7Z0JBQ0E4SSxnQkFBZ0JqQyxLQUFLaUMsY0FBYztZQUNyQztZQUVBLG1DQUFtQztZQUNuQyxNQUFNLEVBQUV5a0IsOEJBQThCLEVBQUVDLHFCQUFxQixFQUFFQyx1QkFBdUIsRUFBRSxHQUFHLE1BQU0sbUVBQUEsUUFBTztZQUV4RyxtQ0FBbUM7WUFDbkMsTUFBTUMsaUJBQWlCLElBQUksQ0FBQ0MsNkJBQTZCLENBQUNydEI7WUFFMUQsSUFBSW90QixlQUFlNXFCLE1BQU0sS0FBSyxlQUFlO2dCQUMzQywwQkFBMEI7Z0JBQzFCLElBQUk7b0JBQ0YsTUFBTThxQixnQkFBZ0IsTUFBTUwsK0JBQStCO3dCQUN6RHZPLFdBQVcwTyxlQUFlMU8sU0FBUyxJQUFJO3dCQUN2QzZPLE9BQU9ILGVBQWVHLEtBQUssSUFBSTt3QkFDL0Iva0IsZ0JBQWdCakMsS0FBS2lDLGNBQWM7d0JBQ25DOUk7b0JBQ0Y7b0JBRUEsSUFBSWEsVUFBVSxDQUFDLG1DQUFtQyxDQUFDO29CQUNuREEsV0FBVyxDQUFDLGlCQUFpQixFQUFFNnNCLGVBQWUxTyxTQUFTLElBQUksV0FBVyxFQUFFLENBQUM7b0JBQ3pFbmUsV0FBVyxDQUFDLGNBQWMsRUFBRSxBQUFDNnNCLENBQUFBLGVBQWVHLEtBQUssSUFBSSxVQUFTLEVBQUdqb0IsT0FBTyxDQUFDLEtBQUssS0FBSyxFQUFFLENBQUM7b0JBQ3RGL0UsV0FBVyxDQUFDLHNCQUFzQixFQUFFK3NCLGNBQWNFLEtBQUssQ0FBQ3BvQixNQUFNLENBQUMsRUFBRSxDQUFDO29CQUNsRTdFLFdBQVcsQ0FBQyxzQkFBc0IsRUFBRStzQixjQUFjRyxrQkFBa0IsQ0FBQ0MsTUFBTSxDQUFDelYsS0FBSyxDQUFDQyxjQUFjLEdBQUcsRUFBRSxDQUFDO29CQUN0RzNYLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRStzQixjQUFjSyxjQUFjLENBQUMvRSxPQUFPLENBQUMsSUFBSSxDQUFDO29CQUUzRXJvQixXQUFXLENBQUMsd0JBQXdCLENBQUM7b0JBQ3JDK3NCLGNBQWNNLFVBQVUsQ0FBQ2pvQixLQUFLLENBQUMsR0FBRyxHQUFHNFksT0FBTyxDQUFDLENBQUMxTixVQUFVMk47d0JBQ3REamUsV0FBVyxHQUFHaWUsUUFBUSxFQUFFLEVBQUUsRUFBRTNOLFNBQVMsRUFBRSxDQUFDO29CQUMxQztvQkFFQXRRLFdBQVcsQ0FBQyx3QkFBd0IsQ0FBQztvQkFDckMrc0IsY0FBY0UsS0FBSyxDQUFDalAsT0FBTyxDQUFDc1AsQ0FBQUE7d0JBQzFCdHRCLFdBQVcsQ0FBQyxFQUFFLEVBQUVzdEIsS0FBS2pkLEtBQUssQ0FBQyxFQUFFLEVBQUVpZCxLQUFLaGQsUUFBUSxDQUFDLFlBQVksQ0FBQztvQkFDNUQ7b0JBRUEsT0FBTzt3QkFDTHZRLFNBQVM7d0JBQ1RDO3dCQUNBbUQsTUFBTTs0QkFDSm9xQixNQUFNUjs0QkFDTnZhLFNBQVM7Z0NBQ1AyTCxXQUFXME8sZUFBZTFPLFNBQVMsSUFBSTtnQ0FDdkM2TyxPQUFPSCxlQUFlRyxLQUFLLElBQUk7Z0NBQy9CUSxZQUFZVCxjQUFjRSxLQUFLLENBQUNwb0IsTUFBTTtnQ0FDdEM0b0IsYUFBYVYsY0FBY0csa0JBQWtCLENBQUNDLE1BQU0sQ0FBQ3pWLEtBQUs7Z0NBQzFEa1IsV0FBV21FLGNBQWNLLGNBQWMsQ0FBQy9FLE9BQU87NEJBQ2pEO3dCQUNGO3dCQUNBbm9CLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBRUYsRUFBRSxPQUFPNEMsT0FBTztvQkFDZCxPQUFPO3dCQUNML0MsU0FBUzt3QkFDVEMsU0FBUyxDQUFDLG1DQUFtQyxFQUFFOEMsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHLDJCQUEyQjt3QkFDbkhFLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBQ0Y7WUFDRixPQUFPLElBQUkyc0IsZUFBZTVxQixNQUFNLEtBQUssYUFBYTtnQkFDaEQsMEJBQTBCO2dCQUMxQixJQUFJO29CQUNGLE1BQU15ckIsWUFBWSxNQUFNZixzQkFBc0IzbUIsS0FBS2lDLGNBQWM7b0JBRWpFLElBQUlqSSxVQUFVLENBQUMsOEJBQThCLENBQUM7b0JBQzlDQSxXQUFXLENBQUMsdUJBQXVCLENBQUM7b0JBQ3BDQSxXQUFXLENBQUMsZ0JBQWdCLEVBQUUwdEIsVUFBVVQsS0FBSyxDQUFDL1MsTUFBTSxDQUFDLEVBQUUsQ0FBQztvQkFDeERsYSxXQUFXLENBQUMsWUFBWSxFQUFFMHRCLFVBQVVULEtBQUssQ0FBQ1UsT0FBTyxDQUFDLEVBQUUsQ0FBQztvQkFDckQzdEIsV0FBVyxDQUFDLFdBQVcsRUFBRTB0QixVQUFVVCxLQUFLLENBQUNXLE1BQU0sQ0FBQyxJQUFJLENBQUM7b0JBRXJENXRCLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQztvQkFDL0JBLFdBQVcsQ0FBQyxXQUFXLEVBQUUwdEIsVUFBVUcsU0FBUyxDQUFDblQsT0FBTyxDQUFDLEVBQUUsQ0FBQztvQkFDeEQxYSxXQUFXLENBQUMsVUFBVSxFQUFFMHRCLFVBQVVHLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQztvQkFFeEQ5dEIsV0FBVyxDQUFDLHlCQUF5QixDQUFDO29CQUN0Q0EsV0FBVyxDQUFDLGlCQUFpQixFQUFFMHRCLFVBQVVuTSxRQUFRLENBQUN3TSxhQUFhLENBQUMsRUFBRSxDQUFDO29CQUNuRS90QixXQUFXLENBQUMsV0FBVyxFQUFFMHRCLFVBQVVuTSxRQUFRLENBQUN5TSxPQUFPLENBQUMsRUFBRSxDQUFDO29CQUV2RCxJQUFJTixVQUFVbk0sUUFBUSxDQUFDME0sTUFBTSxDQUFDcHBCLE1BQU0sR0FBRyxHQUFHO3dCQUN4QzdFLFdBQVcsQ0FBQywyQkFBMkIsQ0FBQzt3QkFDeEMwdEIsVUFBVW5NLFFBQVEsQ0FBQzBNLE1BQU0sQ0FBQzdvQixLQUFLLENBQUMsR0FBRyxHQUFHNFksT0FBTyxDQUFDa1EsQ0FBQUE7NEJBQzVDbHVCLFdBQVcsQ0FBQyxFQUFFLEVBQUVrdUIsUUFBUTdkLEtBQUssQ0FBQyxFQUFFLEVBQUU2ZCxRQUFRcHVCLFVBQVUsR0FBRyxJQUFJLGVBQWUsQ0FBQzt3QkFDN0U7b0JBQ0Y7b0JBRUEsT0FBTzt3QkFDTEMsU0FBUzt3QkFDVEM7d0JBQ0FtRCxNQUFNOzRCQUNKdXFCOzRCQUNBbGIsU0FBUztnQ0FDUDJiLFlBQVlULFVBQVVULEtBQUssQ0FBQy9TLE1BQU07Z0NBQ2xDa1UsY0FBY1YsVUFBVVQsS0FBSyxDQUFDVSxPQUFPO2dDQUNyQ1UsV0FBV1gsVUFBVVQsS0FBSyxDQUFDVyxNQUFNO2dDQUNqQ1Usa0JBQWtCWixVQUFVRyxTQUFTLENBQUNuVCxPQUFPOzRCQUMvQzt3QkFDRjt3QkFDQXhhLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBRUYsRUFBRSxPQUFPNEMsT0FBTztvQkFDZCxPQUFPO3dCQUNML0MsU0FBUzt3QkFDVEMsU0FBUyxDQUFDLG1DQUFtQyxFQUFFOEMsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHLDJCQUEyQjt3QkFDbkhFLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBQ0Y7WUFDRixPQUFPLElBQUkyc0IsZUFBZTVxQixNQUFNLEtBQUssWUFBWTtnQkFDL0MsNEJBQTRCO2dCQUM1QixJQUFJO29CQUNGLE1BQU1zc0IsV0FBVyxNQUFNM0Isd0JBQXdCNEIsdUJBQXVCLENBQUM7d0JBQ3JFbmUsT0FBT3djLGVBQWU0QixhQUFhLElBQUk7d0JBQ3ZDcmpCLGFBQWF5aEIsZUFBZTZCLG1CQUFtQixJQUFJO3dCQUNuRG5rQixNQUFNc2lCLGVBQWU4QixZQUFZLElBQUk7d0JBQ3JDQyxTQUFTL0IsZUFBZStCLE9BQU8sSUFBSTt3QkFDbkNDLFFBQVFoQyxlQUFlZ0MsTUFBTSxJQUFJO3dCQUNqQ0MsZUFBZTN2QjtvQkFDakI7b0JBRUEsSUFBSWEsVUFBVSxDQUFDLHFDQUFxQyxDQUFDO29CQUNyREEsV0FBVyxDQUFDLGNBQWMsRUFBRXV1QixTQUFTbGUsS0FBSyxDQUFDLEVBQUUsQ0FBQztvQkFDOUNyUSxXQUFXLENBQUMsYUFBYSxFQUFFdXVCLFNBQVNoa0IsSUFBSSxDQUFDeEYsT0FBTyxDQUFDLEtBQUssS0FBSyxFQUFFLENBQUM7b0JBQzlEL0UsV0FBVyxDQUFDLGVBQWUsRUFBRXV1QixTQUFTSyxPQUFPLENBQUMsRUFBRSxDQUFDO29CQUNqRDV1QixXQUFXLENBQUMsZUFBZSxFQUFFdXVCLFNBQVNNLE1BQU0sQ0FBQyxFQUFFLENBQUM7b0JBQ2hEN3VCLFdBQVcsQ0FBQyxvQkFBb0IsRUFBRXV1QixTQUFTM29CLEVBQUUsQ0FBQyxJQUFJLENBQUM7b0JBQ25ENUYsV0FBVyxDQUFDLGlCQUFpQixFQUFFdXVCLFNBQVNRLFFBQVEsQ0FBQ3ZrQixrQkFBa0IsR0FBRyxFQUFFLENBQUM7b0JBQ3pFeEssV0FBVyxDQUFDLGVBQWUsRUFBRXV1QixTQUFTOW9CLE1BQU0sQ0FBQyxFQUFFLENBQUM7b0JBRWhELE9BQU87d0JBQ0wxRixTQUFTO3dCQUNUQzt3QkFDQW1ELE1BQU07NEJBQ0pvckI7NEJBQ0FTLFdBQVc7Z0NBQ1Q7Z0NBQ0E7Z0NBQ0E7Z0NBQ0E7NkJBQ0Q7d0JBQ0g7d0JBQ0E5dUIsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFFRixFQUFFLE9BQU80QyxPQUFPO29CQUNkLE9BQU87d0JBQ0wvQyxTQUFTO3dCQUNUQyxTQUFTLENBQUMscUNBQXFDLEVBQUU4QyxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUcsMkJBQTJCO3dCQUNySEUsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFDRjtZQUNGO1lBRUEsc0RBQXNEO1lBQ3RELE9BQU87Z0JBQ0xILFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RFLGFBQWE7b0JBQ1g7b0JBQ0E7b0JBQ0E7b0JBQ0E7aUJBQ0Q7WUFDSDtRQUVGLEVBQUUsT0FBTzRDLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyx1Q0FBdUM7Z0JBQ2xEQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkQzRDtnQkFDQU0sT0FBT0EsTUFBTUMsU0FBUyxDQUFDLEdBQUc7WUFDNUI7WUFFQSxPQUFPO2dCQUNMSyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFDWDtvQkFDQTtvQkFDQTtpQkFDRDtZQUNIO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUTRzQiw4QkFBOEJydEIsS0FBYSxFQVNqRDtRQUNBLE1BQU1xZCxhQUFhcmQsTUFBTStDLFdBQVc7UUFFcEMsbUJBQW1CO1FBQ25CLElBQUlQLFNBQTZEO1FBRWpFLElBQUk2YSxXQUFXMVcsUUFBUSxDQUFDLGdCQUFnQjBXLFdBQVcxVyxRQUFRLENBQUMsV0FBVzBXLFdBQVcxVyxRQUFRLENBQUMsWUFBWTtZQUNyR25FLFNBQVM7UUFDWCxPQUFPLElBQUk2YSxXQUFXMVcsUUFBUSxDQUFDLGVBQWUwVyxXQUFXMVcsUUFBUSxDQUFDLFdBQVc7WUFDM0VuRSxTQUFTO1FBQ1gsT0FBTyxJQUFJNmEsV0FBVzFXLFFBQVEsQ0FBQyxZQUFZMFcsV0FBVzFXLFFBQVEsQ0FBQyxlQUFlO1lBQzVFbkUsU0FBUztRQUNYO1FBRUEsb0JBQW9CO1FBQ3BCLElBQUlrYztRQUNKLElBQUlyQixXQUFXMVcsUUFBUSxDQUFDLGNBQWMwVyxXQUFXMVcsUUFBUSxDQUFDLFlBQVk7WUFDcEUrWCxZQUFZO1FBQ2QsT0FBTyxJQUFJckIsV0FBVzFXLFFBQVEsQ0FBQyxlQUFlMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXO1lBQzFHK1gsWUFBWTtRQUNkLE9BQU8sSUFBSXJCLFdBQVcxVyxRQUFRLENBQUMsY0FBYzBXLFdBQVcxVyxRQUFRLENBQUMsY0FBYztZQUM3RStYLFlBQVk7UUFDZDtRQUVBLGdCQUFnQjtRQUNoQixJQUFJNk87UUFDSixJQUFJbFEsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMFcsV0FBVzFXLFFBQVEsQ0FBQyxTQUFTO1lBQ2hFNG1CLFFBQVE7UUFDVixPQUFPLElBQUlsUSxXQUFXMVcsUUFBUSxDQUFDLGlCQUFpQjBXLFdBQVcxVyxRQUFRLENBQUMsYUFBYTtZQUMvRTRtQixRQUFRO1FBQ1YsT0FBTyxJQUFJbFEsV0FBVzFXLFFBQVEsQ0FBQyxnQkFBZ0IwVyxXQUFXMVcsUUFBUSxDQUFDLFdBQVc7WUFDNUU0bUIsUUFBUTtRQUNWLE9BQU8sSUFBSWxRLFdBQVcxVyxRQUFRLENBQUMsZ0JBQWdCMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXO1lBQzVFNG1CLFFBQVE7UUFDVixPQUFPLElBQUlsUSxXQUFXMVcsUUFBUSxDQUFDLGVBQWUwVyxXQUFXMVcsUUFBUSxDQUFDLGtCQUFrQjtZQUNsRjRtQixRQUFRO1FBQ1Y7UUFFQSwyQkFBMkI7UUFDM0IsTUFBTWlDLG1CQUFtQjtZQUN2QjtZQUNBO1NBQ0Q7UUFFRCxJQUFJUjtRQUNKLEtBQUssTUFBTXJDLFdBQVc2QyxpQkFBa0I7WUFDdEMsTUFBTTVDLFFBQVE1c0IsTUFBTTRzQixLQUFLLENBQUNEO1lBQzFCLElBQUlDLE9BQU87Z0JBQ1RvQyxnQkFBZ0JwQyxLQUFLLENBQUMsRUFBRSxDQUFDdGIsSUFBSTtnQkFDN0I7WUFDRjtRQUNGO1FBRUEsd0JBQXdCO1FBQ3hCLElBQUk0ZDtRQUNKLElBQUk3UixXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLFlBQVk7WUFDbkV1b0IsZUFBZTtRQUNqQixPQUFPLElBQUk3UixXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLGNBQWM7WUFDNUV1b0IsZUFBZTtRQUNqQixPQUFPLElBQUk3UixXQUFXMVcsUUFBUSxDQUFDLGNBQWMwVyxXQUFXMVcsUUFBUSxDQUFDLFlBQVk7WUFDM0V1b0IsZUFBZTtRQUNqQixPQUFPLElBQUk3UixXQUFXMVcsUUFBUSxDQUFDLGVBQWUwVyxXQUFXMVcsUUFBUSxDQUFDLGNBQWM7WUFDOUV1b0IsZUFBZTtRQUNqQixPQUFPLElBQUk3UixXQUFXMVcsUUFBUSxDQUFDLGVBQWUwVyxXQUFXMVcsUUFBUSxDQUFDLFNBQVM7WUFDekV1b0IsZUFBZTtRQUNqQixPQUFPLElBQUk3UixXQUFXMVcsUUFBUSxDQUFDLFdBQVcwVyxXQUFXMVcsUUFBUSxDQUFDLGVBQWU7WUFDM0V1b0IsZUFBZTtRQUNqQjtRQUVBLDZCQUE2QjtRQUM3QixJQUFJQztRQUNKLElBQUk5UixXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLGNBQWM7WUFDckV3b0IsVUFBVTtRQUNaLE9BQU8sSUFBSTlSLFdBQVcxVyxRQUFRLENBQUMsa0JBQWtCO1lBQy9Dd29CLFVBQVU7UUFDWixPQUFPLElBQUk5UixXQUFXMVcsUUFBUSxDQUFDLGlCQUFpQjtZQUM5Q3dvQixVQUFVO1FBQ1o7UUFFQSxJQUFJQztRQUNKLElBQUkvUixXQUFXMVcsUUFBUSxDQUFDLGVBQWUwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVU7WUFDbkV5b0IsU0FBUztRQUNYLE9BQU8sSUFBSS9SLFdBQVcxVyxRQUFRLENBQUMsZ0JBQWdCO1lBQzdDeW9CLFNBQVM7UUFDWCxPQUFPLElBQUkvUixXQUFXMVcsUUFBUSxDQUFDLFlBQVkwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVU7WUFDdkV5b0IsU0FBUztRQUNYO1FBRUEsT0FBTztZQUNMNXNCO1lBQ0FrYztZQUNBNk87WUFDQXlCO1lBQ0FDLHFCQUFxQkQ7WUFDckJFO1lBQ0FDO1lBQ0FDO1FBQ0Y7SUFDRjtJQUVBLG1DQUFtQztJQUNuQyxtQ0FBbUM7SUFDbkMsbUNBQW1DO0lBRW5DOztHQUVDLEdBQ0QsQUFBUTV0QixnQ0FBZ0N0QixNQUF5QixFQUFFRixLQUFhLEVBQVc7UUFDekYsTUFBTXl2QixnQkFBZ0I7WUFDcEI7WUFBUztZQUFVO1lBQWM7WUFBaUI7WUFDbEQ7WUFBZTtZQUFhO1lBQVk7WUFDeEM7WUFBc0I7WUFBYTtZQUFjO1lBQ2pEO1lBQXNCO1lBQXVCO1lBQzdDO1lBQWtCO1lBQW1CO1NBQ3RDO1FBRUQsTUFBTXBTLGFBQWFyZCxNQUFNK0MsV0FBVztRQUVwQyxPQUFPMHNCLGNBQWN6UyxJQUFJLENBQUM4SixDQUFBQSxVQUFXekosV0FBVzFXLFFBQVEsQ0FBQ21nQixhQUNqRHpKLFdBQVcxVyxRQUFRLENBQUMsaUJBQWtCMFcsQ0FBQUEsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXMFcsV0FBVzFXLFFBQVEsQ0FBQyxPQUFNLEtBQy9GMFcsV0FBVzFXLFFBQVEsQ0FBQyxlQUFlMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUN2RDBXLFdBQVcxVyxRQUFRLENBQUMsZUFBZTBXLFdBQVcxVyxRQUFRLENBQUM7SUFDakU7SUFFQTs7R0FFQyxHQUNELE1BQWNsRiw4QkFBOEJ2QixNQUF5QixFQUFFUixNQUFjLEVBQUVNLEtBQWEsRUFBNEI7UUFDOUgsSUFBSTtZQUNGLG1DQUFtQztZQUNuQyxNQUFNdUcsT0FBTyxNQUFNNUIsZUFBTSxDQUFDNEIsSUFBSSxDQUFDQyxVQUFVLENBQUM7Z0JBQ3hDMUIsT0FBTztvQkFBRXFCLElBQUl6RztnQkFBTztnQkFDcEIrRyxRQUFRO29CQUFFQyxNQUFNO29CQUFNOEIsZ0JBQWdCO29CQUFNakUsTUFBTTtnQkFBSztZQUN6RDtZQUVBLElBQUksQ0FBQ2dDLE1BQU07Z0JBQ1QsT0FBTztvQkFDTGpHLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1Q4QyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQSx3REFBd0Q7WUFDeEQsTUFBTXFzQixnQkFBZ0I7Z0JBQUM7Z0JBQWU7Z0JBQVM7YUFBVyxDQUFDL29CLFFBQVEsQ0FBQ0osS0FBS0csSUFBSTtZQUM3RSxJQUFJLENBQUNncEIsZUFBZTtnQkFDbEIsT0FBTztvQkFDTHB2QixTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUNYO3dCQUNBO3dCQUNBO3FCQUNEO2dCQUNIO1lBQ0Y7WUFFQVgsY0FBTSxDQUFDQyxJQUFJLENBQUMsNkRBQTZEO2dCQUN2RUMsT0FBT0EsTUFBTUMsU0FBUyxDQUFDLEdBQUc7Z0JBQzFCUDtnQkFDQThJLGdCQUFnQmpDLEtBQUtpQyxjQUFjO1lBQ3JDO1lBRUEsaUNBQWlDO1lBQ2pDLE1BQU0sRUFBRW1uQixxQkFBcUIsRUFBRUMsd0JBQXdCLEVBQUVDLG1CQUFtQixFQUFFLEdBQUcsTUFBTSxtRUFBQSxRQUFPO1lBRTlGLG1DQUFtQztZQUNuQyxNQUFNQyxxQkFBcUIsSUFBSSxDQUFDQyw2QkFBNkIsQ0FBQy92QjtZQUU5RCxJQUFJOHZCLG1CQUFtQnR0QixNQUFNLEtBQUssd0JBQXdCO2dCQUN4RCw2QkFBNkI7Z0JBQzdCLElBQUk7b0JBQ0YsTUFBTXd0QixnQkFBZ0IsTUFBTUoseUJBQXlCO3dCQUNuRHJqQixXQUFXdWpCLG1CQUFtQnZqQixTQUFTO3dCQUN2QzBqQixjQUFjSCxtQkFBbUJHLFlBQVk7d0JBQzdDcGYsVUFBVWlmLG1CQUFtQmpmLFFBQVEsSUFBSTtvQkFDM0M7b0JBRUEsSUFBSXRRLFVBQVUsQ0FBQyxzQ0FBc0MsQ0FBQztvQkFDdERBLFdBQVcsQ0FBQyxrQkFBa0IsRUFBRXl2QixjQUFjempCLFNBQVMsQ0FBQyxFQUFFLENBQUM7b0JBQzNEaE0sV0FBVyxDQUFDLHFCQUFxQixFQUFFeXZCLGNBQWNFLFlBQVksQ0FBQzlxQixNQUFNLENBQUMsU0FBUyxDQUFDO29CQUMvRTdFLFdBQVcsQ0FBQyxhQUFhLEVBQUV5dkIsY0FBY2xsQixJQUFJLENBQUMsRUFBRSxDQUFDO29CQUNqRHZLLFdBQVcsQ0FBQyxlQUFlLEVBQUV5dkIsY0FBY2hxQixNQUFNLENBQUMsRUFBRSxDQUFDO29CQUNyRHpGLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRXl2QixjQUFjN3BCLEVBQUUsQ0FBQyxJQUFJLENBQUM7b0JBRXZENUYsV0FBVyxDQUFDLDhCQUE4QixDQUFDO29CQUMzQyxNQUFNNHZCLGNBQWMsTUFBTVIsc0JBQXNCUyxjQUFjO29CQUM5REosY0FBY0UsWUFBWSxDQUFDM1IsT0FBTyxDQUFDOFIsQ0FBQUE7d0JBQ2pDLE1BQU1DLFFBQVFILFlBQVloUixJQUFJLENBQUNqQixDQUFBQSxJQUFLQSxFQUFFL1gsRUFBRSxLQUFLa3FCO3dCQUM3QyxJQUFJQyxPQUFPOzRCQUNUL3ZCLFdBQVcsQ0FBQyxFQUFFLEVBQUUrdkIsTUFBTS9yQixJQUFJLENBQUMsRUFBRSxFQUFFK3JCLE1BQU14bEIsSUFBSSxDQUFDLEdBQUcsQ0FBQzt3QkFDaEQ7b0JBQ0Y7b0JBRUEsT0FBTzt3QkFDTHhLLFNBQVM7d0JBQ1RDO3dCQUNBbUQsTUFBTTs0QkFDSnNzQjs0QkFDQWpkLFNBQVM7Z0NBQ1AwWCxXQUFXdUYsY0FBYzdwQixFQUFFO2dDQUMzQm9HLFdBQVd5akIsY0FBY3pqQixTQUFTO2dDQUNsQ2drQixrQkFBa0JQLGNBQWNFLFlBQVksQ0FBQzlxQixNQUFNO2dDQUNuRDBGLE1BQU1rbEIsY0FBY2xsQixJQUFJO2dDQUN4QjlFLFFBQVFncUIsY0FBY2hxQixNQUFNOzRCQUM5Qjt3QkFDRjt3QkFDQXZGLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBRUYsRUFBRSxPQUFPNEMsT0FBTztvQkFDZCxPQUFPO3dCQUNML0MsU0FBUzt3QkFDVEMsU0FBUyxDQUFDLHNDQUFzQyxFQUFFOEMsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHLDJCQUEyQjt3QkFDdEhFLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBQ0Y7WUFDRjtZQUVBLElBQUlxdkIsbUJBQW1CdHRCLE1BQU0sS0FBSyxpQkFBaUI7Z0JBQ2pELDBCQUEwQjtnQkFDMUIsSUFBSTtvQkFDRixNQUFNaW9CLFlBQVksTUFBTWtGLHNCQUFzQmEsb0JBQW9CLENBQUM7d0JBQ2pFN2YsTUFBTW1mLG1CQUFtQm5mLElBQUk7d0JBQzdCOGYsc0JBQXNCWCxtQkFBbUJHLFlBQVk7d0JBQ3JEcGYsVUFBVWlmLG1CQUFtQmpmLFFBQVEsSUFBSTt3QkFDekN5ZSxVQUFVUSxtQkFBbUJSLFFBQVE7b0JBQ3ZDO29CQUVBLElBQUkvdUIsVUFBVSxDQUFDLG1DQUFtQyxDQUFDO29CQUNuREEsV0FBVyxDQUFDLGFBQWEsRUFBRXV2QixtQkFBbUJuZixJQUFJLENBQUMsRUFBRSxDQUFDO29CQUN0RHBRLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRXV2QixtQkFBbUJqZixRQUFRLElBQUksU0FBUyxFQUFFLENBQUM7b0JBQ3pFdFEsV0FBVyxDQUFDLCtCQUErQixFQUFFdXZCLG1CQUFtQkcsWUFBWSxDQUFDcnFCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztvQkFDM0ZyRixXQUFXLENBQUMsbUJBQW1CLEVBQUVrcUIsVUFBVSxFQUFFLENBQUM7b0JBQzlDLElBQUlxRixtQkFBbUJSLFFBQVEsRUFBRTt3QkFDL0IvdUIsV0FBVyxDQUFDLGdCQUFnQixFQUFFdXZCLG1CQUFtQlIsUUFBUSxDQUFDdmtCLGtCQUFrQixHQUFHLEVBQUUsQ0FBQztvQkFDcEY7b0JBRUEsT0FBTzt3QkFDTHpLLFNBQVM7d0JBQ1RDO3dCQUNBbUQsTUFBTTs0QkFDSittQjs0QkFDQTlaLE1BQU1tZixtQkFBbUJuZixJQUFJOzRCQUM3QnNmLGNBQWNILG1CQUFtQkcsWUFBWTs0QkFDN0NwZixVQUFVaWYsbUJBQW1CamYsUUFBUTt3QkFDdkM7d0JBQ0FwUSxhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUVGLEVBQUUsT0FBTzRDLE9BQU87b0JBQ2QsT0FBTzt3QkFDTC9DLFNBQVM7d0JBQ1RDLFNBQVMsQ0FBQyx5QkFBeUIsRUFBRThDLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRywyQkFBMkI7d0JBQ3pHRSxhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUNGO1lBQ0Y7WUFFQSxJQUFJcXZCLG1CQUFtQnR0QixNQUFNLEtBQUssZUFBZTtnQkFDL0Msb0JBQW9CO2dCQUNwQixJQUFJO29CQUNGLE1BQU13RCxTQUFTLE1BQU02cEI7b0JBRXJCLElBQUl0dkIsVUFBVSxDQUFDLG9DQUFvQyxDQUFDO29CQUNwREEsV0FBVyxDQUFDLHFCQUFxQixFQUFFeUYsT0FBTzBxQixNQUFNLENBQUN0ckIsTUFBTSxDQUFDLEVBQUUsQ0FBQztvQkFDM0Q3RSxXQUFXLENBQUMsOEJBQThCLEVBQUV5RixPQUFPMnFCLG9CQUFvQixDQUFDdnJCLE1BQU0sQ0FBQyxJQUFJLENBQUM7b0JBRXBGN0UsV0FBVyxDQUFDLHdCQUF3QixDQUFDO29CQUNyQ3lGLE9BQU8wcUIsTUFBTSxDQUFDblMsT0FBTyxDQUFDK1IsQ0FBQUE7d0JBQ3BCLE1BQU0xRSxhQUFhMEUsTUFBTXRxQixNQUFNLEtBQUssV0FBVyxPQUM5QnNxQixNQUFNdHFCLE1BQU0sS0FBSyxTQUFTLE9BQzFCc3FCLE1BQU10cUIsTUFBTSxLQUFLLGtCQUFrQixPQUFPO3dCQUMzRHpGLFdBQVcsR0FBR3FyQixXQUFXLENBQUMsRUFBRTBFLE1BQU0vckIsSUFBSSxDQUFDLEVBQUUsRUFBRStyQixNQUFNeGxCLElBQUksQ0FBQyxJQUFJLEVBQUV3bEIsTUFBTXRxQixNQUFNLENBQUMsRUFBRSxDQUFDO29CQUM5RTtvQkFFQSxJQUFJQSxPQUFPMnFCLG9CQUFvQixDQUFDdnJCLE1BQU0sR0FBRyxHQUFHO3dCQUMxQzdFLFdBQVcsQ0FBQyxpQ0FBaUMsQ0FBQzt3QkFDOUN5RixPQUFPMnFCLG9CQUFvQixDQUFDcFMsT0FBTyxDQUFDcVMsQ0FBQUE7NEJBQ2xDcndCLFdBQVcsQ0FBQyxFQUFFLEVBQUVxd0IsT0FBT3JrQixTQUFTLENBQUMsRUFBRSxFQUFFcWtCLE9BQU9WLFlBQVksQ0FBQzlxQixNQUFNLENBQUMsVUFBVSxDQUFDO3dCQUM3RTtvQkFDRjtvQkFFQSxPQUFPO3dCQUNMOUUsU0FBUzt3QkFDVEM7d0JBQ0FtRCxNQUFNc0M7d0JBQ052RixhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUVGLEVBQUUsT0FBTzRDLE9BQU87b0JBQ2QsT0FBTzt3QkFDTC9DLFNBQVM7d0JBQ1RDLFNBQVMsQ0FBQyw0QkFBNEIsRUFBRThDLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRywyQkFBMkI7d0JBQzVHRSxhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUNGO1lBQ0Y7WUFFQSwrREFBK0Q7WUFDL0QsT0FBTztnQkFDTEgsU0FBUztnQkFDVEMsU0FBUyxDQUFDLCtSQUErUixDQUFDO2dCQUMxU0UsYUFBYTtvQkFDWDtvQkFDQTtvQkFDQTtpQkFDRDtZQUNIO1FBRUYsRUFBRSxPQUFPNEMsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLHVDQUF1QztnQkFDbERBLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBR2lELE9BQU9IO2dCQUN2RHJEO2dCQUNBTjtZQUNGO1lBRUEsT0FBTztnQkFDTFksU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQ1g7b0JBQ0E7b0JBQ0E7aUJBQ0Q7WUFDSDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELEFBQVFzdkIsOEJBQThCL3ZCLEtBQWEsRUFPakQ7UUFDQSxNQUFNcWQsYUFBYXJkLE1BQU0rQyxXQUFXO1FBRXBDLG1CQUFtQjtRQUNuQixJQUFJUCxTQUErRTtRQUVuRixJQUFJNmEsV0FBVzFXLFFBQVEsQ0FBQyxrQkFBa0IwVyxXQUFXMVcsUUFBUSxDQUFDLG9CQUFvQjBXLFdBQVcxVyxRQUFRLENBQUMsZUFBZTtZQUNuSG5FLFNBQVM7UUFDWCxPQUFPLElBQUk2YSxXQUFXMVcsUUFBUSxDQUFDLGVBQWUwVyxXQUFXMVcsUUFBUSxDQUFDLFdBQVc7WUFDM0VuRSxTQUFTO1FBQ1gsT0FBTyxJQUFJNmEsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXMFcsV0FBVzFXLFFBQVEsQ0FBQyxVQUFVO1lBQ3ZHbkUsU0FBUztRQUNYO1FBRUEseUJBQXlCO1FBQ3pCLElBQUkrSixZQUFZO1FBQ2hCLElBQUlvRSxPQUFPO1FBRVgsSUFBSW5PLFdBQVcsd0JBQXdCO1lBQ3JDLDZEQUE2RDtZQUM3RCxNQUFNcXVCLFdBQVc3d0IsTUFBTTRzQixLQUFLLENBQUM7WUFDN0IsSUFBSWlFLFVBQVU7Z0JBQ1p0a0IsWUFBWXNrQixRQUFRLENBQUMsRUFBRSxDQUFDdmYsSUFBSTtZQUM5QixPQUFPO2dCQUNML0UsWUFBWXZNO1lBQ2Q7UUFDRixPQUFPLElBQUl3QyxXQUFXLGlCQUFpQjtZQUNyQyxnREFBZ0Q7WUFDaEQsTUFBTXN1QixZQUFZOXdCLE1BQU00c0IsS0FBSyxDQUFDO1lBQzlCLElBQUlrRSxXQUFXO2dCQUNibmdCLE9BQU9tZ0IsU0FBUyxDQUFDLEVBQUUsQ0FBQ3hmLElBQUk7WUFDMUIsT0FBTztnQkFDTFgsT0FBTzNRO1lBQ1Q7UUFDRjtRQUVBLHVCQUF1QjtRQUN2QixNQUFNaXdCLGVBQXlCLEVBQUU7UUFDakMsTUFBTWMscUJBQXFCO1lBQ3pCLGFBQWE7Z0JBQUM7Z0JBQVk7Z0JBQVk7Z0JBQVE7Z0JBQVc7YUFBUztZQUNsRSxhQUFhO2dCQUFDO2dCQUFXO2dCQUFPO2dCQUFXO2dCQUFVO2FBQU87WUFDNUQsWUFBWTtnQkFBQztnQkFBYTtnQkFBWTtnQkFBWTthQUFXO1lBQzdELFdBQVc7Z0JBQUM7Z0JBQVc7Z0JBQVE7Z0JBQVM7YUFBVztZQUNuRCxpQkFBaUI7Z0JBQUM7Z0JBQWU7Z0JBQVc7Z0JBQVM7YUFBTTtZQUMzRCxjQUFjO2dCQUFDO2dCQUFXO2dCQUFZO2dCQUFVO2FBQVE7WUFDeEQsZUFBZTtnQkFBQztnQkFBYTtnQkFBVztnQkFBTzthQUFTO1lBQ3hELFlBQVk7Z0JBQUM7Z0JBQVM7Z0JBQVM7Z0JBQVM7Z0JBQU07YUFBSztRQUNyRDtRQUVBLEtBQUssTUFBTSxDQUFDQyxZQUFZQyxTQUFTLElBQUkvckIsT0FBTzRhLE9BQU8sQ0FBQ2lSLG9CQUFxQjtZQUN2RSxJQUFJRSxTQUFTalUsSUFBSSxDQUFDOEosQ0FBQUEsVUFBV3pKLFdBQVcxVyxRQUFRLENBQUNtZ0IsV0FBVztnQkFDMURtSixhQUFhdmMsSUFBSSxDQUFDc2Q7WUFDcEI7UUFDRjtRQUVBLG1EQUFtRDtRQUNuRCxJQUFJZixhQUFhN3FCLE1BQU0sS0FBSyxHQUFHO1lBQzdCNnFCLGFBQWF2YyxJQUFJLENBQUMsYUFBYTtRQUNqQztRQUVBLG1CQUFtQjtRQUNuQixJQUFJN0M7UUFDSixJQUFJd00sV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMFcsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhO1lBQ3BFa0ssV0FBVztRQUNiLE9BQU8sSUFBSXdNLFdBQVcxVyxRQUFRLENBQUMsb0JBQW9CMFcsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjO1lBQ25Ga0ssV0FBVztRQUNiLE9BQU8sSUFBSXdNLFdBQVcxVyxRQUFRLENBQUMsbUJBQW1CMFcsV0FBVzFXLFFBQVEsQ0FBQyxlQUFlO1lBQ25Ga0ssV0FBVztRQUNiO1FBRUEsbUJBQW1CO1FBQ25CLElBQUl5ZTtRQUNKLE1BQU00QixnQkFBZ0JseEIsTUFBTTRzQixLQUFLLENBQUM7UUFDbEMsSUFBSXNFLGVBQWU7WUFDakIsSUFBSTtnQkFDRjVCLFdBQVcsSUFBSTF2QixLQUFLc3hCLGFBQWEsQ0FBQyxFQUFFO2dCQUNwQyxJQUFJQyxNQUFNN0IsU0FBU3ZLLE9BQU8sS0FBSztvQkFDN0J1SyxXQUFXbHNCO2dCQUNiO1lBQ0YsRUFBRSxPQUFNO2dCQUNOa3NCLFdBQVdsc0I7WUFDYjtRQUNGO1FBRUEsT0FBTztZQUNMWjtZQUNBK0osV0FBV0EsYUFBYW5KO1lBQ3hCdU4sTUFBTUEsUUFBUXZOO1lBQ2Q2c0I7WUFDQXBmO1lBQ0F5ZTtRQUNGO0lBQ0Y7SUFFQSxtQ0FBbUM7SUFDbkMsb0NBQW9DO0lBQ3BDLG1DQUFtQztJQUVuQzs7R0FFQyxHQUNELEFBQVE1dEIsa0NBQWtDeEIsTUFBeUIsRUFBRUYsS0FBYSxFQUFXO1FBQzNGLE1BQU1veEIseUJBQXlCO1lBQzdCO1lBQWtCO1lBQVc7WUFBWTtZQUFjO1lBQ3ZEO1lBQVk7WUFBVTtZQUFlO1lBQWlCO1lBQ3REO1lBQXFCO1lBQXlCO1lBQzlDO1lBQXlCO1lBQWlCO1lBQzFDO1lBQWE7WUFBZ0I7WUFBYztZQUMzQztZQUFlO1lBQWU7WUFDOUI7WUFBdUI7WUFBcUI7U0FDN0M7UUFFRCxNQUFNL1QsYUFBYXJkLE1BQU0rQyxXQUFXO1FBRXBDLE9BQU9xdUIsdUJBQXVCcFUsSUFBSSxDQUFDOEosQ0FBQUEsVUFBV3pKLFdBQVcxVyxRQUFRLENBQUNtZ0IsYUFDMUR6SixXQUFXMVcsUUFBUSxDQUFDLFlBQWEwVyxDQUFBQSxXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLFNBQVEsS0FDOUYwVyxXQUFXMVcsUUFBUSxDQUFDLGVBQWUwVyxXQUFXMVcsUUFBUSxDQUFDLGVBQ3ZEMFcsV0FBVzFXLFFBQVEsQ0FBQyxjQUFlMFcsQ0FBQUEsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMFcsV0FBVzFXLFFBQVEsQ0FBQyxpQkFBZ0I7SUFDbEg7SUFFQTs7R0FFQyxHQUNELE1BQWNoRixnQ0FBZ0N6QixNQUF5QixFQUFFUixNQUFjLEVBQUVNLEtBQWEsRUFBNEI7UUFDaEksSUFBSTtZQUNGLG1DQUFtQztZQUNuQyxNQUFNdUcsT0FBTyxNQUFNNUIsZUFBTSxDQUFDNEIsSUFBSSxDQUFDQyxVQUFVLENBQUM7Z0JBQ3hDMUIsT0FBTztvQkFBRXFCLElBQUl6RztnQkFBTztnQkFDcEIrRyxRQUFRO29CQUFFQyxNQUFNO29CQUFNOEIsZ0JBQWdCO29CQUFNakUsTUFBTTtnQkFBSztZQUN6RDtZQUVBLElBQUksQ0FBQ2dDLE1BQU07Z0JBQ1QsT0FBTztvQkFDTGpHLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1Q4QyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQSw0REFBNEQ7WUFDNUQsTUFBTXFzQixnQkFBZ0I7Z0JBQUM7Z0JBQWU7Z0JBQVM7YUFBVyxDQUFDL29CLFFBQVEsQ0FBQ0osS0FBS0csSUFBSTtZQUM3RSxJQUFJLENBQUNncEIsZUFBZTtnQkFDbEIsT0FBTztvQkFDTHB2QixTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUNYO3dCQUNBO3dCQUNBO3FCQUNEO2dCQUNIO1lBQ0Y7WUFFQVgsY0FBTSxDQUFDQyxJQUFJLENBQUMsb0VBQW9FO2dCQUM5RUMsT0FBT0EsTUFBTUMsU0FBUyxDQUFDLEdBQUc7Z0JBQzFCUDtnQkFDQThJLGdCQUFnQmpDLEtBQUtpQyxjQUFjO1lBQ3JDO1lBRUEsZ0NBQWdDO1lBQ2hDLE1BQU0sRUFBRTZvQiwrQkFBK0IsRUFBRSxHQUFHLE1BQU0sbUVBQUEsUUFBTztZQUV6RCwwQ0FBMEM7WUFDMUMsTUFBTUMsbUJBQW1CLElBQUksQ0FBQ0Msb0NBQW9DLENBQUN2eEI7WUFFbkUsSUFBSXN4QixpQkFBaUI5dUIsTUFBTSxLQUFLLGVBQWU7Z0JBQzdDLDZCQUE2QjtnQkFDN0IsSUFBSTtvQkFDRixNQUFNd0QsU0FBUyxNQUFNcXJCLGdDQUFnQ0csdUJBQXVCO29CQUU1RSxJQUFJanhCLFVBQVUsQ0FBQyxpQ0FBaUMsQ0FBQztvQkFDakRBLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQztvQkFDL0JBLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRXlGLE9BQU95ckIsUUFBUSxDQUFDQyxjQUFjLENBQUMsRUFBRSxDQUFDO29CQUNuRW54QixXQUFXLENBQUMsV0FBVyxFQUFFeUYsT0FBT3lyQixRQUFRLENBQUNFLGdCQUFnQixDQUFDLEtBQUssQ0FBQztvQkFDaEVweEIsV0FBVyxDQUFDLFdBQVcsRUFBRXlGLE9BQU95ckIsUUFBUSxDQUFDRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUM7b0JBQ2hFcnhCLFdBQVcsQ0FBQyxZQUFZLEVBQUV5RixPQUFPeXJCLFFBQVEsQ0FBQ0ksaUJBQWlCLENBQUMsS0FBSyxDQUFDO29CQUNsRXR4QixXQUFXLENBQUMsV0FBVyxFQUFFeUYsT0FBT3lyQixRQUFRLENBQUNLLGdCQUFnQixDQUFDLE9BQU8sQ0FBQztvQkFFbEV2eEIsV0FBVyxDQUFDLHNCQUFzQixDQUFDO29CQUNuQ0EsV0FBVyxDQUFDLFdBQVcsRUFBRXlGLE9BQU8rckIsU0FBUyxDQUFDQyxNQUFNLENBQUNDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztvQkFDL0QxeEIsV0FBVyxDQUFDLFVBQVUsRUFBRXlGLE9BQU8rckIsU0FBUyxDQUFDRyxLQUFLLENBQUNELE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztvQkFDN0QxeEIsV0FBVyxDQUFDLFlBQVksRUFBRXlGLE9BQU8rckIsU0FBUyxDQUFDSSxPQUFPLENBQUNGLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztvQkFFbkUsSUFBSWpzQixPQUFPb3NCLG1CQUFtQixDQUFDaHRCLE1BQU0sR0FBRyxHQUFHO3dCQUN6QzdFLFdBQVcsQ0FBQywrQkFBK0IsQ0FBQzt3QkFDNUN5RixPQUFPb3NCLG1CQUFtQixDQUFDenNCLEtBQUssQ0FBQyxHQUFHLEdBQUc0WSxPQUFPLENBQUM4VCxDQUFBQTs0QkFDN0MsTUFBTXpHLGFBQWF5RyxNQUFNL3hCLE9BQU8sR0FBRyxNQUFNOzRCQUN6Q0MsV0FBVyxHQUFHcXJCLFdBQVcsQ0FBQyxFQUFFeUcsTUFBTTd2QixNQUFNLENBQUMsS0FBSyxFQUFFNnZCLE1BQU1DLFVBQVUsQ0FBQyxFQUFFLEVBQUUsSUFBSTF5QixLQUFLeXlCLE1BQU01ZixTQUFTLEVBQUU4ZixrQkFBa0IsR0FBRyxHQUFHLENBQUM7d0JBQzFIO29CQUNGO29CQUVBLElBQUl2c0IsT0FBT3dzQixXQUFXLENBQUNwdEIsTUFBTSxHQUFHLEdBQUc7d0JBQ2pDN0UsV0FBVyxDQUFDLDJCQUEyQixDQUFDO3dCQUN4Q3lGLE9BQU93c0IsV0FBVyxDQUFDN3NCLEtBQUssQ0FBQyxHQUFHLEdBQUc0WSxPQUFPLENBQUNrVSxDQUFBQTs0QkFDckNseUIsV0FBVyxDQUFDLEVBQUUsRUFBRWt5QixXQUFXQyxjQUFjLENBQUMsRUFBRSxFQUFFdHFCLEtBQUtnUyxLQUFLLENBQUNxWSxXQUFXcHlCLFVBQVUsR0FBRyxLQUFLLGVBQWUsQ0FBQzt3QkFDeEc7b0JBQ0Y7b0JBRUEsT0FBTzt3QkFDTEMsU0FBUzt3QkFDVEM7d0JBQ0FtRCxNQUFNOzRCQUNKc0M7NEJBQ0ErTSxTQUFTO2dDQUNQMmUsZ0JBQWdCMXJCLE9BQU95ckIsUUFBUSxDQUFDQyxjQUFjO2dDQUM5Q2lCLG1CQUFtQnZxQixLQUFLZ1MsS0FBSyxDQUFDLEFBQUNwVSxPQUFPeXJCLFFBQVEsQ0FBQ0UsZ0JBQWdCLEdBQUczckIsT0FBT3lyQixRQUFRLENBQUNDLGNBQWMsR0FBSTtnQ0FDcEdrQixhQUFhNXNCLE9BQU8rckIsU0FBUyxDQUFDSSxPQUFPO2dDQUNyQ0MscUJBQXFCcHNCLE9BQU9vc0IsbUJBQW1CLENBQUNodEIsTUFBTTs0QkFDeEQ7d0JBQ0Y7d0JBQ0EzRSxhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUVGLEVBQUUsT0FBTzRDLE9BQU87b0JBQ2QsT0FBTzt3QkFDTC9DLFNBQVM7d0JBQ1RDLFNBQVMsQ0FBQyxxQ0FBcUMsRUFBRThDLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRywyQkFBMkI7d0JBQ3JIRSxhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUNGO1lBQ0Y7WUFFQSxJQUFJNndCLGlCQUFpQjl1QixNQUFNLEtBQUssaUJBQWlCO2dCQUMvQywwQkFBMEI7Z0JBQzFCLElBQUk7b0JBQ0YsSUFBSSxDQUFDOHVCLGlCQUFpQmdCLFVBQVUsSUFBSSxDQUFDaEIsaUJBQWlCdUIsYUFBYSxFQUFFO3dCQUNuRSxPQUFPOzRCQUNMdnlCLFNBQVM7NEJBQ1RDLFNBQVM7NEJBQ1RFLGFBQWE7Z0NBQ1g7Z0NBQ0E7Z0NBQ0E7NkJBQ0Q7d0JBQ0g7b0JBQ0Y7b0JBRUEsTUFBTXF5QixZQUFZLE1BQU16QixnQ0FBZ0MwQixZQUFZLENBQ2xFekIsaUJBQWlCZ0IsVUFBVSxFQUMzQmhCLGlCQUFpQnVCLGFBQWEsRUFDOUJ2QixpQkFBaUIwQixlQUFlO29CQUdsQyxJQUFJenlCLFVBQVUsQ0FBQyxzQ0FBc0MsQ0FBQztvQkFDdERBLFdBQVcsQ0FBQyxpQkFBaUIsRUFBRSt3QixpQkFBaUJnQixVQUFVLENBQUMsRUFBRSxDQUFDO29CQUM5RC94QixXQUFXLENBQUMsY0FBYyxFQUFFK3dCLGlCQUFpQnVCLGFBQWEsQ0FBQyxFQUFFLENBQUM7b0JBQzlEdHlCLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRXV5QixVQUFVLEVBQUUsQ0FBQztvQkFDOUMsSUFBSXhCLGlCQUFpQjBCLGVBQWUsRUFBRTt3QkFDcEN6eUIsV0FBVyxDQUFDLHlCQUF5QixFQUFFK3dCLGlCQUFpQjBCLGVBQWUsQ0FBQyxFQUFFLENBQUM7b0JBQzdFO29CQUNBenlCLFdBQVcsQ0FBQyxnREFBZ0QsQ0FBQztvQkFFN0QsT0FBTzt3QkFDTEQsU0FBUzt3QkFDVEM7d0JBQ0FtRCxNQUFNOzRCQUNKb3ZCOzRCQUNBUixZQUFZaEIsaUJBQWlCZ0IsVUFBVTs0QkFDdkM5dkIsUUFBUTh1QixpQkFBaUJ1QixhQUFhOzRCQUN0Q0csaUJBQWlCMUIsaUJBQWlCMEIsZUFBZTt3QkFDbkQ7d0JBQ0F2eUIsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFFRixFQUFFLE9BQU80QyxPQUFPO29CQUNkLE9BQU87d0JBQ0wvQyxTQUFTO3dCQUNUQyxTQUFTLENBQUMsNEJBQTRCLEVBQUU4QyxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUcsMkJBQTJCO3dCQUM1R0UsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFDRjtZQUNGO1lBRUEsSUFBSTZ3QixpQkFBaUI5dUIsTUFBTSxLQUFLLGtCQUFrQjtnQkFDaEQsNEJBQTRCO2dCQUM1QixJQUFJO29CQUNGLDBEQUEwRDtvQkFDMUQsSUFBSWpDLFVBQVUsQ0FBQyxzQ0FBc0MsQ0FBQztvQkFDdERBLFdBQVcsQ0FBQywyRUFBMkUsQ0FBQztvQkFDeEZBLFdBQVcsQ0FBQyx5RUFBeUUsQ0FBQztvQkFDdEZBLFdBQVcsQ0FBQywwREFBMEQsQ0FBQztvQkFDdkVBLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQztvQkFDaENBLFdBQVcsQ0FBQyw0Q0FBNEMsQ0FBQztvQkFDekRBLFdBQVcsQ0FBQywyQ0FBMkMsQ0FBQztvQkFDeERBLFdBQVcsQ0FBQyw4Q0FBOEMsQ0FBQztvQkFDM0RBLFdBQVcsQ0FBQyw0Q0FBNEMsQ0FBQztvQkFDekRBLFdBQVcsQ0FBQyx5Q0FBeUMsQ0FBQztvQkFFdEQsT0FBTzt3QkFDTEQsU0FBUzt3QkFDVEM7d0JBQ0FtRCxNQUFNOzRCQUNKdXZCLGdCQUFnQixDQUFDLElBQUksRUFBRXJ6QixLQUFLQyxHQUFHLElBQUk7NEJBQ25DRixXQUFXLElBQUlDLE9BQU9zekIsV0FBVzs0QkFDakNDLGVBQWU7NEJBQ2ZDLE9BQU85QixpQkFBaUIrQixXQUFXLElBQUk7d0JBQ3pDO3dCQUNBNXlCLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBRUYsRUFBRSxPQUFPNEMsT0FBTztvQkFDZCxPQUFPO3dCQUNML0MsU0FBUzt3QkFDVEMsU0FBUyxDQUFDLG1DQUFtQyxFQUFFOEMsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHLDJCQUEyQjt3QkFDbkhFLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBQ0Y7WUFDRjtZQUVBLElBQUk2d0IsaUJBQWlCOXVCLE1BQU0sS0FBSyxnQkFBZ0I7Z0JBQzlDLHdCQUF3QjtnQkFDeEIsSUFBSTtvQkFDRixNQUFNd0QsU0FBUyxNQUFNcXJCLGdDQUFnQ0csdUJBQXVCO29CQUU1RSxJQUFJanhCLFVBQVUsQ0FBQyx1Q0FBdUMsQ0FBQztvQkFFdkR5RixPQUFPc3RCLFNBQVMsQ0FBQzN0QixLQUFLLENBQUMsR0FBRyxHQUFHNFksT0FBTyxDQUFDZ1YsQ0FBQUE7d0JBQ25DaHpCLFdBQVcsQ0FBQyxNQUFNLEVBQUVnekIsU0FBU2h2QixJQUFJLENBQUMsSUFBSSxDQUFDO3dCQUN2Q2hFLFdBQVcsQ0FBQyxPQUFPLEVBQUU2SCxLQUFLZ1MsS0FBSyxDQUFDbVosU0FBU3hLLE9BQU8sQ0FBQ3lLLEdBQUcsQ0FBQ0MsS0FBSyxFQUFFLEdBQUcsRUFBRUYsU0FBU3hLLE9BQU8sQ0FBQ3lLLEdBQUcsQ0FBQ0UsS0FBSyxDQUFDLEdBQUcsQ0FBQzt3QkFDaEduekIsV0FBVyxDQUFDLFVBQVUsRUFBRTZILEtBQUtnUyxLQUFLLENBQUNtWixTQUFTeEssT0FBTyxDQUFDNEssTUFBTSxDQUFDRixLQUFLLEVBQUUsR0FBRyxDQUFDO3dCQUN0RWx6QixXQUFXLENBQUMsUUFBUSxFQUFFNkgsS0FBS2dTLEtBQUssQ0FBQ21aLFNBQVN4SyxPQUFPLENBQUM2SyxJQUFJLENBQUNILEtBQUssRUFBRSxHQUFHLENBQUM7d0JBQ2xFbHpCLFdBQVcsQ0FBQyxpQkFBaUIsRUFBRTZILEtBQUtnUyxLQUFLLENBQUNtWixTQUFTeEssT0FBTyxDQUFDOEssV0FBVyxDQUFDdkwsWUFBWSxFQUFFLElBQUksQ0FBQzt3QkFDMUYvbkIsV0FBVyxDQUFDLFVBQVUsRUFBRWd6QixTQUFTdnRCLE1BQU0sQ0FBQyxJQUFJLENBQUM7b0JBQy9DO29CQUVBLElBQUlBLE9BQU9zdEIsU0FBUyxDQUFDbHVCLE1BQU0sR0FBRyxHQUFHO3dCQUMvQjdFLFdBQVcsQ0FBQyxRQUFRLEVBQUV5RixPQUFPc3RCLFNBQVMsQ0FBQ2x1QixNQUFNLEdBQUcsRUFBRSxpQkFBaUIsQ0FBQztvQkFDdEU7b0JBRUEsT0FBTzt3QkFDTDlFLFNBQVM7d0JBQ1RDO3dCQUNBbUQsTUFBTTs0QkFDSm93QixlQUFlOXRCLE9BQU9zdEIsU0FBUyxDQUFDbHVCLE1BQU07NEJBQ3RDMmpCLFNBQVMvaUIsT0FBT3N0QixTQUFTLENBQUMzYSxHQUFHLENBQUNDLENBQUFBLElBQU0sQ0FBQTtvQ0FDbENyVSxNQUFNcVUsRUFBRXJVLElBQUk7b0NBQ1p1RyxNQUFNOE4sRUFBRTlOLElBQUk7b0NBQ1o5RSxRQUFRNFMsRUFBRTVTLE1BQU07b0NBQ2hCK3RCLFVBQVVuYixFQUFFbVEsT0FBTyxDQUFDeUssR0FBRyxDQUFDQyxLQUFLO29DQUM3Qk8sYUFBYXBiLEVBQUVtUSxPQUFPLENBQUM0SyxNQUFNLENBQUNGLEtBQUs7b0NBQ25DbkwsY0FBYzFQLEVBQUVtUSxPQUFPLENBQUM4SyxXQUFXLENBQUN2TCxZQUFZO2dDQUNsRCxDQUFBO3dCQUNGO3dCQUNBN25CLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBRUYsRUFBRSxPQUFPNEMsT0FBTztvQkFDZCxPQUFPO3dCQUNML0MsU0FBUzt3QkFDVEMsU0FBUyxDQUFDLGdDQUFnQyxFQUFFOEMsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHLDJCQUEyQjt3QkFDaEhFLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBQ0Y7WUFDRjtZQUVBLDJEQUEyRDtZQUMzRCxPQUFPO2dCQUNMSCxTQUFTO2dCQUNUQyxTQUFTLENBQUMsc1JBQXNSLENBQUM7Z0JBQ2pTRSxhQUFhO29CQUNYO29CQUNBO29CQUNBO2lCQUNEO1lBQ0g7UUFFRixFQUFFLE9BQU80QyxPQUFPO1lBQ2R2RCxjQUFNLENBQUN1RCxLQUFLLENBQUMsOENBQThDO2dCQUN6REEsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQ3ZEckQ7Z0JBQ0FOO1lBQ0Y7WUFFQSxPQUFPO2dCQUNMWSxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFDWDtvQkFDQTtvQkFDQTtpQkFDRDtZQUNIO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUTh3QixxQ0FBcUN2eEIsS0FBYSxFQU14RDtRQUNBLE1BQU1xZCxhQUFhcmQsTUFBTStDLFdBQVc7UUFFcEMsbUJBQW1CO1FBQ25CLElBQUlQLFNBQTBGO1FBRTlGLElBQUk2YSxXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLGFBQWE7WUFDckduRSxTQUFTO1FBQ1gsT0FBTyxJQUFJNmEsV0FBVzFXLFFBQVEsQ0FBQyxlQUFlMFcsV0FBVzFXLFFBQVEsQ0FBQyxpQkFBaUIwVyxXQUFXMVcsUUFBUSxDQUFDLFlBQVk7WUFDakhuRSxTQUFTO1FBQ1gsT0FBTyxJQUFJNmEsV0FBVzFXLFFBQVEsQ0FBQyxlQUFlMFcsV0FBVzFXLFFBQVEsQ0FBQyxTQUFTO1lBQ3pFbkUsU0FBUztRQUNYLE9BQU8sSUFBSTZhLFdBQVcxVyxRQUFRLENBQUMsY0FBYzBXLFdBQVcxVyxRQUFRLENBQUMsa0JBQWtCMFcsV0FBVzFXLFFBQVEsQ0FBQyxVQUFVO1lBQy9HbkUsU0FBUztRQUNYO1FBRUEsOEJBQThCO1FBQzlCLElBQUk4dkI7UUFDSixNQUFNMkIsbUJBQW1CO1lBQ3ZCO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFFRCxJQUFLLElBQUkvckIsSUFBSSxHQUFHQSxJQUFJK3JCLGlCQUFpQjd1QixNQUFNLEVBQUU4QyxJQUFLO1lBQ2hELElBQUkrckIsZ0JBQWdCLENBQUMvckIsRUFBRSxDQUFDZ3NCLElBQUksQ0FBQ2wwQixRQUFRO2dCQUNuQyxxRUFBcUU7Z0JBQ3JFLE1BQU1tMEIsY0FBYztvQkFBQztvQkFBWTtvQkFBYztvQkFBUztpQkFBUztnQkFDakU3QixhQUFhNkIsV0FBVyxDQUFDanNCLEVBQUU7Z0JBQzNCO1lBQ0Y7UUFDRjtRQUVBLHlCQUF5QjtRQUN6QixJQUFJMnFCO1FBQ0osSUFBSXhWLFdBQVcxVyxRQUFRLENBQUMsZUFBZTBXLFdBQVcxVyxRQUFRLENBQUMsYUFBYTtZQUN0RWtzQixnQkFBZ0I7UUFDbEIsT0FBTyxJQUFJeFYsV0FBVzFXLFFBQVEsQ0FBQyxpQkFBaUIwVyxXQUFXMVcsUUFBUSxDQUFDLGFBQWE7WUFDL0Vrc0IsZ0JBQWdCO1FBQ2xCLE9BQU8sSUFBSXhWLFdBQVcxVyxRQUFRLENBQUMsYUFBYTtZQUMxQ2tzQixnQkFBZ0I7UUFDbEI7UUFFQSwyQkFBMkI7UUFDM0IsSUFBSUc7UUFDSixNQUFNb0IsZ0JBQWdCcDBCLE1BQU00c0IsS0FBSyxDQUFDO1FBQ2xDLElBQUl3SCxlQUFlO1lBQ2pCcEIsa0JBQWtCcUIsT0FBT0MsUUFBUSxDQUFDRixhQUFhLENBQUMsRUFBRTtRQUNwRDtRQUVBLE9BQU87WUFDTDV4QjtZQUNBOHZCO1lBQ0FPO1lBQ0FHO1FBQ0Y7SUFDRjtJQUVBLG1DQUFtQztJQUNuQywrQkFBK0I7SUFDL0IsbUNBQW1DO0lBRW5DOztHQUVDLEdBQ0QsQUFBUXB4Qiw2QkFBNkIxQixNQUF5QixFQUFFRixLQUFhLEVBQVc7UUFDdEYsTUFBTXUwQixzQkFBc0I7WUFDMUI7WUFBZTtZQUFlO1lBQTBCO1lBQ3hEO1lBQXdCO1lBQXdCO1lBQ2hEO1lBQW9CO1lBQXVCO1lBQzNDO1lBQXVCO1lBQW1CO1lBQzFDO1lBQVE7WUFBbUI7WUFBeUI7U0FDckQ7UUFFRCxNQUFNbFgsYUFBYXJkLE1BQU0rQyxXQUFXO1FBRXBDLE9BQU93eEIsb0JBQW9CdlgsSUFBSSxDQUFDOEosQ0FBQUEsVUFBV3pKLFdBQVcxVyxRQUFRLENBQUNtZ0IsYUFDdkR6SixXQUFXMVcsUUFBUSxDQUFDLGNBQWUwVyxDQUFBQSxXQUFXMVcsUUFBUSxDQUFDLGlCQUFpQjBXLFdBQVcxVyxRQUFRLENBQUMsVUFBUyxLQUNyRzBXLFdBQVcxVyxRQUFRLENBQUMsWUFBWTBXLFdBQVcxVyxRQUFRLENBQUMsa0JBQ3BEMFcsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjMFcsV0FBVzFXLFFBQVEsQ0FBQztJQUNoRTtJQUVBOztHQUVDLEdBQ0QsTUFBYzlFLDJCQUEyQjNCLE1BQXlCLEVBQUVSLE1BQWMsRUFBRU0sS0FBYSxFQUE0QjtRQUMzSCxJQUFJO1lBQ0YsbUNBQW1DO1lBQ25DLE1BQU11RyxPQUFPLE1BQU01QixlQUFNLENBQUM0QixJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeEMxQixPQUFPO29CQUFFcUIsSUFBSXpHO2dCQUFPO2dCQUNwQitHLFFBQVE7b0JBQUVDLE1BQU07b0JBQU04QixnQkFBZ0I7b0JBQU1qRSxNQUFNO2dCQUFLO1lBQ3pEO1lBRUEsSUFBSSxDQUFDZ0MsTUFBTTtnQkFDVCxPQUFPO29CQUNMakcsU0FBUztvQkFDVEMsU0FBUztvQkFDVDhDLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBdkQsY0FBTSxDQUFDQyxJQUFJLENBQUMsK0RBQStEO2dCQUN6RUMsT0FBT0EsTUFBTUMsU0FBUyxDQUFDLEdBQUc7Z0JBQzFCUDtnQkFDQThJLGdCQUFnQmpDLEtBQUtpQyxjQUFjO1lBQ3JDO1lBRUEsdUNBQXVDO1lBQ3ZDLE1BQU0sRUFBRWdzQiwyQkFBMkIsRUFBRSxHQUFHLE1BQU0sbUVBQUEsUUFBTztZQUVyRCw0QkFBNEI7WUFDNUIsTUFBTUMsaUJBQWlCLElBQUksQ0FBQ0MsK0JBQStCLENBQUMxMEI7WUFFNUQsSUFBSXkwQixlQUFlanlCLE1BQU0sS0FBSyxpQkFBaUI7Z0JBQzdDLDRCQUE0QjtnQkFDNUIsSUFBSTtvQkFDRixNQUFNc2YsV0FBVyxNQUFNMFMsNEJBQTRCRyxpQkFBaUIsQ0FBQ0YsZUFBZUcsS0FBSyxJQUFJO29CQUU3RixJQUFJcjBCLFVBQVUsQ0FBQywrQkFBK0IsQ0FBQztvQkFFL0MsSUFBSXVoQixTQUFTMWMsTUFBTSxLQUFLLEdBQUc7d0JBQ3pCN0UsV0FBVyxDQUFDLG1GQUFtRixDQUFDO3dCQUNoR0EsV0FBVyxDQUFDLDZFQUE2RSxDQUFDO29CQUM1RixPQUFPO3dCQUNMQSxXQUFXLENBQUMsV0FBVyxFQUFFdWhCLFNBQVMxYyxNQUFNLENBQUMsd0JBQXdCLEVBQUVxdkIsZUFBZUcsS0FBSyxJQUFJLEdBQUcsYUFBYSxDQUFDO3dCQUU1RzlTLFNBQVNuYyxLQUFLLENBQUMsR0FBRyxHQUFHNFksT0FBTyxDQUFDLENBQUNrUSxTQUFTalE7NEJBQ3JDLE1BQU1xVyxpQkFBaUJwRyxRQUFRcHVCLFVBQVUsR0FBRyxNQUFNLE9BQU9vdUIsUUFBUXB1QixVQUFVLEdBQUcsTUFBTSxPQUFPOzRCQUMzRixNQUFNeTBCLFdBQVdyRyxRQUFRM2pCLElBQUksS0FBSyx3QkFBd0IsT0FDMUMyakIsUUFBUTNqQixJQUFJLEtBQUssb0JBQW9CLFFBQ3JDMmpCLFFBQVEzakIsSUFBSSxLQUFLLHNCQUFzQixNQUN2QzJqQixRQUFRM2pCLElBQUksS0FBSyw2QkFBNkIsT0FBTzs0QkFFckV2SyxXQUFXLEdBQUdpZSxRQUFRLEVBQUUsRUFBRSxFQUFFc1csU0FBUyxHQUFHLEVBQUVyRyxRQUFRM2pCLElBQUksQ0FBQ3hGLE9BQU8sQ0FBQyxLQUFLLEtBQUt3SyxXQUFXLEdBQUcsSUFBSSxDQUFDOzRCQUM1RnZQLFdBQVcsQ0FBQyxHQUFHLEVBQUVzMEIsZUFBZSxDQUFDLEVBQUVwRyxRQUFRQSxPQUFPLENBQUMsRUFBRSxFQUFFcm1CLEtBQUtnUyxLQUFLLENBQUNxVSxRQUFRcHVCLFVBQVUsR0FBRyxLQUFLLGVBQWUsQ0FBQzs0QkFFNUcsSUFBSW91QixRQUFRc0csY0FBYyxFQUFFO2dDQUMxQngwQixXQUFXLENBQUMsdUJBQXVCLENBQUM7NEJBQ3RDOzRCQUNBQSxXQUFXLENBQUMsRUFBRSxDQUFDO3dCQUNqQjt3QkFFQSxJQUFJdWhCLFNBQVMxYyxNQUFNLEdBQUcsR0FBRzs0QkFDdkI3RSxXQUFXLENBQUMsUUFBUSxFQUFFdWhCLFNBQVMxYyxNQUFNLEdBQUcsRUFBRSxrQkFBa0IsQ0FBQzt3QkFDL0Q7d0JBRUEsTUFBTTR2QixxQkFBcUJsVCxTQUFTOWMsTUFBTSxDQUFDa0QsQ0FBQUEsSUFBS0EsRUFBRTZzQixjQUFjO3dCQUNoRSxJQUFJQyxtQkFBbUI1dkIsTUFBTSxHQUFHLEdBQUc7NEJBQ2pDN0UsV0FBVyxDQUFDLEtBQUssRUFBRXkwQixtQkFBbUI1dkIsTUFBTSxDQUFDLHVDQUF1QyxDQUFDO3dCQUN2RjtvQkFDRjtvQkFFQSxPQUFPO3dCQUNMOUUsU0FBUzt3QkFDVEM7d0JBQ0FtRCxNQUFNOzRCQUNKb2UsVUFBVUEsU0FBU25jLEtBQUssQ0FBQyxHQUFHOzRCQUM1Qm9OLFNBQVM7Z0NBQ1BraUIsZUFBZW5ULFNBQVMxYyxNQUFNO2dDQUM5QjR2QixvQkFBb0JsVCxTQUFTOWMsTUFBTSxDQUFDa0QsQ0FBQUEsSUFBS0EsRUFBRTZzQixjQUFjLEVBQUUzdkIsTUFBTTtnQ0FDakU4dkIsd0JBQXdCcFQsU0FBUzljLE1BQU0sQ0FBQ2tELENBQUFBLElBQUtBLEVBQUU3SCxVQUFVLEdBQUcsS0FBSytFLE1BQU07Z0NBQ3ZFK3ZCLG1CQUFtQnJULFNBQVMxYyxNQUFNLEdBQUcsSUFBSTBjLFNBQVNsQyxNQUFNLENBQUMsQ0FBQ0ssS0FBSy9YLElBQU0rWCxNQUFNL1gsRUFBRTdILFVBQVUsRUFBRSxLQUFLeWhCLFNBQVMxYyxNQUFNLEdBQUc7NEJBQ2xIO3dCQUNGO3dCQUNBM0UsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFFRixFQUFFLE9BQU80QyxPQUFPO29CQUNkLE9BQU87d0JBQ0wvQyxTQUFTO3dCQUNUQyxTQUFTLENBQUMsb0NBQW9DLEVBQUU4QyxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUcsMkJBQTJCO3dCQUNwSEUsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFDRjtZQUNGO1lBRUEsSUFBSWcwQixlQUFlanlCLE1BQU0sS0FBSyxnQkFBZ0I7Z0JBQzVDLDJCQUEyQjtnQkFDM0IsSUFBSTtvQkFDRixNQUFNdW1CLFVBQVUsTUFBTXlMLDRCQUE0QlkscUJBQXFCO29CQUV2RSxJQUFJNzBCLFVBQVUsQ0FBQyx3Q0FBd0MsQ0FBQztvQkFDeERBLFdBQVcsQ0FBQyw2QkFBNkIsQ0FBQztvQkFDMUNBLFdBQVcsQ0FBQyxxQkFBcUIsRUFBRXdvQixRQUFRdk4sZ0JBQWdCLElBQUksRUFBRSxFQUFFLENBQUM7b0JBQ3BFamIsV0FBVyxDQUFDLGtCQUFrQixFQUFFLEFBQUN3b0IsQ0FBQUEsUUFBUS9ILFlBQVksSUFBSSxDQUFBLEVBQUc5SSxjQUFjLEdBQUcsRUFBRSxDQUFDO29CQUNoRjNYLFdBQVcsQ0FBQywwQkFBMEIsRUFBRTZILEtBQUtnUyxLQUFLLENBQUMyTyxRQUFRc00sbUJBQW1CLElBQUksR0FBRyxRQUFRLENBQUM7b0JBQzlGOTBCLFdBQVcsQ0FBQyxzQkFBc0IsRUFBRSxBQUFDd29CLENBQUFBLFFBQVF1TSxpQkFBaUIsSUFBSSxTQUFRLEVBQUd4bEIsV0FBVyxHQUFHLElBQUksQ0FBQztvQkFFaEcsSUFBSWlaLFFBQVF3TSxXQUFXLElBQUl4TSxRQUFRd00sV0FBVyxDQUFDbndCLE1BQU0sR0FBRyxHQUFHO3dCQUN6RDdFLFdBQVcsQ0FBQyxpQ0FBaUMsQ0FBQzt3QkFDOUN3b0IsUUFBUXdNLFdBQVcsQ0FBQzV2QixLQUFLLENBQUMsR0FBRyxHQUFHNFksT0FBTyxDQUFDLENBQUNpWCxTQUFTaFg7NEJBQ2hEamUsV0FBVyxHQUFHaWUsUUFBUSxFQUFFLEVBQUUsRUFBRWdYLFFBQVFqeEIsSUFBSSxJQUFJLFVBQVUsR0FBRyxFQUFFaXhCLFFBQVF6ZCxXQUFXLElBQUksRUFBRSxjQUFjLENBQUM7d0JBQ3JHO29CQUNGLE9BQU87d0JBQ0x4WCxXQUFXLENBQUMscURBQXFELENBQUM7b0JBQ3BFO29CQUVBLE1BQU1rMUIsYUFBYTFNLFFBQVF1TSxpQkFBaUIsS0FBSyxjQUFjLE9BQzlDdk0sUUFBUXVNLGlCQUFpQixLQUFLLFNBQVMsT0FDdkN2TSxRQUFRdU0saUJBQWlCLEtBQUssWUFBWSxPQUFPO29CQUVsRS8wQixXQUFXLENBQUMsRUFBRSxFQUFFazFCLFdBQVcsb0JBQW9CLEVBQUUsQUFBQzFNLENBQUFBLFFBQVF1TSxpQkFBaUIsSUFBSSxTQUFRLEVBQUd4bEIsV0FBVyxJQUFJO29CQUV6RyxPQUFPO3dCQUNMeFAsU0FBUzt3QkFDVEM7d0JBQ0FtRCxNQUFNOzRCQUNKcWxCOzRCQUNBMk0sY0FBYzNNLFFBQVF1TSxpQkFBaUIsSUFBSTt3QkFDN0M7d0JBQ0E3MEIsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFFRixFQUFFLE9BQU80QyxPQUFPO29CQUNkLE9BQU87d0JBQ0wvQyxTQUFTO3dCQUNUQyxTQUFTLENBQUMsbUNBQW1DLEVBQUU4QyxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUcsMkJBQTJCO3dCQUNuSEUsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFDRjtZQUNGO1lBRUEsSUFBSWcwQixlQUFlanlCLE1BQU0sS0FBSyx3QkFBd0I7Z0JBQ3BELG1DQUFtQztnQkFDbkMsSUFBSTtvQkFDRixNQUFNNm1CLGtCQUFrQixNQUFNbUwsNEJBQTRCbUIsNkJBQTZCO29CQUV2RixJQUFJcDFCLFVBQVUsQ0FBQyxzQ0FBc0MsQ0FBQztvQkFFdEQsSUFBSThvQixnQkFBZ0Jqa0IsTUFBTSxLQUFLLEdBQUc7d0JBQ2hDN0UsV0FBVyxDQUFDLCtDQUErQyxDQUFDO3dCQUM1REEsV0FBVyxDQUFDLDJIQUEySCxDQUFDO29CQUMxSSxPQUFPO3dCQUNMQSxXQUFXLENBQUMsV0FBVyxFQUFFOG9CLGdCQUFnQmprQixNQUFNLENBQUMsa0NBQWtDLENBQUM7d0JBRW5GLE1BQU13d0IsZUFBZXZNLGdCQUFnQnJrQixNQUFNLENBQUM0VCxDQUFBQSxJQUFLQSxFQUFFL0gsUUFBUSxLQUFLO3dCQUNoRSxNQUFNZ2xCLGlCQUFpQnhNLGdCQUFnQnJrQixNQUFNLENBQUM0VCxDQUFBQSxJQUFLQSxFQUFFL0gsUUFBUSxLQUFLO3dCQUNsRSxNQUFNaWxCLGNBQWN6TSxnQkFBZ0Jya0IsTUFBTSxDQUFDNFQsQ0FBQUEsSUFBS0EsRUFBRS9ILFFBQVEsS0FBSzt3QkFFL0QsSUFBSStrQixhQUFheHdCLE1BQU0sR0FBRyxHQUFHOzRCQUMzQjdFLFdBQVcsQ0FBQyxvQkFBb0IsRUFBRXExQixhQUFheHdCLE1BQU0sQ0FBQyxNQUFNLENBQUM7NEJBQzdEd3dCLGFBQWFqd0IsS0FBSyxDQUFDLEdBQUcsR0FBRzRZLE9BQU8sQ0FBQyxDQUFDaU0sS0FBS2hNO2dDQUNyQ2plLFdBQVcsR0FBR2llLFFBQVEsRUFBRSxFQUFFLEVBQUVnTSxJQUFJN2UsV0FBVyxDQUFDLEVBQUUsQ0FBQztnQ0FDL0NwTCxXQUFXLENBQUMsd0JBQXdCLEVBQUVpcUIsSUFBSXVMLGNBQWMsQ0FBQy9kLE9BQU8sQ0FBQyxZQUFZLEVBQUV3UyxJQUFJdUwsY0FBYyxDQUFDaGUsV0FBVyxDQUFDLGVBQWUsQ0FBQztnQ0FDOUh4WCxXQUFXLENBQUMsaUJBQWlCLEVBQUVpcUIsSUFBSXdMLGNBQWMsQ0FBQ3RYLFNBQVMsQ0FBQyxJQUFJLENBQUM7NEJBQ25FO3dCQUNGO3dCQUVBLElBQUltWCxlQUFlendCLE1BQU0sR0FBRyxHQUFHOzRCQUM3QjdFLFdBQVcsQ0FBQyxzQkFBc0IsRUFBRXMxQixlQUFlendCLE1BQU0sQ0FBQyxNQUFNLENBQUM7NEJBQ2pFeXdCLGVBQWVsd0IsS0FBSyxDQUFDLEdBQUcsR0FBRzRZLE9BQU8sQ0FBQyxDQUFDaU0sS0FBS2hNO2dDQUN2Q2plLFdBQVcsR0FBR2llLFFBQVEsRUFBRSxFQUFFLEVBQUVnTSxJQUFJN2UsV0FBVyxDQUFDLEVBQUUsQ0FBQztnQ0FDL0NwTCxXQUFXLENBQUMsd0JBQXdCLEVBQUVpcUIsSUFBSXVMLGNBQWMsQ0FBQy9kLE9BQU8sQ0FBQyxhQUFhLENBQUM7NEJBQ2pGO3dCQUNGO3dCQUVBLElBQUk4ZCxZQUFZMXdCLE1BQU0sR0FBRyxHQUFHOzRCQUMxQjdFLFdBQVcsQ0FBQyxxQkFBcUIsRUFBRXUxQixZQUFZMXdCLE1BQU0sQ0FBQywyQkFBMkIsQ0FBQzt3QkFDcEY7b0JBQ0Y7b0JBRUEsT0FBTzt3QkFDTDlFLFNBQVM7d0JBQ1RDO3dCQUNBbUQsTUFBTTs0QkFDSjJsQjs0QkFDQXRXLFNBQVM7Z0NBQ1BrRixPQUFPb1IsZ0JBQWdCamtCLE1BQU07Z0NBQzdCd3dCLGNBQWN2TSxnQkFBZ0Jya0IsTUFBTSxDQUFDNFQsQ0FBQUEsSUFBS0EsRUFBRS9ILFFBQVEsS0FBSyxRQUFRekwsTUFBTTtnQ0FDdkV5d0IsZ0JBQWdCeE0sZ0JBQWdCcmtCLE1BQU0sQ0FBQzRULENBQUFBLElBQUtBLEVBQUUvSCxRQUFRLEtBQUssVUFBVXpMLE1BQU07Z0NBQzNFMHdCLGFBQWF6TSxnQkFBZ0Jya0IsTUFBTSxDQUFDNFQsQ0FBQUEsSUFBS0EsRUFBRS9ILFFBQVEsS0FBSyxPQUFPekwsTUFBTTs0QkFDdkU7d0JBQ0Y7d0JBQ0EzRSxhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUVGLEVBQUUsT0FBTzRDLE9BQU87b0JBQ2QsT0FBTzt3QkFDTC9DLFNBQVM7d0JBQ1RDLFNBQVMsQ0FBQywyQ0FBMkMsRUFBRThDLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRywyQkFBMkI7d0JBQzNIRSxhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUNGO1lBQ0Y7WUFFQSxJQUFJZzBCLGVBQWVqeUIsTUFBTSxLQUFLLG9CQUFvQjtnQkFDaEQsc0RBQXNEO2dCQUN0RCxNQUFNa3RCLGdCQUFnQjtvQkFBQztvQkFBZTtpQkFBUSxDQUFDL29CLFFBQVEsQ0FBQ0osS0FBS0csSUFBSTtnQkFDakUsSUFBSSxDQUFDZ3BCLGVBQWU7b0JBQ2xCLE9BQU87d0JBQ0xwdkIsU0FBUzt3QkFDVEMsU0FBUzt3QkFDVEUsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFDRjtnQkFFQSxJQUFJO29CQUNGLGtDQUFrQztvQkFDbEMsSUFBSUYsVUFBVSxDQUFDLHlDQUF5QyxDQUFDO29CQUN6REEsV0FBVyxDQUFDLDhEQUE4RCxDQUFDO29CQUMzRUEsV0FBVyxDQUFDLDhEQUE4RCxDQUFDO29CQUMzRUEsV0FBVyxDQUFDLG9EQUFvRCxDQUFDO29CQUNqRUEsV0FBVyxDQUFDLHdCQUF3QixDQUFDO29CQUNyQ0EsV0FBVyxDQUFDLGlEQUFpRCxDQUFDO29CQUM5REEsV0FBVyxDQUFDLHdDQUF3QyxDQUFDO29CQUNyREEsV0FBVyxDQUFDLG9DQUFvQyxDQUFDO29CQUNqREEsV0FBVyxDQUFDLHNEQUFzRCxDQUFDO29CQUNuRUEsV0FBVyxDQUFDLGdFQUFnRSxDQUFDO29CQUU3RSxPQUFPO3dCQUNMRCxTQUFTO3dCQUNUQzt3QkFDQW1ELE1BQU07NEJBQ0p1eUIsWUFBWSxDQUFDLFNBQVMsRUFBRXIyQixLQUFLQyxHQUFHLElBQUk7NEJBQ3BDbUcsUUFBUTs0QkFDUmt3QixxQkFBcUIsSUFBSXQyQixLQUFLQSxLQUFLQyxHQUFHLEtBQUssSUFBSSxLQUFLLE1BQU1xekIsV0FBVzs0QkFDckVFLE9BQU87d0JBQ1Q7d0JBQ0EzeUIsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFFRixFQUFFLE9BQU80QyxPQUFPO29CQUNkLE9BQU87d0JBQ0wvQyxTQUFTO3dCQUNUQyxTQUFTLENBQUMsd0NBQXdDLEVBQUU4QyxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUcsMkJBQTJCO3dCQUN4SEUsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFDRjtZQUNGO1lBRUEsd0RBQXdEO1lBQ3hELE9BQU87Z0JBQ0xILFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyx5VEFBeVQsQ0FBQztnQkFDcFVFLGFBQWE7b0JBQ1g7b0JBQ0E7b0JBQ0E7aUJBQ0Q7WUFDSDtRQUVGLEVBQUUsT0FBTzRDLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyx5Q0FBeUM7Z0JBQ3BEQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkRyRDtnQkFDQU47WUFDRjtZQUVBLE9BQU87Z0JBQ0xZLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUc7Z0JBQ2hERSxhQUFhO29CQUNYO29CQUNBO29CQUNBO2lCQUNEO1lBQ0g7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxBQUFRaTBCLGdDQUFnQzEwQixLQUFhLEVBS25EO1FBQ0EsTUFBTXFkLGFBQWFyZCxNQUFNK0MsV0FBVztRQUVwQyxtQkFBbUI7UUFDbkIsSUFBSVAsU0FBcUc7UUFFekcsSUFBSTZhLFdBQVcxVyxRQUFRLENBQUMsZUFBZTBXLFdBQVcxVyxRQUFRLENBQUMscUJBQXFCO1lBQzlFbkUsU0FBUztRQUNYLE9BQU8sSUFBSTZhLFdBQVcxVyxRQUFRLENBQUMsY0FBYzBXLFdBQVcxVyxRQUFRLENBQUMsa0JBQWtCMFcsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjO1lBQ25IbkUsU0FBUztRQUNYLE9BQU8sSUFBSTZhLFdBQVcxVyxRQUFRLENBQUMsc0JBQXNCMFcsV0FBVzFXLFFBQVEsQ0FBQyxlQUFlMFcsV0FBVzFXLFFBQVEsQ0FBQyxnQkFBZ0I7WUFDMUhuRSxTQUFTO1FBQ1gsT0FBTyxJQUFJNmEsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjMFcsV0FBVzFXLFFBQVEsQ0FBQyxtQkFBbUIwVyxXQUFXMVcsUUFBUSxDQUFDLG1CQUFtQjtZQUN6SG5FLFNBQVM7UUFDWCxPQUFPLElBQUk2YSxXQUFXMVcsUUFBUSxDQUFDLGtCQUFtQjBXLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsV0FBVzBXLFdBQVcxVyxRQUFRLENBQUMsVUFBUyxHQUFJO1lBQ2hIbkUsU0FBUyxpQkFBaUIsc0JBQXNCO1FBQ2xEO1FBRUEsc0JBQXNCO1FBQ3RCLElBQUlveUI7UUFDSixNQUFNdUIsWUFBWW4yQixNQUFNNHNCLEtBQUssQ0FBQztRQUM5QixJQUFJdUosV0FBVztZQUNiLE1BQU05ZixRQUFRZ2UsT0FBT0MsUUFBUSxDQUFDNkIsU0FBUyxDQUFDLEVBQUU7WUFDMUMsTUFBTUMsT0FBT0QsU0FBUyxDQUFDLEVBQUUsQ0FBQ3B6QixXQUFXO1lBQ3JDNnhCLFFBQVF3QixLQUFLQyxVQUFVLENBQUMsU0FBU2hnQixRQUFRLEtBQUtBO1FBQ2hEO1FBRUEsa0JBQWtCO1FBQ2xCLElBQUltZjtRQUNKLE1BQU1jLGtCQUFrQjtZQUN0QjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBRUQsS0FBSyxNQUFNM0osV0FBVzJKLGdCQUFpQjtZQUNyQyxJQUFJM0osUUFBUXVILElBQUksQ0FBQ2wwQixRQUFRO2dCQUN2QncxQixVQUFVN0ksUUFBUTVtQixNQUFNLENBQUNULE9BQU8sQ0FBQyxZQUFZO2dCQUM3QztZQUNGO1FBQ0Y7UUFFQSxPQUFPO1lBQ0w5QztZQUNBb3lCO1lBQ0FZO1FBQ0Y7SUFDRjtJQUVBLG1DQUFtQztJQUNuQywwQkFBMEI7SUFDMUIsbUNBQW1DO0lBRW5DOztHQUVDLEdBQ0QsQUFBUTUwQixnQkFBZ0JWLE1BQXlCLEVBQUVGLEtBQWEsRUFBVztRQUN6RSxNQUFNdTJCLGVBQWU7WUFBQztZQUFRO1lBQVE7WUFBUTtZQUFPO1lBQVk7WUFBUztZQUFVO1NBQVM7UUFDN0YsTUFBTUMsYUFBYTtZQUFDO1lBQU87WUFBUTtZQUFZO1NBQVU7UUFFekQsTUFBTW5aLGFBQWFyZCxNQUFNK0MsV0FBVztRQUVwQyxtQ0FBbUM7UUFDbkMsSUFBSXd6QixhQUFhdlosSUFBSSxDQUFDOEosQ0FBQUEsVUFBV3pKLFdBQVcxVyxRQUFRLENBQUNtZ0IsV0FBVztZQUM5RCxPQUFPO1FBQ1Q7UUFFQSwrQkFBK0I7UUFDL0IsSUFBSTBQLFdBQVd4WixJQUFJLENBQUM1SyxDQUFBQSxRQUFTaUwsV0FBVzFXLFFBQVEsQ0FBQ3lMLFNBQVM7WUFDeEQsT0FBTztRQUNUO1FBRUEsaUNBQWlDO1FBQ2pDLElBQUlpTCxXQUFXMVcsUUFBUSxDQUFDLFVBQVUwVyxXQUFXMVcsUUFBUSxDQUFDLFlBQVkwVyxXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLFdBQVc7WUFDaEksT0FBTztRQUNUO1FBRUEsZ0RBQWdEO1FBQ2hELElBQUl6RyxPQUFPc0MsTUFBTSxLQUFLLFVBQVU2YSxXQUFXMVcsUUFBUSxDQUFDLGFBQWE7WUFDL0QsT0FBTztRQUNUO1FBRUEsT0FBTztJQUNUO0lBRUE7O0dBRUMsR0FDRCxNQUFjOUYscUJBQXFCWCxNQUF5QixFQUFFUixNQUFjLEVBQUVNLEtBQWEsRUFBNEI7UUFDckgsSUFBSTtZQUNGLE1BQU1xZCxhQUFhcmQsTUFBTStDLFdBQVc7WUFFcEMsbUNBQW1DO1lBQ25DLE1BQU13RCxPQUFPLE1BQU01QixlQUFNLENBQUM0QixJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeEMxQixPQUFPO29CQUFFcUIsSUFBSXpHO2dCQUFPO2dCQUNwQitHLFFBQVE7b0JBQUVDLE1BQU07b0JBQU04QixnQkFBZ0I7Z0JBQUs7WUFDN0M7WUFFQSxJQUFJLENBQUNqQyxNQUFNO2dCQUNULE9BQU87b0JBQ0xqRyxTQUFTO29CQUNUQyxTQUFTO29CQUNUOEMsT0FBTztnQkFDVDtZQUNGO1lBRUEsZ0NBQWdDO1lBQ2hDLElBQUlnYSxXQUFXMVcsUUFBUSxDQUFDLGFBQWF6RyxPQUFPaUQsTUFBTSxLQUFLLFdBQVc7Z0JBQ2hFLE9BQU8sTUFBTSxJQUFJLENBQUNzekIsd0JBQXdCLENBQUN2MkIsUUFBUVIsUUFBUTZHLEtBQUtHLElBQUksRUFBRUgsS0FBS2lDLGNBQWMsRUFBR3hJO1lBQzlGO1lBRUEsSUFBSXFkLFdBQVcxVyxRQUFRLENBQUMsYUFBYXpHLE9BQU9pRCxNQUFNLEtBQUssV0FBVztnQkFDaEUsT0FBTyxNQUFNLElBQUksQ0FBQ3V6Qix3QkFBd0IsQ0FBQ3gyQixRQUFRUixRQUFRNkcsS0FBS0csSUFBSSxFQUFFSCxLQUFLaUMsY0FBYyxFQUFHeEk7WUFDOUY7WUFFQSxJQUFJcWQsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXekcsT0FBT2lELE1BQU0sS0FBSyxZQUFZO2dCQUMvRCxPQUFPLE1BQU0sSUFBSSxDQUFDd3pCLHVCQUF1QixDQUFDejJCLFFBQVFSLFFBQVE2RyxLQUFLRyxJQUFJLEVBQUVILEtBQUtpQyxjQUFjLEVBQUd4STtZQUM3RjtZQUVBLElBQUlxZCxXQUFXMVcsUUFBUSxDQUFDLFdBQVc7Z0JBQ2pDLE9BQU8sTUFBTSxJQUFJLENBQUNpd0IsaUJBQWlCLENBQUMxMkIsUUFBUVIsUUFBUTZHLEtBQUtHLElBQUksRUFBRUgsS0FBS2lDLGNBQWMsRUFBR3hJO1lBQ3ZGO1lBRUEsa0NBQWtDO1lBQ2xDLE9BQU87Z0JBQ0xNLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tDQWtCZ0IsQ0FBQztnQkFDM0JFLGFBQWE7b0JBQ1g7b0JBQ0E7b0JBQ0E7b0JBQ0E7aUJBQ0Q7WUFDSDtRQUVGLEVBQUUsT0FBTzRDLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyx5QkFBeUI7Z0JBQ3BDQSxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkQzRDtnQkFDQU0sT0FBT0EsTUFBTUMsU0FBUyxDQUFDLEdBQUc7WUFDNUI7WUFFQSxPQUFPO2dCQUNMSyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHO2dCQUNoREUsYUFBYTtvQkFBQztvQkFBc0Q7aUJBQTZDO1lBQ25IO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY2cyQix5QkFDWnYyQixNQUF5QixFQUN6QlIsTUFBYyxFQUNkdW5CLFFBQWdCLEVBQ2hCemUsY0FBc0IsRUFDdEJ4SSxLQUFhLEVBQ2E7UUFDMUIsSUFBSTtZQUNGLHdEQUF3RDtZQUN4RCxNQUFNc0UsY0FBY3BFLE9BQU93RCxJQUFJO1lBQy9CLElBQUlpRyxXQUFXLEVBQUU7WUFFakIsSUFBSXJGLGVBQWV1eUIsTUFBTUMsT0FBTyxDQUFDeHlCLGNBQWM7Z0JBQzdDcUYsV0FBV3JGO1lBQ2IsT0FBTztnQkFDTCxpQ0FBaUM7Z0JBQ2pDLE1BQU04TixRQUFRLElBQUksQ0FBQzJrQixzQkFBc0IsQ0FBQy8yQixVQUFVO2dCQUNwRDJKLFdBQVcsSUFBSSxDQUFDcXRCLHNCQUFzQixDQUFDNXVCLEtBQUs2dUIsR0FBRyxDQUFDN2tCLE9BQU8sUUFBUSxtQkFBbUI7WUFDcEY7WUFFQSxzQkFBc0I7WUFDdEIsTUFBTXpSLFNBQVMsTUFBTXUyQiwwQ0FBb0IsQ0FBQ0Msb0JBQW9CLENBQzVEO2dCQUNFcnNCLE1BQU07Z0JBQ05wSCxNQUFNaUc7Z0JBQ05vQyxTQUFTO29CQUNQcXJCLFdBQVc7b0JBQ1hDLGlCQUFpQjtvQkFDakJDLGNBQWM7b0JBQ2RDLFFBQVF2M0IsTUFBTTJHLFFBQVEsQ0FBQyxjQUFjM0csTUFBTTJHLFFBQVEsQ0FBQztnQkFDdEQ7Z0JBQ0E2d0IsaUJBQWlCLEVBQUU7WUFDckIsR0FDQTkzQixRQUNBdW5CLFVBQ0F6ZTtZQUdGLE9BQU87Z0JBQ0xsSSxTQUFTO2dCQUNUQyxTQUFTLENBQUMseUJBQXlCLEVBQUVJLE9BQU9vUyxPQUFPLENBQUMwa0IsWUFBWSxHQUFHLElBQUksY0FBYyxZQUFZOzs7a0JBR3ZGLEVBQUU5MkIsT0FBT29TLE9BQU8sQ0FBQzBrQixZQUFZLENBQUM7bUJBQzdCLEVBQUVydkIsS0FBS3N2QixJQUFJLENBQUMvMkIsT0FBT29TLE9BQU8sQ0FBQzBrQixZQUFZLEdBQUcsS0FBSzs7OztnQkFJbEQsRUFBRTkyQixPQUFPZzNCLFdBQVcsQ0FBQztVQUMzQixFQUFFMzNCLE1BQU0yRyxRQUFRLENBQUMsYUFBYSxpQkFBaUIsYUFBYTs7O0FBR3RFLEVBQUUzRyxNQUFNMkcsUUFBUSxDQUFDLGFBQWEsMkZBQTJGLDhEQUE4RDtnQkFDL0tqRCxNQUFNL0M7Z0JBQ055RixTQUFTO29CQUNQdXhCLGFBQWFoM0IsT0FBT2czQixXQUFXO29CQUMvQnRYLGVBQWUxZixPQUFPb1MsT0FBTyxDQUFDMGtCLFlBQVk7b0JBQzFDRyxVQUFVNTNCLE1BQU0yRyxRQUFRLENBQUMsY0FBYzNHLE1BQU0yRyxRQUFRLENBQUM7Z0JBQ3hEO1lBQ0Y7UUFFRixFQUFFLE9BQU90RCxPQUFPO1lBQ2QsT0FBTztnQkFDTC9DLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUc7Z0JBQ2hERSxhQUFhO29CQUNYO29CQUNBO29CQUNBO2lCQUNEO1lBQ0g7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFjaTJCLHlCQUNaeDJCLE1BQXlCLEVBQ3pCUixNQUFjLEVBQ2R1bkIsUUFBZ0IsRUFDaEJ6ZSxjQUFzQixFQUN0QnhJLEtBQWEsRUFDYTtRQUMxQixJQUFJO1lBQ0YsNkNBQTZDO1lBQzdDLE1BQU02M0IsVUFBVSxJQUFJLENBQUNDLHVCQUF1QixDQUFDOTNCO1lBQzdDLE1BQU0rM0IsVUFBVSxJQUFJLENBQUNDLHVCQUF1QixDQUFDaDRCO1lBRTdDLHNCQUFzQjtZQUN0QixNQUFNVyxTQUFTLE1BQU11MkIsMENBQW9CLENBQUNlLG9CQUFvQixDQUM1RDtnQkFDRW50QixNQUFNO2dCQUNOcEgsTUFBTSxFQUFFO2dCQUNSbTBCO2dCQUNBOXJCLFNBQVM7b0JBQ1BxckIsV0FBVztvQkFDWEMsaUJBQWlCO29CQUNqQkUsUUFBUXYzQixNQUFNMkcsUUFBUSxDQUFDLGNBQWMzRyxNQUFNMkcsUUFBUSxDQUFDO2dCQUN0RDtnQkFDQTZ3QixpQkFBaUIsRUFBRTtZQUNyQixHQUNBOTNCLFFBQ0F1bkIsVUFDQXplO1lBR0YsT0FBTztnQkFDTGxJLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQyx5QkFBeUIsRUFBRUksT0FBT29TLE9BQU8sQ0FBQzBrQixZQUFZLEdBQUcsSUFBSSxjQUFjLFlBQVk7OztzQkFHbkYsRUFBRTkyQixPQUFPb1MsT0FBTyxDQUFDMGtCLFlBQVksQ0FBQzttQkFDakMsRUFBRXJ2QixLQUFLc3ZCLElBQUksQ0FBQy8yQixPQUFPb1MsT0FBTyxDQUFDMGtCLFlBQVksR0FBRyxLQUFLOzs7O2dCQUlsRCxFQUFFOTJCLE9BQU9nM0IsV0FBVyxDQUFDO21CQUNsQixFQUFFenlCLE9BQU9DLElBQUksQ0FBQzB5QixTQUFTenlCLE1BQU0sQ0FBQztXQUN0QyxFQUFFRixPQUFPQyxJQUFJLENBQUM0eUIsU0FBUzN5QixNQUFNLENBQUM7O0FBRXpDLEVBQUVwRixNQUFNMkcsUUFBUSxDQUFDLGFBQWEsMkZBQTJGLDhEQUE4RDtnQkFDL0tqRCxNQUFNL0M7Z0JBQ055RixTQUFTO29CQUNQdXhCLGFBQWFoM0IsT0FBT2czQixXQUFXO29CQUMvQk8sa0JBQWtCdjNCLE9BQU9vUyxPQUFPLENBQUMwa0IsWUFBWTtvQkFDN0NHLFVBQVU1M0IsTUFBTTJHLFFBQVEsQ0FBQyxjQUFjM0csTUFBTTJHLFFBQVEsQ0FBQztnQkFDeEQ7WUFDRjtRQUVGLEVBQUUsT0FBT3RELE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQ1g7b0JBQ0E7b0JBQ0E7aUJBQ0Q7WUFDSDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNrMkIsd0JBQ1p6MkIsTUFBeUIsRUFDekJSLE1BQWMsRUFDZHVuQixRQUFnQixFQUNoQnplLGNBQXNCLEVBQ3RCeEksS0FBYSxFQUNhO1FBQzFCLElBQUk7WUFDRixtQ0FBbUM7WUFDbkMsTUFBTW00QixlQUFlLElBQUksQ0FBQ0Msd0JBQXdCLENBQUNwNEI7WUFFbkQsSUFBSSxDQUFDbTRCLGFBQWF0b0IsVUFBVSxJQUFJLENBQUNzb0IsYUFBYWxwQixZQUFZLEVBQUU7Z0JBQzFELE9BQU87b0JBQ0wzTyxTQUFTO29CQUNUQyxTQUFTO29CQUNURSxhQUFhO3dCQUNYO3dCQUNBO3FCQUNEO2dCQUNIO1lBQ0Y7WUFFQSxnQkFBZ0I7WUFDaEIsSUFBSTBPLFdBQVc7WUFDZixJQUFJZ3BCLGFBQWF0b0IsVUFBVSxFQUFFO2dCQUMzQlYsV0FBVyxNQUFNeEssZUFBTSxDQUFDeUssYUFBYSxDQUFDNUksVUFBVSxDQUFDO29CQUMvQzFCLE9BQU87d0JBQUVxQixJQUFJZ3lCLGFBQWF0b0IsVUFBVTt3QkFBRXJIO29CQUFlO2dCQUN2RDtZQUNGLE9BQU8sSUFBSTJ2QixhQUFhbHBCLFlBQVksRUFBRTtnQkFDcENFLFdBQVcsTUFBTXhLLGVBQU0sQ0FBQ3lLLGFBQWEsQ0FBQ3ZLLFNBQVMsQ0FBQztvQkFDOUNDLE9BQU87d0JBQ0xQLE1BQU07NEJBQUVnTixVQUFVNG1CLGFBQWFscEIsWUFBWTs0QkFBRXVDLE1BQU07d0JBQWM7d0JBQ2pFaEo7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUVBLElBQUksQ0FBQzJHLFVBQVU7Z0JBQ2IsT0FBTztvQkFDTDdPLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQUM7d0JBQTRCO3FCQUFpRDtnQkFDN0Y7WUFDRjtZQUVBLHVCQUF1QjtZQUN2QixNQUFNa25CLGFBQWEsSUFBSSxDQUFDMFEsMEJBQTBCLENBQUNyNEI7WUFFbkQsNkJBQTZCO1lBQzdCLE1BQU1XLFNBQVMsTUFBTXUyQiwwQ0FBb0IsQ0FBQ29CLG1CQUFtQixDQUMzRDtnQkFDRXh0QixNQUFNO2dCQUNOcEgsTUFBTTtvQkFBQzt3QkFDTG1NLFlBQVlWLFNBQVNoSixFQUFFO3dCQUN2QndoQjt3QkFDQTViLFNBQVM7NEJBQ1BxckIsV0FBVzs0QkFDWG1CLHFCQUFxQjs0QkFDckJDLFVBQVV4NEIsTUFBTTJHLFFBQVEsQ0FBQyxXQUFXM0csTUFBTTJHLFFBQVEsQ0FBQzt3QkFDckQ7b0JBQ0Y7aUJBQUU7Z0JBQ0ZvRixTQUFTO29CQUNQcXJCLFdBQVc7b0JBQ1hDLGlCQUFpQjtvQkFDakJFLFFBQVF2M0IsTUFBTTJHLFFBQVEsQ0FBQyxjQUFjM0csTUFBTTJHLFFBQVEsQ0FBQztnQkFDdEQ7Z0JBQ0E2d0IsaUJBQWlCLEVBQUU7WUFDckIsR0FDQTkzQixRQUNBdW5CLFVBQ0F6ZTtZQUdGLE9BQU87Z0JBQ0xsSSxTQUFTO2dCQUNUQyxTQUFTLENBQUMsd0JBQXdCLEVBQUVJLE9BQU9vUyxPQUFPLENBQUMwa0IsWUFBWSxHQUFHLElBQUksY0FBYyxZQUFZOzs7YUFHM0YsRUFBRXRvQixTQUFTNUssSUFBSSxDQUFDO2NBQ2YsRUFBRTVELE9BQU9vUyxPQUFPLENBQUMwa0IsWUFBWSxDQUFDO21CQUN6QixFQUFFcnZCLEtBQUtzdkIsSUFBSSxDQUFDLzJCLE9BQU9vUyxPQUFPLENBQUMwa0IsWUFBWSxHQUFHLEdBQUc7Ozs7Z0JBSWhELEVBQUU5MkIsT0FBT2czQixXQUFXLENBQUM7VUFDM0IsRUFBRTMzQixNQUFNMkcsUUFBUSxDQUFDLFdBQVczRyxNQUFNMkcsUUFBUSxDQUFDLGFBQWEsY0FBYyxhQUFhOzs7QUFHN0YsRUFBRTNHLE1BQU0yRyxRQUFRLENBQUMsV0FBVzNHLE1BQU0yRyxRQUFRLENBQUMsYUFBYSx3RkFBd0YscUVBQXFFO2dCQUM3TWpELE1BQU0vQztnQkFDTnlGLFNBQVM7b0JBQ1B1eEIsYUFBYWgzQixPQUFPZzNCLFdBQVc7b0JBQy9CMW9CLGNBQWNFLFNBQVM1SyxJQUFJO29CQUMzQmswQixnQkFBZ0I5M0IsT0FBT29TLE9BQU8sQ0FBQzBrQixZQUFZO29CQUMzQ2lCLFFBQVExNEIsTUFBTTJHLFFBQVEsQ0FBQyxXQUFXM0csTUFBTTJHLFFBQVEsQ0FBQztnQkFDbkQ7WUFDRjtRQUVGLEVBQUUsT0FBT3RELE9BQU87WUFDZCxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQ1g7b0JBQ0E7b0JBQ0E7aUJBQ0Q7WUFDSDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWNtMkIsa0JBQ1oxMkIsTUFBeUIsRUFDekJSLE1BQWMsRUFDZHVuQixRQUFnQixFQUNoQnplLGNBQXNCLEVBQ3RCeEksS0FBYSxFQUNhO1FBQzFCLElBQUk7WUFDRixNQUFNMjRCLGFBQWEsSUFBSSxDQUFDQywwQkFBMEIsQ0FBQzU0QjtZQUNuRCxNQUFNK21CLFNBQVMvbUIsTUFBTTJHLFFBQVEsQ0FBQyxTQUFTLFFBQVEzRyxNQUFNMkcsUUFBUSxDQUFDLFdBQVcsVUFBVTtZQUVuRixpREFBaUQ7WUFDakQsT0FBTztnQkFDTHJHLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQzs7O1FBR1YsRUFBRW80QixXQUFXO1VBQ1gsRUFBRTVSLE9BQU9qWCxXQUFXLEdBQUc7Z0JBQ2pCLEVBQUV0SCxlQUFlOzs7Ozs7Ozs7Ozs7K0NBWWMsQ0FBQztnQkFDeEM5RSxNQUFNO29CQUNKaTFCO29CQUNBNVI7b0JBQ0F2ZTtvQkFDQXhDLFFBQVE7Z0JBQ1Y7Z0JBQ0F2RixhQUFhO29CQUNYO29CQUNBO29CQUNBO2lCQUNEO1lBQ0g7UUFFRixFQUFFLE9BQU80QyxPQUFPO1lBQ2QsT0FBTztnQkFDTC9DLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0lBRUEscUNBQXFDO0lBQzdCdzJCLHVCQUF1Qi8yQixLQUFhLEVBQWlCO1FBQzNELE1BQU02NEIsVUFBVTc0QixNQUFNNHNCLEtBQUssQ0FBQztRQUM1QixPQUFPaU0sVUFBVXhFLE9BQU9DLFFBQVEsQ0FBQ3VFLE9BQU8sQ0FBQyxFQUFFLElBQUk7SUFDakQ7SUFFUTdCLHVCQUF1QjVrQixLQUFhLEVBQVM7UUFDbkQsTUFBTTBtQixpQkFBaUIsRUFBRTtRQUN6QixNQUFNQyxhQUFhO1lBQUM7WUFBUTtZQUFRO1lBQVc7WUFBUztZQUFTO1lBQVM7WUFBUztZQUFRO1lBQVE7U0FBTztRQUMxRyxNQUFNQyxZQUFZO1lBQUM7WUFBUztZQUFXO1lBQVk7WUFBUztZQUFTO1lBQVU7WUFBVTtZQUFTO1lBQWE7U0FBVztRQUMxSCxNQUFNQyxZQUFZO1lBQUM7WUFBWTtZQUFlO1lBQW1CO1lBQWdCO1NBQWM7UUFFL0YsSUFBSyxJQUFJL3dCLElBQUksR0FBR0EsSUFBSWtLLE9BQU9sSyxJQUFLO1lBQzlCLE1BQU0xQyxZQUFZdXpCLFVBQVUsQ0FBQzd3QixJQUFJNndCLFdBQVczekIsTUFBTSxDQUFDO1lBQ25ELE1BQU1NLFdBQVdzekIsU0FBUyxDQUFDOXdCLElBQUk4d0IsVUFBVTV6QixNQUFNLENBQUM7WUFDaEQsTUFBTVMsVUFBVW96QixTQUFTLENBQUMvd0IsSUFBSSt3QixVQUFVN3pCLE1BQU0sQ0FBQztZQUUvQzB6QixlQUFlcGxCLElBQUksQ0FBQztnQkFDbEJsTztnQkFDQUU7Z0JBQ0FsQixPQUFPLEdBQUdnQixVQUFVekMsV0FBVyxHQUFHLENBQUMsRUFBRTJDLFNBQVMzQyxXQUFXLEtBQUttRixFQUFFLENBQUMsRUFBRXJDLFFBQVE5QyxXQUFXLEdBQUcsSUFBSSxDQUFDO2dCQUM5RjBCLE9BQU8sQ0FBQyxJQUFJLEVBQUUyRCxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBSyxhQUFhO2dCQUN0RHpDO2dCQUNBcXpCLFVBQVU7Z0JBQ1ZDLE1BQU07b0JBQUM7b0JBQVk7aUJBQWU7Z0JBQ2xDQyxjQUFjO29CQUNacnpCLFFBQVE7b0JBQ1JzekIsWUFBWSxJQUFJejVCLE9BQU9zekIsV0FBVztnQkFDcEM7WUFDRjtRQUNGO1FBRUEsT0FBTzRGO0lBQ1Q7SUFFUWhCLHdCQUF3QjkzQixLQUFhLEVBQU87UUFDbEQsTUFBTTYzQixVQUFlLENBQUM7UUFFdEIsSUFBSTczQixNQUFNMkcsUUFBUSxDQUFDLGNBQWMzRyxNQUFNMkcsUUFBUSxDQUFDLFFBQVE7WUFDdERreEIsUUFBUXNCLElBQUksR0FBRztnQkFBQztnQkFBVzthQUFNO1FBQ25DO1FBRUEsSUFBSW41QixNQUFNMkcsUUFBUSxDQUFDLGlCQUFpQjtZQUNsQ2t4QixRQUFReUIsWUFBWSxHQUFHLElBQUkxNUIsS0FBS0EsS0FBS0MsR0FBRyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7UUFDbkU7UUFFQSxJQUFJRyxNQUFNMkcsUUFBUSxDQUFDLFdBQVc7WUFDNUJreEIsUUFBUXp3QixRQUFRLEdBQUc7UUFDckI7UUFFQSxPQUFPeXdCO0lBQ1Q7SUFFUUcsd0JBQXdCaDRCLEtBQWEsRUFBTztRQUNsRCxNQUFNKzNCLFVBQWUsQ0FBQztRQUV0QixJQUFJLzNCLE1BQU0yRyxRQUFRLENBQUMsWUFBWTtZQUM3QixNQUFNNHlCLFdBQVd2NUIsTUFBTTRzQixLQUFLLENBQUM7WUFDN0IsSUFBSTJNLFVBQVU7Z0JBQ1p4QixRQUFReUIsT0FBTyxHQUFHO29CQUFDRCxRQUFRLENBQUMsRUFBRTtpQkFBQztZQUNqQztRQUNGO1FBRUEsSUFBSXY1QixNQUFNMkcsUUFBUSxDQUFDLGVBQWU7WUFDaEMsTUFBTTh5QixjQUFjejVCLE1BQU00c0IsS0FBSyxDQUFDO1lBQ2hDLElBQUk2TSxhQUFhO2dCQUNmMUIsUUFBUTN3QixRQUFRLEdBQUdxeUIsV0FBVyxDQUFDLEVBQUUsQ0FBQzEyQixXQUFXLE9BQU87WUFDdEQ7UUFDRjtRQUVBLE9BQU9nMUI7SUFDVDtJQUVRSyx5QkFBeUJwNEIsS0FBYSxFQUFPO1FBQ25ELE1BQU1ELE9BQVksQ0FBQztRQUVuQixnRUFBZ0U7UUFDaEUsTUFBTTI1QixZQUFZMTVCLE1BQU00c0IsS0FBSyxDQUFDO1FBQzlCLElBQUk4TSxXQUFXO1lBQ2IzNUIsS0FBS2tQLFlBQVksR0FBR3lxQixTQUFTLENBQUMsRUFBRSxJQUFJQSxTQUFTLENBQUMsRUFBRTtRQUNsRDtRQUVBLE9BQU8zNUI7SUFDVDtJQUVRczRCLDJCQUEyQnI0QixLQUFhLEVBQU87UUFDckQsSUFBSUEsTUFBTTJHLFFBQVEsQ0FBQyxVQUFVM0csTUFBTTJHLFFBQVEsQ0FBQyxhQUFhO1lBQ3ZELE9BQU87Z0JBQUVtRSxNQUFNO1lBQU07UUFDdkI7UUFFQSxJQUFJOUssTUFBTTJHLFFBQVEsQ0FBQyxvQkFBb0IzRyxNQUFNMkcsUUFBUSxDQUFDLGlCQUFpQjtZQUNyRSxPQUFPO2dCQUNMbUUsTUFBTTtnQkFDTitzQixTQUFTO29CQUFFeUIsY0FBYyxJQUFJMTVCLEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO2dCQUFNO1lBQzNFO1FBQ0Y7UUFFQSxJQUFJRyxNQUFNMkcsUUFBUSxDQUFDLFVBQVUzRyxNQUFNMkcsUUFBUSxDQUFDLFlBQVk7WUFDdEQsT0FBTztnQkFDTG1FLE1BQU07Z0JBQ04rc0IsU0FBUztvQkFBRXNCLE1BQU07d0JBQUM7d0JBQU87cUJBQVU7Z0JBQUM7WUFDdEM7UUFDRjtRQUVBLE9BQU87WUFBRXJ1QixNQUFNO1FBQU07SUFDdkI7SUFFUTh0QiwyQkFBMkI1NEIsS0FBYSxFQUFVO1FBQ3hELElBQUlBLE1BQU0yRyxRQUFRLENBQUMsWUFBWSxPQUFPO1FBQ3RDLElBQUkzRyxNQUFNMkcsUUFBUSxDQUFDLGFBQWEsT0FBTztRQUN2QyxJQUFJM0csTUFBTTJHLFFBQVEsQ0FBQyxnQkFBZ0IzRyxNQUFNMkcsUUFBUSxDQUFDLFNBQVMsT0FBTztRQUNsRSxJQUFJM0csTUFBTTJHLFFBQVEsQ0FBQyxhQUFhLE9BQU87UUFFdkMsT0FBTyxZQUFZLFVBQVU7SUFDL0I7SUFFQTs7R0FFQyxHQUNELEFBQVE3RSxvQkFBb0I1QixNQUF5QixFQUFFRixLQUFhLEVBQVc7UUFDN0UsTUFBTTI1QixxQkFBcUI7WUFDekI7WUFBVztZQUFjO1lBQVM7WUFBWTtZQUFVO1lBQ3hEO1lBQW9CO1lBQVU7WUFBVTtZQUN4QztZQUFpQjtZQUF5QjtZQUMxQztZQUF3QjtZQUFxQjtZQUM3QztZQUFxQjtZQUFpQjtZQUFnQjtZQUN0RDtZQUFlO1lBQTRCO1lBQzNDO1lBQWtCO1lBQXlCO1lBQzNDO1lBQXFCO1lBQWlCO1NBQ3ZDO1FBRUQsTUFBTXRjLGFBQWFyZCxNQUFNK0MsV0FBVztRQUVwQyxPQUFPNDJCLG1CQUFtQjNjLElBQUksQ0FBQzhKLENBQUFBLFVBQVd6SixXQUFXMVcsUUFBUSxDQUFDbWdCLGFBQ3REekosV0FBVzFXLFFBQVEsQ0FBQyxZQUFhMFcsQ0FBQUEsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMFcsV0FBVzFXLFFBQVEsQ0FBQyxTQUFRLEtBQzlGMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFZMFcsQ0FBQUEsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMFcsV0FBVzFXLFFBQVEsQ0FBQyxhQUFZLEtBQ2pHMFcsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUNyRHpHLE9BQU9zQyxNQUFNLEtBQUssYUFBYTZhLFdBQVcxVyxRQUFRLENBQUM7SUFDN0Q7SUFFQTs7R0FFQyxHQUNELE1BQWM1RSxrQkFBa0I3QixNQUF5QixFQUFFUixNQUFjLEVBQUVNLEtBQWEsRUFBNEI7UUFDbEgsSUFBSTtZQUNGLG1DQUFtQztZQUNuQyxNQUFNdUcsT0FBTyxNQUFNNUIsZUFBTSxDQUFDNEIsSUFBSSxDQUFDQyxVQUFVLENBQUM7Z0JBQ3hDMUIsT0FBTztvQkFBRXFCLElBQUl6RztnQkFBTztnQkFDcEIrRyxRQUFRO29CQUFFQyxNQUFNO29CQUFNOEIsZ0JBQWdCO29CQUFNakUsTUFBTTtnQkFBSztZQUN6RDtZQUVBLElBQUksQ0FBQ2dDLE1BQU07Z0JBQ1QsT0FBTztvQkFDTGpHLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1Q4QyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQSxzQ0FBc0M7WUFDdEMsTUFBTXUyQixZQUFZO2dCQUFDO2dCQUFTO2dCQUFZO2FBQWMsQ0FBQ2p6QixRQUFRLENBQUNKLEtBQUtHLElBQUksSUFBSTtZQUM3RSxJQUFJLENBQUNrekIsV0FBVztnQkFDZCxPQUFPO29CQUNMdDVCLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1Q4QyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQXZELGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLCtEQUErRDtnQkFDekVDLE9BQU9BLE1BQU1DLFNBQVMsQ0FBQyxHQUFHO2dCQUMxQlA7Z0JBQ0F1bkIsVUFBVTFnQixLQUFLRyxJQUFJO2dCQUNuQjhCLGdCQUFnQmpDLEtBQUtpQyxjQUFjO1lBQ3JDO1lBRUEsMkJBQTJCO1lBQzNCLE1BQU1xeEIsbUJBQW1CLElBQUksQ0FBQ0Msc0JBQXNCLENBQUM5NUI7WUFFckQsSUFBSTY1QixpQkFBaUJyM0IsTUFBTSxLQUFLLGVBQWU7Z0JBQzdDLHFCQUFxQjtnQkFDckIsTUFBTXUzQixTQUFTLE1BQU1DLDhEQUE4QixDQUFDQyxlQUFlO2dCQUVuRSxPQUFPO29CQUNMMzVCLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQztrQkFDRixFQUFFdzVCLE9BQU9uUixPQUFPLENBQUM1aUIsTUFBTSxDQUFDOEosV0FBVyxHQUFHO2dCQUN4QyxFQUFFaXFCLE9BQU9uUixPQUFPLENBQUNFLEtBQUssQ0FBQ21KLE9BQU8sQ0FBQyxHQUFHO1VBQ3hDLEVBQUU3cEIsS0FBS0MsS0FBSyxDQUFDMHhCLE9BQU9uUixPQUFPLENBQUNzUixNQUFNLEdBQUcsTUFBTTtpQkFDcEMsRUFBRUgsT0FBT0ksWUFBWSxDQUFDLzBCLE1BQU0sQ0FBQztrQkFDNUIsRUFBRTIwQixPQUFPSyxVQUFVLENBQUNDLGNBQWMsQ0FBQ3IwQixNQUFNLENBQUM7WUFDaEQsRUFBRSt6QixPQUFPSyxVQUFVLENBQUNFLFFBQVEsQ0FBQ3QwQixNQUFNLENBQUM7Y0FDbEMsRUFBRSt6QixPQUFPSyxVQUFVLENBQUNHLEVBQUUsQ0FBQ3YwQixNQUFNLENBQUM7WUFDaEMsRUFBRSt6QixPQUFPSyxVQUFVLENBQUNJLFFBQVEsQ0FBQ3gwQixNQUFNLEVBQUU7b0JBQ3ZDdEMsTUFBTXEyQjtvQkFDTjN6QixTQUFTO3dCQUNQNUQsUUFBUTt3QkFDUjQzQixZQUFZbDFCLE9BQU9DLElBQUksQ0FBQzQwQixPQUFPSyxVQUFVLEVBQUVoMUIsTUFBTTt3QkFDakRvdEIsYUFBYXVILE9BQU92SCxXQUFXO29CQUNqQztnQkFDRjtZQUVGLE9BQU8sSUFBSXFILGlCQUFpQnIzQixNQUFNLEtBQUssZUFBZTtnQkFDcEQscUJBQXFCO2dCQUNyQixNQUFNaTRCLFNBQVMsTUFBTVQsOERBQThCLENBQUNVLGVBQWU7Z0JBRW5FLE1BQU1DLGVBQWVGLE9BQU9yMUIsTUFBTSxHQUFHLElBQ2pDcTFCLE9BQU85aEIsR0FBRyxDQUFDaWlCLENBQUFBLFFBQVMsQ0FBQyxFQUFFLEVBQUVBLE1BQU1DLFFBQVEsQ0FBQyxFQUFFLEVBQUVELE1BQU1yNkIsT0FBTyxDQUFDLEVBQUUsRUFBRXE2QixNQUFNRSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUVsMUIsSUFBSSxDQUFDLFFBQ3ZGO2dCQUVKLE9BQU87b0JBQ0x0RixTQUFTO29CQUNUQyxTQUFTLENBQUMsZUFBZSxFQUFFazZCLE9BQU9yMUIsTUFBTSxDQUFDO0FBQ25ELEVBQUV1MUIsY0FBYztvQkFDTmozQixNQUFNKzJCO29CQUNOcjBCLFNBQVM7d0JBQ1A1RCxRQUFRO3dCQUNSdTRCLFlBQVlOLE9BQU9yMUIsTUFBTTt3QkFDekI0MUIsbUJBQW1CUCxPQUFPN2EsTUFBTSxDQUFDLENBQUNDLEtBQUsrYTs0QkFDckMvYSxHQUFHLENBQUMrYSxNQUFNQyxRQUFRLENBQUMsR0FBRyxBQUFDaGIsQ0FBQUEsR0FBRyxDQUFDK2EsTUFBTUMsUUFBUSxDQUFDLElBQUksQ0FBQSxJQUFLOzRCQUNuRCxPQUFPaGI7d0JBQ1QsR0FBRyxDQUFDO29CQUNOO2dCQUNGO1lBRUYsT0FBTyxJQUFJZ2EsaUJBQWlCcjNCLE1BQU0sS0FBSyxpQkFBaUI7Z0JBQ3RELDJCQUEyQjtnQkFDM0IsTUFBTXNmLFdBQVcsTUFBTWtZLDhEQUE4QixDQUFDaUIscUJBQXFCO2dCQUUzRSxNQUFNQyxpQkFBaUJwWixTQUFTMWMsTUFBTSxHQUFHLElBQ3JDMGMsU0FBU25jLEtBQUssQ0FBQyxHQUFHLEdBQUdnVCxHQUFHLENBQUM4VixDQUFBQSxVQUFXLENBQUMsRUFBRSxFQUFFQSxRQUFRM2pCLElBQUksQ0FBQyxFQUFFLEVBQUUyakIsUUFBUWx1QixPQUFPLEVBQUUsRUFBRXFGLElBQUksQ0FBQyxRQUNsRjtnQkFFSixPQUFPO29CQUNMdEYsU0FBUztvQkFDVEMsU0FBUyxDQUFDLDRCQUE0QixFQUFFdWhCLFNBQVMxYyxNQUFNLENBQUM7QUFDbEUsRUFBRTgxQixnQkFBZ0I7b0JBQ1J4M0IsTUFBTW9lO29CQUNOMWIsU0FBUzt3QkFDUDVELFFBQVE7d0JBQ1IyNEIsY0FBY3JaLFNBQVMxYyxNQUFNO3dCQUM3QmcyQixlQUFldFosU0FBU2xDLE1BQU0sQ0FBQyxDQUFDQyxLQUFLNE87NEJBQ25DNU8sR0FBRyxDQUFDNE8sUUFBUTNqQixJQUFJLENBQUMsR0FBRyxBQUFDK1UsQ0FBQUEsR0FBRyxDQUFDNE8sUUFBUTNqQixJQUFJLENBQUMsSUFBSSxDQUFBLElBQUs7NEJBQy9DLE9BQU8rVTt3QkFDVCxHQUFHLENBQUM7b0JBQ047Z0JBQ0Y7WUFFRixPQUFPLElBQUlnYSxpQkFBaUJyM0IsTUFBTSxLQUFLLHVCQUF1QnEzQixpQkFBaUJ3QixPQUFPLEVBQUU7Z0JBQ3RGLG9CQUFvQjtnQkFDcEIsTUFBTUMsZUFBZSxNQUFNdEIsOERBQThCLENBQUN1QixnQkFBZ0IsQ0FDeEUxQixpQkFBaUJ3QixPQUFPLEVBQ3hCMzdCO2dCQUdGLElBQUk0N0IsY0FBYztvQkFDaEIsT0FBTzt3QkFDTGg3QixTQUFTO3dCQUNUQyxTQUFTLENBQUMsTUFBTSxFQUFFczVCLGlCQUFpQndCLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQzt3QkFDaEYzM0IsTUFBTTs0QkFBRTIzQixTQUFTeEIsaUJBQWlCd0IsT0FBTzs0QkFBRUcsZ0JBQWdCOTdCO3dCQUFPO3dCQUNsRTBHLFNBQVM7NEJBQUU1RCxRQUFRO3dCQUFxQjtvQkFDMUM7Z0JBQ0YsT0FBTztvQkFDTCxPQUFPO3dCQUNMbEMsU0FBUzt3QkFDVEMsU0FBUyxDQUFDLE1BQU0sRUFBRXM1QixpQkFBaUJ3QixPQUFPLENBQUMsbUNBQW1DLENBQUM7d0JBQy9FaDRCLE9BQU87b0JBQ1Q7Z0JBQ0Y7WUFFRixPQUFPLElBQUl3MkIsaUJBQWlCcjNCLE1BQU0sS0FBSyxtQkFBbUJxM0IsaUJBQWlCd0IsT0FBTyxFQUFFO2dCQUNsRixnQkFBZ0I7Z0JBQ2hCLE1BQU1JLFdBQVcsTUFBTXpCLDhEQUE4QixDQUFDMEIsWUFBWSxDQUFDN0IsaUJBQWlCd0IsT0FBTztnQkFFM0YsSUFBSUksVUFBVTtvQkFDWixPQUFPO3dCQUNMbjdCLFNBQVM7d0JBQ1RDLFNBQVMsQ0FBQyxNQUFNLEVBQUVzNUIsaUJBQWlCd0IsT0FBTyxDQUFDLGdDQUFnQyxDQUFDO3dCQUM1RTMzQixNQUFNOzRCQUFFMjNCLFNBQVN4QixpQkFBaUJ3QixPQUFPOzRCQUFFTSxZQUFZajhCO3dCQUFPO3dCQUM5RDBHLFNBQVM7NEJBQUU1RCxRQUFRO3dCQUFpQjtvQkFDdEM7Z0JBQ0YsT0FBTztvQkFDTCxPQUFPO3dCQUNMbEMsU0FBUzt3QkFDVEMsU0FBUyxDQUFDLE1BQU0sRUFBRXM1QixpQkFBaUJ3QixPQUFPLENBQUMsK0JBQStCLENBQUM7d0JBQzNFaDRCLE9BQU87b0JBQ1Q7Z0JBQ0Y7WUFFRixPQUFPLElBQUl3MkIsaUJBQWlCcjNCLE1BQU0sS0FBSyxjQUFjO2dCQUNuRCx1QkFBdUI7Z0JBQ3ZCLE1BQU1vNUIsUUFBUSxNQUFNNUIsOERBQThCLENBQUM2QixpQkFBaUI7Z0JBRXBFLE9BQU87b0JBQ0x2N0IsU0FBUztvQkFDVEMsU0FBUyxDQUFDO2VBQ0wsRUFBRXE3QixNQUFNMWIsVUFBVSxDQUFDO2NBQ3BCLEVBQUUwYixNQUFNRSxlQUFlLENBQUM7VUFDNUIsRUFBRUYsTUFBTUcsV0FBVyxDQUFDO2dCQUNkLEVBQUVILE1BQU0xYixVQUFVLEdBQUcsSUFBSSxBQUFDLENBQUEsQUFBQzBiLE1BQU1FLGVBQWUsR0FBR0YsTUFBTTFiLFVBQVUsR0FBSSxHQUFFLEVBQUcrUixPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztvQkFDbkd2dUIsTUFBTWs0QjtvQkFDTngxQixTQUFTO3dCQUFFNUQsUUFBUTtvQkFBa0I7Z0JBQ3ZDO1lBRUYsT0FBTyxJQUFJcTNCLGlCQUFpQnIzQixNQUFNLEtBQUssZUFBZTtnQkFDcEQsd0RBQXdEO2dCQUN4RCxPQUFPO29CQUNMbEMsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFDWDt3QkFDQTt3QkFDQTtxQkFDRDtnQkFDSDtZQUVGLE9BQU87Z0JBQ0wsT0FBTztvQkFDTEgsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFDWDt3QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTtxQkFDRDtnQkFDSDtZQUNGO1FBRUYsRUFBRSxPQUFPNEMsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLCtCQUErQjtnQkFDMUNBLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBR2lELE9BQU9IO2dCQUN2RHJELE9BQU9BLE1BQU1DLFNBQVMsQ0FBQyxHQUFHO2dCQUMxQlA7WUFDRjtZQUVBLE9BQU87Z0JBQ0xZLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkQ1QyxhQUFhO29CQUNYO29CQUNBO29CQUNBO2lCQUNEO1lBQ0g7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxBQUFRcTVCLHVCQUF1Qjk1QixLQUFhLEVBSTFDO1FBQ0EsTUFBTXFkLGFBQWFyZCxNQUFNK0MsV0FBVztRQUVwQyw2QkFBNkI7UUFDN0IsSUFBSXNhLFdBQVcxVyxRQUFRLENBQUMsZ0JBQWdCO1lBQ3RDLE1BQU1xMUIsZUFBZWg4QixNQUFNNHNCLEtBQUssQ0FBQztZQUNqQyxPQUFPO2dCQUNMcHFCLFFBQVE7Z0JBQ1I2NEIsU0FBU1csZUFBZUEsWUFBWSxDQUFDLEVBQUUsR0FBRzU0QjtZQUM1QztRQUNGO1FBRUEsSUFBSWlhLFdBQVcxVyxRQUFRLENBQUMsWUFBWTtZQUNsQyxNQUFNcTFCLGVBQWVoOEIsTUFBTTRzQixLQUFLLENBQUM7WUFDakMsT0FBTztnQkFDTHBxQixRQUFRO2dCQUNSNjRCLFNBQVNXLGVBQWVBLFlBQVksQ0FBQyxFQUFFLEdBQUc1NEI7WUFDNUM7UUFDRjtRQUVBLHdDQUF3QztRQUN4QyxJQUFJaWEsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXO1lBQ2xFLE9BQU87Z0JBQUVuRSxRQUFRO1lBQWM7UUFDakM7UUFFQSxJQUFJNmEsV0FBVzFXLFFBQVEsQ0FBQyxVQUFVO1lBQ2hDLE9BQU87Z0JBQUVuRSxRQUFRO1lBQWM7UUFDakM7UUFFQSxJQUFJNmEsV0FBVzFXLFFBQVEsQ0FBQyxZQUFZO1lBQ2xDLE9BQU87Z0JBQUVuRSxRQUFRO1lBQWdCO1FBQ25DO1FBRUEsSUFBSTZhLFdBQVcxVyxRQUFRLENBQUMsV0FBVzBXLFdBQVcxVyxRQUFRLENBQUMsV0FBVztZQUNoRSxPQUFPO2dCQUFFbkUsUUFBUTtZQUFhO1FBQ2hDO1FBRUEsSUFBSTZhLFdBQVcxVyxRQUFRLENBQUMsYUFBYTBXLFdBQVcxVyxRQUFRLENBQUMsU0FBUztZQUNoRSxPQUFPO2dCQUFFbkUsUUFBUTtZQUFjO1FBQ2pDO1FBRUEsMkJBQTJCO1FBQzNCLE9BQU87WUFBRUEsUUFBUTtRQUFjO0lBQ2pDO0lBRUE7O0dBRUMsR0FDRCxBQUFRUiw2QkFBNkI5QixNQUF5QixFQUFFRixLQUFhLEVBQVc7UUFDdEYsTUFBTWk4QixvQkFBb0I7WUFDeEI7WUFBWTtZQUFXO1lBQWM7WUFBYztZQUFXO1lBQzlEO1lBQW1CO1lBQWE7WUFBaUI7WUFDakQ7WUFBb0I7WUFBZ0I7WUFBbUI7WUFDdkQ7WUFBcUI7WUFBcUI7WUFBYztZQUN4RDtZQUFxQjtZQUFpQjtZQUFxQjtZQUMzRDtZQUFnQjtZQUFtQjtZQUFnQjtZQUNuRDtZQUFlO1lBQW9CO1lBQWlCO1lBQ3BEO1lBQWM7WUFBYTtZQUFjO1lBQWU7U0FDekQ7UUFFRCxNQUFNNWUsYUFBYXJkLE1BQU0rQyxXQUFXO1FBRXBDLE9BQU9rNUIsa0JBQWtCamYsSUFBSSxDQUFDOEosQ0FBQUEsVUFBV3pKLFdBQVcxVyxRQUFRLENBQUNtZ0IsYUFDckR6SixXQUFXMVcsUUFBUSxDQUFDLFdBQVkwVyxDQUFBQSxXQUFXMVcsUUFBUSxDQUFDLGVBQWUwVyxXQUFXMVcsUUFBUSxDQUFDLGFBQVksS0FDbkcwVyxXQUFXMVcsUUFBUSxDQUFDLGVBQWdCMFcsQ0FBQUEsV0FBVzFXLFFBQVEsQ0FBQyxZQUFZMFcsV0FBVzFXLFFBQVEsQ0FBQyxPQUFNLEtBQzlGekcsT0FBT3NDLE1BQU0sS0FBSyxZQUFZNmEsV0FBVzFXLFFBQVEsQ0FBQyxXQUNsRHpHLE9BQU9zQyxNQUFNLEtBQUssYUFBYTZhLFdBQVcxVyxRQUFRLENBQUM7SUFDN0Q7SUFFQTs7R0FFQyxHQUNELE1BQWMxRSwyQkFBMkIvQixNQUF5QixFQUFFUixNQUFjLEVBQUVNLEtBQWEsRUFBNEI7UUFDM0gsSUFBSTtZQUNGLG1DQUFtQztZQUNuQyxNQUFNdUcsT0FBTyxNQUFNNUIsZUFBTSxDQUFDNEIsSUFBSSxDQUFDQyxVQUFVLENBQUM7Z0JBQ3hDMUIsT0FBTztvQkFBRXFCLElBQUl6RztnQkFBTztnQkFDcEIrRyxRQUFRO29CQUFFQyxNQUFNO29CQUFNOEIsZ0JBQWdCO29CQUFNakUsTUFBTTtnQkFBSztZQUN6RDtZQUVBLElBQUksQ0FBQ2dDLE1BQU07Z0JBQ1QsT0FBTztvQkFDTGpHLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1Q4QyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQXZELGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLDJFQUEyRTtnQkFDckZDLE9BQU9BLE1BQU1DLFNBQVMsQ0FBQyxHQUFHO2dCQUMxQlA7Z0JBQ0F1bkIsVUFBVTFnQixLQUFLRyxJQUFJO2dCQUNuQjhCLGdCQUFnQmpDLEtBQUtpQyxjQUFjO1lBQ3JDO1lBRUEsNEJBQTRCO1lBQzVCLE1BQU0wekIsZ0JBQWdCLElBQUksQ0FBQ0MscUJBQXFCLENBQUNuOEI7WUFFakQsSUFBSWs4QixjQUFjMTVCLE1BQU0sS0FBSyxlQUFlO2dCQUMxQyw2QkFBNkI7Z0JBQzdCLElBQUksQ0FBQzA1QixjQUFjMUcsT0FBTyxJQUFJLENBQUMwRyxjQUFjM3ZCLFNBQVMsRUFBRTtvQkFDdEQsT0FBTzt3QkFDTGpNLFNBQVM7d0JBQ1RDLFNBQVM7d0JBQ1RFLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBQ0Y7Z0JBRUEsTUFBTTI3QixZQUFZLE1BQU1DLG9EQUF5QixDQUFDQyxxQkFBcUIsQ0FBQztvQkFDdEV6c0IsWUFBWXFzQixjQUFjcnNCLFVBQVU7b0JBQ3BDMHNCLFFBQVFMLGNBQWNLLE1BQU07b0JBQzVCenVCLFlBQVlvdUIsY0FBY3B1QixVQUFVO29CQUNwQzBuQixTQUFTMEcsY0FBYzFHLE9BQU87b0JBQzlCanBCLFdBQVcydkIsY0FBYzN2QixTQUFTO29CQUNsQ2l3QixhQUFhTixjQUFjTSxXQUFXO2dCQUN4QztnQkFFQSxPQUFPO29CQUNMbDhCLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQztjQUNOLEVBQUUyN0IsY0FBYzFHLE9BQU8sQ0FBQztjQUN4QixFQUFFMEcsY0FBYzN2QixTQUFTLENBQUM7Ozs7bUpBSTJHLENBQUM7b0JBQzFJN0ksTUFBTTt3QkFBRTA0Qjt3QkFBVzVHLFNBQVMwRyxjQUFjMUcsT0FBTzt3QkFBRWpwQixXQUFXMnZCLGNBQWMzdkIsU0FBUztvQkFBQztvQkFDdEZuRyxTQUFTO3dCQUNQNUQsUUFBUTt3QkFDUmk2QixxQkFBcUI7d0JBQ3JCQyxlQUFlO29CQUNqQjtnQkFDRjtZQUVGLE9BQU8sSUFBSVIsY0FBYzE1QixNQUFNLEtBQUssY0FBYztnQkFDaEQsK0JBQStCO2dCQUMvQixNQUFNbTZCLGNBQWMsTUFBTU4sb0RBQXlCLENBQUNPLGNBQWM7Z0JBRWxFLElBQUlELFlBQVl2M0IsTUFBTSxLQUFLLEdBQUc7b0JBQzVCLE9BQU87d0JBQ0w5RSxTQUFTO3dCQUNUQyxTQUFTO3dCQUNURSxhQUFhOzRCQUNYOzRCQUNBOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUNGO2dCQUVBLE1BQU1vOEIsY0FBY0YsWUFBWWhrQixHQUFHLENBQUN1YixDQUFBQSxPQUNsQyxDQUFDLEVBQUUsRUFBRUEsS0FBSzN2QixJQUFJLENBQUMsRUFBRSxFQUFFMnZCLEtBQUtsdUIsTUFBTSxDQUFDLElBQUksRUFBRWt1QixLQUFLcHBCLElBQUksQ0FBQyxhQUFhLEVBQUVvcEIsS0FBS3JqQixRQUFRLEVBQUUsRUFDN0VqTCxJQUFJLENBQUM7Z0JBRVAsT0FBTztvQkFDTHRGLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQyw2QkFBNkIsRUFBRW84QixZQUFZdjNCLE1BQU0sQ0FBQztBQUN0RSxFQUFFeTNCLFlBQVk7OzRIQUU4RyxDQUFDO29CQUNuSG41QixNQUFNaTVCO29CQUNOdjJCLFNBQVM7d0JBQ1A1RCxRQUFRO3dCQUNSczZCLFdBQVdILFlBQVl2M0IsTUFBTTt3QkFDN0IyM0IsaUJBQWlCSixZQUFZL2MsTUFBTSxDQUFDLENBQUNDLEtBQUtxVTs0QkFDeENyVSxHQUFHLENBQUNxVSxLQUFLbHVCLE1BQU0sQ0FBQyxHQUFHLEFBQUM2WixDQUFBQSxHQUFHLENBQUNxVSxLQUFLbHVCLE1BQU0sQ0FBQyxJQUFJLENBQUEsSUFBSzs0QkFDN0MsT0FBTzZaO3dCQUNULEdBQUcsQ0FBQztvQkFDTjtnQkFDRjtZQUVGLE9BQU8sSUFBSXFjLGNBQWMxNUIsTUFBTSxLQUFLLGdCQUFnQjtnQkFDbEQsa0NBQWtDO2dCQUNsQyxNQUFNdW1CLFVBQVUsTUFBTXNULG9EQUF5QixDQUFDVywyQkFBMkI7Z0JBRTNFLE9BQU87b0JBQ0wxOEIsU0FBUztvQkFDVEMsU0FBUyxDQUFDO2lCQUNILEVBQUV3b0IsUUFBUTRULFdBQVcsQ0FBQzttQkFDcEIsRUFBRTVULFFBQVFrVSxjQUFjLENBQUM7d0JBQ3BCLEVBQUVsVSxRQUFRbVUsa0JBQWtCLENBQUNqTCxPQUFPLENBQUMsR0FBRzt5QkFDdkMsRUFBRWxKLFFBQVFvVSxnQkFBZ0IsQ0FBQztpQkFDbkMsRUFBRXBVLFFBQVEvRixXQUFXLENBQUNpUCxPQUFPLENBQUMsR0FBRzs7Z0dBRThDLENBQUM7b0JBQ3ZGdnVCLE1BQU1xbEI7b0JBQ04zaUIsU0FBUzt3QkFBRTVELFFBQVE7b0JBQW9CO2dCQUN6QztZQUVGLE9BQU8sSUFBSTA1QixjQUFjMTVCLE1BQU0sS0FBSyx1QkFBdUI7Z0JBQ3pELG9EQUFvRDtnQkFDcEQsT0FBTztvQkFDTGxDLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7bUZBYytELENBQUM7b0JBQzFFRSxhQUFhO3dCQUNYO3dCQUNBO3dCQUNBO3dCQUNBO3FCQUNEO2dCQUNIO1lBRUYsT0FBTyxJQUFJeTdCLGNBQWMxNUIsTUFBTSxLQUFLLGdCQUFnQjA1QixjQUFjN1YsTUFBTSxFQUFFO2dCQUN4RSx3QkFBd0I7Z0JBQ3hCLE1BQU0rVyxTQUFTLE1BQU1mLG9EQUF5QixDQUFDZ0IsU0FBUyxDQUFDbkIsY0FBYzdWLE1BQU07Z0JBRTdFLElBQUkrVyxRQUFRO29CQUNWLE9BQU87d0JBQ0w5OEIsU0FBUzt3QkFDVEMsU0FBUyxDQUFDLG9CQUFvQixFQUFFMjdCLGNBQWM3VixNQUFNLENBQUMseURBQXlELENBQUM7d0JBQy9HM2lCLE1BQU07NEJBQUUyaUIsUUFBUTZWLGNBQWM3VixNQUFNOzRCQUFFN2pCLFFBQVE7d0JBQVM7d0JBQ3ZENEQsU0FBUzs0QkFBRTVELFFBQVE7d0JBQWM7b0JBQ25DO2dCQUNGLE9BQU87b0JBQ0wsT0FBTzt3QkFDTGxDLFNBQVM7d0JBQ1RDLFNBQVMsQ0FBQyxLQUFLLEVBQUUyN0IsY0FBYzdWLE1BQU0sQ0FBQyw4RUFBOEUsQ0FBQzt3QkFDckhoakIsT0FBTztvQkFDVDtnQkFDRjtZQUVGLE9BQU8sSUFBSTY0QixjQUFjMTVCLE1BQU0sS0FBSyxpQkFBaUIwNUIsY0FBYzdWLE1BQU0sRUFBRTtnQkFDekUseUJBQXlCO2dCQUN6QixNQUFNaVgsVUFBVSxNQUFNakIsb0RBQXlCLENBQUNrQixVQUFVLENBQUNyQixjQUFjN1YsTUFBTTtnQkFFL0UsSUFBSWlYLFNBQVM7b0JBQ1gsT0FBTzt3QkFDTGg5QixTQUFTO3dCQUNUQyxTQUFTLENBQUMsb0JBQW9CLEVBQUUyN0IsY0FBYzdWLE1BQU0sQ0FBQywwRUFBMEUsQ0FBQzt3QkFDaEkzaUIsTUFBTTs0QkFBRTJpQixRQUFRNlYsY0FBYzdWLE1BQU07NEJBQUU3akIsUUFBUTt3QkFBVTt3QkFDeEQ0RCxTQUFTOzRCQUFFNUQsUUFBUTt3QkFBZTtvQkFDcEM7Z0JBQ0YsT0FBTztvQkFDTCxPQUFPO3dCQUNMbEMsU0FBUzt3QkFDVEMsU0FBUyxDQUFDLEtBQUssRUFBRTI3QixjQUFjN1YsTUFBTSxDQUFDLHFFQUFxRSxDQUFDO3dCQUM1R2hqQixPQUFPO29CQUNUO2dCQUNGO1lBRUYsT0FBTztnQkFDTCxPQUFPO29CQUNML0MsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFDWDt3QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTtxQkFDRDtnQkFDSDtZQUNGO1FBRUYsRUFBRSxPQUFPNEMsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLDJDQUEyQztnQkFDdERBLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBR2lELE9BQU9IO2dCQUN2RHJELE9BQU9BLE1BQU1DLFNBQVMsQ0FBQyxHQUFHO2dCQUMxQlA7WUFDRjtZQUVBLE9BQU87Z0JBQ0xZLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkQ1QyxhQUFhO29CQUNYO29CQUNBO29CQUNBO2lCQUNEO1lBQ0g7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxBQUFRMDdCLHNCQUFzQm44QixLQUFhLEVBU3pDO1FBQ0EsTUFBTXFkLGFBQWFyZCxNQUFNK0MsV0FBVztRQUVwQyw2QkFBNkI7UUFDN0IsTUFBTXk2QixjQUFjeDlCLE1BQU00c0IsS0FBSyxDQUFDO1FBQ2hDLE1BQU12RyxTQUFTbVgsY0FBY0EsV0FBVyxDQUFDLEVBQUUsR0FBR3A2QjtRQUU5QyxvQ0FBb0M7UUFDcEMsSUFBSWlhLFdBQVcxVyxRQUFRLENBQUMsWUFBWTBmLFFBQVE7WUFDMUMsT0FBTztnQkFBRTdqQixRQUFRO2dCQUFjNmpCO1lBQU87UUFDeEM7UUFFQSxJQUFJaEosV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMGYsUUFBUTtZQUMzQyxPQUFPO2dCQUFFN2pCLFFBQVE7Z0JBQWU2akI7WUFBTztRQUN6QztRQUVBLElBQUloSixXQUFXMVcsUUFBUSxDQUFDLFdBQVcwZixRQUFRO1lBQ3pDLE9BQU87Z0JBQUU3akIsUUFBUTtnQkFBYTZqQjtZQUFPO1FBQ3ZDO1FBRUEsNkJBQTZCO1FBQzdCLElBQUloSixXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLFlBQVkwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVU7WUFDakcsb0JBQW9CO1lBQ3BCLElBQUk2dUIsVUFBVTtZQUNkLElBQUluWSxXQUFXMVcsUUFBUSxDQUFDLFVBQVU2dUIsVUFBVTtpQkFDdkMsSUFBSW5ZLFdBQVcxVyxRQUFRLENBQUMsU0FBUzZ1QixVQUFVO2lCQUMzQyxJQUFJblksV0FBVzFXLFFBQVEsQ0FBQyxjQUFjMFcsV0FBVzFXLFFBQVEsQ0FBQyxTQUFTNnVCLFVBQVU7aUJBQzdFLElBQUluWSxXQUFXMVcsUUFBUSxDQUFDLFFBQVE2dUIsVUFBVTtpQkFDMUMsSUFBSW5ZLFdBQVcxVyxRQUFRLENBQUMsYUFBYTZ1QixVQUFVO1lBRXBELHNCQUFzQjtZQUN0QixJQUFJanBCLFlBQVk7WUFDaEIsSUFBSThRLFdBQVcxVyxRQUFRLENBQUMsaUJBQWlCMFcsV0FBVzFXLFFBQVEsQ0FBQyxZQUFZO2dCQUN2RTRGLFlBQVk7WUFDZCxPQUFPLElBQUk4USxXQUFXMVcsUUFBUSxDQUFDLFdBQVcwVyxXQUFXMVcsUUFBUSxDQUFDLFlBQVk7Z0JBQ3hFNEYsWUFBWTtZQUNkLE9BQU8sSUFBSThRLFdBQVcxVyxRQUFRLENBQUMsVUFBVTtnQkFDdkM0RixZQUFZO1lBQ2QsT0FBTyxJQUFJOFEsV0FBVzFXLFFBQVEsQ0FBQyxlQUFlO2dCQUM1QzRGLFlBQVk7WUFDZCxPQUFPLElBQUk4USxXQUFXMVcsUUFBUSxDQUFDLGNBQWMwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVU7Z0JBQ3pFNEYsWUFBWTtZQUNkLE9BQU8sSUFBSThRLFdBQVcxVyxRQUFRLENBQUMsWUFBWTtnQkFDekM0RixZQUFZO1lBQ2Q7WUFFQSxPQUFPO2dCQUNML0osUUFBUTtnQkFDUmd6QjtnQkFDQWpwQjtnQkFDQWl3QixhQUFhO29CQUNYaUIsa0JBQWtCO29CQUNsQkMsZUFBZTtnQkFDakI7WUFDRjtRQUNGO1FBRUEsSUFBSXJnQixXQUFXMVcsUUFBUSxDQUFDLFdBQVcwVyxXQUFXMVcsUUFBUSxDQUFDLFdBQVcwVyxXQUFXMVcsUUFBUSxDQUFDLFdBQVc7WUFDL0YsT0FBTztnQkFBRW5FLFFBQVE7WUFBYTtRQUNoQztRQUVBLElBQUk2YSxXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLGtCQUFrQjBXLFdBQVcxVyxRQUFRLENBQUMsU0FBUztZQUN0RyxPQUFPO2dCQUFFbkUsUUFBUTtZQUFlO1FBQ2xDO1FBRUEsSUFBSTZhLFdBQVcxVyxRQUFRLENBQUMsY0FBYzBXLFdBQVcxVyxRQUFRLENBQUMsa0JBQWtCMFcsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjO1lBQzVHLE9BQU87Z0JBQUVuRSxRQUFRO1lBQXNCO1FBQ3pDO1FBRUEsdUNBQXVDO1FBQ3ZDLE9BQU87WUFBRUEsUUFBUTtRQUFlO0lBQ2xDO0lBRUE7O0dBRUMsR0FDRCxBQUFRTiw4QkFBOEJoQyxNQUF5QixFQUFFRixLQUFhLEVBQVc7UUFDdkYsTUFBTTI5QixxQkFBcUI7WUFDekI7WUFBYztZQUFjO1lBQWM7WUFBUztZQUFTO1lBQzVEO1lBQVE7WUFBUTtZQUFTO1lBQW1CO1lBQVc7WUFDdkQ7WUFBb0I7WUFBcUI7WUFBd0I7WUFDakU7WUFBd0I7WUFBeUI7WUFDakQ7WUFBeUI7WUFBb0I7WUFDN0M7WUFBeUI7WUFBb0I7WUFDN0M7WUFBd0I7WUFBTztZQUFPO1lBQ3RDO1lBQXNCO1lBQTJCO1lBQ2pEO1lBQW9CO1lBQThCO1lBQ2xEO1lBQW1CO1lBQXdCO1NBQzVDO1FBRUQsTUFBTXRnQixhQUFhcmQsTUFBTStDLFdBQVc7UUFFcEMsT0FBTzQ2QixtQkFBbUIzZ0IsSUFBSSxDQUFDOEosQ0FBQUEsVUFBV3pKLFdBQVcxVyxRQUFRLENBQUNtZ0IsYUFDdER6SixXQUFXMVcsUUFBUSxDQUFDLFlBQWEwVyxDQUFBQSxXQUFXMVcsUUFBUSxDQUFDLGlCQUFpQjBXLFdBQVcxVyxRQUFRLENBQUMsYUFBWSxLQUN0RzBXLFdBQVcxVyxRQUFRLENBQUMsV0FBWTBXLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsaUJBQWlCMFcsV0FBVzFXLFFBQVEsQ0FBQyxhQUFZLEtBQ3JHekcsT0FBT3NDLE1BQU0sS0FBSyxhQUFhNmEsV0FBVzFXLFFBQVEsQ0FBQyxpQkFDbkR6RyxPQUFPc0MsTUFBTSxLQUFLLFdBQVc2YSxXQUFXMVcsUUFBUSxDQUFDO0lBQzNEO0lBRUE7O0dBRUMsR0FDRCxNQUFjeEUsNEJBQTRCakMsTUFBeUIsRUFBRVIsTUFBYyxFQUFFTSxLQUFhLEVBQTRCO1FBQzVILElBQUk7WUFDRixtQ0FBbUM7WUFDbkMsTUFBTXVHLE9BQU8sTUFBTTVCLGVBQU0sQ0FBQzRCLElBQUksQ0FBQ0MsVUFBVSxDQUFDO2dCQUN4QzFCLE9BQU87b0JBQUVxQixJQUFJekc7Z0JBQU87Z0JBQ3BCK0csUUFBUTtvQkFBRUMsTUFBTTtvQkFBTThCLGdCQUFnQjtvQkFBTWpFLE1BQU07Z0JBQUs7WUFDekQ7WUFFQSxJQUFJLENBQUNnQyxNQUFNO2dCQUNULE9BQU87b0JBQ0xqRyxTQUFTO29CQUNUQyxTQUFTO29CQUNUOEMsT0FBTztnQkFDVDtZQUNGO1lBRUEsc0NBQXNDO1lBQ3RDLE1BQU11MkIsWUFBWTtnQkFBQztnQkFBUztnQkFBWTthQUFjLENBQUNqekIsUUFBUSxDQUFDSixLQUFLRyxJQUFJLElBQUk7WUFDN0UsSUFBSSxDQUFDa3pCLFdBQVc7Z0JBQ2QsT0FBTztvQkFDTHQ1QixTQUFTO29CQUNUQyxTQUFTO29CQUNUOEMsT0FBTztnQkFDVDtZQUNGO1lBRUF2RCxjQUFNLENBQUNDLElBQUksQ0FBQywwRUFBMEU7Z0JBQ3BGQyxPQUFPQSxNQUFNQyxTQUFTLENBQUMsR0FBRztnQkFDMUJQO2dCQUNBdW5CLFVBQVUxZ0IsS0FBS0csSUFBSTtnQkFDbkI4QixnQkFBZ0JqQyxLQUFLaUMsY0FBYztZQUNyQztZQUVBLDJCQUEyQjtZQUMzQixNQUFNbzFCLG1CQUFtQixJQUFJLENBQUNDLHNCQUFzQixDQUFDNzlCO1lBRXJELElBQUk0OUIsaUJBQWlCcDdCLE1BQU0sS0FBSyxjQUFjO2dCQUM1Qyx3QkFBd0I7Z0JBQ3hCLE1BQU1zbUIsUUFBUSxNQUFNZ1Ysd0RBQTJCLENBQUNDLGtCQUFrQjtnQkFDbEUsTUFBTS8zQixTQUFTOGlCLFNBQVMsS0FBSyxjQUFjQSxTQUFTLEtBQUssd0JBQXdCO2dCQUVqRixPQUFPO29CQUNMeG9CLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQztrQkFDRixFQUFFdW9CLE1BQU1tSixPQUFPLENBQUMsR0FBRztVQUMzQixFQUFFanNCLE9BQU87OztlQUdKLEVBQUU4aUIsU0FBUyxLQUFLLFFBQVFBLFNBQVMsS0FBSyxXQUFXLE9BQU87O0FBRXZFLEVBQUVBLFFBQVEsS0FBSyxnRUFBZ0UsNENBQTRDO29CQUNqSHBsQixNQUFNO3dCQUFFb2xCO3dCQUFPOWlCO29CQUFPO29CQUN0QkksU0FBUzt3QkFDUDVELFFBQVE7d0JBQ1IybUIsV0FBV0wsU0FBUyxLQUFLLFFBQVFBLFNBQVMsS0FBSyxXQUFXO29CQUM1RDtnQkFDRjtZQUVGLE9BQU8sSUFBSThVLGlCQUFpQnA3QixNQUFNLEtBQUssbUJBQW1CO2dCQUN4RCxvQ0FBb0M7Z0JBQ3BDLE1BQU13N0IsYUFBYSxNQUFNRix3REFBMkIsQ0FBQ0csbUJBQW1CO2dCQUV4RSxJQUFJRCxXQUFXNTRCLE1BQU0sS0FBSyxHQUFHO29CQUMzQixPQUFPO3dCQUNMOUUsU0FBUzt3QkFDVEMsU0FBUzt3QkFDVG1ELE1BQU1zNkI7d0JBQ041M0IsU0FBUzs0QkFBRTVELFFBQVE7NEJBQXdCMDdCLGdCQUFnQjt3QkFBRTtvQkFDL0Q7Z0JBQ0Y7Z0JBRUEsTUFBTUMsbUJBQW1CSCxXQUFXcjRCLEtBQUssQ0FBQyxHQUFHLEdBQUdnVCxHQUFHLENBQUN5bEIsQ0FBQUEsWUFDbEQsQ0FBQyxFQUFFLEVBQUVBLFVBQVV2RCxRQUFRLENBQUMvcUIsV0FBVyxHQUFHLEVBQUUsRUFBRXN1QixVQUFVenlCLFdBQVcsQ0FBQyxFQUFFLEVBQUV5eUIsVUFBVUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUM1Rno0QixJQUFJLENBQUM7Z0JBRVAsTUFBTTA0QixnQkFBZ0JOLFdBQVdoNUIsTUFBTSxDQUFDdTVCLENBQUFBLElBQUtBLEVBQUUxRCxRQUFRLEtBQUssWUFBWXoxQixNQUFNO2dCQUU5RSxPQUFPO29CQUNMOUUsU0FBUztvQkFDVEMsU0FBUyxDQUFDLGlDQUFpQyxFQUFFeTlCLFdBQVc1NEIsTUFBTSxDQUFDO0FBQ3pFLEVBQUUrNEIsbUJBQW1CSCxXQUFXNTRCLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFNDRCLFdBQVc1NEIsTUFBTSxHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUcsR0FBRzs7d0JBRXBFLEVBQUVrNUIsY0FBYzs7MkJBRWIsRUFBRU4sV0FBV2g1QixNQUFNLENBQUN1NUIsQ0FBQUEsSUFBS0EsRUFBRUMsV0FBVyxDQUFDeGhCLElBQUksQ0FBQ3BFLENBQUFBLElBQUtBLEVBQUU2bEIsY0FBYyxHQUFHcjVCLE1BQU0sQ0FBQzs7QUFFdEcsRUFBRWs1QixnQkFBZ0IsSUFBSSxxREFBcUQsMERBQTBEO29CQUMzSDU2QixNQUFNczZCO29CQUNONTNCLFNBQVM7d0JBQ1A1RCxRQUFRO3dCQUNSMDdCLGdCQUFnQkYsV0FBVzU0QixNQUFNO3dCQUNqQ2s1Qjt3QkFDQUksc0JBQXNCVixXQUFXaDVCLE1BQU0sQ0FBQ3U1QixDQUFBQSxJQUFLQSxFQUFFQyxXQUFXLENBQUN4aEIsSUFBSSxDQUFDcEUsQ0FBQUEsSUFBS0EsRUFBRTZsQixjQUFjLEdBQUdyNUIsTUFBTTtvQkFDaEc7Z0JBQ0Y7WUFFRixPQUFPLElBQUl3NEIsaUJBQWlCcDdCLE1BQU0sS0FBSyxtQkFBbUI7Z0JBQ3hELDZCQUE2QjtnQkFDN0IsTUFBTW04QixhQUFhLE1BQU1iLHdEQUEyQixDQUFDYyx1QkFBdUI7Z0JBQzVFLE1BQU1DLG9CQUFvQkYsV0FBVzM1QixNQUFNLENBQUM4NUIsQ0FBQUEsSUFDMUM7d0JBQUM7d0JBQVc7d0JBQWdCO3dCQUFTO3FCQUFRLENBQUNuNEIsUUFBUSxDQUFDbTRCLEVBQUVoMkIsT0FBTztnQkFHbEUsTUFBTWkyQixtQkFBbUJGLGtCQUFrQmxtQixHQUFHLENBQUNxbUIsQ0FBQUEsWUFDN0MsQ0FBQyxFQUFFLEVBQUVBLFVBQVV6NkIsSUFBSSxDQUFDLEVBQUUsRUFBRXk2QixVQUFVbDJCLE9BQU8sQ0FBQyxJQUFJLEVBQUVrMkIsVUFBVWwwQixJQUFJLENBQUMsU0FBUyxFQUFFazBCLFVBQVU3VixTQUFTLEVBQUUsRUFDL0Z2akIsSUFBSSxDQUFDO2dCQUVQLE9BQU87b0JBQ0x0RixTQUFTO29CQUNUQyxTQUFTLENBQUMsa0NBQWtDLEVBQUVzK0Isa0JBQWtCejVCLE1BQU0sQ0FBQztBQUNqRixFQUFFMjVCLGlCQUFpQjs7Ozs7Ozs7OzswREFVdUMsQ0FBQztvQkFDakRyN0IsTUFBTWk3QjtvQkFDTnY0QixTQUFTO3dCQUNQNUQsUUFBUTt3QkFDUnk4QixpQkFBaUJOLFdBQVd2NUIsTUFBTTt3QkFDbEN5NUIsbUJBQW1CQSxrQkFBa0J6NUIsTUFBTTt3QkFDM0M4NUIsbUJBQW1CUCxXQUFXMzVCLE1BQU0sQ0FBQzg1QixDQUFBQSxJQUFLQSxFQUFFSyxPQUFPLEVBQUUvNUIsTUFBTTtvQkFDN0Q7Z0JBQ0Y7WUFFRixPQUFPLElBQUl3NEIsaUJBQWlCcDdCLE1BQU0sS0FBSyxtQkFBbUI7Z0JBQ3hELDZCQUE2QjtnQkFDN0IsTUFBTTQ4QixTQUFTLE1BQU10Qix3REFBMkIsQ0FBQ3VCLHdCQUF3QixDQUFDekIsaUJBQWlCUyxXQUFXO2dCQUV0RyxPQUFPO29CQUNMLzlCLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQztrQkFDRixFQUFFNitCLE9BQU9FLFlBQVksQ0FBQ3JOLE9BQU8sQ0FBQyxHQUFHO2FBQ3RDLEVBQUVtTixPQUFPbjFCLFVBQVUsQ0FBQ3MxQixTQUFTLENBQUM7a0JBQ3pCLEVBQUVILE9BQU9uMUIsVUFBVSxDQUFDdTFCLFlBQVksQ0FBQztXQUN4QyxFQUFFSixPQUFPemhCLE1BQU0sQ0FBQzhoQixLQUFLLENBQUNDLFlBQVksR0FBRyxHQUFHLEVBQUVOLE9BQU96aEIsTUFBTSxDQUFDZ2lCLEdBQUcsQ0FBQ0QsWUFBWSxHQUFHO3dCQUM5RCxFQUFFTixPQUFPcEIsVUFBVSxDQUFDNTRCLE1BQU0sQ0FBQztvQkFDL0IsRUFBRWc2QixPQUFPL1YsZUFBZSxDQUFDamtCLE1BQU0sQ0FBQzs7QUFFcEQsRUFBRWc2QixPQUFPL1YsZUFBZSxDQUFDamtCLE1BQU0sR0FBRyxJQUFJLGlFQUFpRSxrQ0FBa0M7b0JBQy9IMUIsTUFBTTA3QjtvQkFDTmg1QixTQUFTO3dCQUNQNUQsUUFBUTt3QkFDUm85QixZQUFZUixPQUFPUSxVQUFVO3dCQUM3Qk4sY0FBY0YsT0FBT0UsWUFBWTtvQkFDbkM7Z0JBQ0Y7WUFFRixPQUFPLElBQUkxQixpQkFBaUJwN0IsTUFBTSxLQUFLLHNCQUFzQjtnQkFDM0QsZ0NBQWdDO2dCQUNoQyxPQUFPO29CQUNMbEMsU0FBUztvQkFDVEMsU0FBUyxDQUFDO1VBQ1YsRUFBRXE5QixpQkFBaUJTLFdBQVcsSUFBSSx5QkFBeUI7Ozs7Ozs7Ozs7O2lEQVdwQixDQUFDO29CQUN4QzM2QixNQUFNO3dCQUNKbThCLGNBQWMsQ0FBQyxXQUFXLEVBQUVqZ0MsS0FBS0MsR0FBRyxJQUFJO3dCQUN4Q3V6QixPQUFPd0ssaUJBQWlCUyxXQUFXLElBQUk7d0JBQ3ZDbkkscUJBQXFCO29CQUN2QjtvQkFDQTl2QixTQUFTO3dCQUNQNUQsUUFBUTt3QkFDUnM5QixlQUFlO3dCQUNmQyxjQUFjO29CQUNoQjtnQkFDRjtZQUVGLE9BQU8sSUFBSW5DLGlCQUFpQnA3QixNQUFNLEtBQUssbUJBQW1CO2dCQUN4RCw2Q0FBNkM7Z0JBQzdDLE1BQU1tOEIsYUFBYSxNQUFNYix3REFBMkIsQ0FBQ2MsdUJBQXVCO2dCQUM1RSxNQUFNQyxvQkFBb0JGLFdBQVczNUIsTUFBTSxDQUFDODVCLENBQUFBLElBQzFDO3dCQUFDO3dCQUFXO3dCQUFnQjt3QkFBUztxQkFBUSxDQUFDbjRCLFFBQVEsQ0FBQ200QixFQUFFaDJCLE9BQU87Z0JBR2xFLE9BQU87b0JBQ0x4SSxTQUFTO29CQUNUQyxTQUFTLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7bUNBeUJlLENBQUM7b0JBQzFCbUQsTUFBTTt3QkFBRW03Qjt3QkFBbUJtQixjQUFjbkIsa0JBQWtCejVCLE1BQU07b0JBQUM7b0JBQ2xFZ0IsU0FBUzt3QkFDUDVELFFBQVE7d0JBQ1J5OUIsZUFBZXBCLGtCQUFrQno1QixNQUFNO3dCQUN2Qzg2QixrQkFBa0JyQixrQkFBa0JqZixNQUFNLENBQUMsQ0FBQ0ssS0FBSzZlLElBQU03ZSxNQUFNNmUsRUFBRXFCLFdBQVcsQ0FBQy82QixNQUFNLEVBQUU7b0JBQ3JGO2dCQUNGO1lBRUYsT0FBTztnQkFDTCxPQUFPO29CQUNMOUUsU0FBUztvQkFDVEMsU0FBUztvQkFDVEUsYUFBYTt3QkFDWDt3QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTt3QkFDQTtxQkFDRDtnQkFDSDtZQUNGO1FBRUYsRUFBRSxPQUFPNEMsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLDBDQUEwQztnQkFDckRBLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBR2lELE9BQU9IO2dCQUN2RHJELE9BQU9BLE1BQU1DLFNBQVMsQ0FBQyxHQUFHO2dCQUMxQlA7WUFDRjtZQUVBLE9BQU87Z0JBQ0xZLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1Q4QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtnQkFDdkQ1QyxhQUFhO29CQUNYO29CQUNBO29CQUNBO2lCQUNEO1lBQ0g7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxBQUFRMkIsMkJBQTJCbEMsTUFBeUIsRUFBRUYsS0FBYSxFQUFXO1FBQ3BGLE1BQU1vZ0Msa0JBQWtCO1lBQ3RCO1lBQVc7WUFBb0I7WUFBa0I7WUFBaUI7WUFDbEU7WUFBaUI7WUFBZTtZQUFvQjtZQUFrQjtZQUN0RTtZQUFXO1lBQWdCO1lBQWU7WUFBa0I7WUFDNUQ7WUFBb0I7WUFBWTtZQUFvQjtZQUFrQjtZQUN0RTtZQUFlO1lBQWM7WUFBd0I7WUFDckQ7WUFBb0I7WUFBc0I7WUFDMUM7WUFBc0I7WUFBcUI7WUFBc0I7WUFDakU7WUFBd0I7WUFBdUI7WUFDL0M7WUFBdUI7WUFBbUI7WUFBcUI7WUFDL0Q7WUFBbUI7WUFBd0I7WUFBaUI7WUFDNUQ7WUFBZTtZQUFnQjtZQUFrQjtZQUNqRDtZQUFhO1lBQWM7WUFBZ0I7WUFDM0M7WUFBaUI7WUFBa0I7WUFBb0I7WUFDdkQ7WUFBbUI7WUFBaUI7WUFBdUI7U0FDNUQ7UUFFRCxNQUFNL2lCLGFBQWFyZCxNQUFNK0MsV0FBVztRQUVwQyxPQUFPcTlCLGdCQUFnQnBqQixJQUFJLENBQUM4SixDQUFBQSxVQUFXekosV0FBVzFXLFFBQVEsQ0FBQ21nQixhQUNuRHpKLFdBQVcxVyxRQUFRLENBQUMsWUFBYTBXLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsWUFBWTBXLFdBQVcxVyxRQUFRLENBQUMsVUFBVTBXLFdBQVcxVyxRQUFRLENBQUMsVUFBUyxLQUM1SDBXLFdBQVcxVyxRQUFRLENBQUMsYUFBYzBXLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsY0FBYzBXLFdBQVcxVyxRQUFRLENBQUMsV0FBVzBXLFdBQVcxVyxRQUFRLENBQUMsV0FBVSxLQUNqSTBXLFdBQVcxVyxRQUFRLENBQUMsZUFBZ0IwVyxDQUFBQSxXQUFXMVcsUUFBUSxDQUFDLGNBQWMwVyxXQUFXMVcsUUFBUSxDQUFDLFdBQVcwVyxXQUFXMVcsUUFBUSxDQUFDLFlBQVkwVyxXQUFXMVcsUUFBUSxDQUFDLE1BQUssS0FDOUp6RyxPQUFPc0MsTUFBTSxLQUFLLFlBQWE2YSxDQUFBQSxXQUFXMVcsUUFBUSxDQUFDLGNBQWMwVyxXQUFXMVcsUUFBUSxDQUFDLGVBQWUwVyxXQUFXMVcsUUFBUSxDQUFDLE9BQU0sS0FDOUh6RyxPQUFPc0MsTUFBTSxLQUFLLGNBQWU2YSxDQUFBQSxXQUFXMVcsUUFBUSxDQUFDLGNBQWMwVyxXQUFXMVcsUUFBUSxDQUFDLFlBQVkwVyxXQUFXMVcsUUFBUSxDQUFDLE1BQUs7SUFDdEk7SUFFQTs7R0FFQyxHQUNELE1BQWN0RSx5QkFBeUJuQyxNQUF5QixFQUFFUixNQUFjLEVBQUVNLEtBQWEsRUFBNEI7UUFDekgsSUFBSTtZQUNGLG1DQUFtQztZQUNuQyxNQUFNdUcsT0FBTyxNQUFNNUIsZUFBTSxDQUFDNEIsSUFBSSxDQUFDQyxVQUFVLENBQUM7Z0JBQ3hDMUIsT0FBTztvQkFBRXFCLElBQUl6RztnQkFBTztnQkFDcEIrRyxRQUFRO29CQUFFQyxNQUFNO29CQUFNOEIsZ0JBQWdCO29CQUFNakUsTUFBTTtnQkFBSztZQUN6RDtZQUVBLElBQUksQ0FBQ2dDLE1BQU07Z0JBQ1QsT0FBTztvQkFDTGpHLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1Q4QyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQSx1Q0FBdUM7WUFDdkMsTUFBTWc5QixnQkFBZ0IsSUFBSSxDQUFDQyw2QkFBNkIsQ0FBQ3RnQztZQUV6RCxJQUFJcWdDLGNBQWM3OUIsTUFBTSxLQUFLLFlBQVk7Z0JBQ3ZDLGtDQUFrQztnQkFDbEMsTUFBTSs5QixlQUFlLE1BQU1DLHNEQUEwQixDQUFDQyxlQUFlLENBQUNsNkIsS0FBS2lDLGNBQWMsSUFBSTtnQkFDN0YsTUFBTWs0QixrQkFBa0IsTUFBTUYsc0RBQTBCLENBQUNHLHlCQUF5QixDQUFDcDZCLEtBQUtpQyxjQUFjLElBQUk7Z0JBRTFHLE9BQU87b0JBQ0xsSSxTQUFTO29CQUNUQyxTQUFTLENBQUM7OzRCQUVRLEVBQUVnZ0MsZUFBZSxlQUFlLGFBQWE7NkJBQzVDLEVBQUVHLGtCQUFrQixXQUFXLGdCQUFnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs2REF5QmYsQ0FBQztvQkFDcERoOUIsTUFBTTt3QkFDSjY4Qjt3QkFDQUc7d0JBQ0F6USxjQUFjOzRCQUNaMlEsd0JBQXdCOzRCQUN4QkMsV0FBVzs0QkFDWEMsb0JBQW9COzRCQUNwQkMsdUJBQXVCOzRCQUN2QkMsdUJBQXVCO3dCQUN6QjtvQkFDRjtvQkFDQXZnQyxhQUFhO3dCQUNYO3dCQUNBO3dCQUNBO3dCQUNBO3dCQUNBO3dCQUNBO3dCQUNBO3dCQUNBO3FCQUNEO2dCQUNIO1lBRUYsT0FBTyxJQUFJNC9CLGNBQWM3OUIsTUFBTSxLQUFLLFlBQVk7Z0JBQzlDLHVDQUF1QztnQkFDdkMsTUFBTXkrQixvQkFBOEM7b0JBQ2xEOTZCLElBQUksQ0FBQyxZQUFZLEVBQUV2RyxLQUFLQyxHQUFHLEdBQUcsQ0FBQyxFQUFFdUksS0FBS0UsTUFBTSxHQUFHNDRCLFFBQVEsQ0FBQyxJQUFJQyxNQUFNLENBQUMsR0FBRyxJQUFJO29CQUMxRTM0QixnQkFBZ0JqQyxLQUFLaUMsY0FBYyxJQUFJO29CQUN2QzlJLFFBQVFBO29CQUNSb0wsTUFBTXUxQixjQUFjdjFCLElBQUksSUFBSTtvQkFDNUJzMkIsU0FBU2YsY0FBY2UsT0FBTyxJQUFJO29CQUNsQ0MsZ0JBQWdCO3dCQUNkL3FCLFNBQVMrcEIsY0FBY3R3QixRQUFRLElBQUk7d0JBQ25DdXhCLGlCQUFpQjs0QkFDZkMsaUJBQWlCO3dCQUNuQjtvQkFDRjtvQkFDQUMsaUJBQWlCO3dCQUNmQyxPQUFPcEIsY0FBY29CLEtBQUssSUFBSTt3QkFDOUJDLE1BQU1yQixjQUFjcUIsSUFBSSxJQUFJO3dCQUM1QkMsaUJBQWlCdEIsY0FBY3NCLGVBQWUsSUFBSTtvQkFDcEQ7b0JBQ0FDLG1CQUFtQjt3QkFDakJ4OEIsUUFBUWk3QixjQUFjajdCLE1BQU0sSUFBSTt3QkFDaEN5OEIsd0JBQXdCO3dCQUN4QkMsWUFBWTt3QkFDWkMsU0FBUzt3QkFDVDVTLFNBQVNrUixjQUFjbFIsT0FBTyxJQUFJO3dCQUNsQzZTLGtCQUFrQjNCLGNBQWM0QixPQUFPLElBQUk7b0JBQzdDO29CQUNBL3dCLFNBQVM7d0JBQ1BneEIsY0FBYzdCLGNBQWN4UyxJQUFJO3dCQUNoQ3NVLGdCQUFnQjlCLGNBQWMrQixPQUFPO3dCQUNyQ0Msa0JBQWtCaEMsY0FBY2lDLFNBQVM7b0JBQzNDO29CQUNBQyxrQkFBa0JsQyxjQUFjbUMsVUFBVSxJQUFJO29CQUM5Q2w3QixXQUFXLElBQUkxSDtvQkFDZmlSLFVBQVU7Z0JBQ1o7Z0JBRUEsdUJBQXVCO2dCQUN2QixNQUFNNHhCLG1CQUFtQixNQUFNakMsc0RBQTBCLENBQUNrQyxlQUFlLENBQUN6QjtnQkFFMUUsSUFBSXdCLGlCQUFpQnI5QixNQUFNLEdBQUcsR0FBRztvQkFDL0IsTUFBTXU5QixhQUFhRixpQkFBaUI3aUIsTUFBTSxDQUFDLENBQUNLLEtBQUsxUSxVQUFZMFEsTUFBTTFRLFFBQVFxekIsWUFBWSxFQUFFLEtBQUtILGlCQUFpQnI5QixNQUFNO29CQUVySCxPQUFPO3dCQUNMOUUsU0FBUzt3QkFDVEMsU0FBUyxDQUFDOzs7aUJBR0wsRUFBRTgvQixjQUFjdjFCLElBQUksSUFBSSxRQUFRO1lBQ3JDLEVBQUV1MUIsY0FBY2UsT0FBTyxJQUFJLGFBQWE7cUJBQy9CLEVBQUVmLGNBQWNzQixlQUFlLElBQUksVUFBVTtlQUNuRCxFQUFFYyxpQkFBaUJyOUIsTUFBTSxDQUFDO3FCQUNwQixFQUFFLEFBQUN1OUIsQ0FBQUEsYUFBYSxHQUFFLEVBQUcxUSxPQUFPLENBQUMsR0FBRzs7O0FBR3JELEVBQUV3USxnQkFBZ0IsQ0FBQyxFQUFFLENBQUNsekIsT0FBTyxDQUFDRixPQUFPLEdBQUcsQ0FBQyxhQUFhLEVBQUVvekIsZ0JBQWdCLENBQUMsRUFBRSxDQUFDbHpCLE9BQU8sQ0FBQ0YsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUc7YUFDdkYsRUFBRW96QixnQkFBZ0IsQ0FBQyxFQUFFLENBQUNsekIsT0FBTyxDQUFDc3pCLElBQUksQ0FBQzVpQyxTQUFTLENBQUMsR0FBRyxLQUFLO1NBQ3pELEVBQUV3aUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDbHpCLE9BQU8sQ0FBQ3V6QixHQUFHLElBQUksYUFBYTs7O3dCQUduQyxFQUFFLEFBQUNMLENBQUFBLGdCQUFnQixDQUFDLEVBQUUsQ0FBQ3pCLHFCQUFxQixDQUFDK0Isc0JBQXNCLEdBQUcsR0FBRSxFQUFHOVEsT0FBTyxDQUFDLEdBQUc7d0JBQ3RGLEVBQUUsQUFBQ3dRLENBQUFBLGdCQUFnQixDQUFDLEVBQUUsQ0FBQ3pCLHFCQUFxQixDQUFDZ0Msc0JBQXNCLEdBQUcsR0FBRSxFQUFHL1EsT0FBTyxDQUFDLEdBQUc7ZUFDL0YsRUFBRSxBQUFDd1EsQ0FBQUEsZ0JBQWdCLENBQUMsRUFBRSxDQUFDekIscUJBQXFCLENBQUMzZ0MsVUFBVSxHQUFHLEdBQUUsRUFBRzR4QixPQUFPLENBQUMsR0FBRzs7O0FBR3pGLEVBQUV3USxnQkFBZ0IsQ0FBQyxFQUFFLENBQUNRLG1CQUFtQixDQUFDQyxnQkFBZ0IsQ0FBQzk5QixNQUFNLEdBQUcsSUFDbEUsQ0FBQyxzQkFBc0IsRUFBRXE5QixnQkFBZ0IsQ0FBQyxFQUFFLENBQUNRLG1CQUFtQixDQUFDQyxnQkFBZ0IsQ0FBQ3Y5QixLQUFLLENBQUMsR0FBRyxHQUFHQyxJQUFJLENBQUMsT0FBTyxHQUMxRyx3Q0FBd0M7OzJDQUVDLENBQUM7d0JBQ2hDbEMsTUFBTTs0QkFDSjA0QixXQUFXNkUsa0JBQWtCOTZCLEVBQUU7NEJBQy9CczhCOzRCQUNBVSxpQkFBaUJWLGlCQUFpQnI5QixNQUFNOzRCQUN4Q2crQixpQkFBaUJUO3dCQUNuQjt3QkFDQXY4QixTQUFTOzRCQUNQNUQsUUFBUTs0QkFDUjZnQyxhQUFhaEQsY0FBY3YxQixJQUFJOzRCQUMvQnMyQixTQUFTZixjQUFjZSxPQUFPOzRCQUM5Qm9CLFlBQVlDLGlCQUFpQnI5QixNQUFNO3dCQUNyQztvQkFDRjtnQkFDRixPQUFPO29CQUNMLE9BQU87d0JBQ0w5RSxTQUFTO3dCQUNUQyxTQUFTO3dCQUNURSxhQUFhOzRCQUNYOzRCQUNBOzRCQUNBO3lCQUNEO29CQUNIO2dCQUNGO1lBRUYsT0FBTyxJQUFJNC9CLGNBQWM3OUIsTUFBTSxLQUFLLGlCQUFpQjtnQkFDbkQsOEJBQThCO2dCQUM5QixNQUFNKzlCLGVBQWUsTUFBTUMsc0RBQTBCLENBQUNDLGVBQWUsQ0FBQ2w2QixLQUFLaUMsY0FBYyxJQUFJO2dCQUU3RixJQUFJKzNCLGNBQWM7b0JBQ2hCLE9BQU87d0JBQ0xqZ0MsU0FBUzt3QkFDVEMsU0FBUyxDQUFDOzs7Z0JBR04sRUFBRWdnQyxhQUFhK0Msb0JBQW9CLENBQUNDLFdBQVcsQ0FBQzM5QixJQUFJLENBQUMsTUFBTTt3QkFDbkQsRUFBRTI2QixhQUFhK0Msb0JBQW9CLENBQUNFLGtCQUFrQixDQUFDO2dCQUMvRCxFQUFFakQsYUFBYStDLG9CQUFvQixDQUFDRyxVQUFVLENBQUM5OUIsS0FBSyxDQUFDLEdBQUcsR0FBR0MsSUFBSSxDQUFDLE1BQU07Z0JBQ3RFLEVBQUUyNkIsYUFBYStDLG9CQUFvQixDQUFDSSxhQUFhLENBQUMvOUIsS0FBSyxDQUFDLEdBQUcsR0FBR0MsSUFBSSxDQUFDLE1BQU07OztXQUc5RSxFQUFFMjZCLGFBQWFvRCxlQUFlLENBQUNDLE1BQU0sQ0FBQztXQUN0QyxFQUFFckQsYUFBYW9ELGVBQWUsQ0FBQ0UsTUFBTSxDQUFDO2VBQ2xDLEVBQUV0RCxhQUFhb0QsZUFBZSxDQUFDRyxVQUFVLENBQUM7Z0JBQ3pDLEVBQUV2RCxhQUFhb0QsZUFBZSxDQUFDSSxXQUFXLENBQUM7OztBQUczRCxFQUFFNytCLE9BQU9DLElBQUksQ0FBQ283QixhQUFhMEMsbUJBQW1CLEVBQUV0cUIsR0FBRyxDQUFDN1AsQ0FBQUEsVUFDbEQsQ0FBQyxHQUFHLEVBQUVBLFFBQVFYLE1BQU0sQ0FBQyxHQUFHMkgsV0FBVyxLQUFLaEgsUUFBUW5ELEtBQUssQ0FBQyxHQUFHLFlBQVksQ0FBQyxFQUN0RUMsSUFBSSxDQUFDLE1BQU07Ozt1QkFHVSxFQUFFMjZCLGFBQWF5RCxrQkFBa0IsQ0FBQ0Msa0JBQWtCLENBQUM3K0IsTUFBTSxDQUFDO3FCQUM5RCxFQUFFbTdCLGFBQWF5RCxrQkFBa0IsQ0FBQ0Usb0JBQW9CLENBQUM5K0IsTUFBTSxDQUFDO3NCQUM3RCxFQUFFbTdCLGFBQWF5RCxrQkFBa0IsQ0FBQ0csZ0JBQWdCLENBQUMvK0IsTUFBTSxDQUFDOztlQUVqRSxFQUFFbTdCLGFBQWE2RCxZQUFZLENBQUNyNUIsa0JBQWtCLElBQUk7d0JBQ3JEckgsTUFBTTY4QjtvQkFDUjtnQkFDRixPQUFPO29CQUNMLE9BQU87d0JBQ0xqZ0MsU0FBUzt3QkFDVEMsU0FBUyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OEVBa0J3RCxDQUFDO3dCQUNuRUUsYUFBYTs0QkFDWDs0QkFDQTs0QkFDQTs0QkFDQTt5QkFDRDtvQkFDSDtnQkFDRjtZQUVGLE9BQU8sSUFBSTQvQixjQUFjNzlCLE1BQU0sS0FBSyxlQUFlO2dCQUNqRCw4QkFBOEI7Z0JBQzlCLE1BQU1rK0Isa0JBQWtCLE1BQU1GLHNEQUEwQixDQUFDRyx5QkFBeUIsQ0FBQ3A2QixLQUFLaUMsY0FBYyxJQUFJO2dCQUUxRyxPQUFPO29CQUNMbEksU0FBUztvQkFDVEMsU0FBUyxDQUFDOztBQUVwQixFQUFFbWdDLGtCQUFrQixDQUFDOztVQUVYLEVBQUVBLGdCQUFnQjJELGdCQUFnQixHQUFHLGNBQWMsVUFBVTtRQUMvRCxFQUFFM0QsZ0JBQWdCNEQsY0FBYyxHQUFHLGNBQWMsVUFBVTthQUN0RCxFQUFFNUQsZ0JBQWdCNkQsbUJBQW1CLEdBQUcsY0FBYyxVQUFVOzs7QUFHN0UsRUFBRTdELGdCQUFnQjhELGtCQUFrQixHQUFHOUQsZ0JBQWdCOEQsa0JBQWtCLENBQUM3K0IsS0FBSyxDQUFDLEdBQUcsR0FBR2dULEdBQUcsQ0FBQzdOLENBQUFBLE9BQVEsQ0FBQyxHQUFHLEVBQUVBLE1BQU0sRUFBRWxGLElBQUksQ0FBQyxRQUFRLG1DQUFtQzs7O0FBR2hLLEVBQUU4NkIsZ0JBQWdCclgsZUFBZSxHQUFHcVgsZ0JBQWdCclgsZUFBZSxDQUFDMWpCLEtBQUssQ0FBQyxHQUFHLEdBQUdnVCxHQUFHLENBQUM2UixDQUFBQSxNQUFPLENBQUMsR0FBRyxFQUFFQSxLQUFLLEVBQUU1a0IsSUFBSSxDQUFDLFFBQVEsMkJBQTJCO0FBQ2hKLENBQUMsR0FBRyxDQUFDOzs7Ozs7Ozs7O3FGQVVnRixDQUFDLENBQUM7Ozs7OzttRUFNcEIsQ0FBQztvQkFDMURsQyxNQUFNZzlCO2dCQUNSO1lBRUYsT0FBTztnQkFDTCxPQUFPO29CQUNMcGdDLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RFLGFBQWE7d0JBQ1g7d0JBQ0E7d0JBQ0E7d0JBQ0E7d0JBQ0E7d0JBQ0E7cUJBQ0Q7Z0JBQ0g7WUFDRjtRQUVGLEVBQUUsT0FBTzRDLE9BQU87WUFDZHZELGNBQU0sQ0FBQ3VELEtBQUssQ0FBQyx1Q0FBdUM7Z0JBQ2xEM0Q7Z0JBQ0FNO2dCQUNBcUQsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7WUFDekQ7WUFFQSxPQUFPO2dCQUNML0MsU0FBUztnQkFDVEMsU0FBUztnQkFDVDhDLE9BQU9BLGlCQUFpQkUsUUFBUUYsTUFBTTlDLE9BQU8sR0FBRztnQkFDaERFLGFBQWE7b0JBQ1g7b0JBQ0E7b0JBQ0E7aUJBQ0Q7WUFDSDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELEFBQVE2L0IsOEJBQThCdGdDLEtBQWEsRUFlakQ7UUFDQSxNQUFNcWQsYUFBYXJkLE1BQU0rQyxXQUFXO1FBRXBDLG1CQUFtQjtRQUNuQixJQUFJUCxTQUFTO1FBQ2IsSUFBSTZhLFdBQVcxVyxRQUFRLENBQUMsZUFBZTBXLFdBQVcxVyxRQUFRLENBQUMsYUFBYTBXLFdBQVcxVyxRQUFRLENBQUMsVUFBVTtZQUNwR25FLFNBQVM7UUFDWCxPQUFPLElBQUk2YSxXQUFXMVcsUUFBUSxDQUFDLFlBQWEwVyxDQUFBQSxXQUFXMVcsUUFBUSxDQUFDLFlBQVkwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVMsR0FBSTtZQUMzR25FLFNBQVM7UUFDWCxPQUFPLElBQUk2YSxXQUFXMVcsUUFBUSxDQUFDLGtCQUFrQjBXLFdBQVcxVyxRQUFRLENBQUMsZ0JBQWdCMFcsV0FBVzFXLFFBQVEsQ0FBQyxZQUFZO1lBQ25IbkUsU0FBUztRQUNYO1FBRUEseUJBQXlCO1FBQ3pCLElBQUlzSSxPQUFPO1FBQ1gsSUFBSXVTLFdBQVcxVyxRQUFRLENBQUMsUUFBUW1FLE9BQU87YUFDbEMsSUFBSXVTLFdBQVcxVyxRQUFRLENBQUMsYUFBYW1FLE9BQU87YUFDNUMsSUFBSXVTLFdBQVcxVyxRQUFRLENBQUMsV0FBV21FLE9BQU87YUFDMUMsSUFBSXVTLFdBQVcxVyxRQUFRLENBQUMsU0FBU21FLE9BQU87YUFDeEMsSUFBSXVTLFdBQVcxVyxRQUFRLENBQUMsU0FBUzBXLFdBQVcxVyxRQUFRLENBQUMsU0FBU21FLE9BQU87UUFFMUUsb0JBQW9CO1FBQ3BCLElBQUlzMkIsVUFBVTtRQUNkLElBQUkvakIsV0FBVzFXLFFBQVEsQ0FBQyxnQkFBZ0IwVyxXQUFXMVcsUUFBUSxDQUFDLFlBQVl5NkIsVUFBVTthQUM3RSxJQUFJL2pCLFdBQVcxVyxRQUFRLENBQUMsaUJBQWlCMFcsV0FBVzFXLFFBQVEsQ0FBQyxZQUFZeTZCLFVBQVU7YUFDbkYsSUFBSS9qQixXQUFXMVcsUUFBUSxDQUFDLGdCQUFnQjBXLFdBQVcxVyxRQUFRLENBQUMsV0FBV3k2QixVQUFVO2FBQ2pGLElBQUkvakIsV0FBVzFXLFFBQVEsQ0FBQyxtQkFBbUIwVyxXQUFXMVcsUUFBUSxDQUFDLGVBQWV5NkIsVUFBVTthQUN4RixJQUFJL2pCLFdBQVcxVyxRQUFRLENBQUMsa0JBQWtCMFcsV0FBVzFXLFFBQVEsQ0FBQyxVQUFVeTZCLFVBQVU7YUFDbEYsSUFBSS9qQixXQUFXMVcsUUFBUSxDQUFDLGtCQUFrQnk2QixVQUFVO1FBRXpELDZCQUE2QjtRQUM3QixJQUFJTyxrQkFBa0I7UUFDdEIsSUFBSXRrQixXQUFXMVcsUUFBUSxDQUFDLGlCQUFpQmc3QixrQkFBa0I7YUFDdEQsSUFBSXRrQixXQUFXMVcsUUFBUSxDQUFDLFVBQVVnN0Isa0JBQWtCO2FBQ3BELElBQUl0a0IsV0FBVzFXLFFBQVEsQ0FBQyxVQUFVZzdCLGtCQUFrQjtRQUV6RCwyQkFBMkI7UUFDM0IsSUFBSUYsUUFBUTtRQUNaLElBQUlwa0IsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhODZCLFFBQVE7YUFDeEMsSUFBSXBrQixXQUFXMVcsUUFBUSxDQUFDLGtCQUFrQjg2QixRQUFRO2FBQ2xELElBQUlwa0IsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXODZCLFFBQVE7YUFDM0MsSUFBSXBrQixXQUFXMVcsUUFBUSxDQUFDLGVBQWU4NkIsUUFBUTtRQUVwRCxJQUFJQyxPQUFPO1FBQ1gsSUFBSXJrQixXQUFXMVcsUUFBUSxDQUFDLFdBQVcrNkIsT0FBTzthQUNyQyxJQUFJcmtCLFdBQVcxVyxRQUFRLENBQUMsaUJBQWlCKzZCLE9BQU87YUFDaEQsSUFBSXJrQixXQUFXMVcsUUFBUSxDQUFDLFdBQVcrNkIsT0FBTzthQUMxQyxJQUFJcmtCLFdBQVcxVyxRQUFRLENBQUMsZ0JBQWdCKzZCLE9BQU87UUFFcEQsbUJBQW1CO1FBQ25CLElBQUl0OEIsU0FBUztRQUNiLElBQUlpWSxXQUFXMVcsUUFBUSxDQUFDLFlBQVkwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVV2QixTQUFTO2FBQ3RFLElBQUlpWSxXQUFXMVcsUUFBUSxDQUFDLFdBQVcwVyxXQUFXMVcsUUFBUSxDQUFDLGFBQWF2QixTQUFTO1FBRWxGLDhCQUE4QjtRQUM5QixJQUFJbzlCLGFBQWE7UUFDakIsTUFBTWlDLGlCQUFpQnBuQixXQUFXdVAsS0FBSyxDQUFDO1FBQ3hDLElBQUk2WCxnQkFBZ0I7WUFDbEJqQyxhQUFhbk8sT0FBT0MsUUFBUSxDQUFDbVEsY0FBYyxDQUFDLEVBQUU7UUFDaEQsT0FBTyxJQUFJcG5CLFdBQVcxVyxRQUFRLENBQUMsZUFBZTBXLFdBQVcxVyxRQUFRLENBQUMsWUFBWTtZQUM1RTY3QixhQUFhO1FBQ2Y7UUFFQSxPQUFPO1lBQ0xoZ0M7WUFDQXNJO1lBQ0FzMkI7WUFDQUs7WUFDQUM7WUFDQXQ4QjtZQUNBdThCO1lBQ0FhO1lBQ0FyVCxTQUFTOVIsV0FBVzFXLFFBQVEsQ0FBQyxZQUFZLFNBQVM7WUFDbERzN0IsU0FBUzVrQixXQUFXMVcsUUFBUSxDQUFDLFdBQVcsVUFBVTBXLFdBQVcxVyxRQUFRLENBQUMsZ0JBQWdCLFFBQVE7UUFDaEc7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUWszQix1QkFBdUI3OUIsS0FBYSxFQUsxQztRQUNBLE1BQU1xZCxhQUFhcmQsTUFBTStDLFdBQVc7UUFFcEMsK0JBQStCO1FBQy9CLElBQUkrRixVQUFVO1FBQ2QsSUFBSXVVLFdBQVcxVyxRQUFRLENBQUMsWUFBWW1DLFVBQVU7YUFDekMsSUFBSXVVLFdBQVcxVyxRQUFRLENBQUMsaUJBQWlCbUMsVUFBVTthQUNuRCxJQUFJdVUsV0FBVzFXLFFBQVEsQ0FBQyxVQUFVbUMsVUFBVTthQUM1QyxJQUFJdVUsV0FBVzFXLFFBQVEsQ0FBQyxVQUFVbUMsVUFBVTtRQUVqRCxnQ0FBZ0M7UUFDaEMsSUFBSXUxQixjQUFjO1FBQ2xCLElBQUloaEIsV0FBVzFXLFFBQVEsQ0FBQyxXQUFZMFcsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjMFcsV0FBVzFXLFFBQVEsQ0FBQyxTQUFVO1lBQ2xHMDNCLGNBQWM7UUFDaEIsT0FBTyxJQUFJaGhCLFdBQVcxVyxRQUFRLENBQUMsWUFBYTBXLFdBQVcxVyxRQUFRLENBQUMsbUJBQW1CMFcsV0FBVzFXLFFBQVEsQ0FBQyxTQUFVO1lBQy9HMDNCLGNBQWM7UUFDaEIsT0FBTyxJQUFJaGhCLFdBQVcxVyxRQUFRLENBQUMsWUFBWTBXLFdBQVcxVyxRQUFRLENBQUMsU0FBUztZQUN0RTAzQixjQUFjO1FBQ2hCO1FBRUEsbUJBQW1CO1FBQ25CLElBQUloaEIsV0FBVzFXLFFBQVEsQ0FBQyxZQUFZMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXO1lBQ2pFLE9BQU87Z0JBQUVuRSxRQUFRO2dCQUFjNjdCO2dCQUFhdjFCO1lBQVE7UUFDdEQ7UUFFQSxJQUFJdVUsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjO1lBQ3BDLE9BQU87Z0JBQUVuRSxRQUFRO2dCQUFtQjY3QjtnQkFBYXYxQjtZQUFRO1FBQzNEO1FBRUEsSUFBSXVVLFdBQVcxVyxRQUFRLENBQUMsZ0JBQWdCMFcsV0FBVzFXLFFBQVEsQ0FBQyxlQUFlO1lBQ3pFLE9BQU87Z0JBQUVuRSxRQUFRO2dCQUFtQjY3QjtnQkFBYXYxQjtZQUFRO1FBQzNEO1FBRUEsSUFBSXVVLFdBQVcxVyxRQUFRLENBQUMsV0FBVztZQUNqQyxPQUFPO2dCQUFFbkUsUUFBUTtnQkFBbUI2N0I7Z0JBQWF2MUI7Z0JBQVM4MkIsWUFBWTtZQUFXO1FBQ25GO1FBRUEsSUFBSXZpQixXQUFXMVcsUUFBUSxDQUFDLGFBQWEwVyxXQUFXMVcsUUFBUSxDQUFDLFlBQVkwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVU7WUFDakcsT0FBTztnQkFBRW5FLFFBQVE7Z0JBQXNCNjdCO2dCQUFhdjFCO1lBQVE7UUFDOUQ7UUFFQSxJQUFJdVUsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjMFcsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFXO1lBQ3BHLE9BQU87Z0JBQUVuRSxRQUFRO1lBQWtCO1FBQ3JDO1FBRUEsNkJBQTZCO1FBQzdCLE9BQU87WUFBRUEsUUFBUTtRQUFlO0lBQ2xDO0lBRUE7O0dBRUMsR0FDRCxBQUFRRixrQ0FBa0NwQyxNQUF5QixFQUFFRixLQUFhLEVBQVc7UUFDM0YsTUFBTTBrQyxzQkFBc0I7WUFDMUI7WUFBZTtZQUFhO1lBQVc7WUFBYztZQUFtQjtZQUN4RTtZQUFrQjtZQUFrQjtZQUF3QjtZQUFlO1lBQzNFO1lBQXVCO1lBQXVCO1lBQW1CO1lBQ2pFO1lBQWdCO1lBQWU7WUFBWTtZQUFlO1lBQVM7WUFDbkU7WUFBZTtZQUFvQjtZQUF3QjtZQUMzRDtZQUFXO1lBQXVCO1lBQWE7WUFBbUI7WUFDbEU7WUFBb0I7WUFBYTtZQUFrQjtZQUNuRDtZQUFlO1lBQW1CO1lBQW9CO1lBQ3REO1lBQWtCO1lBQXVCO1lBQWlCO1lBQzFEO1lBQXNCO1lBQXNCO1lBQzVDO1lBQXFCO1lBQXlCO1lBQzlDO1lBQWE7WUFBYTtZQUFpQjtZQUMzQztZQUEyQjtZQUFzQjtZQUNqRDtZQUFzQjtZQUFxQjtTQUM1QztRQUVELE1BQU1ybkIsYUFBYXJkLE1BQU0rQyxXQUFXO1FBRXBDLE9BQU8yaEMsb0JBQW9CMW5CLElBQUksQ0FBQzhKLENBQUFBLFVBQVd6SixXQUFXMVcsUUFBUSxDQUFDbWdCLGFBQ3ZEekosV0FBVzFXLFFBQVEsQ0FBQyxjQUFlMFcsQ0FBQUEsV0FBVzFXLFFBQVEsQ0FBQyxVQUFVMFcsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjMFcsV0FBVzFXLFFBQVEsQ0FBQyxXQUFVLEtBQ2pJMFcsV0FBVzFXLFFBQVEsQ0FBQyxZQUFhMFcsQ0FBQUEsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjMFcsV0FBVzFXLFFBQVEsQ0FBQyxrQkFBa0IwVyxXQUFXMVcsUUFBUSxDQUFDLFdBQVUsS0FDdkkwVyxXQUFXMVcsUUFBUSxDQUFDLFdBQVkwVyxDQUFBQSxXQUFXMVcsUUFBUSxDQUFDLFdBQVcwVyxXQUFXMVcsUUFBUSxDQUFDLGVBQWUwVyxXQUFXMVcsUUFBUSxDQUFDLFVBQVMsS0FDL0h6RyxPQUFPc0MsTUFBTSxLQUFLLFlBQWE2YSxDQUFBQSxXQUFXMVcsUUFBUSxDQUFDLGtCQUFrQjBXLFdBQVcxVyxRQUFRLENBQUMsYUFBWSxLQUNyR3pHLE9BQU9zQyxNQUFNLEtBQUssYUFBYzZhLENBQUFBLFdBQVcxVyxRQUFRLENBQUMsVUFBVTBXLFdBQVcxVyxRQUFRLENBQUMsVUFBUztJQUNyRztJQUVBOztHQUVDLEdBQ0QsTUFBY3BFLGdDQUFnQ3JDLE1BQXlCLEVBQUVSLE1BQWMsRUFBRU0sS0FBYSxFQUE0QjtRQUNoSSxJQUFJO1lBQ0YsbUNBQW1DO1lBQ25DLE1BQU11RyxPQUFPLE1BQU01QixlQUFNLENBQUM0QixJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeEMxQixPQUFPO29CQUFFcUIsSUFBSXpHO2dCQUFPO2dCQUNwQitHLFFBQVE7b0JBQUVDLE1BQU07b0JBQU04QixnQkFBZ0I7b0JBQU1qRSxNQUFNO2dCQUFLO1lBQ3pEO1lBRUEsSUFBSSxDQUFDZ0MsTUFBTTtnQkFDVCxPQUFPO29CQUNMakcsU0FBUztvQkFDVEMsU0FBUztvQkFDVDhDLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBLGdDQUFnQztZQUNoQyxNQUFNc2hDLG9CQUFvQixJQUFJLENBQUNDLG9DQUFvQyxDQUFDNWtDO1lBRXBFLElBQUkya0Msa0JBQWtCbmlDLE1BQU0sS0FBSyxZQUFZO2dCQUMzQywyQkFBMkI7Z0JBQzNCLE1BQU1xSixlQUFlLE1BQU1nNUIsd0RBQTJCLENBQUNDLGVBQWUsQ0FBQ3YrQixLQUFLaUMsY0FBYyxJQUFJO2dCQUM5RixNQUFNdThCLFlBQVlGLHdEQUEyQixDQUFDRywwQkFBMEI7Z0JBRXhFLE9BQU87b0JBQ0wxa0MsU0FBUztvQkFDVEMsU0FBUyxDQUFDOzs0Q0FFd0IsRUFBRXdrQyxVQUFVMy9CLE1BQU0sQ0FBQzsyQkFDcEMsRUFBRXlHLGFBQWE3RyxNQUFNLENBQUNrRCxDQUFBQSxJQUFLQSxFQUFFZCxRQUFRLEVBQUVoQyxNQUFNLENBQUM7MkJBQzlDLEVBQUV5RyxhQUFhekcsTUFBTSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7V0EyQnRDLEVBQUV5RyxhQUFhN0csTUFBTSxDQUFDa0QsQ0FBQUEsSUFBS0EsRUFBRXd0QixZQUFZLEtBQUssV0FBV3R3QixNQUFNLENBQUM7WUFDL0QsRUFBRXlHLGFBQWE3RyxNQUFNLENBQUNrRCxDQUFBQSxJQUFLQSxFQUFFd3RCLFlBQVksS0FBSyxXQUFXdHdCLE1BQU0sQ0FBQztTQUNuRSxFQUFFeUcsYUFBYTdHLE1BQU0sQ0FBQ2tELENBQUFBLElBQUtBLEVBQUV3dEIsWUFBWSxLQUFLLFNBQVN0d0IsTUFBTSxDQUFDOztpREFFdEIsQ0FBQztvQkFDeEMxQixNQUFNO3dCQUNKbUksY0FBY0EsYUFBYXpHLE1BQU07d0JBQ2pDNi9CLG9CQUFvQnA1QixhQUFhN0csTUFBTSxDQUFDa0QsQ0FBQUEsSUFBS0EsRUFBRWQsUUFBUSxFQUFFaEMsTUFBTTt3QkFDL0Q4L0Isb0JBQW9CSCxVQUFVMy9CLE1BQU07d0JBQ3BDKy9CLGFBQWE7NEJBQ1hDLFNBQVN2NUIsYUFBYTdHLE1BQU0sQ0FBQ2tELENBQUFBLElBQUtBLEVBQUV3dEIsWUFBWSxLQUFLLFdBQVd0d0IsTUFBTTs0QkFDdEVpZ0MsU0FBU3g1QixhQUFhN0csTUFBTSxDQUFDa0QsQ0FBQUEsSUFBS0EsRUFBRXd0QixZQUFZLEtBQUssV0FBV3R3QixNQUFNOzRCQUN0RS9CLE9BQU93SSxhQUFhN0csTUFBTSxDQUFDa0QsQ0FBQUEsSUFBS0EsRUFBRXd0QixZQUFZLEtBQUssU0FBU3R3QixNQUFNO3dCQUNwRTt3QkFDQTZxQixjQUFjOzRCQUNacVYsdUJBQXVCOzRCQUN2QkMsZ0JBQWdCOzRCQUNoQkMsbUJBQW1COzRCQUNuQkMsa0JBQWtCOzRCQUNsQkMsa0JBQWtCOzRCQUNsQkMsYUFBYTs0QkFDYkMsa0JBQWtCO3dCQUNwQjtvQkFDRjtnQkFDRjtZQUNGO1lBRUEsSUFBSWpCLGtCQUFrQm5pQyxNQUFNLEtBQUssc0JBQXNCO2dCQUNyRCx5QkFBeUI7Z0JBQ3pCLE1BQU0sRUFBRXFqQyxVQUFVLEVBQUV0Z0IsV0FBVyxFQUFFdWdCLGFBQWEsRUFBRSxHQUFHbkI7Z0JBRW5ELElBQUksQ0FBQ2tCLGNBQWMsQ0FBQ3RnQixhQUFhO29CQUMvQixPQUFPO3dCQUNMamxCLFNBQVM7d0JBQ1RDLFNBQVM7d0JBQ1RFLGFBQWE7NEJBQ1g7NEJBQ0E7NEJBQ0E7eUJBQ0Q7b0JBQ0g7Z0JBQ0Y7Z0JBRUEsTUFBTTZrQixjQUFjLE1BQU11Zix3REFBMkIsQ0FBQzFnQyxpQkFBaUIsQ0FDckVvQyxLQUFLaUMsY0FBYyxJQUFJLElBQ3ZCcTlCLFlBQ0F0Z0IsYUFDQXVnQjtnQkFHRixPQUFPO29CQUNMeGxDLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQzs7dUJBRUcsRUFBRStrQixZQUFZbmYsRUFBRSxDQUFDO2lCQUN2QixFQUFFbWYsWUFBWXlnQixZQUFZLENBQUM7c0JBQ3RCLEVBQUV6Z0IsWUFBWTBnQixZQUFZLENBQUM7Z0JBQ2pDLEVBQUUxZ0IsWUFBWWhlLFNBQVMsQ0FBQzRyQixXQUFXLEdBQUc7Ozs7Ozs7O2dEQVFOLENBQUM7b0JBQ3ZDeHZCLE1BQU07d0JBQ0o4aEIsZUFBZUYsWUFBWW5mLEVBQUU7d0JBQzdCbWY7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUVBLElBQUlxZixrQkFBa0JuaUMsTUFBTSxLQUFLLGdCQUFnQjtnQkFDL0MsMkJBQTJCO2dCQUMzQixNQUFNLEVBQUVnakIsYUFBYSxFQUFFLEdBQUdtZjtnQkFFMUIsSUFBSSxDQUFDbmYsZUFBZTtvQkFDbEIsT0FBTzt3QkFDTGxsQixTQUFTO3dCQUNUQyxTQUFTO3dCQUNURSxhQUFhOzRCQUNYOzRCQUNBO3lCQUNEO29CQUNIO2dCQUNGO2dCQUVBLE1BQU1va0Msd0RBQTJCLENBQUNvQixxQkFBcUIsQ0FBQ3pnQjtnQkFFeEQsT0FBTztvQkFDTGxsQixTQUFTO29CQUNUQyxTQUFTLENBQUM7O2dCQUVKLEVBQUVpbEIsY0FBYzs7Ozs7Ozs7Ozs7K0RBVytCLENBQUM7b0JBQ3REOWhCLE1BQU07d0JBQ0o4aEI7d0JBQ0EwZ0IsZUFBZTtvQkFDakI7Z0JBQ0Y7WUFDRjtZQUVBLElBQUl2QixrQkFBa0JuaUMsTUFBTSxLQUFLLG1CQUFtQjtnQkFDbEQsNkNBQTZDO2dCQUM3QyxNQUFNMmpDLGVBQWV4QixrQkFBa0J3QixZQUFZLElBQUk7Z0JBQ3ZELE1BQU1DLGdCQUFnQnpCLGtCQUFrQnlCLGFBQWEsSUFBSTtvQkFBQztpQkFBVTtnQkFFcEUsTUFBTS9jLGtCQUFrQixNQUFNd2Isd0RBQTJCLENBQUN3Qiw2QkFBNkIsQ0FDckY5L0IsS0FBS2lDLGNBQWMsSUFBSSxJQUN2QjI5QixjQUNBQztnQkFHRixPQUFPO29CQUNMOWxDLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQzs7bUJBRUQsRUFBRTRsQyxhQUFhO29CQUNkLEVBQUVDLGNBQWN4Z0MsSUFBSSxDQUFDLE1BQU07OztBQUcvQyxFQUFFeWpCLGdCQUFnQmlkLFdBQVcsQ0FBQzN0QixHQUFHLENBQUMsQ0FBQzR0QixVQUFVL25CLFFBQzNDLEdBQUdBLFFBQVEsRUFBRSxJQUFJLEVBQUUrbkIsU0FBU2hpQyxJQUFJLENBQUMsSUFBSSxFQUFFZ2lDLFNBQVN6N0IsSUFBSSxDQUFDO2lCQUN0QyxFQUFFeTdCLFNBQVNDLFNBQVMsQ0FBQzVnQyxJQUFJLENBQUMsTUFBTTtlQUNsQyxFQUFFMmdDLFNBQVNFLGVBQWUsQ0FBQztnQkFDMUIsRUFBRUYsU0FBU0csbUJBQW1CLENBQUNDLElBQUksR0FBRyxDQUFDLENBQUMsRUFBRUosU0FBU0csbUJBQW1CLENBQUNDLElBQUksRUFBRSxHQUFHLGNBQWMsRUFDNUcvZ0MsSUFBSSxDQUFDLFFBQVE7OztBQUdmLEVBQUV5akIsZ0JBQWdCdWQsT0FBTyxDQUFDanVCLEdBQUcsQ0FBQ2t1QixDQUFBQSxTQUFVLENBQUMsRUFBRSxFQUFFQSxRQUFRLEVBQUVqaEMsSUFBSSxDQUFDLE1BQU07OztBQUdsRSxFQUFFeWpCLGdCQUFnQnlkLGVBQWUsQ0FBQzs7a0VBRWdDLENBQUM7b0JBQ3pEcGpDLE1BQU07d0JBQ0oybEI7d0JBQ0E4Yzt3QkFDQUM7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUVBLElBQUl6QixrQkFBa0JuaUMsTUFBTSxLQUFLLGdCQUFnQjtnQkFDL0MsMkJBQTJCO2dCQUMzQixNQUFNcUosZUFBZSxNQUFNZzVCLHdEQUEyQixDQUFDQyxlQUFlLENBQUN2K0IsS0FBS2lDLGNBQWMsSUFBSTtnQkFFOUYsT0FBTztvQkFDTGxJLFNBQVM7b0JBQ1RDLFNBQVMsQ0FBQzs7O1dBR1QsRUFBRXNMLGFBQWE3RyxNQUFNLENBQUNrRCxDQUFBQSxJQUFLQSxFQUFFd3RCLFlBQVksS0FBSyxXQUFXdHdCLE1BQU0sQ0FBQztZQUMvRCxFQUFFeUcsYUFBYTdHLE1BQU0sQ0FBQ2tELENBQUFBLElBQUtBLEVBQUV3dEIsWUFBWSxLQUFLLFdBQVd0d0IsTUFBTSxDQUFDO1NBQ25FLEVBQUV5RyxhQUFhN0csTUFBTSxDQUFDa0QsQ0FBQUEsSUFBS0EsRUFBRXd0QixZQUFZLEtBQUssU0FBU3R3QixNQUFNLENBQUM7Z0JBQ3ZELEVBQUV5RyxhQUFhN0csTUFBTSxDQUFDa0QsQ0FBQUEsSUFBS0EsRUFBRXd0QixZQUFZLEtBQUssZUFBZXR3QixNQUFNLENBQUM7OztBQUdwRixFQUFFeUcsYUFBYTdHLE1BQU0sQ0FBQ2tELENBQUFBLElBQUtBLEVBQUVkLFFBQVEsRUFBRXVSLEdBQUcsQ0FBQzJNLENBQUFBLGNBQ3pDLENBQUMsSUFBSSxFQUFFQSxZQUFZeWhCLFdBQVcsQ0FBQyxLQUFLLEVBQUV6aEIsWUFBWW9RLFlBQVksS0FBSyxZQUFZLE1BQU1wUSxZQUFZb1EsWUFBWSxLQUFLLFlBQVksT0FBTyxJQUFJLENBQUMsRUFBRXBRLFlBQVlvUSxZQUFZLEVBQUUsRUFDdEs5dkIsSUFBSSxDQUFDLE1BQU07OztBQUdiLEVBQUVpRyxhQUFhN0csTUFBTSxDQUFDa0QsQ0FBQUEsSUFBS0EsRUFBRTgrQixVQUFVLEVBQUVyaEMsS0FBSyxDQUFDLEdBQUcsR0FBR2dULEdBQUcsQ0FBQzJNLENBQUFBLGNBQ3ZELENBQUMsRUFBRSxFQUFFQSxZQUFZeWhCLFdBQVcsQ0FBQyxFQUFFLEVBQUV6aEIsWUFBWTBoQixVQUFVLEVBQUU5VCxjQUFjLEVBQUUsRUFBRTVOLFlBQVkyaEIsWUFBWSxDQUFDQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQ3JIdGhDLElBQUksQ0FBQyxNQUFNOztpRUFFb0QsQ0FBQztvQkFDeERsQyxNQUFNO3dCQUNKdWxCLG1CQUFtQnBkLGFBQWF6RyxNQUFNO3dCQUN0QysvQixhQUFhOzRCQUNYQyxTQUFTdjVCLGFBQWE3RyxNQUFNLENBQUNrRCxDQUFBQSxJQUFLQSxFQUFFd3RCLFlBQVksS0FBSyxXQUFXdHdCLE1BQU07NEJBQ3RFaWdDLFNBQVN4NUIsYUFBYTdHLE1BQU0sQ0FBQ2tELENBQUFBLElBQUtBLEVBQUV3dEIsWUFBWSxLQUFLLFdBQVd0d0IsTUFBTTs0QkFDdEUvQixPQUFPd0ksYUFBYTdHLE1BQU0sQ0FBQ2tELENBQUFBLElBQUtBLEVBQUV3dEIsWUFBWSxLQUFLLFNBQVN0d0IsTUFBTTs0QkFDbEUraEMsYUFBYXQ3QixhQUFhN0csTUFBTSxDQUFDa0QsQ0FBQUEsSUFBS0EsRUFBRXd0QixZQUFZLEtBQUssZUFBZXR3QixNQUFNO3dCQUNoRjt3QkFDQXlHO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQSxpQkFBaUI7WUFDakIsT0FBTztnQkFDTHZMLFNBQVM7Z0JBQ1RDLFNBQVMsQ0FBQzs7Ozs7Ozs7OzRDQVMwQixDQUFDO2dCQUNyQ0UsYUFBYTtvQkFDWDtvQkFDQTtvQkFDQTtvQkFDQTtvQkFDQTtpQkFDRDtZQUNIO1FBRUYsRUFBRSxPQUFPNEMsT0FBTztZQUNkdkQsY0FBTSxDQUFDdUQsS0FBSyxDQUFDLCtDQUErQztnQkFDMUQzRDtnQkFDQU07Z0JBQ0FxRCxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU05QyxPQUFPLEdBQUdpRCxPQUFPSDtZQUN6RDtZQUVBLE9BQU87Z0JBQ0wvQyxTQUFTO2dCQUNUQyxTQUFTO2dCQUNUOEMsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNOUMsT0FBTyxHQUFHaUQsT0FBT0g7Z0JBQ3ZENUMsYUFBYTtvQkFDWDtvQkFDQTtvQkFDQTtpQkFDRDtZQUNIO1FBQ0Y7SUFDRjtJQUVBOztHQUVDLEdBQ0QsQUFBUW1rQyxxQ0FBcUM1a0MsS0FBYSxFQUFPO1FBQy9ELE1BQU1xZCxhQUFhcmQsTUFBTStDLFdBQVc7UUFFcEMsMkJBQTJCO1FBQzNCLElBQUk4aUMsYUFBYTtRQUNqQixJQUFJeG9CLFdBQVcxVyxRQUFRLENBQUMsYUFBYWsvQixhQUFhO2FBQzdDLElBQUl4b0IsV0FBVzFXLFFBQVEsQ0FBQyxnQkFBZ0JrL0IsYUFBYTthQUNyRCxJQUFJeG9CLFdBQVcxVyxRQUFRLENBQUMsWUFBWTBXLFdBQVcxVyxRQUFRLENBQUMsV0FBV2svQixhQUFhO2FBQ2hGLElBQUl4b0IsV0FBVzFXLFFBQVEsQ0FBQyxxQkFBcUJrL0IsYUFBYTthQUMxRCxJQUFJeG9CLFdBQVcxVyxRQUFRLENBQUMsZ0JBQWdCay9CLGFBQWE7UUFFMUQsOEJBQThCO1FBQzlCLElBQUlPLGdCQUEwQixFQUFFO1FBQ2hDLElBQUkvb0IsV0FBVzFXLFFBQVEsQ0FBQyxZQUFZeS9CLGNBQWMxeUIsSUFBSSxDQUFDO1FBQ3ZELElBQUkySixXQUFXMVcsUUFBUSxDQUFDLFVBQVV5L0IsY0FBYzF5QixJQUFJLENBQUM7UUFDckQsSUFBSTJKLFdBQVcxVyxRQUFRLENBQUMsaUJBQWlCeS9CLGNBQWMxeUIsSUFBSSxDQUFDO1FBQzVELElBQUkySixXQUFXMVcsUUFBUSxDQUFDLFVBQVV5L0IsY0FBYzF5QixJQUFJLENBQUM7UUFDckQsSUFBSTB5QixjQUFjaGhDLE1BQU0sS0FBSyxLQUFLaVksV0FBVzFXLFFBQVEsQ0FBQyxXQUFXO1lBQy9EeS9CLGdCQUFnQjtnQkFBQztnQkFBVztnQkFBUztnQkFBZ0I7YUFBUTtRQUMvRDtRQUVBLDBCQUEwQjtRQUMxQixJQUFJRCxlQUFlO1FBQ25CLElBQUk5b0IsV0FBVzFXLFFBQVEsQ0FBQyxnQkFBZ0IwVyxXQUFXMVcsUUFBUSxDQUFDLGVBQWV3L0IsZUFBZTthQUNyRixJQUFJOW9CLFdBQVcxVyxRQUFRLENBQUMsZUFBZXcvQixlQUFlO2FBQ3RELElBQUk5b0IsV0FBVzFXLFFBQVEsQ0FBQyxjQUFjMFcsV0FBVzFXLFFBQVEsQ0FBQyxTQUFTdy9CLGVBQWU7UUFFdkYsbUJBQW1CO1FBQ25CLElBQUk5b0IsV0FBVzFXLFFBQVEsQ0FBQyxhQUFhMFcsV0FBVzFXLFFBQVEsQ0FBQyxnQkFBZ0I7WUFDdkUsT0FBTztnQkFDTG5FLFFBQVE7Z0JBQ1JxakM7Z0JBQ0F0Z0IsYUFBYSxDQUFDO2dCQUNkdWdCLGVBQWUsQ0FBQztZQUNsQjtRQUNGO1FBRUEsSUFBSXpvQixXQUFXMVcsUUFBUSxDQUFDLFdBQVcwVyxXQUFXMVcsUUFBUSxDQUFDLGdCQUFnQjtZQUNyRSxNQUFNNmUsZ0JBQWdCLElBQUksQ0FBQzRoQixvQkFBb0IsQ0FBQy9wQjtZQUNoRCxPQUFPO2dCQUFFN2EsUUFBUTtnQkFBZ0JnakI7WUFBYztRQUNqRDtRQUVBLElBQUluSSxXQUFXMVcsUUFBUSxDQUFDLGdCQUFnQjBXLFdBQVcxVyxRQUFRLENBQUMsY0FBYzBXLFdBQVcxVyxRQUFRLENBQUMsV0FBVztZQUN2RyxPQUFPO2dCQUFFbkUsUUFBUTtnQkFBbUIyakM7Z0JBQWNDO1lBQWM7UUFDbEU7UUFFQSxJQUFJL29CLFdBQVcxVyxRQUFRLENBQUMsYUFBYTBXLFdBQVcxVyxRQUFRLENBQUMsYUFBYTBXLFdBQVcxVyxRQUFRLENBQUMsWUFBWTtZQUNwRyxPQUFPO2dCQUFFbkUsUUFBUTtZQUFlO1FBQ2xDO1FBRUEsSUFBSTZhLFdBQVcxVyxRQUFRLENBQUMsZUFBZTBXLFdBQVcxVyxRQUFRLENBQUMsZ0JBQWdCMFcsV0FBVzFXLFFBQVEsQ0FBQyxTQUFTO1lBQ3RHLE9BQU87Z0JBQUVuRSxRQUFRO2dCQUFrQjRqQztZQUFjO1FBQ25EO1FBRUEsSUFBSS9vQixXQUFXMVcsUUFBUSxDQUFDLGdCQUFnQjBXLFdBQVcxVyxRQUFRLENBQUMsWUFBWTBXLFdBQVcxVyxRQUFRLENBQUMsV0FBVztZQUNyRyxPQUFPO2dCQUFFbkUsUUFBUTtnQkFBeUJxakM7WUFBVztRQUN2RDtRQUVBLHNCQUFzQjtRQUN0QixPQUFPO1lBQUVyakMsUUFBUTtRQUFXO0lBQzlCO0lBRUE7O0dBRUMsR0FDRCxBQUFRNGtDLHFCQUFxQnBuQyxLQUFhLEVBQVU7UUFDbEQsTUFBTXFuQyxVQUFVcm5DLE1BQU00c0IsS0FBSyxDQUFDO1FBQzVCLE9BQU95YSxVQUFVQSxPQUFPLENBQUMsRUFBRSxHQUFHO0lBQ2hDO0FBQ0Y7QUFHTyxNQUFNL25DLDZCQUE2QixJQUFJQyJ9