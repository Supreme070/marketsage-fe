{"version":3,"sources":["/Users/supreme/Desktop/marketsage/src/components/leadpulse/BasicVisitorMap.tsx"],"sourcesContent":["'use client';\n\nimport React, { useMemo, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { MapPin, Users, Activity } from 'lucide-react';\nimport type { VisitorLocation } from '@/lib/leadpulse/dataProvider';\n\ninterface BasicVisitorMapProps {\n  locations: VisitorLocation[];\n  isLoading?: boolean;\n}\n\nconst BasicVisitorMap = React.memo<BasicVisitorMapProps>(({ locations, isLoading }) => {\n  // Calculate totals and sort locations\n  const processedData = useMemo(() => {\n    const totalVisitors = locations.reduce((sum, loc) => sum + loc.visitors, 0);\n    const sortedLocations = [...locations].sort((a, b) => b.visitors - a.visitors);\n    const topLocations = sortedLocations.slice(0, 10);\n    \n    return {\n      totalVisitors,\n      topLocations,\n      countries: new Set(locations.map(l => l.country)).size\n    };\n  }, [locations]);\n\n  if (isLoading) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <MapPin className=\"h-5 w-5\" />\n            Visitor Locations\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"animate-pulse text-gray-500\">Loading visitor data...</div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <MapPin className=\"h-5 w-5\" />\n          Visitor Locations\n        </CardTitle>\n        <div className=\"text-sm text-gray-600 mt-1\">\n          {processedData.totalVisitors} visitors from {processedData.countries} countries\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          {/* Visual Map Representation */}\n          <div className=\"relative bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-6 h-48 overflow-hidden\">\n            {/* Simple dot visualization for locations */}\n            <div className=\"absolute inset-0\">\n              {processedData.topLocations.map((location, index) => {\n                // Simple positioning based on index\n                const positions = [\n                  { top: '20%', left: '30%' },\n                  { top: '40%', left: '60%' },\n                  { top: '60%', left: '25%' },\n                  { top: '30%', left: '75%' },\n                  { top: '70%', left: '50%' },\n                  { top: '25%', left: '45%' },\n                  { top: '50%', left: '70%' },\n                  { top: '45%', left: '35%' },\n                  { top: '35%', left: '55%' },\n                  { top: '55%', left: '40%' }\n                ];\n                const pos = positions[index % positions.length];\n                const size = Math.max(8, Math.min(24, location.visitors));\n                \n                return (\n                  <div\n                    key={location.id}\n                    className=\"absolute group cursor-pointer\"\n                    style={{ top: pos.top, left: pos.left }}\n                  >\n                    <div\n                      className=\"bg-blue-500 rounded-full animate-pulse opacity-60\"\n                      style={{ width: `${size}px`, height: `${size}px` }}\n                    />\n                    <div className=\"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap\">\n                      {location.city}: {location.visitors} visitors\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n            {/* Map overlay text */}\n            <div className=\"relative z-10 text-center\">\n              <h3 className=\"text-lg font-semibold text-gray-800\">Live Visitor Map</h3>\n              <p className=\"text-sm text-gray-600\">Hover over dots to see details</p>\n            </div>\n          </div>\n\n          {/* Location List */}\n          <div className=\"space-y-2\">\n            <h4 className=\"text-sm font-medium text-gray-700 flex items-center gap-2\">\n              <Activity className=\"h-4 w-4\" />\n              Top Locations\n            </h4>\n            <div className=\"space-y-1\">\n              {processedData.topLocations.slice(0, 5).map((location) => (\n                <div\n                  key={location.id}\n                  className=\"flex items-center justify-between py-2 px-3 rounded-lg hover:bg-gray-50 transition-colors\"\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <MapPin className=\"h-4 w-4 text-gray-400\" />\n                    <div>\n                      <div className=\"font-medium text-sm\">{location.city}</div>\n                      <div className=\"text-xs text-gray-500\">{location.country}</div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Users className=\"h-4 w-4 text-gray-400\" />\n                    <span className=\"font-medium text-sm\">{location.visitors}</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Quick Stats */}\n          <div className=\"grid grid-cols-3 gap-2 pt-2 border-t\">\n            <div className=\"text-center\">\n              <div className=\"text-lg font-semibold\">{processedData.countries}</div>\n              <div className=\"text-xs text-gray-500\">Countries</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-lg font-semibold\">{processedData.topLocations.length}</div>\n              <div className=\"text-xs text-gray-500\">Cities</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-lg font-semibold\">{processedData.totalVisitors}</div>\n              <div className=\"text-xs text-gray-500\">Total Visitors</div>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n});\n\nBasicVisitorMap.displayName = 'BasicVisitorMap';\n\nexport { BasicVisitorMap };\nexport default BasicVisitorMap;"],"names":["BasicVisitorMap","React","memo","locations","isLoading","processedData","useMemo","totalVisitors","reduce","sum","loc","visitors","sortedLocations","sort","a","b","topLocations","slice","countries","Set","map","l","country","size","Card","className","CardHeader","CardTitle","MapPin","CardContent","div","location","index","positions","top","left","pos","length","Math","max","min","style","width","height","city","id","h3","p","h4","Activity","Users","span","displayName"],"mappings":"AAAA;;;;;;;;;;;;IAyJSA,eAAe;eAAfA;;IACT,OAA+B;eAA/B;;;;+DAxJ4C;sBACa;6BACjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQxC,MAAMA,gCAAkBC,cAAK,CAACC,IAAI,CAAuB,CAAC,EAAEC,SAAS,EAAEC,SAAS,EAAE;IAChF,sCAAsC;IACtC,MAAMC,gBAAgBC,IAAAA,cAAO,EAAC;QAC5B,MAAMC,gBAAgBJ,UAAUK,MAAM,CAAC,CAACC,KAAKC,MAAQD,MAAMC,IAAIC,QAAQ,EAAE;QACzE,MAAMC,kBAAkB;eAAIT;SAAU,CAACU,IAAI,CAAC,CAACC,GAAGC,IAAMA,EAAEJ,QAAQ,GAAGG,EAAEH,QAAQ;QAC7E,MAAMK,eAAeJ,gBAAgBK,KAAK,CAAC,GAAG;QAE9C,OAAO;YACLV;YACAS;YACAE,WAAW,IAAIC,IAAIhB,UAAUiB,GAAG,CAACC,CAAAA,IAAKA,EAAEC,OAAO,GAAGC,IAAI;QACxD;IACF,GAAG;QAACpB;KAAU;IAEd,IAAIC,WAAW;QACb,qBACE,sBAACoB,UAAI;YAACC,WAAU;;8BACd,qBAACC,gBAAU;8BACT,cAAA,sBAACC,eAAS;wBAACF,WAAU;;0CACnB,qBAACG,mBAAM;gCAACH,WAAU;;4BAAY;;;;8BAIlC,qBAACI,iBAAW;8BACV,cAAA,qBAACC;wBAAIL,WAAU;kCACb,cAAA,qBAACK;4BAAIL,WAAU;sCAA8B;;;;;;IAKvD;IAEA,qBACE,sBAACD,UAAI;QAACC,WAAU;;0BACd,sBAACC,gBAAU;;kCACT,sBAACC,eAAS;wBAACF,WAAU;;0CACnB,qBAACG,mBAAM;gCAACH,WAAU;;4BAAY;;;kCAGhC,sBAACK;wBAAIL,WAAU;;4BACZpB,cAAcE,aAAa;4BAAC;4BAAgBF,cAAca,SAAS;4BAAC;;;;;0BAGzE,qBAACW,iBAAW;0BACV,cAAA,sBAACC;oBAAIL,WAAU;;sCAEb,sBAACK;4BAAIL,WAAU;;8CAEb,qBAACK;oCAAIL,WAAU;8CACZpB,cAAcW,YAAY,CAACI,GAAG,CAAC,CAACW,UAAUC;wCACzC,oCAAoC;wCACpC,MAAMC,YAAY;4CAChB;gDAAEC,KAAK;gDAAOC,MAAM;4CAAM;4CAC1B;gDAAED,KAAK;gDAAOC,MAAM;4CAAM;4CAC1B;gDAAED,KAAK;gDAAOC,MAAM;4CAAM;4CAC1B;gDAAED,KAAK;gDAAOC,MAAM;4CAAM;4CAC1B;gDAAED,KAAK;gDAAOC,MAAM;4CAAM;4CAC1B;gDAAED,KAAK;gDAAOC,MAAM;4CAAM;4CAC1B;gDAAED,KAAK;gDAAOC,MAAM;4CAAM;4CAC1B;gDAAED,KAAK;gDAAOC,MAAM;4CAAM;4CAC1B;gDAAED,KAAK;gDAAOC,MAAM;4CAAM;4CAC1B;gDAAED,KAAK;gDAAOC,MAAM;4CAAM;yCAC3B;wCACD,MAAMC,MAAMH,SAAS,CAACD,QAAQC,UAAUI,MAAM,CAAC;wCAC/C,MAAMd,OAAOe,KAAKC,GAAG,CAAC,GAAGD,KAAKE,GAAG,CAAC,IAAIT,SAASpB,QAAQ;wCAEvD,qBACE,sBAACmB;4CAECL,WAAU;4CACVgB,OAAO;gDAAEP,KAAKE,IAAIF,GAAG;gDAAEC,MAAMC,IAAID,IAAI;4CAAC;;8DAEtC,qBAACL;oDACCL,WAAU;oDACVgB,OAAO;wDAAEC,OAAO,GAAGnB,KAAK,EAAE,CAAC;wDAAEoB,QAAQ,GAAGpB,KAAK,EAAE,CAAC;oDAAC;;8DAEnD,sBAACO;oDAAIL,WAAU;;wDACZM,SAASa,IAAI;wDAAC;wDAAGb,SAASpB,QAAQ;wDAAC;;;;2CATjCoB,SAASc,EAAE;oCAatB;;8CAGF,sBAACf;oCAAIL,WAAU;;sDACb,qBAACqB;4CAAGrB,WAAU;sDAAsC;;sDACpD,qBAACsB;4CAAEtB,WAAU;sDAAwB;;;;;;sCAKzC,sBAACK;4BAAIL,WAAU;;8CACb,sBAACuB;oCAAGvB,WAAU;;sDACZ,qBAACwB,qBAAQ;4CAACxB,WAAU;;wCAAY;;;8CAGlC,qBAACK;oCAAIL,WAAU;8CACZpB,cAAcW,YAAY,CAACC,KAAK,CAAC,GAAG,GAAGG,GAAG,CAAC,CAACW,yBAC3C,sBAACD;4CAECL,WAAU;;8DAEV,sBAACK;oDAAIL,WAAU;;sEACb,qBAACG,mBAAM;4DAACH,WAAU;;sEAClB,sBAACK;;8EACC,qBAACA;oEAAIL,WAAU;8EAAuBM,SAASa,IAAI;;8EACnD,qBAACd;oEAAIL,WAAU;8EAAyBM,SAAST,OAAO;;;;;;8DAG5D,sBAACQ;oDAAIL,WAAU;;sEACb,qBAACyB,kBAAK;4DAACzB,WAAU;;sEACjB,qBAAC0B;4DAAK1B,WAAU;sEAAuBM,SAASpB,QAAQ;;;;;2CAZrDoB,SAASc,EAAE;;;;sCAoBxB,sBAACf;4BAAIL,WAAU;;8CACb,sBAACK;oCAAIL,WAAU;;sDACb,qBAACK;4CAAIL,WAAU;sDAAyBpB,cAAca,SAAS;;sDAC/D,qBAACY;4CAAIL,WAAU;sDAAwB;;;;8CAEzC,sBAACK;oCAAIL,WAAU;;sDACb,qBAACK;4CAAIL,WAAU;sDAAyBpB,cAAcW,YAAY,CAACqB,MAAM;;sDACzE,qBAACP;4CAAIL,WAAU;sDAAwB;;;;8CAEzC,sBAACK;oCAAIL,WAAU;;sDACb,qBAACK;4CAAIL,WAAU;sDAAyBpB,cAAcE,aAAa;;sDACnE,qBAACuB;4CAAIL,WAAU;sDAAwB;;;;;;;;;;;AAOrD;AAEAzB,gBAAgBoD,WAAW,GAAG;MAG9B,WAAepD"}