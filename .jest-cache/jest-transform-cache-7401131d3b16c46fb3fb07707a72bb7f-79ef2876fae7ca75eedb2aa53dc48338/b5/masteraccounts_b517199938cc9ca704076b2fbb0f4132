f6dc09e686253cc45cb114536c9d2fbe
/**
 * Master API Account Configuration for Unified Messaging Service
 * 
 * This configuration manages platform-owned API accounts for customers
 * who prefer the unified service model over managing their own APIs.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    COST_MARKUP: function() {
        return COST_MARKUP;
    },
    CREDIT_RATES: function() {
        return CREDIT_RATES;
    },
    MasterAccountManager: function() {
        return MasterAccountManager;
    },
    masterAccountsConfig: function() {
        return masterAccountsConfig;
    }
});
const masterAccountsConfig = {
    sms: {
        twilio: {
            provider: 'twilio',
            accountId: process.env.MASTER_TWILIO_ACCOUNT_SID || '',
            apiKey: process.env.MASTER_TWILIO_AUTH_TOKEN || '',
            fromNumber: process.env.MASTER_TWILIO_FROM_NUMBER || '',
            isActive: !!process.env.MASTER_TWILIO_ACCOUNT_SID,
            region: 'us-east-1',
            rateLimit: {
                perMinute: 60,
                perHour: 3600,
                perDay: 86400
            },
            costPerMessage: {
                sms: 0.0075,
                email: 0,
                whatsapp: 0
            }
        },
        africasTalking: {
            provider: 'africas-talking',
            accountId: process.env.MASTER_AT_USERNAME || '',
            apiKey: process.env.MASTER_AT_API_KEY || '',
            fromNumber: process.env.MASTER_AT_FROM_NUMBER || '',
            isActive: !!process.env.MASTER_AT_API_KEY,
            region: 'africa',
            rateLimit: {
                perMinute: 100,
                perHour: 6000,
                perDay: 144000
            },
            costPerMessage: {
                sms: 0.05,
                email: 0,
                whatsapp: 0
            }
        },
        termii: {
            provider: 'termii',
            accountId: process.env.MASTER_TERMII_SENDER_ID || '',
            apiKey: process.env.MASTER_TERMII_API_KEY || '',
            fromNumber: process.env.MASTER_TERMII_FROM_NUMBER || '',
            isActive: !!process.env.MASTER_TERMII_API_KEY,
            region: 'nigeria',
            rateLimit: {
                perMinute: 120,
                perHour: 7200,
                perDay: 172800
            },
            costPerMessage: {
                sms: 0.04,
                email: 0,
                whatsapp: 0
            }
        }
    },
    email: {
        sendgrid: {
            provider: 'sendgrid',
            accountId: process.env.MASTER_SENDGRID_USERNAME || '',
            apiKey: process.env.MASTER_SENDGRID_API_KEY || '',
            fromEmail: process.env.MASTER_SENDGRID_FROM_EMAIL || '',
            isActive: !!process.env.MASTER_SENDGRID_API_KEY,
            region: 'global',
            rateLimit: {
                perMinute: 600,
                perHour: 36000,
                perDay: 864000
            },
            costPerMessage: {
                sms: 0,
                email: 0.0012,
                whatsapp: 0
            }
        },
        mailgun: {
            provider: 'mailgun',
            accountId: process.env.MASTER_MAILGUN_DOMAIN || '',
            apiKey: process.env.MASTER_MAILGUN_API_KEY || '',
            fromEmail: process.env.MASTER_MAILGUN_FROM_EMAIL || '',
            isActive: !!process.env.MASTER_MAILGUN_API_KEY,
            region: 'us',
            rateLimit: {
                perMinute: 1000,
                perHour: 60000,
                perDay: 1440000
            },
            costPerMessage: {
                sms: 0,
                email: 0.001,
                whatsapp: 0
            }
        },
        postmark: {
            provider: 'postmark',
            accountId: process.env.MASTER_POSTMARK_ACCOUNT_ID || '',
            apiKey: process.env.MASTER_POSTMARK_API_KEY || '',
            fromEmail: process.env.MASTER_POSTMARK_FROM_EMAIL || '',
            isActive: !!process.env.MASTER_POSTMARK_API_KEY,
            region: 'us',
            rateLimit: {
                perMinute: 300,
                perHour: 18000,
                perDay: 432000
            },
            costPerMessage: {
                sms: 0,
                email: 0.0025,
                whatsapp: 0
            }
        }
    },
    whatsapp: {
        twilioWhatsApp: {
            provider: 'twilio-whatsapp',
            accountId: process.env.MASTER_TWILIO_WHATSAPP_ACCOUNT_SID || '',
            apiKey: process.env.MASTER_TWILIO_WHATSAPP_AUTH_TOKEN || '',
            fromNumber: process.env.MASTER_TWILIO_WHATSAPP_FROM_NUMBER || '',
            isActive: !!process.env.MASTER_TWILIO_WHATSAPP_ACCOUNT_SID,
            region: 'global',
            rateLimit: {
                perMinute: 80,
                perHour: 4800,
                perDay: 115200
            },
            costPerMessage: {
                sms: 0,
                email: 0,
                whatsapp: 0.005 // $0.005 per WhatsApp message
            }
        },
        whatsappBusiness: {
            provider: 'whatsapp-business',
            accountId: process.env.MASTER_WHATSAPP_BUSINESS_ACCOUNT_ID || '',
            apiKey: process.env.MASTER_WHATSAPP_BUSINESS_ACCESS_TOKEN || '',
            fromNumber: process.env.MASTER_WHATSAPP_BUSINESS_PHONE_NUMBER || '',
            isActive: !!process.env.MASTER_WHATSAPP_BUSINESS_ACCESS_TOKEN,
            region: 'global',
            rateLimit: {
                perMinute: 60,
                perHour: 3600,
                perDay: 86400
            },
            costPerMessage: {
                sms: 0,
                email: 0,
                whatsapp: 0.004 // $0.004 per WhatsApp message
            }
        }
    }
};
class MasterAccountManager {
    /**
   * Get the best available master account for a specific channel
   */ static getBestMasterAccount(channel, region) {
        const channelAccounts = masterAccountsConfig[channel];
        // Filter active accounts
        const activeAccounts = Object.values(channelAccounts).filter((account)=>account.isActive);
        if (activeAccounts.length === 0) {
            return null;
        }
        // Prioritize by region if specified
        if (region) {
            const regionMatch = activeAccounts.find((account)=>account.region === region);
            if (regionMatch) {
                return regionMatch;
            }
        }
        // For African markets, prioritize Africa's Talking for SMS
        if (channel === 'sms' && (region === 'africa' || region === 'nigeria' || region === 'kenya')) {
            const africasTalking = activeAccounts.find((account)=>account.provider === 'africas-talking');
            if (africasTalking) {
                return africasTalking;
            }
        }
        // Default to first active account
        return activeAccounts[0];
    }
    /**
   * Calculate cost for a message campaign
   */ static calculateCost(channel, messageCount, region) {
        const account = this.getBestMasterAccount(channel, region);
        if (!account) {
            return {
                cost: 0,
                provider: 'none'
            };
        }
        const costPerMessage = account.costPerMessage?.[channel] || 0;
        const cost = messageCount * costPerMessage;
        return {
            cost,
            provider: account.provider
        };
    }
    /**
   * Check if we have capacity for a message campaign
   */ static checkCapacity(channel, messageCount, region) {
        const account = this.getBestMasterAccount(channel, region);
        if (!account) {
            return {
                canSend: false,
                provider: 'none',
                rateLimit: null
            };
        }
        const rateLimit = account.rateLimit;
        // For now, assume we can send if we have an active account
        // In production, this would check against usage tracking
        const canSend = rateLimit ? messageCount <= rateLimit.perDay : true;
        return {
            canSend,
            provider: account.provider,
            rateLimit
        };
    }
    /**
   * Get all active master accounts
   */ static getAllActiveAccounts() {
        const accounts = [];
        for (const [channel, providers] of Object.entries(masterAccountsConfig)){
            for (const [provider, config] of Object.entries(providers)){
                if (config.isActive) {
                    accounts.push({
                        channel,
                        provider,
                        config
                    });
                }
            }
        }
        return accounts;
    }
    /**
   * Validate master account configuration
   */ static validateConfiguration() {
        const errors = [];
        // Check if we have at least one active account per channel
        const channels = [
            'sms',
            'email',
            'whatsapp'
        ];
        for (const channel of channels){
            const channelAccounts = masterAccountsConfig[channel];
            const activeAccounts = Object.values(channelAccounts).filter((account)=>account.isActive);
            if (activeAccounts.length === 0) {
                errors.push(`No active master accounts configured for ${channel}`);
            }
        }
        // Check for missing environment variables
        const requiredEnvVars = [
            'MASTER_TWILIO_ACCOUNT_SID',
            'MASTER_TWILIO_AUTH_TOKEN',
            'MASTER_SENDGRID_API_KEY'
        ];
        for (const envVar of requiredEnvVars){
            if (!process.env[envVar]) {
                errors.push(`Missing environment variable: ${envVar}`);
            }
        }
        return {
            isValid: errors.length === 0,
            errors
        };
    }
}
const COST_MARKUP = {
    sms: 2.5,
    email: 3.0,
    whatsapp: 2.0 // 2x markup on WhatsApp costs
};
const CREDIT_RATES = {
    sms: 0.1,
    email: 0.01,
    whatsapp: 0.08 // 8 cents per WhatsApp credit
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdXByZW1lL0Rlc2t0b3AvbWFya2V0c2FnZS9zcmMvbGliL2NvbmZpZy9tYXN0ZXItYWNjb3VudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNYXN0ZXIgQVBJIEFjY291bnQgQ29uZmlndXJhdGlvbiBmb3IgVW5pZmllZCBNZXNzYWdpbmcgU2VydmljZVxuICogXG4gKiBUaGlzIGNvbmZpZ3VyYXRpb24gbWFuYWdlcyBwbGF0Zm9ybS1vd25lZCBBUEkgYWNjb3VudHMgZm9yIGN1c3RvbWVyc1xuICogd2hvIHByZWZlciB0aGUgdW5pZmllZCBzZXJ2aWNlIG1vZGVsIG92ZXIgbWFuYWdpbmcgdGhlaXIgb3duIEFQSXMuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBNYXN0ZXJBY2NvdW50Q29uZmlnIHtcbiAgcHJvdmlkZXI6IHN0cmluZztcbiAgYWNjb3VudElkOiBzdHJpbmc7XG4gIGFwaUtleTogc3RyaW5nO1xuICBhcGlTZWNyZXQ/OiBzdHJpbmc7XG4gIGZyb21OdW1iZXI/OiBzdHJpbmc7XG4gIGZyb21FbWFpbD86IHN0cmluZztcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG4gIHJlZ2lvbj86IHN0cmluZztcbiAgcmF0ZUxpbWl0Pzoge1xuICAgIHBlck1pbnV0ZTogbnVtYmVyO1xuICAgIHBlckhvdXI6IG51bWJlcjtcbiAgICBwZXJEYXk6IG51bWJlcjtcbiAgfTtcbiAgY29zdFBlck1lc3NhZ2U/OiB7XG4gICAgc21zOiBudW1iZXI7XG4gICAgZW1haWw6IG51bWJlcjtcbiAgICB3aGF0c2FwcDogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hc3RlckFjY291bnRzQ29uZmlnIHtcbiAgc21zOiB7XG4gICAgdHdpbGlvOiBNYXN0ZXJBY2NvdW50Q29uZmlnO1xuICAgIGFmcmljYXNUYWxraW5nOiBNYXN0ZXJBY2NvdW50Q29uZmlnO1xuICAgIHRlcm1paTogTWFzdGVyQWNjb3VudENvbmZpZztcbiAgfTtcbiAgZW1haWw6IHtcbiAgICBzZW5kZ3JpZDogTWFzdGVyQWNjb3VudENvbmZpZztcbiAgICBtYWlsZ3VuOiBNYXN0ZXJBY2NvdW50Q29uZmlnO1xuICAgIHBvc3RtYXJrOiBNYXN0ZXJBY2NvdW50Q29uZmlnO1xuICB9O1xuICB3aGF0c2FwcDoge1xuICAgIHR3aWxpb1doYXRzQXBwOiBNYXN0ZXJBY2NvdW50Q29uZmlnO1xuICAgIHdoYXRzYXBwQnVzaW5lc3M6IE1hc3RlckFjY291bnRDb25maWc7XG4gIH07XG59XG5cbi8vIE1hc3RlciBhY2NvdW50cyBjb25maWd1cmF0aW9uXG5leHBvcnQgY29uc3QgbWFzdGVyQWNjb3VudHNDb25maWc6IE1hc3RlckFjY291bnRzQ29uZmlnID0ge1xuICBzbXM6IHtcbiAgICB0d2lsaW86IHtcbiAgICAgIHByb3ZpZGVyOiAndHdpbGlvJyxcbiAgICAgIGFjY291bnRJZDogcHJvY2Vzcy5lbnYuTUFTVEVSX1RXSUxJT19BQ0NPVU5UX1NJRCB8fCAnJyxcbiAgICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuTUFTVEVSX1RXSUxJT19BVVRIX1RPS0VOIHx8ICcnLFxuICAgICAgZnJvbU51bWJlcjogcHJvY2Vzcy5lbnYuTUFTVEVSX1RXSUxJT19GUk9NX05VTUJFUiB8fCAnJyxcbiAgICAgIGlzQWN0aXZlOiAhIXByb2Nlc3MuZW52Lk1BU1RFUl9UV0lMSU9fQUNDT1VOVF9TSUQsXG4gICAgICByZWdpb246ICd1cy1lYXN0LTEnLFxuICAgICAgcmF0ZUxpbWl0OiB7XG4gICAgICAgIHBlck1pbnV0ZTogNjAsXG4gICAgICAgIHBlckhvdXI6IDM2MDAsXG4gICAgICAgIHBlckRheTogODY0MDBcbiAgICAgIH0sXG4gICAgICBjb3N0UGVyTWVzc2FnZToge1xuICAgICAgICBzbXM6IDAuMDA3NSwgLy8gJDAuMDA3NSBwZXIgU01TXG4gICAgICAgIGVtYWlsOiAwLFxuICAgICAgICB3aGF0c2FwcDogMFxuICAgICAgfVxuICAgIH0sXG4gICAgYWZyaWNhc1RhbGtpbmc6IHtcbiAgICAgIHByb3ZpZGVyOiAnYWZyaWNhcy10YWxraW5nJyxcbiAgICAgIGFjY291bnRJZDogcHJvY2Vzcy5lbnYuTUFTVEVSX0FUX1VTRVJOQU1FIHx8ICcnLFxuICAgICAgYXBpS2V5OiBwcm9jZXNzLmVudi5NQVNURVJfQVRfQVBJX0tFWSB8fCAnJyxcbiAgICAgIGZyb21OdW1iZXI6IHByb2Nlc3MuZW52Lk1BU1RFUl9BVF9GUk9NX05VTUJFUiB8fCAnJyxcbiAgICAgIGlzQWN0aXZlOiAhIXByb2Nlc3MuZW52Lk1BU1RFUl9BVF9BUElfS0VZLFxuICAgICAgcmVnaW9uOiAnYWZyaWNhJyxcbiAgICAgIHJhdGVMaW1pdDoge1xuICAgICAgICBwZXJNaW51dGU6IDEwMCxcbiAgICAgICAgcGVySG91cjogNjAwMCxcbiAgICAgICAgcGVyRGF5OiAxNDQwMDBcbiAgICAgIH0sXG4gICAgICBjb3N0UGVyTWVzc2FnZToge1xuICAgICAgICBzbXM6IDAuMDUsIC8vIDUgY2VudHMgcGVyIFNNUyBpbiBBZnJpY2FuIG1hcmtldHNcbiAgICAgICAgZW1haWw6IDAsXG4gICAgICAgIHdoYXRzYXBwOiAwXG4gICAgICB9XG4gICAgfSxcbiAgICB0ZXJtaWk6IHtcbiAgICAgIHByb3ZpZGVyOiAndGVybWlpJyxcbiAgICAgIGFjY291bnRJZDogcHJvY2Vzcy5lbnYuTUFTVEVSX1RFUk1JSV9TRU5ERVJfSUQgfHwgJycsXG4gICAgICBhcGlLZXk6IHByb2Nlc3MuZW52Lk1BU1RFUl9URVJNSUlfQVBJX0tFWSB8fCAnJyxcbiAgICAgIGZyb21OdW1iZXI6IHByb2Nlc3MuZW52Lk1BU1RFUl9URVJNSUlfRlJPTV9OVU1CRVIgfHwgJycsXG4gICAgICBpc0FjdGl2ZTogISFwcm9jZXNzLmVudi5NQVNURVJfVEVSTUlJX0FQSV9LRVksXG4gICAgICByZWdpb246ICduaWdlcmlhJyxcbiAgICAgIHJhdGVMaW1pdDoge1xuICAgICAgICBwZXJNaW51dGU6IDEyMCxcbiAgICAgICAgcGVySG91cjogNzIwMCxcbiAgICAgICAgcGVyRGF5OiAxNzI4MDBcbiAgICAgIH0sXG4gICAgICBjb3N0UGVyTWVzc2FnZToge1xuICAgICAgICBzbXM6IDAuMDQsIC8vIDQgY2VudHMgcGVyIFNNUyBpbiBOaWdlcmlhXG4gICAgICAgIGVtYWlsOiAwLFxuICAgICAgICB3aGF0c2FwcDogMFxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgZW1haWw6IHtcbiAgICBzZW5kZ3JpZDoge1xuICAgICAgcHJvdmlkZXI6ICdzZW5kZ3JpZCcsXG4gICAgICBhY2NvdW50SWQ6IHByb2Nlc3MuZW52Lk1BU1RFUl9TRU5ER1JJRF9VU0VSTkFNRSB8fCAnJyxcbiAgICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuTUFTVEVSX1NFTkRHUklEX0FQSV9LRVkgfHwgJycsXG4gICAgICBmcm9tRW1haWw6IHByb2Nlc3MuZW52Lk1BU1RFUl9TRU5ER1JJRF9GUk9NX0VNQUlMIHx8ICcnLFxuICAgICAgaXNBY3RpdmU6ICEhcHJvY2Vzcy5lbnYuTUFTVEVSX1NFTkRHUklEX0FQSV9LRVksXG4gICAgICByZWdpb246ICdnbG9iYWwnLFxuICAgICAgcmF0ZUxpbWl0OiB7XG4gICAgICAgIHBlck1pbnV0ZTogNjAwLFxuICAgICAgICBwZXJIb3VyOiAzNjAwMCxcbiAgICAgICAgcGVyRGF5OiA4NjQwMDBcbiAgICAgIH0sXG4gICAgICBjb3N0UGVyTWVzc2FnZToge1xuICAgICAgICBzbXM6IDAsXG4gICAgICAgIGVtYWlsOiAwLjAwMTIsIC8vICQwLjAwMTIgcGVyIGVtYWlsXG4gICAgICAgIHdoYXRzYXBwOiAwXG4gICAgICB9XG4gICAgfSxcbiAgICBtYWlsZ3VuOiB7XG4gICAgICBwcm92aWRlcjogJ21haWxndW4nLFxuICAgICAgYWNjb3VudElkOiBwcm9jZXNzLmVudi5NQVNURVJfTUFJTEdVTl9ET01BSU4gfHwgJycsXG4gICAgICBhcGlLZXk6IHByb2Nlc3MuZW52Lk1BU1RFUl9NQUlMR1VOX0FQSV9LRVkgfHwgJycsXG4gICAgICBmcm9tRW1haWw6IHByb2Nlc3MuZW52Lk1BU1RFUl9NQUlMR1VOX0ZST01fRU1BSUwgfHwgJycsXG4gICAgICBpc0FjdGl2ZTogISFwcm9jZXNzLmVudi5NQVNURVJfTUFJTEdVTl9BUElfS0VZLFxuICAgICAgcmVnaW9uOiAndXMnLFxuICAgICAgcmF0ZUxpbWl0OiB7XG4gICAgICAgIHBlck1pbnV0ZTogMTAwMCxcbiAgICAgICAgcGVySG91cjogNjAwMDAsXG4gICAgICAgIHBlckRheTogMTQ0MDAwMFxuICAgICAgfSxcbiAgICAgIGNvc3RQZXJNZXNzYWdlOiB7XG4gICAgICAgIHNtczogMCxcbiAgICAgICAgZW1haWw6IDAuMDAxLCAvLyAkMC4wMDEgcGVyIGVtYWlsXG4gICAgICAgIHdoYXRzYXBwOiAwXG4gICAgICB9XG4gICAgfSxcbiAgICBwb3N0bWFyazoge1xuICAgICAgcHJvdmlkZXI6ICdwb3N0bWFyaycsXG4gICAgICBhY2NvdW50SWQ6IHByb2Nlc3MuZW52Lk1BU1RFUl9QT1NUTUFSS19BQ0NPVU5UX0lEIHx8ICcnLFxuICAgICAgYXBpS2V5OiBwcm9jZXNzLmVudi5NQVNURVJfUE9TVE1BUktfQVBJX0tFWSB8fCAnJyxcbiAgICAgIGZyb21FbWFpbDogcHJvY2Vzcy5lbnYuTUFTVEVSX1BPU1RNQVJLX0ZST01fRU1BSUwgfHwgJycsXG4gICAgICBpc0FjdGl2ZTogISFwcm9jZXNzLmVudi5NQVNURVJfUE9TVE1BUktfQVBJX0tFWSxcbiAgICAgIHJlZ2lvbjogJ3VzJyxcbiAgICAgIHJhdGVMaW1pdDoge1xuICAgICAgICBwZXJNaW51dGU6IDMwMCxcbiAgICAgICAgcGVySG91cjogMTgwMDAsXG4gICAgICAgIHBlckRheTogNDMyMDAwXG4gICAgICB9LFxuICAgICAgY29zdFBlck1lc3NhZ2U6IHtcbiAgICAgICAgc21zOiAwLFxuICAgICAgICBlbWFpbDogMC4wMDI1LCAvLyAkMC4wMDI1IHBlciBlbWFpbFxuICAgICAgICB3aGF0c2FwcDogMFxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgd2hhdHNhcHA6IHtcbiAgICB0d2lsaW9XaGF0c0FwcDoge1xuICAgICAgcHJvdmlkZXI6ICd0d2lsaW8td2hhdHNhcHAnLFxuICAgICAgYWNjb3VudElkOiBwcm9jZXNzLmVudi5NQVNURVJfVFdJTElPX1dIQVRTQVBQX0FDQ09VTlRfU0lEIHx8ICcnLFxuICAgICAgYXBpS2V5OiBwcm9jZXNzLmVudi5NQVNURVJfVFdJTElPX1dIQVRTQVBQX0FVVEhfVE9LRU4gfHwgJycsXG4gICAgICBmcm9tTnVtYmVyOiBwcm9jZXNzLmVudi5NQVNURVJfVFdJTElPX1dIQVRTQVBQX0ZST01fTlVNQkVSIHx8ICcnLFxuICAgICAgaXNBY3RpdmU6ICEhcHJvY2Vzcy5lbnYuTUFTVEVSX1RXSUxJT19XSEFUU0FQUF9BQ0NPVU5UX1NJRCxcbiAgICAgIHJlZ2lvbjogJ2dsb2JhbCcsXG4gICAgICByYXRlTGltaXQ6IHtcbiAgICAgICAgcGVyTWludXRlOiA4MCxcbiAgICAgICAgcGVySG91cjogNDgwMCxcbiAgICAgICAgcGVyRGF5OiAxMTUyMDBcbiAgICAgIH0sXG4gICAgICBjb3N0UGVyTWVzc2FnZToge1xuICAgICAgICBzbXM6IDAsXG4gICAgICAgIGVtYWlsOiAwLFxuICAgICAgICB3aGF0c2FwcDogMC4wMDUgLy8gJDAuMDA1IHBlciBXaGF0c0FwcCBtZXNzYWdlXG4gICAgICB9XG4gICAgfSxcbiAgICB3aGF0c2FwcEJ1c2luZXNzOiB7XG4gICAgICBwcm92aWRlcjogJ3doYXRzYXBwLWJ1c2luZXNzJyxcbiAgICAgIGFjY291bnRJZDogcHJvY2Vzcy5lbnYuTUFTVEVSX1dIQVRTQVBQX0JVU0lORVNTX0FDQ09VTlRfSUQgfHwgJycsXG4gICAgICBhcGlLZXk6IHByb2Nlc3MuZW52Lk1BU1RFUl9XSEFUU0FQUF9CVVNJTkVTU19BQ0NFU1NfVE9LRU4gfHwgJycsXG4gICAgICBmcm9tTnVtYmVyOiBwcm9jZXNzLmVudi5NQVNURVJfV0hBVFNBUFBfQlVTSU5FU1NfUEhPTkVfTlVNQkVSIHx8ICcnLFxuICAgICAgaXNBY3RpdmU6ICEhcHJvY2Vzcy5lbnYuTUFTVEVSX1dIQVRTQVBQX0JVU0lORVNTX0FDQ0VTU19UT0tFTixcbiAgICAgIHJlZ2lvbjogJ2dsb2JhbCcsXG4gICAgICByYXRlTGltaXQ6IHtcbiAgICAgICAgcGVyTWludXRlOiA2MCxcbiAgICAgICAgcGVySG91cjogMzYwMCxcbiAgICAgICAgcGVyRGF5OiA4NjQwMFxuICAgICAgfSxcbiAgICAgIGNvc3RQZXJNZXNzYWdlOiB7XG4gICAgICAgIHNtczogMCxcbiAgICAgICAgZW1haWw6IDAsXG4gICAgICAgIHdoYXRzYXBwOiAwLjAwNCAvLyAkMC4wMDQgcGVyIFdoYXRzQXBwIG1lc3NhZ2VcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIG1hc3RlciBhY2NvdW50IG1hbmFnZW1lbnRcbmV4cG9ydCBjbGFzcyBNYXN0ZXJBY2NvdW50TWFuYWdlciB7XG4gIC8qKlxuICAgKiBHZXQgdGhlIGJlc3QgYXZhaWxhYmxlIG1hc3RlciBhY2NvdW50IGZvciBhIHNwZWNpZmljIGNoYW5uZWxcbiAgICovXG4gIHN0YXRpYyBnZXRCZXN0TWFzdGVyQWNjb3VudChjaGFubmVsOiAnc21zJyB8ICdlbWFpbCcgfCAnd2hhdHNhcHAnLCByZWdpb24/OiBzdHJpbmcpOiBNYXN0ZXJBY2NvdW50Q29uZmlnIHwgbnVsbCB7XG4gICAgY29uc3QgY2hhbm5lbEFjY291bnRzID0gbWFzdGVyQWNjb3VudHNDb25maWdbY2hhbm5lbF07XG4gICAgXG4gICAgLy8gRmlsdGVyIGFjdGl2ZSBhY2NvdW50c1xuICAgIGNvbnN0IGFjdGl2ZUFjY291bnRzID0gT2JqZWN0LnZhbHVlcyhjaGFubmVsQWNjb3VudHMpLmZpbHRlcihhY2NvdW50ID0+IGFjY291bnQuaXNBY3RpdmUpO1xuICAgIFxuICAgIGlmIChhY3RpdmVBY2NvdW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICAvLyBQcmlvcml0aXplIGJ5IHJlZ2lvbiBpZiBzcGVjaWZpZWRcbiAgICBpZiAocmVnaW9uKSB7XG4gICAgICBjb25zdCByZWdpb25NYXRjaCA9IGFjdGl2ZUFjY291bnRzLmZpbmQoYWNjb3VudCA9PiBhY2NvdW50LnJlZ2lvbiA9PT0gcmVnaW9uKTtcbiAgICAgIGlmIChyZWdpb25NYXRjaCkge1xuICAgICAgICByZXR1cm4gcmVnaW9uTWF0Y2g7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBBZnJpY2FuIG1hcmtldHMsIHByaW9yaXRpemUgQWZyaWNhJ3MgVGFsa2luZyBmb3IgU01TXG4gICAgaWYgKGNoYW5uZWwgPT09ICdzbXMnICYmIChyZWdpb24gPT09ICdhZnJpY2EnIHx8IHJlZ2lvbiA9PT0gJ25pZ2VyaWEnIHx8IHJlZ2lvbiA9PT0gJ2tlbnlhJykpIHtcbiAgICAgIGNvbnN0IGFmcmljYXNUYWxraW5nID0gYWN0aXZlQWNjb3VudHMuZmluZChhY2NvdW50ID0+IGFjY291bnQucHJvdmlkZXIgPT09ICdhZnJpY2FzLXRhbGtpbmcnKTtcbiAgICAgIGlmIChhZnJpY2FzVGFsa2luZykge1xuICAgICAgICByZXR1cm4gYWZyaWNhc1RhbGtpbmc7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIERlZmF1bHQgdG8gZmlyc3QgYWN0aXZlIGFjY291bnRcbiAgICByZXR1cm4gYWN0aXZlQWNjb3VudHNbMF07XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgY29zdCBmb3IgYSBtZXNzYWdlIGNhbXBhaWduXG4gICAqL1xuICBzdGF0aWMgY2FsY3VsYXRlQ29zdChcbiAgICBjaGFubmVsOiAnc21zJyB8ICdlbWFpbCcgfCAnd2hhdHNhcHAnLFxuICAgIG1lc3NhZ2VDb3VudDogbnVtYmVyLFxuICAgIHJlZ2lvbj86IHN0cmluZ1xuICApOiB7IGNvc3Q6IG51bWJlcjsgcHJvdmlkZXI6IHN0cmluZyB9IHtcbiAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5nZXRCZXN0TWFzdGVyQWNjb3VudChjaGFubmVsLCByZWdpb24pO1xuICAgIFxuICAgIGlmICghYWNjb3VudCkge1xuICAgICAgcmV0dXJuIHsgY29zdDogMCwgcHJvdmlkZXI6ICdub25lJyB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjb3N0UGVyTWVzc2FnZSA9IGFjY291bnQuY29zdFBlck1lc3NhZ2U/LltjaGFubmVsXSB8fCAwO1xuICAgIGNvbnN0IGNvc3QgPSBtZXNzYWdlQ291bnQgKiBjb3N0UGVyTWVzc2FnZTtcbiAgICBcbiAgICByZXR1cm4geyBjb3N0LCBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlciB9O1xuICB9XG4gIFxuICAvKipcbiAgICogQ2hlY2sgaWYgd2UgaGF2ZSBjYXBhY2l0eSBmb3IgYSBtZXNzYWdlIGNhbXBhaWduXG4gICAqL1xuICBzdGF0aWMgY2hlY2tDYXBhY2l0eShcbiAgICBjaGFubmVsOiAnc21zJyB8ICdlbWFpbCcgfCAnd2hhdHNhcHAnLFxuICAgIG1lc3NhZ2VDb3VudDogbnVtYmVyLFxuICAgIHJlZ2lvbj86IHN0cmluZ1xuICApOiB7IGNhblNlbmQ6IGJvb2xlYW47IHByb3ZpZGVyOiBzdHJpbmc7IHJhdGVMaW1pdDogYW55IH0ge1xuICAgIGNvbnN0IGFjY291bnQgPSB0aGlzLmdldEJlc3RNYXN0ZXJBY2NvdW50KGNoYW5uZWwsIHJlZ2lvbik7XG4gICAgXG4gICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICByZXR1cm4geyBjYW5TZW5kOiBmYWxzZSwgcHJvdmlkZXI6ICdub25lJywgcmF0ZUxpbWl0OiBudWxsIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHJhdGVMaW1pdCA9IGFjY291bnQucmF0ZUxpbWl0O1xuICAgIFxuICAgIC8vIEZvciBub3csIGFzc3VtZSB3ZSBjYW4gc2VuZCBpZiB3ZSBoYXZlIGFuIGFjdGl2ZSBhY2NvdW50XG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgdGhpcyB3b3VsZCBjaGVjayBhZ2FpbnN0IHVzYWdlIHRyYWNraW5nXG4gICAgY29uc3QgY2FuU2VuZCA9IHJhdGVMaW1pdCA/IG1lc3NhZ2VDb3VudCA8PSByYXRlTGltaXQucGVyRGF5IDogdHJ1ZTtcbiAgICBcbiAgICByZXR1cm4geyBjYW5TZW5kLCBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlciwgcmF0ZUxpbWl0IH07XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBHZXQgYWxsIGFjdGl2ZSBtYXN0ZXIgYWNjb3VudHNcbiAgICovXG4gIHN0YXRpYyBnZXRBbGxBY3RpdmVBY2NvdW50cygpOiB7IGNoYW5uZWw6IHN0cmluZzsgcHJvdmlkZXI6IHN0cmluZzsgY29uZmlnOiBNYXN0ZXJBY2NvdW50Q29uZmlnIH1bXSB7XG4gICAgY29uc3QgYWNjb3VudHMgPSBbXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IFtjaGFubmVsLCBwcm92aWRlcnNdIG9mIE9iamVjdC5lbnRyaWVzKG1hc3RlckFjY291bnRzQ29uZmlnKSkge1xuICAgICAgZm9yIChjb25zdCBbcHJvdmlkZXIsIGNvbmZpZ10gb2YgT2JqZWN0LmVudHJpZXMocHJvdmlkZXJzKSkge1xuICAgICAgICBpZiAoY29uZmlnLmlzQWN0aXZlKSB7XG4gICAgICAgICAgYWNjb3VudHMucHVzaCh7IGNoYW5uZWwsIHByb3ZpZGVyLCBjb25maWcgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGFjY291bnRzO1xuICB9XG4gIFxuICAvKipcbiAgICogVmFsaWRhdGUgbWFzdGVyIGFjY291bnQgY29uZmlndXJhdGlvblxuICAgKi9cbiAgc3RhdGljIHZhbGlkYXRlQ29uZmlndXJhdGlvbigpOiB7IGlzVmFsaWQ6IGJvb2xlYW47IGVycm9yczogc3RyaW5nW10gfSB7XG4gICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgYXQgbGVhc3Qgb25lIGFjdGl2ZSBhY2NvdW50IHBlciBjaGFubmVsXG4gICAgY29uc3QgY2hhbm5lbHMgPSBbJ3NtcycsICdlbWFpbCcsICd3aGF0c2FwcCddIGFzIGNvbnN0O1xuICAgIFxuICAgIGZvciAoY29uc3QgY2hhbm5lbCBvZiBjaGFubmVscykge1xuICAgICAgY29uc3QgY2hhbm5lbEFjY291bnRzID0gbWFzdGVyQWNjb3VudHNDb25maWdbY2hhbm5lbF07XG4gICAgICBjb25zdCBhY3RpdmVBY2NvdW50cyA9IE9iamVjdC52YWx1ZXMoY2hhbm5lbEFjY291bnRzKS5maWx0ZXIoYWNjb3VudCA9PiBhY2NvdW50LmlzQWN0aXZlKTtcbiAgICAgIFxuICAgICAgaWYgKGFjdGl2ZUFjY291bnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBlcnJvcnMucHVzaChgTm8gYWN0aXZlIG1hc3RlciBhY2NvdW50cyBjb25maWd1cmVkIGZvciAke2NoYW5uZWx9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBtaXNzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICAgIGNvbnN0IHJlcXVpcmVkRW52VmFycyA9IFtcbiAgICAgICdNQVNURVJfVFdJTElPX0FDQ09VTlRfU0lEJyxcbiAgICAgICdNQVNURVJfVFdJTElPX0FVVEhfVE9LRU4nLFxuICAgICAgJ01BU1RFUl9TRU5ER1JJRF9BUElfS0VZJ1xuICAgIF07XG4gICAgXG4gICAgZm9yIChjb25zdCBlbnZWYXIgb2YgcmVxdWlyZWRFbnZWYXJzKSB7XG4gICAgICBpZiAoIXByb2Nlc3MuZW52W2VudlZhcl0pIHtcbiAgICAgICAgZXJyb3JzLnB1c2goYE1pc3NpbmcgZW52aXJvbm1lbnQgdmFyaWFibGU6ICR7ZW52VmFyfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4geyBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLCBlcnJvcnMgfTtcbiAgfVxufVxuXG4vLyBDb3N0IG1hcmt1cCBjb25maWd1cmF0aW9uIGZvciByZXNlbGxpbmdcbmV4cG9ydCBjb25zdCBDT1NUX01BUktVUCA9IHtcbiAgc21zOiAyLjUsIC8vIDIuNXggbWFya3VwIG9uIFNNUyBjb3N0c1xuICBlbWFpbDogMy4wLCAvLyAzeCBtYXJrdXAgb24gZW1haWwgY29zdHNcbiAgd2hhdHNhcHA6IDIuMCAvLyAyeCBtYXJrdXAgb24gV2hhdHNBcHAgY29zdHNcbn07XG5cbi8vIENyZWRpdCBjb252ZXJzaW9uIHJhdGVzICgxIGNyZWRpdCA9IGJhc2UgY29zdClcbmV4cG9ydCBjb25zdCBDUkVESVRfUkFURVMgPSB7XG4gIHNtczogMC4xLCAvLyAxMCBjZW50cyBwZXIgU01TIGNyZWRpdFxuICBlbWFpbDogMC4wMSwgLy8gMSBjZW50IHBlciBlbWFpbCBjcmVkaXRcbiAgd2hhdHNhcHA6IDAuMDggLy8gOCBjZW50cyBwZXIgV2hhdHNBcHAgY3JlZGl0XG59OyJdLCJuYW1lcyI6WyJDT1NUX01BUktVUCIsIkNSRURJVF9SQVRFUyIsIk1hc3RlckFjY291bnRNYW5hZ2VyIiwibWFzdGVyQWNjb3VudHNDb25maWciLCJzbXMiLCJ0d2lsaW8iLCJwcm92aWRlciIsImFjY291bnRJZCIsInByb2Nlc3MiLCJlbnYiLCJNQVNURVJfVFdJTElPX0FDQ09VTlRfU0lEIiwiYXBpS2V5IiwiTUFTVEVSX1RXSUxJT19BVVRIX1RPS0VOIiwiZnJvbU51bWJlciIsIk1BU1RFUl9UV0lMSU9fRlJPTV9OVU1CRVIiLCJpc0FjdGl2ZSIsInJlZ2lvbiIsInJhdGVMaW1pdCIsInBlck1pbnV0ZSIsInBlckhvdXIiLCJwZXJEYXkiLCJjb3N0UGVyTWVzc2FnZSIsImVtYWlsIiwid2hhdHNhcHAiLCJhZnJpY2FzVGFsa2luZyIsIk1BU1RFUl9BVF9VU0VSTkFNRSIsIk1BU1RFUl9BVF9BUElfS0VZIiwiTUFTVEVSX0FUX0ZST01fTlVNQkVSIiwidGVybWlpIiwiTUFTVEVSX1RFUk1JSV9TRU5ERVJfSUQiLCJNQVNURVJfVEVSTUlJX0FQSV9LRVkiLCJNQVNURVJfVEVSTUlJX0ZST01fTlVNQkVSIiwic2VuZGdyaWQiLCJNQVNURVJfU0VOREdSSURfVVNFUk5BTUUiLCJNQVNURVJfU0VOREdSSURfQVBJX0tFWSIsImZyb21FbWFpbCIsIk1BU1RFUl9TRU5ER1JJRF9GUk9NX0VNQUlMIiwibWFpbGd1biIsIk1BU1RFUl9NQUlMR1VOX0RPTUFJTiIsIk1BU1RFUl9NQUlMR1VOX0FQSV9LRVkiLCJNQVNURVJfTUFJTEdVTl9GUk9NX0VNQUlMIiwicG9zdG1hcmsiLCJNQVNURVJfUE9TVE1BUktfQUNDT1VOVF9JRCIsIk1BU1RFUl9QT1NUTUFSS19BUElfS0VZIiwiTUFTVEVSX1BPU1RNQVJLX0ZST01fRU1BSUwiLCJ0d2lsaW9XaGF0c0FwcCIsIk1BU1RFUl9UV0lMSU9fV0hBVFNBUFBfQUNDT1VOVF9TSUQiLCJNQVNURVJfVFdJTElPX1dIQVRTQVBQX0FVVEhfVE9LRU4iLCJNQVNURVJfVFdJTElPX1dIQVRTQVBQX0ZST01fTlVNQkVSIiwid2hhdHNhcHBCdXNpbmVzcyIsIk1BU1RFUl9XSEFUU0FQUF9CVVNJTkVTU19BQ0NPVU5UX0lEIiwiTUFTVEVSX1dIQVRTQVBQX0JVU0lORVNTX0FDQ0VTU19UT0tFTiIsIk1BU1RFUl9XSEFUU0FQUF9CVVNJTkVTU19QSE9ORV9OVU1CRVIiLCJnZXRCZXN0TWFzdGVyQWNjb3VudCIsImNoYW5uZWwiLCJjaGFubmVsQWNjb3VudHMiLCJhY3RpdmVBY2NvdW50cyIsIk9iamVjdCIsInZhbHVlcyIsImZpbHRlciIsImFjY291bnQiLCJsZW5ndGgiLCJyZWdpb25NYXRjaCIsImZpbmQiLCJjYWxjdWxhdGVDb3N0IiwibWVzc2FnZUNvdW50IiwiY29zdCIsImNoZWNrQ2FwYWNpdHkiLCJjYW5TZW5kIiwiZ2V0QWxsQWN0aXZlQWNjb3VudHMiLCJhY2NvdW50cyIsInByb3ZpZGVycyIsImVudHJpZXMiLCJjb25maWciLCJwdXNoIiwidmFsaWRhdGVDb25maWd1cmF0aW9uIiwiZXJyb3JzIiwiY2hhbm5lbHMiLCJyZXF1aXJlZEVudlZhcnMiLCJlbnZWYXIiLCJpc1ZhbGlkIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQzs7Ozs7Ozs7Ozs7SUFxVVlBLFdBQVc7ZUFBWEE7O0lBT0FDLFlBQVk7ZUFBWkE7O0lBeklBQyxvQkFBb0I7ZUFBcEJBOztJQTFKQUMsb0JBQW9CO2VBQXBCQTs7O0FBQU4sTUFBTUEsdUJBQTZDO0lBQ3hEQyxLQUFLO1FBQ0hDLFFBQVE7WUFDTkMsVUFBVTtZQUNWQyxXQUFXQyxRQUFRQyxHQUFHLENBQUNDLHlCQUF5QixJQUFJO1lBQ3BEQyxRQUFRSCxRQUFRQyxHQUFHLENBQUNHLHdCQUF3QixJQUFJO1lBQ2hEQyxZQUFZTCxRQUFRQyxHQUFHLENBQUNLLHlCQUF5QixJQUFJO1lBQ3JEQyxVQUFVLENBQUMsQ0FBQ1AsUUFBUUMsR0FBRyxDQUFDQyx5QkFBeUI7WUFDakRNLFFBQVE7WUFDUkMsV0FBVztnQkFDVEMsV0FBVztnQkFDWEMsU0FBUztnQkFDVEMsUUFBUTtZQUNWO1lBQ0FDLGdCQUFnQjtnQkFDZGpCLEtBQUs7Z0JBQ0xrQixPQUFPO2dCQUNQQyxVQUFVO1lBQ1o7UUFDRjtRQUNBQyxnQkFBZ0I7WUFDZGxCLFVBQVU7WUFDVkMsV0FBV0MsUUFBUUMsR0FBRyxDQUFDZ0Isa0JBQWtCLElBQUk7WUFDN0NkLFFBQVFILFFBQVFDLEdBQUcsQ0FBQ2lCLGlCQUFpQixJQUFJO1lBQ3pDYixZQUFZTCxRQUFRQyxHQUFHLENBQUNrQixxQkFBcUIsSUFBSTtZQUNqRFosVUFBVSxDQUFDLENBQUNQLFFBQVFDLEdBQUcsQ0FBQ2lCLGlCQUFpQjtZQUN6Q1YsUUFBUTtZQUNSQyxXQUFXO2dCQUNUQyxXQUFXO2dCQUNYQyxTQUFTO2dCQUNUQyxRQUFRO1lBQ1Y7WUFDQUMsZ0JBQWdCO2dCQUNkakIsS0FBSztnQkFDTGtCLE9BQU87Z0JBQ1BDLFVBQVU7WUFDWjtRQUNGO1FBQ0FLLFFBQVE7WUFDTnRCLFVBQVU7WUFDVkMsV0FBV0MsUUFBUUMsR0FBRyxDQUFDb0IsdUJBQXVCLElBQUk7WUFDbERsQixRQUFRSCxRQUFRQyxHQUFHLENBQUNxQixxQkFBcUIsSUFBSTtZQUM3Q2pCLFlBQVlMLFFBQVFDLEdBQUcsQ0FBQ3NCLHlCQUF5QixJQUFJO1lBQ3JEaEIsVUFBVSxDQUFDLENBQUNQLFFBQVFDLEdBQUcsQ0FBQ3FCLHFCQUFxQjtZQUM3Q2QsUUFBUTtZQUNSQyxXQUFXO2dCQUNUQyxXQUFXO2dCQUNYQyxTQUFTO2dCQUNUQyxRQUFRO1lBQ1Y7WUFDQUMsZ0JBQWdCO2dCQUNkakIsS0FBSztnQkFDTGtCLE9BQU87Z0JBQ1BDLFVBQVU7WUFDWjtRQUNGO0lBQ0Y7SUFDQUQsT0FBTztRQUNMVSxVQUFVO1lBQ1IxQixVQUFVO1lBQ1ZDLFdBQVdDLFFBQVFDLEdBQUcsQ0FBQ3dCLHdCQUF3QixJQUFJO1lBQ25EdEIsUUFBUUgsUUFBUUMsR0FBRyxDQUFDeUIsdUJBQXVCLElBQUk7WUFDL0NDLFdBQVczQixRQUFRQyxHQUFHLENBQUMyQiwwQkFBMEIsSUFBSTtZQUNyRHJCLFVBQVUsQ0FBQyxDQUFDUCxRQUFRQyxHQUFHLENBQUN5Qix1QkFBdUI7WUFDL0NsQixRQUFRO1lBQ1JDLFdBQVc7Z0JBQ1RDLFdBQVc7Z0JBQ1hDLFNBQVM7Z0JBQ1RDLFFBQVE7WUFDVjtZQUNBQyxnQkFBZ0I7Z0JBQ2RqQixLQUFLO2dCQUNMa0IsT0FBTztnQkFDUEMsVUFBVTtZQUNaO1FBQ0Y7UUFDQWMsU0FBUztZQUNQL0IsVUFBVTtZQUNWQyxXQUFXQyxRQUFRQyxHQUFHLENBQUM2QixxQkFBcUIsSUFBSTtZQUNoRDNCLFFBQVFILFFBQVFDLEdBQUcsQ0FBQzhCLHNCQUFzQixJQUFJO1lBQzlDSixXQUFXM0IsUUFBUUMsR0FBRyxDQUFDK0IseUJBQXlCLElBQUk7WUFDcER6QixVQUFVLENBQUMsQ0FBQ1AsUUFBUUMsR0FBRyxDQUFDOEIsc0JBQXNCO1lBQzlDdkIsUUFBUTtZQUNSQyxXQUFXO2dCQUNUQyxXQUFXO2dCQUNYQyxTQUFTO2dCQUNUQyxRQUFRO1lBQ1Y7WUFDQUMsZ0JBQWdCO2dCQUNkakIsS0FBSztnQkFDTGtCLE9BQU87Z0JBQ1BDLFVBQVU7WUFDWjtRQUNGO1FBQ0FrQixVQUFVO1lBQ1JuQyxVQUFVO1lBQ1ZDLFdBQVdDLFFBQVFDLEdBQUcsQ0FBQ2lDLDBCQUEwQixJQUFJO1lBQ3JEL0IsUUFBUUgsUUFBUUMsR0FBRyxDQUFDa0MsdUJBQXVCLElBQUk7WUFDL0NSLFdBQVczQixRQUFRQyxHQUFHLENBQUNtQywwQkFBMEIsSUFBSTtZQUNyRDdCLFVBQVUsQ0FBQyxDQUFDUCxRQUFRQyxHQUFHLENBQUNrQyx1QkFBdUI7WUFDL0MzQixRQUFRO1lBQ1JDLFdBQVc7Z0JBQ1RDLFdBQVc7Z0JBQ1hDLFNBQVM7Z0JBQ1RDLFFBQVE7WUFDVjtZQUNBQyxnQkFBZ0I7Z0JBQ2RqQixLQUFLO2dCQUNMa0IsT0FBTztnQkFDUEMsVUFBVTtZQUNaO1FBQ0Y7SUFDRjtJQUNBQSxVQUFVO1FBQ1JzQixnQkFBZ0I7WUFDZHZDLFVBQVU7WUFDVkMsV0FBV0MsUUFBUUMsR0FBRyxDQUFDcUMsa0NBQWtDLElBQUk7WUFDN0RuQyxRQUFRSCxRQUFRQyxHQUFHLENBQUNzQyxpQ0FBaUMsSUFBSTtZQUN6RGxDLFlBQVlMLFFBQVFDLEdBQUcsQ0FBQ3VDLGtDQUFrQyxJQUFJO1lBQzlEakMsVUFBVSxDQUFDLENBQUNQLFFBQVFDLEdBQUcsQ0FBQ3FDLGtDQUFrQztZQUMxRDlCLFFBQVE7WUFDUkMsV0FBVztnQkFDVEMsV0FBVztnQkFDWEMsU0FBUztnQkFDVEMsUUFBUTtZQUNWO1lBQ0FDLGdCQUFnQjtnQkFDZGpCLEtBQUs7Z0JBQ0xrQixPQUFPO2dCQUNQQyxVQUFVLE1BQU0sOEJBQThCO1lBQ2hEO1FBQ0Y7UUFDQTBCLGtCQUFrQjtZQUNoQjNDLFVBQVU7WUFDVkMsV0FBV0MsUUFBUUMsR0FBRyxDQUFDeUMsbUNBQW1DLElBQUk7WUFDOUR2QyxRQUFRSCxRQUFRQyxHQUFHLENBQUMwQyxxQ0FBcUMsSUFBSTtZQUM3RHRDLFlBQVlMLFFBQVFDLEdBQUcsQ0FBQzJDLHFDQUFxQyxJQUFJO1lBQ2pFckMsVUFBVSxDQUFDLENBQUNQLFFBQVFDLEdBQUcsQ0FBQzBDLHFDQUFxQztZQUM3RG5DLFFBQVE7WUFDUkMsV0FBVztnQkFDVEMsV0FBVztnQkFDWEMsU0FBUztnQkFDVEMsUUFBUTtZQUNWO1lBQ0FDLGdCQUFnQjtnQkFDZGpCLEtBQUs7Z0JBQ0xrQixPQUFPO2dCQUNQQyxVQUFVLE1BQU0sOEJBQThCO1lBQ2hEO1FBQ0Y7SUFDRjtBQUNGO0FBR08sTUFBTXJCO0lBQ1g7O0dBRUMsR0FDRCxPQUFPbUQscUJBQXFCQyxPQUFxQyxFQUFFdEMsTUFBZSxFQUE4QjtRQUM5RyxNQUFNdUMsa0JBQWtCcEQsb0JBQW9CLENBQUNtRCxRQUFRO1FBRXJELHlCQUF5QjtRQUN6QixNQUFNRSxpQkFBaUJDLE9BQU9DLE1BQU0sQ0FBQ0gsaUJBQWlCSSxNQUFNLENBQUNDLENBQUFBLFVBQVdBLFFBQVE3QyxRQUFRO1FBRXhGLElBQUl5QyxlQUFlSyxNQUFNLEtBQUssR0FBRztZQUMvQixPQUFPO1FBQ1Q7UUFFQSxvQ0FBb0M7UUFDcEMsSUFBSTdDLFFBQVE7WUFDVixNQUFNOEMsY0FBY04sZUFBZU8sSUFBSSxDQUFDSCxDQUFBQSxVQUFXQSxRQUFRNUMsTUFBTSxLQUFLQTtZQUN0RSxJQUFJOEMsYUFBYTtnQkFDZixPQUFPQTtZQUNUO1FBQ0Y7UUFFQSwyREFBMkQ7UUFDM0QsSUFBSVIsWUFBWSxTQUFVdEMsQ0FBQUEsV0FBVyxZQUFZQSxXQUFXLGFBQWFBLFdBQVcsT0FBTSxHQUFJO1lBQzVGLE1BQU1RLGlCQUFpQmdDLGVBQWVPLElBQUksQ0FBQ0gsQ0FBQUEsVUFBV0EsUUFBUXRELFFBQVEsS0FBSztZQUMzRSxJQUFJa0IsZ0JBQWdCO2dCQUNsQixPQUFPQTtZQUNUO1FBQ0Y7UUFFQSxrQ0FBa0M7UUFDbEMsT0FBT2dDLGNBQWMsQ0FBQyxFQUFFO0lBQzFCO0lBRUE7O0dBRUMsR0FDRCxPQUFPUSxjQUNMVixPQUFxQyxFQUNyQ1csWUFBb0IsRUFDcEJqRCxNQUFlLEVBQ3FCO1FBQ3BDLE1BQU00QyxVQUFVLElBQUksQ0FBQ1Asb0JBQW9CLENBQUNDLFNBQVN0QztRQUVuRCxJQUFJLENBQUM0QyxTQUFTO1lBQ1osT0FBTztnQkFBRU0sTUFBTTtnQkFBRzVELFVBQVU7WUFBTztRQUNyQztRQUVBLE1BQU1lLGlCQUFpQnVDLFFBQVF2QyxjQUFjLEVBQUUsQ0FBQ2lDLFFBQVEsSUFBSTtRQUM1RCxNQUFNWSxPQUFPRCxlQUFlNUM7UUFFNUIsT0FBTztZQUFFNkM7WUFBTTVELFVBQVVzRCxRQUFRdEQsUUFBUTtRQUFDO0lBQzVDO0lBRUE7O0dBRUMsR0FDRCxPQUFPNkQsY0FDTGIsT0FBcUMsRUFDckNXLFlBQW9CLEVBQ3BCakQsTUFBZSxFQUN5QztRQUN4RCxNQUFNNEMsVUFBVSxJQUFJLENBQUNQLG9CQUFvQixDQUFDQyxTQUFTdEM7UUFFbkQsSUFBSSxDQUFDNEMsU0FBUztZQUNaLE9BQU87Z0JBQUVRLFNBQVM7Z0JBQU85RCxVQUFVO2dCQUFRVyxXQUFXO1lBQUs7UUFDN0Q7UUFFQSxNQUFNQSxZQUFZMkMsUUFBUTNDLFNBQVM7UUFFbkMsMkRBQTJEO1FBQzNELHlEQUF5RDtRQUN6RCxNQUFNbUQsVUFBVW5ELFlBQVlnRCxnQkFBZ0JoRCxVQUFVRyxNQUFNLEdBQUc7UUFFL0QsT0FBTztZQUFFZ0Q7WUFBUzlELFVBQVVzRCxRQUFRdEQsUUFBUTtZQUFFVztRQUFVO0lBQzFEO0lBRUE7O0dBRUMsR0FDRCxPQUFPb0QsdUJBQTZGO1FBQ2xHLE1BQU1DLFdBQVcsRUFBRTtRQUVuQixLQUFLLE1BQU0sQ0FBQ2hCLFNBQVNpQixVQUFVLElBQUlkLE9BQU9lLE9BQU8sQ0FBQ3JFLHNCQUF1QjtZQUN2RSxLQUFLLE1BQU0sQ0FBQ0csVUFBVW1FLE9BQU8sSUFBSWhCLE9BQU9lLE9BQU8sQ0FBQ0QsV0FBWTtnQkFDMUQsSUFBSUUsT0FBTzFELFFBQVEsRUFBRTtvQkFDbkJ1RCxTQUFTSSxJQUFJLENBQUM7d0JBQUVwQjt3QkFBU2hEO3dCQUFVbUU7b0JBQU87Z0JBQzVDO1lBQ0Y7UUFDRjtRQUVBLE9BQU9IO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELE9BQU9LLHdCQUFnRTtRQUNyRSxNQUFNQyxTQUFtQixFQUFFO1FBRTNCLDJEQUEyRDtRQUMzRCxNQUFNQyxXQUFXO1lBQUM7WUFBTztZQUFTO1NBQVc7UUFFN0MsS0FBSyxNQUFNdkIsV0FBV3VCLFNBQVU7WUFDOUIsTUFBTXRCLGtCQUFrQnBELG9CQUFvQixDQUFDbUQsUUFBUTtZQUNyRCxNQUFNRSxpQkFBaUJDLE9BQU9DLE1BQU0sQ0FBQ0gsaUJBQWlCSSxNQUFNLENBQUNDLENBQUFBLFVBQVdBLFFBQVE3QyxRQUFRO1lBRXhGLElBQUl5QyxlQUFlSyxNQUFNLEtBQUssR0FBRztnQkFDL0JlLE9BQU9GLElBQUksQ0FBQyxDQUFDLHlDQUF5QyxFQUFFcEIsU0FBUztZQUNuRTtRQUNGO1FBRUEsMENBQTBDO1FBQzFDLE1BQU13QixrQkFBa0I7WUFDdEI7WUFDQTtZQUNBO1NBQ0Q7UUFFRCxLQUFLLE1BQU1DLFVBQVVELGdCQUFpQjtZQUNwQyxJQUFJLENBQUN0RSxRQUFRQyxHQUFHLENBQUNzRSxPQUFPLEVBQUU7Z0JBQ3hCSCxPQUFPRixJQUFJLENBQUMsQ0FBQyw4QkFBOEIsRUFBRUssUUFBUTtZQUN2RDtRQUNGO1FBRUEsT0FBTztZQUFFQyxTQUFTSixPQUFPZixNQUFNLEtBQUs7WUFBR2U7UUFBTztJQUNoRDtBQUNGO0FBR08sTUFBTTVFLGNBQWM7SUFDekJJLEtBQUs7SUFDTGtCLE9BQU87SUFDUEMsVUFBVSxJQUFJLDhCQUE4QjtBQUM5QztBQUdPLE1BQU10QixlQUFlO0lBQzFCRyxLQUFLO0lBQ0xrQixPQUFPO0lBQ1BDLFVBQVUsS0FBSyw4QkFBOEI7QUFDL0MifQ==