{"version":3,"sources":["/Users/supreme/Desktop/marketsage/src/__tests__/utils/test-utils.tsx"],"sourcesContent":["import React, { ReactElement } from 'react';\nimport { render, RenderOptions } from '@testing-library/react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\n// Mock data generators for testing\nexport const mockVisitorLocation = (overrides = {}) => ({\n  id: 'loc_123',\n  city: 'Lagos',\n  country: 'Nigeria',\n  visitors: 42,\n  latitude: 6.5244,\n  longitude: 3.3792,\n  ...overrides,\n});\n\nexport const mockVisitorJourney = (overrides = {}) => ({\n  id: 'journey_123',\n  visitorId: 'visitor_123',\n  sessionId: 'session_123',\n  startTime: '2024-07-18T10:00:00Z',\n  endTime: '2024-07-18T10:30:00Z',\n  totalPages: 5,\n  engagementScore: 85,\n  conversionEvents: [],\n  pulseData: [\n    {\n      id: 'pulse_1',\n      timestamp: '2024-07-18T10:00:00Z',\n      type: 'PAGE_VIEW' as const,\n      value: 120,\n      metadata: { page: '/', device: 'desktop' }\n    }\n  ],\n  ...overrides,\n});\n\nexport const mockCustomerJourney = (overrides = {}) => ({\n  visitorId: 'visitor_123',\n  sessionId: 'session_123',\n  startTime: '2024-07-18T10:00:00Z',\n  endTime: '2024-07-18T10:30:00Z',\n  totalDuration: 1800,\n  outcome: 'converted' as const,\n  value: 299,\n  engagementScore: 85,\n  steps: [\n    {\n      id: 'step_1',\n      timestamp: '2024-07-18T10:00:00Z',\n      action: 'Landing Page Visit',\n      page: '/',\n      duration: 120,\n      type: 'page_view' as const,\n      metadata: {\n        device: 'desktop' as const,\n        location: 'Lagos, Nigeria',\n        engagement: 85\n      }\n    }\n  ],\n  ...overrides,\n});\n\nexport const mockAnalyticsOverview = (overrides = {}) => ({\n  activeVisitors: 23,\n  totalVisitors: 1547,\n  bounceRate: 32,\n  averageSessionDuration: 245,\n  conversionRate: 4.2,\n  engagementScore: 78,\n  topPages: ['/features', '/pricing', '/'],\n  topSources: ['direct', 'google', 'social'],\n  ...overrides,\n});\n\n// Custom render function with providers\nconst AllTheProviders = ({ children }: { children: React.ReactNode }) => {\n  const queryClient = new QueryClient({\n    defaultOptions: {\n      queries: {\n        retry: false,\n      },\n    },\n  });\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {children}\n    </QueryClientProvider>\n  );\n};\n\nconst customRender = (\n  ui: ReactElement,\n  options?: Omit<RenderOptions, 'wrapper'>\n) => render(ui, { wrapper: AllTheProviders, ...options });\n\nexport * from '@testing-library/react';\nexport { customRender as render };\n\n// Performance testing utilities\nexport const measureComponentPerformance = async (\n  componentRender: () => Promise<void> | void,\n  name: string\n) => {\n  const startTime = performance.now();\n  await componentRender();\n  const endTime = performance.now();\n  const duration = endTime - startTime;\n  \n  console.log(`${name} render time: ${duration.toFixed(2)}ms`);\n  \n  // Assert performance thresholds\n  expect(duration).toBeLessThan(100); // Components should render in < 100ms\n  \n  return duration;\n};\n\n// Accessibility testing helper\nexport const checkAccessibility = async (container: HTMLElement) => {\n  // Check for basic accessibility attributes\n  const interactiveElements = container.querySelectorAll(\n    'button, a, input, select, textarea, [tabindex]'\n  );\n  \n  interactiveElements.forEach(element => {\n    // Check for accessible names\n    const hasAccessibleName = \n      element.getAttribute('aria-label') ||\n      element.getAttribute('aria-labelledby') ||\n      element.textContent?.trim() ||\n      (element as HTMLInputElement).placeholder;\n    \n    if (!hasAccessibleName) {\n      console.warn('Interactive element missing accessible name:', element);\n    }\n  });\n  \n  // Check for proper heading hierarchy\n  const headings = container.querySelectorAll('h1, h2, h3, h4, h5, h6');\n  let previousLevel = 0;\n  \n  headings.forEach(heading => {\n    const level = parseInt(heading.tagName.charAt(1));\n    if (level > previousLevel + 1) {\n      console.warn('Heading hierarchy skipped level:', heading);\n    }\n    previousLevel = level;\n  });\n};\n\n// Mock hook factory\nexport const createMockHook = <T,>(defaultValue: T) => {\n  let mockReturnValue = defaultValue;\n  \n  const mockHook = jest.fn(() => mockReturnValue);\n  \n  mockHook.mockReturnValue = (value: T) => {\n    mockReturnValue = value;\n  };\n  \n  return mockHook;\n};\n\n// Wait for component to stabilize (useful for async components)\nexport const waitForComponentToStabilize = async (timeout = 1000) => {\n  return new Promise(resolve => setTimeout(resolve, timeout));\n};\n\n// Mock data providers\nexport const createMockMCPData = () => ({\n  visitorLocations: [\n    mockVisitorLocation({ city: 'Lagos', visitors: 45 }),\n    mockVisitorLocation({ city: 'Abuja', visitors: 32 }),\n    mockVisitorLocation({ city: 'Kano', visitors: 28 }),\n  ],\n  visitorJourneys: [\n    mockVisitorJourney({ engagementScore: 92 }),\n    mockVisitorJourney({ engagementScore: 76 }),\n    mockVisitorJourney({ engagementScore: 84 }),\n  ],\n  insights: [\n    { id: '1', type: 'engagement', message: 'High engagement detected' },\n    { id: '2', type: 'conversion', message: 'Conversion rate improved' },\n  ],\n  segments: [\n    { id: '1', name: 'High Value Visitors', count: 234 },\n    { id: '2', name: 'New Visitors', count: 567 },\n  ],\n  analyticsOverview: mockAnalyticsOverview(),\n  isLoading: false,\n  error: null,\n  dataSource: 'mcp' as const,\n  mcpEnabled: true,\n  mcpConnected: true,\n});\n\n// Performance benchmarks\nexport const PERFORMANCE_THRESHOLDS = {\n  COMPONENT_RENDER: 100, // ms\n  DATA_FETCH: 500, // ms\n  INTERACTION_RESPONSE: 50, // ms\n  ANIMATION_FRAME: 16.67, // ms (60fps)\n};\n\n// Test data constants\nexport const TEST_CONSTANTS = {\n  MOCK_SESSION_ID: 'test_session_123',\n  MOCK_VISITOR_ID: 'test_visitor_456',\n  MOCK_TIMESTAMP: '2024-07-18T10:00:00Z',\n  MOCK_LOCATIONS: ['Lagos, Nigeria', 'Abuja, Nigeria', 'Kano, Nigeria'],\n  MOCK_DEVICES: ['desktop', 'mobile', 'tablet'] as const,\n};"],"names":["PERFORMANCE_THRESHOLDS","TEST_CONSTANTS","checkAccessibility","createMockHook","createMockMCPData","measureComponentPerformance","mockAnalyticsOverview","mockCustomerJourney","mockVisitorJourney","mockVisitorLocation","render","customRender","waitForComponentToStabilize","overrides","id","city","country","visitors","latitude","longitude","visitorId","sessionId","startTime","endTime","totalPages","engagementScore","conversionEvents","pulseData","timestamp","type","value","metadata","page","device","totalDuration","outcome","steps","action","duration","location","engagement","activeVisitors","totalVisitors","bounceRate","averageSessionDuration","conversionRate","topPages","topSources","AllTheProviders","children","queryClient","QueryClient","defaultOptions","queries","retry","QueryClientProvider","client","ui","options","wrapper","componentRender","name","performance","now","console","log","toFixed","expect","toBeLessThan","container","interactiveElements","querySelectorAll","forEach","element","hasAccessibleName","getAttribute","textContent","trim","placeholder","warn","headings","previousLevel","heading","level","parseInt","tagName","charAt","defaultValue","mockReturnValue","mockHook","jest","fn","timeout","Promise","resolve","setTimeout","visitorLocations","visitorJourneys","insights","message","segments","count","analyticsOverview","isLoading","error","dataSource","mcpEnabled","mcpConnected","COMPONENT_RENDER","DATA_FETCH","INTERACTION_RESPONSE","ANIMATION_FRAME","MOCK_SESSION_ID","MOCK_VISITOR_ID","MOCK_TIMESTAMP","MOCK_LOCATIONS","MOCK_DEVICES"],"mappings":"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"}