{"version":3,"sources":["/Users/supreme/Desktop/marketsage/src/components/leadpulse/FormTracker.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useMemo, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { FileText, Users, TrendingUp, TrendingDown, CheckCircle, XCircle } from 'lucide-react';\n\ninterface FormData {\n  id: string;\n  name: string;\n  submissions: number;\n  completions: number;\n  abandonment: number;\n  conversionRate: number;\n  lastSubmission: string;\n  status: 'active' | 'inactive';\n  averageTime: number;\n}\n\ninterface FormTrackerProps {\n  isLoading?: boolean;\n}\n\nconst FormTracker = React.memo<FormTrackerProps>(({ isLoading }) => {\n  // Demo form data - in real implementation, this would come from MCP\n  const [forms] = useState<FormData[]>([\n    {\n      id: '1',\n      name: 'Contact Form',\n      submissions: 45,\n      completions: 38,\n      abandonment: 7,\n      conversionRate: 84.4,\n      lastSubmission: '2 hours ago',\n      status: 'active',\n      averageTime: 145\n    },\n    {\n      id: '2',\n      name: 'Newsletter Signup',\n      submissions: 123,\n      completions: 118,\n      abandonment: 5,\n      conversionRate: 95.9,\n      lastSubmission: '15 minutes ago',\n      status: 'active',\n      averageTime: 32\n    },\n    {\n      id: '3',\n      name: 'Demo Request',\n      submissions: 28,\n      completions: 19,\n      abandonment: 9,\n      conversionRate: 67.9,\n      lastSubmission: '1 day ago',\n      status: 'active',\n      averageTime: 280\n    },\n    {\n      id: '4',\n      name: 'Feedback Form',\n      submissions: 12,\n      completions: 8,\n      abandonment: 4,\n      conversionRate: 66.7,\n      lastSubmission: '3 days ago',\n      status: 'inactive',\n      averageTime: 195\n    }\n  ]);\n\n  const summary = useMemo(() => {\n    const totalSubmissions = forms.reduce((sum, form) => sum + form.submissions, 0);\n    const totalCompletions = forms.reduce((sum, form) => sum + form.completions, 0);\n    const totalAbandonment = forms.reduce((sum, form) => sum + form.abandonment, 0);\n    const averageConversionRate = forms.reduce((sum, form) => sum + form.conversionRate, 0) / forms.length;\n    const activeForms = forms.filter(form => form.status === 'active').length;\n    \n    return {\n      totalSubmissions,\n      totalCompletions,\n      totalAbandonment,\n      averageConversionRate: Math.round(averageConversionRate * 10) / 10,\n      activeForms,\n      abandonmentRate: Math.round((totalAbandonment / totalSubmissions) * 100)\n    };\n  }, [forms]);\n\n  if (isLoading) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <FileText className=\"h-5 w-5\" />\n            Form Tracking\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"animate-pulse text-gray-500\">Loading form data...</div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <FileText className=\"h-5 w-5\" />\n          Form Tracking\n        </CardTitle>\n        <div className=\"text-sm text-gray-600 mt-1\">\n          {summary.activeForms} active forms • {summary.totalSubmissions} total submissions\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {/* Summary Stats */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div className=\"text-center p-3 bg-green-50 rounded-lg\">\n            <CheckCircle className=\"h-6 w-6 mx-auto text-green-500 mb-2\" />\n            <div className=\"text-lg font-semibold\">{summary.totalCompletions}</div>\n            <div className=\"text-xs text-gray-500\">Completions</div>\n          </div>\n          \n          <div className=\"text-center p-3 bg-red-50 rounded-lg\">\n            <XCircle className=\"h-6 w-6 mx-auto text-red-500 mb-2\" />\n            <div className=\"text-lg font-semibold\">{summary.totalAbandonment}</div>\n            <div className=\"text-xs text-gray-500\">Abandonments</div>\n          </div>\n          \n          <div className=\"text-center p-3 bg-blue-50 rounded-lg\">\n            <TrendingUp className=\"h-6 w-6 mx-auto text-blue-500 mb-2\" />\n            <div className=\"text-lg font-semibold\">{summary.averageConversionRate}%</div>\n            <div className=\"text-xs text-gray-500\">Avg Conversion</div>\n          </div>\n          \n          <div className=\"text-center p-3 bg-orange-50 rounded-lg\">\n            <TrendingDown className=\"h-6 w-6 mx-auto text-orange-500 mb-2\" />\n            <div className=\"text-lg font-semibold\">{summary.abandonmentRate}%</div>\n            <div className=\"text-xs text-gray-500\">Abandonment Rate</div>\n          </div>\n        </div>\n\n        {/* Form List */}\n        <div className=\"space-y-3\">\n          <h4 className=\"text-sm font-medium\">Form Performance</h4>\n          <div className=\"space-y-2\">\n            {forms.map((form) => (\n              <div\n                key={form.id}\n                className=\"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50 transition-colors\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <FileText className=\"h-4 w-4 text-gray-400\" />\n                  <div>\n                    <div className=\"font-medium text-sm\">{form.name}</div>\n                    <div className=\"text-xs text-gray-500\">\n                      Last: {form.lastSubmission} • Avg: {Math.floor(form.averageTime / 60)}m {form.averageTime % 60}s\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"text-right\">\n                    <div className=\"text-sm font-medium\">{form.conversionRate}%</div>\n                    <div className=\"text-xs text-gray-500\">{form.completions}/{form.submissions}</div>\n                  </div>\n                  <Badge variant={form.status === 'active' ? 'default' : 'secondary'}>\n                    {form.status}\n                  </Badge>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Conversion Rate Visualization */}\n        <div className=\"space-y-3\">\n          <h4 className=\"text-sm font-medium\">Conversion Rates</h4>\n          {forms.map((form) => (\n            <div key={form.id} className=\"space-y-1\">\n              <div className=\"flex justify-between text-sm\">\n                <span>{form.name}</span>\n                <span className=\"font-medium\">{form.conversionRate}%</span>\n              </div>\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className={`h-2 rounded-full transition-all ${\n                    form.conversionRate >= 80 ? 'bg-green-500' :\n                    form.conversionRate >= 60 ? 'bg-yellow-500' : 'bg-red-500'\n                  }`}\n                  style={{ width: `${form.conversionRate}%` }}\n                />\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* Quick Insights */}\n        <div className=\"pt-4 border-t\">\n          <h4 className=\"text-sm font-medium mb-2\">Insights</h4>\n          <div className=\"space-y-2 text-sm text-gray-600\">\n            {summary.averageConversionRate > 80 && (\n              <div className=\"flex items-center gap-2\">\n                <TrendingUp className=\"h-4 w-4 text-green-500\" />\n                <span>Excellent form performance overall</span>\n              </div>\n            )}\n            {summary.abandonmentRate > 20 && (\n              <div className=\"flex items-center gap-2\">\n                <TrendingDown className=\"h-4 w-4 text-red-500\" />\n                <span>High abandonment rate needs attention</span>\n              </div>\n            )}\n            {forms.some(form => form.conversionRate < 70) && (\n              <div className=\"flex items-center gap-2\">\n                <XCircle className=\"h-4 w-4 text-orange-500\" />\n                <span>Some forms need optimization</span>\n              </div>\n            )}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n});\n\nFormTracker.displayName = 'FormTracker';\n\nexport { FormTracker };\nexport default FormTracker;"],"names":["FormTracker","React","memo","isLoading","forms","useState","id","name","submissions","completions","abandonment","conversionRate","lastSubmission","status","averageTime","summary","useMemo","totalSubmissions","reduce","sum","form","totalCompletions","totalAbandonment","averageConversionRate","length","activeForms","filter","Math","round","abandonmentRate","Card","className","CardHeader","CardTitle","FileText","CardContent","div","CheckCircle","XCircle","TrendingUp","TrendingDown","h4","map","floor","Badge","variant","span","style","width","some","displayName"],"mappings":"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"}